<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ÈòøÈáåP6‰∏ÄÈù¢(‰∏ä)</title>
    <url>/p/fbd38884.html</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="ÂØÜÁ†ÅÈîôËØØ üò≠" data-whm="ÂΩìÂâçÊñáÁ´†‰∏çËÉΩÊ†°È™åüò≠">
  <script id="hbeData" type="hbeData" data-hmacdigest="54fd2b57b17898e20525652ecb232f8b8ee3615831676dcb5ebd3b35640dac13">601062fcdaf3cca9d544423806934044380848aba583af6c1ea7ebc532dbcc8f340269dd12e0c82ecb6ab6129d2c267f19930d1cad310be292dacbf7c3bb10f16951166737e2f339a4d4b2a2a88c7e34572c8268254c43f2523a1507507b1aefe5e70ceded1ab04260c9ae0d4a5b0047837f524e8827e93f66d1dbdf52747ff2e63741a1c6081766a8d29816ef1110eec5ae027dd889d3738cd04c3ca1c2aef5caa086965616d5d69480fa7c34961f8afe854b20c15c3f674a4c64c084bdbd9c9671f7260df7939a4ac68f614c57bf13d78c825874052ae6152058cf0e0d700890ad4bf7ef0c9817797f3a09d209a34083982778623a343d352806cca06eb61ef4748e58295e70a69d56e14313ea2fd55f9a73323be3cb7a991991531eb85bebd19e4857726321f934785d90b39eb698474cb6bd1e0f7adf8700432c4b24c557e1289b2a7458263ddc3b4ba90e27d979e1ed34f98b14ff9349df42aae4034ed2e73b5af45d8d34c5c5462e7eeec599b5d197a5bf20f31bbf2f8b21e422e72b285ca08d71052789796474598652193f8c3f705a2ec1f076d7e014f6aafe72671510dd44b54e4bf992af12b7a32f0eed279aded56d1e516f29a360809773556fbc62724adbfb34d0236d31d9dbf4187bad1515f6e720cc8a14877771739a945c6d9da3a68b0ffd3eec9782e17df91d4bf38f3162981b340fab44b0b789b09278490eb2938b9e4504268b677389856bd3270c2e1f192f908df2374e3b72158e4ec068e89d641ecec0488e2af5776dd853bc50df92529b445a3f40cb164e6475d4654fb8ac36d31d4ebf181798325aee1554fa15beba13cfaea4a63cd4ae2cae3432006ee4ee00288f8f20981ae77fa03bdfbfe1d2849124c4d415d241234e3d180b2e89dd56119f4bdeb3e40d6d6eccff6184b9df610a59071c70aef808018e2cb84b1411a3a885a06fe8d6245b1107b7e419805f9b477740c1b67417f081186cc51ccaa26e57e8c0ae7bcc5dedf83c1a7b386b40bd60ee973d306feb9048f791f731f38e363df0cec2e27ddd84a6bd70ce88a803e410dd3ad126603f25bcaad915df396a7f41325dc5ca4a96d3bd1ebe376f2030133a653089f15e18a3fd545e90727d5af1619762a7c9c096bcd0a72cd94ecde4cae7a6b2597f9232e1dc204607a4cf9895fd2e84d15dae7ef097bedc874b2892a44820933cfe0cb19b0b9ffe547afec9eb8643fdeef89453c97c8651d2a3f94083e8e92090a59908dc44c069075195c21d1ae521ac5127998d67615ece2ef987b67bfffaf1fc50093afea8a8120d1cd5593d543a3d3947e0111373bb5ed9be8f6b4803003d24867e7083667db7c4ee6494929ac391c9f18efbd7340eaa6a7fbac488bee7f5102d488c4d203ed4d8dc42f1a9413a934392cbd8088e4378bfdcd2e54c28ca545b262a887ef72f9eb20a94862d21559ca6eac77dc4e9799ce728bf3088002db7849caaf4100eab22647addbcd0d8c754dde8f19f3596595711b1cc1077edb71c8e6dfe4989ab7c884565c96858d8a94a7f51bce681da3e3b0053f99c05f089155c904757d89742fb754f6a0cabe12e94aa76a21c545c49250edfc74ad17bd2da7ce45c314592c8ed3cbf6d3588c55b63a22df4c123f85e23818b0377d872df7f6d616b93b72b497da7f48d38917b5fef2e242eba3f227ea615e88e9ea5d38f0733d4fde128e4da328b79af0ef8217d56eddfe902fda1d31a29194769d2e70fc6406b8201a20ba70f298731f184ade81f81fa6a5319f74b91dd61f2828cb5058d341d8e5dab50df0050282203088fd0ed12bc106718a1e7e20ec0e50e3f983509012dd52c50967b8341bf02616741c09aa800afc9757217d8e129bd113882341c21632b570627b29f29315cd9131a44c06ae19a1af5f145cccee9db777b3e278cf8f74c66e647059270f3355c0b8cef62d6eaf083bbd9cb6bd050caeefc7b1cd1213eab947719177024b1462fc585973266d762882ad5d83c69d0d5dac10e1a3fc88807bc3298937d0abd402d93596103f2b9befefc99a940379bfc5f8d9acaa314a0a7b893194efa25ed154f663c1f40881269976679fb533a88fe998b74b48759c4e56f2d7273b4f1d1821ab2059e5d30470d803b2f68b3d76c3aca2938d064af47cec354c4ab847f7e17c8eed33884574c3ed190e01377f0795a3a8be92cad66abc965d65d423af946c930774965794480a1caa98f89572cbe0326a7c82266fe8be203b9f90d2f5efe15d9ac1025e36ee39cf51d6438d5b42bd399b64df2d56b486699b7948aab55c7bee51d21669d307de826b0f6e7fd20cb258aefc6f7ae1e36a68fe09c87e4d28f923b0c5d9f2425cef6e1758cb97eb1b0a14e058da1bd01ea79570b881c7967115bea01dc46eb71393c4e3806bb755d96b1bcb4410c58c864600c659049ca52c55eb6fb2b4cf3ec9247f7bb500d22004e0e168c60abb6619b7128b2db96171aa031ab59264389f9ac086fb6683e341762a1ebe2ed6e428c7c8e57dcc084bd2071eef862452ae7abb349aae37cc762b2fbf61c71c06832b331d8b60d912786753854bf1d6ec7b2c67d81719f71b6d8b0c499359ce4429493680816ace8b99adaa9c7d5792811aa48efebb90d63e9ef1732ec686181b154b5f2245f05526f106c7c9eaa2be4cd5432967f6f8d4e42d548620dc1b7ac0a25530a33e5d6cc5ab5858669ff2eecf934e588962c1fb792ce52b46b9655697f2b05482fe09d3ae3da3a88495a22de6252fab22fc68167b9bc22b911d49977a350a00258ceac35ddb684b3dbf3b4f17c1ff1aef2651497da26a53582047c5d707263ab6393cbe58ac1afabc057b6b536da408ed0d1fac53c9c93a54d9ea0aceac4240e3206690fe5b85cf93ac6d7c321c9d25c3cd81983365cca615207140ca2213402bb82bc1bfcce471f97604fab3de40b430d648efa3b60c9a8f6be5cfd7f89d04ce6577008814a89a33a6023491abca07c71e1d21a4370dceafde11dea34abcf71b2c40a7c6add82f60763ec4838b8d33266203d26d8c27532758460139e0274149f85f5353f2f79b074eb72cd89295c36ed350ac999055067a88a086ce9393e4d06066e5fc55b61a88b6cb3f52c7878e44c8176281b54d8b82dfafe67732b685c2e6f470d8ec556c82fcf29f433e9a54125d03ffafe162f4aa83b901bcd286644793f19179f3d549d091467c05cc2fc8155ae3683a7600de0bc4b687e78d5ca6783f5b58cf6ff643bb9e0da0c0bac641e0c8af34c49544392a621245b5f7608878f0f5b14d5c3ea421af6c247e9abea9b95ed27836b28d2855abb43f1b50a624da9d426656f330b0104255c3b79fd6bf868a50b9d8e6f400a9b34684d64c3555788db686b0abaaafe332b581c410e5744fcfa468a3fd6b5afa72fcf76c204b972abf8911010e4b8adca7bc371d09f0da1c63f6d44419d20894e57cb40ffb2e87debe5bad7860815731140e6ba4ae10b8f5e22d6f550a801b02debb05373fd5af8eabeef3e36ab0b6501138b1716d0ea02038393f5d387d01e5f4f866e4727592c1a5d945f347943757e3e6ab10a231d6d29b73085630ba2114acf7ef414eeea1e220520498bb0e951d213aabdab11c5cfd70868e389228342e075600ffd05c11e7b0c144da8cbfddabfaa2ba1194b9641443018695ddfca5fa11ef94962b44a111fef22bf15b2c5e819d17b33ed13135091b7e1cacf9680b3fc9ab1aafdef8a8c314973431fc4eb3e17ba9a1a594b9518c8213099dbac198e2a00aee943cfc0fc4b91072f306fdf50724a44b6a1d7f8c903c299ab907f6ed00047defefe8e3a23018325d878615c6e4117387fe8db47645b91bef582cf92099d6a8dfcdc7c80ef2bb81650c962fe8522099e070882eed4deb3fa0609300ce51dbf5ba7607b68dfbad3f81b95f98c42ba895e10112693f6b4337ca630cb7e6b7e65413f088e7ec9a17e6a03492a41bf0aa4bb1dd824d125a4860c28afa17dfcc00303ea67c54e8024043e9e7b636287c7bef2d14d34859db7b1fbb1fb67dc16629b6c59f2b05d38d5558626c80a7236df8eae88a423459c2c6e2a62a16ff4b1174cf49645bcb50340951b02ee810326b280863080b932e63b6f25968522ee82e47c22703afd6fe4a750b328df43f092faffac8cc0e5b1848cac9285ff7053e4995c1b505195153461217f7ca614dcf035a80577144856feadee335933a9a5fbf97947cf4933af6dc6b4023bb3fadd8ddfb93c8640d1d0e590ccf8d36459d7e98145b8a83aa245a3ff8cbc56276043b55995fd392c65a02f53cec726bbbc4db4b329ae036785a6b8d6ffb183f09bafef83572bb1b03fe3664dfaf64805627c4eeb11c9a86b21299ae576b82b24c063b4d59e0e550ac8cb6df2c72a601536f0947657551b3d4a0a7f1a21cc16e0f802851e66b26a613e6ecc20ee047b28086a198591d11ef5a673c311aef7e8f6b78b1e09b794d4960050e8093c55332187b5816d7875398d1b3195011f5643a8330465d093f656fd796e2f43ab24f74fb6d3ed148be5f44a7aa9d100ce4d41fdd2fd674ad5b71d3c631e1d93d57c78cac3a10072d7fcbeadf21aed317ab47562dd83204cbf5c35fa73c359e634ef81d70efed150ed8512d62f228bce52ce5525038a8fb9a66d8a7db4c3f3b21a94a7b78e887428f5260179e3c35c5c7dfac1e8aea717963847033cfa8150ac6add2493aefdd6786fec48d08fdd0b2b86f5b8f5b25d9752015ebb804339bc0a75aac0496e0f7ba521c08d87c3fc7012501511249238bd967ebc645ab2720b2fae26414600ce83276c21377397589850236bfde3d6ba99704a601e3e381121a9430ab0daf44f684cce0065851076e544cd497aece9ef3dcf4fc29e4b470f3d1a5889e4d44a37660b632df9a876da9c39a4c15947e5153b560d64ce3bccec72d9fee9ea67225812653dfffaccdde696f49fcea0bfcb6b7e98546c50779adac78541c68974b33e354fe028da6f3ade242aac8362da45f83cce07e0da13538abd586521b38dfd950d5cd52f9dc25def3fadc5137acdf0d8eae2ae88c4fbb08478c7082270c74ca65ad287436db22e799becb3066d10b73d2bdab200c2c538cdc4616363a66a9558db30e6c8fce4f1a78c5c04386c0737f1260a3ed2b712b979021da89027a1945f7b38fa198a9631a0c0a275e69350aff58e11246ddbbb67a9aaf8760e8b68541bd415b1172a6c7cf8b96f70fa00bb235181c9de8a2b7e47b9c4f6f57a4a21a67944dd62f70a998d420be13a06f1aa390831a042b5369af5d6877c5f40aa0186f6c3b6b5dcdbe13675ce293371f6ec282a7fe0605071ca813790723031eed180dc132995185711d216bf1586cc7b372d5b8bb11b11dc7b1f33dc945de2317cfd5c47157d4be5ccafbdc127245b4899c60e38c134fc185625f53c90ac016ab01d1958cbdb3cb66e7662ae0103eda0fbba6baaa242898ef8aa5fc53f351a49b458f4dd0dc6e72c276045ab137433cb07c4b7135cc6cbbc0d8ecca5fae9bd0b762862590d1257670e323a8077f3448f4d40c0630abf034d782dfef77008ba85952805a2169790e98f8026c82774c21b1a853437fcef6b3d605eb176d73b13c6405bd3d4d19ea532cefbc0665607872e871100da6f2f1f7146107a4f1ebfd51ed88dff47de321d5889c1d2c846620a8186c68225116f1e3d41d05a745f47bd2c82030bd7ddbfb3434576aa39a0de020c8cb9423b315f65a37d2509aafaffd08c211cefdcd26d01f9633a8ec7f0fdf25ff6800a3c33fc4fc6867e8496f53b99a35268a0b6e73b1055a61a2a090b25ae03e2ad9329d14de5b612c4548dee4aeb851f64c7dba438e37c33d9da6d906f11f6f29dc803a431ca2d8ac3c988d36ad54774c2d2f11172852115f04ec107b09d04515e3d23976bf5f51ba134cd21a8947b5a957eec26239c69409b98eebdddafced57c1f0bcbd7be38f09efc9c5857ce963dd61c7d787e879a9a439d9a0972aa08178bedcc03fb6bcc9366867477c77d481b4e3a5fe8d0c220bb167f50013755d7844caed0d21323aa509984e7a4c04edf61e8a71281cb2081e8bad8df4618c66b8c0ab9bbf29d4a6cad518cd5a052106e44a0085c2c5ea532fa7222eb109abcdbcf91e38bfc40d2d3f677f042602304a50168543a0ca1c1c40212a84173e36deff7feca1fda66432b865c92ad68f9014933c9bb340fabaeddc1e470e4ddecc493a18e9af61fb009f60501bfd132d6ee650ad0bab2352e0697ba4f1061cd838abb7f5d8edaba8fbe3ea2ef0b5af84fec9add6555f3e407380f5ae5809dab28b743b0c5bea6910490b08a3f8bc74b1e0ff413caaa65674ca4cf408a2d6e20c5dc60aaca0bc1e89e6b026b0e16c93d05c3b43b4d2c4aed5d03402108b6cf052fc25bb58aaee971d5315dd90b10debeaf3113ae746bcbf5135afdb6dc07c8da559271cc0079b741054f01e688bf706785bf103354756ea78eed35c68e80cdb6a8db5b6d3b9685ca0a68df0b78bb59d8eb0e4369302a466c3f0f4c9ce2ddeb659f0dc21bf33f4cffe2bdbdf75542cb069ebcb81c7c1dada40a2c31728374b6375efbdf1c48cb94803d242b42ed75de2bdcfdf6c5d3589f8ca7981f06d8ea73c139100acb4f83602355b1c0a5ec09c1a4510e58731b8a23ce207f590e23f77626051c0d0edf47714225da1ec01d78460f952842ad86d537692dc0e4fb82acaf6a171c3f76843acd9cb4a768138f0399798a9a0b56ceee421d1af21455635718e265b371ac1c834dbc74e0ab4b76a21402060a622109994325589f6bcd9eee7d084972ea4c80d57d2cc2602882f7f419c2a01c6921fb173a55a49f7638c2e671a6814e32b0bdce9d6bbb39fd60717d80328e4da21daed62e60a15722ce9a196dbd1ad6e621ba348fbc58730546bf7a021e32be668f8dc811bb5f082773d0408e7e8fb46024b9505af4c1b95439ffcef22453630ce9e811baff25ce9b87c0f0f95f669eeee01b08c1e642d2a9c532eca915fc66642b3a847f34222e71410e9eb05341e8533713c5a407ac309246f6e3fcbe037f3c9860ba8d604f338a4a6ab907e1ac002ac0ff2f024ca603bf97204bf52c06f46a7a807610bd0f733c4ae6144541c164d4ad8b5a6a2a05c0371bbec2888d9eb6ab64703e53bb9209448829c0488a0067773b014ceaffcaa7d549d70d31115fe1965635d2e6c139939d458bc4ae2a28e23f82964aaf884343eb1a89fc423b24456d0f8ce50370040951fcaadc40c17a90860d94420863da9202e2773726905ce535ecfae667927fb18bde87a8669d82f19c34c953b9657448a81a4717d423ecbd512508fa1a09332722ec7c044298989df6701911b03095dc3c67591e771176d9df2570bb2d9d65290f1dacc7cdf9cc2500a0614d9d1a766d6db0899288705d7641ea72630292eb5bbbb3e4cc5f4504c496c554e9d418b63288535780f658205b643b230eb7b1453d516a6439cd931f20a7b944bc8cbfcb96c382f2c26d6206fb3cd5dfdb56e59c05ceed3adddf6e886df0d8d9c6b37a42c9f3cf733d1049a4423c52200e837740f209fc7c1f23572e16c7d5975b27ddd01288f1a4ad1f60fd1a06eec493c90a12a987062867c0de32ee50952d20a533b4c0bbb5d6ab776e882f8cb8265bb3dc90d6fccb46cc47aa628b6d89d3cb7ba1e88eb8b823fe2e7a18343143119989f7ac783bfa0e3c45de5267ccc8ad4023c0e6310bd44c9d1b35d1402b59dcd553f171707b170a23b16d05167b59db416697eb3896c449f5ebf8105d3ccda8afb65e2a36b2f692f2db83e075ba388f4403d5e9162812dceb36b44710253c3b4954fefe89b21a4e4dfee524c73873ffd9dae1632c34b707006fd0d2d9474cf7e36c78ece87ca11b072c31b669f50206901e46f4b8a634ca84aa0d03411fee087533f335614f9edcc8bdc1986b434402500a0ecea35402a7771357b8c6581dc50bbafcefd1f8a8961a9a41bc9045f624f1520562e6276d035001111e079d4b1712ad5aede9839aa8077d1d258fcb751e4e1501a57b6fe8ef7abce960877e792302fc3e22d64b4315ee7f6d1d0690e67342741364e8264034b0f82306a3d1b83da352ada68af0f3550d9a82187503bcced1a83d6f446bfedf2eea680eeaa64065fc092c9c07a51563a27253edcb43e1be464482491aa3d3f41a061ccadd98b2e3cb974e599d7a2d3d9278afe817d12e2b058758acda464c7d09ec5a91d3a7c913857b1c9a2a6f8f27e67cc352c4da80fb548857983a12035dd5522de9aef502235785d1aa202524532da1c16470c4a6319ab2debc5795ee3ae0f72fc44dd360ef90c02662b064b0dc87ab4f82e7c34634c17764ca4f9834b92db9b545b859106859b19b260cc3ef2b51832af6c3f419ae9a9106472aed8d8e7e67c92b54d7d8c376889897b373f6157fad1b0e58cd1faff0df70481efd2d9b4c4f950e55eadd6f59555b53fafad7411b08e7dd93bb0f62b08bad59468936693fee1d4272314d8ec1dfd5289f2cdf1a4b2cc9cc0be61bee15e1fb8d5c903df324d99443ef982323a7f2efffc32de49f3facdf2fd97b2fce68c78dbe5225d52008b9e0231f5b63b58aea415b50736b5b3864e5106c80494000dbef9ea22aeb5bd922f76f64ee59f1984d29187c5167f32ce24fc78af193a5bc6968dc50112b8849d1a7e21a63ce6e8e3443de888d012aa8d16e313f3dd1000f174447f50d0281b89c4b18d1b364f800eab0ce213a6a91639c4662f75e6107ab8ae10b3736d342bbe64ada9e73600b3c1652517dffb7293d563aa5d220bf81402a16380867380ea94303423256359798a37df8c87bd21a12580f3b1bfda9665cff416b42d7b09ad40a92042eff437031b34f32cf64d1c0c7c3d9ee4ce2ddda7d524055d849fe36491be42124968992b91a2c4e78e87fb0ca0e31fc8e23520dd07159658f021a3bbfd3531407eddcb29571bd5b05ec7bd94c37353a0e6ca913bd722f920815c5b7b4f077ec9660de2d8ee4ad5e0495f9389d09e9bf0ad23d5dbcfc2994146ba13457b3a469bb7cd84ce54cb556860a7e55d27de6b81894b6a4e42a0f0cbc54e939720bd72af0d9fd273bdf571bfaabfa59f28a6448ceee3519f8808c52e7cb32ad023ff3b08dd6449e37603521a58aadd25f87f9cf17b5e655aac788744e400645ab5396b12e22dffe4313f3f652f22ae94bdc25d44bda169a4492fe4b2e9fd108e1f098735ee1478b657998756ca060294cd15248078998126d68481d6f3be3a3ff2aea1c4cc03ea79b5ce67eb56bdc8d674622cc33e9889c083ae93a9b12acb0de6be61758f7f57658e7766a25e07e1b3faaa9c2d0241ee2aa3c4b767f36c2fea64135948c292163c421c5c32eea9619e9f655ef7a6eedf33101a885d13a806aabfee52f9674dad7a0068d61ec9e3543fc264b0f5f093e70aa868667853d5753418e69d3349b53e512cce5b25640ca373cc2437d6f11dd707ddc2e1a915ede605e529362c3920374380e136c868829a0b8ba231cb0fa9f2caa208c7466298a4c8a8e5c8554aad47929e509aa93b52517c3cd6548d3f65fcbf2578e01c6c62545a82041e282d5030658715028c4dfc379e14b01d4e1f88765bff137d8fcce6fb014c03397820809f8ea25df238c88e087ed347052add438f62bf887f7b437da55b4991562abedfb9e73e90b112c40cc134b68482aad2ac059c9f3d80752e4d07ec184e3504457c30ea794cc619a0727fcc370b943e318a9fad830071765823c9115189c14a3f06def2e3f1a1831613657dcfc70cfa6513656607265b0cb026bb6e2092c06cc477003f4d8d9b8d14740c3afa21cbf9e3a9415b3f1c265acfd8c92aa5b7a31fc0f8ebf343c573ff8284a16cee2d19ffc9489a430d50aa66df90d6d1af9ed320e1dc38bdb73ffb7097f2e19e9bb28209306d5b1953dedd3ced128ba66396184faaf9188d26aab3812ea08a8fe01cbc9aba804e841d5a7d189ec0234a30fee88e42db17968ffc255d3697fe930cdbd28755949633b4bcf7274a2c986b107bb633728031daf81f5f7f1d8eed6f0a4e2c497d68dff91e456f0ac031d349fe7a2a1fdd5c5cb0c96d59795e525a14ef2a4d4a9b6c36052368397c79ac6b249052795f401c85b7588e98a2d1054928a391035f037e4d323100e19648998934db92f964cd8db967ba44010178dd3394fed410eb645c0923e0156096a1342b376caed08f51779a533e8b9fcaa0924fc61d1ad7b2bef2798f1b43f95e3b3db0aaa014f4d3df440ae36aba7b67298a8e00091e71f64ff2cd7d5fa8fd028f2cd34495ba481e83e02185a1c394baeb2f8bb3f8d4803cf74d3556910faf0fd41a4c92dee475685f446761b3151190c6c05080466a2f03e0d3363280d18c33f6c10a20692b40cbd6bbcf867ab213fdd1b25cbcebf1109cb24ac932aabc7b523738edec4487dd4f9b33e7a2889b1249876fcea19fd6b56768f3cb102fecb0c8daba1d920f101dd44bd19515b4c07c3f62badb9362c4a6fb3295fab789555150ff48dd546a42fa0fa52be73f69ab6efd2a8f97997a6abdd657e50eab364f0b5ad046d3da508f3eb54c075aadcf2605b65bb1a877fdfb7bd38599dc5f3e956016b62f04fb62d43bb547ff712510daf282f7cfe504607b979820f534afd9e9e0ec90e661ef99fa3e87d82b7d9f49ba0f7af288ff173ccf98826bcdb29e65de3e83db56fa82497a649ffee8e8f454f37a46d0d4bd7309ec0739552460ad733e611bda5edc6d12b21a159fbc4c8c5acd35cf110be05e4b673a2452a6f1d87da1f5301b9cab179bfbe92087bb1912d3098e83dd691d6b989fecc2351d1be166d9c5b08309422a91150d730a81db1132db4866c8405a9f1a9463e51bdc6f388836470d73d91d5a386c35bbb68a49605ca0857250480799ef5356038b15f39fe83db0e9f0e1cc5877742bc6643f3b93c9c7c41b00d36c6542e0fe5ee7b38f399c98f075f41d869cf5e40a34afc654e4e90ff7ed3f58afd0fb8025de9fe7c77bcccccd8a222420a89b569ebea7cf9de268243e9d9d78a96b4babf4d724aa0fb2df5e29a9e37fb4f87a49f1e2ab8c2a8f9edb9619914fe6ff179f5ac11e76a26d9d12bd5a0b2947e139b3f59714342f9dcfc63ebe02a1696c6e055bc8d17e8eb43775d90c30144d51a1ac77fb134f21dbb360d9bded99144c36631e2cb64518c2b36fe68058e2c43cfc60ccc924e94d759cd00eb9beae41a5861d55ef0c553ee0df1c9764ea5bbc27b3668c16cf3629344740712dba631af0e145aaed75d80103437bed079c8e54f04028b19070f07f3321825a93ff33614be80078a85f91c8de301a442a03fc98954a96b7d042304612c78af4b6a2dc3c43b7c79a9b5a5a0b53957c67f8da263879244f04ef08aaa4db8c0fee6283caf22293250be60ec012902cafe3c9f5bf879bf342c01577de215167d5878eb97c880604cab4ce53d88fbba3db5241213be0fc65d9514709d669dba285a785bf1edcf469993490b423ddb67362857bb5155bd0b1996e5c781360b89798409d3c8488f0cb489e217fc7a65022b903f83ae034c6763f67ed7b1c89a211a0b6077908cf6113c210bcb439476ce8c67433a3731a3d7fae072d1ad75523a3ac1e6b598bd9f88f86511c361a243289418406c7efb4a7bb85186bcfff57de116fd3bfb9005701978558abba8ab5fe10cf657cf0c29bf72ea299b69e7db21e9cbb6bc1011ca068accc5c54f55bb79ac00383d4fbfd4c54b71df0a3c4561a528b3bf2246fed760a0e2e9f47226ff53cadcb0ca0a2a5818e6888c72806e0d1cc42767c3d589c18684e6664e25c35f40216d0f19add433a727cbd0a19f693ab2237137e3222147a74201053cd5f3b92e69c0ab3b38b0992de9c54977ce6b1818dbc99fe5f6077a8c6ec25e7b4716faffadc5d9a6195e453a900a59582148587ab2bf7c3b6d78d279e267614172bd3af743b024976b07d36f989661389048eb13886781dfea7ec34b99bc9b642f42d96f52728b5756145cdd71b40abe8e70c875c58426f1f60b177d612dc712062c0d367f23710eeadb303a2b9cde7b4e2806bf054f65139d05e62f8e06c2582e7d321f3c8f6d88da1a65441fd51a9692a0293d27a6eee8001ad5ce9cce39374c97aff5f6cb29ad6d34db8166eb7edd21bffebd210f8266c501145990b2e48ef22a2386610bb44d788cfa11e6413be5743a0da8162362a2a16e07ea3584491518115d0e97ed97be66153f588673e4567084e423b9506237569068a78479bbf3ed057e1e0bce26742dcae1362862012c6b0f24f4dc83ad9b6314f88c281294db28fe54a5cc00759edd060f2190848ab9bbd73e7d341f73734fde4720696531c73294a49ca3519768f628e73478aba47269a2f9d09d5559db8792cb387a395b0793836495c71b4c190147fec6a49c4ab5e8852bdfec93e07ff2907725ff9c9f7f1d3bee1b401c72c82cd074862d370085ba2cda810428e5bb9c0e272a9b78620fdfb336fcad912215060b1c6f2bf4a79d711bb550f7f410c7ec94d826a9ae02b55030e7917eceeda27b52272218b57da1bd724c4c51c89e914f12aebbd4a185b9f3473aaef114429f45ed6a9e65d94bee0ffe818c1922b45d6626ef3adc1438afd52ee6d402ad82dc963930b5d1c5c61fa9f161f55af1255c874c5119b0fc8f737eb568d50640c334cbe74917a6de883b86ce756257f9c60c5530959f29c8f20072849d6a6e12f8b2458845f1ce04b0f7b559f69e6b1916159ccf75d3dd15de10da9b5b40641dfe6391b7e276fe8b18a2ddc834191c56df783430209c0cc23e7a0dd73f2854ac9e88e857c5f84c80b64a98073f435122c58b20bd5ee5496982afff4c66542d2942eefba8e7c130c09ecd343fa53096d5a1f14d199ce4da224aed5201985e524d9360425fe8c5ae8508995e7d4232359939f0091595a30c6b02ca0070a5c32650038f88feddbf8c9e9e5b3750f24bf80cf24cc99614b30131eeb9bcca4b63008ea75a4e13b2568045af89740786c50133a9bcf8836d7aa1da30ee8f329c4d6d03e4d08afa5148cd3906d5caf705b56d29ba2153ff446b668c32aa6990fd4f8399bbe3a4b1ddf443bea9350995abe0f3d7c905e3377fa2bf943259f9f45cea8fc5244e62ee9f2625d82091d107e9d44c068860104cd1b46c360f14694b4a12e0ac3dcb16f5b18c447a437de0035a78c510869b5547ddcbcc1ab8098428a7a6f86802ee3a0a9b3da10ae0c6553cf6809a16e0e82a1c2cb9c96492fd85ef41596f7b9d463ad30ba40a71023a8add64a5643fbfcca22bf5a6273fa9f7d9af345c63b9aa5c0dd7611af19948d4222d5c2fe3807aeffe9390c4104838b861e1ff8cbe08866b06c1ea1e6cf83f13574bd55343dbdb2d66c1bd6e816204b2d62d379b4a6cf0772c6b15fad6b2b77349dc29c5b92be4d34704cd4c7e087bb1e6b3bd48335f0f9cc7e7261270a5128b33fce0703c3ace130733db8a38ae3ee20b7a5cd9fced198109f86484cdf4199bc326ad9749d957c4fe6aee21d1d1cfe9b026367044e529bdc2c24845864d307e50728bc6ee6e9f207544b8e3145219ca1a2dde6c40ac0824e1684deb71793021f2fd2337698ae6944161c6dcccf4add576af3ffdc53cffec9c2477b687ce64cb96951e0a167e21f0e11d22ad34ad337d93a00c262c9bfcfbf2e4fa7895229dd0a7339e4f49267fb17b8ca1c9d61d39dd9264eff5bf4c72fbe6c8c63f157c21ce48a1456280cb2e69a209e203f6e107b508792aa2296a2c320ed78264dd5e4d74ea5a8f47d2e523dd36c4ac53727cc8125872201e9e33f06bf3acbe8d5d457ac8a8d94e596ef5745e5675dd19b5ff7bb781d11621fb16e7481fe3c21af2954b10138fa8294a551cb64deeee83416c092c14b5dcbfafbe11483a875883eaffd0e7ff20db6b9da2ccf275a4062f503c909212a26bcfb8d9d00ff5914184149481b27d3173c95a68acb706ea68d8b981e306e10892f62c88c322235c0bc30ed4bdd970fb50e8dce43886b1c978f32efa1d765277e7e132bf055eeec17de06ec893ff862aeac11436d9acba3445ab6e0970a2e0649b21856cfae9be4f4f5014bf7e5bcab66d96938ec303d48086da0230d8e6a4f26c27d52d8853e07def1da006111408f8be0b289b793d792ac7d7323d77355e5f4b9632ef362203f8636e0d01532d4fee9f19c3ca173736c570188c2a2a05f278c4f52212a5d08032258487a4ac5fca05ca0f3b9dfa575be4f7d03867d00b0d397dd86fcc451cd6fb2ecd0e0a495fb7c79fb3448254da235695fd43c629166623bc66cd2a8a297157f0224e5371ef712014c7dbe18d7a95e82e0c2c2383f4abec875519d83abf2a148ec7d4e2d22e49d286c9b2dfb43694541494f45f773dcee17816db9766f3240922a0b7028298cdc810a5c0506f3e29cfaaf6205bc9324b1def675201ec130a738ecb9fc76070ef517648e0425d73b7ffffae32a368d719799cd94ca2ef4a5b1023c2613a3718fdb5818cea41efdf3c3279cc183959f1867d3fb55ff38478618e76f6b97740eb273f29c06dccb6856cfc9899b0bde1223b58cc6a3abea1b3fd7e35c8893a916261ddfb30a24e98497f24ac2c0852cd085efa10a8e840cbd304102b204cc856ad0077759dc0472cd0a07e9adec6105d20733730443bc31a49c0a419e8e7423ef09d8aa05859ac59d2a3dfc864b6b96d1a27230da531e8236a7febde6ada7352b41bd3e45539bc488001297cda696f3731c59b8d4ce6b975f2a16f42d28bc39daac2abb01bda00662f26debd0195c0c065c26beba7d6f727cefe073bc4e585f13aa0c1650eef8b4b5d1b979a4e175846b1e9262120523bb8f258ef97e228037f1275a937ca3e238ccb5e00b0d1099da682b0eda549a4a2a7250b50268900bcb89a061eaec629a8878e4eae55c2fcec24695298d9d22b46a714b33b020447ec59acb38771879a55d0fa3a5908882a57bf5eb774f4a57a188e1a6b22d2cef98256db18b8d6f5d3695fb13794426ead8a226c1c0737e8793c26b8b5d5524f23e8b5bbf6cfd8221c447d0c372fd9898828bc2fccef658aa08d70f94cc2ddddda4d145d3d1d03980e0e9c64adbf217ed37b0748604666447f80625381806ae3f61148bc1a2ae85159dc73c468ac02685eb032f35515a3e9581d8281de009236b5ec896543525331b267922e5d16f9f850df2a36aed3d3bc5de735b94ca12b9449193287b8d7b79e2693c562db501850b5f4f6f14a3e24768a479ba56fa82a19cbf6fa0d694b2ca6f16ea45913626e8ccb8845d9eec899e68e9a9360d01dac411598af1e008dad2c42ac4c2197d380c5fc5877ff5cc8e4de2db3dde541fa5e91cdc60edacb633bbf843a76e742c8fc927a15ed2dd640dcaf270107d4abf47ea24dccf9d471b418a2aa4974982002f9f766fed16af7ef6ea4b85e93ef55f1d9e6425e2dc8e696deeb833919cc6d582978ee38f795da0f03adf8596a6314c2297b8734baed83f5f2064e3139ac0ba5a14cb15ed8f913a49f8c603f46c969b573398260b1ec7633c1cbeae19244df150acace231bed525ae2de2e6be66c31a3366e97b9e8a01750a9fec7cb41404b0fa0d2a6b156cd5d7e93627abe046afa3fead9fd656584c282195b15315f5865afdd2a7b02e6504525239e245360c851aa9e87baf295184e29221c9fec6d6684fcff2c2cbb64e0c969d5c923f5686d5bd754cc5d578caca0717f4e22bff615b37ee5a5650605d5c0bfc809228aabb5162ccfff943ffea44971bcd1b2eabf962bf247620f222255a5147e1e4060bf234ca7cfd17e78f81ab306398ba6790b687b319db013afdcdfbfed1d2b96bfc0e2a1796f47fdfffb65efb8cad1cc3c97c04df5288ab608d3021272255326413657894463e037f1a40688502376432442f4415a9f36d6f399d93f70da55477975be7e39014ee951ba1698808b51a51be2e89eba49780721ed4ca71485e323e8732a3f7fe877a2d69cba04fefe65f8c82b9133009172ae659e0e4ff77632f2728899ad99436c2c0a1b43ae16886ae4212e7e9d47adc2210fc54e1798ecedb6b4da9d599336521921e7a0cfc85aa95edab9eb4df0c26f722c0570927907cc18e6ff6f7e122bf783d7efb6772736a1b990e901528ede6333e50a00af44aa3f4f6ab7c9e2770d092afc1fe512e6b1b370b72c546579835461e195289b178e9ed27c95490d867ab08919eac30bac6ce4a24d7c224c48a98c0600a856702999efbe527f9787eb3ded513c40bccc7d41c645b0dcdd290e09c143584e8f37eb93b5a22106600557813891e3430e4223066b491159547ccd81b8d39c944642167686f529e94e28c27d12986e105943da2b6f3b8f854e0bb62508f93cc34c48ea08ce0b53b23e2d0cfdc59e49b4de5033bcf2734775db02fd91d7376fdba27607369bd38dbcb4e7b1ea31e92a5a5f5b44de2ca757e00bf7f84873420b5dc9e96a89bc233360c0e6396181b1d05c9094520f03629b5456ee5c6fbb0a273b3f90cde8fcbe8ea23580e6e760d509f3526e720ee4bbce7cc8ce0b98d2cd7dc2c051580d166eb7ed56dc6eb796c08a03c60e1fe6a0713a012bb8ef0ba3b4badc94b7a5696f61f335d816ff19da095747170494f7ce0b69fb07dcf58f25d806d1c11e2bccc164fb0087d408a9ae3b719a59cdec184e965c8427367cbf5aaa6f246f299d1021997d42dd1550a607f0a895a43aeaf824b9143cbe2d494e549d2b958d990418f33ea2d30802d94aff6c2727cb97bc93c90ebaa71651499905e08ad5f64f1d4ff47e86f9bb233059b0cdcf8c28fae356efe20850baac042a6d0398a793c947fd2ee6d1f0ea474f1500224e3f2e87fb1e65b8c79972bade8a9956244eee653e4cfd46b73199e8f1f3340716e869fbbccff80777c18c73444a994ee6e8ea30264ef088950a2a122fe3d20ba379fb86cb6fca3b311fd8b202cf1b45d0c287bd4505ce84d16fe10243e0d97c0713f45e6a0661a73c3a9dd78d796fec25ac95223ac8da8c5f53b8b0c840ef638b39ec960d44f9149c30afc495613616a0dc0ce6edffe64b414894a665889028917b8edc22ec6d063235a3be8000eb720a949714add0e20c65dcc225de410df22e559b786d8af4c2b3b1e035110409ae5a5efcd8bf03a865ab9dd8a96011653792794ab80e1bfbf7971e57ab47e122010f415fa362972fe3981c12c6b130b60e13686b79d299401e6f722b9d415fd8b0e6e17c4de2d94e4253af764590c5552cbad9eb5eb5a5d429e8b5b5cae79760481ce17b9a39a3bde9d0ce28cc2f94a74238fcf1787c02c2945b1b74fd3e635ded197375d96a63d035e1e48a4307bfcb85d249aa60c38b70be8482fc5d92416fccb62c757c6c85c3e6ff9782e04a182b8bd4e14a44d12bfe30c8c3a2b312d24c3da1e9f14550a32f27de83e6245754b39dd4c935068a36cfc23269a23825cff9285abea11e3f8f627a928e58db5ba921ee4702639e072eb32f0160047a366a6255c3275f17fd44675f9c07806ec3c5f19e97962f25648dcea047ed1588ffee4772d51da41761113a7acc5ddb90731b78794bb4d7a45e8ae7477a3d380cc88e102ed79d755b1407f28c505425bfdb7835e5f80e3dfeb4e0a9907c0c1da4144c01c60424da00b46d828cc9e986a25c57012a6befb027aa5ada33a6da0ec4d8bc1f0f8f23eb58b9753f653903a69516a510f993c8cf7092ace950c7ad86fae0b5e6d211ee40ba6655f0452dd5e837f292ccd0a8ab97e43d4ae604c18e5b95614c2f28ac156f8ca24d94e7c2b06eb1f4d07ee12015eb01d726d7cf9de0a74188b1c14f4f73f5b00422de72e9b36ae30114d9b9adcc0d3f4839347da19bc995c32db848fa63dcfe157073b35da988e29cd0daf7f9a9466fedd3a9f2bade8238b5fea4c489ee1e20e6d5fb6e1f87f214a3fcbe3cdeed5ac84fcea2aa2e080f011bc193ca4e0d9586c2cbd5cc9092194aed689946061f9fbb17339613ee2c72d5b612e878bb7e3acc6ad1184e0b2cf9d2b9437e36a8531f9686e9ed896c4f3f66a179c5f132d361d21e480fffbf2310481ace6bb6c59d523b84dfd5807033ca82b070db23a77111b99944c4537fdad566cf729d5e6ebe30a4cf217171726f2cf6d8e40cbcfde59c5185e96402b7cd15307d4ef9b49afa5a583584132286fe6bdc3e20136ff934da4e9c6a65eb2f9a36b7bb8cacef778104378ae7a669c91bcac8ef48e67336fa1cbbca4125293d209d6d2357064736a56aa44b073e730fcfa3c22aeb8bd91cb25d28b9744aceb88fb2d0ef048ef6f803a735f7bef503d5e8659bb9b3c570f36604d8c06ecfff52780849b5b24b8f6c420b0a74af61d2971855a291858845fa2bb71ce96e14ecd2da52b19e8446890e4db4833141db4dde3c1a138ef64206f3e7fb5228040236f3c57c01a5e7b45ee8950ec5ba98bfb0d9fed04c6ff58e380d9e2cace38bf4f3ee65e932e420ba5ca5b73fe857416aba182f3d3a6324dfc281d586c63873133bde5a31f6fcfbf178009b4b163d55a26fb1104e97682ca1fef45700b7d2060117fb9d7d340f33c5cc0ef8eb022b0546bee8567a2fcb8b0a8099f606083380a7df7758a2ae8f5d68fcd99b5cac2180f8412eba3726dc5a51dd578e6d3f1199ed922105d37a934a42fce8c31c3dc919fc9f6be4ccf6cdda5afd9dc161efee7ec640dcceec336ec986581c18fc846b4db0a28d26d1552f3cf8f7a9b5eb1a578a5dfe520b9cc7e07dfc8abf218a475ef8fee7dddc03b92a78a60285efad69ce74748c1fe6b268588ba75d1327b93405699c4901ecf1dca3afe77f803ae601b59953</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-up">
      <input class="hbe hbe-input-field hbe-input-field-up" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-up" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-up">ÊñáÁ´†Â∑≤Âä†ÂØÜÔºåËØ∑ËæìÂÖ•ÂØÜÁ†Å üòõÔºö</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ÈòøÈáåP6‰∏ÄÈù¢(‰∏ã)</title>
    <url>/p/e2c8b9c5.html</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="ÂØÜÁ†ÅÈîôËØØ üò≠" data-whm="ÂΩìÂâçÊñáÁ´†‰∏çËÉΩÊ†°È™åüò≠">
  <script id="hbeData" type="hbeData" data-hmacdigest="9cfd6289d799d46391bde4e5c9dca83afae5a56922af8f190a43859cec401086">601062fcdaf3cca9d544423806934044380848aba583af6c1ea7ebc532dbcc8f340269dd12e0c82ecb6ab6129d2c267f57eee27a911f1bc8323031208013d64bfb69b3750f65c40154c2dc6d2768b1a2cd0a2d45978cee8bcd4398ca764b90e43c01820ad85304450b8ed6fac6ca8cd95db6d629b45c99fa15631b23c21dd4a96b2f3657a79c53a29732bfe667276471d2a515a78784629694ff07c18bf1b8bfd3c63aacac78ac319aeaa4bc8795d950d5dd7f6c02737782f455970b6342e8987fff34eb0d1b58624f448235e95b135c7b88236b6e7acbc0f6d26771b724d215ddd07e510d4d2613a9b948f6ced80df83a82ba3d9cbb35529458d95277aaca18135aff716a74eb079577c2fbb3c4b4ad6dafacb2c3e335af7c286a7ab28f1bc29bf13b63d085fa11dd655fbee3221f0236d37f3703323552ae5b9bf1ef0d17b77d3c424a3e657e2ac94cfd6e5dd8a8d73151ef263ce11a36ffb4b5823f580de48fc1281fe85d5ad885da87b8464d63702997f30fedf7a40f5a688668cff9158cfb3623bc78479f8ab9c08beb7a03fd3ab78e6565d28c3597d3e4d1bb4b17c8106494c70c689ae1afed9f5e971bc164f819db082f687784ff257215ae281d9368af072550aaad44d61e79738b0066aeaede58b68628fda4b2f73cd89559024abcb97211ffb15a96669218c1079805fb3ae9fc9bcf1cf521c109d27837573f08f04e4721057b7c492910bbba09a4b8712ef1919bee902411f13ea68b75f378b9b8d469b7a073e553d00c485a09b2de3ddae149644ea9236f494950035b6cb3497146406cf01572acdc288d7e63a05e7b9d4b9a6fa3a644d52def3747061fde2e77bf8f42ab1bb29f7bfa8973888e692b6be8841a33878a84509defca224b3f2d298b6e69841c9b6f97025436dfbd1d365882d5af2fc4ad129ce78633be2e4cef46ef7a19f695293bd394ae0481c92b4baca501a3fac2120a8bfbdda5e623ceff4760d7070ec26a7fe702ce2a8c95eae06bcc240a3d5a796c6c19ed04cc15301df8c50ef1af01310da80cabc91a994dbc698fcf98021defe47b2de112277cc1db0db84419cfe74eecc96bfbf3a734844dbae742f726acc1da8ccd2d85de5d45fea9211211bd8e17188804bd17f7f6c0f2a6a84fda20354b91670c6c530b13fc21ed4c97efe1905061d91a83f5a02e5c5debdcd74d4bc5df39b196469828b33a0aeb2ae11b75a87471fdffbfde070ac5d40056699d4b6f27072dcdb85f76caee7210bed99251aafb0832b3d7e89bdbb1731175ddbd4a85456ad939eb4c7385b5181be70cf3862cefdd73a58a1e758cdb61b1bc936f30d04bf7218436dd32a135a7590e6879b9bb9d665756d1ff72a9134df10ace223301b9c60542ca2494e61054afcfeeb7ef22367d83a95a6b6ec9aebaf0ea1b9e1f4456038cee82f71fb9ba643d682edb78798c26e6b4507370b968d8b163b84365c0be6eba9bc79d50091e40d4707d384752a865ef19fb2726cf711105867f73c51b4640992c7fde2cea78a5d109ee8eba53e223da4909cccf0cdb2af85d86935ca83f1caf7431803b8aca0582697fa62e830a0b262dedc30dead726c9d1c6b763b0747a0e5ad8a784ad6d7b61d97ce41fd26641560ae866da2baf5242c98ee4796408fb8528afc210b9a215bbab206c3066a63cd1467cae16c865d076e89d96612025c3d17dc2ea940cb978e8fc03e454e6fc387cfae2cbcd0c5fa3588633ac0bd45552a763492138984dcd1cd5b442d33a960f575f6ed294e715bb0782cbd8f4cddd532db00ca4f5021968a7c192c7732314ad301c6c29b8aea275624e5c66ecde38680e098f2f03cb8ffa4025ab4fe69cae90113ff371956b5231716a87392fc88d8919fa7869c34bd90ed89420d82f5d5e69ba9efac2725dc8635688d4531d9caea8017ba855477816bd58dae7328e1ca7f2916dafe3a02687262fa0b76ee3324eda0c5f2ebbbc56e481bfb0c01e57a27a3ed8f9581caa9d4447f588030862f066f23cb2646a8afec9a5339b9465d807e53522c278bb307b6b223428e018178bf297a18031b72e25496afa08896a85b4300240de8c92dba3c31267800a34959f51e8e8720df8de6673e22e1e78f430134a9ef674cd152cc0381e87b5802f381aabe5ef4bfd628eccbfa24b65dc130c54973f11698ae9f4a883a51fa587d3d66ad21209a9837e80e005649eafee3aae06f703cc7f727c33ea9a5edba10658ffbb2229619a132f70c076bf39422ea17f5339b116304c72334f1468c7f84d1acc5b7cf8cd1ae3b2dbe2e9d15547474e776a9b3d7b306a98780c2a359716b20f02be1ccda889514a9237d0cd3c125a5351e3b486b26f911dfb080030c63731eb955dad628beb8b43ef7a77cfe882bf1bf123bb3fab6324b0c17eb9388161d919e2c6dee82f67dc4748277d9bc3196a08b3ad7bdd1e34e42ae746ec6d32247a40f5b43836724780f4953641eb35704c77c82a70c4f3eef3c2d8cb2ff8cc4ec76a1d1651d90bdf2732ba319f6729de64c4508018c3834ea856497230ac134501c1eb0df2588475e91e26097a7b2e141077d58f489077ec4c2dd8ee7bd24bb16793bb7165990bcca42a7fa8e3d16a001dc5ddd1903cdf568fc927e416f559bc7e06c2dcaf5e12a897404c289fa731adb9444c8767da65245ed2713dee863b11f508f6385b8ba132c2157abb0943bc42506eb3125441da88a5b1956309b85cb4af9e329ca5f36d72f287804bfc8334ad10e9d940a285b665a4a0afdcc0af74c3b9a7c0fbe0da9ecc60b877fe60e9ba97266a2388e3246a8d81b232f52347e135395eeda1e2ee0975d8f53941cbcb4ca8c8ce541ba42243f4e56f6871906640c4c471f78d847477de4262e491be4986c3466a7753a67b89e4cd34b43cdd0a384ee5bbd485416c7ca47b6d5bccb398f5a35b59e6f37c68ac81b36867c988559a7441c4004ae7badd62552c0688ff81bde8cb7ab1f5bff576db2c7aa386ed28c41e053ff9d1a58372cba421b60476a7097e508c90bcae477942b4925853c247dd7cf70c0bbfc0ddb787c8018f0c4e122b998ba9b922290c81c8dd7c2eb0f379b3086faa0bb24b4da1f6bcee3465284951151e9d50ba07e37d1461d3f2f66ea66260801255439aaf894427774dc7ea24733478648ab0078f75f3bdc8a9341af9f886358444a580518d99ce584c005cf1dbc9b8af9e0c488d1e62ba667ebf6f5c8c0b28d01e5064280eacfef9ff8031d8d6c2a228fbc5f8c48d8495a2369db6d440ee2f85f55ea128d69de66016344660a7abdd5dd0df162aef395a5618f551ff0b81c3218c97e280fda6242840579e707e32089214f100026820e04baabcd97bf7f87752c33f9b431590c406dc2d9b903b2bb63b9f625d5376389ad3ff6c34687fd4413c74e760baf641900c68ca1efff7261c92332f853fcf2bf49d0e5d3e602ab0288c27ce6a309aced258f4713571bcafbc79fd978dcb2eee5d665a5e5d80285175a95b26fe210b178caccd167c8d1b13d5c0625ed9bf242e8bf83ce5bd93670cfbcdaccfaf2a0dda0be1e1b1d86304bd203c65a6decf311bd5f0cd016890678961f3e88137b92611487d2ba90ff9c6914ae82b9f3c2e625ded3f0ae0c8b055e2d04d301c323c7de5b454c6bcef1f801030b0a16fc5ad2bd4ee0e5aa3f63211bc1550f55395f92026a3cff033af9531d3b9e9cbff513573e91cd89d5a126fdb7d0df9ebdebbd5d187c3deae6eafa8ffb7f3cd05db0357f81d26ae26a73fe3e3b4f14e217b0c75e4f1f57edf6f9ba90aa6553833a03ad2dd2451bec408118a2e8bf6abd42efdc2b0b2c2db64a12c362f5deed3a3976841fdbc8e08902e0991bb67db751f11b206426a687996ee25768a8650b61eb20fa6fed0bdcdff16208598aa4e0ebdba39423e1d93689410436e50a3338c8d21ca7d7818e18ac3a2f6045de3cb7e826eb3ef4ac2a3e8b5a21ea86b3a2c3cdc16106ab300a912d2229231c4d8bd926beae9328d1863b73ab5107405bfe51f62d7e39844c939bd17a0cd57de2aeecf0f39b103708f67d3c2eb574f82dc9418971a37be5a8b233c8502c73173df49e12f3e5d7fdfeddb17db104b66f0fd12fb5b54846bc6cf37505684797289096f2f151732da7f656c0bd69fd831aab87fbd90995eb87e8ff8fecef3e32ab586f7a5f57cf7fa4b4cc140ecfba9f211ce1b29a7a7659e87af4b55c2dbc98a5ce0042e811cfa82b580a09907f97c881de773902123a377ef83ed3a6ef783650c86668cae1c6852ae84053f5a81454fefc7fb9d7b65b9b48272e077731d6bf357602e0588032513d0a8fa1cbab24422d501a02ddc72159fab456ae1b7e60796dc5fe401a7ce3e22fd2341aaff96b6907593420bac44b37218353d98f788e48f247cef15ccdc06365db888fa466fb978ddce1a8f5a292dd267c86738b0e8bf9b8a887ae9fa3d88dcb611c398897858dbbd5db4b77b472b9e7b7dc81618a7cf2a913f419208e834948400c5b16e038aedb2107fd024e26d6a123665c49409eefe205915847a5846aaa012d87ec662004b32d199e1f78f8e72444dc4ac37a987478fd2152c8991b4cc9eb3e13dcbf3587aa973ace5e4a81bdfcb4fdd0c36b4d7b7c0f41bd8ec951e91bc6f4e94c5793caa9bb4dc39910b17f097054352c45af226d40478d01da8b196c3c2454d0fc25b795dbe4706b03fda265e03988e98c17d89cff3a6c9567d05644f6449220f11587f726e1c45e66926cc2dcbb6f4c566c9af77e409f780762990e2d390bc5f09677d9c27fb12501e4fa412618d33f75dfb1370dd11d52a73b0f598eab5cd5711c213d9782bb85b4845b2a1db2d19314403ae979739474761a168e198b863bdd6cb5ada9db23dcf7f126be601ec66b92df7be81513a1687cd7f0ddf9015cb8cc2d637652c7ebf841414e3cf8a67c2b8244e2e7dff5b4d0289a09b7419b08227f6f9e2ffb196f0047015e1338de5e564f44c52c8138b6a0f061483f337004ada696e7207f2c7b35471459e42fda050c8a895a044c00d36c49aedeb1a87b5e13afaacd4ee735c4034b6a581be3e15df7a46baff267337149afb289203f7486a7b1e36b7fbbfabbd041d4b45137a9ebf42ad1aacf13afa8956703d81140e12cfc6b3de32d3ab76df5e96805f7dde71a4a3fdfc1a49fc12f3a5851cb8e975f5a1631f27b04639ab759bd20d55524cd5151edb61705fb61b4524571b78c64862045daccd918e7d535e647e5b865a4b9f942b49b258866a4e60e179ba4eed9fccfc98d1dace48da13a4802edfa92bd55afa828deeadc31d78f34bceed1ac508ee3fd1b27d59661d2745175c3452e995277974800d413840056adbd87f0c82d2a5a3c135ebd4f959e1faa5265cb375849d499fd25e2035e92abd46450835ffa5d9806d2fb90445e5dcb0c667cdace20cccb29978767e8b001c149cbf99fe332df7daef93a08a4f77370ae2fd24aed1861f57cd5fbd7264494c2ffbfe3627e43e551cf84cbd63163e6332e71954b2fd30277883d40a30e7a558fb946dfc089b6132b6a2ca353927cb04e71d92403570ed771fb0eb6fe70baffcd20817deb5fef8cae98e644005a6a3f92abc8b9e66f21aee64483133611c19326270ae472f222588aee0901063d60ca1756dd26615a72764a5ba5f9b8c12186b1b7ff970a802748f960b54c5963822232b0fb542005f4fa947e98f2212178cce07200bbc2688926ce59fbb44f2fb3d4a415b6a43042d745a034c06e6fb75f21c31137327031d4a8f0749693f684a1db5defd467c1acfdb6eb2576af43e49df3d328391f769e2a642955d5452746231d9d2f286294c62a107c09ffa098628d8381d4993f4c1d905199cb513df4ea95847084465fb51bc8850f4a205b096dc0dc2c0bddbb6b4eaeb9322ea942da78cc95945bcc69f71845e30376a1831658e5d2e84f96c50ed8e47749b4730f7f0572e0fafc67f3fb8cd26209058d0a6588a53230db45f9adb1f3648ce7e0a4b54416262d62fc8c59adc2c4c57b036cca50cecf864afbcc84461533c6da49ed9a2a2e21b88727e97505af7420851373528cb3a9e8447645be1ac93859803709dc42ebad6c45730be3b418262971f2e7b17e174cbcb79da69540fd6da0b0ba69e6e270f779bc31b7435653dd91ab4aea96fab0f50debf84bc809a2c39ad3cd8ea2dc443ab78b402c417ab13b6eda06d9ad02227d88b114a81d57082d027f75f403dafe24bd5ac34767c48841d98742f9b7f9cd275ffa512c8202618c72b08ade1559c1d02ed8fa7919e3d6803c75313a30712b302e305e9a78e788c7ffe0dae438bb3db569a26c88c70a0ff47ccf99faa2afbc25010694d0f373ffa52104664441d4c52b2fccb4a88d007cfb5e4bfaa17af08906d7371e07d86d8d719c913f6b20d126e93e04348a22bec68aec44a3f69ceea0375cbe4666e55d209ccb4e811d9091b51238e36ee31108c50d8761c363c4a575c9738df2ee3b31f859b5e4303a4bd01dc0359e7955d431df0942521f5a8355882b8e07ecc87e88423ffc2318cbfdd152f619748b7cb0c43f427499c12f914619a1eee12e09d79f1d244673dc79f73c11438a36b14b3cf6a0afbf40d2a0184d9933ebfd25792ed3558d83b9dd559e07c9a9c81b64dc94427b058237d15b0c7d9346df62928b6a78dcf0624d4bf3293dcf48b6ff0fc0727fc97c1cdd96a232a2a4cd756848e08ae304b3f796b15250b297bb5fce47c16fd0ffe9f6f68bfd3a7a361c11103cd4f187e5d2cf4770eefdf967e6d1d5459ddaf69a14f8730635c47cbfbfce0c6e04fd9569a40a367ba0e81c4814c69a0be046c67d60e6c4de457a6a6b8d51d03ea5a0905b39058586d62301af3f7082eb8c6ad8e48eadf42ba46a83e98b58f31ea10401802f0e29ef4d463877f9bf5298404e5476a120d40d408db7c07b197cd887e0d15921da147f0273b2165dc0da856ac61f81a5c63836b04af8d9ab53af548551a5317ab39d2174db8395d57a22355e196319b0a8dc0e8ed23de98b4f4c67fe2ae915482a9f2d1cbdf4ca69675a968b18ae4cc256060ab403e410b918d4f81f9588d42b3e19c61ff287fc960847ee4486a1a754ddf942060f65566bb555f191408e094575d9a7d8f7f5dc8e9767a4cb7af4f90a3e53877ad87bffc3bd1c8e600899491e61526f74efa9f5b828c895c6b7651c3f09f08467472a763ba6db36b1cd724b84074d77c9d79aec3fc7e296a7ef0f795ba19fcb8fc34f9ffaaf6be73df31f8bd272277c55ffdfd169dedf2b8d4bf1cecf31f58ac0f151e490a66a736e1d76acfcafc3052541d2e4ed898156e5512c53c72fa707707d104d77e3f3ef3f91fe54bad8f7904d8d469b741d666e6fd4f2a790e86625b0010a2009fea80c42d4b492ec767f819cbddc5ec3e9fc1a4ab275737c22749e0547218ef39febce4eb349ac4cf40c52662d983530f55e9f990540ef08c3a95d7c06a3511bbf8fa66c8239fe975fdfc90f9334784b3f1fa0b1123cf25156cdef770190b1c24032e57b8ff5a0e018778375b31d7ab35fa1f06e0ed1413151dae4bc9c6cb7432a6abe5b349e7e2e2a209fb0f589a2fa60283bcf7a042087cb608e8fb015ca59ebdca0bb4d8723973fd692e7846aeeab19e4a04c99b552defb85a9bf1601964a5e6d761f4d76c5c65144d9175fd7ce511a151a92bcaeff20ec32293c31206ca265a122e9b334a06e126ad3618be822a8a9350e89e550d0a7731ef9ef82dbeeb8bff35be4f9d647dd01212a4d5a90577f84557fc61de98ddc5a2cae4cc2d6f6891c42ae7e2101fbb45fb86f75f03146f72b05d58f22ec2b5c03172e1d0da973cd670b301a9f3367edcd47018beb05724b0c250c3e2bbc98bb2e8bd4d5e6c839d1be774ebddc72ebc295f5124738bf9b51312ff15f7b5b00cb8634bdde64c4f921dd1e5401e8c433dd1f25ca256029ceb95e027196c5c9f6ed04261a0028837506e34516be2ff5e620ce36a55c610eefa26c0825172af611c4d29dde557b1d53dcc847c980592580797e98b8d8d17ac59925e61e452ac6c2473836f59c965840c0f3dca9891531a1e085a3846084805e6e5c9efa01324e5bc03f55507b14b21275db54f8a7730a01e0955c484302c5d9bd150f6d1435f13de80c9b7ce6f596b4721fac5ad2a96947e2a40ef3eb78b5651abcd070742773ec7144c23d477b0d11ac2d42706cd8534a9008be4f556aaa4770cae2cc3eb178bd15b251bd925b2199c2f34b3a2c943b871f2421845d878f3</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-up">
      <input class="hbe hbe-input-field hbe-input-field-up" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-up" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-up">ÊñáÁ´†Â∑≤Âä†ÂØÜÔºåËØ∑ËæìÂÖ•ÂØÜÁ†Å üòõÔºö</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Ë£ÖÈ•∞ËÄÖÊ®°Âºè</title>
    <url>/p/a708a60d.html</url>
    <content><![CDATA[<html><head></head><body><p>ÊåáÂú®‰∏çÊîπÂèòÂéüÊúâÂØπË±°ÁöÑÂü∫Á°Ä‰∏äÔºåÂ∞ÜÂäüËÉΩÈôÑÂä†Âà∞ÂØπË±°‰∏äÔºåÊØîÁªßÊâøÊõ¥Âä†ÁÅµÊ¥ª„ÄÇ</p>
<p>ÈÄÇÁî®Âú∫ÊôØÔºö</p>
<p>Ôºà1ÔºâÊâ©Â±ï‰∏Ä‰∏™Á±ªÁöÑÂäüËÉΩÊàñÁªô‰∏Ä‰∏™Á±ªÊ∑ªÂä†ÈôÑÂä†ËÅåË¥£Ôºõ</p>
<p>Ôºà2ÔºâÂä®ÊÄÅÁªô‰∏Ä‰∏™ÂØπË±°Ê∑ªÂä†ÂäüËÉΩÔºåËøô‰∫õÂäüËÉΩÂèØ‰ª•ÂÜçÂä®ÊÄÅÁöÑÊí§ÈîÄÔºõ</p>
<p>Âú®ÁîüÊ¥ª‰∏≠ÔºåÁªôÁÖéÈ•ºÂä†È∏°Ëõã„ÄÅËõãÁ≥ïÂä†Ê∞¥Êûú„ÄÅÊàøÂ≠êË£Ö‰øÆÁ≠âÈÉΩÊòØÂú®‰∏∫ÂØπË±°Êâ©Â±ï‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑËÅåË¥£„ÄÇ</p>
<p>ÁÖéÈ•ºÂä†ËõãÂä†ËÇ†ËÆ°ÁÆóÊúÄÁªàÈáëÈ¢ùÁöÑÊ°à‰æãÂàÜÊûêÔºö</p>
<p>BatterCakeÔºö ÊôÆÈÄöÁÖéÈ•º</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BatterCake</span> {</span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">getMsg</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ÁÖéÈ•º"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>BatterCakeWithEggÔºöÁÖéÈ•ºÂä†Ëõã</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BatterCakeWithEgg</span> <span class="keyword">extends</span> <span class="title class_">BatterCake</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">getMsg</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getMsg() + <span class="string">"+1‰∏™È∏°Ëõã"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getPrice() + <span class="number">2</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>BatterCakeWithEggWithSausageÔºöÁÖéÈ•ºÂä†ËõãÂä†ËÇ†</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BatterCakeWithEggWithSausage</span> <span class="keyword">extends</span> <span class="title class_">BatterCakeWithEgg</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">getMsg</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getMsg() + <span class="string">"+1È¶ôËÇ†"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getPrice() + <span class="number">3</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Test ÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BatterCakeTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">BatterCake</span> <span class="variable">batterCake</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BatterCake</span>();</span><br><span class="line">        System.out.println(batterCake.getMsg() + <span class="string">" -&gt; ‰ª∑Ê†ºÔºö"</span> + batterCake.getPrice());</span><br><span class="line"></span><br><span class="line">        <span class="type">BatterCakeWithEgg</span> <span class="variable">batterCakeWithEgg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BatterCakeWithEgg</span>();</span><br><span class="line">        System.out.println(batterCakeWithEgg.getMsg() + <span class="string">" -&gt; ‰ª∑Ê†ºÔºö"</span> + batterCakeWithEgg.getPrice());</span><br><span class="line"></span><br><span class="line">        <span class="type">BatterCakeWithEggWithSausage</span> <span class="variable">batterCakeWithEggWithSausage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BatterCakeWithEggWithSausage</span>();</span><br><span class="line">        System.out.println(batterCakeWithEggWithSausage.getMsg() + <span class="string">" -&gt; ‰ª∑Ê†ºÔºö"</span> + batterCakeWithEggWithSausage.getPrice());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËøêË°åÁªìÊûúÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ÁÖéÈ•º -&gt; ‰ª∑Ê†ºÔºö5</span><br><span class="line">ÁÖéÈ•º+1‰∏™È∏°Ëõã -&gt; ‰ª∑Ê†ºÔºö7</span><br><span class="line">ÁÖéÈ•º+1‰∏™È∏°Ëõã+1È¶ôËÇ† -&gt; ‰ª∑Ê†ºÔºö10</span><br></pre></td></tr></tbody></table></figure>

<p>‚Äã        ÁªìÊûúËôΩÁÑ∂Ê≤°ÊúâÈóÆÈ¢òÔºå‰ΩÜÊòØÂ¶ÇÊûúÁî®Êà∑ÈúÄË¶ÅÂä†‰∏§‰∏™Ëõã‰∏ÄÊ†πËÇ†ÁöÑÁÖéÈ•ºÔºåÈÇ£‰πàÊòØÊó†Ê≥ïËÆ°ÁÆóÂá∫‰ª∑Ê†ºÁöÑÔºåÈô§ÈùûÂú®ÈáçÊñ∞ÂÜô‰∏Ä‰∏™Á±ªÔºåÂ¶ÇÊûúÈúÄÊ±ÇÂÜçÂèòÈÇ£ÊòØ‰∏çÂêàÁêÜÁöÑ„ÄÇ‰∏ãÈù¢‰ΩøÁî®Ë£ÖÈ•∞ËÄÖÊ®°ÂºèÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p>AbstractBatterCakeÔºöÁÖéÈ•ºË°å‰∏∫ÊäΩË±°Á±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractBatterCake</span> {</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> String <span class="title function_">getMsg</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>BatterCakeDecoratorÔºöÁÖéÈ•ºË£ÖÈ•∞ËÄÖÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BatterCakeDecorator</span> <span class="keyword">extends</span> <span class="title class_">AbstractBatterCake</span>{</span><br><span class="line">    <span class="keyword">private</span> AbstractBatterCake batterCake;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BatterCakeDecorator</span><span class="params">(AbstractBatterCake batterCake)</span> {</span><br><span class="line">        <span class="built_in">this</span>.batterCake = batterCake;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">getMsg</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.batterCake.getMsg();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.batterCake.getPrice();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>EggDecoratorÔºöÈ∏°ËõãË£ÖÈ•∞ËÄÖÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EggDecorator</span> <span class="keyword">extends</span> <span class="title class_">BatterCakeDecorator</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">EggDecorator</span><span class="params">(AbstractBatterCake batterCake)</span> {</span><br><span class="line">        <span class="built_in">super</span>(batterCake);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> {}</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">getMsg</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getMsg() + <span class="string">"+1‰∏™È∏°Ëõã"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getPrice() + <span class="number">2</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>SausageDecoratorÔºöÈ¶ôËÇ†Ë£ÖÈ•∞ËÄÖÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SausageDecorator</span> <span class="keyword">extends</span> <span class="title class_">BatterCakeDecorator</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SausageDecorator</span><span class="params">(AbstractBatterCake batterCake)</span> {</span><br><span class="line">        <span class="built_in">super</span>(batterCake);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> {}</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">getMsg</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getMsg() + <span class="string">"+1Ê†πËÇ†"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getPrice() + <span class="number">3</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>BaseBatterCakeÔºöÁÖéÈ•ºÁöÑÂü∫Á°ÄÂ•óÈ§ê</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseBatterCake</span> <span class="keyword">extends</span> <span class="title class_">AbstractBatterCake</span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">getMsg</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ÁÖéÈ•º"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WrapperTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        AbstractBatterCake batterCake;</span><br><span class="line">        <span class="comment">// ‰π∞‰∏Ä‰∏™Á¥†ÁÖéÈ•º</span></span><br><span class="line">        batterCake = <span class="keyword">new</span> <span class="title class_">BaseBatterCake</span>();</span><br><span class="line">        <span class="comment">// Âä†‰∏™Ëõã</span></span><br><span class="line">        batterCake = <span class="keyword">new</span> <span class="title class_">EggDecorator</span>(batterCake);</span><br><span class="line">        <span class="comment">// Âä†Ê†πËÇ†</span></span><br><span class="line">        batterCake = <span class="keyword">new</span> <span class="title class_">SausageDecorator</span>(batterCake);</span><br><span class="line">        <span class="comment">// ÂÜçÂä†‰∏Ä‰∏™Ëõã</span></span><br><span class="line">        batterCake = <span class="keyword">new</span> <span class="title class_">EggDecorator</span>(batterCake);</span><br><span class="line">        System.out.println(batterCake.getMsg() + <span class="string">" -&gt; ‰ª∑Ê†º"</span> + batterCake.getPrice());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>UMLÁ±ªÂõæÔºö</p>
<p><img src="/p/a708a60d/wrapper_1.png" alt="UMLÁªìÊûÑÂõæ"></p>
<p>ËøêË°åÁªìÊûú</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ÁÖéÈ•º+1‰∏™È∏°Ëõã+1Ê†πËÇ†+1‰∏™È∏°Ëõã -&gt; ‰ª∑Ê†º12</span><br></pre></td></tr></tbody></table></figure>

<p>ÊÄªÁªì‰∏Ä‰∏ãÔºö</p>
<p>Ë£ÖÈ•∞ËÄÖÊ®°ÂºèÂ∞±ÂÉèÊâìÂåÖ‰∏Ä‰∏™Âø´ÈÄíÔºö</p>
<p>Ôºà1Ôºâ‰∏ª‰ΩìÔºöÈô∂Áì∑„ÄÅË°£Êúç</p>
<p>Ôºà2ÔºâÂåÖË£ÖÔºöÂ°ëÊñôË¢ã„ÄÅÊ≥°Ê≤´„ÄÅÁ∫∏Êùø</p>
<p>È¶ñÂÖàÂàÜÊûê‰∏ª‰ΩìÂíåÂåÖË£ÖÁöÑÂÖ¨ÂÖ±Ë°å‰∏∫ÔºåÊØîÂ¶ÇÈÉΩÂÖ∑Â§áÂêçÁß∞Âíå‰ª∑Ê†ºÔºåÈÇ£‰πà‰∏Ä‰∏™Ë°å‰∏∫ÊäΩË±°Êé•Âè£Á±ªÔºõ‰∏ª‰ΩìÁªßÊâøËøô‰∏™Ë°å‰∏∫ÊäΩË±°Á±ªÔºåÂú®ÊäΩË±°Âá∫‰∏Ä‰∏™‰∏ª‰ΩìÊäΩË±°Á±ªÔºõ‰∏ª‰ΩìÁöÑÂü∫Á±ªÂíåÊâÄÊúâÁöÑÂåÖË£ÖÂÖ®ÈÉ®ÈÉΩÂçïÁã¨ÁªßÊâøËøô‰∏™‰∏ª‰ΩìÊäΩË±°Á±ªÂÅöËá™Â∑±ÁöÑÂÆûÁé∞„ÄÇÂú®Ê≠§‰πãÂêéÔºåËøô‰∏™‰∏ª‰ΩìË¶ÅÂåÖÊÄé‰πàÊ†∑ÁöÑÂåÖË£ÖÔºå‰ΩøÁî®ÈôÑÂä†ÁöÑÊñπÂºèÂä†‰∏äÂéªÔºàÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞‰º†ÈÄíË°å‰∏∫ÊäΩË±°Á±ªÁöÑÂØπË±°ÂÆûÁé∞ÈÄíÂΩíÔºâÔºåËÄå‰∏çÊòØÈÄöËøáÁªßÊâøÊù•Âä†„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title>ÈÄÇÈÖçÂô®Ê®°Âºè</title>
    <url>/p/f5c535ea.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Ê°à‰æã‰∏Ä"><a href="#Ê°à‰æã‰∏Ä" class="headerlink" title="Ê°à‰æã‰∏Ä"></a>Ê°à‰æã‰∏Ä</h2><p>ÊèíÂ∫ßÁöÑÁîµÂéãÊòØ 220VÔºåÊâãÊú∫ÂÖÖÁîµÂô®‰ºöÊää 220V ËΩ¨Êç¢Êàê 5VÁîµÂéãÁªôÊâãÊú∫ÂÖÖÁîµÔºåÊ≠§Êó∂Ëøô‰∏™ÂÖÖÁîµÂô®Â∞±ÊòØ‰∏Ä‰∏™ÈÄÇÈÖçÂô®„ÄÇ</p>
<p>AC220ÔºöÊèíÂ∫ßËæìÂá∫ 220V ÁîµÂéã </p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AC220</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">outputAC220V</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"[ÊèíÂ∫ßÁîµÊ∫ê] ËæìÂá∫‰∫§ÊµÅÁîµ220V"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">220</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>DC5ÔºàÊé•Âè£ÔºâÔºöÊâãÊú∫ÂÖÖÁîµÂô®ËæìÂá∫5VÁîµÂéã</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DC5</span> {</span><br><span class="line">    <span class="type">int</span> <span class="title function_">output5V</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>PowerAdapter ÁîµÊ∫êÈÄÇÈÖçÂô®</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PowerAdapter</span> <span class="keyword">implements</span> <span class="title class_">DC5</span> {</span><br><span class="line">    <span class="keyword">private</span> AC220 ac220;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PowerAdapter</span><span class="params">(AC220 ac220)</span> {</span><br><span class="line">        <span class="built_in">this</span>.ac220 = ac220;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">output5V</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">int</span> <span class="variable">adapterInput</span> <span class="operator">=</span> ac220.outputAC220V();</span><br><span class="line">        <span class="type">int</span> <span class="variable">adapterOutput</span> <span class="operator">=</span> adapterInput / <span class="number">44</span>;</span><br><span class="line">        System.out.println(<span class="string">"[ÊâãÊú∫ÂÖÖÁîµÂô®]‰ΩøÁî®ÁîµÊ∫êÈÄÇÈÖçÂô®ËΩ¨Êç¢‰∏∫"</span> + adapterOutput + <span class="string">"VÁîµÂéã"</span>);</span><br><span class="line">        <span class="keyword">return</span> adapterOutput;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Test ÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PowerAdapterTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">PowerAdapter</span>(<span class="keyword">new</span> <span class="title class_">AC220</span>()).output5V();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Ê°à‰æã‰∫å"><a href="#Ê°à‰æã‰∫å" class="headerlink" title="Ê°à‰æã‰∫å"></a>Ê°à‰æã‰∫å</h2><p>Â§ñÂõΩ‰∫∫Âê¨‰∏çÊáÇ‰∏≠ÊñáÔºåÊàë‰ª¨Âè™‰ºöËÆ≤‰∏≠ÊñáÔºåÈÇ£‰πàÈúÄË¶Å‰∏Ä‰∏™ÁøªËØëÔºåÊää‰∏≠ÊñáÁøªËØëÊàêËã±Êñá</p>
<p>Chinese ‰∏≠ÂõΩ‰∫∫</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Chinese</span> {</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">speak</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"[‰∏≠ÂõΩ‰∫∫]‰Ω†Â•Ω"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"‰Ω†Â•Ω"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>TranslatorÔºàÊé•Âè£ÔºâÔºöÁøªËØë‰∏≠Êñá</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Translator</span> {</span><br><span class="line">    String <span class="title function_">translate</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>TranslateAdapterÔºöÁøªËØëÈÄÇÈÖç</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TranslateAdapter</span> <span class="keyword">implements</span> <span class="title class_">Translator</span> {</span><br><span class="line">    <span class="keyword">private</span> Chinese chinese;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TranslateAdapter</span><span class="params">(Chinese chinese)</span> {</span><br><span class="line">        <span class="built_in">this</span>.chinese = chinese;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">translate</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"[ÁøªËØëÈÄÇÈÖçÂô®]Â∞Ü"</span> + chinese.speak() + <span class="string">"ÁøªËØëÊàêËã±ÊñáÔºöHello"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Test ÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdapterTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">TranslateAdapter</span>(<span class="keyword">new</span> <span class="title class_">Chinese</span>()).translate();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="‰ºòÁº∫ÁÇπ"><a href="#‰ºòÁº∫ÁÇπ" class="headerlink" title="‰ºòÁº∫ÁÇπ"></a>‰ºòÁº∫ÁÇπ</h2><p>‰ºòÁÇπ</p>
<p>Ôºà1ÔºâÊèêÈ´òÁ±ªÁöÑÈÄèÊòéÊÄßÂíåÂ§çÁî®ÊÄßÔºåÁé∞ÊúâÁöÑÁ±ª‰ºöË¢´ÊúçÁî®‰ΩÜ‰∏çÈúÄË¶ÅÊîπÂèòÔºõ</p>
<p>Ôºà2ÔºâÁõÆÊ†áÁ±ªÂíåÈÄÇÈÖçÂô®Á±ªËß£ËÄ¶ÔºåÂèØ‰ª•ÊèêÈ´òÁ®ãÂ∫èÁöÑÊâ©Â±ïÊÄßÔºõ</p>
<p>Ôºà3ÔºâÂ§ßÂ§öÊï∞Âú∫ÊôØÁ¨¶ÂêàÂºÄÈó≠ÂéüÂàôÔºõ</p>
<p>Áº∫ÁÇπ</p>
<p>Ôºà1ÔºâÂú®ÈÄÇÈÖçÂô®‰ª£Á†ÅÁºñÂÜôÊó∂ÔºåÈúÄË¶ÅÂÖ®Èù¢ËÄÉËôëÔºåÂèØËÉΩ‰ºöÂ¢ûÂä†Á≥ªÁªüÁöÑÂ§çÊùÇÂ∫¶Ôºõ</p>
<p>Ôºà2ÔºâÂ¢ûÂä†‰∫Ü‰ª£Á†ÅÁöÑÈòÖËØªÈöæÂ∫¶ÔºåÈôç‰Ωé‰∫Ü‰ª£Á†ÅÁöÑÂèØËØªÊÄßÔºåËøáÂ§ö‰ΩøÁî®ÈÄÇÈÖçÂô®‰ºö‰ΩøÁ≥ªÁªüÁöÑ‰ª£Á†ÅÂáå‰π±Ôºõ</p>
</body></html>]]></content>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂßîÊ¥æÊ®°Âºè</title>
    <url>/p/3ffc1ee8.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="ÂÆö‰πâ"><a href="#ÂÆö‰πâ" class="headerlink" title="ÂÆö‰πâ"></a>ÂÆö‰πâ</h2><p>ÊòØ‰∏ÄÁßçÈù¢ÂêëÂØπË±°ÁöÑËÆæËÆ°Ê®°ÂºèÔºåÂÖÅËÆ∏ÂØπË±°ÁªÑÂêàÂÆûÁé∞‰∏éÁªßÊâøÁõ∏ÂêåÁöÑ‰ª£Á†ÅÈáçÁî®„ÄÇÂÆÉÁöÑÂü∫Êú¨‰ΩúÁî®Â∞±ÊòØË¥üË¥£‰ªªÂä°ÁöÑË∞ÉÁî®ÂíåÂàÜÈÖç‰ªªÂä°ÔºåÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÈùôÊÄÅ‰ª£ÁêÜÔºåÂèØ‰ª•ÁêÜËß£‰∏∫ÂÖ®ÊùÉ‰ª£ÁêÜÔºå‰ΩÜÊòØ‰ª£ÁêÜÊ®°ÂºèÊ≥®ÈáçËøáÁ®ãÔºåËÄåÂßîÊ¥æÊ®°ÂºèÊ≥®ÈáçÁªìÊûú„ÄÇÂßîÊ¥æÊ®°ÂºèÂ±û‰∫éË°å‰∏∫ÂûãÊ®°ÂºèÔºå‰∏çÂ±û‰∫éGOF23ÁßçËÆæËÆ°Ê®°Âºè‰∏≠„ÄÇ</p>
<h2 id="ÁªèÂÖ∏Ê°à‰æã"><a href="#ÁªèÂÖ∏Ê°à‰æã" class="headerlink" title="ÁªèÂÖ∏Ê°à‰æã"></a>ÁªèÂÖ∏Ê°à‰æã</h2><p>ËÄÅÊùøÊÉ≥Ë¶ÅÂÅö‰∏Ä‰∏™XXÈ°πÁõÆÔºåÂÆâÊéíÁªôÈ°πÁõÆÁªèÁêÜÔºåÈ°πÁõÆÁªèÁêÜ‰∫ãÂÖàÊòØ‰∫ÜËß£Êï¥‰∏™È°πÁõÆÁªÑÁöÑÊØè‰∏™‰∫∫ÁöÑËÅåË¥£ÁöÑÔºå‰∫éÊòØÈ°πÁõÆÁªèÁêÜÊãøÂà∞È°πÁõÆ‰πãÂêéÔºåÂàÜÊ®°ÂùóÂàÜÈÖçÁªôÈ°πÁõÆÁªÑÁöÑÊàêÂëò„ÄÇ</p>
<p>ËÄÅÊùø Boss</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Boss</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">command</span><span class="params">(String command, Leader leader)</span> {</span><br><span class="line">        System.out.println(<span class="string">"[ËÄÅÊùø]Ë¶ÅÂºÄÂèë‰∏™["</span> + command + <span class="string">"]ÁöÑÈ°πÁõÆ"</span>);</span><br><span class="line">        leader.doing(command);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÖ¨Âè∏ÂëòÂ∑•ÂÖ±ÂêåË°å‰∏∫ ÊâìÂ∑• IEmployee</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IEmployee</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">doing</span><span class="params">(String command)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>È°πÁõÆÁªèÁêÜ Leader</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Leader</span> <span class="keyword">implements</span> <span class="title class_">IEmployee</span> {</span><br><span class="line">    <span class="comment">// leader ÈúÄË¶ÅÈ¢ÑÂÖàÁü•ÈÅìÊØè‰∏™ÂëòÂ∑•ÁöÑÁâπ‰∫ßÔºåÁâπÂæÅÔºåÂàÜÂèë‰ªªÂä°</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, IEmployee&gt; target = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Leader</span><span class="params">()</span> {</span><br><span class="line">        target.put(<span class="string">"Âä†ÂØÜ"</span>, <span class="keyword">new</span> <span class="title class_">EmployeeA</span>());</span><br><span class="line">        target.put(<span class="string">"CRUD"</span>, <span class="keyword">new</span> <span class="title class_">EmployeeB</span>());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// È°πÁõÆÁªèÁêÜËá™Â∑±‰∏çÂπ≤Ê¥ª</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doing</span><span class="params">(String command)</span> {</span><br><span class="line">        System.out.println(<span class="string">"[È°πÁõÆÁªèÁêÜ] Êî∂Âà∞["</span> + command + <span class="string">"] ÂàÜÈÖç‰ªªÂä°ÁªôÂëòÂ∑•"</span>);</span><br><span class="line">        target.get(command).doing(command);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂëòÂ∑•A</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeA</span> <span class="keyword">implements</span> <span class="title class_">IEmployee</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doing</span><span class="params">(String command)</span> {</span><br><span class="line">        System.out.println(<span class="string">"[ÂëòÂ∑•A] ÊàëÁé∞Âú®ÂºÄÂßãÂπ≤["</span> + command + <span class="string">"]Â∑•‰Ωú"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂëòÂ∑•B</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeB</span> <span class="keyword">implements</span> <span class="title class_">IEmployee</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doing</span><span class="params">(String command)</span> {</span><br><span class="line">        System.out.println(<span class="string">"[ÂëòÂ∑•B] ÊàëÁé∞Âú®ÂºÄÂßãÂπ≤["</span> + command + <span class="string">"]Â∑•‰Ωú"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËÄÅÊùøÂÆâÊéí‰ªªÂä° ÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DelegateSimpleTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">Boss</span> <span class="variable">boss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Boss</span>();</span><br><span class="line">        boss.command(<span class="string">"Âä†ÂØÜ"</span>, <span class="keyword">new</span> <span class="title class_">Leader</span>());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title>Â∑•ÂéÇÊ®°Âºè</title>
    <url>/p/54788f73.html</url>
    <content><![CDATA[<html><head></head><body><p>Â∑•ÂéÇÊ®°ÂºèÂè™ÂÖ≥ÂøÉÁªìÊûúÔºå‰∏çÂÖ≥ÂøÉËøáÁ®ãÔºõÂÆö‰πâ‰∏Ä‰∏™ÂàõÂª∫ÂØπË±°ÁöÑÊé•Âè£ÔºåËÆ©ÂÖ∂Â≠êÁ±ªËá™Â∑±ÂÜ≥ÂÆöÂÆû‰æãÂåñÂì™‰∏Ä‰∏™Â∑•ÂéÇÁ±ªÔºåÂ∑•ÂéÇÊ®°Âºè‰ΩøÂÖ∂ÂàõÂª∫ËøáÁ®ãÂª∂ËøüÂà∞Â≠êÁ±ªËøõË°åÔºõ</p>
<p>‰ª•Áîü‰∫ßÊâãÊú∫‰∏∫‰æãÔºåÂà∂ÈÄ†ÊâãÊú∫Êúâ‰∏ÄÂ•óÊ†áÂáÜÔºåÁé∞Âú®Â∏ÇÈù¢ÁöÑÊâãÊú∫ÂìÅÁâå‰ºöÊâæ‰ª£Â∑•ÂéÇÊåâÁÖßËøô‰∏™Ê†áÂáÜÁîü‰∫ßÊâãÊú∫„ÄÇ</p>
<h2 id="ÁÆÄÂçïÂ∑•ÂéÇÊ®°Âºè"><a href="#ÁÆÄÂçïÂ∑•ÂéÇÊ®°Âºè" class="headerlink" title="ÁÆÄÂçïÂ∑•ÂéÇÊ®°Âºè"></a>ÁÆÄÂçïÂ∑•ÂéÇÊ®°Âºè</h2><p>ÂÆö‰πâ‰∏Ä‰∏™Â∑•ÂéÇÁ±ªÔºåÊ†πÊçÆ‰º†ÂÖ•ÁöÑÂèÇÊï∞ÂÄºÁöÑ‰∏çÂêåËøîÂõû‰∏çÂêåÁöÑÂÆû‰æã„ÄÇÁâπÁÇπÔºöË¢´ÂàõÂª∫ÁöÑÂÆû‰æãÂÖ∑ÊúâÂÖ±ÂêåÁöÑÁà∂Á±ªÊàñÊé•Âè£„ÄÇ</p>
<p>‰ΩøÁî®Âú∫ÊôØÔºö</p>
<ul>
<li>ÈúÄË¶ÅÂàõÂª∫ÁöÑÂØπË±°ÊØîËæÉÂ∞ë</li>
<li>ÂÆ¢Êà∑Á´Ø‰∏çÂÖ≥ÂøÉÂØπË±°ÁöÑÂàõÂª∫ËøáÁ®ã</li>
</ul>
<p>‰ºòÁº∫ÁÇπÔºö</p>
<ul>
<li>‰ºòÁÇπÔºöÂèØ‰ª•ÂØπÂàõÂª∫ÂØπË±°ËøõË°å‚ÄúÂä†Â∑•‚ÄùÔºåÂØπÂÆ¢Êà∑Á´ØÈöêËóèÁõ∏ÂÖ≥ÁªÜËäÇ</li>
<li>Áº∫ÁÇπÔºöÂàõÂª∫ÈÄªËæëÂ§çÊùÇÊàñÂàõÂª∫ÁöÑÂØπË±°ËøáÂ§öÈÄ†Êàê‰ª£Á†ÅËáÉËÇø</li>
<li>Áº∫ÁÇπÔºöÊñ∞Â¢û„ÄÅÂà†Èô§Â≠êÁ±ªÈÉΩËøùÂèçÂºÄÈó≠ÂéüÂàô„ÄÇ</li>
</ul>
<p><img src="/p/54788f73/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E7%BB%93%E6%9E%84.png" alt="img"></p>
<p><strong>PhoneÁ±ª</strong>ÔºöÊâãÊú∫Ê†áÂáÜËßÑËåÉÁ±ª(AbstractProduct)</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Phone</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">make</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>MiPhoneÁ±ª</strong>ÔºöÂà∂ÈÄ†Â∞èÁ±≥ÊâãÊú∫</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MiPhone</span> <span class="keyword">implements</span> <span class="title class_">Phone</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MiPhone</span><span class="params">()</span> {</span><br><span class="line">        make();</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">make</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Áîü‰∫ßÂ∞èÁ±≥ÊâãÊú∫"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>HuaweiPhoneÁ±ª</strong>ÔºöÂà∂ÈÄ†Âçé‰∏∫ÊâãÊú∫</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HuaweiPhone</span> <span class="keyword">implements</span> <span class="title class_">Phone</span> {</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">HuaweiPhone</span><span class="params">()</span>{</span><br><span class="line">		make();</span><br><span class="line">	}</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">make</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Áîü‰∫ßÂçé‰∏∫ÊâãÊú∫"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>PhoneFactoryÁ±ª</strong>ÔºöÊâãÊú∫‰ª£Â∑•ÂéÇÔºàFactoryÔºâ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneFactory</span> {</span><br><span class="line">    <span class="keyword">public</span> Phone <span class="title function_">makePhone</span><span class="params">(String phoneType)</span> {</span><br><span class="line">        <span class="keyword">if</span>(phoneType.equalsIgnoreCase(<span class="string">"XIAOMI"</span>)){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MiPhone</span>();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(phoneType.equalsIgnoreCase(<span class="string">"HUAWEI"</span>)) {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HuaweiPhone</span>();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Â∑•ÂéÇÊñπÊ≥ïÊ®°Âºè"><a href="#Â∑•ÂéÇÊñπÊ≥ïÊ®°Âºè" class="headerlink" title="Â∑•ÂéÇÊñπÊ≥ïÊ®°Âºè"></a>Â∑•ÂéÇÊñπÊ≥ïÊ®°Âºè</h2><p>ÂÆö‰πâ‰∏Ä‰∏™Áî®‰∫éÂàõÂª∫ÂØπË±°ÁöÑÊé•Âè£ÔºåËÆ©Â≠êÁ±ªÂÜ≥ÂÆöÂÆû‰æãÂåñÂì™‰∏Ä‰∏™Á±ª„ÄÇ</p>
<p>‰ºòÁº∫ÁÇπÔºö</p>
<ul>
<li>‰ºòÁÇπÔºöÈÅµÂæ™ÂºÄÈó≠ÂéüÂàô</li>
<li>‰ºòÁÇπÔºöÂØπÂÆ¢Êà∑Á´ØÈöêËóèÂØπË±°ÁöÑÂàõÂª∫ÁªÜËäÇ</li>
<li>‰ºòÁÇπÔºöÈÅµÂæ™Âçï‰∏ÄËÅåË¥£</li>
<li>Áº∫ÁÇπÔºöÂ¢ûÂä†ÁöÑÁ±ªÊØîËæÉÂ§öÔºåÂ¢ûÂä†‰∫ÜÁ≥ªÁªüÁöÑÂ§çÊùÇÂ∫¶„ÄÇ</li>
<li>Áº∫ÁÇπÔºöÂè™ÊîØÊåÅÂêå‰∏ÄÁ±ª‰∫ßÂìÅÁöÑÂàõÂª∫„ÄÇ</li>
</ul>
<p><img src="/p/54788f73/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-%E6%96%B9%E6%B3%95%E5%B7%A5%E5%8E%82%E7%BB%93%E6%9E%84.png" alt="img"></p>
<p><strong>AbstractFactoryÁ±ª</strong>ÔºöÁîü‰∫ß‰∏çÂêå‰∫ßÂìÅÁöÑÂ∑•ÂéÇÁöÑÊäΩË±°Á±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AbstractFactory</span> {</span><br><span class="line">    Phone <span class="title function_">makePhone</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>XiaoMiFactoryÁ±ª</strong>ÔºöÁîü‰∫ßÂ∞èÁ±≥ÊâãÊú∫ÁöÑÂ∑•ÂéÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XiaoMiFactory</span> <span class="keyword">implements</span> <span class="title class_">AbstractFactory</span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Phone <span class="title function_">makePhone</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MiPhone</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>HuaweiFactoryÁ±ª</strong>ÔºöÁîü‰∫ßÂçé‰∏∫ÊâãÊú∫ÁöÑÂ∑•ÂéÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HuaweiFactory</span> <span class="keyword">implements</span> <span class="title class_">AbstractFactory</span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Phone <span class="title function_">makePhone</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HuaweiPhone</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÊäΩË±°Â∑•ÂéÇÊ®°Âºè"><a href="#ÊäΩË±°Â∑•ÂéÇÊ®°Âºè" class="headerlink" title="ÊäΩË±°Â∑•ÂéÇÊ®°Âºè"></a>ÊäΩË±°Â∑•ÂéÇÊ®°Âºè</h2><p>Ëß£ÂÜ≥‰∫ÜÊñπÊ≥ïÂ∑•ÂéÇÊ®°ÂºèÂè™Áîü‰∫ß‰∏ÄÁßç‰∫ßÂìÅÁöÑÂºäÁ´ØÔºö</p>
<ul>
<li>Êñ∞Â¢û‰∏Ä‰∏™‰∫ßÂìÅÊóèÔºåÂè™ÈúÄË¶ÅÂ¢ûÂä†‰∏Ä‰∏™ÂÖ∑‰ΩìÂ∑•ÂéÇÔºå‰∏çÈúÄË¶Å‰øÆÊîπ‰πãÂâçÁöÑ‰ª£Á†Å</li>
</ul>
<p>ÊäΩË±°Â∑•ÂéÇ‰∏≠Êúâ‰∏§‰∏™Ê¶ÇÂøµÔºö</p>
<p>1„ÄÅ‰∫ßÂìÅÊóèÔºö‰∏Ä‰∏™ÂìÅÁâåÊóó‰∏ãÁöÑÂ§öÁßç‰∫ßÂìÅ</p>
<p>2„ÄÅ‰∫ßÂìÅÁ≠âÁ∫ßÁªìÊûÑÔºö‰∏çÂêåÂìÅÁâå‰∏ãÁöÑÂêå‰∏ÄÁßç‰∫ßÂìÅ</p>
<p>ÊØè‰∏Ä‰∏™ÂìÅÁâåÂ∞±ÊòØÊØè‰∏Ä‰∏™ÂÖ∑‰ΩìÁöÑÂ∑•ÂéÇÔºå‰πüÂ∞±ÊòØËØ¥‰∏Ä‰∏™ÂìÅÁâåË¶ÅÁîü‰∫ß‰∏Ä‰∏™‰∫ßÂìÅÊóèÈúÄË¶ÅÂØπÂ∫î‰∫ßÂìÅÁ≠âÁ∫ßÁªìÊûÑÁöÑÂ∑•ÂéÇÁöÑÊù•ÂÆåÊàê„ÄÇ</p>
<p><img src="/p/54788f73/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E7%BB%93%E6%9E%84.png" alt="img"></p>
<p><strong>ÁîµËÑë(PC)Á±ª</strong>ÔºöÂÆö‰πâPC‰∫ßÂìÅÁöÑÊé•Âè£(AbstractPC)</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PC</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">make</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>MiPCÁ±ª</strong>ÔºöÂÆö‰πâÂ∞èÁ±≥ÁîµËÑë‰∫ßÂìÅ(MIPC)</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MiPC</span> <span class="keyword">implements</span> <span class="title class_">PC</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MiPC</span><span class="params">()</span> {</span><br><span class="line">        <span class="built_in">this</span>.make();</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">make</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Áîü‰∫ßÂ∞èÁ±≥ÁîµËÑë"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>HuaweiPCÁ±ª</strong>ÔºöÂÆö‰πâÂçé‰∏∫ÁîµËÑë‰∫ßÂìÅ(HuaweiPC)</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HuaweiPC</span> <span class="keyword">implements</span> <span class="title class_">PC</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HuaweiPC</span><span class="params">()</span> {</span><br><span class="line">        <span class="built_in">this</span>.make();</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">make</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Áîü‰∫ßÂçé‰∏∫ÁîµËÑë"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>AbstractFactoryÁ±ª</strong>ÔºöÂ¢ûÂä†PC‰∫ßÂìÅÂà∂ÈÄ†Êé•Âè£</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AbstractFactory</span> {</span><br><span class="line">    Phone <span class="title function_">makePhone</span><span class="params">()</span>;</span><br><span class="line">    PC <span class="title function_">makePC</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>XiaoMiFactoryÁ±ª</strong>ÔºöÂ¢ûÂä†Â∞èÁ±≥PCÁöÑÂà∂ÈÄ†ÔºàConcreteFactory1Ôºâ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XiaoMiFactory</span> <span class="keyword">implements</span> <span class="title class_">AbstractFactory</span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Phone <span class="title function_">makePhone</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MiPhone</span>();</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PC <span class="title function_">makePC</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MiPC</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>HuaweiFactoryÁ±ª</strong>ÔºöÂ¢ûÂä†ËãπÊûúPCÁöÑÂà∂ÈÄ†ÔºàConcreteFactory2Ôºâ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HuaweiFactory</span> <span class="keyword">implements</span> <span class="title class_">AbstractFactory</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Phone <span class="title function_">makePhone</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HuaweiPhone</span>();</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PC <span class="title function_">makePC</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HuaweiPC</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</body></html>]]></content>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title>ËßÇÂØüËÄÖÊ®°Âºè</title>
    <url>/p/9a246216.html</url>
    <content><![CDATA[<html><head></head><body><p>ËßÇÂØüËÄÖÊ®°Âºè(Observer Pattern)ÔºöÂÆö‰πâÂØπË±°Èó¥ÁöÑ‰∏ÄÁßç‰∏ÄÂØπÂ§ö‰æùËµñÂÖ≥Á≥ªÔºå‰ΩøÂæóÊØèÂΩì‰∏Ä‰∏Ä‰∏™ÂØπË±°Áä∂ÊÄÅÂèëÁîüÊîπÂèòÊó∂ÔºåÂÖ∂Áõ∏ÂÖ≥‰æùËµñÂØπË±°ÁöÜÂæóÂà∞ÈÄöÁü•Âπ∂Ë¢´Ëá™Âä®Êõ¥Êñ∞„ÄÇ</p>
<p>ËßÇÂØüËÄÖÊòØÂèàÁß∞‰∏∫ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè„ÄÇËßÇÂØüËÄÖ‰∏ÄËà¨ÊòØÊåáÁ¨¨‰∏âÊñπÔºåË¥üË¥£ÈÄöÁü•ËÆ¢ÈòÖËÄÖÊ∂àÊÅØ„ÄÇ</p>
<h2 id="Ê°à‰æã"><a href="#Ê°à‰æã" class="headerlink" title="Ê°à‰æã"></a>Ê°à‰æã</h2><p>Observer ËßÇÂØüËÄÖ‰∏ÄËà¨ÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÊØè‰∏Ä‰∏™ÂÆûÁé∞ËØ•Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÈÉΩÊòØÂÖ∑‰ΩìËßÇÂØüËÄÖ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Observer</span> {</span><br><span class="line">    <span class="comment">// Êé•Êî∂ËÆ¢ÈòÖÂè∑ÁöÑÈÄöÁü•ÔºåÊâÄ‰ª•ÊØè‰∏™ËßÇÂØüËÄÖÈÉΩÈúÄË¶ÅÂÆûÁé∞Ëøô‰∏™ÊñπÊ≥ï</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(String message)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Subject ÊäΩË±°‰∏ªÈ¢òÔºàÊäΩË±°Ë¢´ËßÇÂØüËÄÖÔºâÔºåÊäΩË±°‰∏ªÈ¢òËßíËâ≤ÊääÊâÄÊúâËßÇÂØüËÄÖÂØπË±°‰øùÂ≠òÂú®‰∏Ä‰∏™ÈõÜÂêàÈáåÔºåÊØè‰∏™‰∏ªÈ¢òÈÉΩÂèØ‰ª•Êúâ‰ªªÊÑèÊï∞ÈáèÁöÑËßÇÂØüËÄÖÔºåÊäΩË±°‰∏ªÈ¢òÊèê‰æõ‰∏Ä‰∏™Êé•Âè£ÔºåÂèØ‰ª•Â¢ûÂä†ÂíåÂà†Èô§ËßÇÂØüËÄÖÂØπË±°„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Subject</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Â¢ûÂä†ËÆ¢ÈòÖËÄÖ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">attach</span><span class="params">(Observer observer)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Âà†Èô§ËÆ¢ÈòÖËÄÖ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">detach</span><span class="params">(Observer observer)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ÈÄöÁü•ËÆ¢ÈòÖËÄÖÊõ¥Êñ∞Ê∂àÊÅØ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">notify</span><span class="params">(String message)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ConcreteSubject ÂÖ∑‰Ωì‰∏ªÈ¢òÔºàÂÖ∑‰ΩìË¢´ËßÇÂØüËÄÖÔºâÔºåËØ•ËßíËâ≤Â∞ÜÊúâÂÖ≥Áä∂ÊÄÅÂ≠òÂÖ•ÂÖ∑‰ΩìËßÇÂØüËÄÖÂØπË±°ÔºåÂú®ÂÖ∑‰Ωì‰∏ªÈ¢òÁöÑÂÜÖÈÉ®Áä∂ÊÄÅÂèëÁîüÊîπÂèòÊó∂ÔºåÁªôÊâÄÊúâÊ≥®ÂÜåËøáÁöÑËßÇÂØüËÄÖÂèëÈÄÅÈÄöÁü•„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcreteSubject</span> <span class="keyword">implements</span> <span class="title class_">Subject</span> {</span><br><span class="line">    <span class="comment">//ËßÇÂØüËÄÖÂ≠òÂÇ®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;Observer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Â¢ûÂä†‰∏Ä‰∏™ËßÇÂØüËÄÖ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attach</span><span class="params">(Observer observer)</span> {</span><br><span class="line">        list.add(observer);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Âà†Èô§‰∏Ä‰∏™ËßÇÂØüËÄÖ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">detach</span><span class="params">(Observer observer)</span> {</span><br><span class="line">        list.remove(observer);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÈÄöÁü•ÊâÄÊúâËßÇÂØüËÄÖ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">notify</span><span class="params">(String message)</span> {</span><br><span class="line">        <span class="keyword">for</span> (Observer observer : list) {</span><br><span class="line">            observer.update(message);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>User  ËÆ¢ÈòÖËÄÖ(Ë¢´ËßÇÂØüËÄÖ)</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Observer</span> {</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name)</span> {</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(String message)</span> {</span><br><span class="line">        System.out.println(name + <span class="string">" Êî∂Âà∞Ê∂àÊÅØ:"</span> + message);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Test ÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testObserver</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">ConcreteSubject</span> <span class="variable">concreteSubject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcreteSubject</span>();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">"Âº†‰∏â"</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">"ÊùéÂõõ"</span>);</span><br><span class="line">        concreteSubject.attach(user1);</span><br><span class="line">        concreteSubject.attach(user2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ÂèëÂ∏ÉÊ∂àÊÅØ</span></span><br><span class="line">        concreteSubject.notify(<span class="string">"Âø´Êù•Â∏ÆÊàëÁ†ç‰∏ÄÂàÄ"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ËßÇÂØüËÄÖÊ®°ÂºèÂú®JDK‰∏≠ÁöÑÂ∫îÁî®"><a href="#ËßÇÂØüËÄÖÊ®°ÂºèÂú®JDK‰∏≠ÁöÑÂ∫îÁî®" class="headerlink" title="ËßÇÂØüËÄÖÊ®°ÂºèÂú®JDK‰∏≠ÁöÑÂ∫îÁî®"></a>ËßÇÂØüËÄÖÊ®°ÂºèÂú®JDK‰∏≠ÁöÑÂ∫îÁî®</h2><p> Âú®JDK‰∏≠ÁöÑjava.awt.Event Â∞±ÊòØËßÇÂØüËÄÖÊ®°ÂºèÁöÑ‰∏ÄÁßçÔºå‰ΩøÁî®ËßÇÂØüËÄÖÊ®°ÂºèÂíåÂèçÂ∞ÑÂÆûÁé∞ÊñπÊ≥ïÂõûË∞É„ÄÇ</p>
<p>EventÔºö‰∫ã‰ª∂ÂÆû‰ΩìÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Event</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object source;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Method callback;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String trigger;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> time;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Event</span><span class="params">(Object target, Method callback)</span> {</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">        <span class="built_in">this</span>.callback = callback;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getSource</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> source;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSource</span><span class="params">(Object source)</span> {</span><br><span class="line">        <span class="built_in">this</span>.source = source;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getTarget</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTarget</span><span class="params">(Object target)</span> {</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Method <span class="title function_">getCallback</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> callback;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCallback</span><span class="params">(Method callback)</span> {</span><br><span class="line">        <span class="built_in">this</span>.callback = callback;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTrigger</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> trigger;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Event <span class="title function_">setTrigger</span><span class="params">(String trigger)</span> {</span><br><span class="line">        <span class="built_in">this</span>.trigger = trigger;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getTime</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> time;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTime</span><span class="params">(<span class="type">long</span> time)</span> {</span><br><span class="line">        <span class="built_in">this</span>.time = time;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Event{"</span> +</span><br><span class="line">                <span class="string">"source="</span> + source +</span><br><span class="line">                <span class="string">", target="</span> + target +</span><br><span class="line">                <span class="string">", callback="</span> + callback +</span><br><span class="line">                <span class="string">", trigger='"</span> + trigger + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", time="</span> + time +</span><br><span class="line">                <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>EventListenerÔºö‰∫ã‰ª∂ÁõëÂê¨Á±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EventListener</span> {</span><br><span class="line">    <span class="keyword">protected</span> Map&lt;String, Event&gt; events = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">	<span class="comment">// ÈÄöËøá‰∫ã‰ª∂ÂêçÁß∞Âíå‰∏Ä‰∏™ÁõÆÊ†áÂØπË±°Êù•Ëß¶Âèë‰∫ã‰ª∂</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addListener</span><span class="params">(String eventType, Object target)</span> {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            addListener(eventType,</span><br><span class="line">                    target,</span><br><span class="line">                    target.getClass().getMethod(<span class="string">"on"</span> + toUpperFirstCase(eventType), Event.class));</span><br><span class="line">        } <span class="keyword">catch</span> (NoSuchMethodException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">toUpperFirstCase</span><span class="params">(String str)</span> {</span><br><span class="line">        <span class="type">char</span>[] chars = str.toCharArray();</span><br><span class="line">        chars[<span class="number">0</span>] -= <span class="number">32</span>;</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(chars);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addListener</span><span class="params">(String eventType, Object target, Method callback)</span> {</span><br><span class="line">        events.put(eventType, <span class="keyword">new</span> <span class="title class_">Event</span>(target, callback));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">trigger</span><span class="params">(Event event)</span> {</span><br><span class="line">        event.setSource(<span class="built_in">this</span>);</span><br><span class="line">        event.setTime(System.currentTimeMillis());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (event.getCallback() != <span class="literal">null</span>) {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                event.getCallback().invoke(event.getTarget(), event);</span><br><span class="line">            } <span class="keyword">catch</span> (IllegalAccessException | InvocationTargetException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">trigger</span><span class="params">(String eventType)</span> {</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">this</span>.events.containsKey(eventType)) {</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        trigger(<span class="built_in">this</span>.events.get(eventType).setTrigger(eventType));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>MouseEventTypeÔºöÈº†Ê†á‰∫ã‰ª∂Â∏∏Èáè</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MouseEventType</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">ON_CLICK</span> <span class="operator">=</span> <span class="string">"click"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">ON_DOUBLE_CLICK</span> <span class="operator">=</span> <span class="string">"doubleClick"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">ON_UP</span> <span class="operator">=</span> <span class="string">"up"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">ON_DOWN</span> <span class="operator">=</span> <span class="string">"down"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>MouseÔºöÈº†Ê†á‰∫ã‰ª∂ÂÆûÁé∞</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mouse</span> <span class="keyword">extends</span> <span class="title class_">EventListener</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">click</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Ë∞ÉÁî®ÂçïÂáªÊñπÊ≥ï"</span>);</span><br><span class="line">        <span class="built_in">this</span>.trigger(MouseEventType.ON_CLICK);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dClick</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Ë∞ÉÁî®ÂèåÂáªÊñπÊ≥ï"</span>);</span><br><span class="line">        <span class="built_in">this</span>.trigger(MouseEventType.ON_DOUBLE_CLICK);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">up</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Ë∞ÉÁî®ÂºπËµ∑ÊñπÊ≥ï"</span>);</span><br><span class="line">        <span class="built_in">this</span>.trigger(MouseEventType.ON_UP);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">down</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Ë∞ÉÁî®Êåâ‰∏ãÊñπÊ≥ï"</span>);</span><br><span class="line">        <span class="built_in">this</span>.trigger(MouseEventType.ON_DOWN);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>MouseEventCallbackÔºöÈº†Ê†á‰∫ã‰ª∂ÂõûË∞É</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MouseEventCallback</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(Event e)</span> {</span><br><span class="line">        System.out.println(<span class="string">"============= Ëß¶ÂèëÂçïÂáª‰∫ã‰ª∂ =============\n"</span> + e.toString());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDoubleClick</span><span class="params">(Event e)</span> {</span><br><span class="line">        System.out.println(<span class="string">"============= Ëß¶ÂèëÂèåÂáª‰∫ã‰ª∂ =============\n"</span> + e.toString());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUp</span><span class="params">(Event e)</span> {</span><br><span class="line">        System.out.println(<span class="string">"============= Ëß¶ÂèëÂºπËµ∑‰∫ã‰ª∂ =============\n"</span> + e.toString());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDown</span><span class="params">(Event e)</span> {</span><br><span class="line">        System.out.println(<span class="string">"============= Ëß¶ÂèëÊåâ‰∏ã‰∫ã‰ª∂ =============\n"</span> + e.toString());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Test ÊµãËØïÁ±ªÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObserverTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">MouseEventCallback</span> <span class="variable">callback</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MouseEventCallback</span>();</span><br><span class="line">        <span class="type">Mouse</span> <span class="variable">mouse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Mouse</span>();</span><br><span class="line">        mouse.addListener(MouseEventType.ON_CLICK, callback);</span><br><span class="line">        mouse.addListener(MouseEventType.ON_UP, callback);</span><br><span class="line">        mouse.addListener(MouseEventType.ON_DOWN, callback);</span><br><span class="line">        mouse.addListener(MouseEventType.ON_DOUBLE_CLICK, callback);</span><br><span class="line"></span><br><span class="line">        mouse.click();</span><br><span class="line">        mouse.down();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ËßÇÂØüËÄÖÊ®°ÂºèÂú®SpringÊ∫êÁ†Å‰∏≠ÁöÑÂ∫îÁî®"><a href="#ËßÇÂØüËÄÖÊ®°ÂºèÂú®SpringÊ∫êÁ†Å‰∏≠ÁöÑÂ∫îÁî®" class="headerlink" title="ËßÇÂØüËÄÖÊ®°ÂºèÂú®SpringÊ∫êÁ†Å‰∏≠ÁöÑÂ∫îÁî®"></a>ËßÇÂØüËÄÖÊ®°ÂºèÂú®SpringÊ∫êÁ†Å‰∏≠ÁöÑÂ∫îÁî®</h2><p>Spring ‰∏≠ÁöÑ ContextLoaderListener ÂÆûÁé∞‰∫Ü ServletContextListener Êé•Âè£ÔºåServletContextListener Êé•Âè£ÂèàÁªßÊâø‰∫Ü EventListenerÔºåÂú® JDK ‰∏≠ EventListener ÊúâÈùûÂ∏∏ÂπøÊ≥õÁöÑÂ∫îÁî®„ÄÇÊàë‰ª¨ÂèØ‰ª•Áúã‰∏Ä‰∏ãÊ∫ê‰ª£Á†ÅÔºåContextLoaderListenerÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContextLoaderListener</span> <span class="keyword">extends</span> <span class="title class_">ContextLoader</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> {</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">ContextLoaderListener</span><span class="params">()</span> {</span><br><span class="line">   }</span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">ContextLoaderListener</span><span class="params">(WebApplicationContext context)</span> {</span><br><span class="line">      <span class="built_in">super</span>(context);</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent event)</span> {</span><br><span class="line">      initWebApplicationContext(event.getServletContext());</span><br><span class="line">   }</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent event)</span> {</span><br><span class="line">      closeWebApplicationContext(event.getServletContext());</span><br><span class="line">      ContextCleanupListener.cleanupAttributes(event.getServletContext());</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ServletContextListener</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> javax.servlet;</span><br><span class="line"><span class="keyword">import</span> java.util.EventListener;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ServletContextListener</span> <span class="keyword">extends</span> <span class="title class_">EventListener</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent sce)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>EventListener</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> java.util;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EventListener</span> {}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Âü∫‰∫éGuavaApiËΩªÊùæÂÆûÁé∞ËßÇÂØüËÄÖÊ®°Âºè"><a href="#Âü∫‰∫éGuavaApiËΩªÊùæÂÆûÁé∞ËßÇÂØüËÄÖÊ®°Âºè" class="headerlink" title="Âü∫‰∫éGuavaApiËΩªÊùæÂÆûÁé∞ËßÇÂØüËÄÖÊ®°Âºè"></a>Âü∫‰∫éGuavaApiËΩªÊùæÂÆûÁé∞ËßÇÂØüËÄÖÊ®°Âºè</h2><p>Guava ÊòØ‰∏Ä‰∏™ÂÆûÁé∞ËßÇÂØüËÄÖÊ®°ÂºèÈùûÂ∏∏Â•ΩÁöÑÊ°ÜÊû∂„ÄÇ</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.guava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>20.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>GuavaEvent ÔºöÁõëÂê¨‰∫ã‰ª∂ÔºàËøôÊòØËßÇÂØüËÄÖÊ®°ÂºèÁöÑÊ†∏ÂøÉÔºâ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.common.eventbus.Subscribe;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GuavaEvent</span> {</span><br><span class="line">    <span class="meta">@Subscribe</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">subscribe</span><span class="params">(String str)</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÊâßË°åsubscribeÊñπÊ≥ïÔºå‰º†ÂÖ•ÁöÑÂèÇÊï∞ÊòØÔºö"</span> + str);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.common.eventbus.EventBus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.ContextLoaderListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GuavaEventTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">EventBus</span> <span class="variable">eventBus</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EventBus</span>();</span><br><span class="line">        <span class="type">GuavaEvent</span> <span class="variable">guavaEvent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GuavaEvent</span>();</span><br><span class="line">        eventBus.register(guavaEvent);</span><br><span class="line">        eventBus.post(<span class="string">"Tom"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="‰ºòÁº∫ÁÇπ"><a href="#‰ºòÁº∫ÁÇπ" class="headerlink" title="‰ºòÁº∫ÁÇπ"></a>‰ºòÁº∫ÁÇπ</h2><p>‰ºòÁÇπ</p>
<p>Ôºà1ÔºâÂú®ËßÇÂØüËÄÖÂíåË¢´ËßÇÂØüËÄÖ‰πãÈó¥Âª∫Á´ã‰∫Ü‰∏Ä‰∏™ÊäΩË±°ÁöÑËÄ¶Âêà„ÄÇ</p>
<p>Ôºà2ÔºâÊîØÊåÅÂπøÊí≠ÈÄö‰ø°„ÄÇ</p>
<p>Áº∫ÁÇπ</p>
<p>Ôºà1ÔºâËßÇÂØüËÄÖ‰πãÈó¥Â≠òÂú®ËøáÂ§öÁªÜËäÇ‰æùËµñ„ÄÅÊó∂Èó¥Ê∂àËÄóËøáÂ§öÔºåËÆ©Á®ãÂ∫èÊõ¥Â§çÊùÇ‰∫Ü„ÄÇ</p>
<p>Ôºà2Ôºâ‰ΩøÁî®‰∏çÂΩì‰ºöÂá∫Áé∞Âæ™ÁéØË∞ÉÁî®„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂéüÂûãÊ®°Âºè</title>
    <url>/p/91ad9ce3.html</url>
    <content><![CDATA[<html><head></head><body><p>ËøôÁßçÁ±ªÂûãÁöÑËÆæËÆ°Ê®°ÂºèÂ±û‰∫éÂàõÂª∫ÂûãÊ®°ÂºèÔºåÂÆÉÊèê‰æõ‰∫Ü‰∏ÄÁßçÂàõÂª∫ÂØπË±°ÁöÑÊúÄ‰Ω≥ÊñπÂºè„ÄÇ</p>
<p>‰∏ªË¶ÅÈÄÇÁî®‰∫éÔºö</p>
<p>Ôºà1ÔºâÂ§ßÈáèÁöÑGetterÂíåSetter ËµãÂÄºÁöÑÂú∫ÊôØ</p>
<p>Ôºà2ÔºâÁ±ªÂàùÂßãÂåñÊ∂àËÄóËµÑÊ∫êËæÉÂ§ö„ÄÇ</p>
<p>Ôºà3Ôºâ‰ΩøÁî® new ÁîüÊàê‰∏Ä‰∏™ÂØπË±°ÈúÄË¶ÅÈùûÂ∏∏ÁπÅÁêêÁöÑËøáÁ®ãÔºàÊï∞ÊçÆÂáÜÂ§á„ÄÅËÆøÈóÆÊùÉÈôêÔºâ„ÄÇ</p>
<p>Ôºà4ÔºâÊûÑÈÄ†ÂáΩÊï∞ÊØîËæÉÂ§çÊùÇ„ÄÇ</p>
<p>Ôºà5ÔºâÂú®Âæ™ÁéØ‰Ωì‰∏≠‰∫ßÁîüÂ§ßÈáèÂØπË±°„ÄÇ</p>
<p>Âú® Spring ‰∏≠ÔºåÂéüÂûãÊ®°ÂºèÂ∫îÁî®ÂæóÈùûÂ∏∏ÂπøÊ≥õÔºå‰æãÂ¶Ç scope=‚Äùprototype‚Äù ÔºåÊàë‰ª¨ÁªèÂ∏∏Áî®ÁöÑ JSON.parseObject() ‰πüÊòØ‰∏ÄÁßçÂéüÂûãÊ®°Âºè„ÄÇÂàÜ‰∏∫ÊµÖÂÖãÈöÜÂíåÊ∑±ÂÖãÈöÜ‰∏§Áßç„ÄÇ</p>
<h2 id="ÊµÖÂÖãÈöÜ"><a href="#ÊµÖÂÖãÈöÜ" class="headerlink" title="ÊµÖÂÖãÈöÜ"></a>ÊµÖÂÖãÈöÜ</h2><p>‚Äã    ÊµÖÂÖãÈöÜÔºö<strong>ÂÆåÊï¥Â§çÂà∂ÂÄºÁ±ªÂûãÊï∞ÊçÆÔºåÊ≤°ÊúâÂ§çÂà∂ÂºïÁî®ÂØπË±°</strong>Ôºà‰πüÂ∞±ÊòØËØ¥ÊâÄÊúâÁöÑÂºïÁî®ÂØπË±°‰ªçÁÑ∂<strong>ÊåáÂêëÂéüÊù•</strong>ÂØπË±°ÁöÑ<strong>Âú∞ÂùÄ</strong>Ôºâ„ÄÇ</p>
<p>‚Äã    ‰∏Ä‰∏™Ê†áÂáÜÁöÑÂéüÂûãÊ®°Âºè‰ª£Á†ÅÂ∫îËØ•ÊòØËøôÊ†∑ËÆæËÆ°ÁöÑÔºöÂÖàÂàõÂª∫ÂéüÂûã Prototype Êé•Âè£„ÄÅÂàõÂª∫ÈúÄË¶ÅÂÖãÈöÜÁöÑÁ±ªConcretePrototypeA„ÄÅÂàõÂª∫ÂÖãÈöÜÁöÑÂÆ¢Êà∑Á´ØÔºåÈÄöËøáÂÆ¢Êà∑Á´ØÊù•ÂÆûÁé∞ÂÖãÈöÜ„ÄÇ</p>
<p>PrototypeÊé•Âè£</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Prototype</span> {</span><br><span class="line">    Prototype <span class="title function_">clone</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ConcretePrototypeA ÈúÄË¶ÅÂÖãÈöÜÁöÑÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcretePrototypeA</span> <span class="keyword">implements</span> <span class="title class_">Prototype</span> {</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbies;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHobbies</span><span class="params">(List&lt;String&gt; hobbies)</span> {</span><br><span class="line">        <span class="built_in">this</span>.hobbies = hobbies;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Prototype <span class="title function_">clone</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">ConcretePrototypeA</span> <span class="variable">concretePrototype</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcretePrototypeA</span>();</span><br><span class="line">        concretePrototype.setAge(<span class="built_in">this</span>.age);</span><br><span class="line">        concretePrototype.setName(<span class="built_in">this</span>.name);</span><br><span class="line">        concretePrototype.setHobbies(<span class="built_in">this</span>.hobbies);</span><br><span class="line">        <span class="keyword">return</span> concretePrototype;</span><br><span class="line">    }</span><br><span class="line">	<span class="comment">// ÁúÅÁï•Getter„ÄÅSetterÊñπÊ≥ï</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Client ÂÆ¢Êà∑Á´ØÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> {</span><br><span class="line">    <span class="keyword">private</span> Prototype prototype;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Client</span><span class="params">(Prototype prototype)</span> {</span><br><span class="line">        <span class="built_in">this</span>.prototype = prototype;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Prototype <span class="title function_">startClone</span><span class="params">(Prototype concretePrototype)</span> {</span><br><span class="line">        <span class="keyword">return</span> (Prototype) concretePrototype.clone();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Test ÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrototypeTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">ConcretePrototypeA</span> <span class="variable">concretePrototype</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcretePrototypeA</span>();</span><br><span class="line">        concretePrototype.setAge(<span class="number">18</span>);</span><br><span class="line">        concretePrototype.setName(<span class="string">"prototype"</span>);</span><br><span class="line">        List&lt;String&gt; hobbies = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        concretePrototype.setHobbies(hobbies);</span><br><span class="line"></span><br><span class="line">        <span class="type">Client</span> <span class="variable">client</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Client</span>(concretePrototype);</span><br><span class="line">        <span class="type">ConcretePrototypeA</span> <span class="variable">concretePrototypeClone</span> <span class="operator">=</span> (ConcretePrototypeA) client.startClone(concretePrototype);</span><br><span class="line"></span><br><span class="line">        System.out.println(concretePrototypeClone);</span><br><span class="line">        <span class="comment">// ÁªìÊûú‰∏∫ trueÔºåËØ¥ÊòéÂºïÁî®Âú∞ÂùÄÁõ∏Âêå</span></span><br><span class="line">        System.out.println(concretePrototypeClone.getHobbies() == concretePrototype.getHobbies());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Ê∑±ÂÖãÈöÜ"><a href="#Ê∑±ÂÖãÈöÜ" class="headerlink" title="Ê∑±ÂÖãÈöÜ"></a>Ê∑±ÂÖãÈöÜ</h2><p>ËøôÈáå‰∏æ‰∏Ä‰∏™ÊàøÂ≠êÂíåÊàøÂ≠êÁöÑ‰∏ª‰∫∫ÁöÑÊ°à‰æãÔºåÊàøÂ≠êÊúâÈù¢ÁßØÂ§ßÂ∞è„ÄÅÊ•ºÂ±ÇÁ≠âÂ±ûÊÄß„ÄÅÊàø‰∏ªÊúâÂßìÂêç„ÄÅÁîµËØùÁ≠âÂ±ûÊÄß„ÄÇ</p>
<p>ÊàøÂ≠êÁ±ªÔºàÂåÖÂê´Ëøô‰∏™ÊàøÂ≠êÁöÑ‰∏ª‰∫∫„ÄÅÈù¢ÁßØ„ÄÅÊ•ºÂ±ÇÂ±ûÊÄßÔºâ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">House</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> {</span><br><span class="line">    <span class="comment">// Ê•ºÂ±Ç</span></span><br><span class="line">    String floor;</span><br><span class="line">    <span class="comment">// ‰ΩèÊàøÈù¢ÁßØ</span></span><br><span class="line">    <span class="type">int</span> area;</span><br><span class="line">    <span class="comment">// ÁßüÈáë</span></span><br><span class="line">    <span class="type">double</span> price;</span><br><span class="line">    <span class="comment">// Êàø‰∏ª</span></span><br><span class="line">    HouseOwner owner;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">House</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">House</span><span class="params">(String roomId, <span class="type">int</span> area, <span class="type">double</span> price, HouseOwner owner)</span> {</span><br><span class="line">        <span class="built_in">this</span>.floor = roomId;</span><br><span class="line">        <span class="built_in">this</span>.area = area;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">        <span class="built_in">this</span>.owner = owner;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Êàø‰∏ªÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HouseOwner</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> {</span><br><span class="line">    <span class="comment">// ÁîµËØù</span></span><br><span class="line">    <span class="type">int</span> phone;</span><br><span class="line">    <span class="comment">// ÂßìÂêç</span></span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HouseOwner</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HouseOwner</span><span class="params">(<span class="type">int</span> phone, String name)</span> {</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>TestÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HouseCloneTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException {</span><br><span class="line">        <span class="type">HouseOwner</span> <span class="variable">MrDJun</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HouseOwner</span>(<span class="number">1</span>, <span class="string">"MrDJun"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">House</span> <span class="variable">h1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">House</span>(<span class="string">"1302"</span>, <span class="number">78</span>, <span class="number">2900</span>, MrDJun);</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">"clone.obj"</span>));</span><br><span class="line">        oos.writeObject(h1);</span><br><span class="line">        oos.close();</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">"clone.obj"</span>));</span><br><span class="line">        <span class="type">House</span> <span class="variable">h2</span> <span class="operator">=</span> (House) ois.readObject();</span><br><span class="line"></span><br><span class="line">        System.out.println(h1);</span><br><span class="line">        System.out.println(h1.owner == h2.owner);</span><br><span class="line">        ois.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÂÖãÈöÜÁ†¥ÂùèÂçï‰æãÊ®°Âºè"><a href="#ÂÖãÈöÜÁ†¥ÂùèÂçï‰æãÊ®°Âºè" class="headerlink" title="ÂÖãÈöÜÁ†¥ÂùèÂçï‰æãÊ®°Âºè"></a>ÂÖãÈöÜÁ†¥ÂùèÂçï‰æãÊ®°Âºè</h2><p>‚Äã        Â¶ÇÊûúÊàë‰ª¨ÂÖãÈöÜÁöÑÂØπË±°ÊòØÂçï‰æãÂØπË±°ÔºåÈÇ£‰πàÂ∞±ÊÑèÂë≥ÁùÄÊ∑±ÂÖãÈöÜ‰ºöÁ†¥ÂùèÂçï‰æãÊ®°Âºè„ÄÇÂÆûÈôÖ‰∏äÈò≤Ê≠¢ÂÖãÈöÜÁ†¥ÂùèÂçï‰æãÊ®°ÂºèÁöÑËß£ÂÜ≥ÊÄùË∑ØÂæàÁÆÄÂçïÔºöÁ¶ÅÊ≠¢ÂÖãÈöÜÂç≥ÂèØ„ÄÇ</p>
<p>‰∏§ÁßçÊñπÂºèÔºö</p>
<p>1„ÄÅ ‰∏çÂÆûÁé∞ Cloneable Êé•Âè£Ôºõ</p>
<p>2„ÄÅÈáçÂÜô clone() ÊñπÊ≥ïÔºåÂú® clone() ÊñπÊ≥ï‰∏≠ËøîÂõûÂçï‰æãÂØπË±°Ôºõ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException {</span><br><span class="line">    <span class="keyword">return</span> INSTANCE;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="‰ºòÁº∫ÁÇπ"><a href="#‰ºòÁº∫ÁÇπ" class="headerlink" title="‰ºòÁº∫ÁÇπ"></a>‰ºòÁº∫ÁÇπ</h2><p><strong>‰ºòÁÇπÔºö</strong> 1„ÄÅÊÄßËÉΩÊèêÈ´ò„ÄÇ 2„ÄÅÈÄÉÈÅøÊûÑÈÄ†ÂáΩÊï∞ÁöÑÁ∫¶Êùü„ÄÇ</p>
<p><strong>Áº∫ÁÇπÔºö</strong> 1„ÄÅÈÖçÂ§áÂÖãÈöÜÊñπÊ≥ïÈúÄË¶ÅÂØπÁ±ªÁöÑÂäüËÉΩËøõË°åÈÄöÁõòËÄÉËôëÔºåËøôÂØπ‰∫éÂÖ®Êñ∞ÁöÑÁ±ª‰∏çÊòØÂæàÈöæÔºå‰ΩÜÂØπ‰∫éÂ∑≤ÊúâÁöÑÁ±ª‰∏ç‰∏ÄÂÆöÂæàÂÆπÊòìÔºåÁâπÂà´ÂΩì‰∏Ä‰∏™Á±ªÂºïÁî®‰∏çÊîØÊåÅ‰∏≤Ë°åÂåñÁöÑÈó¥Êé•ÂØπË±°ÔºåÊàñËÄÖÂºïÁî®Âê´ÊúâÂæ™ÁéØÁªìÊûÑÁöÑÊó∂ÂÄô„ÄÇ 2„ÄÅÂøÖÈ°ªÂÆûÁé∞ Cloneable Êé•Âè£„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title>‰ª£ÁêÜÊ®°Âºè</title>
    <url>/p/7b510e10.html</url>
    <content><![CDATA[<html><head></head><body><p>‰∏§ÁßçÊ®°ÂºèÔºö<strong>ÈùôÊÄÅ‰ª£ÁêÜ</strong>„ÄÅ<strong>Âä®ÊÄÅ‰ª£ÁêÜ</strong>„ÄÇ</p>
<p>‰∏§‰∏™ÁõÆÁöÑÔºö<strong>‰øùÊä§ÁõÆÊ†áÂØπË±°„ÄÅÂ¢ûÂº∫ÁõÆÊ†áÂØπË±°</strong>„ÄÇ</p>
<p>ÂÆö‰πâÔºö‰ª£ÁêÜÊ®°ÂºèÔºàProxy PatternÔºâÊòØÊåá‰∏∫ÂÖ∂‰ªñÂØπË±°Êèê‰æõ‰∏ÄÁßç‰ª£ÁêÜÔºå‰ª•ÊéßÂà∂ÂØπËøô‰∏™ÂØπË±°ÁöÑËÆøÈóÆÔºåÂ±û‰∫éÁªìÊûÑÂûãÊ®°Âºè„ÄÇÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºå‰∏Ä‰∏™ÂØπË±°‰∏çÈÄÇÂêàÊàñËÄÖ‰∏çËÉΩÁõ¥Êé•ÂºïÁî®Âè¶‰∏Ä‰∏™ÂØπË±°ÔºåËÄå‰ª£ÁêÜÂØπË±°ÂèØ‰ª•Âú®ÂÆ¢Êà∑Á´ØÂíåÁõÆÊ†áÂØπË±°‰πãÈó¥Ëµ∑Âà∞‰∏≠‰ªãÁöÑ‰ΩúÁî®„ÄÇ</p>
<p>Â∫îÁî®Âú∫ÊôØÔºöÁîüÊ¥ª‰∏≠ÁöÑÁßüÊàø‰∏≠‰ªã„ÄÅÂîÆÁ•®ÈªÑÁâõ„ÄÅÂ©ö‰ªã„ÄÅÁªèÁ∫™‰∫∫„ÄÅÂø´ÈÄí„ÄÅ‰∫ãÂä°‰ª£ÁêÜ„ÄÅÈùû‰æµÂÖ•ÂºèÊó•ÂøóÁõëÂê¨Á≠âÔºåÈÉΩÊòØ‰ª£ÁêÜÊ®°ÂºèÁöÑÂÆûÈôÖ‰ΩìÁé∞„ÄÇÂΩìÊó†Ê≥ïÊàñ‰∏çÊÉ≥Áõ¥Êé•ÂºïÁî®Êüê‰∏™ÂØπË±°ÊàñËÆøÈóÆÊüê‰∏™ÂØπË±°Â≠òÂú®Âõ∞ÈöæÊó∂ÔºåÂèØ‰ª•ÈÄöËøá‰ª£ÁêÜÂØπË±°Êù•Èó¥Êé•ËÆøÈóÆ„ÄÇ</p>
<p>‰ª£ÁêÜÊ®°Âºè‰∏ÄËà¨Áî±<strong>ÂÖ±ÂêåÊé•Âè£Á±ª</strong>„ÄÅ<strong>Ë¢´‰ª£ÁêÜÁ±ª</strong>„ÄÅ<strong>‰ª£ÁêÜÁ±ª</strong>ÁªÑÊàê„ÄÇ</p>
<h2 id="ÈùôÊÄÅ‰ª£ÁêÜ"><a href="#ÈùôÊÄÅ‰ª£ÁêÜ" class="headerlink" title="ÈùôÊÄÅ‰ª£ÁêÜ"></a>ÈùôÊÄÅ‰ª£ÁêÜ</h2><p>ËøôÈáå‰∏æ‰∏Ä‰∏™Áà∂‰∫≤Â∏ÆÂÑøÂ≠êÊâæÂØπË±°ÁöÑÊ°à‰æã„ÄÇ‰∫∫ÊúâÂæàÂ§öË°å‰∏∫ÔºöË¶ÅË∞àÊÅãÁà±„ÄÅË¶ÅÂ∑•‰Ωú„ÄÅË¶Å‰π∞Êàø‰π∞ËΩ¶ÔºåË∞àÊÅãÁà±Âè™ÊòØË°å‰∏∫‰∏≠ÁöÑ‰∏ÄÈ°π„ÄÇÁà∂‰∫≤ÂíåÂÑøÂ≠êÊúâ‰∏™ÂÖ±ÂêåÁöÑË°å‰∏∫ÊòØÊâæÂØπË±°Ôºå‰∫éÊòØÊäΩÂèñÊàê‰∏Ä‰∏™ÂÖ±ÂêåÊé•Âè£„ÄÇ</p>
<p>ÂÖ±ÂêåÊé•Âè£Á±ª PersonÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Person</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">findLove</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ë¢´‰ª£ÁêÜÁ±ª SonÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">implements</span> <span class="title class_">Person</span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findLove</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÂÑøÂ≠êË¶ÅÊâæÂØπË±°ÔºåË¶ÅÊ±ÇÔºöÂØåÂ©Ü"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ª£ÁêÜÁ±ª Father:</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Father</span> <span class="keyword">implements</span> <span class="title class_">Person</span>{</span><br><span class="line">    <span class="keyword">private</span> Son son;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Father</span><span class="params">(Son son)</span> {</span><br><span class="line">        <span class="built_in">this</span>.son = son;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findLove</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Áà∂‰∫≤Â∏ÆÂÑøÂ≠êÊâæÂØåÂ©Ü"</span>);</span><br><span class="line">        <span class="built_in">this</span>.son.findLove();</span><br><span class="line">        System.out.println(<span class="string">"ÂÑøÂ≠êÂæàÂº∫Â£ÆÔºåÂØåÂ©ÜÂæàÂñúÊ¨¢ÔºåÂú®‰∏ÄËµ∑‰∫Ü"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊµãËØïÁ±ª TestÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StaticMain</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// Áà∂‰∫≤Âè™ËÉΩÂ∏ÆÂÑøÂ≠êÊâæÂØπË±°Ôºå‰∏çËÉΩÂ∏ÆË°®Â¶πÔºåÂ∏ÆÈôåÁîü‰∫∫</span></span><br><span class="line">        <span class="type">Father</span> <span class="variable">father</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Father</span>(<span class="keyword">new</span> <span class="title class_">Son</span>());</span><br><span class="line">        father.findLove();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Âä®ÊÄÅ‰ª£ÁêÜÊ®°Âºè"><a href="#Âä®ÊÄÅ‰ª£ÁêÜÊ®°Âºè" class="headerlink" title="Âä®ÊÄÅ‰ª£ÁêÜÊ®°Âºè"></a>Âä®ÊÄÅ‰ª£ÁêÜÊ®°Âºè</h2><h3 id="ÂèçÂ∞ÑÔºàjava-lang-reflectÔºâ"><a href="#ÂèçÂ∞ÑÔºàjava-lang-reflectÔºâ" class="headerlink" title="ÂèçÂ∞ÑÔºàjava.lang.reflectÔºâ"></a>ÂèçÂ∞ÑÔºàjava.lang.reflectÔºâ</h3><ul>
<li><p>ClassÁ±ªÔºö‰ª£Ë°®‰∏Ä‰∏™Á±ª„ÄÇ</p>
<p>ClassÊòØ‰∏Ä‰∏™Á±ªÔºåclassÊòØÂÖ≥ÈîÆÂ≠ó„ÄÇ</p>
<p>ClassÁ±ªÂè™Êúâ‰∏Ä‰∏™ÁßÅÊúâÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÂè™ÊúâJVMËÉΩÂ§üÂàõÂª∫ClassÁ±ªÁöÑÂÆû‰æã„ÄÇ</p>
<p>JVM‰∏≠Âè™ÊúâÂîØ‰∏Ä‰∏Ä‰∏™ÂíåÁ±ªÁõ∏ÂØπÂ∫îÁöÑClassÂØπË±°Êù•ÊèèËø∞ÂÖ∂Á±ªÂûã‰ø°ÊÅØ„ÄÇ</p>
</li>
<li><p>FieldÁ±ªÔºö‰ª£Ë°®Á±ªÁöÑÊàêÂëòÂèòÈáèÔºàÊàêÂëòÂèòÈáè‰πüÁß∞‰∏∫Á±ªÁöÑÂ±ûÊÄßÔºâ„ÄÇ</p>
</li>
<li><p>MethodÁ±ªÔºö‰ª£Ë°®Á±ªÁöÑÊñπÊ≥ï„ÄÇ</p>
</li>
<li><p>ConstructorÁ±ªÔºö‰ª£Ë°®Á±ªÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇ</p>
</li>
<li><p>ArrayÁ±ªÔºöÊèê‰æõ‰∫ÜÂä®ÊÄÅÂàõÂª∫Êï∞ÁªÑÔºå‰ª•ÂèäËÆøÈóÆÊï∞ÁªÑÁöÑÂÖÉÁ¥†ÁöÑÈùôÊÄÅÊñπÊ≥ï„ÄÇ</p>
</li>
</ul>
<p>Ëé∑ÂèñClassÂØπË±°ÁöÑ‰∏âÁßçÊñπÂºèÔºö</p>
<p>1„ÄÅÈÄöËøáObject.getClass() Ëé∑Âèñ</p>
<p>2„ÄÅ‰ªª‰ΩïÊï∞ÊçÆÁ±ªÂûãÈÉΩÊúâ‰∏Ä‰∏™ÈùôÊÄÅÁöÑclassÂ±ûÊÄß</p>
<p>3„ÄÅÈÄöËøá Class.forName() ÁöÑÈùôÊÄÅÊñπÊ≥ïËé∑ÂèñÔºàÂ∏∏Áî®Ôºâ</p>
<p>ËøôÈáåËøòÊòØÊâæÂØπË±°ÁöÑÊ°à‰æãÔºå‰ΩÜÁé∞Âú®ÊòØËÆ©Â™íÂ©ÜÂ∏ÆÂøôÁâ©Ëâ≤ÂØπË±°‰∫ÜÔºå‚ÄúÊàë‚ÄùÂØπ‰∫éÂ™íÂ©ÜÊù•ËØ¥ÊòØÈ°æÂÆ¢ÔºåÈÇ£‰πàÂÖ≥Á≥ªÂ∞±ÊòØÂ™íÂ©ÜÂ∏Æ‚ÄúÊàë‚ÄùÊâæÂØπË±°„ÄÇ‰∏ãÈù¢Âü∫‰∫éJDKÂÆûÁé∞Âä®ÊÄÅ‰ª£ÁêÜÔºö</p>
<p>Ë¢´‰ª£ÁêÜÁ±ª È°æÂÆ¢ CustomerÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer</span> <span class="keyword">implements</span> <span class="title class_">Person</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findLove</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"[ÂÆ¢Êà∑] Ë¶ÅÊ±Ç1ÔºöÁôΩÂØåÁæé"</span>);</span><br><span class="line">        System.out.println(<span class="string">"[ÂÆ¢Êà∑] Ë¶ÅÊ±Ç2ÔºöÊúâËΩ¶ÊúâÊàø"</span>);</span><br><span class="line">        System.out.println(<span class="string">"[ÂÆ¢Êà∑] Ë¶ÅÊ±Ç3ÔºöÊúâÂ≠òÊ¨æ"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ª£ÁêÜÁ±ª Â™íÂ©Ü JDKMeipoÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKMeipo</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> {</span><br><span class="line">    <span class="comment">// Ë¢´‰ª£ÁêÜÁöÑÂØπË±°ÔºåÂ∞ÜÂºïÁî®‰øùÂ≠ò‰∏ãÊù•</span></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxyInstance</span><span class="params">(Object target)</span> {</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">        Class&lt;?&gt; clazz = target.getClass();</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(clazz.getClassLoader(), clazz.getInterfaces(), <span class="built_in">this</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable {</span><br><span class="line">        before();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> method.invoke(target, args);</span><br><span class="line">        after();</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"[Â™íÂ©Ü] Ê≠£Âú®Êü•ÊâæÂØπË±°..."</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"[Â™íÂ©Ü] Êü•ÊâæÂÆåÊàê..."</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊµãËØïÁ±ª TestÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> (Person) <span class="keyword">new</span> <span class="title class_">JDKMeipo</span>().getProxyInstance(<span class="keyword">new</span> <span class="title class_">Customer</span>());</span><br><span class="line">    person.findLove();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÆûÁé∞ÂéüÁêÜ: JDKÂä®ÊÄÅ‰ª£ÁêÜÈááÁî®Â≠óËäÇÈáçÁªÑÔºåÈáçÊñ∞ÁîüÊàêÂØπË±°Êù•Êõø‰ª£ÂéüÂßãÂØπË±°Ôºå‰ª•ËææÂà∞Âä®ÊÄÅ‰ª£ÁêÜÁöÑÁõÆÁöÑ„ÄÇ</p>
<ul>
<li><strong>JDKÂä®ÊÄÅ‰ª£ÁêÜÁîüÊàêÂØπË±°ÁöÑÊ≠•È™§Â¶Ç‰∏ã</strong></li>
</ul>
<ol>
<li>Ëé∑ÂèñË¢´‰ª£ÁêÜÂØπË±°ÁöÑÂºïÁî®ÔºåÂπ∂‰∏îËé∑ÂèñÂÆÉÁöÑÊâÄÊúâÊé•Âè£ÔºåÂèçÂ∞ÑËé∑Âèñ„ÄÇ</li>
<li>JDKÂä®ÊÄÅ‰ª£ÁêÜÁ±ªÈáçÊñ∞ÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÔºåÂêåÊó∂Êñ∞ÁöÑÁ±ªË¶ÅÂÆûÁé∞Ë¢´‰ª£ÁêÜÁ±ªÂÆûÁé∞ÁöÑÊâÄÊúâÊé•Âè£„ÄÇ</li>
<li>Âä®ÊÄÅÁîüÊàêJava‰ª£Á†ÅÔºåÊñ∞Âä†ÁöÑ‰∏öÂä°ÈÄªËæëÊñπÊ≥ïÁî±‰∏ÄÂÆöÁöÑÈÄªËæë‰ª£Á†ÅË∞ÉÁî®„ÄÇ</li>
<li>ÁºñËØëÊñ∞ÁîüÊàêÁöÑJava‰ª£Á†Å.classÊñá‰ª∂„ÄÇ</li>
<li>ÈáçÊñ∞Âä†ËΩΩÂà∞JVM‰∏≠ËøêË°å„ÄÇ</li>
</ol>
<p><strong>‰ΩøÁî® CGLib Âä®ÊÄÅ‰ª£ÁêÜÔºö</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CGlibProxy</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> {</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getInstance</span><span class="params">(Class&lt;?&gt; clazz)</span> <span class="keyword">throws</span> Exception{</span><br><span class="line">        <span class="comment">// Áõ∏ÂΩì‰∫éProxyÔºå‰ª£ÁêÜÁöÑÂ∑•ÂÖ∑Á±ª</span></span><br><span class="line">        <span class="type">Enhancer</span> <span class="variable">enhancer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enhancer</span>();</span><br><span class="line">        enhancer.setSuperclass(clazz);</span><br><span class="line">        enhancer.setCallback(<span class="built_in">this</span>);</span><br><span class="line">        <span class="keyword">return</span> enhancer.create();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object o, Method method, Object[] objects, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable {</span><br><span class="line">        before();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> methodProxy.invokeSuper(o,objects);</span><br><span class="line">        after();</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>{</span><br><span class="line">       System.out.println(<span class="string">"called before request()."</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(<span class="string">"called after request()."</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><strong>CGLibÂíåJDKÂä®ÊÄÅ‰ª£ÁêÜÂØπÊØî</strong><br>1.JDK Âä®ÊÄÅ‰ª£ÁêÜÂÆûÁé∞‰∫ÜË¢´‰ª£ÁêÜÂØπË±°ÁöÑÊé•Âè£ÔºåCGLib ‰ª£ÁêÜÁªßÊâø‰∫ÜË¢´‰ª£ÁêÜÂØπË±°„ÄÇ<br>2.JDK Âä®ÊÄÅ‰ª£ÁêÜÂíåCGLib‰ª£ÁêÜÈÉΩÂú®ËøêË°åÊúüÁîüÊàêÂ≠óËäÇÁ†ÅÔºåJDK Âä®ÊÄÅ‰ª£ÁêÜÁõ¥Êé•ÁîüÊàê Class Â≠óËäÇÁ†ÅÔºåCGLib ‰ª£ÁêÜ‰ΩøÁî®ASMÊ°ÜÊû∂ÁîüÊàêClassÂ≠óËäÇÁ†ÅÔºåCGlib ‰ª£ÁêÜÂÆûÁé∞Êõ¥Â§çÊùÇÔºåÁîüÊàê‰ª£ÁêÜÁ±ªÊØî JDK Âä®ÊÄÅ‰ª£ÁêÜÊïàÁéá‰Ωé„ÄÇ<br>3.JDKÂä®ÊÄÅ‰ª£ÁêÜË∞ÉÁî®‰ª£ÁêÜÊñπÊ≥ïÊòØÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂Ë∞ÉÁî®ÁöÑÔºåCGLib ‰ª£ÁêÜÊòØÈÄöËøá FastClass Êú∫Âà∂Áõ¥Êé•Ë∞ÉÁî®ÊñπÊ≥ïÁöÑÔºåCGLib ‰ª£ÁêÜÁöÑÊâßË°åÊïàÁéáÊõ¥È´ò„ÄÇ</li>
</ul>
<h2 id="ÈùôÊÄÅ‰ª£ÁêÜÂíåÂä®ÊÄÅ‰ª£ÁêÜÁöÑÂå∫Âà´"><a href="#ÈùôÊÄÅ‰ª£ÁêÜÂíåÂä®ÊÄÅ‰ª£ÁêÜÁöÑÂå∫Âà´" class="headerlink" title="ÈùôÊÄÅ‰ª£ÁêÜÂíåÂä®ÊÄÅ‰ª£ÁêÜÁöÑÂå∫Âà´"></a>ÈùôÊÄÅ‰ª£ÁêÜÂíåÂä®ÊÄÅ‰ª£ÁêÜÁöÑÂå∫Âà´</h2><p>1.ÈùôÊÄÅ‰ª£ÁêÜÂè™ËÉΩÈÄöËøáÊâãÂä®ÂÆåÊàê‰ª£ÁêÜÊìç‰ΩúÔºåÂ¶ÇÊûúË¢´‰ª£ÁêÜÁ±ªÂ¢ûÂä†‰∫ÜÊñ∞ÁöÑÊñπÊ≥ïÔºå‰ª£ÁêÜÁ±ªÈúÄË¶ÅÂêåÊ≠•Â¢ûÂä†ÔºåËøùËÉåÂºÄÈó≠ÂéüÂàô„ÄÇ<br>2.Âä®ÊÄÅ‰ª£ÁêÜÈááÁî®Âú®ËøêË°åÊó∂Âä®ÊÄÅÁîüÊàê‰ª£Á†ÅÁöÑÊñπÂºèÔºåÂèñÊ∂à‰∫ÜÂØπË¢´‰ª£ÁêÜÁ±ªÁöÑÊâ©Â±ïÈôêÂà∂ÔºåÈÅµÂæ™ÂºÄÈó≠ÂéüÂàô„ÄÇ<br>3.Ëã•Âä®ÊÄÅ‰ª£ÁêÜË¶ÅÂØπÁõÆÊ†áÁ±ªÁöÑÂ¢ûÂº∫ÈÄªËæëËøõË°åÊâ©Â±ïÔºåÁªìÂêàÁ≠ñÁï•Ê®°ÂºèÔºåÂè™ÈúÄË¶ÅÊñ∞Â¢ûÁ≠ñÁï•Á±ª‰æøÂèØÂÆåÊàêÔºåÊó†È°ª‰øÆÊîπ‰ª£ÁêÜÁ±ªÁöÑ‰ª£Á†Å„ÄÇ</p>
<h2 id="‰ª£ÁêÜÊ®°ÂºèÂú®Spring‰∏≠ÁöÑÂ∫îÁî®"><a href="#‰ª£ÁêÜÊ®°ÂºèÂú®Spring‰∏≠ÁöÑÂ∫îÁî®" class="headerlink" title="‰ª£ÁêÜÊ®°ÂºèÂú®Spring‰∏≠ÁöÑÂ∫îÁî®"></a>‰ª£ÁêÜÊ®°ÂºèÂú®Spring‰∏≠ÁöÑÂ∫îÁî®</h2><p>SpringÂà©Áî®Âä®ÊÄÅ‰ª£ÁêÜÂÆûÁé∞AOPÊó∂Êúâ‰∏§‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÁ±ªÔºöJdkDynamicAopProxyÁ±ªÂíåCglibAopProxyÁ±ª<br>‰ª£ÁêÜÈÄâÊã©ÂéüÂàôÔºö<br>1.ÂΩìBeanÊúâÂÆûÁé∞Êé•Âè£Êó∂ÔºåSpringÂ∞±‰ºöÁî®JDKÂä®ÊÄÅ‰ª£ÁêÜ„ÄÇ<br>2.ÂΩìBean Ê≤°ÊúâÂÆûÁé∞Êé•Âè£Êó∂ÔºåSpring ‰ºöÈÄâÊã©CGLib‰ª£ÁêÜ„ÄÇ<br>3.Spring ÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆÂº∫Âà∂‰ΩøÁî®CGLib‰ª£ÁêÜÔºåÂè™ÈúÄÂú®SpringÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Âä†ÂÖ•Â¶Ç‰∏ã‰ª£Á†ÅÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">&lt;aop:aspectj-autoproxy proxy-target-class=<span class="string">"true"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="‰ª£ÁêÜÊ®°ÂºèÁöÑ‰ºòÁº∫ÁÇπ"><a href="#‰ª£ÁêÜÊ®°ÂºèÁöÑ‰ºòÁº∫ÁÇπ" class="headerlink" title="‰ª£ÁêÜÊ®°ÂºèÁöÑ‰ºòÁº∫ÁÇπ"></a>‰ª£ÁêÜÊ®°ÂºèÁöÑ‰ºòÁº∫ÁÇπ</h2><p><strong>‰ºòÁÇπÔºö</strong><br>    1.‰ª£ÁêÜÊ®°ÂºèËÉΩÂ∞Ü‰ª£ÁêÜÂØπË±°‰∏éÁúüÂÆûË¢´Ë∞ÉÁî®ÁõÆÊ†áÂØπË±°ÂàÜÁ¶ª„ÄÇ<br>    2.Âú®‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÈôç‰Ωé‰∫ÜÁ≥ªÁªüÁöÑËÄ¶ÂêàÊÄßÔºåÊâ©Â±ïÊÄßÂ•Ω„ÄÇ<br>    3.ÂèØ‰ª•Ëµ∑Âà∞‰øùÊä§ÁõÆÊ†áÂØπË±°ÁöÑ‰ΩúÁî®„ÄÇ<br>    4.ÂèØ‰ª•Â¢ûÂº∫ÁõÆÊ†áÂØπË±°ÁöÑÂäüËÉΩ„ÄÇ<br><strong>Áº∫ÁÇπÔºö</strong><br>    1.‰ª£ÁêÜÊ®°Âºè‰ºöÈÄ†ÊàêÁ≥ªÁªüËÆæËÆ°‰∏≠Á±ªÁöÑÊï∞ÈáèÂ¢ûÂä†„ÄÇ<br>    2.Âú®ÂÆ¢Êà∑Á´ØÂíåÁõÆÊ†áÂØπË±°‰∏≠Â¢ûÂä†‰∏Ä‰∏™‰ª£ÁêÜÂØπË±°Ôºå‰ºöÂØºËá¥ËØ∑Ê±ÇÂ§ÑÁêÜÈÄüÂ∫¶ÂèòÊÖ¢„ÄÇ<br>    3.Â¢ûÂä†‰∫ÜÁ≥ªÁªüÁöÑÂ§çÊùÇÂ∫¶„ÄÇ</p>
<h2 id="ÈôÑÔºöÊâãÂÜôÂÆûÁé∞JDKÁöÑÂä®ÊÄÅ‰ª£ÁêÜ"><a href="#ÈôÑÔºöÊâãÂÜôÂÆûÁé∞JDKÁöÑÂä®ÊÄÅ‰ª£ÁêÜ" class="headerlink" title="ÈôÑÔºöÊâãÂÜôÂÆûÁé∞JDKÁöÑÂä®ÊÄÅ‰ª£ÁêÜ"></a>ÈôÑÔºöÊâãÂÜôÂÆûÁé∞JDKÁöÑÂä®ÊÄÅ‰ª£ÁêÜ</h2><p>‚Äã    Âä®ÊÄÅ‰ª£ÁêÜÂíåÈùôÊÄÅ‰ª£ÁêÜÁöÑÂü∫Êú¨ÊÄùË∑ØÊòØ‰∏ÄËá¥ÁöÑÔºåÂè™‰∏çËøáÂä®ÊÄÅ‰ª£ÁêÜÁöÑÂäüËÉΩÊõ¥Âä†Âº∫Â§ßÔºåÈöèÁùÄ‰∏öÂä°ÁöÑÊâ©Â±ïÈÄÇÂ∫îÊÄßÊõ¥Âº∫„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰ΩøÁî®JDKÂä®ÊÄÅ‰ª£ÁêÜÂÆûÁé∞ÁöÑ‰∏Ä‰∏™Áõ∏‰∫≤ÊâæÂØπË±°ÁöÑÊ°à‰æã„ÄÇ</p>
<h3 id="JDKÂÆûÁé∞ÊñπÂºè"><a href="#JDKÂÆûÁé∞ÊñπÂºè" class="headerlink" title="JDKÂÆûÁé∞ÊñπÂºè"></a>JDKÂÆûÁé∞ÊñπÂºè</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JDKÂÆûÁé∞ÊñπÂºè</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> MrDJun 2020/10/27</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKMeipo</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> {</span><br><span class="line">    <span class="comment">// Ë¢´‰ª£ÁêÜÁöÑÂØπË±°ÔºåÊääÂºïÁî®‰øùÂ≠ò‰∏ãÊù•</span></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getInstance</span><span class="params">(Object target)</span> {</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">        Class&lt;?&gt; clazz = target.getClass();</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(clazz.getClassLoader(), clazz.getInterfaces(), <span class="built_in">this</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable {</span><br><span class="line">        before();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> method.invoke(<span class="built_in">this</span>.target, args);</span><br><span class="line">        after();</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÊàëÊòØÂ™íÂ©ÜÔºåÊ≠£Âú®Â∏Æ‰Ω†ÊâæÂØπË±°ÔºåÁé∞Âú®Â∑≤ÁªèÁ°ÆËÆ§‰∫Ü‰Ω†ÂñúÊ¨¢Âì™ÁßçÂ¶πÂ≠ê‰∫Ü"</span>);</span><br><span class="line">        System.out.println(<span class="string">"ÂºÄÂßãÁâ©Ëâ≤..."</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Â∑≤ÁªèÂ∏Æ‰Ω†ÊâæÂà∞ËøôÊ†∑ÁöÑÂ¶πÂ≠ê‰∫ÜÔºåËßâÂæóÂêàÈÄÇÁöÑËØùÔºåÂ∞±ÂáÜÂ§áÂäûÂñú‰∫ãÂêß"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÂçïË∫´ÂÆ¢Êà∑Á±ª</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Customer</span> <span class="keyword">implements</span> <span class="title class_">Person</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findLove</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÂØåÂ©Ü"</span>);</span><br><span class="line">        System.out.println(<span class="string">"Ë∫´È´ò166cm"</span>);</span><br><span class="line">        System.out.println(<span class="string">"Êó†‰∏çËâØÂóúÂ•Ω"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">findLove</span><span class="params">()</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÂàõÂª∫‰∏ªÁ±ªÊµãËØï</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">Person</span> <span class="variable">obj</span> <span class="operator">=</span> (Person) <span class="keyword">new</span> <span class="title class_">JDKMeipo</span>().getInstance(<span class="keyword">new</span> <span class="title class_">Customer</span>());</span><br><span class="line">        obj.findLove();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‚Äã        ËøêË°åÁªìÊûúÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ÊàëÊòØÂ™íÂ©ÜÔºåÊ≠£Âú®Â∏Æ‰Ω†ÊâæÂØπË±°ÔºåÁé∞Âú®Â∑≤ÁªèÁ°ÆËÆ§‰∫Ü‰Ω†ÂñúÊ¨¢Âì™ÁßçÂ¶πÂ≠ê‰∫Ü</span><br><span class="line">ÂºÄÂßãÁâ©Ëâ≤...</span><br><span class="line">ÂØåÂ©Ü</span><br><span class="line">Ë∫´È´ò166cm</span><br><span class="line">Êó†‰∏çËâØÂóúÂ•Ω</span><br><span class="line">Â∑≤ÁªèÂ∏Æ‰Ω†ÊâæÂà∞ËøôÊ†∑ÁöÑÂ¶πÂ≠ê‰∫ÜÔºåËßâÂæóÂêàÈÄÇÁöÑËØùÔºåÂ∞±ÂáÜÂ§áÂäûÂñú‰∫ãÂêß</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ÊâãÂÜôÂÆûÁé∞JDKÂä®ÊÄÅ‰ª£ÁêÜ"><a href="#ÊâãÂÜôÂÆûÁé∞JDKÂä®ÊÄÅ‰ª£ÁêÜ" class="headerlink" title="ÊâãÂÜôÂÆûÁé∞JDKÂä®ÊÄÅ‰ª£ÁêÜ"></a>ÊâãÂÜôÂÆûÁé∞JDKÂä®ÊÄÅ‰ª£ÁêÜ</h3><p>‚Äã        JDKÁöÑÂä®ÊÄÅ‰ª£ÁêÜÊòØÈááÁî®Â≠óËäÇÈáçÁªÑÁöÑÊñπÂºèÂÆûÁé∞ÁöÑÔºåÈáçÊñ∞ÁîüÊàêÂØπË±°Êù•Êõø‰ª£ÂéüÂßãÂØπË±°Ôºå‰ª•ËææÂà∞Âä®ÊÄÅ‰ª£ÁêÜÁöÑÁõÆÁöÑ„ÄÇJDKÂä®ÊÄÅ‰ª£ÁêÜÁîüÊàêÂØπË±°ÁöÑÊ≠•È™§Â¶Ç‰∏ãÔºö</p>
<p>Ôºà1ÔºâËé∑ÂèñË¢´‰ª£ÁêÜÂØπË±°ÁöÑÂºïÁî®ÔºåÂπ∂Ëé∑ÂèñÂÆÉÁöÑÊâÄÊúâÊé•Âè£ÔºåÂèçÂ∞ÑËé∑ÂèñÔºõ</p>
<p>Ôºà2ÔºâJDKÂä®ÊÄÅ‰ª£ÁêÜÁ±ªÈáçÊñ∞ÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÁ±ªÔºåÂêåÊó∂ÁîüÊàêÊñ∞ÁöÑÁ±ªË¶ÅÂÆûÁé∞Ë¢´‰ª£ÁêÜÁ±ªÂÆûÁé∞ÁöÑÊâÄÊúâÊé•Âè£Ôºõ</p>
<p>Ôºà3ÔºâÂä®ÊÄÅÁîüÊàêJava‰ª£Á†ÅÔºåÊñ∞Âä†ÁöÑ‰∏öÂä°ÈÄªËæëÊñπÊ≥ïÁî±‰∏ÄÂÆöÁöÑÈÄªËæë‰ª£Á†ÅË∞ÉÁî®ÔºàÂú®‰ª£Á†Å‰∏≠‰ΩìÁé∞ÔºâÔºõ</p>
<p>Ôºà4ÔºâÁºñËØëÊñ∞ÁîüÊàêÁöÑJava‰ª£Á†Å‰∏∫.classÊñá‰ª∂Ôºõ</p>
<p>Ôºà5ÔºâÈáçÊñ∞Âä†ËΩΩÂà∞JVMËøêË°åÔºõ</p>
<p>‚Äã        ‰ª•‰∏äËøáÁ®ãÁß∞‰∏∫Â≠óËäÇÈáçÁªÑ„ÄÇJDK‰∏≠Êúâ‰∏Ä‰∏™ËßÑËåÉÔºåÂú®ClassPath‰∏ãÂè™Ë¶ÅÊòØ$ÂºÄÂ§¥ÁöÑ.classÊñá‰ª∂Ôºå‰∏ÄËà¨ÈÉΩÊòØËá™Âä®ÁîüÊàêÁöÑ„ÄÇÈÇ£‰πàÊàë‰ª¨ÊúâÊ≤°ÊúâÂäûÊ≥ïÁúãÂà∞‰ª£ÊõøÂêéÁöÑÂØπË±°ÁöÑ‚ÄúÁúüÂÆπ‚ÄùÂë¢ÔºüÂÅö‰∏Ä‰∏™ËøôÊ†∑ÁöÑÊµãËØïÔºöÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÂØπË±°Â≠óËäÇÁ†ÅÈÄöËøáÊñá‰ª∂ÊµÅËæìÂá∫Âà∞Êñ∞ÁöÑ.classÊñá‰ª∂ÔºåÁÑ∂ÂêéÂà©Áî®ÂèçÁºñËØëÂ∑•ÂÖ∑Êü•ÁúãÊ∫ê‰ª£Á†Å„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fun.async.test.proxy.Person;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">$proxy0</span> <span class="keyword">extends</span> <span class="title class_">Proxy</span></span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">Person</span></span><br><span class="line">{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $proxy0(InvocationHandler invocationhandler)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">super</span>(invocationhandler);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> ((Boolean)<span class="built_in">super</span>.h.invoke(<span class="built_in">this</span>, m1, <span class="keyword">new</span> <span class="title class_">Object</span>[] {</span><br><span class="line">                obj</span><br><span class="line">            })).booleanValue();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">catch</span>(Error _ex) { }</span><br><span class="line">        <span class="keyword">catch</span>(Throwable throwable)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(throwable);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">findLove</span><span class="params">()</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">super</span>.h.invoke(<span class="built_in">this</span>, m3, <span class="literal">null</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">catch</span>(Error _ex) { }</span><br><span class="line">        <span class="keyword">catch</span>(Throwable throwable)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(throwable);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> (String)<span class="built_in">super</span>.h.invoke(<span class="built_in">this</span>, m2, <span class="literal">null</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">catch</span>(Error _ex) { }</span><br><span class="line">        <span class="keyword">catch</span>(Throwable throwable)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(throwable);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">return</span> ((Integer)<span class="built_in">super</span>.h.invoke(<span class="built_in">this</span>, m0, <span class="literal">null</span>)).intValue();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">catch</span>(Error _ex) { }</span><br><span class="line">        <span class="keyword">catch</span>(Throwable throwable)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(throwable);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Method m1;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Method m3;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Method m2;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Method m0;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> </span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        {</span><br><span class="line">            m1 = Class.forName(<span class="string">"java.lang.Object"</span>).getMethod(<span class="string">"equals"</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[] {</span><br><span class="line">                Class.forName(<span class="string">"java.lang.Object"</span>)</span><br><span class="line">            });</span><br><span class="line">            m3 = Class.forName(<span class="string">"com.fun.async.test.proxy.Person"</span>).getMethod(<span class="string">"findLove"</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>]);</span><br><span class="line">            m2 = Class.forName(<span class="string">"java.lang.Object"</span>).getMethod(<span class="string">"toString"</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>]);</span><br><span class="line">            m0 = Class.forName(<span class="string">"java.lang.Object"</span>).getMethod(<span class="string">"hashCode"</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[<span class="number">0</span>]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">catch</span>(NoSuchMethodException nosuchmethodexception)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchMethodError</span>(nosuchmethodexception.getMessage());</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">catch</span>(ClassNotFoundException classnotfoundexception)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoClassDefFoundError</span>(classnotfoundexception.getMessage());</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‚Äã        ‰ªéÂèçÁºñËØëÁöÑÁªìÊûúÊù•ÁúãÔºå$Proxy0 ÁªßÊâø‰∫ÜProxyÁ±ªÔºåÂêåÊó∂ËøòÂÆûÁé∞‰∫ÜPersonÊé•Âè£ÔºåÂπ∂‰∏îËøòÈáçÂÜô‰∫ÜfindLove()ÊñπÊ≥ï„ÄÇÂú®ÈùôÊÄÅÂùó‰∏≠Áî®ÂèçÂ∞ÑÊü•ÊâæÂà∞‰∫ÜÁõÆÊ†áÁöÑÊâÄÊúâÊñπÊ≥ïÔºåËÄå‰∏î‰øùÂ≠ò‰∫ÜÊâÄÊúâÊñπÊ≥ïÂºïÁî®ÔºåÈáçÂÜôÁöÑÊñπÊ≥ïÁî®ÂèçÂ∞ÑË∞ÉÁî®ÁõÆÊ†áÂØπË±°ÁöÑÊñπÊ≥ï„ÄÇ‰∏äÈù¢Ëøô‰∫õ‰ª£Á†ÅÊòØÂì™Êù•ÁöÑÔºüËøôÊòØJDKËá™Âä®ÁîüÊàêÁöÑ„ÄÇÁé∞Âú®‰∏ç‰æùËµñJDKÔºåËá™Â∑±ÂÆûÁé∞Âä®ÊÄÅÁîüÊàêÊ∫ê‰ª£Á†Å„ÄÅÂä®ÊÄÅÂÆåÊàêÁºñËØëÔºåÁÑ∂ÂêéÊõø‰ª£ÂØπË±°Âπ∂ÊâßË°å„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title>Âçï‰æãÊ®°Âºè</title>
    <url>/p/f1601c3e.html</url>
    <content><![CDATA[<html><head></head><body><p>Á°Æ‰øù‰∏Ä‰∏™Á±ªÂú®‰ªª‰ΩïÊó∂ÂÄôÈÉΩÁªùÂØπÂè™Êúâ‰∏Ä‰∏™ÂÆû‰æãÔºåÂπ∂Êèê‰æõ‰∏Ä‰∏™ÂÖ®Â±ÄËÆøÈóÆÁÇπ„ÄÇÂàÜ‰∏∫È•øÊ±âÊ®°ÂºèÂíåÊáíÊ±âÊ®°Âºè„ÄÇ</p>
<h2 id="È•øÊ±âÂçï‰æãÊ®°Âºè"><a href="#È•øÊ±âÂçï‰æãÊ®°Âºè" class="headerlink" title="È•øÊ±âÂçï‰æãÊ®°Âºè"></a>È•øÊ±âÂçï‰æãÊ®°Âºè</h2><p>È•øÊ±âÊ®°ÂºèÈÄÇÁî®‰∫éÂçï‰æãÂØπË±°ËæÉÂ∞ëÁöÑÊÉÖÂÜµ„ÄÇ</p>
<p>ÂÜôÊ≥ï‰∏ÄÔºöÁõ¥Êé•Âú®‰ΩøÁî® static ÂÖ≥ÈîÆÂ≠óÂàõÂª∫ÂØπË±°</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HungrySingleton</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">HungrySingleton</span> <span class="variable">hungrySingleton</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HungrySingleton</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">HungrySingleton</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> HungrySingleton <span class="title function_">getInstance</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> hungrySingleton;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÜôÊ≥ï‰∫åÔºö‰ΩøÁî® static{} ÁöÑÊñπÂºèÂàõÂª∫ÂØπË±°</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HungryStaticSingleton</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HungryStaticSingleton hungrySingleton;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        hungrySingleton = <span class="keyword">new</span> <span class="title class_">HungryStaticSingleton</span>();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> HungryStaticSingleton <span class="title function_">getInstance</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> hungrySingleton;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÊáíÊ±âÂçï‰æãÊ®°Âºè"><a href="#ÊáíÊ±âÂçï‰æãÊ®°Âºè" class="headerlink" title="ÊáíÊ±âÂçï‰æãÊ®°Âºè"></a>ÊáíÊ±âÂçï‰æãÊ®°Âºè</h2><p>È°æÂêçÊÄù‰πâÔºåË¢´Â§ñÈÉ®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÂÜÖÈÉ®Á±ªÊâç‰ºöÂä†ËΩΩ„ÄÇ</p>
<p>ÁÆÄÂçïÂÆûÁé∞Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazySimpleSingleton</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LazySimpleSingleton</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySimpleSingleton singleton;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazySimpleSingleton <span class="title function_">getInstance</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">if</span> (singleton == <span class="literal">null</span>) {</span><br><span class="line">            singleton = <span class="keyword">new</span> <span class="title class_">LazySimpleSingleton</span>();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏äÈù¢ËøôÁßçÊñπÂºèÂ≠òÂú®ÂÆâÂÖ®ÈöêÊÇ£Ôºå‰∏ãÈù¢Áúã‰∏Ä‰∏™Ê°à‰æãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExecutorThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> {</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">LazySimpleSingleton</span> <span class="variable">singleton</span> <span class="operator">=</span> LazySimpleSingleton.getInstance();</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">" -&gt; "</span> + singleton);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">     	<span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">ExecutorThread</span>()).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">ExecutorThread</span>()).start();</span><br><span class="line">        System.out.println(<span class="string">"=============END=============="</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûúÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">=============END==============</span><br><span class="line">Thread-0 -&gt; com.fun.DesignPatterns.singleton.LazySimpleSingleton@2ca9c4e8</span><br><span class="line">Thread-1 -&gt; com.fun.DesignPatterns.singleton.LazySimpleSingleton@4e3058f8</span><br></pre></td></tr></tbody></table></figure>

<p>ÁªìÊûúÊúâÁöÑÊó∂ÂÄô‰∏ÄËá¥ÊúâÁöÑÊó∂ÂÄô‰∏ç‰∏ÄËá¥ÔºåÂèëÁé∞Âú®Á∫øÁ®ãÁöÑÁéØÂ¢É‰∏ãÔºåËøô‰∏™ÂØπË±°Ë¢´ÂÆû‰æãÂåñ‰∫Ü‰∏§Ê¨°„ÄÇÁªôSimpleSigleton ÂàõÂª∫ÂØπË±°ÁöÑÊñπÊ≥ïÂä†‰∏ä synchronized ‰øÆÈ•∞Á¨¶Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazySimpleSingleton</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LazySimpleSingleton</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySimpleSingleton singleton;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> LazySimpleSingleton <span class="title function_">getInstance</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">if</span> (singleton == <span class="literal">null</span>) {</span><br><span class="line">            singleton = <span class="keyword">new</span> <span class="title class_">LazySimpleSingleton</span>();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Áé∞Âú®Á∫øÁ®ãÁöÑÂÆâÂÖ®ÈóÆÈ¢òËß£ÂÜ≥‰∫ÜÔºå‰ΩÜÊòØÂ¶ÇÊûúÂú®Á∫øÁ®ãÊï∞ÈáèÊØîËæÉÂ§öÁöÑÊÉÖÂÜµ‰∏ãÂä†ÈîÅÔºå‰ºöËÆ©CPUÂàÜÈÖçÂéãÂäõÂ¢ûÂ§ßÔºåÂØºËá¥Â§ßÈáèÁ∫øÁ®ãÈòªÂ°ûÔºå‰ªéËÄåÈôç‰ΩéÁ®ãÂ∫èÊÄßËÉΩÔºåÁªßÁª≠ÊîπËøõ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazyDoubleCheckSingleton</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> <span class="type">LazyDoubleCheckSingleton</span> <span class="variable">singleton</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LazyDoubleCheckSingleton</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazyDoubleCheckSingleton <span class="title function_">getInstance</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">if</span> (singleton == <span class="literal">null</span>) {</span><br><span class="line">            <span class="keyword">synchronized</span> (LazyDoubleCheckSingleton.class) {</span><br><span class="line">                <span class="keyword">if</span> (singleton == <span class="literal">null</span>) {</span><br><span class="line">                    singleton = <span class="keyword">new</span> <span class="title class_">LazyDoubleCheckSingleton</span>();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> singleton;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏äÈù¢‰ΩøÁî®ÂèåÈáçÊ£ÄÊü•ÈîÅÔºàDCL-Double Check LockÔºâÁöÑÂçï‰æãÊ®°ÂºèÊó¢ËÉΩÂÖºÈ°æÁ∫øÁ®ãÂèàËÉΩÊèêÂçáÁ®ãÂ∫èÊÄßËÉΩ„ÄÇ‰ΩÜÁªàÂΩíÊòØÈúÄË¶Å‰∏äÈîÅÔºåÂØπÊÄßËÉΩËøòÊòØÊúâ‰∏ÄÂÆöÁöÑÂΩ±ÂìçÔºåËøòÊúâ‰∏ãÈù¢ËøôÁßçÊõ¥Â•ΩÁöÑÁöÑÊñπÂºèÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazyInnerClassSingleton</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LazyInnerClassSingleton</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ËøôÁßçÂΩ¢ÂºèÂ¶ÇÊûúÂΩìÂâçÁ±ªÊ≤°ÊúâË¢´‰ΩøÁî®ÂÜÖÈÉ®Á±ªÈªòËÆ§ÊòØ‰∏çË¢´Âä†ËΩΩÁöÑ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">LazyHolder</span> {</span><br><span class="line">        <span class="comment">// Âú®ËøîÂõûÁªìÊûú‰ª•ÂâçÔºå‰∏ÄÂÆö‰ºöÂÖàÂä†ËΩΩÂÜÖÈÉ®Á±ª</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">LazyInnerClassSingleton</span> <span class="variable">LAZY</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LazyInnerClassSingleton</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÊØè‰∏Ä‰∏™ÂÖ≥ÈîÆÂ≠óÈÉΩ‰∏çÂ§ö‰ΩôÔºöstaticËÆ©Âçï‰æãÁ©∫Èó¥ÂÖ±‰∫´„ÄÅ‰∏çË¢´ÈáçÂÜô„ÄÅÈáçËΩΩ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> LazyInnerClassSingleton <span class="title function_">getInstance</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> LazyHolder.LAZY;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËøôÁßçÊñπÊ≥ïÁöÑ‰ºòÁÇπÂ∞±ÂæàÊòéÊòæ‰∫ÜÔºö‰∏ç‰∏äÈîÅ„ÄÅÊèêÂçáÊÄßËÉΩ„ÄÅÁ∫øÁ®ãÂÆâÂÖ®„ÄÅÊáíÂä†ËΩΩ„ÄÇÊ≠§Â§ñÔºåÈù¢ËØïÁªèÂ∏∏Ë¢´ÈóÆÁöÑÈóÆÈ¢òËøòÊúâ‰ª•‰∏ãÂá†ÁÇπ„ÄÇ</p>
<p>Âçï‰æãÊ®°ÂºèË¢´Á†¥ÂùèÁöÑÈóÆÈ¢òÔºöÂèçÂ∞ÑÁ†¥Âùè„ÄÅÂ∫èÂàóÂåñÁ†¥Âùè„ÄÅÂÖãÈöÜÁ†¥ÂùèÔºà‰∏ã‰∏ÄËäÇÔºåËØ∑ËßÅÂéüÂûãÊ®°ÂºèÔºâ„ÄÇËß£ÂÜ≥ÊñπÊ≥ï‰∏ãÈù¢Á¨¨‰∏âÁÇπÔºö</p>
<h2 id="Ê≥®ÂÜåÂºèÂçï‰æãÊ®°Âºè"><a href="#Ê≥®ÂÜåÂºèÂçï‰æãÊ®°Âºè" class="headerlink" title="Ê≥®ÂÜåÂºèÂçï‰æãÊ®°Âºè"></a>Ê≥®ÂÜåÂºèÂçï‰æãÊ®°Âºè</h2><p>Ê≥®ÂÜåÂºèÂçï‰æãÂèàÁß∞‰∏∫ÁôªËÆ∞ÂºèÂçï‰æãÔºåÂ∞±ÊòØÂ∞ÜÊØè‰∏Ä‰∏™ÂÆû‰æãÈÉΩÁôªËÆ∞Âà∞Êüê‰∏Ä‰∏™Âú∞ÊñπÔºå‰ΩøÁî®ÂîØ‰∏ÄÁöÑÊ†áËØÜËé∑ÂèñÂÆû‰æã„ÄÇ</p>
<h3 id="Êûö‰∏æÂºèÂçï‰æãÊ®°Âºè"><a href="#Êûö‰∏æÂºèÂçï‰æãÊ®°Âºè" class="headerlink" title="Êûö‰∏æÂºèÂçï‰æãÊ®°Âºè"></a>Êûö‰∏æÂºèÂçï‰æãÊ®°Âºè</h3><p>Êûö‰∏æÂºèÂçï‰æãÂèØÈÅøÂÖçÂ∫èÂàóÂåñÁ†¥ÂùèÂíåÂèçÂ∞ÑÁ†¥Âùè„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">EnumSingleton</span> {</span><br><span class="line">    INSTANCE;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getData</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(Object data)</span> {</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> EnumSingleton <span class="title function_">getInstance</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÂÆπÂô®ÁºìÂ≠òÂçï‰æãÊ®°Âºè"><a href="#ÂÆπÂô®ÁºìÂ≠òÂçï‰æãÊ®°Âºè" class="headerlink" title="ÂÆπÂô®ÁºìÂ≠òÂçï‰æãÊ®°Âºè"></a>ÂÆπÂô®ÁºìÂ≠òÂçï‰æãÊ®°Âºè</h3><p>ÂÆπÂô®ÂºèÂçï‰æãÈÄÇÁî®‰∫éÂàõÂª∫ÂÆû‰æãÈùûÂ∏∏Â§öÁöÑÊÉÖÂÜµÔºå‰æø‰∫éÁÆ°ÁêÜ„ÄÇ‰ΩÜÊòØÔºåÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContainerSingleton</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ContainerSingleton</span><span class="params">()</span>{}</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String,Object&gt; ioc=<span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;String,Object&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">getBean</span><span class="params">(String className)</span>{</span><br><span class="line">        <span class="keyword">synchronized</span> (ioc){</span><br><span class="line">            <span class="keyword">if</span>(!ioc.containsKey(className)){</span><br><span class="line">                Object obj=<span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    obj=Class.forName(className);</span><br><span class="line">                    ioc.put(className,obj);</span><br><span class="line">                } <span class="keyword">catch</span> (ClassNotFoundException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">return</span> obj;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">return</span> ioc.get(className);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âà∞Ê≠§Ê≥®ÂÜåÂºèÂçï‰æãÊ®°ÂºèÂ∞±ÂÆå‰∫ÜÔºå‰∏ãÈù¢Âú®Ë°•ÂÖÖ‰∏ÄÁßçThreadLocalÂÆûÁé∞Âçï‰æãÊ®°ÂºèÁöÑÊ°à‰æãÔºö</p>
<h3 id="ThreadLocal-Âçï‰æãÊ®°Âºè"><a href="#ThreadLocal-Âçï‰æãÊ®°Âºè" class="headerlink" title="ThreadLocal Âçï‰æãÊ®°Âºè"></a>ThreadLocal Âçï‰æãÊ®°Âºè</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadLocalSingleton</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ThreadLocalSingleton</span><span class="params">()</span> {}</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;ThreadLocalSingleton&gt; singleton = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;ThreadLocalSingleton&gt;() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> ThreadLocalSingleton <span class="title function_">initialValue</span><span class="params">()</span> {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ThreadLocalSingleton</span>();</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ThreadLocalSingleton <span class="title function_">getInstance</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> singleton.get();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title>Á≠ñÁï•Ê®°Âºè</title>
    <url>/p/72e3b671.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="ÈÄÇÁî®Âú∫ÊôØ"><a href="#ÈÄÇÁî®Âú∫ÊôØ" class="headerlink" title="ÈÄÇÁî®Âú∫ÊôØ"></a>ÈÄÇÁî®Âú∫ÊôØ</h2><ol>
<li>ÈíàÂØπÂêå‰∏ÄÁ±ªÂûãÁöÑÈóÆÈ¢òÊúâÂ§öÁßçÂ§ÑÁêÜÊñπÂºèÔºå‰ªÖ‰ªÖÊòØÂÖ∑‰ΩìÁöÑË°å‰∏∫ÊúâÂ∑ÆÂà´Êó∂„ÄÇ</li>
<li>ÈúÄË¶ÅÂÆâÂÖ®ÁöÑÂ∞ÅË£ÖÂ§öÁßçÂêå‰∏ÄÁ±ªÂûãÁöÑÊìç‰ΩúÊó∂„ÄÇ</li>
<li>Âá∫Áé∞Âêå‰∏ÄÊäΩË±°Á±ªÁöÑÂ§ö‰∏™Â≠êÁ±ªÔºåËÄåÂèàÈúÄË¶Å‰ΩøÁî®if-elseÊù•ÈÄâÊã©Â≠êÁ±ªÊó∂„ÄÇ</li>
</ol>
<h2 id="Áî®Á≠ñÁï•Ê®°ÂºèÂÆûÁé∞ÈÄâÊã©ÊîØ‰ªòÊñπÂºèÁöÑ‰∏öÂä°Âú∫ÊôØ"><a href="#Áî®Á≠ñÁï•Ê®°ÂºèÂÆûÁé∞ÈÄâÊã©ÊîØ‰ªòÊñπÂºèÁöÑ‰∏öÂä°Âú∫ÊôØ" class="headerlink" title="Áî®Á≠ñÁï•Ê®°ÂºèÂÆûÁé∞ÈÄâÊã©ÊîØ‰ªòÊñπÂºèÁöÑ‰∏öÂä°Âú∫ÊôØ"></a>Áî®Á≠ñÁï•Ê®°ÂºèÂÆûÁé∞ÈÄâÊã©ÊîØ‰ªòÊñπÂºèÁöÑ‰∏öÂä°Âú∫ÊôØ</h2><p>Âú®ÂïÜÂüéÁ≥ªÁªü‰∏≠ÔºåÂ∏∏Â∏∏Â≠òÂú®Â§öÁßçÁ≠ñÁï•ÁöÑ‰ºòÊÉ†Ê¥ªÂä®ÔºåÊØîÂ¶ÇÊãºÂõ¢„ÄÅËøîÁé∞‰øÉÈîÄ„ÄÅ‰ºòÊÉ†Âà∏ÊäµÊâ£„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Ê®°ÊãüËøô‰∏™Âú∫ÊôØÁöÑdemoÔºö</p>
<p>‰øÉÈîÄÁ≠ñÁï•ÁöÑÊé•Âè£ PromotionStrategyÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PromotionStrategy</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">doPromotion</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ºòÊÉ†Âà∏ÊäµÊâ£Á≠ñÁï• CouponStrategyÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CouponStrategy</span> <span class="keyword">implements</span> <span class="title class_">PromotionStrategy</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPromotion</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"È¢ÜÂèñ‰ºòÊÉ†Âà∏ÔºåËØæÁ®ã‰ª∑Ê†ºÁõ¥Êé•ÊäµÊâ£‰ºòÊÉ†Âà∏Èù¢ÂÄº"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËøîÁé∞‰øÉÈîÄÁ≠ñÁï• CashbackStrategyÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CashbackStrategy</span> <span class="keyword">implements</span> <span class="title class_">PromotionStrategy</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPromotion</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ËøîÁé∞‰øÉÈîÄÔºåËøîÂõûÁé∞ÈáëÂà∞ÊîØ‰ªòÂÆùË¥¶Êà∑"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊãºÂõ¢Á≠ñÁï• GroupBuyStrategyÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GroupBuyStrategy</span> <span class="keyword">implements</span> <span class="title class_">PromotionStrategy</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPromotion</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÊãºÂõ¢ÔºåÊª°20‰∫∫ÔºåÂÖ®Âõ¢‰∫´ÂèóÂõ¢‰ª∑"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂΩìÁÑ∂ËøòÊúâ‰∏Ä‰∏™Êó†‰ºòÊÉ†Ê¥ªÂä®Á≠ñÁï• EmptyStrategyÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmptyStrategy</span> <span class="keyword">implements</span> <span class="title class_">PromotionStrategy</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPromotion</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Êó†‰øÉÈîÄÊ¥ªÂä®"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰øÉÈîÄÊ¥ªÂä®ÊñπÊ°àÁ±ª PromotionActivityÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromotionActivity</span> {</span><br><span class="line">    <span class="keyword">private</span> PromotionStrategy promotionStrategy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PromotionActivity</span><span class="params">(PromotionStrategy promotionStrategy)</span> {</span><br><span class="line">        <span class="built_in">this</span>.promotionStrategy = promotionStrategy;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span> {</span><br><span class="line">        promotionStrategy.doPromotion();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊµãËØïÁ±ªÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromotionTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">PromotionActivity</span> <span class="variable">activity618</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromotionActivity</span>(<span class="keyword">new</span> <span class="title class_">CashbackStrategy</span>());</span><br><span class="line">        <span class="type">PromotionActivity</span> <span class="variable">activity1111</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromotionActivity</span>(<span class="keyword">new</span> <span class="title class_">CouponStrategy</span>());</span><br><span class="line">        activity618.execute();</span><br><span class="line">        activity1111.execute();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Á±ªÁªìÊûÑ</p>
<p><img src="/p/72e3b671/image-20220413232601362.png" alt="image-20220413232601362"></p>
<p>‰ªéÊµãËØïÁ±ªÊù•ÁúãÔºå‰∏ÄÊ¨°ÂºÄÂêØ‰∫ÜÂ§öÈ°π‰ºòÊÉ†Ê¥ªÂä®Ôºå‰ΩÜÊàë‰ª¨ÈÄöÂ∏∏Âπ∂‰∏ç‰ºö‰∏ÄÊ¨°ÊÄßÊâßË°åÂ§öÁßç‰ºòÊÉ†ÔºåÊâÄ‰ª•ËøõË°åÊîπÈÄ†Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromotionTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">PromotionActivity</span> <span class="variable">activity</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">promotionKey</span> <span class="operator">=</span> <span class="string">"COUPON"</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"COUPON"</span>.equals(promotionKey)) {</span><br><span class="line">            activity = <span class="keyword">new</span> <span class="title class_">PromotionActivity</span>(<span class="keyword">new</span> <span class="title class_">CouponStrategy</span>());</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"CASHBACK"</span>.equals(promotionKey)) {</span><br><span class="line">            activity = <span class="keyword">new</span> <span class="title class_">PromotionActivity</span>(<span class="keyword">new</span> <span class="title class_">CashbackStrategy</span>());</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            activity = <span class="keyword">new</span> <span class="title class_">PromotionActivity</span>(<span class="keyword">new</span> <span class="title class_">EmptyStrategy</span>());</span><br><span class="line">        }</span><br><span class="line">        activity.execute();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËøôÊ†∑Â∞±Êª°Ë∂≥‰∫Ü‰∏öÂä°ÈúÄÊ±ÇÔºå‰ΩÜÊòØÈöèÁùÄ‰ºòÊÉ†Ê¥ªÂä®ÁöÑÂ¢ûÂ§öÔºåÂà§Êñ≠ÈÄªËæëË∂äÊù•Ë∂äÂ§çÊùÇÔºåÁºñÂÜôÂ•ΩÊ¥ªÂä®‰ª£Á†ÅÂêéÈúÄË¶ÅÈáçÂ§çÊµãËØïÔºå‰ºöÂ§ßÂ§ßÂ¢ûÂä†Â∑•‰ΩúÈáè„ÄÇÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•ÁªìÂêàÂ∑•ÂéÇÊ®°ÂºèÂíåÂçï‰æãÊ®°ÂºèÊù•ÂØπÊ≠§ËøõË°å‰ºòÂåñÔºö</p>
<p>Êñ∞Â¢ûÊ¥ªÂä®Á≠ñÁï•Â∑•ÂéÇÁ±ª PromotionStrategyFactory Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromotionStrategyFactory</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, PromotionStrategy&gt; PROMOTION_STRATEGY_MAP = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">PromotionStrategy</span> <span class="variable">NON_PROMOTION</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmptyStrategy</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        PROMOTION_STRATEGY_MAP.put(PromotionKey.COUPON, <span class="keyword">new</span> <span class="title class_">CouponStrategy</span>());</span><br><span class="line">        PROMOTION_STRATEGY_MAP.put(PromotionKey.CASHBACK, <span class="keyword">new</span> <span class="title class_">CashbackStrategy</span>());</span><br><span class="line">        PROMOTION_STRATEGY_MAP.put(PromotionKey.GROUPBUY, <span class="keyword">new</span> <span class="title class_">GroupBuyStrategy</span>());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">interface</span> <span class="title class_">PromotionKey</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">COUPON</span> <span class="operator">=</span> <span class="string">"COUPON"</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">CASHBACK</span> <span class="operator">=</span> <span class="string">"CASHBACK"</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">GROUPBUY</span> <span class="operator">=</span> <span class="string">"GROUPBUY"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PromotionStrategyFactory</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PromotionStrategy <span class="title function_">getPromotionStrategy</span><span class="params">(String promotionKey)</span> {</span><br><span class="line">        <span class="type">PromotionStrategy</span> <span class="variable">promotionStrategy</span> <span class="operator">=</span> PROMOTION_STRATEGY_MAP.get(promotionKey);</span><br><span class="line">        <span class="type">return</span> <span class="variable">promotionStrategy</span> <span class="operator">=</span>= <span class="literal">null</span> ? NON_PROMOTION : promotionStrategy;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromotionTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">promotionKey</span> <span class="operator">=</span> <span class="string">"COUPON"</span>;</span><br><span class="line">        <span class="type">PromotionStrategy</span> <span class="variable">strategy</span> <span class="operator">=</span> PromotionStrategyFactory.getPromotionStrategy(promotionKey);</span><br><span class="line">        <span class="type">PromotionActivity</span> <span class="variable">activity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromotionActivity</span>(strategy);</span><br><span class="line">        activity.execute();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Â¶ÇÊ≠§‰∏Ä‰ºòÂåñÔºåÁõ¥Êé•Âà†Èô§‰∫ÜÈÄªËæëÂà§Êñ≠ÔºåÊØèÊ¨°Êñ∞Â¢ûÊ¥ªÂä®Êó∂ÈÉΩ‰ºöËΩªÊùæÂæàÂ§ö„ÄÇÂÜç‰∏æ‰∏Ä‰∏™ÊîØ‰ªòÁöÑÊ°à‰æãÔºåÂ¶ÇÊûúÂØπÊé•ËøáÈì∂ËÅî„ÄÅÁôæÂ∫¶Êî∂Èì∂Âè∞„ÄÅ‰∫¨‰∏ú„ÄÅQQ„ÄÅÊîØ‰ªòÂÆù„ÄÅÂæÆ‰ø°Á≠âÊîØ‰ªòÁöÑÊúãÂèãÁúã‰∫Ü‰∏ãÈù¢Ëøô‰∏™Ê°à‰æãÔºåÁªùÂØπÊ∑±Êúâ‰Ωì‰ºö„ÄÇ</p>
<h2 id="ÊîØ‰ªòÊ°à‰æã"><a href="#ÊîØ‰ªòÊ°à‰æã" class="headerlink" title="ÊîØ‰ªòÊ°à‰æã"></a>ÊîØ‰ªòÊ°à‰æã</h2><p>ÊâÄÊúâÁöÑÊîØ‰ªòÊñπÂºèÈÉΩÊúâ ÂêçÁß∞„ÄÅÊîØ‰ªò„ÄÅÊü•ËØ¢‰ΩôÈ¢ùÁ≠âË°å‰∏∫ÔºåÊäΩÂèñÊàê‰∏Ä‰∏™ÊîØ‰ªòÊñπÂºèÁöÑÊäΩË±°Á±ª PaymentÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Payment</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title function_">getName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ÈÄöÁî®ÈÄªËæëÊîæÂà∞ÊäΩË±°Á±ªÈáåÈù¢ÂÆûÁé∞</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">pay</span><span class="params">(String uid, <span class="type">double</span> amount)</span> {</span><br><span class="line">        <span class="comment">//‰ΩôÈ¢ùÊòØÂê¶Ë∂≥Â§ü</span></span><br><span class="line">        <span class="keyword">if</span> (queryBalance(uid) &lt; amount) {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="number">500</span>, <span class="string">"ÊîØ‰ªòÂ§±Ë¥•"</span>, <span class="string">"‰ΩôÈ¢ù‰∏çË∂≥"</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="number">200</span>, <span class="string">"ÊîØ‰ªòÊàêÂäü"</span>, <span class="string">"ÊîØ‰ªòÈáëÈ¢ù"</span> + amount);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="type">double</span> <span class="title function_">queryBalance</span><span class="params">(String uid)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>R ÊòØ‰∏Ä‰∏™Áªü‰∏ÄËøîÂõûÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">R</span><span class="params">(<span class="type">int</span> code, String msg, Object data)</span> {</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"{"</span> +</span><br><span class="line">                <span class="string">"code="</span> + code +</span><br><span class="line">                <span class="string">", data="</span> + data +</span><br><span class="line">                <span class="string">", msg='"</span> + msg + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'}'</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>AliPay</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliPay</span> <span class="keyword">extends</span> <span class="title class_">Payment</span> {</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ÊîØ‰ªòÂÆù"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">double</span> <span class="title function_">queryBalance</span><span class="params">(String uid)</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">900</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>JDPay</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDPay</span> <span class="keyword">extends</span> <span class="title class_">Payment</span> {</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"‰∫¨‰∏úÁôΩÊù°"</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">double</span> <span class="title function_">queryBalance</span><span class="params">(String uid)</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">500</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>UnionPay</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnionPay</span> <span class="keyword">extends</span> <span class="title class_">Payment</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Èì∂ËÅîÊîØ‰ªò"</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">double</span> <span class="title function_">queryBalance</span><span class="params">(String uid)</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">120</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>WeChatPay</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeChatPay</span> <span class="keyword">extends</span> <span class="title class_">Payment</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ÂæÆ‰ø°ÊîØ‰ªò"</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">double</span> <span class="title function_">queryBalance</span><span class="params">(String uid)</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">263</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ËÆ¢ÂçïÁ±ª Order</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> {</span><br><span class="line">    <span class="keyword">private</span> String uid;</span><br><span class="line">    <span class="keyword">private</span> String orderId;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> amount;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Order</span><span class="params">(String uid, String orderId, <span class="type">double</span> amount)</span> {</span><br><span class="line">        <span class="built_in">this</span>.uid = uid;</span><br><span class="line">        <span class="built_in">this</span>.orderId = orderId;</span><br><span class="line">        <span class="built_in">this</span>.amount = amount;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">pay</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> pay(PayStrategy.DEFAULT_PAY);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÂÆåÁæéËß£ÂÜ≥ if...else ÊàñËÄÖ switch</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">pay</span><span class="params">(String payKey)</span> {</span><br><span class="line">        <span class="type">Payment</span> <span class="variable">payment</span> <span class="operator">=</span> PayStrategy.get(payKey);</span><br><span class="line">        System.out.println(<span class="string">"Ê¨¢Ëøé‰ΩøÁî®"</span> + payment.getName());</span><br><span class="line">        System.out.println(<span class="string">"Êú¨Ê¨°‰∫§ÊòìÈáëÈ¢ù‰∏∫"</span> + amount + <span class="string">"ÔºåÂºÄÂßãÊâ£Ê¨æ"</span>);</span><br><span class="line">        <span class="keyword">return</span> payment.pay(uid, amount);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>PayStrategy</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PayStrategy</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ALI_PAY</span> <span class="operator">=</span> <span class="string">"AliPay"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">JD_PAY</span> <span class="operator">=</span> <span class="string">"JdPay"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">WECHAT_PAY</span> <span class="operator">=</span> <span class="string">"WeChatPay"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">UNION_PAY</span> <span class="operator">=</span> <span class="string">"UnionPay"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_PAY</span> <span class="operator">=</span> ALI_PAY;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, Payment&gt; strategy = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Payment&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        strategy.put(ALI_PAY, <span class="keyword">new</span> <span class="title class_">AliPay</span>());</span><br><span class="line">        strategy.put(JD_PAY, <span class="keyword">new</span> <span class="title class_">JDPay</span>());</span><br><span class="line">        strategy.put(WECHAT_PAY, <span class="keyword">new</span> <span class="title class_">WeChatPay</span>());</span><br><span class="line">        strategy.put(UNION_PAY, <span class="keyword">new</span> <span class="title class_">UnionPay</span>());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Payment <span class="title function_">get</span><span class="params">(String payKey)</span> {</span><br><span class="line">        <span class="keyword">if</span> (!strategy.containsKey(payKey)) {</span><br><span class="line">            <span class="keyword">return</span> strategy.get(DEFAULT_PAY);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> strategy.get(payKey);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊµãËØïÁ±ª Test</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PayTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Order</span>(<span class="string">"1"</span>, <span class="string">"123456789123"</span>, <span class="number">325</span>);</span><br><span class="line">        <span class="type">R</span> <span class="variable">result</span> <span class="operator">=</span> order.pay(PayStrategy.ALI_PAY);</span><br><span class="line"></span><br><span class="line">        System.out.println(result);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="‰ºòÁº∫ÁÇπ"><a href="#‰ºòÁº∫ÁÇπ" class="headerlink" title="‰ºòÁº∫ÁÇπ"></a>‰ºòÁº∫ÁÇπ</h2><p>‰ºòÁÇπÔºö</p>
<p>1„ÄÅÁ≠ñÁï•Ê®°ÂºèÁ¨¶ÂêàÂºÄÈó≠ÂéüÂàô„ÄÇ</p>
<p>2„ÄÅÈÅøÂÖç‰ΩøÁî®Â§öÈáçÊù°‰ª∂ËΩ¨ÁßªËØ≠Âè•ÔºåÂ¶Çif‚Ä¶else‚Ä¶ËØ≠Âè•„ÄÅswitch ËØ≠Âè•</p>
<p>3„ÄÅ‰ΩøÁî®Á≠ñÁï•Ê®°ÂºèÂèØ‰ª•ÊèêÈ´òÁÆóÊ≥ïÁöÑ‰øùÂØÜÊÄßÂíåÂÆâÂÖ®ÊÄß„ÄÇ</p>
<p>Áº∫ÁÇπÔºö</p>
<p>1„ÄÅÂÆ¢Êà∑Á´ØÂøÖÈ°ªÁü•ÈÅìÊâÄÊúâÁöÑÁ≠ñÁï•ÔºåÂπ∂‰∏îËá™Ë°åÂÜ≥ÂÆö‰ΩøÁî®Âì™‰∏Ä‰∏™Á≠ñÁï•Á±ª„ÄÇ</p>
<p>2„ÄÅ‰ª£Á†Å‰∏≠‰ºö‰∫ßÁîüÈùûÂ∏∏Â§öÁ≠ñÁï•Á±ªÔºåÂ¢ûÂä†Áª¥Êä§ÈöæÂ∫¶„ÄÇ</p>
<h2 id="ÁÆÄÂçïÂÆûÁé∞Spring‰∏≠ÁöÑ-DispatcherServlet"><a href="#ÁÆÄÂçïÂÆûÁé∞Spring‰∏≠ÁöÑ-DispatcherServlet" class="headerlink" title="ÁÆÄÂçïÂÆûÁé∞Spring‰∏≠ÁöÑ DispatcherServlet"></a>ÁÆÄÂçïÂÆûÁé∞Spring‰∏≠ÁöÑ DispatcherServlet</h2><p>Êàë‰ª¨Â∏∏Áî®ÁöÑ‰∏§Áßç‰∏§ÁßçÊû∂ÊûÑÈ£éÊ†ºÔºöRESTÂíåRPCÔºåREST API ÁöÑÊØè‰∏™URIÂØπÂ∫îÁöÑÈÉΩÊòØÊüê‰∏Ä‰ªΩËµÑÊ∫êÔºåÂú®Êàë‰ª¨ÈÄöËøáSpringÁöÑControllerÁöÑURIËøõË°åËÆøÈóÆËµÑÊ∫êÊó∂Ôºå‰ºöÁªèËøáDispatchServletÂàÜÂèëÁªôÂØπÂ∫îÁöÑServlet„ÄÇÂú®J2EEÁöÑÊ†áÂáÜ‰∏≠ÔºåÊØè‰∏Ä‰∏™URLÂØπÂ∫î‰∏Ä‰∏™Servlet„ÄÇ</p>
<p><strong>‰ºöÂëòÊéßÂà∂Âô®</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemberController</span> {</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getMemberById</span><span class="params">(<span class="type">int</span> id)</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><strong>ËÆ¢ÂçïÊéßÂà∂Âô®Ôºö</strong></p>
<pre><code>public class OrderController {
    public Object getOrderById(int id) {
        return null;
    }
}
</code></pre>
<p><strong>DispatcherServlet</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SpringMVCÁöÑÂßîÊ¥æÊ®°ÂºèÂ∞±ÊòØÈÄöËøáDispatcherServletÂ∞ÜËØ∑Ê±ÇÁöÑURIËΩ¨‰∏∫‰∏çÂêåÁöÑjava‰ª£Á†Å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DispatcherServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Handler&gt; handlerMapping = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            handlerMapping.add(<span class="keyword">new</span> <span class="title class_">Handler</span>().setUri(<span class="string">"/web/getMemberById"</span>).setController(MemberController.class.newInstance()).setMethod(MemberController.class.getMethod(<span class="string">"getMemberById"</span>, <span class="type">int</span>.class)));</span><br><span class="line">            handlerMapping.add(<span class="keyword">new</span> <span class="title class_">Handler</span>().setUri(<span class="string">"/web/getOrderById"</span>).setController(OrderController.class.newInstance()).setMethod(OrderController.class.getMethod(<span class="string">"getOrderById"</span>, <span class="type">int</span>.class)));</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException {</span><br><span class="line">        doDispatcher(req, resp);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ‰ΩøÁî®Á≠ñÁï•Ê®°ÂºèÂéªÊéâÂ§ö‰∏™if-elseÂà§Êñ≠</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doDispatcher</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> req.getRequestURI();</span><br><span class="line">        <span class="type">Handler</span> <span class="variable">h</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (Handler handler : handlerMapping) {</span><br><span class="line">            <span class="keyword">if</span> (Objects.equals(handler.getUri(), requestURI)) {</span><br><span class="line">                h = handler;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            h.getMethod().invoke(h.getController(), Integer.parseInt(req.getParameter(<span class="string">"mid"</span>)));</span><br><span class="line">        } <span class="keyword">catch</span> (IllegalAccessException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">catch</span> (InvocationTargetException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Handler</span> {</span><br><span class="line">        String uri;</span><br><span class="line">        Object controller;</span><br><span class="line">        Method method;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getUri</span><span class="params">()</span> {</span><br><span class="line">            <span class="keyword">return</span> uri;</span><br><span class="line">        }</span><br><span class="line">		</span><br><span class="line">        <span class="comment">// ËøîÂõûthisÊòØÂáΩÊï∞ÂºèÁºñÁ®ã‰∏≠ÁöÑÈìæÂºè</span></span><br><span class="line">        <span class="keyword">public</span> Handler <span class="title function_">setUri</span><span class="params">(String uri)</span> {</span><br><span class="line">            <span class="built_in">this</span>.uri = uri;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">getController</span><span class="params">()</span> {</span><br><span class="line">            <span class="keyword">return</span> controller;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Handler <span class="title function_">setController</span><span class="params">(Object controller)</span> {</span><br><span class="line">            <span class="built_in">this</span>.controller = controller;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Method <span class="title function_">getMethod</span><span class="params">()</span> {</span><br><span class="line">            <span class="keyword">return</span> method;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Handler <span class="title function_">setMethod</span><span class="params">(Method method)</span> {</span><br><span class="line">            <span class="built_in">this</span>.method = method;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</body></html>]]></content>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title>Ê®°ÊùøÊ®°Âºè</title>
    <url>/p/150e036b.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="ÂÆö‰πâ"><a href="#ÂÆö‰πâ" class="headerlink" title="ÂÆö‰πâ"></a>ÂÆö‰πâ</h2><ul>
<li><p>ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÁÆóÊ≥ïÁöÑÈ™®Êû∂ÔºåÂπ∂ÂÖÅËÆ∏Â≠êÁ±ª‰∏∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™Ê≠•È™§Êèê‰æõÂÆûÁé∞„ÄÇ</p>
</li>
<li><p>ÂáÜÂ§á‰∏Ä‰∏™ÊäΩË±°Á±ªÔºåÂ∞ÜÈÉ®ÂàÜÈÄªËæë‰ª•ÂÖ∑‰ΩìÊñπÊ≥ï‰ª•ÂèäÂÖ∑‰ΩìÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂΩ¢ÂºèÂÆûÁé∞ÔºåÁÑ∂ÂêéÂ£∞Êòé‰∏Ä‰∫õÊäΩË±°ÊñπÊ≥ïÊù•Ëø´‰ΩøÂ≠êÁ±ªÂÆûÁé∞Ââ©‰ΩôÁöÑÈÄªËæë„ÄÇ</p>
</li>
<li><p>‰∏çÂêåÁöÑÂ≠êÁ±ªÂèØ‰ª•‰ª•‰∏çÂêåÁöÑÊñπÂºèÂÆûÁé∞Ëøô‰∫õÊäΩË±°ÊñπÊ≥ïÔºå‰ªéËÄåÂØπÂâ©‰ΩôÁöÑÈÄªËæëÊúâ‰∏çÂêåÁöÑÂÆûÁé∞„ÄÇËøôÂ∞±ÊòØÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÁöÑÁî®ÊÑè„ÄÇ</p>
</li>
</ul>
<h2 id="ÈÄÇÁî®Âú∫ÊôØ"><a href="#ÈÄÇÁî®Âú∫ÊôØ" class="headerlink" title="ÈÄÇÁî®Âú∫ÊôØ"></a>ÈÄÇÁî®Âú∫ÊôØ</h2><ul>
<li>‰∏ÄÊ¨°ÊÄßÂÆûÁé∞‰∏Ä‰∏™ÁÆóÊ≥ï‰∏çÂèòÁöÑÈÉ®ÂàÜÔºåÂπ∂Â∞ÜÂèØÂèòÁöÑË°å‰∏∫ÁïôÁªôÂ≠êÁ±ªÊù•ÂÆûÁé∞„ÄÇ</li>
<li>ÊèêÂèñÂ≠êÁ±ªÈáçÂ§çÂÆûÁé∞ÁöÑÊñπÊ≥ïÔºåÊîæÂú®Ë∂ÖÁ±ª‰∏≠„ÄÇ</li>
<li>ÊéßÂà∂Â≠êÁ±ªÁöÑÊâ©Â±ïÔºåÂøÖÈ°ªÈÅµÂæ™Ëøô‰∏ÄÂ•óÊµÅÁ®ãËßÑÂàô„ÄÇ</li>
</ul>
<h2 id="Ê°à‰æã"><a href="#Ê°à‰æã" class="headerlink" title="Ê°à‰æã"></a>Ê°à‰æã</h2><p>ËøôÊòØ‰∏Ä‰∏™ÁÇíËèúÁöÑÊ°à‰æãÔºåË¥¥ËøëÁîüÊ¥ªÔºåÁÆÄÂçïÊòìÊáÇ„ÄÇ</p>
<p>CookTemplateÔºöÁÇíËèúÁöÑ‰∏ÄÂ•óÊ®°Êùø</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">CookTemplate</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â¶ÇÊûú‰∏çÂ∏åÊúõÂ≠êÁ±ªË¶ÜÁõñÊ≠§ÊñπÊ≥ïÔºåÂèØ‰ª•‰ΩøÁî®final ÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">create</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">//Á¨¨‰∏ÄÊ≠•ÔºöÂÄíÊ≤π</span></span><br><span class="line">        <span class="built_in">this</span>.pourOil();</span><br><span class="line">        <span class="comment">//Á¨¨‰∫åÊ≠•ÔºöÁÉ≠Ê≤π</span></span><br><span class="line">        <span class="built_in">this</span>.HeatOil();</span><br><span class="line">        <span class="comment">//Á¨¨‰∏âÊ≠•ÔºöÂÄíËî¨Ëèú</span></span><br><span class="line">        <span class="built_in">this</span>.pourVegetable();</span><br><span class="line">        <span class="comment">//Á¨¨ÂõõÊ≠•ÔºöÂÄíË∞ÉÂë≥Êñô</span></span><br><span class="line">        <span class="built_in">this</span>.pourSauce();</span><br><span class="line">        <span class="comment">//Á¨¨‰∫îÊ≠•ÔºöÁøªÁÇí</span></span><br><span class="line">        <span class="built_in">this</span>.fry();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Á¨¨‰∏ÄÊ≠•ÔºöÂÄíÊ≤πÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊâÄ‰ª•Áõ¥Êé•ÂÆûÁé∞</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pourOil</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÂÄíÊ≤π"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Á¨¨‰∫åÊ≠•ÔºöÁÉ≠Ê≤πÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊâÄ‰ª•Áõ¥Êé•ÂÆûÁé∞</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">HeatOil</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÁÉ≠Ê≤π"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Á¨¨‰∏âÊ≠•ÔºöÁÇí‰ªÄ‰πàËèúËÆ©Â≠êÁ±ªÂÜ≥ÂÆö</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">pourVegetable</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Á¨¨ÂõõÊ≠•ÔºöËøô‰∏™ËèúÈúÄË¶ÅÂä†‰ªÄ‰πàË∞ÉÊñôÁî±Â≠êÁ±ªÂÜ≥ÂÆö</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">pourSauce</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Á¨¨‰∫îÊ≠•ÔºöÁøªÁÇíÊòØ‰∏ÄÊ†∑ÁöÑ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fry</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÁøªÁÇíÁõ¥Âà∞ÁÇíÁÜü"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>CookBaoCaiÔºöÁÇíÂåÖËèú</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookBaoCai</span> <span class="keyword">extends</span> <span class="title class_">CookTemplate</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pourVegetable</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÂÄíÂÖ•ÂåÖËèú"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pourSauce</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Âä†ÂÖ•ÂåÖËèúÁöÑË∞ÉÂë≥Êñô"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>CookHuaCaiÔºöÁÇíËä±Ëèú</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookHuaCai</span> <span class="keyword">extends</span> <span class="title class_">CookTemplate</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pourVegetable</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÂÄíÂÖ•Ëä±Ëèú"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pourSauce</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Âä†ÂÖ•Ëä±ËèúÁöÑË∞ÉÂë≥Êñô"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>TestÔºöÊµãËØïÁ±ª</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TemplateTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">CookBaoCai</span> <span class="variable">cookBaoCai</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CookBaoCai</span>();</span><br><span class="line">        cookBaoCai.create();</span><br><span class="line">        System.out.println(<span class="string">"====================="</span>);</span><br><span class="line">        <span class="type">CookHuaCai</span> <span class="variable">cookHuaCai</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CookHuaCai</span>();</span><br><span class="line">        cookHuaCai.create();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="‰ºòÁº∫ÁÇπ"><a href="#‰ºòÁº∫ÁÇπ" class="headerlink" title="‰ºòÁº∫ÁÇπ"></a>‰ºòÁº∫ÁÇπ</h2><p>‰ºòÁÇπ</p>
<p>Ôºà1ÔºâÊèêÈ´ò‰ª£Á†ÅÂ§çÁî®ÊÄß„ÄÇÂ∞ÜÁõ∏ÂêåÈÉ®ÂàÜÁöÑ‰ª£Á†ÅÊîæÂú®ÊäΩË±°ÁöÑË∂ÖÁ±ª‰∏≠„ÄÇ</p>
<p>Ôºà2ÔºâÊèêÈ´ò‰∫ÜÊãìÂ±ïÊÄß„ÄÇÂ∞Ü‰∏çÂêåÁöÑ‰ª£Á†ÅÊîæÂÖ•‰∏çÂêåÁöÑÂ≠êÁ±ª‰∏≠ÔºåÈÄöËøáÂØπÂ≠êÁ±ªÁöÑÊâ©Â±ïÂ¢ûÂä†Êñ∞ÁöÑË°å‰∏∫„ÄÇ</p>
<p>Ôºà3ÔºâÂÆûÁé∞‰∫ÜÂèçÂêëÊéßÂà∂„ÄÇÈÄöËøá‰∏Ä‰∏™Áà∂Á±ªË∞ÉÁî®ÂÖ∂Â≠êÁ±ªÁöÑÊìç‰ΩúÔºåÈÄöËøáÂØπÂ≠êÁ±ªÁöÑÊâ©Â±ïÂ¢ûÂä†Êñ∞ÁöÑË°å‰∏∫ÔºåÂÆûÁé∞‰∫ÜÂèçÂêëÊéßÂà∂ &amp; Á¨¶Âêà‚ÄúÂºÄÈó≠ÂéüÂàô‚Äù„ÄÇ</p>
<p>Áº∫ÁÇπ</p>
<p>‚Äã    ÂºïÂÖ•‰∫ÜÊäΩË±°Á±ªÔºåÊØè‰∏Ä‰∏™‰∏çÂêåÁöÑÂÆûÁé∞ÈÉΩÈúÄË¶Å‰∏Ä‰∏™Â≠êÁ±ªÊù•ÂÆûÁé∞ÔºåÂØºËá¥Á±ªÁöÑ‰∏™Êï∞Â¢ûÂä†Ôºå‰ªéËÄåÂ¢ûÂä†‰∫ÜÁ≥ªÁªüÂÆûÁé∞ÁöÑÂ§çÊùÇÂ∫¶„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVAÊ≥®Ëß£</title>
    <url>/p/6ba397bc.html</url>
    <content><![CDATA[<html><head></head><body><p>Ê≥®Ëß£ÊòØJDK5.0 ÂºïÂÖ•ÁöÑ‰∏ÄÁßçÊ≥®ÈáäÊú∫Âà∂ÔºåÊ†∏ÂøÉÂåÖÊòØ java.lang.annotation Ôºå‰∏ãÈù¢Êúâ‰∏Ä‰∏™ AnnotationÊé•Âè£ÔºåÊòØÊâÄÊúâÊ≥®Ëß£ÈÉΩÈªòËÆ§ÁªßÊâøÁöÑÔºàJavap .classÂèØ‰ª•ÁúãÂà∞ÁªßÊâøÂÖ≥Á≥ªÔºâ„ÄÇ</p>
<p>Êèê‰æõ‰∏ÄÁßç‰∏∫Á®ãÂ∫èÂÖÉÁ¥†ËÆæÁΩÆÂÖÉÊï∞ÊçÆÁöÑÊñπÊ≥ïÔºö</p>
<ul>
<li>ÂÖÉÊï∞ÊçÆÊòØÊ∑ªÂä†Âà∞Á®ãÂ∫èÂÖÉÁ¥†Â¶ÇÊñπÊ≥ï„ÄÅÂ≠óÊÆµ„ÄÅÁ±ªÂíåÂåÖ.‰∏äÁöÑÈ¢ùÂ§ñ‰ø°ÊÅØ</li>
<li>Ê≥®Ëß£ÊòØ‰∏ÄÁßçÂàÜÊï£ÂºèÁöÑÂÖÉÊï∞ÊçÆËÆæÁΩÆÊñπÂºè, XMLÊòØÈõÜ‰∏≠ÂºèÁöÑËÆæÁΩÆÊñπÂºè</li>
<li>Ê≥®Ëß£‰∏çËÉΩÁõ¥Êé•Âπ≤Êâ∞Á®ãÂ∫è‰ª£Á†ÅÁöÑËøêË°å</li>
</ul>
<h2 id="Ê≥®Ëß£ÁöÑÂäüËÉΩ"><a href="#Ê≥®Ëß£ÁöÑÂäüËÉΩ" class="headerlink" title="Ê≥®Ëß£ÁöÑÂäüËÉΩ"></a>Ê≥®Ëß£ÁöÑÂäüËÉΩ</h2><ul>
<li>‰Ωú‰∏∫ÁâπÂÆöÁöÑÊ†áËÆ∞,Áî®‰∫éÂëäËØâÁºñËØëÂô®‰∏Ä‰∫õ‰ø°ÊÅØ</li>
<li>ÁºñËØëÊó∂Âä®ÊÄÅÂ§ÑÁêÜ,Â¶ÇÂä®ÊÄÅÁîüÊàê‰ª£Á†Å</li>
<li>ËøêË°åÊó∂Âä®ÊÄÅÂ§ÑÁêÜ,‰Ωú‰∏∫È¢ùÂ§ñ‰ø°ÊÅØÁöÑËΩΩ‰Ωì,Â¶ÇËé∑ÂèñÊ≥®Ëß£‰ø°ÊÅØ</li>
</ul>
<h2 id="Ê≥®Ëß£ÁöÑÂàÜÁ±ª"><a href="#Ê≥®Ëß£ÁöÑÂàÜÁ±ª" class="headerlink" title="Ê≥®Ëß£ÁöÑÂàÜÁ±ª"></a>Ê≥®Ëß£ÁöÑÂàÜÁ±ª</h2><ul>
<li>Ê†áÂáÜÊ≥®Ëß£: Override„ÄÅDeprecated„ÄÅ SuppressWarnings</li>
<li>ÂÖÉÊ≥®Ëß£: @Retention„ÄÅ@ Target„ÄÅ@Inherited„ÄÅ @Documented</li>
<li>Ëá™ÂÆö‰πâÊ≥®Ëß£</li>
</ul>
<h2 id="ÂÖÉÊ≥®Ëß£"><a href="#ÂÖÉÊ≥®Ëß£" class="headerlink" title="ÂÖÉÊ≥®Ëß£"></a>ÂÖÉÊ≥®Ëß£</h2><p>Áî®‰∫é‰øÆÈ•∞Ê≥®Ëß£ÁöÑÊ≥®Ëß£,ÈÄöÂ∏∏Áî®Âú®Ê≥®Ëß£ÁöÑÂÆö‰πâ‰∏ä</p>
<p>@Target :Ê≥®Ëß£ÁöÑ‰ΩúÁî®ÁõÆÊ†á</p>
<p>@Retention :Ê≥®Ëß£ÁöÑÁîüÂëΩÂë®Êúü</p>
<p>@Documented :Ê≥®Ëß£ÊòØÂê¶Â∫îÂΩìË¢´ÂåÖÂê´Âú®JavaDocÊñáÊ°£‰∏≠</p>
<p>@Inherited: ÊòØÂê¶ÂÖÅËÆ∏Â≠êÁ±ªÁªßÊâøËØ•Ê≥®Ëß£</p>
<h3 id="ÂÖÉÊ≥®Ëß£-Target"><a href="#ÂÖÉÊ≥®Ëß£-Target" class="headerlink" title="ÂÖÉÊ≥®Ëß£@Target"></a>ÂÖÉÊ≥®Ëß£@Target</h3><p>ÊèèËø∞ÊâÄ‰øÆÈ•∞ÁöÑÊ≥®Ëß£ÁöÑ‰ΩøÁî®ËåÉÂõ¥</p>
<ul>
<li>packages„ÄÅtypes( Á±ª„ÄÅÊé•Âè£„ÄÅÊûö‰∏æ„ÄÅAnnotationÁ±ªÂûã )</li>
<li>Á±ªÂûãÊàêÂëò(ÊñπÊ≥ï„ÄÅÊûÑÈÄ†ÊñπÊ≥ï„ÄÅÊàêÂëòÂèòÈáè„ÄÅÊûö‰∏æÂÄº)</li>
<li>ÊñπÊ≥ïÂèÇÊï∞ÂíåÊú¨Âú∞ÂèòÈáè(Â¶ÇÂæ™ÁéØÂèòÈáè„ÄÅcatchÂèÇÊï∞ )</li>
</ul>
<h3 id="ElementType"><a href="#ElementType" class="headerlink" title="ElementType"></a>ElementType</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ElementType</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">/** ÂèØ‰ΩúÁî®‰∫éÊú¨Âú∞Â±ÄÈÉ®ÂèòÈáè‰∏ä */</span></span><br><span class="line">    LOCAL_VARIABLE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** ÂèØ‰ΩúÁî®‰∫éÊ≥®Ëß£‰∏äÔºàÂÖÉÊ≥®Ëß£Ôºâ */</span></span><br><span class="line">    ANNOTATION_TYPE,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Type parameter declaration</span></span><br><span class="line"><span class="comment">     * ÂèØ‰ΩúÁî®‰∫éÊ≥õÂûãÁ±ªÁöÑÂÆûÂèÇ‰∏ä</span></span><br><span class="line"><span class="comment">     * ‰æãÂ¶ÇÔºöpublic class Demo &lt;<span class="doctag">@TypeParamterAnnotation</span> T&gt;{}</span></span><br><span class="line"><span class="comment">     * Âú® Spring‰∏≠ÁöÑ <span class="doctag">@RequestParam</span> Â∞±ÊòØ‰ΩøÁî®ÁöÑËØ•Á±ªÂûã</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TYPE_PARAMETER,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Use of a type</span></span><br><span class="line"><span class="comment">     * ËÉΩ‰ΩúÁî®Âú®‰ªª‰ΩïÁ±ªÂûã‰πã‰∏ä</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TYPE_USE</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÂÖÉÊ≥®Ëß£-Retention"><a href="#ÂÖÉÊ≥®Ëß£-Retention" class="headerlink" title="ÂÖÉÊ≥®Ëß£@Retention"></a>ÂÖÉÊ≥®Ëß£@Retention</h3><ul>
<li>Ê†áÊ≥®Ê≥®Ëß£Ë¢´‰øùÁïôÊó∂Èó¥ÁöÑÈïøÁü≠</li>
<li>Áî®‰∫éÂÆö‰πâÊ≥®Ëß£ÁöÑÁîüÂëΩÂë®Êúü</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.ANNOTATION_TYPE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Retention {</span><br><span class="line">    RetentionPolicy <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">RetentionPolicy</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ‰øùÁïôÂú®Ê∫ê‰ª£Á†ÅÔºå‰∏ç‰øùÁïôÂú®ÁºñËØëÂêéÁöÑÂ≠óËäÇÁ†ÅÊñá‰ª∂‰∏≠</span></span><br><span class="line"><span class="comment">     * Annotations are to be discarded by the compiler.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SOURCE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Â≠óËäÇÁ†ÅÊñá‰ª∂‰∏≠‰πü‰øùÁïôÊ≥®Ëß£</span></span><br><span class="line"><span class="comment">     * Annotations are to be recorded in the class file by the compiler</span></span><br><span class="line"><span class="comment">     * but need not be retained by the VM at run time.  This is the default</span></span><br><span class="line"><span class="comment">     * behavior.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    CLASS,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Âú®ËøêË°åÊó∂‰øùÁïôÊ≥®Ëß£ÔºåÂ¶ÇSpring‰∏≠ÁöÑ<span class="doctag">@Autowired</span>ÔºåÂèØ‰ª•ÈÄöËøáÂèçÂ∞ÑÊù•Ëé∑Âèñ</span></span><br><span class="line"><span class="comment">     * Annotations are to be recorded in the class file by the compiler and</span></span><br><span class="line"><span class="comment">     * retained by the VM at run time, so they may be read reflectively.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> java.lang.reflect.AnnotatedElement</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    RUNTIME</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Ëá™ÂÆö‰πâÊ≥®Ëß£"><a href="#Ëá™ÂÆö‰πâÊ≥®Ëß£" class="headerlink" title="Ëá™ÂÆö‰πâÊ≥®Ëß£"></a>Ëá™ÂÆö‰πâÊ≥®Ëß£</h2><p>Ëá™ÂÆö‰πâÊ≥®Ëß£‰∏çÂÖÅËÆ∏‰ª•Á±ªÁöÑÂΩ¢ÂºèÂÆûÁé∞ÊàñÁªßÊâøÊé•Âè£ÔºåÂ±ûÊÄßÁöÑËÆøÈóÆ‰øÆÈ•∞Á¨¶Âè™ËÉΩÂÆö‰πâÊàêpublicÁ±ªÂûã„ÄÇ</p>
<p><img src="/p/6ba397bc/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3.png" alt="image-20210416093546063"></p>
<p>ÂàõÂª∫‰∏Ä‰∏™Ê≥®Ëß£ÔºåÂÆö‰πâÂèØ‰ΩúÁî®‰∫éÁ±ª„ÄÅÊñπÊ≥ï„ÄÅÂ≠óÊÆµ‰∏ä„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Target({ElementType.TYPE, ElementType.FIELD, ElementType.METHOD})</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> TestAnnotation {</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">desc</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">age</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] language();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ΩøÁî®ËØ•Ê≥®Ëß£Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TestAnnotation(name = "Áî®Êà∑bo", desc = "Áî®Êà∑ÁöÑÂÆû‰ΩìÁ±ªÊèèËø∞‰ø°ÊÅØ", language = {"Java", "C++", "Go"})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> {</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TestAnnotation(name = "Áî®Êà∑Âêç", desc = "Áî®Êà∑ÂèØÁî®‰∫éÁôªÂΩïËÆ§ËØÅÁöÑË¥¶Âè∑", language = "Java")</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ΩøÁî®ÂèçÂ∞ÑÂÆåÊàêËøõË°åËøêË°åÊó∂Âä®ÊÄÅÂ§ÑÁêÜÔºö</p>
<ul>
<li>Âú®ClassÁ±ª‰∏≠ÔºåClassÁ±ªÂÆûÁé∞‰∫ÜAnnotatedElement Êé•Âè£ÔºåÊèê‰æõ‰∫ÜËé∑ÂèñÊ≥®Ëß£ÁöÑ‰∏ÄÁ≥ªÂàó‰ø°ÊÅØ</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">parseTypeAnnotation</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException {</span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">"com.demo.hello.entity.bo.User"</span>);</span><br><span class="line">    <span class="comment">// Ëé∑ÂèñÁ±ª‰∏äÁöÑTestAnnotationÊ≥®Ëß£</span></span><br><span class="line">    Annotation[] annotations = clazz.getAnnotations();</span><br><span class="line">    <span class="keyword">for</span> (Annotation annotation : annotations) {</span><br><span class="line">        <span class="type">TestAnnotation</span> <span class="variable">testAnnotation</span> <span class="operator">=</span> (TestAnnotation) annotation;</span><br><span class="line">        System.out.println(testAnnotation);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Ëé∑ÂèñÂ≠óÊÆµ‰∏äÁöÑTestAnnotationÊ≥®Ëß£</span></span><br><span class="line">    Field[] fields = clazz.getDeclaredFields();</span><br><span class="line">    <span class="keyword">for</span> (Field field : fields) {</span><br><span class="line">        <span class="comment">// Ëé∑ÂèñÂ≠óÊÆµ‰∏äÊòØÂê¶ÊúâTestAnnotationÊ≥®Ëß£</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">present</span> <span class="operator">=</span> field.isAnnotationPresent(TestAnnotation.class);</span><br><span class="line">        <span class="keyword">if</span> (present){</span><br><span class="line">            <span class="type">TestAnnotation</span> <span class="variable">testAnnotation</span> <span class="operator">=</span> field.getAnnotation(TestAnnotation.class);</span><br><span class="line">            System.out.println(testAnnotation);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÁºñËØëÊó∂ÔºåÊ∑ªÂä†ÂèÇÊï∞ -Djdk.proxy.proxyGenerator.saveGeneratedFiles=true Áî®‰∫éÊü•ÁúãÂä®ÊÄÅ‰ª£ÁêÜÁöÑ‰∏≠Èó¥‰ª£ÁêÜÁöÑÂØπË±°„ÄÇ</p>
<p>Âú®ËøΩÂä† -XX:+traceClassLoading Ë∑üË∏™Á±ªÂä†ËΩΩ„ÄÇ</p>
<h2 id="Ê≥®Ëß£ÁöÑÂ∑•‰ΩúÂéüÁêÜ"><a href="#Ê≥®Ëß£ÁöÑÂ∑•‰ΩúÂéüÁêÜ" class="headerlink" title="Ê≥®Ëß£ÁöÑÂ∑•‰ΩúÂéüÁêÜ"></a>Ê≥®Ëß£ÁöÑÂ∑•‰ΩúÂéüÁêÜ</h2><p>1„ÄÅÈÄöËøáÈîÆÂÄºÂØπÁöÑÂΩ¢Âºè‰∏∫Ê≥®Ëß£Â±ûÊÄßËµãÂÄº„ÄÇ</p>
<p>2„ÄÅÁºñËØëÂô®Ê£ÄÊü•Ê≥®Ëß£ÁöÑ‰ΩøÁî®ËåÉÂõ¥,Â∞ÜÊ≥®Ëß£‰ø°ÊÅØÂÜôÂÖ•ÂÖÉÁ¥†Â±ûÊÄßË°®„ÄÇ</p>
<p>3„ÄÅËøêË°åÊó∂JVMÂ∞ÜÔºàÂçï‰∏™Á±ª‰∏≠ÁöÑÔºâRUNTIMEÁöÑÊâÄÊúâÊ≥®Ëß£Â±ûÊÄßÂèñÂá∫Âπ∂ÊúÄÁªàÂ≠òÂÖ•mapÈáå„ÄÇ</p>
<p>4„ÄÅÂàõÂª∫AnnotationInvocationHandlerÂÆû‰æãÂπ∂‰º†ÂÖ•ÂâçÈù¢ÁöÑmap„ÄÇ</p>
<p>5„ÄÅJVM‰ΩøÁî®JDKÂä®ÊÄÅ‰ª£ÁêÜ‰∏∫Ê≥®Ëß£ÁîüÊàê‰ª£ÁêÜÁ±ª,Âπ∂ÂàùÂßãÂåñÂ§ÑÁêÜÂô®„ÄÇ</p>
<p>6„ÄÅË∞ÉÁî®invokeÊñπÊ≥ï,ÈÄöËøá‰º†ÂÖ•ÊñπÊ≥ïÂêçËøîÂõûÊ≥®Ëß£ÂØπÂ∫îÁöÑÂ±ûÊÄßÂÄº„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ArrayList &amp; LinkedList</title>
    <url>/p/f284337e.html</url>
    <content><![CDATA[<html><head></head><body><p>Êú¨ÊñáËÆ∞ÂΩïArrayList &amp; LinkedListÊ∫êÁ†ÅËß£ÊûêÔºåÂü∫‰∫éJDK1.8„ÄÇ</p>
<h2 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h2><p>ArrayListÂÆûÁé∞‰∫ÜListÊé•Âè£ÁöÑÊâÄÊúâÊñπÊ≥ïÔºåÂèØ‰ª•ÁúãÊàêÊòØ‚ÄúÈïøÂ∫¶ÂèØË∞ÉËäÇÁöÑÊï∞ÁªÑ‚ÄùÔºåÂèØ‰ª•ÂåÖÂê´‰ªª‰ΩïÁ±ªÂûãÊï∞ÊçÆÔºàÂåÖÊã¨nullÔºåÂèØÈáçÂ§çÔºâ„ÄÇArrayListÂ§ß‰ΩìÂíåVector‰∏ÄËá¥ÔºåÂîØ‰∏ÄÂå∫Âà´ÊòØArrayListÈùûÁ∫øÁ®ãÂÆâÂÖ®ÔºåVectorÁ∫øÁ®ãÂÆâÂÖ®Ôºå‰ΩÜVectorÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ‰ª£‰ª∑ËæÉÂ§ßÔºåÊé®Ëçê‰ΩøÁî®CopyOnWriteArrayListÔºåÂêéÈù¢ÊñáÁ´†ÂÜçÂÅöËÆ∞ÂΩï„ÄÇ</p>
<h3 id="Á±ªÁªìÊûÑ"><a href="#Á±ªÁªìÊûÑ" class="headerlink" title="Á±ªÁªìÊûÑ"></a>Á±ªÁªìÊûÑ</h3><p>ArrayListÁ±ªÂ±ÇÁ∫ßÂÖ≥Á≥ªÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="/p/f284337e/QQ20210219-143407@2x.png" alt="QQ20210219-143407@2x"></p>
<p>ArrayListÈ¢ùÂ§ñÂÆûÁé∞‰∫ÜRandomAccessÊé•Âè£ÔºåÂÖ≥‰∫éRandomAccessÊé•Âè£ÁöÑ‰ΩúÁî®‰∏ãÈù¢ÂÜçÂÅöËÆ®ËÆ∫„ÄÇ</p>
<p>ArrayListÁ±ª‰∏ªË¶ÅÂåÖÂê´Â¶Ç‰∏ã‰∏§‰∏™ÊàêÂëòÂèòÈáèÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt;</span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">transient</span> Object[] elementData;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    ......</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>elementData‰∏∫ObjectÁ±ªÂûãÊï∞ÁªÑÔºåÁî®‰∫éÂ≠òÊîæArrayListÊï∞ÊçÆÔºõsizeË°®Á§∫Êï∞ÁªÑÂÖÉÁ¥†‰∏™Êï∞ÔºàÂπ∂ÈùûÊï∞ÁªÑÂÆπÈáèÔºâ„ÄÇ</p>
<p>ArrayListÁ±ªËøòÂåÖÂê´‰∫Ü‰∏Ä‰∫õÂ∏∏ÈáèÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt;</span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span><br><span class="line">{</span><br><span class="line">    <span class="comment">// Êï∞ÁªÑÈªòËÆ§ÂàùÂßãÂåñÂÆπÈáè‰∏∫10</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="comment">// Ë°®Á§∫Á©∫Êï∞ÁªÑ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] EMPTY_ELEMENTDATA = {};</span><br><span class="line">    <span class="comment">// ‰πüÊòØÁ©∫Êï∞ÁªÑÔºåÂíåEMPTY_ELEMENTDATAÂå∫ÂàÜÂºÄ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÊñπÊ≥ïËß£Êûê"><a href="#ÊñπÊ≥ïËß£Êûê" class="headerlink" title="ÊñπÊ≥ïËß£Êûê"></a>ÊñπÊ≥ïËß£Êûê</h3><h4 id="Áü•ËØÜÂÇ®Â§á"><a href="#Áü•ËØÜÂÇ®Â§á" class="headerlink" title="Áü•ËØÜÂÇ®Â§á"></a>Áü•ËØÜÂÇ®Â§á</h4><p>ArraysÁ±ªÁöÑ<code>copyOf(U[] original, int newLength, Class&lt;? extends T[]&gt; newType)</code>ÊñπÊ≥ïÁî®‰∫éÂ§çÂà∂ÊåáÂÆöÊï∞ÁªÑoriginalÂà∞Êñ∞Êï∞ÁªÑÔºåÊñ∞Êï∞ÁªÑÁöÑÈïøÂ∫¶‰∏∫newLengthÔºåÊñ∞Êï∞ÁªÑÂÖÉÁ¥†Á±ªÂûã‰∏∫newType„ÄÇ</p>
<ol>
<li>Â¶ÇÊûúÊñ∞Êï∞ÁªÑÁöÑÈïøÂ∫¶Â§ß‰∫éÊóßÊï∞ÁªÑÔºåÈÇ£‰πàÂ§öÂá∫ÁöÑÈÇ£ÈÉ®ÂàÜÁî®nullÂ°´ÂÖÖÔºõ</li>
<li>Â¶ÇÊûúÊñ∞Êï∞ÁªÑÁöÑÈïøÂ∫¶Â∞è‰∫éÊóßÊï∞ÁªÑÔºåÈÇ£‰πàÂ∞ëÁöÑÈÇ£ÈÉ®ÂàÜÁõ¥Êé•Êà™ÂèñÊéâ„ÄÇ</li>
</ol>
<p>‰∏æ‰∏§‰∏™‰æãÂ≠êÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Long[] array1 = <span class="keyword">new</span> <span class="title class_">Long</span>[]{<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">3L</span>};</span><br><span class="line">Object[] array2 = Arrays.copyOf(array1, <span class="number">5</span>, Object[].class);</span><br><span class="line">System.out.println(Arrays.toString(array2)); <span class="comment">// [1, 2, 3, null, null]</span></span><br><span class="line"></span><br><span class="line">Object[] array3 = Arrays.copyOf(array1, <span class="number">1</span>, Object[].class);</span><br><span class="line">System.out.println(Arrays.toString(array3)); <span class="comment">// [1]</span></span><br></pre></td></tr></tbody></table></figure>



<p>ÈáçËΩΩÊñπÊ≥ï<code>copyOf(T[] original, int newLength)</code>Áî®‰∫éÂ§çÂà∂ÊåáÂÆöÊï∞ÁªÑoriginalÂà∞Êñ∞Êï∞ÁªÑÔºåÊñ∞Êï∞ÁªÑÁöÑÈïøÂ∫¶‰∏∫newLengthÔºåÊñ∞Êï∞ÁªÑÂÖÉÁ¥†Á±ªÂûãÂíåÊóßÊï∞ÁªÑ‰∏ÄËá¥„ÄÇ</p>
<p><code>copyOf</code>ÊñπÊ≥ïÂÜÖÈÉ®Ë∞ÉÁî®SystemÁ±ªÁöÑnativeÊñπÊ≥ï<code>arraycopy(Object src, int srcPos,Object dest, int destPos, int length)</code>Ôºö</p>
<ol>
<li><code>src</code>ÔºöÈúÄË¶ÅË¢´Êã∑Ë¥ùÁöÑÊóßÊï∞ÁªÑÔºõ</li>
<li><code>srcPos</code>ÔºöÊóßÊï∞ÁªÑÂºÄÂßãÊã∑Ë¥ùÁöÑËµ∑Âßã‰ΩçÁΩÆÔºõ</li>
<li><code>dest</code>ÔºöÊã∑Ë¥ùÁõÆÊ†áÊï∞ÁªÑÔºõ</li>
<li><code>destPos</code>ÔºöÁõÆÊ†áÊï∞ÁªÑÁöÑËµ∑ÂßãÊã∑Ë¥ù‰ΩçÁΩÆÔºõ</li>
<li><code>length</code>ÔºöÊã∑Ë¥ùÁöÑÈïøÂ∫¶„ÄÇ</li>
</ol>
<p>‰∏æ‰æãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Long[] array1 = <span class="keyword">new</span> <span class="title class_">Long</span>[]{<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">3L</span>};</span><br><span class="line">Object[] array2 = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">5</span>];</span><br><span class="line">System.arraycopy(array1, <span class="number">0</span>, array2, <span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">System.out.println(Arrays.toString(array2)); <span class="comment">// [1, 2, 3, null, null]</span></span><br></pre></td></tr></tbody></table></figure>

<p>ÊåáÂÆö‰ΩçÁΩÆÊèíÂÖ•ÂÖÉÁ¥†Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Long[] array1 = <span class="keyword">new</span> <span class="title class_">Long</span>[]{<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">3L</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>};</span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">System.arraycopy(array1, index, array1, index + <span class="number">1</span>, <span class="number">3</span> - index);</span><br><span class="line">array1[index] = <span class="number">0L</span>;</span><br><span class="line">System.out.println(Arrays.toString(array1)); <span class="comment">// [1, 0, 2, 3, null, null]</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="ÊûÑÈÄ†ÂáΩÊï∞"><a href="#ÊûÑÈÄ†ÂáΩÊï∞" class="headerlink" title="ÊûÑÈÄ†ÂáΩÊï∞"></a>ÊûÑÈÄ†ÂáΩÊï∞</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">(<span class="type">int</span> initialCapacity)</span> {</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; <span class="number">0</span>) {</span><br><span class="line">        <span class="built_in">this</span>.elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) {</span><br><span class="line">        <span class="built_in">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">"Illegal Capacity: "</span>+</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂàõÂª∫ÂÆπÈáèÂ§ßÂ∞è‰∏∫initialCapacityÁöÑArrayListÔºåÂ¶ÇÊûúinitialCapacityÂ∞è‰∫é0ÔºåÂàôÊäõÂá∫IllegalArgumentExceptionÂºÇÂ∏∏ÔºõÂ¶ÇÊûúinitialCapacity‰∏∫0ÔºåÂàôelementData‰∏∫EMPTY_ELEMENTDATA„ÄÇ</p>
<p><code>public ArrayList()</code>Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">()</span> {</span><br><span class="line">    <span class="built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Á©∫ÂèÇÊûÑÈÄ†ÂáΩÊï∞ÔºåelementData‰∏∫DEFAULTCAPACITY_EMPTY_ELEMENTDATA„ÄÇ</p>
<p><code>public ArrayList(Collection&lt;? extends E&gt; c)</code>Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> {</span><br><span class="line">    elementData = c.toArray();</span><br><span class="line">    <span class="keyword">if</span> ((size = elementData.length) != <span class="number">0</span>) {</span><br><span class="line">        <span class="comment">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></span><br><span class="line">        <span class="keyword">if</span> (elementData.getClass() != Object[].class)</span><br><span class="line">            elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">// replace with empty array.</span></span><br><span class="line">        <span class="built_in">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂàõÂª∫‰∏Ä‰∏™ÂåÖÂê´ÊåáÂÆöÈõÜÂêàcÊï∞ÊçÆÁöÑArrayList„ÄÇ‰∏äÈù¢‰∏∫‰ªÄ‰πàË¶ÅÂ§öÊ≠§‰∏Ä‰∏æ‰ΩøÁî®<code>Arrays.copyOf(elementData, size, Object[].class)</code>Â§çÂà∂‰∏ÄÈÅçÊï∞ÁªÑÂë¢ÔºüËøôÊòØÂõ†‰∏∫Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãË∞ÉÁî®ÈõÜÂêàÁöÑtoArray()ÊñπÊ≥ïËøîÂõûÁöÑÁ±ªÂûãÂπ∂‰∏çÊòØObject[].classÔºåÊØîÂ¶ÇÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Long[] array1 = {<span class="number">1L</span>, <span class="number">2L</span>};</span><br><span class="line">List&lt;Long&gt; list1 = Arrays.asList(array1);</span><br><span class="line">Object[] array2 = list1.toArray();</span><br><span class="line">System.out.println(array2.getClass() == Object[].class); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">List&lt;Long&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">System.out.println(list2.toArray().getClass() == Object[].class); <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h4 id="add-E-e"><a href="#add-E-e" class="headerlink" title="add(E e)"></a>add(E e)</h4><p><code>add(E e)</code>Áî®‰∫éÂ∞æÈÉ®Ê∑ªÂä†ÂÖÉÁ¥†Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> {</span><br><span class="line">    <span class="comment">// Áî®‰∫éÁ°ÆÂÆöÊï∞ÁªÑÂÆπÈáè</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);</span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÅáÂ¶ÇÁé∞Âú®Êàë‰ª¨ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÂàõÂª∫‰∫Ü‰∏Ä‰∏™ArrayListÂÆû‰æãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">"hello"</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÜÖÈÉ®ËøáÁ®ãÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> {</span><br><span class="line">    <span class="comment">// Áî®‰∫éÁ°ÆÂÆöÊï∞ÁªÑÂÆπÈáèÔºåe=helloÔºåsize=0</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// Êú´Â∞æÊ∑ªÂä†ÂÖÉÁ¥†ÔºåÁÑ∂ÂêésizeÈÄíÂ¢û1</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureCapacityInternal</span><span class="params">(<span class="type">int</span> minCapacity)</span> { <span class="comment">// minCapacity=1,elementData={}</span></span><br><span class="line">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">calculateCapacity</span><span class="params">(Object[] elementData, <span class="type">int</span> minCapacity)</span> {</span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {</span><br><span class="line">        <span class="comment">// DEFAULT_CAPACITY=10ÔºåminCapacity=1ÔºåÊïÖËøîÂõû10</span></span><br><span class="line">        <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureExplicitCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> { <span class="comment">// minCapacity=10</span></span><br><span class="line">    modCount++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// minCapacity=10ÔºåelementData.length=0ÔºåÊâÄ‰ª•Ë∞ÉÁî®growÊñπÊ≥ïÊâ©ÂÆπ</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> { <span class="comment">//minCapacity=10</span></span><br><span class="line">    <span class="comment">// oldCapacity=0</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">    <span class="comment">// newCapacity‰∏∫oldCapacityÁöÑ1.5ÂÄçÔºåËøôÈáå‰∏∫0</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// newCapacity=0ÔºåminCapacity=10ÔºåÊâÄ‰ª•ËØ•Êù°‰ª∂ÊàêÁ´ã</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="comment">// newCapacity=10</span></span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// Â§çÂà∂Âà∞Êñ∞Êï∞ÁªÑÔºåÊï∞ÁªÑÂÆπÈáè‰∏∫10</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hugeCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> {</span><br><span class="line">    <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) <span class="comment">// overflow</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">OutOfMemoryError</span>();</span><br><span class="line">    <span class="comment">// MAX_ARRAY_SIZEÂ∏∏ÈáèÂÄº‰∏∫Integer.MAX_VALUE - 8ÔºåÈÄöËøá</span></span><br><span class="line">    <span class="comment">// ËøôÊÆµÈÄªËæëÊàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÔºåArrayListÊúÄÂ§ßÂÆπÈáè‰∏∫Integer.MAX_VALUE</span></span><br><span class="line">    <span class="keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class="line">        Integer.MAX_VALUE :</span><br><span class="line">        MAX_ARRAY_SIZE;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÈÄöËøá‰∏äÈù¢Ê∫êÁ†ÅÂàÜÊûêÊàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÔºö</p>
<ol>
<li>‰ªª‰Ωï‰∏Ä‰∏™Á©∫ÁöÑArrayListÂú®Ê∑ªÂä†Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†Êó∂ÔºåÂÜÖÈÉ®Êï∞ÁªÑÂÆπÈáèÂ∞ÜË¢´Êâ©ÂÆπ‰∏∫10Ôºõ</li>
<li>Êâ©ÂÆπÊó∂ÔºånewCapacity‰∏∫oldCapacityÁöÑ1.5ÂÄçÔºõ</li>
<li>Êï∞ÁªÑÂÆπÈáèÊúÄÂ§ß‰∏∫Integer.MAX_VALUEÔºõ</li>
<li>Â∞æÈÉ®Ê∑ªÂä†ÂÖÉÁ¥†‰∏çÁî®ÁßªÂä®‰ªª‰ΩïÂÖÉÁ¥†ÔºåÊâÄ‰ª•ÈÄüÂ∫¶Âø´„ÄÇ</li>
</ol>
<h4 id="add-int-index-E-element"><a href="#add-int-index-E-element" class="headerlink" title="add(int index, E element)"></a>add(int index, E element)</h4><p><code>add(int index, E element)</code>Áî®‰∫éÂú®ÊåáÂÆö‰ΩçÁΩÆÊ∑ªÂä†ÂÖÉÁ¥†Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index, E element)</span> {</span><br><span class="line">    <span class="comment">// ‰∏ãÊ†áÊ£ÄÊü•</span></span><br><span class="line">    rangeCheckForAdd(index);</span><br><span class="line">    <span class="comment">// Á°ÆÂÆöÊï∞ÁªÑÂÆπÈáèÔºåÂíå‰∏äÈù¢add(E e)ÊñπÊ≥ï‰ªãÁªçÁöÑ‰∏ÄËá¥</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// Â∞ÜÂéüÊù•indexÂêéÈù¢ÁöÑÊâÄÊúâÂÖÉÁ¥†ÂæÄÂêéÈù¢ÁßªÂä®‰∏Ä‰∏™‰ΩçÁΩÆ</span></span><br><span class="line">    System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>,</span><br><span class="line">                     size - index);</span><br><span class="line">    <span class="comment">// indexÂ§ÑÊîæÂÖ•Êñ∞ÂÖÉÁ¥†</span></span><br><span class="line">    elementData[index] = element;</span><br><span class="line">    <span class="comment">// sizeÈÄíÂ¢û</span></span><br><span class="line">    size++;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">rangeCheckForAdd</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    <span class="comment">// ‰∏ãÊ†áÊØîsizeÂ§ßÊàñËÄÖ‰∏ãÊ†áÂ∞è‰∫é0ÔºåÈÉΩ‰ºöÊäõÂá∫‰∏ãÊ†áË∂äÁïåÂºÇÂ∏∏</span></span><br><span class="line">    <span class="keyword">if</span> (index &gt; size || index &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(outOfBoundsMsg(index));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËøôÈáåÊ∂âÂèäÂà∞ÂÖÉÁ¥†ÁßªÂä®ÔºåÊâÄ‰ª•ÈÄüÂ∫¶ËæÉÊÖ¢„ÄÇ</p>
<h4 id="get-int-index"><a href="#get-int-index" class="headerlink" title="get(int index)"></a>get(int index)</h4><p><code>get(int index)</code>Ëé∑ÂèñÊåáÂÆö‰ΩçÁΩÆÂÖÉÁ¥†Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    <span class="comment">// ‰∏ãÊ†áÂêàÊ≥ïÊÄßÊ£ÄÊü•</span></span><br><span class="line">    rangeCheck(index);</span><br><span class="line">    <span class="comment">// Áõ¥Êé•ËøîÂõûÊï∞ÁªÑÊåáÂÆö‰ΩçÁΩÆÂÖÉÁ¥†</span></span><br><span class="line">    <span class="keyword">return</span> elementData(index);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">E <span class="title function_">elementData</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    <span class="keyword">return</span> (E) elementData[index];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>get</code>ÊñπÊ≥ïÁõ¥Êé•ËøîÂõûÊï∞ÁªÑÊåáÂÆö‰∏ãÊ†áÂÖÉÁ¥†ÔºåÈÄüÂ∫¶ÈùûÂ∏∏Âø´„ÄÇ</p>
<h4 id="set-int-index-E-element"><a href="#set-int-index-E-element" class="headerlink" title="set(int index, E element)"></a>set(int index, E element)</h4><p><code>set(int index, E element)</code>ËÆæÁΩÆÊåáÂÆö‰ΩçÁΩÆÂÖÉÁ¥†‰∏∫ÊåáÂÆöÂÄºÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">set</span><span class="params">(<span class="type">int</span> index, E element)</span> {</span><br><span class="line">    <span class="comment">// ‰∏ãÊ†áÂêàÊ≥ïÊÄßÊ£ÄÊü•</span></span><br><span class="line">    rangeCheck(index);</span><br><span class="line">    <span class="comment">// Ê†πÊçÆ‰∏ãÊ†áËé∑ÂèñÊóßÂÄº</span></span><br><span class="line">    <span class="type">E</span> <span class="variable">oldValue</span> <span class="operator">=</span> elementData(index);</span><br><span class="line">    <span class="comment">// ËÆæÁΩÆÊñ∞ÂÄº</span></span><br><span class="line">    elementData[index] = element;</span><br><span class="line">    <span class="comment">// ËøîÂõûÊóßÂÄº</span></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>set</code>ÊñπÊ≥ï‰∏çÊ∂âÂèäÂÖÉÁ¥†ÁßªÂä®ÂíåÈÅçÂéÜÔºåÊâÄ‰ª•ÈÄüÂ∫¶Âø´„ÄÇ</p>
<h4 id="remove-int-index"><a href="#remove-int-index" class="headerlink" title="remove(int index)"></a>remove(int index)</h4><p><code>remove(int index)</code>Âà†Èô§ÊåáÂÆö‰ΩçÁΩÆÂÖÉÁ¥†Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    rangeCheck(index);</span><br><span class="line"></span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">// Ëé∑ÂèñÊåáÂÆö‰ΩçÁΩÆÂÖÉÁ¥†ÔºàÈúÄË¶ÅË¢´Âà†Èô§ÁöÑÂÖÉÁ¥†Ôºâ</span></span><br><span class="line">    <span class="type">E</span> <span class="variable">oldValue</span> <span class="operator">=</span> elementData(index);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="comment">// Áõ¥Êé•Â∞ÜindexÂêéÈù¢ÁöÑÂÖÉÁ¥†ÂæÄÂâçÁßªÂä®‰∏Ä‰ΩçÔºåË¶ÜÁõñindexÂ§ÑÁöÑÂÖÉÁ¥†</span></span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                         numMoved);</span><br><span class="line">    elementData[--size] = <span class="literal">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line">    <span class="comment">// ËøîÂõûË¢´Âà†Èô§ÁöÑÂÖÉ</span></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏äËø∞ÊñπÊ≥ïÊ∂âÂèäÂà∞ÂÖÉÁ¥†ÁßªÂä®ÔºåÊâÄ‰ª•ÊïàÁéá‰πü‰∏çÈ´ò„ÄÇ</p>
<h4 id="remove-Object-o"><a href="#remove-Object-o" class="headerlink" title="remove(Object o)"></a>remove(Object o)</h4><p><code>remove(Object o)</code>Âà†Èô§ÊåáÂÆöÂÖÉÁ¥†Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ÈÅçÂéÜÊï∞ÁªÑÔºåÊâæÂà∞Á¨¨‰∏Ä‰∏™ÁõÆÊ†áÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÂà†Èô§</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Object o)</span> {</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[index] == <span class="literal">null</span>) {</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[index])) {</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// ÈÄªËæëÂíåremove‰∏ÄËá¥ÔºåÈÉΩÊòØÂ∞ÜindexÂêéÈù¢ÁöÑÂÖÉÁ¥†ÂæÄÂâçÁßªÂä®‰∏Ä‰ΩçÔºåË¶ÜÁõñindexÂ§ÑÁöÑÂÖÉÁ¥†</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fastRemove</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                         numMoved);</span><br><span class="line">    elementData[--size] = <span class="literal">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊñπÊ≥ïÊ∂âÂèäÂà∞Êï∞ÁªÑÈÅçÂéÜÂíåÂÖÉÁ¥†ÁßªÂä®ÔºåÊïàÁéá‰πü‰∏çÈ´ò„ÄÇ</p>
<h4 id="trimToSize"><a href="#trimToSize" class="headerlink" title="trimToSize()"></a>trimToSize()</h4><p><code>trimToSize()</code>Ê∫êÁ†ÅÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">public void trimToSize() {</span><br><span class="line">    modCount++;</span><br><span class="line">    if (size &lt; elementData.length) {</span><br><span class="line">        elementData = (size == 0)</span><br><span class="line">          ? EMPTY_ELEMENTDATA</span><br><span class="line">          : Arrays.copyOf(elementData, size);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËØ•ÊñπÊ≥ïÁî®‰∫éÂ∞ÜÊï∞ÁªÑÂÆπÈáèË∞ÉÊï¥‰∏∫ÂÆûÈôÖÂÖÉÁ¥†‰∏™Êï∞Â§ßÂ∞èÔºåÂΩì‰∏Ä‰∏™ArrayListÂÖÉÁ¥†‰∏™Êï∞‰∏ç‰ºöÂèëÁîüÊîπÂèòÊó∂ÔºåÂèØ‰ª•Ë∞ÉÁî®ËØ•ÊñπÊ≥ïÂáèÂ∞ëÂÜÖÂ≠òÂç†Áî®„ÄÇ</p>
<blockquote>
<p>ÂÖ∂‰ªñÊñπÊ≥ïÂèØ‰ª•Ëá™Â∑±ÈòÖËØªArrayListÊ∫êÁ†ÅÔºåÊ≠§Â§ñÂú®Ê∂âÂèäÂ¢ûÂà†ÊîπÁöÑÊñπÊ≥ïÈáåÔºåÊàë‰ª¨ÈÉΩÁúãÂà∞‰∫ÜmodCount++Êìç‰ΩúÔºåÂíå‰πãÂâç‰ªãÁªçHashMapÊ∫êÁ†ÅÊó∂‰∏ÄËá¥ÔºåÁî®‰∫éÂø´ÈÄüÂ§±Ë¥•„ÄÇ</p>
</blockquote>
<h2 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h2><h3 id="Á±ªÁªìÊûÑ-1"><a href="#Á±ªÁªìÊûÑ-1" class="headerlink" title="Á±ªÁªìÊûÑ"></a>Á±ªÁªìÊûÑ</h3><p>LinkedListÂ∫ïÂ±ÇÈááÁî®ÂèåÂêëÈìæË°®ÁªìÊûÑÂ≠òÂÇ®Êï∞ÊçÆÔºåÂÖÅËÆ∏ÈáçÂ§çÊï∞ÊçÆÂíånullÂÄºÔºåÈïøÂ∫¶Ê≤°ÊúâÈôêÂà∂Ôºö</p>
<p><img src="/p/f284337e/QQ20210220-112151@2x.png" alt="QQ20210220-112151@2x"></p>
<p>ÊØè‰∏™ËäÇÁÇπÁî®ÂÜÖÈÉ®Á±ªNodeË°®Á§∫Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; {</span><br><span class="line">    E item;</span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) {</span><br><span class="line">        <span class="built_in">this</span>.item = element;</span><br><span class="line">        <span class="built_in">this</span>.next = next;</span><br><span class="line">        <span class="built_in">this</span>.prev = prev;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>NodeËäÇÁÇπÂåÖÂê´itemÔºàÂ≠òÂÇ®Êï∞ÊçÆÔºâÔºånextÔºàÂêéÁªßËäÇÁÇπÔºâÂíåprevÔºàÂâçÁªßËäÇÁÇπÔºâ„ÄÇÊï∞ÁªÑÂÜÖÂ≠òÂú∞ÂùÄÂøÖÈ°ªËøûÁª≠ÔºåËÄåÈìæË°®Â∞±Ê≤°ÊúâËøô‰∏™ÈôêÂà∂‰∫ÜÔºåNodeÂèØ‰ª•ÂàÜÂ∏É‰∫éÂêÑ‰∏™ÂÜÖÂ≠òÂú∞ÂùÄÔºåÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂÖ≥Á≥ªÈÄöËøáprevÂíånextÁª¥Êä§„ÄÇ</p>
<p>LinkedListÁ±ªÂÖ≥Á≥ªÂõæÔºö</p>
<p><img src="/p/f284337e/QQ20210220-112546@2x.png" alt="QQ20210220-112546@2x"></p>
<p>ÂèØ‰ª•ÁúãÂà∞LinkedListÁ±ªÂπ∂Ê≤°ÊúâÂÆûÁé∞RandomAccessÊé•Âè£ÔºåÈ¢ùÂ§ñÂÆûÁé∞‰∫ÜDequeÊé•Âè£ÔºåÊâÄ‰ª•ÂåÖÂê´‰∏Ä‰∫õÈòüÂàóÊñπÊ≥ï„ÄÇ</p>
<p>LinkedListÂåÖÂê´Â¶Ç‰∏ãÊàêÂëòÂèòÈáèÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ÂÖÉÁ¥†‰∏™Êï∞ÔºåÈªòËÆ§‰∏∫0</span></span><br><span class="line"><span class="keyword">transient</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Ë°®Á§∫Á¨¨‰∏Ä‰∏™ËäÇÁÇπÔºåÁ¨¨‰∏Ä‰∏™ËäÇÁÇπÂøÖÈ°ªÊª°Ë∂≥(first == null &amp;&amp; last == null) || (first.prev == null &amp;&amp; first.item != null)</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; first;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Ë°®Á§∫ÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÔºåÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÂøÖÈ°ªÊª°Ë∂≥(first == null &amp;&amp; last == null) || (last.next == null &amp;&amp; last.item != null)</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; last;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÊñπÊ≥ïËß£Êûê-1"><a href="#ÊñπÊ≥ïËß£Êûê-1" class="headerlink" title="ÊñπÊ≥ïËß£Êûê"></a>ÊñπÊ≥ïËß£Êûê</h3><h4 id="ÊûÑÈÄ†ÂáΩÊï∞-1"><a href="#ÊûÑÈÄ†ÂáΩÊï∞-1" class="headerlink" title="ÊûÑÈÄ†ÂáΩÊï∞"></a>ÊûÑÈÄ†ÂáΩÊï∞</h4><p><code>LinkedList()</code>Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedList</span><span class="params">()</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Á©∫ÂèÇÊûÑÈÄ†ÂáΩÊï∞ÔºåÈªòËÆ§size‰∏∫0ÔºåÊØèÊ¨°Ê∑ªÂä†Êñ∞ÂÖÉÁ¥†ÈÉΩË¶ÅÂàõÂª∫NodeËäÇÁÇπ„ÄÇ</p>
<p><code>LinkedList(Collection&lt;? extends E&gt; c)</code>Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> {</span><br><span class="line">    <span class="built_in">this</span>();</span><br><span class="line">    addAll(c);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addAll</span><span class="params">(Collection&lt;? extends E&gt; c)</span> {</span><br><span class="line">    <span class="keyword">return</span> addAll(size, c);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addAll</span><span class="params">(<span class="type">int</span> index, Collection&lt;? extends E&gt; c)</span> {</span><br><span class="line">    checkPositionIndex(index);</span><br><span class="line"></span><br><span class="line">    Object[] a = c.toArray();</span><br><span class="line">    <span class="type">int</span> <span class="variable">numNew</span> <span class="operator">=</span> a.length;</span><br><span class="line">    <span class="keyword">if</span> (numNew == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    Node&lt;E&gt; pred, succ;</span><br><span class="line">    <span class="keyword">if</span> (index == size) {</span><br><span class="line">        succ = <span class="literal">null</span>;</span><br><span class="line">        pred = last;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        succ = node(index);</span><br><span class="line">        pred = succ.prev;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Âæ™ÁéØÂàõÂª∫ËäÇÁÇπÔºåËÆæÁΩÆprevÔºånextÊåáÂêë</span></span><br><span class="line">    <span class="keyword">for</span> (Object o : a) {</span><br><span class="line">        <span class="meta">@SuppressWarnings("unchecked")</span> <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> (E) o;</span><br><span class="line">        Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(pred, e, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">if</span> (pred == <span class="literal">null</span>)</span><br><span class="line">            first = newNode;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            pred.next = newNode;</span><br><span class="line">        pred = newNode;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (succ == <span class="literal">null</span>) {</span><br><span class="line">        last = pred;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        pred.next = succ;</span><br><span class="line">        succ.prev = pred;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    size += numNew;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËØ•ÊûÑÈÄ†ÂáΩÊï∞Áî®‰∫éÂàõÂª∫LinkedListÔºåÂπ∂ÂæÄÈáåÊ∑ªÂä†ÊåáÂÆöÈõÜÂêàÂÖÉÁ¥†„ÄÇ</p>
<h4 id="add-int-index-E-element-1"><a href="#add-int-index-E-element-1" class="headerlink" title="add(int index, E element)"></a>add(int index, E element)</h4><p><code>add(int index, E element)</code>ÊåáÂÆö‰∏ãÊ†áÊèíÂÖ•ÂÖÉÁ¥†Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index, E element)</span> {</span><br><span class="line">    <span class="comment">// ‰∏ãÊ†áÂêàÊ≥ïÊÄßÊ£ÄÊü•</span></span><br><span class="line">    checkPositionIndex(index);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (index == size)</span><br><span class="line">        <span class="comment">// Â¶ÇÊûúÊèíÂÖ•‰∏ãÊ†áÁ≠â‰∫ésizeÔºåËØ¥ÊòéÊòØÂú®Â∞æÈÉ®ÊèíÂÖ•ÔºåÊâßË°åÂ∞æÈÉ®ÊèíÂÖ•Êìç‰Ωú</span></span><br><span class="line">        linkLast(element);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment">// Â¶ÇÊûú‰∏çÊòØÂ∞æÊèíÂÖ•ÔºåÂàôÂú®ÊåáÂÆö‰∏ãÊ†áËäÇÁÇπÂâçÊèíÂÖ•</span></span><br><span class="line">        linkBefore(element, node(index));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkPositionIndex</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    <span class="keyword">if</span> (!isPositionIndex(index))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(outOfBoundsMsg(index));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isPositionIndex</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    <span class="keyword">return</span> index &gt;= <span class="number">0</span> &amp;&amp; index &lt;= size;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">linkLast</span><span class="params">(E e)</span> {</span><br><span class="line">    <span class="comment">// Ëé∑ÂèñÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπ</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="comment">// ÂàõÂª∫‰∏Ä‰∏™Êñ∞ËäÇÁÇπÔºåprev‰∏∫ÂéüÈìæË°®ÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÔºånext‰∏∫null</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(l, e, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// Êõ¥Êñ∞last‰∏∫Êñ∞ËäÇÁÇπ</span></span><br><span class="line">    last = newNode;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="literal">null</span>)</span><br><span class="line">        <span class="comment">// Â¶ÇÊûúÂéüÈìæË°®ÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπ‰∏∫nullÔºåËØ¥ÊòéÂéüÈìæË°®Ê≤°ÊúâËäÇÁÇπÔºåÂ∞ÜÊñ∞ËäÇÁÇπËµãÁªôfirst</span></span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment">// Âê¶ÂàôÊõ¥Êñ∞ÂéüÈìæË°®ÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÁöÑnext‰∏∫Êñ∞ËäÇÁÇπ</span></span><br><span class="line">        l.next = newNode;</span><br><span class="line">    <span class="comment">// sizeÈÄíÂ¢û</span></span><br><span class="line">    size++;</span><br><span class="line">    <span class="comment">// Ê®°Êï∞ÈÄíÂ¢ûÔºåÁî®‰∫éÂø´ÈÄüÂ§±Ë¥•</span></span><br><span class="line">    modCount++;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">linkBefore</span><span class="params">(E e, Node&lt;E&gt; succ)</span> {</span><br><span class="line">    <span class="comment">// succ‰∏∫ÂéüÈìæË°®ÊåáÂÆöindex‰ΩçÁΩÆÁöÑËäÇÁÇπÔºåËé∑ÂèñÂÖ∂prevËäÇÁÇπ</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; pred = succ.prev;</span><br><span class="line">    <span class="comment">// ÂàõÂª∫Êñ∞ËäÇÁÇπÔºåprev‰∏∫ÂéüÈìæË°®ÊåáÂÆöindex‰ΩçÁΩÆÁöÑËäÇÁÇπÁöÑprevËäÇÁÇπÔºånext‰∏∫ÂéüÈìæË°®ÊåáÂÆöindex‰ΩçÁΩÆÁöÑËäÇÁÇπ</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(pred, e, succ);</span><br><span class="line">    <span class="comment">// Â∞ÜÂéüÈìæË°®ÊåáÂÆöindex‰ΩçÁΩÆÁöÑËäÇÁÇπÁöÑprevÊõ¥Êñ∞‰∏∫Êñ∞ËäÇÁÇπ</span></span><br><span class="line">    succ.prev = newNode;</span><br><span class="line">    <span class="keyword">if</span> (pred == <span class="literal">null</span>)</span><br><span class="line">        <span class="comment">// Â¶ÇÊûúÈìæË°®ÊåáÂÆöindex‰ΩçÁΩÆÁöÑËäÇÁÇπÁöÑprev‰∏∫nullÔºåËØ¥ÊòéÂéüÈìæË°®Ê≤°ÊúâËäÇÁÇπÔºåÂ∞ÜÊñ∞ËäÇÁÇπËµãÁªôfirst</span></span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment">// Âê¶ÂàôÊõ¥Êñ∞ÂéüÈìæË°®ÊåáÂÆöindex‰ΩçÁΩÆÁöÑËäÇÁÇπÁöÑprevÁöÑnextËäÇÁÇπ‰∏∫Êñ∞ËäÇÁÇπ</span></span><br><span class="line">        pred.next = newNode;</span><br><span class="line">    <span class="comment">// sizeÈÄíÂ¢û</span></span><br><span class="line">    size++;</span><br><span class="line">    <span class="comment">// Ê®°Êï∞ÈÄíÂ¢ûÔºåÁî®‰∫éÂø´ÈÄüÂ§±Ë¥•</span></span><br><span class="line">    modCount++;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÈááÁî®‰∫åÂàÜÊ≥ïÈÅçÂéÜÊØè‰∏™NodeËäÇÁÇπÔºåÁõ¥Âà∞ÊâæÂà∞index‰ΩçÁΩÆÁöÑËäÇÁÇπ</span></span><br><span class="line">Node&lt;E&gt; <span class="title function_">node</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    <span class="comment">// assert isElementIndex(index);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) {</span><br><span class="line">        Node&lt;E&gt; x = first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">            x = x.next;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        Node&lt;E&gt; x = last;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">            x = x.prev;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ª£Á†ÅËæÉ‰∏∫ÁÆÄÂçïÔºåÊó†ÈùûÂ∞±ÊòØËÆæÁΩÆËäÇÁÇπÁöÑprevÂíånextÂÖ≥Á≥ª„ÄÇÂèØ‰ª•ÁúãÂà∞ÔºåÈô§‰∫ÜÂ§¥ÊèíÂíåÂ∞æÊèíÂ§ñÔºåÂú®ÈìæË°®Âà´ÁöÑ‰ΩçÁΩÆÊèíÂÖ•Êñ∞ËäÇÁÇπÔºåÊ∂âÂèäÂà∞ËäÇÁÇπÈÅçÂéÜÊìç‰ΩúÔºåÊâÄ‰ª•Êàë‰ª¨Â∏∏ËØ¥ÁöÑÈìæË°®ÊèíÂÖ•ÈÄüÂ∫¶Âø´ÔºåÊåáÁöÑÊòØÊèíÂÖ•ËäÇÁÇπÊîπÂèòÂâçÂêéËäÇÁÇπÁöÑÂºïÁî®ËøáÁ®ãÂæàÂø´„ÄÇ</p>
<h4 id="get-int-index-1"><a href="#get-int-index-1" class="headerlink" title="get(int index)"></a>get(int index)</h4><p><code>get(int index)</code>Ëé∑ÂèñÊåáÂÆö‰∏ãÊ†áÂÖÉÁ¥†Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> node(index).item;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÈááÁî®‰∫åÂàÜÊ≥ïÈÅçÂéÜÊØè‰∏™NodeËäÇÁÇπÔºåÁõ¥Âà∞ÊâæÂà∞index‰ΩçÁΩÆÁöÑËäÇÁÇπ</span></span><br><span class="line">Node&lt;E&gt; <span class="title function_">node</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    <span class="comment">// assert isElementIndex(index);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) {</span><br><span class="line">        Node&lt;E&gt; x = first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">            x = x.next;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        Node&lt;E&gt; x = last;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">            x = x.prev;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ª£Á†ÅËæÉ‰∏∫ÁÆÄÂçïÔºåÂ∞±ÊòØÈÄöËøánodeÂáΩÊï∞Êü•ÊâæÊåáÂÆöindex‰∏ãÊ†áNodeÔºåÁÑ∂ÂêéËé∑ÂèñÂÖ∂itemÂ±ûÊÄßÂÄºÔºåËäÇÁÇπÊü•ÊâæÈúÄË¶ÅÈÅçÂéÜ„ÄÇ</p>
<h4 id="set-int-index-E-element-1"><a href="#set-int-index-E-element-1" class="headerlink" title="set(int index, E element)"></a>set(int index, E element)</h4><p><code>set(int index, E element)</code>ËÆæÁΩÆÊåáÂÆö‰∏ãÊ†áËäÇÁÇπÁöÑitem‰∏∫ÊåáÂÆöÂÄºÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">set</span><span class="params">(<span class="type">int</span> index, E element)</span> {</span><br><span class="line">    <span class="comment">// ‰∏ãÊ†áÂêàÊ≥ïÊÄßÊ£ÄÊü•</span></span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="comment">// Ëé∑Âèñindex‰∏ãÊ†áËäÇÁÇπ</span></span><br><span class="line">    Node&lt;E&gt; x = node(index);</span><br><span class="line">    <span class="comment">// Ëé∑ÂèñÊóßÂÄº</span></span><br><span class="line">    <span class="type">E</span> <span class="variable">oldVal</span> <span class="operator">=</span> x.item;</span><br><span class="line">    <span class="comment">// ËÆæÁΩÆÊñ∞ÂÄº</span></span><br><span class="line">    x.item = element;</span><br><span class="line">    <span class="comment">// ËøîÂõûÊóßÂÄº</span></span><br><span class="line">    <span class="keyword">return</span> oldVal;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÈááÁî®‰∫åÂàÜÊ≥ïÈÅçÂéÜÊØè‰∏™NodeËäÇÁÇπÔºåÁõ¥Âà∞ÊâæÂà∞index‰ΩçÁΩÆÁöÑËäÇÁÇπ</span></span><br><span class="line">Node&lt;E&gt; <span class="title function_">node</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    <span class="comment">// assert isElementIndex(index);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) {</span><br><span class="line">        Node&lt;E&gt; x = first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">            x = x.next;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        Node&lt;E&gt; x = last;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">            x = x.prev;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂèØ‰ª•ÁúãÂà∞ÔºåsetÊñπÊ≥ï‰πüÈúÄË¶ÅÈÄöËøáÈÅçÂéÜÊü•ÊâæÁõÆÊ†áËäÇÁÇπ„ÄÇ</p>
<h4 id="remove-int-index-1"><a href="#remove-int-index-1" class="headerlink" title="remove(int index)"></a>remove(int index)</h4><p><code>remove(int index)</code>Âà†Èô§ÊåáÂÆö‰∏ãÊ†áËäÇÁÇπÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> {</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> unlink(node(index));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">E <span class="title function_">unlink</span><span class="params">(Node&lt;E&gt; x)</span> {</span><br><span class="line">    <span class="comment">// assert x != null;</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">E</span> <span class="variable">element</span> <span class="operator">=</span> x.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; next = x.next;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="literal">null</span>) {</span><br><span class="line">        first = next;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        prev.next = next;</span><br><span class="line">        x.prev = <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (next == <span class="literal">null</span>) {</span><br><span class="line">        last = prev;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        next.prev = prev;</span><br><span class="line">        x.next = <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    x.item = <span class="literal">null</span>;</span><br><span class="line">    size--;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>remove(int index)</code>ÈÄöËøánodeÊñπÊ≥ïÊâæÂà∞ÈúÄË¶ÅÂà†Èô§ÁöÑËäÇÁÇπÔºåÁÑ∂ÂêéË∞ÉÁî®unlinkÊñπÊ≥ïÊîπÂèòÂà†Èô§ËäÇÁÇπÁöÑprevÂíånextËäÇÁÇπÁöÑÂâçÁªßÂíåÂêéÁªßËäÇÁÇπ„ÄÇ</p>
<blockquote>
<p>Ââ©‰∏ãÁöÑÊñπÊ≥ïÂèØ‰ª•Ëá™Â∑±ÈòÖËØªÊ∫êÁ†Å„ÄÇ</p>
</blockquote>
<h2 id="RandomAccessÊé•Âè£"><a href="#RandomAccessÊé•Âè£" class="headerlink" title="RandomAccessÊé•Âè£"></a>RandomAccessÊé•Âè£</h2><p>RandomAccessÊé•Âè£ÊòØ‰∏Ä‰∏™Á©∫Êé•Âè£Ôºå‰∏çÂåÖÂê´‰ªª‰ΩïÊñπÊ≥ïÔºåÂè™ÊòØ‰Ωú‰∏∫‰∏Ä‰∏™Ê†áËØÜÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> java.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RandomAccess</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÆûÁé∞ËØ•Êé•Âè£ÁöÑÁ±ªËØ¥ÊòéÂÖ∂ÊîØÊåÅÂø´ÈÄüÈöèÊú∫ËÆøÈóÆÔºåÊØîÂ¶ÇArrayListÂÆûÁé∞‰∫ÜËØ•Êé•Âè£ÔºåËØ¥ÊòéArrayListÊîØÊåÅÂø´ÈÄüÈöèÊú∫ËÆøÈóÆ„ÄÇÊâÄË∞ìÂø´ÈÄüÈöèÊú∫ËÆøÈóÆÊåáÁöÑÊòØÈÄöËøáÂÖÉÁ¥†ÁöÑ‰∏ãÊ†áÂç≥ÂèØÂø´ÈÄüËé∑ÂèñÂÖÉÁ¥†ÂØπË±°ÔºåÊó†ÈúÄÈÅçÂéÜÔºåËÄåLinkedListÂàôÊ≤°ÊúâËøô‰∏™ÁâπÊÄßÔºåÂÖÉÁ¥†Ëé∑ÂèñÂøÖÈ°ªÈÅçÂéÜÈìæË°®„ÄÇ</p>
<p>Âú®CollectionsÁ±ªÁöÑ<code>binarySearch(List&lt;? extends Comparable&lt;? super T&gt;&gt; list, T key)</code>ÊñπÊ≥ï‰∏≠ÔºåÂèØ‰ª•ÁúãÂà∞RandomAccessÁöÑÂ∫îÁî®Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt;</span><br><span class="line"><span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(List&lt;? extends Comparable&lt;? <span class="built_in">super</span> T&gt;&gt; list, T key)</span> {</span><br><span class="line">    <span class="keyword">if</span> (list <span class="keyword">instanceof</span> RandomAccess || list.size()&lt;BINARYSEARCH_THRESHOLD)</span><br><span class="line">        <span class="keyword">return</span> Collections.indexedBinarySearch(list, key);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> Collections.iteratorBinarySearch(list, key);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂΩìlistÂÆûÁé∞‰∫ÜRandomAccessÊé•Âè£Êó∂ÔºåË∞ÉÁî®indexedBinarySearchÊñπÊ≥ïÔºåÂê¶ÂàôË∞ÉÁî®iteratorBinarySearch„ÄÇÊâÄ‰ª•ÂΩìÊàë‰ª¨ÈÅçÂéÜÈõÜÂêàÊó∂ÔºåÂ¶ÇÊûúÈõÜÂêàÂÆûÁé∞‰∫ÜRandomAccessÊé•Âè£Ôºå‰ºòÂÖàÈÄâÊã©ÊôÆÈÄöforÂæ™ÁéØÔºåÂÖ∂Ê¨°foreachÔºõÈÅçÂéÜÊú™ÂÆûÁé∞RandomAccessÁöÑÊé•Âè£Ôºå‰ºòÂÖàÈÄâÊã©iteratorÈÅçÂéÜ„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaÂü∫Á°Ä(‰∏Ä)</title>
    <url>/p/15328330.html</url>
    <content><![CDATA[<html><head></head><body><h3 id="‰∏∫‰ªÄ‰πàJava‰ª£Á†ÅÂèØ‰ª•ÂÆûÁé∞‰∏ÄÊ¨°ÁºñÂÜô„ÄÅÂà∞Â§ÑËøêË°åÔºü"><a href="#‰∏∫‰ªÄ‰πàJava‰ª£Á†ÅÂèØ‰ª•ÂÆûÁé∞‰∏ÄÊ¨°ÁºñÂÜô„ÄÅÂà∞Â§ÑËøêË°åÔºü" class="headerlink" title="‰∏∫‰ªÄ‰πàJava‰ª£Á†ÅÂèØ‰ª•ÂÆûÁé∞‰∏ÄÊ¨°ÁºñÂÜô„ÄÅÂà∞Â§ÑËøêË°åÔºü"></a>‰∏∫‰ªÄ‰πàJava‰ª£Á†ÅÂèØ‰ª•ÂÆûÁé∞‰∏ÄÊ¨°ÁºñÂÜô„ÄÅÂà∞Â§ÑËøêË°åÔºü</h3><p>JVMÔºàJavaËôöÊãüÊú∫ÔºâÊòØJavaË∑®Âπ≥Âè∞ÁöÑÂÖ≥ÈîÆ„ÄÇ</p>
<p>Âú®Á®ãÂ∫èËøêË°åÂâçÔºåJavaÊ∫ê‰ª£Á†ÅÔºà.javaÔºâÈúÄË¶ÅÁªèËøáÁºñËØëÂô®ÁºñËØëÊàêÂ≠óËäÇÁ†ÅÔºà.classÔºâ„ÄÇÂú®Á®ãÂ∫èËøêË°åÊó∂ÔºåJVMË¥üË¥£Â∞ÜÂ≠óËäÇÁ†ÅÁøªËØëÊàêÁâπÂÆöÂπ≥Âè∞‰∏ãÁöÑÊú∫Âô®Á†ÅÂπ∂ËøêË°åÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂè™Ë¶ÅÂú®‰∏çÂêåÁöÑÂπ≥Âè∞‰∏äÂÆâË£ÖÂØπÂ∫îÁöÑJVMÔºåÂ∞±ÂèØ‰ª•ËøêË°åÂ≠óËäÇÁ†ÅÊñá‰ª∂„ÄÇ</p>
<p>Âêå‰∏Ä‰ªΩJavaÊ∫ê‰ª£Á†ÅÂú®‰∏çÂêåÁöÑÂπ≥Âè∞‰∏äËøêË°åÔºåÂÆÉ‰∏çÈúÄË¶ÅÂÅö‰ªª‰ΩïÁöÑÊîπÂèòÔºåÂπ∂‰∏îÂè™ÈúÄË¶ÅÁºñËØë‰∏ÄÊ¨°„ÄÇËÄåÁºñËØëÂ•ΩÁöÑÂ≠óËäÇÁ†ÅÔºåÊòØÈÄöËøáJVMËøô‰∏™‰∏≠Èó¥ÁöÑ‚ÄúÊ°•Ê¢Å‚ÄùÂÆûÁé∞Ë∑®Âπ≥Âè∞ÁöÑÔºåJVMÊòØ‰∏éÂπ≥Âè∞Áõ∏ÂÖ≥ÁöÑËΩØ‰ª∂ÔºåÂÆÉËÉΩÂ∞ÜÁªü‰∏ÄÁöÑÂ≠óËäÇÁ†ÅÁøªËØëÊàêËØ•Âπ≥Âè∞ÁöÑÊú∫Âô®Á†Å„ÄÇ</p>
<p><strong>Ê≥®ÊÑè‰∫ãÈ°π</strong></p>
<ol>
<li>ÁºñËØëÁöÑÁªìÊûúÊòØÁîüÊàêÂ≠óËäÇÁ†Å„ÄÅ‰∏çÊòØÊú∫Âô®Á†ÅÔºåÂ≠óËäÇÁ†Å‰∏çËÉΩÁõ¥Êé•ËøêË°åÔºåÂøÖÈ°ªÈÄöËøáJVMÁøªËØëÊàêÊú∫Âô®Á†ÅÊâçËÉΩËøêË°åÔºõ</li>
<li>Ë∑®Âπ≥Âè∞ÁöÑÊòØJavaÁ®ãÂ∫è„ÄÅËÄå‰∏çÊòØJVMÔºåJVMÊòØÁî®C/C++ÂºÄÂèëÁöÑËΩØ‰ª∂Ôºå‰∏çÂêåÂπ≥Âè∞‰∏ãÈúÄË¶ÅÂÆâË£Ö‰∏çÂêåÁâàÊú¨ÁöÑJVM„ÄÇ</li>
</ol>
<h3 id="‰∏Ä‰∏™JavaÊñá‰ª∂ÈáåÂèØ‰ª•ÊúâÂ§ö‰∏™Á±ªÂêóÔºà‰∏çÂê´ÂÜÖÈÉ®Á±ªÔºâÔºü"><a href="#‰∏Ä‰∏™JavaÊñá‰ª∂ÈáåÂèØ‰ª•ÊúâÂ§ö‰∏™Á±ªÂêóÔºà‰∏çÂê´ÂÜÖÈÉ®Á±ªÔºâÔºü" class="headerlink" title="‰∏Ä‰∏™JavaÊñá‰ª∂ÈáåÂèØ‰ª•ÊúâÂ§ö‰∏™Á±ªÂêóÔºà‰∏çÂê´ÂÜÖÈÉ®Á±ªÔºâÔºü"></a>‰∏Ä‰∏™JavaÊñá‰ª∂ÈáåÂèØ‰ª•ÊúâÂ§ö‰∏™Á±ªÂêóÔºà‰∏çÂê´ÂÜÖÈÉ®Á±ªÔºâÔºü</h3><ol>
<li>‰∏Ä‰∏™javaÊñá‰ª∂ÈáåÂèØ‰ª•ÊúâÂ§ö‰∏™Á±ªÔºå‰ΩÜÊúÄÂ§öÂè™ËÉΩÊúâ‰∏Ä‰∏™Ë¢´public‰øÆÈ•∞ÁöÑÁ±ªÔºõ</li>
<li>Â¶ÇÊûúËøô‰∏™javaÊñá‰ª∂‰∏≠ÂåÖÂê´public‰øÆÈ•∞ÁöÑÁ±ªÔºåÂàôËøô‰∏™Á±ªÁöÑÂêçÁß∞ÂøÖÈ°ªÂíåjavaÊñá‰ª∂Âêç‰∏ÄËá¥„ÄÇ</li>
</ol>
<h3 id="ËØ¥‰∏ÄËØ¥‰Ω†ÂØπJavaËÆøÈóÆÊùÉÈôêÁöÑ‰∫ÜËß£"><a href="#ËØ¥‰∏ÄËØ¥‰Ω†ÂØπJavaËÆøÈóÆÊùÉÈôêÁöÑ‰∫ÜËß£" class="headerlink" title="ËØ¥‰∏ÄËØ¥‰Ω†ÂØπJavaËÆøÈóÆÊùÉÈôêÁöÑ‰∫ÜËß£"></a>ËØ¥‰∏ÄËØ¥‰Ω†ÂØπJavaËÆøÈóÆÊùÉÈôêÁöÑ‰∫ÜËß£</h3><p>JavaËØ≠Ë®Ä‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰∏âÁßçËÆøÈóÆ‰øÆÈ•∞Á¨¶ÔºåÂç≥private„ÄÅprotected„ÄÅpublicÔºåÂú®‰ΩøÁî®Ëøô‰∫õ‰øÆÈ•∞Á¨¶‰øÆÈ•∞ÁõÆÊ†áÊó∂Ôºå‰∏ÄÂÖ±ÂèØ‰ª•ÂΩ¢ÊàêÂõõÁßçËÆøÈóÆÊùÉÈôêÔºåÂç≥private„ÄÅdefault„ÄÅprotected„ÄÅpublicÔºåÊ≥®ÊÑèÂú®‰∏çÂä†‰ªª‰Ωï‰øÆÈ•∞Á¨¶Êó∂‰∏∫defaultËÆøÈóÆÊùÉÈôê„ÄÇ</p>
<p>Âú®‰øÆÈ•∞ÊàêÂëòÂèòÈáè/ÊàêÂëòÊñπÊ≥ïÊó∂ÔºåËØ•ÊàêÂëòÁöÑÂõõÁßçËÆøÈóÆÊùÉÈôêÁöÑÂê´‰πâÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>privateÔºöËØ•ÊàêÂëòÂèØ‰ª•Ë¢´ËØ•Á±ªÂÜÖÈÉ®ÊàêÂëòËÆøÈóÆÔºõ</li>
<li>defaultÔºöËØ•ÊàêÂëòÂèØ‰ª•Ë¢´ËØ•Á±ªÂÜÖÈÉ®ÊàêÂëòËÆøÈóÆÔºå‰πüÂèØ‰ª•Ë¢´Âêå‰∏ÄÂåÖ‰∏ãÂÖ∂‰ªñÁöÑÁ±ªËÆøÈóÆÔºõ</li>
<li>protectedÔºöËØ•ÊàêÂëòÂèØ‰ª•Ë¢´ËØ•Á±ªÂÜÖÈÉ®ÊàêÂëòËÆøÈóÆÔºå‰πüÂèØ‰ª•Ë¢´Âêå‰∏ÄÂåÖ‰∏ãÂÖ∂‰ªñÁöÑÁ±ªËÆøÈóÆÔºåËøòÂèØ‰ª•Ë¢´ÂÆÉÁöÑÂ≠êÁ±ªËÆøÈóÆÔºõ</li>
<li>publicÔºöËØ•ÊàêÂëòÂèØ‰ª•Ë¢´‰ªªÊÑèÂåÖ‰∏ãÔºå‰ªªÊÑèÁ±ªÁöÑÊàêÂëòËøõË°åËÆøÈóÆ„ÄÇ</li>
</ul>
<p>Âú®‰øÆÈ•∞Á±ªÊó∂ÔºåËØ•Á±ªÂè™Êúâ‰∏§ÁßçËÆøÈóÆÊùÉÈôêÔºåÂØπÂ∫îÁöÑËÆøÈóÆÊùÉÈôêÁöÑÂê´‰πâÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>defaultÔºöËØ•Á±ªÂèØ‰ª•Ë¢´Âêå‰∏ÄÂåÖ‰∏ãÂÖ∂‰ªñÁöÑÁ±ªËÆøÈóÆÔºõ</li>
<li>publicÔºöËØ•Á±ªÂèØ‰ª•Ë¢´‰ªªÊÑèÂåÖ‰∏ãÔºå‰ªªÊÑèÁöÑÁ±ªÊâÄËÆøÈóÆ„ÄÇ</li>
</ul>
<h3 id="‰ªãÁªç‰∏Ä‰∏ãJavaÁöÑÊï∞ÊçÆÁ±ªÂûã"><a href="#‰ªãÁªç‰∏Ä‰∏ãJavaÁöÑÊï∞ÊçÆÁ±ªÂûã" class="headerlink" title="‰ªãÁªç‰∏Ä‰∏ãJavaÁöÑÊï∞ÊçÆÁ±ªÂûã"></a>‰ªãÁªç‰∏Ä‰∏ãJavaÁöÑÊï∞ÊçÆÁ±ªÂûã</h3><p>JavaÊï∞ÊçÆÁ±ªÂûãÂåÖÊã¨<strong>Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûã</strong>Âíå<strong>ÂºïÁî®Êï∞ÊçÆÁ±ªÂûã</strong>‰∏§Â§ßÁ±ª„ÄÇ</p>
<table>
<thead>
<tr>
<th align="center">8‰∏™Âü∫Êú¨Á±ªÂûã</th>
</tr>
</thead>
</table>
<table>
<thead>
<tr>
<th align="center">Á±ªÂûã</th>
<th align="center">Âü∫Êú¨Á±ªÂûã</th>
<th align="center">ÊâÄÂç†Â≠óËäÇ(byte)</th>
<th align="center">ÊâÄÂç†‰ΩçÊï∞(bit)</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Êï∞ÂÄºÁ±ªÂûã</td>
<td align="center">byte</td>
<td align="center">1</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">short</td>
<td align="center">2</td>
<td align="center">2*8</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">long</td>
<td align="center">8</td>
<td align="center">8*8</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">int</td>
<td align="center">4</td>
<td align="center">4*8</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">float</td>
<td align="center">4</td>
<td align="center">4*8</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">double</td>
<td align="center">16</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">char</td>
<td align="center">2</td>
<td align="center">2*8</td>
</tr>
<tr>
<td align="center">Â∏ÉÂ∞îÁ±ªÂûã</td>
<td align="center">boolean</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
</tbody></table>
<p>ÂºïÁî®Á±ªÂûãÂ∞±ÊòØÂØπ‰∏Ä‰∏™ÂØπË±°ÁöÑÂºïÁî®ÔºåÊ†πÊçÆÂºïÁî®ÂØπË±°Á±ªÂûãÁöÑ‰∏çÂêåÔºåÂèØ‰ª•Â∞ÜÂºïÁî®Á±ªÂûãÂàÜ‰∏∫3Á±ªÔºåÂç≥Êï∞ÁªÑ„ÄÅÁ±ª„ÄÅÊé•Âè£Á±ªÂûã„ÄÇÂºïÁî®Á±ªÂûãÊú¨Ë¥®‰∏äÂ∞±ÊòØÈÄöËøáÊåáÈíàÔºåÊåáÂêëÂ†Ü‰∏≠ÂØπË±°ÊâÄÊåÅÊúâÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂè™ÊòØJavaËØ≠Ë®Ä‰∏çÂÜçÊ≤øÁî®ÊåáÈíàËøô‰∏™ËØ¥Ê≥ïËÄåÂ∑≤„ÄÇ</p>
<h3 id="intÁ±ªÂûãÁöÑÊï∞ÊçÆËåÉÂõ¥ÊòØÂ§öÂ∞ëÔºü"><a href="#intÁ±ªÂûãÁöÑÊï∞ÊçÆËåÉÂõ¥ÊòØÂ§öÂ∞ëÔºü" class="headerlink" title="intÁ±ªÂûãÁöÑÊï∞ÊçÆËåÉÂõ¥ÊòØÂ§öÂ∞ëÔºü"></a>intÁ±ªÂûãÁöÑÊï∞ÊçÆËåÉÂõ¥ÊòØÂ§öÂ∞ëÔºü</h3><p>intÁ±ªÂûãÂç†4Â≠óËäÇÔºà32‰ΩçÔºâÔºåÊï∞ÊçÆËåÉÂõ¥ÊòØ -2^31 ~ 2^31-1„ÄÇ</p>
<h3 id="ËØ∑‰ªãÁªçÂÖ®Â±ÄÂèòÈáèÂíåÂ±ÄÈÉ®ÂèòÈáèÁöÑÂå∫Âà´"><a href="#ËØ∑‰ªãÁªçÂÖ®Â±ÄÂèòÈáèÂíåÂ±ÄÈÉ®ÂèòÈáèÁöÑÂå∫Âà´" class="headerlink" title="ËØ∑‰ªãÁªçÂÖ®Â±ÄÂèòÈáèÂíåÂ±ÄÈÉ®ÂèòÈáèÁöÑÂå∫Âà´"></a>ËØ∑‰ªãÁªçÂÖ®Â±ÄÂèòÈáèÂíåÂ±ÄÈÉ®ÂèòÈáèÁöÑÂå∫Âà´</h3><p>Java‰∏≠ÁöÑÂèòÈáèÂàÜ‰∏∫ÊàêÂëòÂèòÈáèÂíåÂ±ÄÈÉ®ÂèòÈáèÔºåÂÆÉ‰ª¨ÁöÑÂå∫Âà´Â¶Ç‰∏ãÔºö</p>
<p>ÊàêÂëòÂèòÈáèÔºö</p>
<ol>
<li>ÊàêÂëòÂèòÈáèÊòØÂú®Á±ªÁöÑËåÉÂõ¥ÈáåÂÆö‰πâÁöÑÂèòÈáèÔºõ</li>
<li>ÊàêÂëòÂèòÈáèÊúâÈªòËÆ§ÂàùÂßãÂÄºÔºõ</li>
<li>Êú™Ë¢´static‰øÆÈ•∞ÁöÑÊàêÂëòÂèòÈáè‰πüÂè´ÂÆû‰æãÂèòÈáèÔºåÂÆÉÂ≠òÂÇ®‰∫éÂØπË±°ÊâÄÂú®ÁöÑÂ†ÜÂÜÖÂ≠ò‰∏≠ÔºåÁîüÂëΩÂë®Êúü‰∏éÂØπË±°Áõ∏ÂêåÔºõ</li>
<li>Ë¢´static‰øÆÈ•∞ÁöÑÊàêÂëòÂèòÈáè‰πüÂè´Á±ªÂèòÈáèÔºåÂÆÉÂ≠òÂÇ®‰∫éÊñπÊ≥ïÂå∫‰∏≠ÔºåÁîüÂëΩÂë®Êúü‰∏éÂΩìÂâçÁ±ªÁõ∏Âêå„ÄÇ</li>
</ol>
<p>Â±ÄÈÉ®ÂèòÈáèÔºö</p>
<ol>
<li>Â±ÄÈÉ®ÂèòÈáèÊòØÂú®ÊñπÊ≥ïÈáåÂÆö‰πâÁöÑÂèòÈáèÔºõ</li>
<li>Â±ÄÈÉ®ÂèòÈáèÊ≤°ÊúâÈªòËÆ§ÂàùÂßãÂÄºÔºõ</li>
<li>Â±ÄÈÉ®ÂèòÈáèÂ≠òÂÇ®‰∫éÊ†àÂÜÖÂ≠ò‰∏≠Ôºå‰ΩúÁî®ÁöÑËåÉÂõ¥ÁªìÊùüÔºåÂèòÈáèÁ©∫Èó¥‰ºöËá™Âä®ÁöÑÈáäÊîæ„ÄÇ</li>
</ol>
<p><strong>Ê≥®ÊÑè‰∫ãÈ°π</strong></p>
<p>Java‰∏≠Ê≤°ÊúâÁúüÊ≠£ÁöÑÂÖ®Â±ÄÂèòÈáèÔºåÈù¢ËØïÂÆòÂ∫îËØ•ÊòØÂá∫‰∫éÂÖ∂‰ªñËØ≠Ë®ÄÁöÑ‰π†ÊÉØËØ¥ÂÖ®Â±ÄÂèòÈáèÁöÑÔºå‰ªñÁöÑÊú¨ÊÑèÂ∫îËØ•ÊòØÊåáÊàêÂëòÂèòÈáè„ÄÇ</p>
<h3 id="ËØ∑‰ªãÁªç‰∏Ä‰∏ãÂÆû‰æãÂèòÈáèÁöÑÈªòËÆ§ÂÄº"><a href="#ËØ∑‰ªãÁªç‰∏Ä‰∏ãÂÆû‰æãÂèòÈáèÁöÑÈªòËÆ§ÂÄº" class="headerlink" title="ËØ∑‰ªãÁªç‰∏Ä‰∏ãÂÆû‰æãÂèòÈáèÁöÑÈªòËÆ§ÂÄº"></a>ËØ∑‰ªãÁªç‰∏Ä‰∏ãÂÆû‰æãÂèòÈáèÁöÑÈªòËÆ§ÂÄº</h3><p>ÂÆû‰æãÂèòÈáèËã•‰∏∫ÂºïÁî®Êï∞ÊçÆÁ±ªÂûãÔºåÂÖ∂ÈªòËÆ§ÂÄº‰∏ÄÂæã‰∏∫null„ÄÇËã•‰∏∫Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºåÂÖ∂ÈªòËÆ§ÂÄºÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>byteÔºö0</li>
<li>shortÔºö0</li>
<li>intÔºö0</li>
<li>longÔºö0L</li>
<li>floatÔºö0.0F</li>
<li>doubleÔºö0.0</li>
<li>charÔºö‚Äô\u0000‚Äô</li>
<li>booleanÔºöfalse</li>
</ul>
<p><strong>Ê≥®ÊÑè‰∫ãÈ°π</strong></p>
<p>‰∏äËø∞ÈªòËÆ§ÂÄºËßÑÂàôÈÄÇÁî®‰∫éÊâÄÊúâÁöÑÊàêÂëòÂèòÈáèÔºåÊâÄ‰ª•ÂØπ‰∫éÁ±ªÂèòÈáè‰πüÊòØÈÄÇÁî®ÁöÑ„ÄÇ</p>
<h3 id="‰∏∫Âï•Ë¶ÅÊúâÂåÖË£ÖÁ±ªÔºü"><a href="#‰∏∫Âï•Ë¶ÅÊúâÂåÖË£ÖÁ±ªÔºü" class="headerlink" title="‰∏∫Âï•Ë¶ÅÊúâÂåÖË£ÖÁ±ªÔºü"></a>‰∏∫Âï•Ë¶ÅÊúâÂåÖË£ÖÁ±ªÔºü</h3><p>JavaËØ≠Ë®ÄÊòØÈù¢ÂêëÂØπË±°ÁöÑËØ≠Ë®ÄÔºåÂÖ∂ËÆæËÆ°ÁêÜÂøµÊòØ‚Äú‰∏ÄÂàáÁöÜÂØπË±°‚Äù„ÄÇ‰ΩÜ8ÁßçÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂç¥Âá∫Áé∞‰∫Ü‰æãÂ§ñÔºåÂÆÉ‰ª¨‰∏çÂÖ∑Â§áÂØπË±°ÁöÑÁâπÊÄß„ÄÇÊ≠£ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåJava‰∏∫ÊØè‰∏™Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÈÉΩÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂØπÂ∫îÁöÑÂºïÁî®Á±ªÂûãÔºåËøôÂ∞±ÊòØÂåÖË£ÖÁ±ª„ÄÇ</p>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>Java‰πãÊâÄ‰ª•Êèê‰æõ8ÁßçÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÁÖßÈ°æÁ®ãÂ∫èÂëòÁöÑ‰º†Áªü‰π†ÊÉØ„ÄÇËøô8ÁßçÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÁöÑÁ°ÆÂ∏¶Êù•‰∫Ü‰∏ÄÂÆöÁöÑÊñπ‰æøÊÄßÔºå‰ΩÜÂú®Êüê‰∫õÊó∂ÂÄô‰πü‰ºöÂèóÂà∞‰∏Ä‰∫õÂà∂Á∫¶„ÄÇÊØîÂ¶ÇÔºåÊâÄÊúâÁöÑÂºïÁî®Á±ªÂûãÁöÑÂèòÈáèÈÉΩÁªßÊâø‰∫éObjectÁ±ªÔºåÈÉΩÂèØ‰ª•ÂΩìÂÅöObjectÁ±ªÂûãÁöÑÂèòÈáè‰ΩøÁî®Ôºå‰ΩÜÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂç¥‰∏çÂèØ‰ª•„ÄÇÂ¶ÇÊûúÊüê‰∏™ÊñπÊ≥ïÈúÄË¶ÅObjectÁ±ªÂûãÁöÑÂèÇÊï∞Ôºå‰ΩÜÂÆûÈôÖ‰º†ÂÖ•ÁöÑÂÄºÂç¥ÊòØÊï∞Â≠óÁöÑËØùÔºåÂ∞±ÈúÄË¶ÅÂÅöÁâπÊÆäÁöÑÂ§ÑÁêÜ‰∫Ü„ÄÇÊúâ‰∫ÜÂåÖË£ÖÁ±ªÔºåËøôÁßçÈóÆÈ¢òÂ∞±ÂèØ‰ª•Âæó‰ª•ÁÆÄÂåñ„ÄÇ</p>
<h3 id="ËØ¥‰∏ÄËØ¥Ëá™Âä®Ë£ÖÁÆ±„ÄÅËá™Âä®ÊãÜÁÆ±ÁöÑÂ∫îÁî®Âú∫ÊôØ"><a href="#ËØ¥‰∏ÄËØ¥Ëá™Âä®Ë£ÖÁÆ±„ÄÅËá™Âä®ÊãÜÁÆ±ÁöÑÂ∫îÁî®Âú∫ÊôØ" class="headerlink" title="ËØ¥‰∏ÄËØ¥Ëá™Âä®Ë£ÖÁÆ±„ÄÅËá™Âä®ÊãÜÁÆ±ÁöÑÂ∫îÁî®Âú∫ÊôØ"></a>ËØ¥‰∏ÄËØ¥Ëá™Âä®Ë£ÖÁÆ±„ÄÅËá™Âä®ÊãÜÁÆ±ÁöÑÂ∫îÁî®Âú∫ÊôØ</h3><p>Ëá™Âä®Ë£ÖÁÆ±„ÄÅËá™Âä®ÊãÜÁÆ±ÊòØJDK1.5Êèê‰æõÁöÑÂäüËÉΩ„ÄÇ</p>
<p>Ëá™Âä®Ë£ÖÁÆ±ÔºöÂèØ‰ª•Êää‰∏Ä‰∏™Âü∫Êú¨Á±ªÂûãÁöÑÊï∞ÊçÆÁõ¥Êé•ËµãÂÄºÁªôÂØπÂ∫îÁöÑÂåÖË£ÖÁ±ªÂûãÔºõ</p>
<p>Ëá™Âä®ÊãÜÁÆ±ÔºöÂèØ‰ª•Êää‰∏Ä‰∏™ÂåÖË£ÖÁ±ªÂûãÁöÑÂØπË±°Áõ¥Êé•ËµãÂÄºÁªôÂØπÂ∫îÁöÑÂü∫Êú¨Á±ªÂûãÔºõ</p>
<p>ÈÄöËøáËá™Âä®Ë£ÖÁÆ±„ÄÅËá™Âä®ÊãÜÁÆ±ÂäüËÉΩÔºåÂèØ‰ª•Â§ßÂ§ßÁÆÄÂåñÂü∫Êú¨Á±ªÂûãÂèòÈáèÂíåÂåÖË£ÖÁ±ªÂØπË±°‰πãÈó¥ÁöÑËΩ¨Êç¢ËøáÁ®ã„ÄÇÊØîÂ¶ÇÔºåÊüê‰∏™ÊñπÊ≥ïÁöÑÂèÇÊï∞Á±ªÂûã‰∏∫ÂåÖË£ÖÁ±ªÂûãÔºåË∞ÉÁî®Êó∂Êàë‰ª¨ÊâÄÊåÅÊúâÁöÑÊï∞ÊçÆÂç¥ÊòØÂü∫Êú¨Á±ªÂûãÁöÑÂÄºÔºåÂàôÂèØ‰ª•‰∏çÂÅö‰ªª‰ΩïÁâπÊÆäÁöÑÂ§ÑÁêÜÔºåÁõ¥Êé•Â∞ÜËøô‰∏™Âü∫Êú¨Á±ªÂûãÁöÑÂÄº‰º†ÂÖ•ÁªôÊñπÊ≥ïÂç≥ÂèØ„ÄÇ</p>
<h3 id="Â¶Ç‰ΩïÂØπIntegerÂíåDoubleÁ±ªÂûãÂà§Êñ≠Áõ∏Á≠âÔºü"><a href="#Â¶Ç‰ΩïÂØπIntegerÂíåDoubleÁ±ªÂûãÂà§Êñ≠Áõ∏Á≠âÔºü" class="headerlink" title="Â¶Ç‰ΩïÂØπIntegerÂíåDoubleÁ±ªÂûãÂà§Êñ≠Áõ∏Á≠âÔºü"></a>Â¶Ç‰ΩïÂØπIntegerÂíåDoubleÁ±ªÂûãÂà§Êñ≠Áõ∏Á≠âÔºü</h3><p>Integer„ÄÅDouble‰∏çËÉΩÁõ¥Êé•ËøõË°åÊØîËæÉÔºåËøôÂåÖÊã¨Ôºö</p>
<ul>
<li>‰∏çËÉΩÁî®==ËøõË°åÁõ¥Êé•ÊØîËæÉÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÊòØ‰∏çÂêåÁöÑÊï∞ÊçÆÁ±ªÂûãÔºõ</li>
<li>‰∏çËÉΩËΩ¨‰∏∫Â≠óÁ¨¶‰∏≤ËøõË°åÊØîËæÉÔºåÂõ†‰∏∫ËΩ¨‰∏∫Â≠óÁ¨¶‰∏≤ÂêéÔºåÊµÆÁÇπÂÄºÂ∏¶Â∞èÊï∞ÁÇπÔºåÊï¥Êï∞ÂÄº‰∏çÂ∏¶ÔºåËøôÊ†∑ÂÆÉ‰ª¨Ê∞∏ËøúÈÉΩ‰∏çÁõ∏Á≠âÔºõ</li>
<li>‰∏çËÉΩ‰ΩøÁî®compareToÊñπÊ≥ïËøõË°åÊØîËæÉÔºåËôΩÁÑ∂ÂÆÉ‰ª¨ÈÉΩÊúâcompareToÊñπÊ≥ïÔºå‰ΩÜËØ•ÊñπÊ≥ïÂè™ËÉΩÂØπÁõ∏ÂêåÁ±ªÂûãËøõË°åÊØîËæÉ„ÄÇ</li>
</ul>
<p>Êï¥Êï∞„ÄÅÊµÆÁÇπÁ±ªÂûãÁöÑÂåÖË£ÖÁ±ªÔºåÈÉΩÁªßÊâø‰∫éNumberÁ±ªÂûãÔºåËÄåNumberÁ±ªÂûãÂàÜÂà´ÂÆö‰πâ‰∫ÜÂ∞ÜÊï∞Â≠óËΩ¨Êç¢‰∏∫byte„ÄÅshort„ÄÅint„ÄÅlong„ÄÅfloat„ÄÅdoubleÁöÑÊñπÊ≥ï„ÄÇÊâÄ‰ª•ÔºåÂèØ‰ª•Â∞ÜInteger„ÄÅDoubleÂÖàËΩ¨‰∏∫ËΩ¨Êç¢‰∏∫Áõ∏ÂêåÁöÑÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºàÂ¶ÇdoubleÔºâÔºåÁÑ∂Âêé‰ΩøÁî®==ËøõË°åÊØîËæÉ„ÄÇ</p>
<p><strong>Á§∫‰æã‰ª£Á†Å</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">Double</span> <span class="variable">d</span> <span class="operator">=</span> <span class="number">100.00</span>;</span><br><span class="line">System.out.println(i.doubleValue() == d.doubleValue());</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaÂü∫Á°Ä(‰∫å)</title>
    <url>/p/ba031852.html</url>
    <content><![CDATA[<html><head></head><body><h3 id="intÂíåIntegerÊúâ‰ªÄ‰πàÂå∫Âà´Ôºå‰∫åËÄÖÂú®ÂÅö-ËøêÁÆóÊó∂‰ºöÂæóÂà∞‰ªÄ‰πàÁªìÊûúÔºü"><a href="#intÂíåIntegerÊúâ‰ªÄ‰πàÂå∫Âà´Ôºå‰∫åËÄÖÂú®ÂÅö-ËøêÁÆóÊó∂‰ºöÂæóÂà∞‰ªÄ‰πàÁªìÊûúÔºü" class="headerlink" title="intÂíåIntegerÊúâ‰ªÄ‰πàÂå∫Âà´Ôºå‰∫åËÄÖÂú®ÂÅö==ËøêÁÆóÊó∂‰ºöÂæóÂà∞‰ªÄ‰πàÁªìÊûúÔºü"></a>intÂíåIntegerÊúâ‰ªÄ‰πàÂå∫Âà´Ôºå‰∫åËÄÖÂú®ÂÅö==ËøêÁÆóÊó∂‰ºöÂæóÂà∞‰ªÄ‰πàÁªìÊûúÔºü</h3><p>intÊòØÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºåIntegerÊòØintÁöÑÂåÖË£ÖÁ±ª„ÄÇ‰∫åËÄÖÂú®ÂÅö==ËøêÁÆóÊó∂ÔºåInteger‰ºöËá™Âä®ÊãÜÁÆ±‰∏∫intÁ±ªÂûãÔºåÁÑ∂ÂêéÂÜçËøõË°åÊØîËæÉ„ÄÇÂ±äÊó∂ÔºåÂ¶ÇÊûú‰∏§‰∏™intÂÄºÁõ∏Á≠âÂàôËøîÂõûtrueÔºåÂê¶ÂàôÂ∞±ËøîÂõûfalse„ÄÇ</p>
<h3 id="ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÈù¢ÂêëÂØπË±°ÁöÑÁêÜËß£"><a href="#ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÈù¢ÂêëÂØπË±°ÁöÑÁêÜËß£" class="headerlink" title="ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÈù¢ÂêëÂØπË±°ÁöÑÁêÜËß£"></a>ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÈù¢ÂêëÂØπË±°ÁöÑÁêÜËß£</h3><p>Èù¢ÂêëÂØπË±°ÊòØ‰∏ÄÁßçÊõ¥‰ºòÁßÄÁöÑÁ®ãÂ∫èËÆæËÆ°ÊñπÊ≥ïÔºåÂÆÉÁöÑÂü∫Êú¨ÊÄùÊÉ≥ÊòØ‰ΩøÁî®Á±ª„ÄÅÂØπË±°„ÄÅÁªßÊâø„ÄÅÂ∞ÅË£Ö„ÄÅÊ∂àÊÅØÁ≠âÂü∫Êú¨Ê¶ÇÂøµËøõË°åÁ®ãÂ∫èËÆæËÆ°„ÄÇÂÆÉ‰ªéÁé∞ÂÆû‰∏ñÁïå‰∏≠ÂÆ¢ËßÇÂ≠òÂú®ÁöÑ‰∫ãÁâ©Âá∫ÂèëÊù•ÊûÑÈÄ†ËΩØ‰ª∂Á≥ªÁªüÔºåÂπ∂Âú®Á≥ªÁªüÊûÑÈÄ†‰∏≠Â∞ΩÂèØËÉΩËøêÁî®‰∫∫Á±ªÁöÑËá™ÁÑ∂ÊÄùÁª¥ÊñπÂºèÔºåÂº∫Ë∞ÉÁõ¥Êé•‰ª•Áé∞ÂÆû‰∏ñÁïå‰∏≠ÁöÑ‰∫ãÁâ©‰∏∫‰∏≠ÂøÉÊù•ÊÄùËÄÉÔºåËÆ§ËØÜÈóÆÈ¢òÔºåÂπ∂Ê†πÊçÆËøô‰∫õ‰∫ãÁâ©ÁöÑÊú¨Ë¥®ÁâπÁÇπÔºåÊääÂÆÉ‰ª¨ÊäΩË±°Âú∞Ë°®Á§∫‰∏∫Á≥ªÁªü‰∏≠ÁöÑÁ±ªÔºå‰Ωú‰∏∫Á≥ªÁªüÁöÑÂü∫Êú¨ÊûÑÊàêÂçïÂÖÉÔºåËøô‰ΩøÂæóËΩØ‰ª∂Á≥ªÁªüÁöÑÁªÑ‰ª∂ÂèØ‰ª•Áõ¥Êé•Êò†ÂÉèÂà∞ÂÆ¢ËßÇ‰∏ñÁïåÔºåÂπ∂‰øùÊåÅÂÆ¢ËßÇ‰∏ñÁïå‰∏≠‰∫ãÁâ©ÂèäÂÖ∂Áõ∏‰∫íÂÖ≥Á≥ªÁöÑÊú¨Êù•Èù¢Ë≤å„ÄÇ</p>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>ÁªìÊûÑÂåñÁ®ãÂ∫èËÆæËÆ°ÊñπÊ≥ï‰∏ªÂº†ÊåâÂäüËÉΩÊù•ÂàÜÊûêÁ≥ªÁªüÈúÄÊ±ÇÔºåÂÖ∂‰∏ªË¶ÅÂéüÂàôÂèØÊ¶ÇÊã¨‰∏∫Ëá™È°∂Âêë‰∏ã„ÄÅÈÄêÊ≠•Ê±ÇÁ≤æ„ÄÅÊ®°ÂùóÂåñÁ≠â„ÄÇÁªìÊûÑÂåñÁ®ãÂ∫èËÆæËÆ°È¶ñÂÖàÈááÁî®ÁªìÊûÑÂåñÂàÜÊûêÊñπÊ≥ïÂØπÁ≥ªÁªüËøõË°åÈúÄÊ±ÇÂàÜÊûêÔºåÁÑ∂Âêé‰ΩøÁî®ÁªìÊûÑÂåñËÆæËÆ°ÊñπÊ≥ïÂØπÁ≥ªÁªüËøõË°åÊ¶ÇË¶ÅËÆæËÆ°„ÄÅËØ¶ÁªÜËÆæËÆ°ÔºåÊúÄÂêéÈááÁî®ÁªìÊûÑÂåñÁºñÁ®ãÊñπÊ≥ïÊù•ÂÆûÁé∞Á≥ªÁªü„ÄÇ</p>
<p>Âõ†‰∏∫ÁªìÊûÑÂåñÁ®ãÂ∫èËÆæËÆ°ÊñπÊ≥ï‰∏ªÂº†ÊåâÂäüËÉΩÊääËΩØ‰ª∂Á≥ªÁªüÈÄêÊ≠•ÁªÜÂàÜÔºåÂõ†Ê≠§ËøôÁßçÊñπÊ≥ï‰πüË¢´Áß∞‰∏∫Èù¢ÂêëÂäüËÉΩÁöÑÁ®ãÂ∫èËÆæËÆ°ÊñπÊ≥ïÔºõÁªìÊûÑÂåñÁ®ãÂ∫èËÆæËÆ°ÁöÑÊØè‰∏™ÂäüËÉΩÈÉΩË¥üË¥£ÂØπÊï∞ÊçÆËøõË°å‰∏ÄÊ¨°Â§ÑÁêÜÔºåÊØè‰∏™ÂäüËÉΩÈÉΩÊé•Âèó‰∏Ä‰∫õÊï∞ÊçÆÔºåÂ§ÑÁêÜÂÆåÂêéËæìÂá∫‰∏Ä‰∫õÊï∞ÊçÆÔºåËøôÁßçÂ§ÑÁêÜÊñπÂºè‰πüË¢´Áß∞‰∏∫Èù¢ÂêëÊï∞ÊçÆÊµÅÁöÑÂ§ÑÁêÜÊñπÂºè„ÄÇ</p>
<p>ÁªìÊûÑÂåñÁ®ãÂ∫èËÆæËÆ°ÈáåÊúÄÂ∞èÁöÑÁ®ãÂ∫èÂçïÂÖÉÊòØÂáΩÊï∞ÔºåÊØè‰∏™ÂáΩÊï∞ÈÉΩË¥üË¥£ÂÆåÊàê‰∏Ä‰∏™ÂäüËÉΩÔºåÁî®‰ª•Êé•Êî∂‰∏Ä‰∫õËæìÂÖ•Êï∞ÊçÆÔºåÂáΩÊï∞ÂØπËøô‰∫õËæìÂÖ•Êï∞ÊçÆËøõË°åÂ§ÑÁêÜÔºåÂ§ÑÁêÜÁªìÊùüÂêéËæìÂá∫‰∏Ä‰∫õÊï∞ÊçÆ„ÄÇÊï¥‰∏™ËΩØ‰ª∂Á≥ªÁªüÁî±‰∏Ä‰∏™‰∏™ÂáΩÊï∞ÁªÑÊàêÔºåÂÖ∂‰∏≠‰Ωú‰∏∫Á®ãÂ∫èÂÖ•Âè£ÁöÑÂáΩÊï∞Ë¢´Áß∞‰∏∫‰∏ªÂáΩÊï∞Ôºå‰∏ªÂáΩÊï∞‰æùÊ¨°Ë∞ÉÁî®ÂÖ∂‰ªñÊôÆÈÄöÂáΩÊï∞ÔºåÊôÆÈÄöÂáΩÊï∞‰πãÈó¥‰æùÊ¨°Ë∞ÉÁî®Ôºå‰ªéËÄåÂÆåÊàêÊï¥‰∏™ËΩØ‰ª∂Á≥ªÁªüÁöÑÂäüËÉΩ„ÄÇ</p>
<p>ÊØè‰∏™ÂáΩÊï∞ÈÉΩÊòØÂÖ∑ÊúâËæìÂÖ•„ÄÅËæìÂá∫ÁöÑÂ≠êÁ≥ªÁªüÔºåÂáΩÊï∞ÁöÑËæìÂÖ•Êï∞ÊçÆÂåÖÊã¨ÂáΩÊï∞ÂΩ¢ÂèÇ„ÄÅÂÖ®Â±ÄÂèòÈáèÂíåÂ∏∏ÈáèÁ≠âÔºåÂáΩÊï∞ÁöÑËæìÂá∫Êï∞ÊçÆÂåÖÊã¨ÂáΩÊï∞ËøîÂõûÂÄº‰ª•Âèä‰º†Âá∫ÂèÇÊï∞Á≠â„ÄÇÁªìÊûÑÂåñÁ®ãÂ∫èËÆæËÆ°ÊñπÂºèÊúâÂ¶Ç‰∏ã‰∏§‰∏™Â±ÄÈôêÊÄßÔºö</p>
<ul>
<li>ËÆæËÆ°‰∏çÂ§üÁõ¥ËßÇÔºå‰∏é‰∫∫Á±ª‰π†ÊÉØÊÄùÁª¥‰∏ç‰∏ÄËá¥„ÄÇÈááÁî®ÁªìÊûÑÂåñÁ®ãÂ∫èÂàÜÊûê„ÄÅËÆæËÆ°Êó∂ÔºåÂºÄÂèëËÄÖÈúÄË¶ÅÂ∞ÜÂÆ¢ËßÇ‰∏ñÁïåÊ®°ÂûãÂàÜËß£Êàê‰∏Ä‰∏™‰∏™ÂäüËÉΩÔºåÊØè‰∏™ÂäüËÉΩÁî®‰ª•ÂÆåÊàê‰∏ÄÂÆöÁöÑÊï∞ÊçÆÂ§ÑÁêÜ„ÄÇ</li>
<li>ÈÄÇÂ∫îÊÄßÂ∑ÆÔºåÂèØÊâ©Â±ïÊÄß‰∏çÂº∫„ÄÇÁî±‰∫éÁªìÊûÑÂåñËÆæËÆ°ÈááÁî®Ëá™È°∂Âêë‰∏ãÁöÑËÆæËÆ°ÊñπÂºèÔºåÊâÄ‰ª•ÂΩìÁî®Êà∑ÁöÑÈúÄÊ±ÇÂèëÁîüÊîπÂèòÔºåÊàñÈúÄË¶Å‰øÆÊîπÁé∞ÊúâÁöÑÂÆûÁé∞ÊñπÂºèÊó∂ÔºåÈÉΩÈúÄË¶ÅËá™È°∂Âêë‰∏ãÂú∞‰øÆÊîπÊ®°ÂùóÁªìÊûÑÔºåËøôÁßçÊñπÂºèÁöÑÁª¥Êä§ÊàêÊú¨Áõ∏ÂΩìÈ´ò„ÄÇ</li>
</ul>
<h3 id="Èù¢ÂêëÂØπË±°ÁöÑ‰∏âÂ§ßÁâπÂæÅÊòØ‰ªÄ‰πàÔºü"><a href="#Èù¢ÂêëÂØπË±°ÁöÑ‰∏âÂ§ßÁâπÂæÅÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="Èù¢ÂêëÂØπË±°ÁöÑ‰∏âÂ§ßÁâπÂæÅÊòØ‰ªÄ‰πàÔºü"></a>Èù¢ÂêëÂØπË±°ÁöÑ‰∏âÂ§ßÁâπÂæÅÊòØ‰ªÄ‰πàÔºü</h3><p>Èù¢ÂêëÂØπË±°ÁöÑÁ®ãÂ∫èËÆæËÆ°ÊñπÊ≥ïÂÖ∑Êúâ‰∏â‰∏™Âü∫Êú¨ÁâπÂæÅÔºöÂ∞ÅË£Ö„ÄÅÁªßÊâø„ÄÅÂ§öÊÄÅ„ÄÇÂÖ∂‰∏≠ÔºåÂ∞ÅË£ÖÊåáÁöÑÊòØÂ∞ÜÂØπË±°ÁöÑÂÆûÁé∞ÁªÜËäÇÈöêËóèËµ∑Êù•ÔºåÁÑ∂ÂêéÈÄöËøá‰∏Ä‰∫õÂÖ¨Áî®ÊñπÊ≥ïÊù•Êö¥Èú≤ËØ•ÂØπË±°ÁöÑÂäüËÉΩÔºõÁªßÊâøÊòØÈù¢ÂêëÂØπË±°ÂÆûÁé∞ËΩØ‰ª∂Â§çÁî®ÁöÑÈáçË¶ÅÊâãÊÆµÔºåÂΩìÂ≠êÁ±ªÁªßÊâøÁà∂Á±ªÂêéÔºåÂ≠êÁ±ª‰Ωú‰∏∫‰∏ÄÁßçÁâπÊÆäÁöÑÁà∂Á±ªÔºåÂ∞ÜÁõ¥Êé•Ëé∑ÂæóÁà∂Á±ªÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºõÂ§öÊÄÅÊåáÁöÑÊòØÂ≠êÁ±ªÂØπË±°ÂèØ‰ª•Áõ¥Êé•ËµãÁªôÁà∂Á±ªÂèòÈáèÔºå‰ΩÜËøêË°åÊó∂‰æùÁÑ∂Ë°®Áé∞Âá∫Â≠êÁ±ªÁöÑË°å‰∏∫ÁâπÂæÅÔºåËøôÊÑèÂë≥ÁùÄÂêå‰∏Ä‰∏™Á±ªÂûãÁöÑÂØπË±°Âú®ÊâßË°åÂêå‰∏Ä‰∏™ÊñπÊ≥ïÊó∂ÔºåÂèØËÉΩË°®Áé∞Âá∫Â§öÁßçË°å‰∏∫ÁâπÂæÅ„ÄÇ</p>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>ÊäΩË±°‰πüÊòØÈù¢ÂêëÂØπË±°ÁöÑÈáçË¶ÅÈÉ®ÂàÜÔºåÊäΩË±°Â∞±ÊòØÂøΩÁï•‰∏Ä‰∏™‰∏ªÈ¢ò‰∏≠‰∏éÂΩìÂâçÁõÆÊ†áÊó†ÂÖ≥ÁöÑÈÇ£‰∫õÊñπÈù¢Ôºå‰ª•‰æøÊõ¥ÂÖÖÂàÜÂú∞Ê≥®ÊÑè‰∏éÂΩìÂâçÁõÆÊ†áÊúâÂÖ≥ÁöÑÊñπÈù¢„ÄÇÊäΩË±°Âπ∂‰∏çÊâìÁÆó‰∫ÜËß£ÂÖ®ÈÉ®ÈóÆÈ¢òÔºåËÄåÂè™ÊòØËÄÉËôëÈÉ®ÂàÜÈóÆÈ¢ò„ÄÇ‰æãÂ¶ÇÔºåÈúÄË¶ÅËÄÉÂØüPersonÂØπË±°Êó∂Ôºå‰∏çÂèØËÉΩÂú®Á®ãÂ∫è‰∏≠ÊääPersonÁöÑÊâÄÊúâÁªÜËäÇÈÉΩÂÆö‰πâÂá∫Êù•ÔºåÈÄöÂ∏∏Âè™ËÉΩÂÆö‰πâPersonÁöÑÈÉ®ÂàÜÊï∞ÊçÆ„ÄÅÈÉ®ÂàÜË°å‰∏∫ÁâπÂæÅÔºåËÄåËøô‰∫õÊï∞ÊçÆ„ÄÅË°å‰∏∫ÁâπÂæÅÊòØËΩØ‰ª∂Á≥ªÁªüÊâÄÂÖ≥ÂøÉÁöÑÈÉ®ÂàÜ„ÄÇ</p>
<h3 id="Â∞ÅË£ÖÁöÑÁõÆÁöÑÊòØ‰ªÄ‰πàÔºå‰∏∫‰ªÄ‰πàË¶ÅÊúâÂ∞ÅË£ÖÔºü"><a href="#Â∞ÅË£ÖÁöÑÁõÆÁöÑÊòØ‰ªÄ‰πàÔºå‰∏∫‰ªÄ‰πàË¶ÅÊúâÂ∞ÅË£ÖÔºü" class="headerlink" title="Â∞ÅË£ÖÁöÑÁõÆÁöÑÊòØ‰ªÄ‰πàÔºå‰∏∫‰ªÄ‰πàË¶ÅÊúâÂ∞ÅË£ÖÔºü"></a>Â∞ÅË£ÖÁöÑÁõÆÁöÑÊòØ‰ªÄ‰πàÔºå‰∏∫‰ªÄ‰πàË¶ÅÊúâÂ∞ÅË£ÖÔºü</h3><p>Â∞ÅË£ÖÊòØÈù¢ÂêëÂØπË±°ÁºñÁ®ãËØ≠Ë®ÄÂØπÂÆ¢ËßÇ‰∏ñÁïåÁöÑÊ®°ÊãüÔºåÂú®ÂÆ¢ËßÇ‰∏ñÁïåÈáåÔºåÂØπË±°ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØÈÉΩË¢´ÈöêËóèÂú®ÂØπË±°ÂÜÖÈÉ®ÔºåÂ§ñÁïåÊó†Ê≥ïÁõ¥Êé•Êìç‰ΩúÂíå‰øÆÊîπ„ÄÇÂØπ‰∏Ä‰∏™Á±ªÊàñÂØπË±°ÂÆûÁé∞ËâØÂ•ΩÁöÑÂ∞ÅË£ÖÔºåÂèØ‰ª•ÂÆûÁé∞‰ª•‰∏ãÁõÆÁöÑÔºö</p>
<ul>
<li>ÈöêËóèÁ±ªÁöÑÂÆûÁé∞ÁªÜËäÇÔºõ</li>
<li>ËÆ©‰ΩøÁî®ËÄÖÂè™ËÉΩÈÄöËøá‰∫ãÂÖàÈ¢ÑÂÆöÁöÑÊñπÊ≥ïÊù•ËÆøÈóÆÊï∞ÊçÆÔºå‰ªéËÄåÂèØ‰ª•Âú®ËØ•ÊñπÊ≥ïÈáåÂä†ÂÖ•ÊéßÂà∂ÈÄªËæëÔºåÈôêÂà∂ÂØπÊàêÂëòÂèòÈáèÁöÑ‰∏çÂêàÁêÜËÆøÈóÆÔºõ</li>
<li>ÂèØËøõË°åÊï∞ÊçÆÊ£ÄÊü•Ôºå‰ªéËÄåÊúâÂà©‰∫é‰øùËØÅÂØπË±°‰ø°ÊÅØÁöÑÂÆåÊï¥ÊÄßÔºõ</li>
<li>‰æø‰∫é‰øÆÊîπÔºåÊèêÈ´ò‰ª£Á†ÅÁöÑÂèØÁª¥Êä§ÊÄß„ÄÇ</li>
</ul>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>‰∏∫‰∫ÜÂÆûÁé∞ËâØÂ•ΩÁöÑÂ∞ÅË£ÖÔºåÈúÄË¶Å‰ªé‰∏§‰∏™ÊñπÈù¢ËÄÉËôëÔºö</p>
<ul>
<li>Â∞ÜÂØπË±°ÁöÑÊàêÂëòÂèòÈáèÂíåÂÆûÁé∞ÁªÜËäÇÈöêËóèËµ∑Êù•Ôºå‰∏çÂÖÅËÆ∏Â§ñÈÉ®Áõ¥Êé•ËÆøÈóÆÔºõ</li>
<li>ÊääÊñπÊ≥ïÊö¥Èú≤Âá∫Êù•ÔºåËÆ©ÊñπÊ≥ïÊù•ÊéßÂà∂ÂØπËøô‰∫õÊàêÂëòÂèòÈáèËøõË°åÂÆâÂÖ®ÁöÑËÆøÈóÆÂíåÊìç‰Ωú„ÄÇ</li>
</ul>
<p>Â∞ÅË£ÖÂÆûÈôÖ‰∏äÊúâ‰∏§‰∏™ÊñπÈù¢ÁöÑÂê´‰πâÔºöÊääËØ•ÈöêËóèÁöÑÈöêËóèËµ∑Êù•ÔºåÊääËØ•Êö¥Èú≤ÁöÑÊö¥Èú≤Âá∫Êù•„ÄÇËøô‰∏§‰∏™ÊñπÈù¢ÈÉΩÈúÄË¶ÅÈÄöËøá‰ΩøÁî®JavaÊèê‰æõÁöÑËÆøÈóÆÊéßÂà∂Á¨¶Êù•ÂÆûÁé∞„ÄÇ</p>
<h3 id="ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÂ§öÊÄÅÁöÑÁêÜËß£"><a href="#ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÂ§öÊÄÅÁöÑÁêÜËß£" class="headerlink" title="ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÂ§öÊÄÅÁöÑÁêÜËß£"></a>ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÂ§öÊÄÅÁöÑÁêÜËß£</h3><p>Âõ†‰∏∫Â≠êÁ±ªÂÖ∂ÂÆûÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÁà∂Á±ªÔºåÂõ†Ê≠§JavaÂÖÅËÆ∏Êää‰∏Ä‰∏™Â≠êÁ±ªÂØπË±°Áõ¥Êé•ËµãÁªô‰∏Ä‰∏™Áà∂Á±ªÂºïÁî®ÂèòÈáèÔºåÊó†È°ª‰ªª‰ΩïÁ±ªÂûãËΩ¨Êç¢ÔºåÊàñËÄÖË¢´Áß∞‰∏∫Âêë‰∏äËΩ¨ÂûãÔºåÂêë‰∏äËΩ¨ÂûãÁî±Á≥ªÁªüËá™Âä®ÂÆåÊàê„ÄÇ</p>
<p>ÂΩìÊää‰∏Ä‰∏™Â≠êÁ±ªÂØπË±°Áõ¥Êé•ËµãÁªôÁà∂Á±ªÂºïÁî®ÂèòÈáèÊó∂Ôºå‰æãÂ¶Ç BaseClass obj = new SubClass();ÔºåËøô‰∏™objÂºïÁî®ÂèòÈáèÁöÑÁºñËØëÊó∂Á±ªÂûãÊòØBaseClassÔºåËÄåËøêË°åÊó∂Á±ªÂûãÊòØSubClassÔºåÂΩìËøêË°åÊó∂Ë∞ÉÁî®ËØ•ÂºïÁî®ÂèòÈáèÁöÑÊñπÊ≥ïÊó∂ÔºåÂÖ∂ÊñπÊ≥ïË°å‰∏∫ÊÄªÊòØË°®Áé∞Âá∫Â≠êÁ±ªÊñπÊ≥ïÁöÑË°å‰∏∫ÁâπÂæÅÔºåËÄå‰∏çÊòØÁà∂Á±ªÊñπÊ≥ïÁöÑË°å‰∏∫ÁâπÂæÅÔºåËøôÂ∞±ÂèØËÉΩÂá∫Áé∞ÔºöÁõ∏ÂêåÁ±ªÂûãÁöÑÂèòÈáè„ÄÅË∞ÉÁî®Âêå‰∏Ä‰∏™ÊñπÊ≥ïÊó∂ÂëàÁé∞Âá∫Â§öÁßç‰∏çÂêåÁöÑË°å‰∏∫ÁâπÂæÅÔºåËøôÂ∞±ÊòØÂ§öÊÄÅ„ÄÇ</p>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>Â§öÊÄÅÂèØ‰ª•ÊèêÈ´òÁ®ãÂ∫èÁöÑÂèØÊâ©Â±ïÊÄßÔºåÂú®ËÆæËÆ°Á®ãÂ∫èÊó∂ËÆ©‰ª£Á†ÅÊõ¥Âä†ÁÆÄÊ¥ÅËÄå‰ºòÈõÖ„ÄÇ</p>
<p>‰æãÂ¶ÇÊàëË¶ÅËÆæËÆ°‰∏Ä‰∏™Âè∏Êú∫Á±ªÔºå‰ªñÂèØ‰ª•ÂºÄËΩøËΩ¶„ÄÅÂ∑¥Â£´„ÄÅÂç°ËΩ¶Á≠âÁ≠âÔºåÁ§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Driver</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drive</span><span class="params">(Car car)</span> { ... }</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drive</span><span class="params">(Bus bus)</span> { ... }</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drive</span><span class="params">(Truck truck)</span> { ... }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®ËÆæËÆ°‰∏äËø∞‰ª£Á†ÅÊó∂ÔºåÊàëÂ∑≤ÈááÁî®‰∫ÜÈáçËΩΩÊú∫Âà∂ÔºåÂ∞ÜÊñπÊ≥ïÂêçËøõË°å‰∫ÜÁªü‰∏Ä„ÄÇËøôÊ†∑Âú®ËøõË°åË∞ÉÁî®Êó∂ÔºåÊó†ËÆ∫Ë¶ÅÂºÄ‰ªÄ‰πà‰∫§ÈÄöÂ∑•ÂÖ∑ÔºåÈÉΩÊòØÈÄöËøádriver.drive(obj)ËøôÊ†∑ÁöÑÊñπÂºèÊù•Ë∞ÉÁî®ÔºåÂØπË∞ÉÁî®ËÄÖË∂≥Â§üÁöÑÂèãÂ•Ω„ÄÇ</p>
<p>‰ΩÜÂØπ‰∫éÁ®ãÂ∫èÁöÑÂºÄÂèëËÄÖÊù•ËØ¥ÔºåËøôÊòæÂæóÁπÅÁêêÔºåÂõ†‰∏∫ÂÆûÈôÖ‰∏äËøô‰∏™Âè∏Êú∫ÂèØ‰ª•È©æÈ©∂Êõ¥Â§öÁöÑ‰∫§ÈÄöÂ∑•ÂÖ∑„ÄÇÂΩìÁ≥ªÁªüÈúÄË¶Å‰∏∫Ëøô‰∏™Âè∏Êú∫Â¢ûÂä†ËΩ¶ÂûãÊó∂ÔºåÂºÄÂèëËÄÖÂ∞±ÈúÄË¶ÅÁõ∏Â∫îÁöÑÂ¢ûÂä†driverÊñπÊ≥ïÔºåÁ±ª‰ººÁöÑ‰ª£Á†Å‰ºöÂ†ÜÁßØÁöÑË∂äÊù•Ë∂äÂ§öÔºåÊòæÂæóËáÉËÇø„ÄÇ</p>
<p>ÈááÁî®Â§öÊÄÅÁöÑÊñπÂºèÊù•ËÆæËÆ°‰∏äËø∞Á®ãÂ∫èÔºåÂ∞±‰ºöÂèòÂæóÁÆÄÊ¥ÅÂæàÂ§ö„ÄÇÊàë‰ª¨ÂèØ‰ª•‰∏∫ÊâÄÊúâÁöÑ‰∫§ÈÄöÂ∑•ÂÖ∑ÂÆö‰πâ‰∏Ä‰∏™Áà∂Á±ªVehicleÔºåÁÑ∂ÂêéÊåâÁÖßÂ¶Ç‰∏ãÁöÑÊñπÂºèËÆæËÆ°driveÊñπÊ≥ï„ÄÇË∞ÉÁî®Êó∂ÔºåÊàë‰ª¨ÂèØ‰ª•‰º†ÂÖ•VehicleÁ±ªÂûãÁöÑÂÆû‰æãÔºå‰πüÂèØ‰ª•‰º†ÂÖ•‰ªªÊÑèÁöÑVehicleÂ≠êÁ±ªÂûãÁöÑÂÆû‰æãÔºåÂØπ‰∫éË∞ÉÁî®ËÄÖÊù•ËØ¥‰∏ÄÊ†∑ÁöÑÊñπ‰æøÔºå‰ΩÜÂØπ‰∫éÂºÄÂèëËÄÖÊù•ËØ¥Ôºå‰ª£Á†ÅÂç¥ÂèòÂæóÂçÅÂàÜÁöÑÁÆÄÊ¥Å‰∫Ü„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Driver</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drive</span><span class="params">(Vehicle vehicle)</span> { ... }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Java‰∏≠ÁöÑÂ§öÊÄÅÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü"><a href="#Java‰∏≠ÁöÑÂ§öÊÄÅÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü" class="headerlink" title="Java‰∏≠ÁöÑÂ§öÊÄÅÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü"></a>Java‰∏≠ÁöÑÂ§öÊÄÅÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü</h3><p>Â§öÊÄÅÁöÑÂÆûÁé∞Á¶ª‰∏çÂºÄÁªßÊâøÔºåÂú®ËÆæËÆ°Á®ãÂ∫èÊó∂ÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÂèÇÊï∞ÁöÑÁ±ªÂûãÂÆö‰πâ‰∏∫Áà∂Á±ªÂûã„ÄÇÂú®Ë∞ÉÁî®Á®ãÂ∫èÊó∂ÔºåÂàôÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÊÉÖÂÜµÔºå‰º†ÂÖ•ËØ•Áà∂Á±ªÂûãÁöÑÊüê‰∏™Â≠êÁ±ªÂûãÁöÑÂÆû‰æãÔºåËøôÊ†∑Â∞±ÂÆûÁé∞‰∫ÜÂ§öÊÄÅ„ÄÇÂØπ‰∫éÁà∂Á±ªÂûãÔºåÂèØ‰ª•Êúâ‰∏âÁßçÂΩ¢ÂºèÔºåÂç≥ÊôÆÈÄöÁöÑÁ±ª„ÄÅÊäΩË±°Á±ª„ÄÅÊé•Âè£„ÄÇÂØπ‰∫éÂ≠êÁ±ªÂûãÔºåÂàôË¶ÅÊ†πÊçÆÂÆÉËá™Ë∫´ÁöÑÁâπÂæÅÔºåÈáçÂÜôÁà∂Á±ªÁöÑÊüê‰∫õÊñπÊ≥ïÔºåÊàñÂÆûÁé∞ÊäΩË±°Á±ª/Êé•Âè£ÁöÑÊüê‰∫õÊäΩË±°ÊñπÊ≥ï„ÄÇ</p>
<h3 id="Java‰∏∫‰ªÄ‰πàÊòØÂçïÁªßÊâøÔºå‰∏∫‰ªÄ‰πà‰∏çËÉΩÂ§öÁªßÊâøÔºü"><a href="#Java‰∏∫‰ªÄ‰πàÊòØÂçïÁªßÊâøÔºå‰∏∫‰ªÄ‰πà‰∏çËÉΩÂ§öÁªßÊâøÔºü" class="headerlink" title="Java‰∏∫‰ªÄ‰πàÊòØÂçïÁªßÊâøÔºå‰∏∫‰ªÄ‰πà‰∏çËÉΩÂ§öÁªßÊâøÔºü"></a>Java‰∏∫‰ªÄ‰πàÊòØÂçïÁªßÊâøÔºå‰∏∫‰ªÄ‰πà‰∏çËÉΩÂ§öÁªßÊâøÔºü</h3><p>È¶ñÂÖàÔºåJavaÊòØÂçïÁªßÊâøÁöÑÔºåÊåáÁöÑÊòØJava‰∏≠‰∏Ä‰∏™Á±ªÂè™ËÉΩÊúâ‰∏Ä‰∏™Áõ¥Êé•ÁöÑÁà∂Á±ª„ÄÇJava‰∏çËÉΩÂ§öÁªßÊâøÔºåÂàôÊòØËØ¥Java‰∏≠‰∏Ä‰∏™Á±ª‰∏çËÉΩÁõ¥Êé•ÁªßÊâøÂ§ö‰∏™Áà∂Á±ª„ÄÇ</p>
<p>ÂÖ∂Ê¨°ÔºåJavaÂú®ËÆæËÆ°Êó∂ÂÄüÈâ¥‰∫ÜC++ÁöÑËØ≠Ê≥ïÔºåËÄåC++ÊòØÊîØÊåÅÂ§öÁªßÊâøÁöÑ„ÄÇJavaËØ≠Ë®Ä‰πãÊâÄ‰ª•ÊëíÂºÉ‰∫ÜÂ§öÁªßÊâøÁöÑËøôÈ°πÁâπÂæÅÔºåÊòØÂõ†‰∏∫Â§öÁªßÊâøÂÆπÊòì‰∫ßÁîüÊ∑∑Ê∑Ü„ÄÇÊØîÂ¶ÇÔºå‰∏§‰∏™Áà∂Á±ª‰∏≠ÂåÖÂê´Áõ∏ÂêåÁöÑÊñπÊ≥ïÊó∂ÔºåÂ≠êÁ±ªÂú®Ë∞ÉÁî®ËØ•ÊñπÊ≥ïÊàñÈáçÂÜôËØ•ÊñπÊ≥ïÊó∂Â∞±‰ºöËø∑ÊÉë„ÄÇ</p>
<p>ÂáÜÁ°ÆÊù•ËØ¥ÔºåJavaÊòØÂèØ‰ª•ÂÆûÁé∞‚ÄùÂ§öÁªßÊâø‚ÄùÁöÑ„ÄÇÂõ†‰∏∫Â∞ΩÁÆ°‰∏Ä‰∏™Á±ªÂè™ËÉΩÊúâ‰∏Ä‰∏™Áõ¥Êé•Áà∂Á±ªÔºå‰ΩÜÊòØÂç¥ÂèØ‰ª•Êúâ‰ªªÊÑèÂ§ö‰∏™Èó¥Êé•ÁöÑÁà∂Á±ª„ÄÇËøôÊ†∑ÁöÑËÆæËÆ°ÊñπÂºèÔºåÈÅøÂÖç‰∫ÜÂ§öÁªßÊâøÊó∂ÊâÄ‰∫ßÁîüÁöÑÊ∑∑Ê∑Ü„ÄÇ</p>
<h3 id="ËØ¥‰∏ÄËØ¥ÈáçÂÜô‰∏éÈáçËΩΩÁöÑÂå∫Âà´"><a href="#ËØ¥‰∏ÄËØ¥ÈáçÂÜô‰∏éÈáçËΩΩÁöÑÂå∫Âà´" class="headerlink" title="ËØ¥‰∏ÄËØ¥ÈáçÂÜô‰∏éÈáçËΩΩÁöÑÂå∫Âà´"></a>ËØ¥‰∏ÄËØ¥ÈáçÂÜô‰∏éÈáçËΩΩÁöÑÂå∫Âà´</h3><p>ÈáçËΩΩÂèëÁîüÂú®Âêå‰∏Ä‰∏™Á±ª‰∏≠ÔºåËã•Â§ö‰∏™ÊñπÊ≥ï‰πãÈó¥ÊñπÊ≥ïÂêçÁõ∏Âêå„ÄÅÂèÇÊï∞ÂàóË°®‰∏çÂêåÔºåÂàôÂÆÉ‰ª¨ÊûÑÊàêÈáçËΩΩÁöÑÂÖ≥Á≥ª„ÄÇÈáçËΩΩ‰∏éÊñπÊ≥ïÁöÑËøîÂõûÂÄº‰ª•ÂèäËÆøÈóÆ‰øÆÈ•∞Á¨¶Êó†ÂÖ≥ÔºåÂç≥ÈáçËΩΩÁöÑÊñπÊ≥ï‰∏çËÉΩÊ†πÊçÆËøîÂõûÁ±ªÂûãËøõË°åÂå∫ÂàÜ„ÄÇ</p>
<p>ÈáçÂÜô</p>
<p>ÂèëÁîüÂú®Áà∂Á±ªÂ≠êÁ±ª‰∏≠ÔºåËã•Â≠êÁ±ªÊñπÊ≥ïÊÉ≥Ë¶ÅÂíåÁà∂Á±ªÊñπÊ≥ïÊûÑÊàêÈáçÂÜôÂÖ≥Á≥ªÔºåÂàôÂÆÉÁöÑÊñπÊ≥ïÂêç„ÄÅÂèÇÊï∞ÂàóË°®ÂøÖÈ°ª‰∏éÁà∂Á±ªÊñπÊ≥ïÁõ∏Âêå„ÄÇÂè¶Â§ñÔºåËøîÂõûÂÄºË¶ÅÂ∞è‰∫éÁ≠â‰∫éÁà∂Á±ªÊñπÊ≥ïÔºåÊäõÂá∫ÁöÑÂºÇÂ∏∏Ë¶ÅÂ∞è‰∫éÁ≠â‰∫éÁà∂Á±ªÊñπÊ≥ïÔºåËÆøÈóÆ‰øÆÈ•∞Á¨¶ÂàôË¶ÅÂ§ß‰∫éÁ≠â‰∫éÁà∂Á±ªÊñπÊ≥ï„ÄÇËøòÊúâÔºåËã•Áà∂Á±ªÊñπÊ≥ïÁöÑËÆøÈóÆ‰øÆÈ•∞Á¨¶‰∏∫privateÔºåÂàôÂ≠êÁ±ª‰∏çËÉΩÂØπÂÖ∂ÈáçÂÜô„ÄÇ</p>
<h3 id="ÊûÑÈÄ†ÊñπÊ≥ïËÉΩ‰∏çËÉΩÈáçÂÜôÔºü"><a href="#ÊûÑÈÄ†ÊñπÊ≥ïËÉΩ‰∏çËÉΩÈáçÂÜôÔºü" class="headerlink" title="ÊûÑÈÄ†ÊñπÊ≥ïËÉΩ‰∏çËÉΩÈáçÂÜôÔºü"></a>ÊûÑÈÄ†ÊñπÊ≥ïËÉΩ‰∏çËÉΩÈáçÂÜôÔºü</h3><p>ÊûÑÈÄ†ÊñπÊ≥ï‰∏çËÉΩÈáçÂÜô„ÄÇÂõ†‰∏∫ÊûÑÈÄ†ÊñπÊ≥ïÈúÄË¶ÅÂíåÁ±ª‰øùÊåÅÂêåÂêçÔºåËÄåÈáçÂÜôÁöÑË¶ÅÊ±ÇÊòØÂ≠êÁ±ªÊñπÊ≥ïË¶ÅÂíåÁà∂Á±ªÊñπÊ≥ï‰øùÊåÅÂêåÂêç„ÄÇÂ¶ÇÊûúÂÖÅËÆ∏ÈáçÂÜôÊûÑÈÄ†ÊñπÊ≥ïÁöÑËØùÔºåÈÇ£‰πàÂ≠êÁ±ª‰∏≠Â∞Ü‰ºöÂ≠òÂú®‰∏éÁ±ªÂêç‰∏çÂêåÁöÑÊûÑÈÄ†ÊñπÊ≥ïÔºåËøô‰∏éÊûÑÈÄ†ÊñπÊ≥ïÁöÑË¶ÅÊ±ÇÊòØÁüõÁõæÁöÑ„ÄÇ</p>
<h3 id="‰ªãÁªç‰∏Ä‰∏ãObjectÁ±ª‰∏≠ÁöÑÊñπÊ≥ï"><a href="#‰ªãÁªç‰∏Ä‰∏ãObjectÁ±ª‰∏≠ÁöÑÊñπÊ≥ï" class="headerlink" title="‰ªãÁªç‰∏Ä‰∏ãObjectÁ±ª‰∏≠ÁöÑÊñπÊ≥ï"></a>‰ªãÁªç‰∏Ä‰∏ãObjectÁ±ª‰∏≠ÁöÑÊñπÊ≥ï</h3><p>ObjectÁ±ªÊèê‰æõ‰∫ÜÂ¶Ç‰∏ãÂá†‰∏™Â∏∏Áî®ÊñπÊ≥ïÔºö</p>
<ul>
<li>Class&lt;?&gt; getClass()ÔºöËøîÂõûËØ•ÂØπË±°ÁöÑËøêË°åÊó∂Á±ª„ÄÇ</li>
<li>boolean equals(Object obj)ÔºöÂà§Êñ≠ÊåáÂÆöÂØπË±°‰∏éËØ•ÂØπË±°ÊòØÂê¶Áõ∏Á≠â„ÄÇ</li>
<li>int hashCode()ÔºöËøîÂõûËØ•ÂØπË±°ÁöÑhashCodeÂÄº„ÄÇÂú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåObjectÁ±ªÁöÑhashCode()ÊñπÊ≥ïÊ†πÊçÆËØ•ÂØπË±°ÁöÑÂú∞ÂùÄÊù•ËÆ°ÁÆó„ÄÇ‰ΩÜÂæàÂ§öÁ±ªÈÉΩÈáçÂÜô‰∫ÜObjectÁ±ªÁöÑhashCode()ÊñπÊ≥ïÔºå‰∏çÂÜçÊ†πÊçÆÂú∞ÂùÄÊù•ËÆ°ÁÆóÂÖ∂hashCode()ÊñπÊ≥ïÂÄº„ÄÇ</li>
<li>String toString()ÔºöËøîÂõûËØ•ÂØπË±°ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ÔºåÂΩìÁ®ãÂ∫è‰ΩøÁî®System.out.println()ÊñπÊ≥ïËæìÂá∫‰∏Ä‰∏™ÂØπË±°ÔºåÊàñËÄÖÊääÊüê‰∏™ÂØπË±°ÂíåÂ≠óÁ¨¶‰∏≤ËøõË°åËøûÊé•ËøêÁÆóÊó∂ÔºåÁ≥ªÁªü‰ºöËá™Âä®Ë∞ÉÁî®ËØ•ÂØπË±°ÁöÑtoString()ÊñπÊ≥ïËøîÂõûËØ•ÂØπË±°ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫„ÄÇObjectÁ±ªÁöÑtoString()ÊñπÊ≥ïËøîÂõû ËøêË°åÊó∂Á±ªÂêç@ÂçÅÂÖ≠ËøõÂà∂hashCodeÂÄº Ê†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤Ôºå‰ΩÜÂæàÂ§öÁ±ªÈÉΩÈáçÂÜô‰∫ÜObjectÁ±ªÁöÑtoString()ÊñπÊ≥ïÔºåÁî®‰∫éËøîÂõûÂèØ‰ª•Ë°®Ëø∞ËØ•ÂØπË±°‰ø°ÊÅØÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ</li>
</ul>
<p>Âè¶Â§ñÔºåObjectÁ±ªËøòÊèê‰æõ‰∫Üwait()„ÄÅnotify()„ÄÅnotifyAll()ËøôÂá†‰∏™ÊñπÊ≥ïÔºåÈÄöËøáËøôÂá†‰∏™ÊñπÊ≥ïÂèØ‰ª•ÊéßÂà∂Á∫øÁ®ãÁöÑÊöÇÂÅúÂíåËøêË°å„ÄÇObjectÁ±ªËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™clone()ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÁî®‰∫éÂ∏ÆÂä©ÂÖ∂‰ªñÂØπË±°Êù•ÂÆûÁé∞‚ÄúËá™ÊàëÂÖãÈöÜ‚ÄùÔºåÊâÄË∞ì‚ÄúËá™ÊàëÂÖãÈöÜ‚ÄùÂ∞±ÊòØÂæóÂà∞‰∏Ä‰∏™ÂΩìÂâçÂØπË±°ÁöÑÂâØÊú¨ÔºåËÄå‰∏î‰∫åËÄÖ‰πãÈó¥ÂÆåÂÖ®ÈöîÁ¶ª„ÄÇÁî±‰∫éËØ•ÊñπÊ≥ï‰ΩøÁî®‰∫Üprotected‰øÆÈ•∞ÔºåÂõ†Ê≠§ÂÆÉÂè™ËÉΩË¢´Â≠êÁ±ªÈáçÂÜôÊàñË∞ÉÁî®„ÄÇ</p>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>ObjectÁ±ªËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™finalize()ÊñπÊ≥ïÔºåÂΩìÁ≥ªÁªü‰∏≠Ê≤°ÊúâÂºïÁî®ÂèòÈáèÂºïÁî®Âà∞ËØ•ÂØπË±°Êó∂ÔºåÂûÉÂúæÂõûÊî∂Âô®Ë∞ÉÁî®Ê≠§ÊñπÊ≥ïÊù•Ê∏ÖÁêÜËØ•ÂØπË±°ÁöÑËµÑÊ∫ê„ÄÇÂπ∂‰∏îÔºåÈíàÂØπÊüê‰∏Ä‰∏™ÂØπË±°ÔºåÂûÉÂúæÂõûÊî∂Âô®ÊúÄÂ§öÂè™‰ºöË∞ÉÁî®ÂÆÉÁöÑfinalize()ÊñπÊ≥ï‰∏ÄÊ¨°„ÄÇ</p>
<p>Ê≥®ÊÑèÔºåfinalize()ÊñπÊ≥ï‰ΩïÊó∂Ë∞ÉÁî®„ÄÅÊòØÂê¶Ë∞ÉÁî®ÈÉΩÊòØ‰∏çÁ°ÆÂÆöÁöÑÔºåÊàë‰ª¨‰πü‰∏çË¶Å‰∏ªÂä®Ë∞ÉÁî®finalize()ÊñπÊ≥ï„ÄÇ‰ªéJDK9ÂºÄÂßãÔºåËøô‰∏™ÊñπÊ≥ïË¢´Ê†áËÆ∞‰∏∫‰∏çÊé®Ëçê‰ΩøÁî®ÁöÑÊñπÊ≥ï„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaÂü∫Á°Ä(‰∏â)</title>
    <url>/p/c4f03879.html</url>
    <content><![CDATA[<html><head></head><body><h3 id="ËØ¥‰∏ÄËØ¥hashCode-Âíåequals-ÁöÑÂÖ≥Á≥ª"><a href="#ËØ¥‰∏ÄËØ¥hashCode-Âíåequals-ÁöÑÂÖ≥Á≥ª" class="headerlink" title="ËØ¥‰∏ÄËØ¥hashCode()Âíåequals()ÁöÑÂÖ≥Á≥ª"></a>ËØ¥‰∏ÄËØ¥hashCode()Âíåequals()ÁöÑÂÖ≥Á≥ª</h3><p>hashCode()Áî®‰∫éËé∑ÂèñÂìàÂ∏åÁ†ÅÔºàÊï£ÂàóÁ†ÅÔºâÔºåeauqls()Áî®‰∫éÊØîËæÉ‰∏§‰∏™ÂØπË±°ÊòØÂê¶Áõ∏Á≠âÔºåÂÆÉ‰ª¨Â∫îÈÅµÂÆàÂ¶Ç‰∏ãËßÑÂÆöÔºö</p>
<ul>
<li>Â¶ÇÊûú‰∏§‰∏™ÂØπË±°Áõ∏Á≠âÔºåÂàôÂÆÉ‰ª¨ÂøÖÈ°ªÊúâÁõ∏ÂêåÁöÑÂìàÂ∏åÁ†Å„ÄÇ</li>
<li>Â¶ÇÊûú‰∏§‰∏™ÂØπË±°ÊúâÁõ∏ÂêåÁöÑÂìàÂ∏åÁ†ÅÔºåÂàôÂÆÉ‰ª¨Êú™ÂøÖÁõ∏Á≠â„ÄÇ</li>
</ul>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>Âú®Java‰∏≠ÔºåSetÊé•Âè£‰ª£Ë°®Êó†Â∫èÁöÑ„ÄÅÂÖÉÁ¥†‰∏çÂèØÈáçÂ§çÁöÑÈõÜÂêàÔºåHashSetÂàôÊòØSetÊé•Âè£ÁöÑÂÖ∏ÂûãÂÆûÁé∞„ÄÇ</p>
<p>ÂΩìÂêëHashSet‰∏≠Âä†ÂÖ•‰∏Ä‰∏™ÂÖÉÁ¥†Êó∂ÔºåÂÆÉÈúÄË¶ÅÂà§Êñ≠ÈõÜÂêà‰∏≠ÊòØÂê¶Â∑≤ÁªèÂåÖÂê´‰∫ÜËøô‰∏™ÂÖÉÁ¥†Ôºå‰ªéËÄåÈÅøÂÖçÈáçÂ§çÂ≠òÂÇ®„ÄÇÁî±‰∫éËøô‰∏™Âà§Êñ≠ÂçÅÂàÜÁöÑÈ¢ëÁπÅÔºåÊâÄ‰ª•Ë¶ÅËÆ≤Ê±ÇÊïàÁéáÔºåÁªù‰∏çËÉΩÈááÁî®ÈÅçÂéÜÈõÜÂêàÈÄê‰∏™ÂÖÉÁ¥†ËøõË°åÊØîËæÉÁöÑÊñπÂºè„ÄÇÂÆûÈôÖ‰∏äÔºåHashSetÊòØÈÄöËøáËé∑ÂèñÂØπË±°ÁöÑÂìàÂ∏åÁ†ÅÔºå‰ª•ÂèäË∞ÉÁî®ÂØπË±°ÁöÑequals()ÊñπÊ≥ïÊù•Ëß£ÂÜ≥Ëøô‰∏™Âà§Êñ≠ÈóÆÈ¢òÁöÑ„ÄÇ</p>
<p>HashSetÈ¶ñÂÖà‰ºöË∞ÉÁî®ÂØπË±°ÁöÑhashCode()ÊñπÊ≥ïËé∑ÂèñÂÖ∂ÂìàÂ∏åÁ†ÅÔºåÂπ∂ÈÄöËøáÂìàÂ∏åÁ†ÅÁ°ÆÂÆöËØ•ÂØπË±°Âú®ÈõÜÂêà‰∏≠Â≠òÊîæÁöÑ‰ΩçÁΩÆ„ÄÇÂÅáËÆæËøô‰∏™‰ΩçÁΩÆ‰πãÂâçÂ∑≤ÁªèÂ≠ò‰∫Ü‰∏Ä‰∏™ÂØπË±°ÔºåÂàôHashSet‰ºöË∞ÉÁî®equals()ÂØπ‰∏§‰∏™ÂØπË±°ËøõË°åÊØîËæÉ„ÄÇËã•Áõ∏Á≠âÂàôËØ¥ÊòéÂØπË±°ÈáçÂ§çÔºåÊ≠§Êó∂‰∏ç‰ºö‰øùÂ≠òÊñ∞Âä†ÁöÑÂØπË±°„ÄÇËã•‰∏çÁ≠âËØ¥ÊòéÂØπË±°‰∏çÈáçÂ§çÔºå‰ΩÜÊòØÂÆÉ‰ª¨Â≠òÂÇ®ÁöÑ‰ΩçÁΩÆÂèëÁîü‰∫ÜÁ¢∞ÊíûÔºåÊ≠§Êó∂HashSet‰ºöÈááÁî®ÈìæÂºèÁªìÊûÑÂú®Âêå‰∏Ä‰ΩçÁΩÆ‰øùÂ≠òÂ§ö‰∏™ÂØπË±°ÔºåÂç≥Â∞ÜÊñ∞Âä†ÂØπË±°ÈìæÊé•Âà∞ÂéüÊù•ÂØπË±°ÁöÑ‰πãÂêé„ÄÇ‰πãÂêéÔºåÂÜçÊúâÊñ∞Ê∑ªÂä†ÂØπË±°‰πüÊò†Â∞ÑÂà∞Ëøô‰∏™‰ΩçÁΩÆÊó∂ÔºåÂ∞±ÈúÄË¶Å‰∏éËøô‰∏™‰ΩçÁΩÆ‰∏≠ÊâÄÊúâÁöÑÂØπË±°ËøõË°åequals()ÊØîËæÉÔºåËã•Âùá‰∏çÁõ∏Á≠âÂàôÂ∞ÜÂÖ∂ÈìæÂà∞ÊúÄÂêé‰∏Ä‰∏™ÂØπË±°‰πãÂêé„ÄÇ</p>
<h3 id="‰∏∫‰ªÄ‰πàË¶ÅÈáçÂÜôhashCode-Âíåequals-Ôºü"><a href="#‰∏∫‰ªÄ‰πàË¶ÅÈáçÂÜôhashCode-Âíåequals-Ôºü" class="headerlink" title="‰∏∫‰ªÄ‰πàË¶ÅÈáçÂÜôhashCode()Âíåequals()Ôºü"></a>‰∏∫‰ªÄ‰πàË¶ÅÈáçÂÜôhashCode()Âíåequals()Ôºü</h3><p>ObjectÁ±ªÊèê‰æõÁöÑequals()ÊñπÊ≥ïÈªòËÆ§ÊòØÁî®==Êù•ËøõË°åÊØîËæÉÁöÑÔºå‰πüÂ∞±ÊòØËØ¥Âè™Êúâ‰∏§‰∏™ÂØπË±°ÊòØÂêå‰∏Ä‰∏™ÂØπË±°Êó∂ÔºåÊâçËÉΩËøîÂõûÁõ∏Á≠âÁöÑÁªìÊûú„ÄÇËÄåÂÆûÈôÖÁöÑ‰∏öÂä°‰∏≠ÔºåÊàë‰ª¨ÈÄöÂ∏∏ÁöÑÈúÄÊ±ÇÊòØÔºåËã•‰∏§‰∏™‰∏çÂêåÁöÑÂØπË±°ÂÆÉ‰ª¨ÁöÑÂÜÖÂÆπÊòØÁõ∏ÂêåÁöÑÔºåÂ∞±ËÆ§‰∏∫ÂÆÉ‰ª¨Áõ∏Á≠â„ÄÇÈâ¥‰∫éËøôÁßçÊÉÖÂÜµÔºåObjectÁ±ª‰∏≠equals()ÊñπÊ≥ïÁöÑÈªòËÆ§ÂÆûÁé∞ÊòØÊ≤°ÊúâÂÆûÁî®‰ª∑ÂÄºÁöÑÔºåÊâÄ‰ª•ÈÄöÂ∏∏ÈÉΩË¶ÅÈáçÂÜô„ÄÇ</p>
<p>Áî±‰∫éhashCode()‰∏éequals()ÂÖ∑ÊúâËÅîÂä®ÂÖ≥Á≥ªÔºàÂèÇËÄÉ‚ÄúËØ¥‰∏ÄËØ¥hashCode()Âíåequals()ÁöÑÂÖ≥Á≥ª‚Äù‰∏ÄÈ¢òÔºâÔºåÊâÄ‰ª•equals()ÊñπÊ≥ïÈáçÂÜôÊó∂ÔºåÈÄöÂ∏∏‰πüË¶ÅÂ∞ÜhashCode()ËøõË°åÈáçÂÜôÔºå‰ΩøÂæóËøô‰∏§‰∏™ÊñπÊ≥ïÂßãÁªàÊª°Ë∂≥Áõ∏ÂÖ≥ÁöÑÁ∫¶ÂÆö„ÄÇ</p>
<h3 id="Âíåequals-Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#Âíåequals-Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="==Âíåequals()Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>==Âíåequals()Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h3><p>==ËøêÁÆóÁ¨¶Ôºö</p>
<ul>
<li>‰ΩúÁî®‰∫éÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÊó∂ÔºåÊòØÊØîËæÉ‰∏§‰∏™Êï∞ÂÄºÊòØÂê¶Áõ∏Á≠âÔºõ</li>
<li>‰ΩúÁî®‰∫éÂºïÁî®Êï∞ÊçÆÁ±ªÂûãÊó∂ÔºåÊòØÊØîËæÉ‰∏§‰∏™ÂØπË±°ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊòØÂê¶Áõ∏ÂêåÔºåÂç≥Âà§Êñ≠ÂÆÉ‰ª¨ÊòØÂê¶‰∏∫Âêå‰∏Ä‰∏™ÂØπË±°Ôºõ</li>
</ul>
<p>equals()ÊñπÊ≥ïÔºö</p>
<ul>
<li>Ê≤°ÊúâÈáçÂÜôÊó∂ÔºåObjectÈªòËÆ§‰ª• == Êù•ÂÆûÁé∞ÔºåÂç≥ÊØîËæÉ‰∏§‰∏™ÂØπË±°ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊòØÂê¶Áõ∏ÂêåÔºõ</li>
<li>ËøõË°åÈáçÂÜôÂêéÔºå‰∏ÄËà¨‰ºöÊåâÁÖßÂØπË±°ÁöÑÂÜÖÂÆπÊù•ËøõË°åÊØîËæÉÔºåËã•‰∏§‰∏™ÂØπË±°ÂÜÖÂÆπÁõ∏ÂêåÂàôËÆ§‰∏∫ÂØπË±°Áõ∏Á≠âÔºåÂê¶ÂàôËÆ§‰∏∫ÂØπË±°‰∏çÁ≠â„ÄÇ</li>
</ul>
<h3 id="StringÁ±ªÊúâÂì™‰∫õÊñπÊ≥ïÔºü"><a href="#StringÁ±ªÊúâÂì™‰∫õÊñπÊ≥ïÔºü" class="headerlink" title="StringÁ±ªÊúâÂì™‰∫õÊñπÊ≥ïÔºü"></a>StringÁ±ªÊúâÂì™‰∫õÊñπÊ≥ïÔºü</h3><p>StringÁ±ªÊòØJavaÊúÄÂ∏∏Áî®ÁöÑAPIÔºåÂÆÉÂåÖÂê´‰∫ÜÂ§ßÈáèÂ§ÑÁêÜÂ≠óÁ¨¶‰∏≤ÁöÑÊñπÊ≥ïÔºåÊØîËæÉÂ∏∏Áî®ÁöÑÊúâÔºö</p>
<ul>
<li>char charAt(int index)ÔºöËøîÂõûÊåáÂÆöÁ¥¢ÂºïÂ§ÑÁöÑÂ≠óÁ¨¶Ôºõ</li>
<li>String substring(int beginIndex, int endIndex)Ôºö‰ªéÊ≠§Â≠óÁ¨¶‰∏≤‰∏≠Êà™ÂèñÂá∫‰∏ÄÈÉ®ÂàÜÂ≠êÂ≠óÁ¨¶‰∏≤Ôºõ</li>
<li>String[] split(String regex)Ôºö‰ª•ÊåáÂÆöÁöÑËßÑÂàôÂ∞ÜÊ≠§Â≠óÁ¨¶‰∏≤ÂàÜÂâ≤ÊàêÊï∞ÁªÑÔºõ</li>
<li>String trim()ÔºöÂà†Èô§Â≠óÁ¨¶‰∏≤ÂâçÂØºÂíåÂêéÁΩÆÁöÑÁ©∫Ê†ºÔºõ</li>
<li>int indexOf(String str)ÔºöËøîÂõûÂ≠ê‰∏≤Âú®Ê≠§Â≠óÁ¨¶‰∏≤È¶ñÊ¨°Âá∫Áé∞ÁöÑÁ¥¢ÂºïÔºõ</li>
<li>int lastIndexOf(String str)ÔºöËøîÂõûÂ≠ê‰∏≤Âú®Ê≠§Â≠óÁ¨¶‰∏≤ÊúÄÂêéÂá∫Áé∞ÁöÑÁ¥¢ÂºïÔºõ</li>
<li>boolean startsWith(String prefix)ÔºöÂà§Êñ≠Ê≠§Â≠óÁ¨¶‰∏≤ÊòØÂê¶‰ª•ÊåáÂÆöÁöÑÂâçÁºÄÂºÄÂ§¥Ôºõ</li>
<li>boolean endsWith(String suffix)ÔºöÂà§Êñ≠Ê≠§Â≠óÁ¨¶‰∏≤ÊòØÂê¶‰ª•ÊåáÂÆöÁöÑÂêéÁºÄÁªìÂ∞æÔºõ</li>
<li>String toUpperCase()ÔºöÂ∞ÜÊ≠§Â≠óÁ¨¶‰∏≤‰∏≠ÊâÄÊúâÁöÑÂ≠óÁ¨¶Â§ßÂÜôÔºõ</li>
<li>String toLowerCase()ÔºöÂ∞ÜÊ≠§Â≠óÁ¨¶‰∏≤‰∏≠ÊâÄÊúâÁöÑÂ≠óÁ¨¶Â∞èÂÜôÔºõ</li>
<li>String replaceFirst(String regex, String replacement)ÔºöÁî®ÊåáÂÆöÂ≠óÁ¨¶‰∏≤ÊõøÊç¢Á¨¨‰∏Ä‰∏™ÂåπÈÖçÁöÑÂ≠ê‰∏≤Ôºõ</li>
<li>String replaceAll(String regex, String replacement)ÔºöÁî®ÊåáÂÆöÂ≠óÁ¨¶‰∏≤ÊõøÊç¢ÊâÄÊúâÁöÑÂåπÈÖçÁöÑÂ≠ê‰∏≤„ÄÇ</li>
</ul>
<p><strong>Ê≥®ÊÑè‰∫ãÈ°π</strong></p>
<p>StringÁ±ªÁöÑÊñπÊ≥ïÂ§™Â§ö‰∫ÜÔºå‰Ω†Ê≤°ÂøÖË¶ÅÈÉΩËÆ∞‰∏ãÊù•ÔºåÊõ¥‰∏çÈúÄË¶Å‰∏Ä‰∏ÄÂàó‰∏æ„ÄÇÈù¢ËØïÊó∂ËÉΩËØ¥Âá∫‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÊñπÊ≥ïÔºåË°®Áé∞Âá∫ÂØπËøô‰∏™Á±ªË∂≥Â§üÁöÑÁÜüÊÇâÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÂè¶Â§ñÔºåÂª∫ËÆÆ‰Ω†ÊåëÂá†‰∏™ÊñπÊ≥ï‰ªîÁªÜÁúãÁúãÊ∫êÁ†ÅÂÆûÁé∞ÔºåÈù¢ËØïÊó∂ÂèØ‰ª•ÈáçÁÇπËØ¥ËøôÂá†‰∏™ÊñπÊ≥ï„ÄÇ</p>
<h3 id="StringÂèØ‰ª•Ë¢´ÁªßÊâøÂêóÔºü"><a href="#StringÂèØ‰ª•Ë¢´ÁªßÊâøÂêóÔºü" class="headerlink" title="StringÂèØ‰ª•Ë¢´ÁªßÊâøÂêóÔºü"></a>StringÂèØ‰ª•Ë¢´ÁªßÊâøÂêóÔºü</h3><p>StringÁ±ªÁî±final‰øÆÈ•∞ÔºåÊâÄ‰ª•‰∏çËÉΩË¢´ÁªßÊâø„ÄÇ</p>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>Âú®Java‰∏≠ÔºåStringÁ±ªË¢´ËÆæËÆ°‰∏∫‰∏çÂèØÂèòÁ±ªÔºå‰∏ªË¶ÅË°®Áé∞Âú®ÂÆÉ‰øùÂ≠òÂ≠óÁ¨¶‰∏≤ÁöÑÊàêÂëòÂèòÈáèÊòØfinalÁöÑ„ÄÇ</p>
<ul>
<li>Java 9‰πãÂâçÂ≠óÁ¨¶‰∏≤ÈááÁî®char[]Êï∞ÁªÑÊù•‰øùÂ≠òÂ≠óÁ¨¶ÔºåÂç≥ private final char[] valueÔºõ</li>
<li>Java 9ÂÅö‰∫ÜÊîπËøõÔºåÈááÁî®byte[]Êï∞ÁªÑÊù•‰øùÂ≠òÂ≠óÁ¨¶ÔºåÂç≥ private final byte[] valueÔºõ</li>
</ul>
<p>‰πãÊâÄ‰ª•Ë¶ÅÊääStringÁ±ªËÆæËÆ°‰∏∫‰∏çÂèØÂèòÁ±ªÔºå‰∏ªË¶ÅÊòØÂá∫‰∫éÂÆâÂÖ®ÂíåÊÄßËÉΩÁöÑËÄÉËôëÔºåÂèØÂΩíÁ∫≥‰∏∫Â¶Ç‰∏ã4ÁÇπ„ÄÇ</p>
<ul>
<li>Áî±‰∫éÂ≠óÁ¨¶‰∏≤Êó†ËÆ∫Âú®‰ªª‰Ωï Java Á≥ªÁªü‰∏≠ÈÉΩÂπøÊ≥õ‰ΩøÁî®Ôºå‰ºöÁî®Êù•Â≠òÂÇ®ÊïèÊÑü‰ø°ÊÅØÔºåÂ¶ÇË¥¶Âè∑ÔºåÂØÜÁ†ÅÔºåÁΩëÁªúË∑ØÂæÑÔºåÊñá‰ª∂Â§ÑÁêÜÁ≠âÂú∫ÊôØÈáåÔºå‰øùËØÅÂ≠óÁ¨¶‰∏≤ String Á±ªÁöÑÂÆâÂÖ®ÊÄßÂ∞±Â∞§‰∏∫ÈáçË¶Å‰∫ÜÔºåÂ¶ÇÊûúÂ≠óÁ¨¶‰∏≤ÊòØÂèØÂèòÁöÑÔºåÂÆπÊòìË¢´ÁØ°ÊîπÔºåÈÇ£Êàë‰ª¨Â∞±Êó†Ê≥ï‰øùËØÅ‰ΩøÁî®Â≠óÁ¨¶‰∏≤ËøõË°åÊìç‰ΩúÊó∂ÔºåÂÆÉÊòØÂÆâÂÖ®ÁöÑÔºåÂæàÊúâÂèØËÉΩÂá∫Áé∞ SQL Ê≥®ÂÖ•ÔºåËÆøÈóÆÂç±Èô©Êñá‰ª∂Á≠âÊìç‰Ωú„ÄÇ</li>
<li>Âú®Â§öÁ∫øÁ®ã‰∏≠ÔºåÂè™Êúâ‰∏çÂèòÁöÑÂØπË±°ÂíåÂÄºÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂèØ‰ª•Âú®Â§ö‰∏™Á∫øÁ®ã‰∏≠ÂÖ±‰∫´Êï∞ÊçÆ„ÄÇÁî±‰∫é String Â§©ÁÑ∂ÁöÑ‰∏çÂèØÂèòÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ã‚Äù‰øÆÊîπ‚Äú‰∫ÜÂ≠óÁ¨¶‰∏≤ÁöÑÂÄºÔºåÂè™‰ºö‰∫ßÁîü‰∏Ä‰∏™Êñ∞ÁöÑÂ≠óÁ¨¶‰∏≤ÂØπË±°Ôºå‰∏ç‰ºöÂØπÂÖ∂‰ªñÁ∫øÁ®ãÁöÑËÆøÈóÆ‰∫ßÁîüÂâØ‰ΩúÁî®ÔºåËÆøÈóÆÁöÑÈÉΩÊòØÂêåÊ†∑ÁöÑÂ≠óÁ¨¶‰∏≤Êï∞ÊçÆÔºå‰∏çÈúÄË¶Å‰ªª‰ΩïÂêåÊ≠•Êìç‰Ωú„ÄÇ</li>
<li>Â≠óÁ¨¶‰∏≤‰Ωú‰∏∫Âü∫Á°ÄÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ§ßÈáèÂú∞Â∫îÁî®Âú®‰∏Ä‰∫õÈõÜÂêàÂÆπÂô®‰πã‰∏≠ÔºåÂ∞§ÂÖ∂ÊòØ‰∏Ä‰∫õÊï£ÂàóÈõÜÂêàÔºåÂú®Êï£ÂàóÈõÜÂêà‰∏≠ÔºåÂ≠òÊîæÂÖÉÁ¥†ÈÉΩË¶ÅÊ†πÊçÆÂØπË±°ÁöÑ hashCode() ÊñπÊ≥ïÊù•Á°ÆÂÆöÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆ„ÄÇÁî±‰∫éÂ≠óÁ¨¶‰∏≤ hashcode Â±ûÊÄß‰∏ç‰ºöÂèòÊõ¥Ôºå‰øùËØÅ‰∫ÜÂîØ‰∏ÄÊÄßÔºå‰ΩøÂæóÁ±ª‰ºº HashMapÔºåHashSet Á≠âÂÆπÂô®ÊâçËÉΩÂÆûÁé∞Áõ∏Â∫îÁöÑÁºìÂ≠òÂäüËÉΩ„ÄÇÁî±‰∫é String ÁöÑ‰∏çÂèØÂèòÔºåÈÅøÂÖçÈáçÂ§çËÆ°ÁÆó hashcodeÔºåÂè™Ë¶Å‰ΩøÁî®ÁºìÂ≠òÁöÑ hashcode Âç≥ÂèØÔºåËøôÊ†∑‰∏ÄÊù•Â§ßÂ§ßÊèêÈ´ò‰∫ÜÂú®Êï£ÂàóÈõÜÂêà‰∏≠‰ΩøÁî® String ÂØπË±°ÁöÑÊÄßËÉΩ„ÄÇ</li>
<li>ÂΩìÂ≠óÁ¨¶‰∏≤‰∏çÂèØÂèòÊó∂ÔºåÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÊ±†ÊâçÊúâÊÑè‰πâ„ÄÇÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÊ±†ÁöÑÂá∫Áé∞ÔºåÂèØ‰ª•ÂáèÂ∞ëÂàõÂª∫Áõ∏ÂêåÂ≠óÈù¢ÈáèÁöÑÂ≠óÁ¨¶‰∏≤ÔºåËÆ©‰∏çÂêåÁöÑÂºïÁî®ÊåáÂêëÊ±†‰∏≠Âêå‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Ôºå‰∏∫ËøêË°åÊó∂ËäÇÁ∫¶ÂæàÂ§öÁöÑÂ†ÜÂÜÖÂ≠ò„ÄÇËã•Â≠óÁ¨¶‰∏≤ÂèØÂèòÔºåÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÊ±†Â§±ÂéªÊÑè‰πâÔºåÂü∫‰∫éÂ∏∏ÈáèÊ±†ÁöÑ String.intern() ÊñπÊ≥ï‰πüÂ§±ÊïàÔºåÊØèÊ¨°ÂàõÂª∫Êñ∞ÁöÑÂ≠óÁ¨¶‰∏≤Â∞ÜÂú®Â†ÜÂÜÖÂºÄËæüÂá∫Êñ∞ÁöÑÁ©∫Èó¥ÔºåÂç†ÊçÆÊõ¥Â§öÁöÑÂÜÖÂ≠ò„ÄÇ</li>
</ul>
<p>Âõ†‰∏∫Ë¶Å‰øùËØÅStringÁ±ªÁöÑ‰∏çÂèØÂèòÔºåÈÇ£‰πàÂ∞ÜËøô‰∏™Á±ªÂÆö‰πâ‰∏∫finalÁöÑÂ∞±ÂæàÂÆπÊòìÁêÜËß£‰∫Ü„ÄÇÂ¶ÇÊûúÊ≤°Êúâfinal‰øÆÈ•∞ÔºåÈÇ£‰πàÂ∞±‰ºöÂ≠òÂú®StringÁöÑÂ≠êÁ±ªÔºåËøô‰∫õÂ≠êÁ±ªÂèØ‰ª•ÈáçÂÜôStringÁ±ªÁöÑÊñπÊ≥ïÔºåÂº∫Ë°åÊîπÂèòÂ≠óÁ¨¶‰∏≤ÁöÑÂÄºÔºåËøô‰æøËøùËÉå‰∫ÜStringÁ±ªËÆæËÆ°ÁöÑÂàùË°∑„ÄÇ</p>
<h3 id="ËØ¥‰∏ÄËØ¥StringÂíåStringBufferÊúâ‰ªÄ‰πàÂå∫Âà´"><a href="#ËØ¥‰∏ÄËØ¥StringÂíåStringBufferÊúâ‰ªÄ‰πàÂå∫Âà´" class="headerlink" title="ËØ¥‰∏ÄËØ¥StringÂíåStringBufferÊúâ‰ªÄ‰πàÂå∫Âà´"></a>ËØ¥‰∏ÄËØ¥StringÂíåStringBufferÊúâ‰ªÄ‰πàÂå∫Âà´</h3><p>StringÁ±ªÊòØ‰∏çÂèØÂèòÁ±ªÔºåÂç≥‰∏ÄÊó¶‰∏Ä‰∏™StringÂØπË±°Ë¢´ÂàõÂª∫‰ª•ÂêéÔºåÂåÖÂê´Âú®Ëøô‰∏™ÂØπË±°‰∏≠ÁöÑÂ≠óÁ¨¶Â∫èÂàóÊòØ‰∏çÂèØÊîπÂèòÁöÑÔºåÁõ¥Ëá≥Ëøô‰∏™ÂØπË±°Ë¢´ÈîÄÊØÅ„ÄÇ</p>
<p>StringBufferÂØπË±°Âàô‰ª£Ë°®‰∏Ä‰∏™Â≠óÁ¨¶Â∫èÂàóÂèØÂèòÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂΩì‰∏Ä‰∏™StringBufferË¢´ÂàõÂª∫‰ª•ÂêéÔºåÈÄöËøáStringBufferÊèê‰æõÁöÑappend()„ÄÅinsert()„ÄÅreverse()„ÄÅsetCharAt()„ÄÅsetLength()Á≠âÊñπÊ≥ïÂèØ‰ª•ÊîπÂèòËøô‰∏™Â≠óÁ¨¶‰∏≤ÂØπË±°ÁöÑÂ≠óÁ¨¶Â∫èÂàó„ÄÇ‰∏ÄÊó¶ÈÄöËøáStringBufferÁîüÊàê‰∫ÜÊúÄÁªàÊÉ≥Ë¶ÅÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂ∞±ÂèØ‰ª•Ë∞ÉÁî®ÂÆÉÁöÑtoString()ÊñπÊ≥ïÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™StringÂØπË±°„ÄÇ</p>
<h3 id="ËØ¥‰∏ÄËØ¥StringBufferÂíåStringBuilderÊúâ‰ªÄ‰πàÂå∫Âà´"><a href="#ËØ¥‰∏ÄËØ¥StringBufferÂíåStringBuilderÊúâ‰ªÄ‰πàÂå∫Âà´" class="headerlink" title="ËØ¥‰∏ÄËØ¥StringBufferÂíåStringBuilderÊúâ‰ªÄ‰πàÂå∫Âà´"></a>ËØ¥‰∏ÄËØ¥StringBufferÂíåStringBuilderÊúâ‰ªÄ‰πàÂå∫Âà´</h3><p>StringBuffer„ÄÅStringBuilderÈÉΩ‰ª£Ë°®ÂèØÂèòÁöÑÂ≠óÁ¨¶‰∏≤ÂØπË±°ÔºåÂÆÉ‰ª¨ÊúâÂÖ±ÂêåÁöÑÁà∂Á±ª AbstractStringBuilderÔºåÂπ∂‰∏î‰∏§‰∏™Á±ªÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂíåÊàêÂëòÊñπÊ≥ï‰πüÂü∫Êú¨Áõ∏Âêå„ÄÇ‰∏çÂêåÁöÑÊòØÔºåStringBufferÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåËÄåStringBuilderÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÊâÄ‰ª•StringBuilderÊÄßËÉΩÁï•È´ò„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåË¶ÅÂàõÂª∫‰∏Ä‰∏™ÂÜÖÂÆπÂèØÂèòÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂª∫ËÆÆ‰ºòÂÖàËÄÉËôëStringBuilderÁ±ª„ÄÇ</p>
<h3 id="‰ΩøÁî®Â≠óÁ¨¶‰∏≤Êó∂ÔºånewÂíå‚Äù‚ÄùÊé®Ëçê‰ΩøÁî®Âì™ÁßçÊñπÂºèÔºü"><a href="#‰ΩøÁî®Â≠óÁ¨¶‰∏≤Êó∂ÔºånewÂíå‚Äù‚ÄùÊé®Ëçê‰ΩøÁî®Âì™ÁßçÊñπÂºèÔºü" class="headerlink" title="‰ΩøÁî®Â≠óÁ¨¶‰∏≤Êó∂ÔºånewÂíå‚Äù‚ÄùÊé®Ëçê‰ΩøÁî®Âì™ÁßçÊñπÂºèÔºü"></a>‰ΩøÁî®Â≠óÁ¨¶‰∏≤Êó∂ÔºånewÂíå‚Äù‚ÄùÊé®Ëçê‰ΩøÁî®Âì™ÁßçÊñπÂºèÔºü</h3><p>ÂÖàÁúãÁúã ‚Äúhello‚Äù Âíå new String(‚Äúhello‚Äù) ÁöÑÂå∫Âà´Ôºö</p>
<ul>
<li>ÂΩìJavaÁ®ãÂ∫èÁõ¥Êé•‰ΩøÁî® ‚Äúhello‚Äù ÁöÑÂ≠óÁ¨¶‰∏≤Áõ¥Êé•ÈáèÊó∂ÔºåJVMÂ∞Ü‰ºö‰ΩøÁî®Â∏∏ÈáèÊ±†Êù•ÁÆ°ÁêÜËøô‰∏™Â≠óÁ¨¶‰∏≤Ôºõ</li>
<li>ÂΩì‰ΩøÁî® new String(‚Äúhello‚Äù) Êó∂ÔºåJVM‰ºöÂÖà‰ΩøÁî®Â∏∏ÈáèÊ±†Êù•ÁÆ°ÁêÜ ‚Äúhello‚Äù Áõ¥Êé•ÈáèÔºåÂÜçË∞ÉÁî®StringÁ±ªÁöÑÊûÑÈÄ†Âô®Êù•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑStringÂØπË±°ÔºåÊñ∞ÂàõÂª∫ÁöÑStringÂØπË±°Ë¢´‰øùÂ≠òÂú®Â†ÜÂÜÖÂ≠ò‰∏≠„ÄÇ</li>
</ul>
<p>ÊòæÁÑ∂ÔºåÈááÁî®newÁöÑÊñπÂºè‰ºöÂ§öÂàõÂª∫‰∏Ä‰∏™ÂØπË±°Âá∫Êù•Ôºå‰ºöÂç†Áî®Êõ¥Â§öÁöÑÂÜÖÂ≠òÔºåÊâÄ‰ª•‰∏ÄËà¨Âª∫ËÆÆ‰ΩøÁî®Áõ¥Êé•ÈáèÁöÑÊñπÂºèÂàõÂª∫Â≠óÁ¨¶‰∏≤„ÄÇ</p>
<h3 id="ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÂ≠óÁ¨¶‰∏≤ÊãºÊé•ÁöÑÁêÜËß£"><a href="#ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÂ≠óÁ¨¶‰∏≤ÊãºÊé•ÁöÑÁêÜËß£" class="headerlink" title="ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÂ≠óÁ¨¶‰∏≤ÊãºÊé•ÁöÑÁêÜËß£"></a>ËØ¥‰∏ÄËØ¥‰Ω†ÂØπÂ≠óÁ¨¶‰∏≤ÊãºÊé•ÁöÑÁêÜËß£</h3><p>ÊãºÊé•Â≠óÁ¨¶‰∏≤ÊúâÂæàÂ§öÁßçÊñπÂºèÔºåÂÖ∂‰∏≠ÊúÄÂ∏∏Áî®ÁöÑÊúâ4ÁßçÔºå‰∏ãÈù¢Âàó‰∏æ‰∫ÜËøô4ÁßçÊñπÂºèÂêÑËá™ÈÄÇÂêàÁöÑÂú∫ÊôØ„ÄÇ</p>
<ol>
<li>+ ËøêÁÆóÁ¨¶ÔºöÂ¶ÇÊûúÊãºÊé•ÁöÑÈÉΩÊòØÂ≠óÁ¨¶‰∏≤Áõ¥Êé•ÈáèÔºåÂàôÈÄÇÂêà‰ΩøÁî® + ËøêÁÆóÁ¨¶ÂÆûÁé∞ÊãºÊé•Ôºõ</li>
<li>StringBuilderÔºöÂ¶ÇÊûúÊãºÊé•ÁöÑÂ≠óÁ¨¶‰∏≤‰∏≠ÂåÖÂê´ÂèòÈáèÔºåÂπ∂‰∏çË¶ÅÊ±ÇÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂàôÈÄÇÂêà‰ΩøÁî®StringBuilderÔºõ</li>
<li>StringBufferÔºöÂ¶ÇÊûúÊãºÊé•ÁöÑÂ≠óÁ¨¶‰∏≤‰∏≠ÂåÖÂê´ÂèòÈáèÔºåÂπ∂‰∏îË¶ÅÊ±ÇÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂàôÈÄÇÂêà‰ΩøÁî®StringBufferÔºõ</li>
<li>StringÁ±ªÁöÑconcatÊñπÊ≥ïÔºöÂ¶ÇÊûúÂè™ÊòØÂØπ‰∏§‰∏™Â≠óÁ¨¶‰∏≤ËøõË°åÊãºÊé•ÔºåÂπ∂‰∏îÂåÖÂê´ÂèòÈáèÔºåÂàôÈÄÇÂêà‰ΩøÁî®concatÊñπÊ≥ïÔºõ</li>
</ol>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>ÈááÁî® + ËøêÁÆóÁ¨¶ÊãºÊé•Â≠óÁ¨¶‰∏≤Êó∂Ôºö</p>
<ul>
<li>Â¶ÇÊûúÊãºÊé•ÁöÑÈÉΩÊòØÂ≠óÁ¨¶‰∏≤Áõ¥Êé•ÈáèÔºåÂàôÂú®ÁºñËØëÊó∂ÁºñËØëÂô®‰ºöÂ∞ÜÂÖ∂Áõ¥Êé•‰ºòÂåñ‰∏∫‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂíå‰Ω†Áõ¥Êé•ÂÜô‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂ≠óÁ¨¶‰∏≤ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊâÄ‰ª•ÊïàÁéáÈùûÂ∏∏ÁöÑÈ´ò„ÄÇ</li>
<li>Â¶ÇÊûúÊãºÊé•ÁöÑÂ≠óÁ¨¶‰∏≤‰∏≠ÂåÖÂê´ÂèòÈáèÔºåÂàôÂú®ÁºñËØëÊó∂ÁºñËØëÂô®ÈááÁî®StringBuilderÂØπÂÖ∂ËøõË°å‰ºòÂåñÔºåÂç≥Ëá™Âä®ÂàõÂª∫StringBuilderÂÆû‰æãÂπ∂Ë∞ÉÁî®ÂÖ∂append()ÊñπÊ≥ïÔºåÂ∞ÜËøô‰∫õÂ≠óÁ¨¶‰∏≤ÊãºÊé•Âú®‰∏ÄËµ∑ÔºåÊïàÁéá‰πüÂæàÈ´ò„ÄÇ‰ΩÜÂ¶ÇÊûúËøô‰∏™ÊãºÊé•Êìç‰ΩúÊòØÂú®Âæ™ÁéØ‰∏≠ËøõË°åÁöÑÔºåÈÇ£‰πàÊØèÊ¨°Âæ™ÁéØÁºñËØëÂô®ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™StringBuilderÂÆû‰æãÔºåÂÜçÂéªÊãºÊé•Â≠óÁ¨¶‰∏≤ÔºåÁõ∏ÂΩì‰∫éÊâßË°å‰∫Ü new StringBuilder().append(str)ÔºåÊâÄ‰ª•Ê≠§Êó∂ÊïàÁéáÂæà‰Ωé„ÄÇ</li>
</ul>
<p>ÈááÁî®StringBuilder/StringBufferÊãºÊé•Â≠óÁ¨¶‰∏≤Êó∂Ôºö</p>
<ul>
<li>StringBuilder/StringBufferÈÉΩÊúâÂ≠óÁ¨¶‰∏≤ÁºìÂÜ≤Âå∫ÔºåÁºìÂÜ≤Âå∫ÁöÑÂÆπÈáèÂú®ÂàõÂª∫ÂØπË±°Êó∂Á°ÆÂÆöÔºåÂπ∂‰∏îÈªòËÆ§‰∏∫16„ÄÇÂΩìÊãºÊé•ÁöÑÂ≠óÁ¨¶‰∏≤Ë∂ÖËøáÁºìÂÜ≤Âå∫ÁöÑÂÆπÈáèÊó∂Ôºå‰ºöËß¶ÂèëÁºìÂÜ≤Âå∫ÁöÑÊâ©ÂÆπÊú∫Âà∂ÔºåÂç≥ÁºìÂÜ≤Âå∫Âä†ÂÄç„ÄÇ</li>
<li>ÁºìÂÜ≤Âå∫È¢ëÁπÅÁöÑÊâ©ÂÆπ‰ºöÈôç‰ΩéÊãºÊé•ÁöÑÊÄßËÉΩÔºåÊâÄ‰ª•Â¶ÇÊûúËÉΩÊèêÂâçÈ¢Ñ‰º∞ÊúÄÁªàÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ÔºåÂàôÂª∫ËÆÆÂú®ÂàõÂª∫ÂèØÂèòÂ≠óÁ¨¶‰∏≤ÂØπË±°Êó∂ÔºåÊîæÂºÉ‰ΩøÁî®ÈªòËÆ§ÁöÑÂÆπÈáèÔºåÂèØ‰ª•ÊåáÂÆöÁºìÂÜ≤Âå∫ÁöÑÂÆπÈáè‰∏∫È¢Ñ‰º∞ÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶„ÄÇ</li>
</ul>
<p>ÈááÁî®StringÁ±ªÁöÑconcatÊñπÊ≥ïÊãºÊé•Â≠óÁ¨¶‰∏≤Êó∂Ôºö</p>
<ul>
<li>concatÊñπÊ≥ïÁöÑÊãºÊé•ÈÄªËæëÊòØÔºåÂÖàÂàõÂª∫‰∏Ä‰∏™Ë∂≥‰ª•ÂÆπÁ∫≥ÂæÖÊãºÊé•ÁöÑ‰∏§‰∏™Â≠óÁ¨¶‰∏≤ÁöÑÂ≠óËäÇÊï∞ÁªÑÔºåÁÑ∂ÂêéÂÖàÂêéÂ∞Ü‰∏§‰∏™Â≠óÁ¨¶‰∏≤ÊãºÂà∞Ëøô‰∏™Êï∞ÁªÑÈáåÔºåÊúÄÂêéÂ∞ÜÊ≠§Êï∞ÁªÑËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤„ÄÇ</li>
<li>Âú®ÊãºÊé•Â§ßÈáèÂ≠óÁ¨¶‰∏≤ÁöÑÊó∂ÂÄôÔºåconcatÊñπÊ≥ïÁöÑÊïàÁéá‰Ωé‰∫éStringBuilder„ÄÇ‰ΩÜÊòØÂè™ÊãºÊé•2‰∏™Â≠óÁ¨¶‰∏≤Êó∂ÔºåconcatÊñπÊ≥ïÁöÑÊïàÁéáË¶Å‰ºò‰∫éStringBuilder„ÄÇÂπ∂‰∏îËøôÁßçÊãºÊé•ÊñπÂºè‰ª£Á†ÅÁÆÄÊ¥ÅÔºåÊâÄ‰ª•Âè™Êãº2‰∏™Â≠óÁ¨¶‰∏≤Êó∂Âª∫ËÆÆ‰ºòÂÖàÈÄâÊã©concatÊñπÊ≥ï„ÄÇ</li>
</ul>
<h3 id="‰∏§‰∏™Â≠óÁ¨¶‰∏≤Áõ∏Âä†ÁöÑÂ∫ïÂ±ÇÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"><a href="#‰∏§‰∏™Â≠óÁ¨¶‰∏≤Áõ∏Âä†ÁöÑÂ∫ïÂ±ÇÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü" class="headerlink" title="‰∏§‰∏™Â≠óÁ¨¶‰∏≤Áõ∏Âä†ÁöÑÂ∫ïÂ±ÇÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"></a>‰∏§‰∏™Â≠óÁ¨¶‰∏≤Áõ∏Âä†ÁöÑÂ∫ïÂ±ÇÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü</h3><p>Â¶ÇÊûúÊãºÊé•ÁöÑÈÉΩÊòØÂ≠óÁ¨¶‰∏≤Áõ¥Êé•ÈáèÔºåÂàôÂú®ÁºñËØëÊó∂ÁºñËØëÂô®‰ºöÂ∞ÜÂÖ∂Áõ¥Êé•‰ºòÂåñ‰∏∫‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂíå‰Ω†Áõ¥Êé•ÂÜô‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂ≠óÁ¨¶‰∏≤ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ</p>
<p>Â¶ÇÊûúÊãºÊé•ÁöÑÂ≠óÁ¨¶‰∏≤‰∏≠ÂåÖÂê´ÂèòÈáèÔºåÂàôÂú®ÁºñËØëÊó∂ÁºñËØëÂô®ÈááÁî®StringBuilderÂØπÂÖ∂ËøõË°å‰ºòÂåñÔºåÂç≥Ëá™Âä®ÂàõÂª∫StringBuilderÂÆû‰æãÂπ∂Ë∞ÉÁî®ÂÖ∂append()ÊñπÊ≥ïÔºåÂ∞ÜËøô‰∫õÂ≠óÁ¨¶‰∏≤ÊãºÊé•Âú®‰∏ÄËµ∑„ÄÇ</p>
<h3 id="String-a-‚Äúabc‚Äù-ÔºåËØ¥‰∏Ä‰∏ãËøô‰∏™ËøáÁ®ã‰ºöÂàõÂª∫‰ªÄ‰πàÔºåÊîæÂú®Âì™ÈáåÔºü"><a href="#String-a-‚Äúabc‚Äù-ÔºåËØ¥‰∏Ä‰∏ãËøô‰∏™ËøáÁ®ã‰ºöÂàõÂª∫‰ªÄ‰πàÔºåÊîæÂú®Âì™ÈáåÔºü" class="headerlink" title="String a = ‚Äúabc‚Äù; ÔºåËØ¥‰∏Ä‰∏ãËøô‰∏™ËøáÁ®ã‰ºöÂàõÂª∫‰ªÄ‰πàÔºåÊîæÂú®Âì™ÈáåÔºü"></a>String a = ‚Äúabc‚Äù; ÔºåËØ¥‰∏Ä‰∏ãËøô‰∏™ËøáÁ®ã‰ºöÂàõÂª∫‰ªÄ‰πàÔºåÊîæÂú®Âì™ÈáåÔºü</h3><p>JVM‰ºö‰ΩøÁî®Â∏∏ÈáèÊ±†Êù•ÁÆ°ÁêÜÂ≠óÁ¨¶‰∏≤Áõ¥Êé•Èáè„ÄÇÂú®ÊâßË°åËøôÂè•ËØùÊó∂ÔºåJVM‰ºöÂÖàÊ£ÄÊü•Â∏∏ÈáèÊ±†‰∏≠ÊòØÂê¶Â∑≤ÁªèÂ≠òÊúâ‚Äùabc‚ÄùÔºåËã•Ê≤°ÊúâÂàôÂ∞Ü‚Äùabc‚ÄùÂ≠òÂÖ•Â∏∏ÈáèÊ±†ÔºåÂê¶ÂàôÂ∞±Â§çÁî®Â∏∏ÈáèÊ±†‰∏≠Â∑≤ÊúâÁöÑ‚Äùabc‚ÄùÔºåÂ∞ÜÂÖ∂ÂºïÁî®ËµãÂÄºÁªôÂèòÈáèa„ÄÇ</p>
<h3 id="new-String-‚Äúabc‚Äù-ÊòØÂéª‰∫ÜÂì™ÈáåÔºå‰ªÖ‰ªÖÊòØÂú®Â†ÜÈáåÈù¢ÂêóÔºü"><a href="#new-String-‚Äúabc‚Äù-ÊòØÂéª‰∫ÜÂì™ÈáåÔºå‰ªÖ‰ªÖÊòØÂú®Â†ÜÈáåÈù¢ÂêóÔºü" class="headerlink" title="new String(‚Äúabc‚Äù) ÊòØÂéª‰∫ÜÂì™ÈáåÔºå‰ªÖ‰ªÖÊòØÂú®Â†ÜÈáåÈù¢ÂêóÔºü"></a>new String(‚Äúabc‚Äù) ÊòØÂéª‰∫ÜÂì™ÈáåÔºå‰ªÖ‰ªÖÊòØÂú®Â†ÜÈáåÈù¢ÂêóÔºü</h3><p>Âú®ÊâßË°åËøôÂè•ËØùÊó∂ÔºåJVM‰ºöÂÖà‰ΩøÁî®Â∏∏ÈáèÊ±†Êù•ÁÆ°ÁêÜÂ≠óÁ¨¶‰∏≤Áõ¥Êé•ÈáèÔºåÂç≥Â∞Ü‚Äùabc‚ÄùÂ≠òÂÖ•Â∏∏ÈáèÊ±†„ÄÇÁÑ∂ÂêéÂÜçÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑStringÂØπË±°ÔºåËøô‰∏™ÂØπË±°‰ºöË¢´‰øùÂ≠òÂú®Â†ÜÂÜÖÂ≠ò‰∏≠„ÄÇÂπ∂‰∏îÔºåÂ†Ü‰∏≠ÂØπË±°ÁöÑÊï∞ÊçÆ‰ºöÊåáÂêëÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÁõ¥Êé•Èáè„ÄÇ</p>
<h3 id="Êé•Âè£ÂíåÊäΩË±°Á±ªÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#Êé•Âè£ÂíåÊäΩË±°Á±ªÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="Êé•Âè£ÂíåÊäΩË±°Á±ªÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>Êé•Âè£ÂíåÊäΩË±°Á±ªÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h3><p>‰ªéËÆæËÆ°ÁõÆÁöÑ‰∏äÊù•ËØ¥Ôºå‰∫åËÄÖÊúâÂ¶Ç‰∏ãÁöÑÂå∫Âà´Ôºö</p>
<p>Êé•Âè£‰ΩìÁé∞ÁöÑÊòØ‰∏ÄÁßçËßÑËåÉ„ÄÇÂØπ‰∫éÊé•Âè£ÁöÑÂÆûÁé∞ËÄÖËÄåË®ÄÔºåÊé•Âè£ËßÑÂÆö‰∫ÜÂÆûÁé∞ËÄÖÂøÖÈ°ªÂêëÂ§ñÊèê‰æõÂì™‰∫õÊúçÂä°ÔºõÂØπ‰∫éÊé•Âè£ÁöÑË∞ÉÁî®ËÄÖËÄåË®ÄÔºåÊé•Âè£ËßÑÂÆö‰∫ÜË∞ÉÁî®ËÄÖÂèØ‰ª•Ë∞ÉÁî®Âì™‰∫õÊúçÂä°Ôºå‰ª•ÂèäÂ¶Ç‰ΩïË∞ÉÁî®Ëøô‰∫õÊúçÂä°„ÄÇÂΩìÂú®‰∏Ä‰∏™Á®ãÂ∫è‰∏≠‰ΩøÁî®Êé•Âè£Êó∂ÔºåÊé•Âè£ÊòØÂ§ö‰∏™Ê®°ÂùóÈó¥ÁöÑËÄ¶ÂêàÊ†áÂáÜÔºõÂΩìÂú®Â§ö‰∏™Â∫îÁî®Á®ãÂ∫è‰πãÈó¥‰ΩøÁî®Êé•Âè£Êó∂ÔºåÊé•Âè£ÊòØÂ§ö‰∏™Á®ãÂ∫è‰πãÈó¥ÁöÑÈÄö‰ø°Ê†áÂáÜ„ÄÇ</p>
<p>ÊäΩË±°Á±ª‰ΩìÁé∞ÁöÑÊòØ‰∏ÄÁßçÊ®°ÊùøÂºèËÆæËÆ°„ÄÇÊäΩË±°Á±ª‰Ωú‰∏∫Â§ö‰∏™Â≠êÁ±ªÁöÑÊäΩË±°Áà∂Á±ªÔºåÂèØ‰ª•Ë¢´ÂΩìÊàêÁ≥ªÁªüÂÆûÁé∞ËøáÁ®ã‰∏≠ÁöÑ‰∏≠Èó¥‰∫ßÂìÅÔºåËøô‰∏™‰∏≠Èó¥‰∫ßÂìÅÂ∑≤ÁªèÂÆûÁé∞‰∫ÜÁ≥ªÁªüÁöÑÈÉ®ÂàÜÂäüËÉΩÔºå‰ΩÜËøô‰∏™‰∫ßÂìÅ‰æùÁÑ∂‰∏çËÉΩÂΩìÊàêÊúÄÁªà‰∫ßÂìÅÔºåÂøÖÈ°ªÊúâÊõ¥Ëøõ‰∏ÄÊ≠•ÁöÑÂÆåÂñÑÔºåËøôÁßçÂÆåÂñÑÂèØËÉΩÊúâÂá†Áßç‰∏çÂêåÊñπÂºè„ÄÇ</p>
<p>‰ªé‰ΩøÁî®ÊñπÂºè‰∏äÊù•ËØ¥Ôºå‰∫åËÄÖÊúâÂ¶Ç‰∏ãÁöÑÂå∫Âà´Ôºö</p>
<ul>
<li>Êé•Âè£ÈáåÂè™ËÉΩÂåÖÂê´ÊäΩË±°ÊñπÊ≥ï„ÄÅÈùôÊÄÅÊñπÊ≥ï„ÄÅÈªòËÆ§ÊñπÊ≥ïÂíåÁßÅÊúâÊñπÊ≥ïÔºå‰∏çËÉΩ‰∏∫ÊôÆÈÄöÊñπÊ≥ïÊèê‰æõÊñπÊ≥ïÂÆûÁé∞ÔºõÊäΩË±°Á±ªÂàôÂÆåÂÖ®ÂèØ‰ª•ÂåÖÂê´ÊôÆÈÄöÊñπÊ≥ï„ÄÇ</li>
<li>Êé•Âè£ÈáåÂè™ËÉΩÂÆö‰πâÈùôÊÄÅÂ∏∏ÈáèÔºå‰∏çËÉΩÂÆö‰πâÊôÆÈÄöÊàêÂëòÂèòÈáèÔºõÊäΩË±°Á±ªÈáåÂàôÊó¢ÂèØ‰ª•ÂÆö‰πâÊôÆÈÄöÊàêÂëòÂèòÈáèÔºå‰πüÂèØ‰ª•ÂÆö‰πâÈùôÊÄÅÂ∏∏Èáè„ÄÇ</li>
<li>Êé•Âè£Èáå‰∏çÂåÖÂê´ÊûÑÈÄ†Âô®ÔºõÊäΩË±°Á±ªÈáåÂèØ‰ª•ÂåÖÂê´ÊûÑÈÄ†Âô®ÔºåÊäΩË±°Á±ªÈáåÁöÑÊûÑÈÄ†Âô®Âπ∂‰∏çÊòØÁî®‰∫éÂàõÂª∫ÂØπË±°ÔºåËÄåÊòØËÆ©ÂÖ∂Â≠êÁ±ªË∞ÉÁî®Ëøô‰∫õÊûÑÈÄ†Âô®Êù•ÂÆåÊàêÂ±û‰∫éÊäΩË±°Á±ªÁöÑÂàùÂßãÂåñÊìç‰Ωú„ÄÇ</li>
<li>Êé•Âè£Èáå‰∏çËÉΩÂåÖÂê´ÂàùÂßãÂåñÂùóÔºõ‰ΩÜÊäΩË±°Á±ªÂàôÂÆåÂÖ®ÂèØ‰ª•ÂåÖÂê´ÂàùÂßãÂåñÂùó„ÄÇ</li>
<li>‰∏Ä‰∏™Á±ªÊúÄÂ§öÂè™ËÉΩÊúâ‰∏Ä‰∏™Áõ¥Êé•Áà∂Á±ªÔºåÂåÖÊã¨ÊäΩË±°Á±ªÔºõ‰ΩÜ‰∏Ä‰∏™Á±ªÂèØ‰ª•Áõ¥Êé•ÂÆûÁé∞Â§ö‰∏™Êé•Âè£ÔºåÈÄöËøáÂÆûÁé∞Â§ö‰∏™Êé•Âè£ÂèØ‰ª•Âº•Ë°•JavaÂçïÁªßÊâøÁöÑ‰∏çË∂≥„ÄÇ</li>
</ul>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>Êé•Âè£ÂíåÊäΩË±°Á±ªÂæàÂÉèÔºåÂÆÉ‰ª¨ÈÉΩÂÖ∑ÊúâÂ¶Ç‰∏ãÂÖ±ÂêåÁöÑÁâπÂæÅÔºö</p>
<ul>
<li>Êé•Âè£ÂíåÊäΩË±°Á±ªÈÉΩ‰∏çËÉΩË¢´ÂÆû‰æãÂåñÔºåÂÆÉ‰ª¨ÈÉΩ‰Ωç‰∫éÁªßÊâøÊ†ëÁöÑÈ°∂Á´ØÔºåÁî®‰∫éË¢´ÂÖ∂‰ªñÁ±ªÂÆûÁé∞ÂíåÁªßÊâø„ÄÇ</li>
<li>Êé•Âè£ÂíåÊäΩË±°Á±ªÈÉΩÂèØ‰ª•ÂåÖÂê´ÊäΩË±°ÊñπÊ≥ïÔºåÂÆûÁé∞Êé•Âè£ÊàñÁªßÊâøÊäΩË±°Á±ªÁöÑÊôÆÈÄöÂ≠êÁ±ªÈÉΩÂøÖÈ°ªÂÆûÁé∞Ëøô‰∫õÊäΩË±°ÊñπÊ≥ï„ÄÇ</li>
</ul>
<h3 id="Êé•Âè£‰∏≠ÂèØ‰ª•ÊúâÊûÑÈÄ†ÂáΩÊï∞ÂêóÔºü"><a href="#Êé•Âè£‰∏≠ÂèØ‰ª•ÊúâÊûÑÈÄ†ÂáΩÊï∞ÂêóÔºü" class="headerlink" title="Êé•Âè£‰∏≠ÂèØ‰ª•ÊúâÊûÑÈÄ†ÂáΩÊï∞ÂêóÔºü"></a>Êé•Âè£‰∏≠ÂèØ‰ª•ÊúâÊûÑÈÄ†ÂáΩÊï∞ÂêóÔºü</h3><p>Áî±‰∫éÊé•Âè£ÂÆö‰πâÁöÑÊòØ‰∏ÄÁßçËßÑËåÉÔºåÂõ†Ê≠§Êé•Âè£Èáå‰∏çËÉΩÂåÖÂê´ÊûÑÈÄ†Âô®ÂíåÂàùÂßãÂåñÂùóÂÆö‰πâ„ÄÇÊé•Âè£ÈáåÂèØ‰ª•ÂåÖÂê´ÊàêÂëòÂèòÈáèÔºàÂè™ËÉΩÊòØÈùôÊÄÅÂ∏∏ÈáèÔºâ„ÄÅÊñπÊ≥ïÔºàÂè™ËÉΩÊòØÊäΩË±°ÂÆû‰æãÊñπÊ≥ï„ÄÅÁ±ªÊñπÊ≥ï„ÄÅÈªòËÆ§ÊñπÊ≥ïÊàñÁßÅÊúâÊñπÊ≥ïÔºâ„ÄÅÂÜÖÈÉ®Á±ªÔºàÂåÖÊã¨ÂÜÖÈÉ®Êé•Âè£„ÄÅÊûö‰∏æÔºâÂÆö‰πâ„ÄÇ</p>
<h3 id="Ë∞àË∞à‰Ω†ÂØπÈù¢ÂêëÊé•Âè£ÁºñÁ®ãÁöÑÁêÜËß£"><a href="#Ë∞àË∞à‰Ω†ÂØπÈù¢ÂêëÊé•Âè£ÁºñÁ®ãÁöÑÁêÜËß£" class="headerlink" title="Ë∞àË∞à‰Ω†ÂØπÈù¢ÂêëÊé•Âè£ÁºñÁ®ãÁöÑÁêÜËß£"></a>Ë∞àË∞à‰Ω†ÂØπÈù¢ÂêëÊé•Âè£ÁºñÁ®ãÁöÑÁêÜËß£</h3><p>Êé•Âè£‰ΩìÁé∞ÁöÑÊòØ‰∏ÄÁßçËßÑËåÉÂíåÂÆûÁé∞ÂàÜÁ¶ªÁöÑËÆæËÆ°Âì≤Â≠¶ÔºåÂÖÖÂàÜÂà©Áî®Êé•Âè£ÂèØ‰ª•ÊûÅÂ•ΩÂú∞Èôç‰ΩéÁ®ãÂ∫èÂêÑÊ®°Âùó‰πãÈó¥ÁöÑËÄ¶ÂêàÔºå‰ªéËÄåÊèêÈ´òÁ≥ªÁªüÁöÑÂèØÊâ©Â±ïÊÄßÂíåÂèØÁª¥Êä§ÊÄß„ÄÇÂü∫‰∫éËøôÁßçÂéüÂàôÔºåÂæàÂ§öËΩØ‰ª∂Êû∂ÊûÑËÆæËÆ°ÁêÜËÆ∫ÈÉΩÂÄ°ÂØº‚ÄúÈù¢ÂêëÊé•Âè£‚ÄùÁºñÁ®ãÔºåËÄå‰∏çÊòØÈù¢ÂêëÂÆûÁé∞Á±ªÁºñÁ®ãÔºåÂ∏åÊúõÈÄöËøáÈù¢ÂêëÊé•Âè£ÁºñÁ®ãÊù•Èôç‰ΩéÁ®ãÂ∫èÁöÑËÄ¶Âêà„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaÂü∫Á°Ä(Âõõ)</title>
    <url>/p/3eb3d776.html</url>
    <content><![CDATA[<html><head></head><body><h3 id="Java‰∏≠ÊúâÂì™‰∫õÂÆπÂô®ÔºàÈõÜÂêàÁ±ªÔºâÔºü"><a href="#Java‰∏≠ÊúâÂì™‰∫õÂÆπÂô®ÔºàÈõÜÂêàÁ±ªÔºâÔºü" class="headerlink" title="Java‰∏≠ÊúâÂì™‰∫õÂÆπÂô®ÔºàÈõÜÂêàÁ±ªÔºâÔºü"></a>Java‰∏≠ÊúâÂì™‰∫õÂÆπÂô®ÔºàÈõÜÂêàÁ±ªÔºâÔºü</h3><p>Java‰∏≠ÁöÑÈõÜÂêàÁ±ª‰∏ªË¶ÅÁî±CollectionÂíåMapËøô‰∏§‰∏™Êé•Âè£Ê¥æÁîüËÄåÂá∫ÔºåÂÖ∂‰∏≠CollectionÊé•Âè£ÂèàÊ¥æÁîüÂá∫‰∏â‰∏™Â≠êÊé•Âè£ÔºåÂàÜÂà´ÊòØSet„ÄÅList„ÄÅQueue„ÄÇÊâÄÊúâÁöÑJavaÈõÜÂêàÁ±ªÔºåÈÉΩÊòØSet„ÄÅList„ÄÅQueue„ÄÅMapËøôÂõõ‰∏™Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºåËøôÂõõ‰∏™Êé•Âè£Â∞ÜÈõÜÂêàÂàÜÊàê‰∫ÜÂõõÂ§ßÁ±ªÔºåÂÖ∂‰∏≠</p>
<ul>
<li>Set‰ª£Ë°®Êó†Â∫èÁöÑÔºåÂÖÉÁ¥†‰∏çÂèØÈáçÂ§çÁöÑÈõÜÂêàÔºõ</li>
<li>List‰ª£Ë°®ÊúâÂ∫èÁöÑÔºåÂÖÉÁ¥†ÂèØ‰ª•ÈáçÂ§çÁöÑÈõÜÂêàÔºõ</li>
<li>Queue‰ª£Ë°®ÂÖàËøõÂÖàÂá∫ÔºàFIFOÔºâÁöÑÈòüÂàóÔºõ</li>
<li>Map‰ª£Ë°®ÂÖ∑ÊúâÊò†Â∞ÑÂÖ≥Á≥ªÔºàkey-valueÔºâÁöÑÈõÜÂêà„ÄÇ</li>
</ul>
<p>Ëøô‰∫õÊé•Âè£Êã•Êúâ‰ºóÂ§öÁöÑÂÆûÁé∞Á±ªÔºåÂÖ∂‰∏≠ÊúÄÂ∏∏Áî®ÁöÑÂÆûÁé∞Á±ªÊúâHashSet„ÄÅTreeSet„ÄÅArrayList„ÄÅLinkedList„ÄÅArrayDeque„ÄÅHashMap„ÄÅTreeMapÁ≠â„ÄÇ</p>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>Collection‰ΩìÁ≥ªÁöÑÁªßÊâøÊ†ëÔºö</p>
<p><img src="/p/3eb3d776/74C2C3389688C6364FF2DE8AA768A039.jpeg" alt="img"></p>
<p>Map‰ΩìÁ≥ªÁöÑÁªßÊâøÊ†ëÔºö</p>
<p><img src="/p/3eb3d776/E26BABF74692B006DA33C112A6FD5EEC.jpeg" alt="img"></p>
<p><em>Ê≥®ÔºöÁ¥´Ëâ≤Ê°Ü‰Ωì‰ª£Ë°®Êé•Âè£ÔºåÂÖ∂‰∏≠Âä†Á≤óÁöÑÊòØ‰ª£Ë°®ÂõõÁ±ªÈõÜÂêàÁöÑÊé•Âè£„ÄÇËìùËâ≤Ê°Ü‰Ωì‰ª£Ë°®ÂÆûÁé∞Á±ªÔºåÂÖ∂‰∏≠ÊúâÈò¥ÂΩ±ÁöÑÊòØÂ∏∏Áî®ÂÆûÁé∞Á±ª„ÄÇ</em></p>
<h3 id="Java‰∏≠ÁöÑÂÆπÂô®ÔºåÁ∫øÁ®ãÂÆâÂÖ®ÂíåÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÂàÜÂà´ÊúâÂì™‰∫õÔºü"><a href="#Java‰∏≠ÁöÑÂÆπÂô®ÔºåÁ∫øÁ®ãÂÆâÂÖ®ÂíåÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÂàÜÂà´ÊúâÂì™‰∫õÔºü" class="headerlink" title="Java‰∏≠ÁöÑÂÆπÂô®ÔºåÁ∫øÁ®ãÂÆâÂÖ®ÂíåÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÂàÜÂà´ÊúâÂì™‰∫õÔºü"></a>Java‰∏≠ÁöÑÂÆπÂô®ÔºåÁ∫øÁ®ãÂÆâÂÖ®ÂíåÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÂàÜÂà´ÊúâÂì™‰∫õÔºü</h3><p>java.utilÂåÖ‰∏ãÁöÑÈõÜÂêàÁ±ªÂ§ßÈÉ®ÂàÜÈÉΩÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÔºå‰æãÂ¶ÇÊàë‰ª¨Â∏∏Áî®ÁöÑHashSet„ÄÅTreeSet„ÄÅArrayList„ÄÅLinkedList„ÄÅArrayDeque„ÄÅHashMap„ÄÅTreeMapÔºåËøô‰∫õÈÉΩÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÈõÜÂêàÁ±ªÔºå‰ΩÜÊòØÂÆÉ‰ª¨ÁöÑ‰ºòÁÇπÊòØÊÄßËÉΩÂ•Ω„ÄÇÂ¶ÇÊûúÈúÄË¶Å‰ΩøÁî®Á∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂêàÁ±ªÔºåÂàôÂèØ‰ª•‰ΩøÁî®CollectionsÂ∑•ÂÖ∑Á±ªÊèê‰æõÁöÑsynchronizedXxx()ÊñπÊ≥ïÔºåÂ∞ÜËøô‰∫õÈõÜÂêàÁ±ªÂåÖË£ÖÊàêÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂêàÁ±ª„ÄÇ</p>
<p>java.utilÂåÖ‰∏ã‰πüÊúâÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂêàÁ±ªÔºå‰æãÂ¶ÇVector„ÄÅHashtable„ÄÇËøô‰∫õÈõÜÂêàÁ±ªÈÉΩÊòØÊØîËæÉÂè§ËÄÅÁöÑAPIÔºåËôΩÁÑ∂ÂÆûÁé∞‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®Ôºå‰ΩÜÊòØÊÄßËÉΩÂæàÂ∑Æ„ÄÇÊâÄ‰ª•Âç≥‰æøÊòØÈúÄË¶Å‰ΩøÁî®Á∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂêàÁ±ªÔºå‰πüÂª∫ËÆÆÂ∞ÜÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÈõÜÂêàÁ±ªÂåÖË£ÖÊàêÁ∫øÁ®ãÂÆâÂÖ®ÈõÜÂêàÁ±ªÁöÑÊñπÂºèÔºåËÄå‰∏çÊòØÁõ¥Êé•‰ΩøÁî®Ëøô‰∫õÂè§ËÄÅÁöÑAPI„ÄÇ</p>
<p>‰ªéJava5ÂºÄÂßãÔºåJavaÂú®java.util.concurrentÂåÖ‰∏ãÊèê‰æõ‰∫ÜÂ§ßÈáèÊîØÊåÅÈ´òÊïàÂπ∂ÂèëËÆøÈóÆÁöÑÈõÜÂêàÁ±ªÔºåÂÆÉ‰ª¨Êó¢ËÉΩÂåÖË£ÖËâØÂ•ΩÁöÑËÆøÈóÆÊÄßËÉΩÔºåÊúâËÉΩÂåÖË£ÖÁ∫øÁ®ãÂÆâÂÖ®„ÄÇËøô‰∫õÈõÜÂêàÁ±ªÂèØ‰ª•ÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜÔºåÂÆÉ‰ª¨ÁöÑÁâπÂæÅÂ¶Ç‰∏ãÔºö</p>
<ul>
<li><p>‰ª•ConcurrentÂºÄÂ§¥ÁöÑÈõÜÂêàÁ±ªÔºö</p>
<p>‰ª•ConcurrentÂºÄÂ§¥ÁöÑÈõÜÂêàÁ±ª‰ª£Ë°®‰∫ÜÊîØÊåÅÂπ∂ÂèëËÆøÈóÆÁöÑÈõÜÂêàÔºåÂÆÉ‰ª¨ÂèØ‰ª•ÊîØÊåÅÂ§ö‰∏™Á∫øÁ®ãÂπ∂ÂèëÂÜôÂÖ•ËÆøÈóÆÔºåËøô‰∫õÂÜôÂÖ•Á∫øÁ®ãÁöÑÊâÄÊúâÊìç‰ΩúÈÉΩÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰ΩÜËØªÂèñÊìç‰Ωú‰∏çÂøÖÈîÅÂÆö„ÄÇ‰ª•ConcurrentÂºÄÂ§¥ÁöÑÈõÜÂêàÁ±ªÈááÁî®‰∫ÜÊõ¥Â§çÊùÇÁöÑÁÆóÊ≥ïÊù•‰øùËØÅÊ∞∏Ëøú‰∏ç‰ºöÈîÅ‰ΩèÊï¥‰∏™ÈõÜÂêàÔºåÂõ†Ê≠§Âú®Âπ∂ÂèëÂÜôÂÖ•Êó∂ÊúâËæÉÂ•ΩÁöÑÊÄßËÉΩ„ÄÇ</p>
</li>
<li><p>‰ª•CopyOnWriteÂºÄÂ§¥ÁöÑÈõÜÂêàÁ±ªÔºö</p>
<p>‰ª•CopyOnWriteÂºÄÂ§¥ÁöÑÈõÜÂêàÁ±ªÈááÁî®Â§çÂà∂Â∫ïÂ±ÇÊï∞ÁªÑÁöÑÊñπÂºèÊù•ÂÆûÁé∞ÂÜôÊìç‰Ωú„ÄÇÂΩìÁ∫øÁ®ãÂØπÊ≠§Á±ªÈõÜÂêàÊâßË°åËØªÂèñÊìç‰ΩúÊó∂ÔºåÁ∫øÁ®ãÂ∞Ü‰ºöÁõ¥Êé•ËØªÂèñÈõÜÂêàÊú¨Ë∫´ÔºåÊó†È°ªÂä†ÈîÅ‰∏éÈòªÂ°û„ÄÇÂΩìÁ∫øÁ®ãÂØπÊ≠§Á±ªÈõÜÂêàÊâßË°åÂÜôÂÖ•Êìç‰ΩúÊó∂ÔºåÈõÜÂêà‰ºöÂú®Â∫ïÂ±ÇÂ§çÂà∂‰∏Ä‰ªΩÊñ∞ÁöÑÊï∞ÁªÑÔºåÊé•‰∏ãÊù•ÂØπÊñ∞ÁöÑÊï∞ÁªÑÊâßË°åÂÜôÂÖ•Êìç‰Ωú„ÄÇÁî±‰∫éÂØπÈõÜÂêàÁöÑÂÜôÂÖ•Êìç‰ΩúÈÉΩÊòØÂØπÊï∞ÁªÑÁöÑÂâØÊú¨ÊâßË°åÊìç‰ΩúÔºåÂõ†Ê≠§ÂÆÉÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ</p>
</li>
</ul>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>java.util.concurrentÂåÖ‰∏ãÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂêàÁ±ªÁöÑ‰ΩìÁ≥ªÁªìÊûÑÔºö</p>
<p><img src="/p/3eb3d776/53AA859E1B3A9CD7709DF9366999B88D.jpeg" alt="img"></p>
<h3 id="MapÊé•Âè£ÊúâÂì™‰∫õÂÆûÁé∞Á±ªÔºü"><a href="#MapÊé•Âè£ÊúâÂì™‰∫õÂÆûÁé∞Á±ªÔºü" class="headerlink" title="MapÊé•Âè£ÊúâÂì™‰∫õÂÆûÁé∞Á±ªÔºü"></a>MapÊé•Âè£ÊúâÂì™‰∫õÂÆûÁé∞Á±ªÔºü</h3><p>MapÊé•Âè£ÊúâÂæàÂ§öÂÆûÁé∞Á±ªÔºåÂÖ∂‰∏≠ÊØîËæÉÂ∏∏Áî®ÁöÑÊúâHashMap„ÄÅLinkedHashMap„ÄÅTreeMap„ÄÅConcurrentHashMap„ÄÇ</p>
<p>ÂØπ‰∫é‰∏çÈúÄË¶ÅÊéíÂ∫èÁöÑÂú∫ÊôØÔºå‰ºòÂÖàËÄÉËôë‰ΩøÁî®HashMapÔºåÂõ†‰∏∫ÂÆÉÊòØÊÄßËÉΩÊúÄÂ•ΩÁöÑMapÂÆûÁé∞„ÄÇÂ¶ÇÊûúÈúÄË¶Å‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂàôÂèØ‰ª•‰ΩøÁî®ConcurrentHashMap„ÄÇÂÆÉÁöÑÊÄßËÉΩÂ•Ω‰∫éHashtableÔºåÂõ†‰∏∫ÂÆÉÂú®putÊó∂ÈááÁî®ÂàÜÊÆµÈîÅ/CASÁöÑÂä†ÈîÅÊú∫Âà∂ÔºåËÄå‰∏çÊòØÂÉèHashtableÈÇ£Ê†∑ÔºåÊó†ËÆ∫ÊòØputËøòÊòØgetÈÉΩÂÅöÂêåÊ≠•Â§ÑÁêÜ„ÄÇ</p>
<p>ÂØπ‰∫éÈúÄË¶ÅÊéíÂ∫èÁöÑÂú∫ÊôØÔºåÂ¶ÇÊûúÈúÄË¶ÅÊåâÊèíÂÖ•È°∫Â∫èÊéíÂ∫èÂàôÂèØ‰ª•‰ΩøÁî®LinkedHashMapÔºåÂ¶ÇÊûúÈúÄË¶ÅÂ∞ÜkeyÊåâËá™ÁÑ∂È°∫Â∫èÊéíÂàóÁîöËá≥ÊòØËá™ÂÆö‰πâÈ°∫Â∫èÊéíÂàóÔºåÂàôÂèØ‰ª•ÈÄâÊã©TreeMap„ÄÇÂ¶ÇÊûúÈúÄË¶Å‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂàôÂèØ‰ª•‰ΩøÁî®CollectionsÂ∑•ÂÖ∑Á±ªÂ∞Ü‰∏äËø∞ÂÆûÁé∞Á±ªÂåÖË£ÖÊàêÁ∫øÁ®ãÂÆâÂÖ®ÁöÑMap„ÄÇ</p>
<h3 id="ÊèèËø∞‰∏Ä‰∏ãMap-putÁöÑËøáÁ®ã"><a href="#ÊèèËø∞‰∏Ä‰∏ãMap-putÁöÑËøáÁ®ã" class="headerlink" title="ÊèèËø∞‰∏Ä‰∏ãMap putÁöÑËøáÁ®ã"></a>ÊèèËø∞‰∏Ä‰∏ãMap putÁöÑËøáÁ®ã</h3><p>HashMapÊòØÊúÄÁªèÂÖ∏ÁöÑMapÂÆûÁé∞Ôºå‰∏ãÈù¢‰ª•ÂÆÉÁöÑËßÜËßí‰ªãÁªçputÁöÑËøáÁ®ãÔºö</p>
<ol>
<li><p>È¶ñÊ¨°Êâ©ÂÆπÔºö</p>
<p>ÂÖàÂà§Êñ≠Êï∞ÁªÑÊòØÂê¶‰∏∫Á©∫ÔºåËã•Êï∞ÁªÑ‰∏∫Á©∫ÂàôËøõË°åÁ¨¨‰∏ÄÊ¨°Êâ©ÂÆπÔºàresizeÔºâÔºõ</p>
</li>
<li><p>ËÆ°ÁÆóÁ¥¢ÂºïÔºö</p>
<p>ÈÄöËøáhashÁÆóÊ≥ïÔºåËÆ°ÁÆóÈîÆÂÄºÂØπÂú®Êï∞ÁªÑ‰∏≠ÁöÑÁ¥¢ÂºïÔºõ</p>
</li>
<li><p>ÊèíÂÖ•Êï∞ÊçÆÔºö</p>
<ul>
<li>Â¶ÇÊûúÂΩìÂâç‰ΩçÁΩÆÂÖÉÁ¥†‰∏∫Á©∫ÔºåÂàôÁõ¥Êé•ÊèíÂÖ•Êï∞ÊçÆÔºõ</li>
<li>Â¶ÇÊûúÂΩìÂâç‰ΩçÁΩÆÂÖÉÁ¥†ÈùûÁ©∫Ôºå‰∏îkeyÂ∑≤Â≠òÂú®ÔºåÂàôÁõ¥Êé•Ë¶ÜÁõñÂÖ∂valueÔºõ</li>
<li>Â¶ÇÊûúÂΩìÂâç‰ΩçÁΩÆÂÖÉÁ¥†ÈùûÁ©∫Ôºå‰∏îkey‰∏çÂ≠òÂú®ÔºåÂàôÂ∞ÜÊï∞ÊçÆÈìæÂà∞ÈìæË°®Êú´Á´ØÔºõ</li>
<li>Ëã•ÈìæË°®ÈïøÂ∫¶ËææÂà∞8ÔºåÂàôÂ∞ÜÈìæË°®ËΩ¨Êç¢ÊàêÁ∫¢ÈªëÊ†ëÔºåÂπ∂Â∞ÜÊï∞ÊçÆÊèíÂÖ•Ê†ë‰∏≠Ôºõ</li>
</ul>
</li>
<li><p>ÂÜçÊ¨°Êâ©ÂÆπ</p>
<p>Â¶ÇÊûúÊï∞ÁªÑ‰∏≠ÂÖÉÁ¥†‰∏™Êï∞ÔºàsizeÔºâË∂ÖËøáthresholdÔºåÂàôÂÜçÊ¨°ËøõË°åÊâ©ÂÆπÊìç‰Ωú„ÄÇ</p>
</li>
</ol>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>HashMapÊ∑ªÂä†Êï∞ÊçÆÁöÑËØ¶ÁªÜËøáÁ®ãÔºåÂ¶Ç‰∏ãÂõæÔºö</p>
<p><img src="/p/3eb3d776/18330EB2310CB83A25FA317E65ED60EB.png" alt="img"></p>
<h3 id="Â¶Ç‰ΩïÂæóÂà∞‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑMapÔºü"><a href="#Â¶Ç‰ΩïÂæóÂà∞‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑMapÔºü" class="headerlink" title="Â¶Ç‰ΩïÂæóÂà∞‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑMapÔºü"></a>Â¶Ç‰ΩïÂæóÂà∞‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑMapÔºü</h3><ol>
<li>‰ΩøÁî®CollectionsÂ∑•ÂÖ∑Á±ªÔºåÂ∞ÜÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑMapÂåÖË£ÖÊàêÁ∫øÁ®ãÂÆâÂÖ®ÁöÑMapÔºõ</li>
<li>‰ΩøÁî®java.util.concurrentÂåÖ‰∏ãÁöÑMapÔºåÂ¶ÇConcurrentHashMapÔºõ</li>
<li>‰∏çÂª∫ËÆÆ‰ΩøÁî®HashtableÔºåËôΩÁÑ∂HashtableÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰ΩÜÊòØÊÄßËÉΩËæÉÂ∑Æ„ÄÇ</li>
</ol>
<h3 id="HashMapÊúâ‰ªÄ‰πàÁâπÁÇπÔºü"><a href="#HashMapÊúâ‰ªÄ‰πàÁâπÁÇπÔºü" class="headerlink" title="HashMapÊúâ‰ªÄ‰πàÁâπÁÇπÔºü"></a>HashMapÊúâ‰ªÄ‰πàÁâπÁÇπÔºü</h3><ol>
<li>HashMapÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÂÆûÁé∞Ôºõ</li>
<li>HashMapÂèØ‰ª•‰ΩøÁî®null‰Ωú‰∏∫keyÊàñvalue„ÄÇ</li>
</ol>
<h3 id="JDK7ÂíåJDK8‰∏≠ÁöÑHashMapÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#JDK7ÂíåJDK8‰∏≠ÁöÑHashMapÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="JDK7ÂíåJDK8‰∏≠ÁöÑHashMapÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>JDK7ÂíåJDK8‰∏≠ÁöÑHashMapÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h3><p>JDK7‰∏≠ÁöÑHashMapÔºåÊòØÂü∫‰∫éÊï∞ÁªÑ+ÈìæË°®Êù•ÂÆûÁé∞ÁöÑÔºåÂÆÉÁöÑÂ∫ïÂ±ÇÁª¥Êä§‰∏Ä‰∏™EntryÊï∞ÁªÑ„ÄÇÂÆÉ‰ºöÊ†πÊçÆËÆ°ÁÆóÁöÑhashCodeÂ∞ÜÂØπÂ∫îÁöÑKVÈîÆÂÄºÂØπÂ≠òÂÇ®Âà∞ËØ•Êï∞ÁªÑ‰∏≠Ôºå‰∏ÄÊó¶ÂèëÁîühashCodeÂÜ≤Á™ÅÔºåÈÇ£‰πàÂ∞±‰ºöÂ∞ÜËØ•KVÈîÆÂÄºÂØπÊîæÂà∞ÂØπÂ∫îÁöÑÂ∑≤ÊúâÂÖÉÁ¥†ÁöÑÂêéÈù¢Ôºå Ê≠§Êó∂‰æøÂΩ¢Êàê‰∫Ü‰∏Ä‰∏™ÈìæË°®ÂºèÁöÑÂ≠òÂÇ®ÁªìÊûÑ„ÄÇ</p>
<p>JDK7‰∏≠HashMapÁöÑÂÆûÁé∞ÊñπÊ°àÊúâ‰∏Ä‰∏™ÊòéÊòæÁöÑÁº∫ÁÇπÔºåÂç≥ÂΩìHashÂÜ≤Á™Å‰∏•ÈáçÊó∂ÔºåÂú®Ê°∂‰∏äÂΩ¢ÊàêÁöÑÈìæË°®‰ºöÂèòÂæóË∂äÊù•Ë∂äÈïøÔºåËøôÊ†∑Âú®Êü•ËØ¢Êó∂ÁöÑÊïàÁéáÂ∞±‰ºöË∂äÊù•Ë∂ä‰ΩéÔºåÂÖ∂Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(N)„ÄÇ</p>
<p>JDK8‰∏≠ÁöÑHashMapÔºåÊòØÂü∫‰∫éÊï∞ÁªÑ+ÈìæË°®+Á∫¢ÈªëÊ†ëÊù•ÂÆûÁé∞ÁöÑÔºåÂÆÉÁöÑÂ∫ïÂ±ÇÁª¥Êä§‰∏Ä‰∏™NodeÊï∞ÁªÑ„ÄÇÂΩìÈìæË°®ÁöÑÂ≠òÂÇ®ÁöÑÊï∞ÊçÆ‰∏™Êï∞Â§ß‰∫éÁ≠â‰∫é8ÁöÑÊó∂ÂÄôÔºå‰∏çÂÜçÈááÁî®ÈìæË°®Â≠òÂÇ®ÔºåËÄåÈááÁî®‰∫ÜÁ∫¢ÈªëÊ†ëÂ≠òÂÇ®ÁªìÊûÑ„ÄÇËøô‰πàÂÅö‰∏ªË¶ÅÊòØÂú®Êü•ËØ¢ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏äËøõË°å‰ºòÂåñÔºåÈìæË°®‰∏∫O(N)ÔºåËÄåÁ∫¢ÈªëÊ†ë‰∏ÄÁõ¥ÊòØO(logN)ÔºåÂèØ‰ª•Â§ßÂ§ßÁöÑÊèêÈ´òÊü•ÊâæÊÄßËÉΩ„ÄÇ</p>
<h3 id="‰ªãÁªç‰∏Ä‰∏ãHashMapÂ∫ïÂ±ÇÁöÑÂÆûÁé∞ÂéüÁêÜ"><a href="#‰ªãÁªç‰∏Ä‰∏ãHashMapÂ∫ïÂ±ÇÁöÑÂÆûÁé∞ÂéüÁêÜ" class="headerlink" title="‰ªãÁªç‰∏Ä‰∏ãHashMapÂ∫ïÂ±ÇÁöÑÂÆûÁé∞ÂéüÁêÜ"></a>‰ªãÁªç‰∏Ä‰∏ãHashMapÂ∫ïÂ±ÇÁöÑÂÆûÁé∞ÂéüÁêÜ</h3><p>ÂÆÉÂü∫‰∫éhashÁÆóÊ≥ïÔºåÈÄöËøáputÊñπÊ≥ïÂíågetÊñπÊ≥ïÂ≠òÂÇ®ÂíåËé∑ÂèñÂØπË±°„ÄÇ</p>
<p>Â≠òÂÇ®ÂØπË±°Êó∂ÔºåÊàë‰ª¨Â∞ÜK/V‰º†ÁªôputÊñπÊ≥ïÊó∂ÔºåÂÆÉË∞ÉÁî®KÁöÑhashCodeËÆ°ÁÆóhash‰ªéËÄåÂæóÂà∞bucket‰ΩçÁΩÆÔºåËøõ‰∏ÄÊ≠•Â≠òÂÇ®ÔºåHashMap‰ºöÊ†πÊçÆÂΩìÂâçbucketÁöÑÂç†Áî®ÊÉÖÂÜµËá™Âä®Ë∞ÉÊï¥ÂÆπÈáè(Ë∂ÖËøáLoad FacotrÂàôresize‰∏∫ÂéüÊù•ÁöÑ2ÂÄç)„ÄÇËé∑ÂèñÂØπË±°Êó∂ÔºåÊàë‰ª¨Â∞ÜK‰º†ÁªôgetÔºåÂÆÉË∞ÉÁî®hashCodeËÆ°ÁÆóhash‰ªéËÄåÂæóÂà∞bucket‰ΩçÁΩÆÔºåÂπ∂Ëøõ‰∏ÄÊ≠•Ë∞ÉÁî®equals()ÊñπÊ≥ïÁ°ÆÂÆöÈîÆÂÄºÂØπ„ÄÇ</p>
<p>Â¶ÇÊûúÂèëÁîüÁ¢∞ÊíûÁöÑÊó∂ÂÄôÔºåHashMapÈÄöËøáÈìæË°®Â∞Ü‰∫ßÁîüÁ¢∞ÊíûÂÜ≤Á™ÅÁöÑÂÖÉÁ¥†ÁªÑÁªáËµ∑Êù•„ÄÇÂú®Java 8‰∏≠ÔºåÂ¶ÇÊûú‰∏Ä‰∏™bucket‰∏≠Á¢∞ÊíûÂÜ≤Á™ÅÁöÑÂÖÉÁ¥†Ë∂ÖËøáÊüê‰∏™ÈôêÂà∂(ÈªòËÆ§ÊòØ8)ÔºåÂàô‰ΩøÁî®Á∫¢ÈªëÊ†ëÊù•ÊõøÊç¢ÈìæË°®Ôºå‰ªéËÄåÊèêÈ´òÈÄüÂ∫¶„ÄÇ</p>
<h3 id="‰ªãÁªç‰∏Ä‰∏ãHashMapÁöÑÊâ©ÂÆπÊú∫Âà∂"><a href="#‰ªãÁªç‰∏Ä‰∏ãHashMapÁöÑÊâ©ÂÆπÊú∫Âà∂" class="headerlink" title="‰ªãÁªç‰∏Ä‰∏ãHashMapÁöÑÊâ©ÂÆπÊú∫Âà∂"></a>‰ªãÁªç‰∏Ä‰∏ãHashMapÁöÑÊâ©ÂÆπÊú∫Âà∂</h3><ol>
<li>Êï∞ÁªÑÁöÑÂàùÂßãÂÆπÈáè‰∏∫16ÔºåËÄåÂÆπÈáèÊòØ‰ª•2ÁöÑÊ¨°ÊñπÊâ©ÂÖÖÁöÑÔºå‰∏ÄÊòØ‰∏∫‰∫ÜÊèêÈ´òÊÄßËÉΩ‰ΩøÁî®Ë∂≥Â§üÂ§ßÁöÑÊï∞ÁªÑÔºå‰∫åÊòØ‰∏∫‰∫ÜËÉΩ‰ΩøÁî®‰ΩçËøêÁÆó‰ª£ÊõøÂèñÊ®°È¢ÑÁÆó(ÊçÆËØ¥ÊèêÂçá‰∫Ü5~8ÂÄç)„ÄÇ</li>
<li>Êï∞ÁªÑÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÖÖÊòØÈÄöËøáË¥üËΩΩÂõ†Â≠êÂà§Êñ≠ÁöÑÔºåÂ¶ÇÊûúÂΩìÂâçÂÖÉÁ¥†‰∏™Êï∞‰∏∫Êï∞ÁªÑÂÆπÈáèÁöÑ0.75Êó∂ÔºåÂ∞±‰ºöÊâ©ÂÖÖÊï∞ÁªÑ„ÄÇËøô‰∏™0.75Â∞±ÊòØÈªòËÆ§ÁöÑË¥üËΩΩÂõ†Â≠êÔºåÂèØÁî±ÊûÑÈÄ†Âô®‰º†ÂÖ•„ÄÇÊàë‰ª¨‰πüÂèØ‰ª•ËÆæÁΩÆÂ§ß‰∫é1ÁöÑË¥üËΩΩÂõ†Â≠êÔºåËøôÊ†∑Êï∞ÁªÑÂ∞±‰∏ç‰ºöÊâ©ÂÖÖÔºåÁâ∫Áâ≤ÊÄßËÉΩÔºåËäÇÁúÅÂÜÖÂ≠ò„ÄÇ</li>
<li>‰∏∫‰∫ÜËß£ÂÜ≥Á¢∞ÊíûÔºåÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†ÊòØÂçïÂêëÈìæË°®Á±ªÂûã„ÄÇÂΩìÈìæË°®ÈïøÂ∫¶Âà∞Ëææ‰∏Ä‰∏™ÈòàÂÄºÊó∂Ôºà7Êàñ8ÔºâÔºå‰ºöÂ∞ÜÈìæË°®ËΩ¨Êç¢ÊàêÁ∫¢ÈªëÊ†ëÊèêÈ´òÊÄßËÉΩ„ÄÇËÄåÂΩìÈìæË°®ÈïøÂ∫¶Áº©Â∞èÂà∞Âè¶‰∏Ä‰∏™ÈòàÂÄºÊó∂Ôºà6ÔºâÔºåÂèà‰ºöÂ∞ÜÁ∫¢ÈªëÊ†ëËΩ¨Êç¢ÂõûÂçïÂêëÈìæË°®ÊèêÈ´òÊÄßËÉΩ„ÄÇ</li>
<li>ÂØπ‰∫éÁ¨¨‰∏âÁÇπË°•ÂÖÖËØ¥ÊòéÔºåÊ£ÄÊü•ÈìæË°®ÈïøÂ∫¶ËΩ¨Êç¢ÊàêÁ∫¢ÈªëÊ†ë‰πãÂâçÔºåËøò‰ºöÂÖàÊ£ÄÊµãÂΩìÂâçÊï∞ÁªÑÊï∞ÁªÑÊòØÂê¶Âà∞Ëææ‰∏Ä‰∏™ÈòàÂÄºÔºà64ÔºâÔºåÂ¶ÇÊûúÊ≤°ÊúâÂà∞ËææËøô‰∏™ÂÆπÈáèÔºå‰ºöÊîæÂºÉËΩ¨Êç¢ÔºåÂÖàÂéªÊâ©ÂÖÖÊï∞ÁªÑ„ÄÇÊâÄ‰ª•‰∏äÈù¢‰πüËØ¥‰∫ÜÈìæË°®ÈïøÂ∫¶ÁöÑÈòàÂÄºÊòØ7Êàñ8ÔºåÂõ†‰∏∫‰ºöÊúâ‰∏ÄÊ¨°ÊîæÂºÉËΩ¨Êç¢ÁöÑÊìç‰Ωú„ÄÇ</li>
</ol>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>‰æãÂ¶ÇÊàë‰ª¨‰ªé16Êâ©Â±ï‰∏∫32Êó∂ÔºåÂÖ∑‰ΩìÁöÑÂèòÂåñÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<p><img src="/p/3eb3d776/B7A9F3ADBA028FE6FDE22C94D566B4F1.png" alt="img"></p>
<p>Âõ†Ê≠§ÂÖÉÁ¥†Âú®ÈáçÊñ∞ËÆ°ÁÆóhash‰πãÂêéÔºåÂõ†‰∏∫nÂèò‰∏∫2ÂÄçÔºåÈÇ£‰πàn-1ÁöÑmaskËåÉÂõ¥Âú®È´ò‰ΩçÂ§ö1bit(Á∫¢Ëâ≤)ÔºåÂõ†Ê≠§Êñ∞ÁöÑindexÂ∞±‰ºöÂèëÁîüËøôÊ†∑ÁöÑÂèòÂåñÔºö</p>
<p><img src="/p/3eb3d776/FB03BC4205AD26DC0210B12412AAC145.png" alt="img"></p>
<p>Âõ†Ê≠§ÔºåÊàë‰ª¨Âú®Êâ©ÂÖÖHashMapÁöÑÊó∂ÂÄôÔºå‰∏çÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆóhashÔºåÂè™ÈúÄË¶ÅÁúãÁúãÂéüÊù•ÁöÑhashÂÄºÊñ∞Â¢ûÁöÑÈÇ£‰∏™bitÊòØ1ËøòÊòØ0Â∞±Â•Ω‰∫ÜÔºåÊòØ0ÁöÑËØùÁ¥¢ÂºïÊ≤°ÂèòÔºåÊòØ1ÁöÑËØùÁ¥¢ÂºïÂèòÊàê‚ÄúÂéüÁ¥¢Âºï+oldCap‚Äù„ÄÇÂèØ‰ª•ÁúãÁúã‰∏ãÂõæ‰∏∫16Êâ©ÂÖÖ‰∏∫32ÁöÑresizeÁ§∫ÊÑèÂõæÔºö</p>
<p><img src="/p/3eb3d776/C2928A93915A4AEF2709862EBAC8515C.png" alt="img"></p>
<p>Ëøô‰∏™ËÆæËÆ°Á°ÆÂÆûÈùûÂ∏∏ÁöÑÂ∑ßÂ¶ôÔºåÊó¢ÁúÅÂéª‰∫ÜÈáçÊñ∞ËÆ°ÁÆóhashÂÄºÁöÑÊó∂Èó¥ÔºåËÄå‰∏îÂêåÊó∂ÔºåÁî±‰∫éÊñ∞Â¢ûÁöÑ1bitÊòØ0ËøòÊòØ1ÂèØ‰ª•ËÆ§‰∏∫ÊòØÈöèÊú∫ÁöÑÔºåÂõ†Ê≠§resizeÁöÑËøáÁ®ãÔºåÂùáÂåÄÁöÑÊää‰πãÂâçÁöÑÂÜ≤Á™ÅÁöÑËäÇÁÇπÂàÜÊï£Âà∞Êñ∞ÁöÑbucket‰∫Ü„ÄÇ</p>
<h3 id="HashMap‰∏≠ÁöÑÂæ™ÁéØÈìæË°®ÊòØÂ¶Ç‰Ωï‰∫ßÁîüÁöÑÔºü"><a href="#HashMap‰∏≠ÁöÑÂæ™ÁéØÈìæË°®ÊòØÂ¶Ç‰Ωï‰∫ßÁîüÁöÑÔºü" class="headerlink" title="HashMap‰∏≠ÁöÑÂæ™ÁéØÈìæË°®ÊòØÂ¶Ç‰Ωï‰∫ßÁîüÁöÑÔºü"></a>HashMap‰∏≠ÁöÑÂæ™ÁéØÈìæË°®ÊòØÂ¶Ç‰Ωï‰∫ßÁîüÁöÑÔºü</h3><p>Âú®Â§öÁ∫øÁ®ãÁöÑÊÉÖÂÜµ‰∏ãÔºåÂΩìÈáçÊñ∞Ë∞ÉÊï¥HashMapÂ§ßÂ∞èÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÂ≠òÂú®Êù°‰ª∂Á´û‰∫âÔºåÂõ†‰∏∫Â¶ÇÊûú‰∏§‰∏™Á∫øÁ®ãÈÉΩÂèëÁé∞HashMapÈúÄË¶ÅÈáçÊñ∞Ë∞ÉÊï¥Â§ßÂ∞è‰∫ÜÔºåÂÆÉ‰ª¨‰ºöÂêåÊó∂ËØïÁùÄË∞ÉÊï¥Â§ßÂ∞è„ÄÇÂú®Ë∞ÉÊï¥Â§ßÂ∞èÁöÑËøáÁ®ã‰∏≠ÔºåÂ≠òÂÇ®Âú®ÈìæË°®‰∏≠ÁöÑÂÖÉÁ¥†ÁöÑÊ¨°Â∫è‰ºöÂèçËøáÊù•ÔºåÂõ†‰∏∫ÁßªÂä®Âà∞Êñ∞ÁöÑbucket‰ΩçÁΩÆÁöÑÊó∂ÂÄôÔºåHashMapÂπ∂‰∏ç‰ºöÂ∞ÜÂÖÉÁ¥†ÊîæÂú®ÈìæË°®ÁöÑÂ∞æÈÉ®ÔºåËÄåÊòØÊîæÂú®Â§¥ÈÉ®ÔºåËøôÊòØ‰∏∫‰∫ÜÈÅøÂÖçÂ∞æÈÉ®ÈÅçÂéÜ„ÄÇÂ¶ÇÊûúÊù°‰ª∂Á´û‰∫âÂèëÁîü‰∫ÜÔºåÈÇ£‰πàÂ∞±‰ºö‰∫ßÁîüÊ≠ªÂæ™ÁéØ‰∫Ü„ÄÇ</p>
<h3 id="HashMap‰∏∫‰ªÄ‰πàÁî®Á∫¢ÈªëÊ†ëËÄå‰∏çÁî®BÊ†ëÔºü"><a href="#HashMap‰∏∫‰ªÄ‰πàÁî®Á∫¢ÈªëÊ†ëËÄå‰∏çÁî®BÊ†ëÔºü" class="headerlink" title="HashMap‰∏∫‰ªÄ‰πàÁî®Á∫¢ÈªëÊ†ëËÄå‰∏çÁî®BÊ†ëÔºü"></a>HashMap‰∏∫‰ªÄ‰πàÁî®Á∫¢ÈªëÊ†ëËÄå‰∏çÁî®BÊ†ëÔºü</h3><p>B/B+Ê†ëÂ§öÁî®‰∫éÂ§ñÂ≠ò‰∏äÊó∂ÔºåB/B+‰πüË¢´Êàê‰∏∫‰∏Ä‰∏™Á£ÅÁõòÂèãÂ•ΩÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ</p>
<p>HashMapÊú¨Êù•ÊòØÊï∞ÁªÑ+ÈìæË°®ÁöÑÂΩ¢ÂºèÔºåÈìæË°®Áî±‰∫éÂÖ∂Êü•ÊâæÊÖ¢ÁöÑÁâπÁÇπÔºåÊâÄ‰ª•ÈúÄË¶ÅË¢´Êü•ÊâæÊïàÁéáÊõ¥È´òÁöÑÊ†ëÁªìÊûÑÊù•ÊõøÊç¢„ÄÇÂ¶ÇÊûúÁî®B/B+Ê†ëÁöÑËØùÔºåÂú®Êï∞ÊçÆÈáè‰∏çÊòØÂæàÂ§öÁöÑÊÉÖÂÜµ‰∏ãÔºåÊï∞ÊçÆÈÉΩ‰ºö‚ÄúÊå§Âú®‚Äù‰∏Ä‰∏™ÁªìÁÇπÈáåÈù¢ÔºåËøô‰∏™Êó∂ÂÄôÈÅçÂéÜÊïàÁéáÂ∞±ÈÄÄÂåñÊàê‰∫ÜÈìæË°®„ÄÇ</p>
<h3 id="HashMap‰∏∫‰ªÄ‰πàÁ∫øÁ®ã‰∏çÂÆâÂÖ®Ôºü"><a href="#HashMap‰∏∫‰ªÄ‰πàÁ∫øÁ®ã‰∏çÂÆâÂÖ®Ôºü" class="headerlink" title="HashMap‰∏∫‰ªÄ‰πàÁ∫øÁ®ã‰∏çÂÆâÂÖ®Ôºü"></a>HashMap‰∏∫‰ªÄ‰πàÁ∫øÁ®ã‰∏çÂÆâÂÖ®Ôºü</h3><p>HashMapÂú®Âπ∂ÂèëÊâßË°åputÊìç‰ΩúÊó∂ÔºåÂèØËÉΩ‰ºöÂØºËá¥ÂΩ¢ÊàêÂæ™ÁéØÈìæË°®Ôºå‰ªéËÄåÂºïËµ∑Ê≠ªÂæ™ÁéØ„ÄÇ</p>
<h3 id="HashMapÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®Ôºü"><a href="#HashMapÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®Ôºü" class="headerlink" title="HashMapÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®Ôºü"></a>HashMapÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®Ôºü</h3><ol>
<li>Áõ¥Êé•‰ΩøÁî®HashtableÁ±ªÔºõ</li>
<li>Áõ¥Êé•‰ΩøÁî®ConcurrentHashMapÔºõ</li>
<li>‰ΩøÁî®CollectionsÂ∞ÜHashMapÂåÖË£ÖÊàêÁ∫øÁ®ãÂÆâÂÖ®ÁöÑMap„ÄÇ</li>
</ol>
<h3 id="HashMapÊòØÂ¶Ç‰ΩïËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™ÅÁöÑÔºü"><a href="#HashMapÊòØÂ¶Ç‰ΩïËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™ÅÁöÑÔºü" class="headerlink" title="HashMapÊòØÂ¶Ç‰ΩïËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™ÅÁöÑÔºü"></a>HashMapÊòØÂ¶Ç‰ΩïËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™ÅÁöÑÔºü</h3><p>‰∏∫‰∫ÜËß£ÂÜ≥Á¢∞ÊíûÔºåÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†ÊòØÂçïÂêëÈìæË°®Á±ªÂûã„ÄÇÂΩìÈìæË°®ÈïøÂ∫¶Âà∞Ëææ‰∏Ä‰∏™ÈòàÂÄºÊó∂Ôºå‰ºöÂ∞ÜÈìæË°®ËΩ¨Êç¢ÊàêÁ∫¢ÈªëÊ†ëÊèêÈ´òÊÄßËÉΩ„ÄÇËÄåÂΩìÈìæË°®ÈïøÂ∫¶Áº©Â∞èÂà∞Âè¶‰∏Ä‰∏™ÈòàÂÄºÊó∂ÔºåÂèà‰ºöÂ∞ÜÁ∫¢ÈªëÊ†ëËΩ¨Êç¢ÂõûÂçïÂêëÈìæË°®ÊèêÈ´òÊÄßËÉΩ„ÄÇ</p>
<h3 id="ËØ¥‰∏ÄËØ¥HashMapÂíåHashTableÁöÑÂå∫Âà´"><a href="#ËØ¥‰∏ÄËØ¥HashMapÂíåHashTableÁöÑÂå∫Âà´" class="headerlink" title="ËØ¥‰∏ÄËØ¥HashMapÂíåHashTableÁöÑÂå∫Âà´"></a>ËØ¥‰∏ÄËØ¥HashMapÂíåHashTableÁöÑÂå∫Âà´</h3><ol>
<li>HashtableÊòØ‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑMapÂÆûÁé∞Ôºå‰ΩÜHashMapÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÂÆûÁé∞ÔºåÊâÄ‰ª•HashMapÊØîHashtableÁöÑÊÄßËÉΩÈ´ò‰∏ÄÁÇπ„ÄÇ</li>
<li>Hashtable‰∏çÂÖÅËÆ∏‰ΩøÁî®null‰Ωú‰∏∫keyÂíåvalueÔºåÂ¶ÇÊûúËØïÂõæÊäänullÂÄºÊîæËøõHashtable‰∏≠ÔºåÂ∞Ü‰ºöÂºïÂèëÁ©∫ÊåáÈíàÂºÇÂ∏∏Ôºå‰ΩÜHashMapÂèØ‰ª•‰ΩøÁî®null‰Ωú‰∏∫keyÊàñvalue„ÄÇ</li>
</ol>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>‰ªéHashtableÁöÑÁ±ªÂêç‰∏äÂ∞±ÂèØ‰ª•ÁúãÂá∫ÂÆÉÊòØ‰∏Ä‰∏™Âè§ËÄÅÁöÑÁ±ªÔºåÂÆÉÁöÑÂëΩÂêçÁîöËá≥Ê≤°ÊúâÈÅµÂÆàJavaÁöÑÂëΩÂêçËßÑËåÉÔºöÊØè‰∏™ÂçïËØçÁöÑÈ¶ñÂ≠óÊØçÈÉΩÂ∫îËØ•Â§ßÂÜô„ÄÇ‰πüËÆ∏ÂΩìÂàùÂºÄÂèëHashtableÁöÑÂ∑•Á®ãÂ∏à‰πüÊ≤°ÊúâÊ≥®ÊÑèÂà∞Ëøô‰∏ÄÁÇπÔºåÂêéÊù•Â§ßÈáèJavaÁ®ãÂ∫è‰∏≠‰ΩøÁî®‰∫ÜHashtableÁ±ªÔºåÊâÄ‰ª•Ëøô‰∏™Á±ªÂêç‰πüÂ∞±‰∏çËÉΩÊîπ‰∏∫HashTable‰∫ÜÔºåÂê¶ÂàôÂ∞ÜÂØºËá¥Â§ßÈáèÁ®ãÂ∫èÈúÄË¶ÅÊîπÂÜô„ÄÇ</p>
<p>‰∏éVectorÁ±ª‰ººÁöÑÊòØÔºåÂ∞ΩÈáèÂ∞ëÁî®HashtableÂÆûÁé∞Á±ªÔºåÂç≥‰ΩøÈúÄË¶ÅÂàõÂª∫Á∫øÁ®ãÂÆâÂÖ®ÁöÑMapÂÆûÁé∞Á±ªÔºå‰πüÊó†È°ª‰ΩøÁî®HashtableÂÆûÁé∞Á±ªÔºåÂèØ‰ª•ÈÄöËøáCollectionsÂ∑•ÂÖ∑Á±ªÊääHashMapÂèòÊàêÁ∫øÁ®ãÂÆâÂÖ®ÁöÑMap„ÄÇ</p>
<h3 id="HashMap‰∏éConcurrentHashMapÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#HashMap‰∏éConcurrentHashMapÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="HashMap‰∏éConcurrentHashMapÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>HashMap‰∏éConcurrentHashMapÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h3><p>HashMapÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåËøôÊÑèÂë≥ÁùÄ‰∏çÂ∫îËØ•Âú®Â§öÁ∫øÁ®ã‰∏≠ÂØπËøô‰∫õMapËøõË°å‰øÆÊîπÊìç‰ΩúÔºåÂê¶Âàô‰ºö‰∫ßÁîüÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢òÔºåÁîöËá≥Ëøò‰ºöÂõ†‰∏∫Âπ∂ÂèëÊèíÂÖ•ÂÖÉÁ¥†ËÄåÂØºËá¥ÈìæË°®ÊàêÁéØÔºåËøôÊ†∑Âú®Êü•ÊâæÊó∂Â∞±‰ºöÂèëÁîüÊ≠ªÂæ™ÁéØÔºåÂΩ±ÂìçÂà∞Êï¥‰∏™Â∫îÁî®Á®ãÂ∫è„ÄÇ</p>
<p>CollectionsÂ∑•ÂÖ∑Á±ªÂèØ‰ª•Â∞Ü‰∏Ä‰∏™MapËΩ¨Êç¢ÊàêÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆûÁé∞ÔºåÂÖ∂ÂÆû‰πüÂ∞±ÊòØÈÄöËøá‰∏Ä‰∏™ÂåÖË£ÖÁ±ªÔºåÁÑ∂ÂêéÊääÊâÄÊúâÂäüËÉΩÈÉΩÂßîÊâòÁªô‰º†ÂÖ•ÁöÑMapÔºåËÄåÂåÖË£ÖÁ±ªÊòØÂü∫‰∫ésynchronizedÂÖ≥ÈîÆÂ≠óÊù•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºàHashtable‰πüÊòØÂü∫‰∫ésynchronizedÂÖ≥ÈîÆÂ≠óÔºâÔºåÂ∫ïÂ±Ç‰ΩøÁî®ÁöÑÊòØ‰∫íÊñ•ÈîÅÔºåÊÄßËÉΩ‰∏éÂêûÂêêÈáèÊØîËæÉ‰Ωé„ÄÇ</p>
<p>ConcurrentHashMapÁöÑÂÆûÁé∞ÁªÜËäÇËøúÊ≤°ÊúâËøô‰πàÁÆÄÂçïÔºåÂõ†Ê≠§ÊÄßËÉΩ‰πüË¶ÅÈ´ò‰∏äËÆ∏Â§ö„ÄÇÂÆÉÊ≤°Êúâ‰ΩøÁî®‰∏Ä‰∏™ÂÖ®Â±ÄÈîÅÊù•ÈîÅ‰ΩèËá™Â∑±ÔºåËÄåÊòØÈááÁî®‰∫ÜÂáèÂ∞ëÈîÅÁ≤íÂ∫¶ÁöÑÊñπÊ≥ïÔºåÂ∞ΩÈáèÂáèÂ∞ëÂõ†‰∏∫Á´û‰∫âÈîÅËÄåÂØºËá¥ÁöÑÈòªÂ°û‰∏éÂÜ≤Á™ÅÔºåËÄå‰∏îConcurrentHashMapÁöÑÊ£ÄÁ¥¢Êìç‰ΩúÊòØ‰∏çÈúÄË¶ÅÈîÅÁöÑ„ÄÇ</p>
<h3 id="‰ªãÁªç‰∏Ä‰∏ãConcurrentHashMapÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü"><a href="#‰ªãÁªç‰∏Ä‰∏ãConcurrentHashMapÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü" class="headerlink" title="‰ªãÁªç‰∏Ä‰∏ãConcurrentHashMapÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü"></a>‰ªãÁªç‰∏Ä‰∏ãConcurrentHashMapÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü</h3><p>JDK 1.7‰∏≠ÁöÑÂÆûÁé∞Ôºö</p>
<p>Âú® jdk 1.7 ‰∏≠ÔºåConcurrentHashMap ÊòØÁî± Segment Êï∞ÊçÆÁªìÊûÑÂíå HashEntry Êï∞ÁªÑÁªìÊûÑÊûÑÊàêÔºåÈááÂèñÂàÜÊÆµÈîÅÊù•‰øùËØÅÂÆâÂÖ®ÊÄß„ÄÇSegment ÊòØ ReentrantLock ÈáçÂÖ•ÈîÅÔºåÂú® ConcurrentHashMap ‰∏≠ÊâÆÊºîÈîÅÁöÑËßíËâ≤ÔºåHashEntry ÂàôÁî®‰∫éÂ≠òÂÇ®ÈîÆÂÄºÂØπÊï∞ÊçÆ„ÄÇ‰∏Ä‰∏™ ConcurrentHashMap ÈáåÂåÖÂê´‰∏Ä‰∏™ Segment Êï∞ÁªÑÔºå‰∏Ä‰∏™ Segment ÈáåÂåÖÂê´‰∏Ä‰∏™ HashEntry Êï∞ÁªÑÔºåSegment ÁöÑÁªìÊûÑÂíå HashMap Á±ª‰ººÔºåÊòØ‰∏Ä‰∏™Êï∞ÁªÑÂíåÈìæË°®ÁªìÊûÑ„ÄÇ</p>
<p><img src="/p/3eb3d776/A064CF0DD49D1B3694548913C28728DB.png" alt="img"></p>
<p>JDK 1.8‰∏≠ÁöÑÂÆûÁé∞Ôºö</p>
<p>JDK1.8 ÁöÑÂÆûÁé∞Â∑≤ÁªèÊëíÂºÉ‰∫Ü Segment ÁöÑÊ¶ÇÂøµÔºåËÄåÊòØÁõ¥Êé•Áî® Node Êï∞ÁªÑ+ÈìæË°®+Á∫¢ÈªëÊ†ëÁöÑÊï∞ÊçÆÁªìÊûÑÊù•ÂÆûÁé∞ÔºåÂπ∂ÂèëÊéßÂà∂‰ΩøÁî® Synchronized Âíå CAS Êù•Êìç‰ΩúÔºåÊï¥‰∏™ÁúãËµ∑Êù•Â∞±ÂÉèÊòØ‰ºòÂåñËøá‰∏îÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ HashMapÔºåËôΩÁÑ∂Âú® JDK1.8 ‰∏≠ËøòËÉΩÁúãÂà∞ Segment ÁöÑÊï∞ÊçÆÁªìÊûÑÔºå‰ΩÜÊòØÂ∑≤ÁªèÁÆÄÂåñ‰∫ÜÂ±ûÊÄßÔºåÂè™ÊòØ‰∏∫‰∫ÜÂÖºÂÆπÊóßÁâàÊú¨„ÄÇ</p>
<p><img src="/p/3eb3d776/9C8ABF1CD3475339A49DE3B9E1696FE7.png" alt="img"></p>
<h3 id="ConcurrentHashMapÊòØÊÄé‰πàÂàÜÊÆµÂàÜÁªÑÁöÑÔºü"><a href="#ConcurrentHashMapÊòØÊÄé‰πàÂàÜÊÆµÂàÜÁªÑÁöÑÔºü" class="headerlink" title="ConcurrentHashMapÊòØÊÄé‰πàÂàÜÊÆµÂàÜÁªÑÁöÑÔºü"></a>ConcurrentHashMapÊòØÊÄé‰πàÂàÜÊÆµÂàÜÁªÑÁöÑÔºü</h3><p>getÊìç‰ΩúÔºö</p>
<p>SegmentÁöÑgetÊìç‰ΩúÂÆûÁé∞ÈùûÂ∏∏ÁÆÄÂçïÂíåÈ´òÊïàÔºåÂÖàÁªèËøá‰∏ÄÊ¨°ÂÜçÊï£ÂàóÔºåÁÑ∂Âêé‰ΩøÁî®Ëøô‰∏™Êï£ÂàóÂÄºÈÄöËøáÊï£ÂàóËøêÁÆóÂÆö‰ΩçÂà∞ SegmentÔºåÂÜçÈÄöËøáÊï£ÂàóÁÆóÊ≥ïÂÆö‰ΩçÂà∞ÂÖÉÁ¥†„ÄÇgetÊìç‰ΩúÁöÑÈ´òÊïà‰πãÂ§ÑÂú®‰∫éÊï¥‰∏™getËøáÁ®ãÈÉΩ‰∏çÈúÄË¶ÅÂä†ÈîÅÔºåÈô§ÈùûËØªÂà∞Á©∫ÁöÑÂÄºÊâç‰ºöÂä†ÈîÅÈáçËØª„ÄÇÂéüÂõ†Â∞±ÊòØÂ∞Ü‰ΩøÁî®ÁöÑÂÖ±‰∫´ÂèòÈáèÂÆö‰πâÊàê volatile Á±ªÂûã„ÄÇ</p>
<p>putÊìç‰ΩúÔºö</p>
<p>ÂΩìÊâßË°åputÊìç‰ΩúÊó∂Ôºå‰ºöÁªèÂéÜ‰∏§‰∏™Ê≠•È™§Ôºö</p>
<ol>
<li>Âà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπÔºõ</li>
<li>ÂÆö‰ΩçÂà∞Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑ‰ΩçÁΩÆÔºåÂ∞ÜÂÖ∂ÊîæÂÖ• HashEntry Êï∞ÁªÑ‰∏≠„ÄÇ</li>
</ol>
<p>ÊèíÂÖ•ËøáÁ®ã‰ºöËøõË°åÁ¨¨‰∏ÄÊ¨° key ÁöÑ hash Êù•ÂÆö‰Ωç Segment ÁöÑ‰ΩçÁΩÆÔºåÂ¶ÇÊûúËØ• Segment ËøòÊ≤°ÊúâÂàùÂßãÂåñÔºåÂç≥ÈÄöËøá CAS Êìç‰ΩúËøõË°åËµãÂÄºÔºåÁÑ∂ÂêéËøõË°åÁ¨¨‰∫åÊ¨° hash Êìç‰ΩúÔºåÊâæÂà∞Áõ∏Â∫îÁöÑ HashEntry ÁöÑ‰ΩçÁΩÆÔºåËøôÈáå‰ºöÂà©Áî®ÁªßÊâøËøáÊù•ÁöÑÈîÅÁöÑÁâπÊÄßÔºåÂú®Â∞ÜÊï∞ÊçÆÊèíÂÖ•ÊåáÂÆöÁöÑ HashEntry ‰ΩçÁΩÆÊó∂ÔºàÂ∞æÊèíÊ≥ïÔºâÔºå‰ºöÈÄöËøáÁªßÊâø ReentrantLock ÁöÑ tryLock() ÊñπÊ≥ïÂ∞ùËØïÂéªËé∑ÂèñÈîÅÔºåÂ¶ÇÊûúËé∑ÂèñÊàêÂäüÂ∞±Áõ¥Êé•ÊèíÂÖ•Áõ∏Â∫îÁöÑ‰ΩçÁΩÆÔºåÂ¶ÇÊûúÂ∑≤ÁªèÊúâÁ∫øÁ®ãËé∑ÂèñËØ•SegmentÁöÑÈîÅÔºåÈÇ£ÂΩìÂâçÁ∫øÁ®ã‰ºö‰ª•Ëá™ÊóãÁöÑÊñπÂºèÂéªÁªßÁª≠ÁöÑË∞ÉÁî® tryLock() ÊñπÊ≥ïÂéªËé∑ÂèñÈîÅÔºåË∂ÖËøáÊåáÂÆöÊ¨°Êï∞Â∞±ÊåÇËµ∑ÔºåÁ≠âÂæÖÂî§ÈÜí„ÄÇ</p>
<h3 id="ËØ¥‰∏ÄËØ¥‰Ω†ÂØπLinkedHashMapÁöÑÁêÜËß£"><a href="#ËØ¥‰∏ÄËØ¥‰Ω†ÂØπLinkedHashMapÁöÑÁêÜËß£" class="headerlink" title="ËØ¥‰∏ÄËØ¥‰Ω†ÂØπLinkedHashMapÁöÑÁêÜËß£"></a>ËØ¥‰∏ÄËØ¥‰Ω†ÂØπLinkedHashMapÁöÑÁêÜËß£</h3><p>LinkedHashMap‰ΩøÁî®ÂèåÂêëÈìæË°®Êù•Áª¥Êä§key-valueÂØπÁöÑÈ°∫Â∫èÔºàÂÖ∂ÂÆûÂè™ÈúÄË¶ÅËÄÉËôëkeyÁöÑÈ°∫Â∫èÔºâÔºåËØ•ÈìæË°®Ë¥üË¥£Áª¥Êä§MapÁöÑËø≠‰ª£È°∫Â∫èÔºåËø≠‰ª£È°∫Â∫è‰∏ékey-valueÂØπÁöÑÊèíÂÖ•È°∫Â∫è‰øùÊåÅ‰∏ÄËá¥„ÄÇ</p>
<p>LinkedHashMapÂèØ‰ª•ÈÅøÂÖçÂØπHashMap„ÄÅHashtableÈáåÁöÑkey-valueÂØπËøõË°åÊéíÂ∫èÔºàÂè™Ë¶ÅÊèíÂÖ•key-valueÂØπÊó∂‰øùÊåÅÈ°∫Â∫èÂç≥ÂèØÔºâÔºåÂêåÊó∂ÂèàÂèØÈÅøÂÖç‰ΩøÁî®TreeMapÊâÄÂ¢ûÂä†ÁöÑÊàêÊú¨„ÄÇ</p>
<p>LinkedHashMapÈúÄË¶ÅÁª¥Êä§ÂÖÉÁ¥†ÁöÑÊèíÂÖ•È°∫Â∫èÔºåÂõ†Ê≠§ÊÄßËÉΩÁï•‰Ωé‰∫éHashMapÁöÑÊÄßËÉΩ„ÄÇ‰ΩÜÂõ†‰∏∫ÂÆÉ‰ª•ÈìæË°®Êù•Áª¥Êä§ÂÜÖÈÉ®È°∫Â∫èÔºåÊâÄ‰ª•Âú®Ëø≠‰ª£ËÆøÈóÆMapÈáåÁöÑÂÖ®ÈÉ®ÂÖÉÁ¥†Êó∂Â∞ÜÊúâËæÉÂ•ΩÁöÑÊÄßËÉΩ„ÄÇ</p>
<h3 id="ËØ∑‰ªãÁªçLinkedHashMapÁöÑÂ∫ïÂ±ÇÂéüÁêÜ"><a href="#ËØ∑‰ªãÁªçLinkedHashMapÁöÑÂ∫ïÂ±ÇÂéüÁêÜ" class="headerlink" title="ËØ∑‰ªãÁªçLinkedHashMapÁöÑÂ∫ïÂ±ÇÂéüÁêÜ"></a>ËØ∑‰ªãÁªçLinkedHashMapÁöÑÂ∫ïÂ±ÇÂéüÁêÜ</h3><p>**LinkedHashMapÁªßÊâø‰∫éHashMapÔºåÂÆÉÂú®HashMapÁöÑÂü∫Á°Ä‰∏äÔºåÈÄöËøáÁª¥Êä§‰∏ÄÊù°ÂèåÂêëÈìæË°®ÔºåËß£ÂÜ≥‰∫ÜHashMap‰∏çËÉΩÈöèÊó∂‰øùÊåÅÈÅçÂéÜÈ°∫Â∫èÂíåÊèíÂÖ•È°∫Â∫è‰∏ÄËá¥ÁöÑÈóÆÈ¢ò„ÄÇÂú®ÂÆûÁé∞‰∏äÔºåLinkedHashMapÂæàÂ§öÊñπÊ≥ïÁõ¥Êé•ÁªßÊâøËá™HashMapÔºå‰ªÖ‰∏∫Áª¥Êä§ÂèåÂêëÈìæË°®ÈáçÂÜô‰∫ÜÈÉ®ÂàÜÊñπÊ≥ï„ÄÇ</p>
<p>Â¶Ç‰∏ãÂõæÔºåÊ∑°ËìùËâ≤ÁöÑÁÆ≠Â§¥Ë°®Á§∫ÂâçÈ©±ÂºïÁî®ÔºåÁ∫¢Ëâ≤ÁÆ≠Â§¥Ë°®Á§∫ÂêéÁªßÂºïÁî®„ÄÇÊØèÂΩìÊúâÊñ∞ÁöÑÈîÆÂÄºÂØπËäÇÁÇπÊèíÂÖ•Êó∂ÔºåÊñ∞ËäÇÁÇπÊúÄÁªà‰ºöÊé•Âú®tailÂºïÁî®ÊåáÂêëÁöÑËäÇÁÇπÂêéÈù¢„ÄÇËÄåtailÂºïÁî®Âàô‰ºöÁßªÂä®Âà∞Êñ∞ÁöÑËäÇÁÇπ‰∏äÔºåËøôÊ†∑‰∏Ä‰∏™ÂèåÂêëÈìæË°®Â∞±Âª∫Á´ãËµ∑Êù•‰∫Ü„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaÂü∫Á°Ä(‰∫î)</title>
    <url>/p/3818800b.html</url>
    <content><![CDATA[<html><head></head><body><h3 id="ËØ∑‰ªãÁªçTreeMapÁöÑÂ∫ïÂ±ÇÂéüÁêÜ"><a href="#ËØ∑‰ªãÁªçTreeMapÁöÑÂ∫ïÂ±ÇÂéüÁêÜ" class="headerlink" title="ËØ∑‰ªãÁªçTreeMapÁöÑÂ∫ïÂ±ÇÂéüÁêÜ"></a>ËØ∑‰ªãÁªçTreeMapÁöÑÂ∫ïÂ±ÇÂéüÁêÜ</h3><p>TreeMapÂü∫‰∫éÁ∫¢ÈªëÊ†ëÔºàRed-Black treeÔºâÂÆûÁé∞„ÄÇÊò†Â∞ÑÊ†πÊçÆÂÖ∂ÈîÆÁöÑËá™ÁÑ∂È°∫Â∫èËøõË°åÊéíÂ∫èÔºåÊàñËÄÖÊ†πÊçÆÂàõÂª∫Êò†Â∞ÑÊó∂Êèê‰æõÁöÑ Comparator ËøõË°åÊéíÂ∫èÔºåÂÖ∑‰ΩìÂèñÂÜ≥‰∫é‰ΩøÁî®ÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇTreeMapÁöÑÂü∫Êú¨Êìç‰ΩúcontainsKey„ÄÅget„ÄÅput„ÄÅremoveÊñπÊ≥ïÔºåÂÆÉÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØlog(N)„ÄÇ</p>
<p>TreeMapÂåÖÂê´Âá†‰∏™ÈáçË¶ÅÁöÑÊàêÂëòÂèòÈáèÔºöroot„ÄÅsize„ÄÅcomparator„ÄÇÂÖ∂‰∏≠rootÊòØÁ∫¢ÈªëÊ†ëÁöÑÊ†πËäÇÁÇπ„ÄÇÂÆÉÊòØEntryÁ±ªÂûãÔºåEntryÊòØÁ∫¢ÈªëÊ†ëÁöÑËäÇÁÇπÔºåÂÆÉÂåÖÂê´‰∫ÜÁ∫¢ÈªëÊ†ëÁöÑ6‰∏™Âü∫Êú¨ÁªÑÊàêÔºökey„ÄÅvalue„ÄÅleft„ÄÅright„ÄÅparentÂíåcolor„ÄÇEntryËäÇÁÇπÊ†πÊçÆÊ†πÊçÆKeyÊéíÂ∫èÔºåÂåÖÂê´ÁöÑÂÜÖÂÆπÊòØvalue„ÄÇEntry‰∏≠keyÊØîËæÉÂ§ßÂ∞èÊòØÊ†πÊçÆÊØîËæÉÂô®comparatorÊù•ËøõË°åÂà§Êñ≠ÁöÑ„ÄÇsizeÊòØÁ∫¢ÈªëÊ†ëÁöÑËäÇÁÇπ‰∏™Êï∞„ÄÇ</p>
<h3 id="MapÂíåSetÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#MapÂíåSetÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="MapÂíåSetÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>MapÂíåSetÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h3><p>Set‰ª£Ë°®Êó†Â∫èÁöÑÔºåÂÖÉÁ¥†‰∏çÂèØÈáçÂ§çÁöÑÈõÜÂêàÔºõ</p>
<p>Map‰ª£Ë°®ÂÖ∑ÊúâÊò†Â∞ÑÂÖ≥Á≥ªÔºàkey-valueÔºâÁöÑÈõÜÂêàÔºåÂÖ∂ÊâÄÊúâÁöÑkeyÊòØ‰∏Ä‰∏™SetÈõÜÂêàÔºåÂç≥keyÊó†Â∫è‰∏î‰∏çËÉΩÈáçÂ§ç„ÄÇ</p>
<h3 id="ListÂíåSetÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#ListÂíåSetÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="ListÂíåSetÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>ListÂíåSetÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h3><p>Set‰ª£Ë°®Êó†Â∫èÁöÑÔºåÂÖÉÁ¥†‰∏çÂèØÈáçÂ§çÁöÑÈõÜÂêàÔºõ</p>
<p>List‰ª£Ë°®ÊúâÂ∫èÁöÑÔºåÂÖÉÁ¥†ÂèØ‰ª•ÈáçÂ§çÁöÑÈõÜÂêà„ÄÇ</p>
<h3 id="ArrayListÂíåLinkedListÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#ArrayListÂíåLinkedListÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="ArrayListÂíåLinkedListÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>ArrayListÂíåLinkedListÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h3><ol>
<li>ArrayListÁöÑÂÆûÁé∞ÊòØÂü∫‰∫éÊï∞ÁªÑÔºåLinkedListÁöÑÂÆûÁé∞ÊòØÂü∫‰∫éÂèåÂêëÈìæË°®Ôºõ</li>
<li>ÂØπ‰∫éÈöèÊú∫ËÆøÈóÆArrayListË¶Å‰ºò‰∫éLinkedListÔºåArrayListÂèØ‰ª•Ê†πÊçÆ‰∏ãÊ†á‰ª•O(1)Êó∂Èó¥Â§çÊùÇÂ∫¶ÂØπÂÖÉÁ¥†ËøõË°åÈöèÊú∫ËÆøÈóÆÔºåËÄåLinkedListÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†ÈÉΩ‰æùÈù†Âú∞ÂùÄÊåáÈíàÂíåÂÆÉÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ËøûÊé•Âú®‰∏ÄËµ∑ÔºåÊü•ÊâæÊüê‰∏™ÂÖÉÁ¥†ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØO(N)Ôºõ</li>
<li>ÂØπ‰∫éÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÔºåLinkedListË¶Å‰ºò‰∫éArrayListÔºåÂõ†‰∏∫ÂΩìÂÖÉÁ¥†Ë¢´Ê∑ªÂä†Âà∞LinkedList‰ªªÊÑè‰ΩçÁΩÆÁöÑÊó∂ÂÄôÔºå‰∏çÈúÄË¶ÅÂÉèArrayListÈÇ£Ê†∑ÈáçÊñ∞ËÆ°ÁÆóÂ§ßÂ∞èÊàñËÄÖÊòØÊõ¥Êñ∞Á¥¢ÂºïÔºõ</li>
<li>LinkedListÊØîArrayListÊõ¥Âç†ÂÜÖÂ≠òÔºåÂõ†‰∏∫LinkedListÁöÑËäÇÁÇπÈô§‰∫ÜÂ≠òÂÇ®Êï∞ÊçÆÔºåËøòÂ≠òÂÇ®‰∫Ü‰∏§‰∏™ÂºïÁî®Ôºå‰∏Ä‰∏™ÊåáÂêëÂâç‰∏Ä‰∏™ÂÖÉÁ¥†Ôºå‰∏Ä‰∏™ÊåáÂêëÂêé‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ</li>
</ol>
<h3 id="ÊúâÂì™‰∫õÁ∫øÁ®ãÂÆâÂÖ®ÁöÑListÔºü"><a href="#ÊúâÂì™‰∫õÁ∫øÁ®ãÂÆâÂÖ®ÁöÑListÔºü" class="headerlink" title="ÊúâÂì™‰∫õÁ∫øÁ®ãÂÆâÂÖ®ÁöÑListÔºü"></a>ÊúâÂì™‰∫õÁ∫øÁ®ãÂÆâÂÖ®ÁöÑListÔºü</h3><ol>
<li><p>Vector</p>
<p>VectorÊòØÊØîËæÉÂè§ËÄÅÁöÑAPIÔºåËôΩÁÑ∂‰øùËØÅ‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®Ôºå‰ΩÜÊòØÁî±‰∫éÊïàÁéá‰Ωé‰∏ÄËà¨‰∏çÂª∫ËÆÆ‰ΩøÁî®„ÄÇ</p>
</li>
<li><p>Collections.SynchronizedList</p>
<p>SynchronizedListÊòØCollectionsÁöÑÂÜÖÈÉ®Á±ªÔºåCollectionsÊèê‰æõ‰∫ÜsynchronizedListÊñπÊ≥ïÔºåÂèØ‰ª•Â∞Ü‰∏Ä‰∏™Á∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑListÂåÖË£ÖÊàêÁ∫øÁ®ãÂÆâÂÖ®ÁöÑListÔºåÂç≥SynchronizedList„ÄÇÂÆÉÊØîVectorÊúâÊõ¥Â•ΩÁöÑÊâ©Â±ïÊÄßÂíåÂÖºÂÆπÊÄßÔºå‰ΩÜÊòØÂÆÉÊâÄÊúâÁöÑÊñπÊ≥ïÈÉΩÂ∏¶ÊúâÂêåÊ≠•ÈîÅÔºå‰πü‰∏çÊòØÊÄßËÉΩÊúÄ‰ºòÁöÑList„ÄÇ</p>
</li>
<li><p>CopyOnWriteArrayList</p>
<p>CopyOnWriteArrayListÊòØJava 1.5Âú®java.util.concurrentÂåÖ‰∏ãÂ¢ûÂä†ÁöÑÁ±ªÔºåÂÆÉÈááÁî®Â§çÂà∂Â∫ïÂ±ÇÊï∞ÁªÑÁöÑÊñπÂºèÊù•ÂÆûÁé∞ÂÜôÊìç‰Ωú„ÄÇÂΩìÁ∫øÁ®ãÂØπÊ≠§Á±ªÈõÜÂêàÊâßË°åËØªÂèñÊìç‰ΩúÊó∂ÔºåÁ∫øÁ®ãÂ∞Ü‰ºöÁõ¥Êé•ËØªÂèñÈõÜÂêàÊú¨Ë∫´ÔºåÊó†È°ªÂä†ÈîÅ‰∏éÈòªÂ°û„ÄÇÂΩìÁ∫øÁ®ãÂØπÊ≠§Á±ªÈõÜÂêàÊâßË°åÂÜôÂÖ•Êìç‰ΩúÊó∂ÔºåÈõÜÂêà‰ºöÂú®Â∫ïÂ±ÇÂ§çÂà∂‰∏Ä‰ªΩÊñ∞ÁöÑÊï∞ÁªÑÔºåÊé•‰∏ãÊù•ÂØπÊñ∞ÁöÑÊï∞ÁªÑÊâßË°åÂÜôÂÖ•Êìç‰Ωú„ÄÇÁî±‰∫éÂØπÈõÜÂêàÁöÑÂÜôÂÖ•Êìç‰ΩúÈÉΩÊòØÂØπÊï∞ÁªÑÁöÑÂâØÊú¨ÊâßË°åÊìç‰ΩúÔºåÂõ†Ê≠§ÂÆÉÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇÂú®ÊâÄÊúâÁ∫øÁ®ãÂÆâÂÖ®ÁöÑList‰∏≠ÔºåÂÆÉÊòØÊÄßËÉΩÊúÄ‰ºòÁöÑÊñπÊ°à„ÄÇ</p>
</li>
</ol>
<h3 id="‰ªãÁªç‰∏Ä‰∏ãArrayListÁöÑÊï∞ÊçÆÁªìÊûÑÔºü"><a href="#‰ªãÁªç‰∏Ä‰∏ãArrayListÁöÑÊï∞ÊçÆÁªìÊûÑÔºü" class="headerlink" title="‰ªãÁªç‰∏Ä‰∏ãArrayListÁöÑÊï∞ÊçÆÁªìÊûÑÔºü"></a>‰ªãÁªç‰∏Ä‰∏ãArrayListÁöÑÊï∞ÊçÆÁªìÊûÑÔºü</h3><p>ArrayListÁöÑÂ∫ïÂ±ÇÊòØÁî®Êï∞ÁªÑÊù•ÂÆûÁé∞ÁöÑÔºåÈªòËÆ§Á¨¨‰∏ÄÊ¨°ÊèíÂÖ•ÂÖÉÁ¥†Êó∂ÂàõÂª∫Â§ßÂ∞è‰∏∫10ÁöÑÊï∞ÁªÑÔºåË∂ÖÂá∫ÈôêÂà∂Êó∂‰ºöÂ¢ûÂä†50%ÁöÑÂÆπÈáèÔºåÂπ∂‰∏îÊï∞ÊçÆ‰ª• System.arraycopy() Â§çÂà∂Âà∞Êñ∞ÁöÑÊï∞ÁªÑÔºåÂõ†Ê≠§ÊúÄÂ•ΩËÉΩÁªôÂá∫Êï∞ÁªÑÂ§ßÂ∞èÁöÑÈ¢Ñ‰º∞ÂÄº„ÄÇ</p>
<p>ÊåâÊï∞ÁªÑ‰∏ãÊ†áËÆøÈóÆÂÖÉÁ¥†ÁöÑÊÄßËÉΩÂæàÈ´òÔºåËøôÊòØÊï∞ÁªÑÁöÑÂü∫Êú¨‰ºòÂäø„ÄÇÁõ¥Êé•Âú®Êï∞ÁªÑÊú´Â∞æÂä†ÂÖ•ÂÖÉÁ¥†ÁöÑÊÄßËÉΩ‰πüÈ´òÔºå‰ΩÜÂ¶ÇÊûúÊåâ‰∏ãÊ†áÊèíÂÖ•„ÄÅÂà†Èô§ÂÖÉÁ¥†ÔºåÂàôË¶ÅÁî® System.arraycopy() Êù•ÁßªÂä®ÈÉ®ÂàÜÂèóÂΩ±ÂìçÁöÑÂÖÉÁ¥†ÔºåÊÄßËÉΩÂ∞±ÂèòÂ∑Æ‰∫ÜÔºåËøôÊòØÂü∫Êú¨Âä£Âäø„ÄÇ</p>
<h3 id="Ë∞àË∞àCopyOnWriteArrayListÁöÑÂéüÁêÜ"><a href="#Ë∞àË∞àCopyOnWriteArrayListÁöÑÂéüÁêÜ" class="headerlink" title="Ë∞àË∞àCopyOnWriteArrayListÁöÑÂéüÁêÜ"></a>Ë∞àË∞àCopyOnWriteArrayListÁöÑÂéüÁêÜ</h3><p>CopyOnWriteArrayListÊòØJavaÂπ∂ÂèëÂåÖÈáåÊèê‰æõÁöÑÂπ∂ÂèëÁ±ªÔºåÁÆÄÂçïÊù•ËØ¥ÂÆÉÂ∞±ÊòØ‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®‰∏îËØªÊìç‰ΩúÊó†ÈîÅÁöÑArrayList„ÄÇÊ≠£Â¶ÇÂÖ∂ÂêçÂ≠ó‰∏ÄÊ†∑ÔºåÂú®ÂÜôÊìç‰ΩúÊó∂‰ºöÂ§çÂà∂‰∏Ä‰ªΩÊñ∞ÁöÑListÔºåÂú®Êñ∞ÁöÑList‰∏äÂÆåÊàêÂÜôÊìç‰ΩúÔºåÁÑ∂ÂêéÂÜçÂ∞ÜÂéüÂºïÁî®ÊåáÂêëÊñ∞ÁöÑList„ÄÇËøôÊ†∑Â∞±‰øùËØÅ‰∫ÜÂÜôÊìç‰ΩúÁöÑÁ∫øÁ®ãÂÆâÂÖ®„ÄÇ</p>
<p>CopyOnWriteArrayListÂÖÅËÆ∏Á∫øÁ®ãÂπ∂ÂèëËÆøÈóÆËØªÊìç‰ΩúÔºåËøô‰∏™Êó∂ÂÄôÊòØÊ≤°ÊúâÂä†ÈîÅÈôêÂà∂ÁöÑÔºåÊÄßËÉΩËæÉÈ´ò„ÄÇËÄåÂÜôÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂàôÈ¶ñÂÖàÂ∞ÜÂÆπÂô®Â§çÂà∂‰∏Ä‰ªΩÔºåÁÑ∂ÂêéÂú®Êñ∞ÁöÑÂâØÊú¨‰∏äÊâßË°åÂÜôÊìç‰ΩúÔºåËøô‰∏™Êó∂ÂÄôÂÜôÊìç‰ΩúÊòØ‰∏äÈîÅÁöÑ„ÄÇÁªìÊùü‰πãÂêéÂÜçÂ∞ÜÂéüÂÆπÂô®ÁöÑÂºïÁî®ÊåáÂêëÊñ∞ÂÆπÂô®„ÄÇÊ≥®ÊÑèÔºåÂú®‰∏äÈîÅÊâßË°åÂÜôÊìç‰ΩúÁöÑËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûúÊúâÈúÄË¶ÅËØªÊìç‰ΩúÔºå‰ºö‰ΩúÁî®Âú®ÂéüÂÆπÂô®‰∏ä„ÄÇÂõ†Ê≠§‰∏äÈîÅÁöÑÂÜôÊìç‰Ωú‰∏ç‰ºöÂΩ±ÂìçÂà∞Âπ∂ÂèëËÆøÈóÆÁöÑËØªÊìç‰Ωú„ÄÇ</p>
<ul>
<li>‰ºòÁÇπÔºöËØªÊìç‰ΩúÊÄßËÉΩÂæàÈ´òÔºåÂõ†‰∏∫Êó†ÈúÄ‰ªª‰ΩïÂêåÊ≠•Êé™ÊñΩÔºåÊØîËæÉÈÄÇÁî®‰∫éËØªÂ§öÂÜôÂ∞ëÁöÑÂπ∂ÂèëÂú∫ÊôØ„ÄÇÂú®ÈÅçÂéÜ‰º†ÁªüÁöÑListÊó∂ÔºåËã•‰∏≠ÈÄîÊúâÂà´ÁöÑÁ∫øÁ®ãÂØπÂÖ∂ËøõË°å‰øÆÊîπÔºåÂàô‰ºöÊäõÂá∫ConcurrentModificationExceptionÂºÇÂ∏∏„ÄÇËÄåCopyOnWriteArrayListÁî±‰∫éÂÖ∂‚ÄùËØªÂÜôÂàÜÁ¶ª‚ÄùÁöÑÊÄùÊÉ≥ÔºåÈÅçÂéÜÂíå‰øÆÊîπÊìç‰ΩúÂàÜÂà´‰ΩúÁî®Âú®‰∏çÂêåÁöÑListÂÆπÂô®ÔºåÊâÄ‰ª•Âú®‰ΩøÁî®Ëø≠‰ª£Âô®ËøõË°åÈÅçÂéÜÊó∂ÂÄôÔºå‰πüÂ∞±‰∏ç‰ºöÊäõÂá∫ConcurrentModificationExceptionÂºÇÂ∏∏‰∫Ü„ÄÇ</li>
<li>Áº∫ÁÇπÔºö‰∏ÄÊòØÂÜÖÂ≠òÂç†Áî®ÈóÆÈ¢òÔºåÊØïÁ´üÊØèÊ¨°ÊâßË°åÂÜôÊìç‰ΩúÈÉΩË¶ÅÂ∞ÜÂéüÂÆπÂô®Êã∑Ë¥ù‰∏Ä‰ªΩÔºåÊï∞ÊçÆÈáèÂ§ßÊó∂ÔºåÂØπÂÜÖÂ≠òÂéãÂäõËæÉÂ§ßÔºåÂèØËÉΩ‰ºöÂºïËµ∑È¢ëÁπÅGC„ÄÇ‰∫åÊòØÊó†Ê≥ï‰øùËØÅÂÆûÊó∂ÊÄßÔºåVectorÂØπ‰∫éËØªÂÜôÊìç‰ΩúÂùáÂä†ÈîÅÂêåÊ≠•ÔºåÂèØ‰ª•‰øùËØÅËØªÂíåÂÜôÁöÑÂº∫‰∏ÄËá¥ÊÄß„ÄÇËÄåCopyOnWriteArrayListÁî±‰∫éÂÖ∂ÂÆûÁé∞Á≠ñÁï•ÁöÑÂéüÂõ†ÔºåÂÜôÂíåËØªÂàÜÂà´‰ΩúÁî®Âú®Êñ∞ËÄÅ‰∏çÂêåÂÆπÂô®‰∏äÔºåÂú®ÂÜôÊìç‰ΩúÊâßË°åËøáÁ®ã‰∏≠ÔºåËØª‰∏ç‰ºöÈòªÂ°û‰ΩÜËØªÂèñÂà∞ÁöÑÂç¥ÊòØËÄÅÂÆπÂô®ÁöÑÊï∞ÊçÆ„ÄÇ</li>
</ul>
<h3 id="ËØ¥‰∏ÄËØ¥TreeSetÂíåHashSetÁöÑÂå∫Âà´"><a href="#ËØ¥‰∏ÄËØ¥TreeSetÂíåHashSetÁöÑÂå∫Âà´" class="headerlink" title="ËØ¥‰∏ÄËØ¥TreeSetÂíåHashSetÁöÑÂå∫Âà´"></a>ËØ¥‰∏ÄËØ¥TreeSetÂíåHashSetÁöÑÂå∫Âà´</h3><p>HashSet„ÄÅTreeSet‰∏≠ÁöÑÂÖÉÁ¥†ÈÉΩÊòØ‰∏çËÉΩÈáçÂ§çÁöÑÔºåÂπ∂‰∏îÂÆÉ‰ª¨ÈÉΩÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÔºå‰∫åËÄÖÁöÑÂå∫Âà´ÊòØÔºö</p>
<ol>
<li>HashSet‰∏≠ÁöÑÂÖÉÁ¥†ÂèØ‰ª•ÊòØnullÔºå‰ΩÜTreeSet‰∏≠ÁöÑÂÖÉÁ¥†‰∏çËÉΩÊòØnullÔºõ</li>
<li>HashSet‰∏çËÉΩ‰øùËØÅÂÖÉÁ¥†ÁöÑÊéíÂàóÈ°∫Â∫èÔºåËÄåTreeSetÊîØÊåÅËá™ÁÑ∂ÊéíÂ∫è„ÄÅÂÆöÂà∂ÊéíÂ∫è‰∏§ÁßçÊéíÂ∫èÁöÑÊñπÂºèÔºõ</li>
<li>HashSetÂ∫ïÂ±ÇÊòØÈááÁî®ÂìàÂ∏åË°®ÂÆûÁé∞ÁöÑÔºåËÄåTreeSetÂ∫ïÂ±ÇÊòØÈááÁî®Á∫¢ÈªëÊ†ëÂÆûÁé∞ÁöÑ„ÄÇ</li>
</ol>
<h3 id="ËØ¥‰∏ÄËØ¥HashSetÁöÑÂ∫ïÂ±ÇÁªìÊûÑ"><a href="#ËØ¥‰∏ÄËØ¥HashSetÁöÑÂ∫ïÂ±ÇÁªìÊûÑ" class="headerlink" title="ËØ¥‰∏ÄËØ¥HashSetÁöÑÂ∫ïÂ±ÇÁªìÊûÑ"></a>ËØ¥‰∏ÄËØ¥HashSetÁöÑÂ∫ïÂ±ÇÁªìÊûÑ</h3><p>HashSetÊòØÂü∫‰∫éHashMapÂÆûÁé∞ÁöÑÔºåÈªòËÆ§ÊûÑÈÄ†ÂáΩÊï∞ÊòØÊûÑÂª∫‰∏Ä‰∏™ÂàùÂßãÂÆπÈáè‰∏∫16ÔºåË¥üËΩΩÂõ†Â≠ê‰∏∫0.75 ÁöÑHashMap„ÄÇÂÆÉÂ∞ÅË£Ö‰∫Ü‰∏Ä‰∏™ HashMap ÂØπË±°Êù•Â≠òÂÇ®ÊâÄÊúâÁöÑÈõÜÂêàÂÖÉÁ¥†ÔºåÊâÄÊúâÊîæÂÖ• HashSet ‰∏≠ÁöÑÈõÜÂêàÂÖÉÁ¥†ÂÆûÈôÖ‰∏äÁî± HashMap ÁöÑ key Êù•‰øùÂ≠òÔºåËÄå HashMap ÁöÑ value ÂàôÂ≠òÂÇ®‰∫Ü‰∏Ä‰∏™ PRESENTÔºåÂÆÉÊòØ‰∏Ä‰∏™ÈùôÊÄÅÁöÑ Object ÂØπË±°„ÄÇ</p>
<h3 id="BlockingQueue‰∏≠ÊúâÂì™‰∫õÊñπÊ≥ïÔºå‰∏∫‰ªÄ‰πàËøôÊ†∑ËÆæËÆ°Ôºü"><a href="#BlockingQueue‰∏≠ÊúâÂì™‰∫õÊñπÊ≥ïÔºå‰∏∫‰ªÄ‰πàËøôÊ†∑ËÆæËÆ°Ôºü" class="headerlink" title="BlockingQueue‰∏≠ÊúâÂì™‰∫õÊñπÊ≥ïÔºå‰∏∫‰ªÄ‰πàËøôÊ†∑ËÆæËÆ°Ôºü"></a>BlockingQueue‰∏≠ÊúâÂì™‰∫õÊñπÊ≥ïÔºå‰∏∫‰ªÄ‰πàËøôÊ†∑ËÆæËÆ°Ôºü</h3><p>‰∏∫‰∫ÜÂ∫îÂØπ‰∏çÂêåÁöÑ‰∏öÂä°Âú∫ÊôØÔºåBlockingQueue Êèê‰æõ‰∫Ü4 ÁªÑ‰∏çÂêåÁöÑÊñπÊ≥ïÁî®‰∫éÊèíÂÖ•„ÄÅÁßªÈô§‰ª•ÂèäÂØπÈòüÂàó‰∏≠ÁöÑÂÖÉÁ¥†ËøõË°åÊ£ÄÊü•„ÄÇÂ¶ÇÊûúËØ∑Ê±ÇÁöÑÊìç‰Ωú‰∏çËÉΩÂæóÂà∞Á´ãÂç≥ÊâßË°åÁöÑËØùÔºåÊØèÁªÑÊñπÊ≥ïÁöÑË°®Áé∞ÊòØ‰∏çÂêåÁöÑ„ÄÇËøô‰∫õÊñπÊ≥ïÂ¶Ç‰∏ãÔºö</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">ÊäõÂºÇÂ∏∏</th>
<th align="left">ÁâπÂÆöÂÄº</th>
<th align="left">ÈòªÂ°û</th>
<th align="left">Ë∂ÖÊó∂</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ÊèíÂÖ•</td>
<td align="left">add(e)</td>
<td align="left">offer(e)</td>
<td align="left">put(e)</td>
<td align="left">offer(e, time, unit)</td>
</tr>
<tr>
<td align="left">ÁßªÈô§</td>
<td align="left">remove()</td>
<td align="left">poll()</td>
<td align="left">take()</td>
<td align="left">poll(time, unit)</td>
</tr>
<tr>
<td align="left">Ê£ÄÊü•</td>
<td align="left">element()</td>
<td align="left">peek()</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>ÂõõÁªÑ‰∏çÂêåÁöÑË°å‰∏∫ÊñπÂºèÂê´‰πâÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>ÊäõÂºÇÂ∏∏ÔºöÂ¶ÇÊûúÊìç‰ΩúÊó†Ê≥ïÁ´ãÂç≥ÊâßË°åÔºåÂàôÊäõ‰∏Ä‰∏™ÂºÇÂ∏∏Ôºõ</li>
<li>ÁâπÂÆöÂÄºÔºöÂ¶ÇÊûúÊìç‰ΩúÊó†Ê≥ïÁ´ãÂç≥ÊâßË°åÔºåÂàôËøîÂõû‰∏Ä‰∏™ÁâπÂÆöÁöÑÂÄº(‰∏ÄËà¨ÊòØ true / false)„ÄÇ</li>
<li>ÈòªÂ°ûÔºöÂ¶ÇÊûúÊìç‰ΩúÊó†Ê≥ïÁ´ãÂç≥ÊâßË°åÔºåÂàôËØ•ÊñπÊ≥ïË∞ÉÁî®Â∞Ü‰ºöÂèëÁîüÈòªÂ°ûÔºåÁõ¥Âà∞ËÉΩÂ§üÊâßË°åÔºõ</li>
<li>Ë∂ÖÊó∂ÔºöÂ¶ÇÊûúÊìç‰ΩúÊó†Ê≥ïÁ´ãÂç≥ÊâßË°åÔºåÂàôËØ•ÊñπÊ≥ïË∞ÉÁî®Â∞Ü‰ºöÂèëÁîüÈòªÂ°ûÔºåÁõ¥Âà∞ËÉΩÂ§üÊâßË°å„ÄÇ‰ΩÜÁ≠âÂæÖÊó∂Èó¥‰∏ç‰ºöË∂ÖËøáÁªôÂÆöÂÄºÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™ÁâπÂÆöÂÄº‰ª•ÂëäÁü•ËØ•Êìç‰ΩúÊòØÂê¶ÊàêÂäü(ÂÖ∏ÂûãÁöÑÊòØtrue / false)„ÄÇ</li>
</ul>
<h3 id="BlockingQueueÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü"><a href="#BlockingQueueÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü" class="headerlink" title="BlockingQueueÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü"></a>BlockingQueueÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü</h3><p>BlockingQueueÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂÆÉÁöÑÂÆûÁé∞Á±ªÊúâArrayBlockingQueue„ÄÅDelayQueue„ÄÅ LinkedBlockingQueue„ÄÅPriorityBlockingQueue„ÄÅSynchronousQueueÁ≠â„ÄÇÂÆÉ‰ª¨ÁöÑÂå∫Âà´‰∏ªË¶Å‰ΩìÁé∞Âú®Â≠òÂÇ®ÁªìÊûÑ‰∏äÊàñÂØπÂÖÉÁ¥†Êìç‰Ωú‰∏äÁöÑ‰∏çÂêåÔºå‰ΩÜÊòØÂØπ‰∫éput‰∏étakeÊìç‰ΩúÁöÑÂéüÁêÜÊòØÁ±ª‰ººÁöÑ„ÄÇ‰∏ãÈù¢‰ª•ArrayBlockingQueue‰∏∫‰æãÔºåÊù•ËØ¥ÊòéBlockingQueueÁöÑÂÆûÁé∞ÂéüÁêÜ„ÄÇ</p>
<p>È¶ñÂÖàÁúã‰∏Ä‰∏ãArrayBlockingQueueÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºåÂÆÉÂàùÂßãÂåñ‰∫ÜputÂíåtakeÂáΩÊï∞‰∏≠Áî®Âà∞ÁöÑÂÖ≥ÈîÆÊàêÂëòÂèòÈáèÔºåËøô‰∏§‰∏™ÂèòÈáèÁöÑÁ±ªÂûãÂàÜÂà´ÊòØReentrantLockÂíåCondition„ÄÇReentrantLockÊòØAbstractQueuedSynchronizerÔºàAQSÔºâÁöÑÂ≠êÁ±ªÔºåÂÆÉÁöÑnewConditionÂáΩÊï∞ËøîÂõûÁöÑConditionÂÆû‰æãÔºåÊòØÂÆö‰πâÂú®AQSÁ±ªÂÜÖÈÉ®ÁöÑConditionObjectÁ±ªÔºåËØ•Á±ªÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî®AQSÁõ∏ÂÖ≥ÁöÑÂáΩÊï∞„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayBlockingQueue</span><span class="params">(<span class="type">int</span> capacity, <span class="type">boolean</span> fair)</span> {     </span><br><span class="line">    <span class="keyword">if</span> (capacity &lt;= <span class="number">0</span>)       </span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();   </span><br><span class="line">    <span class="built_in">this</span>.items = <span class="keyword">new</span> <span class="title class_">Object</span>[capacity]; </span><br><span class="line">    lock = <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>(fair); </span><br><span class="line">    notEmpty = lock.newCondition();  </span><br><span class="line">    notFull = lock.newCondition();  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>putÂáΩÊï∞‰ºöÂú®ÈòüÂàóÊú´Â∞æÊ∑ªÂä†ÂÖÉÁ¥†ÔºåÂ¶ÇÊûúÈòüÂàóÂ∑≤ÁªèÊª°‰∫ÜÔºåÊó†Ê≥ïÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑËØùÔºåÂ∞±‰∏ÄÁõ¥ÈòªÂ°ûÁ≠âÂæÖÂà∞ÂèØ‰ª•Âä†ÂÖ•‰∏∫Ê≠¢„ÄÇÂáΩÊï∞ÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÊâÄÁ§∫„ÄÇÊàë‰ª¨‰ºöÂèëÁé∞putÂáΩÊï∞‰ΩøÁî®‰∫Üwait/notifyÁöÑÊú∫Âà∂„ÄÇ‰∏é‰∏ÄËà¨Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÁöÑÂÆûÁé∞ÊñπÂºè‰∏çÂêåÔºåÂêåÊ≠•ÈòüÂàó‰ΩøÁî®ReentrantLockÂíåConditionÁõ∏ÁªìÂêàÁöÑÊú∫Âà∂ÔºåÂç≥ÂÖàËé∑ÂæóÈîÅÔºåÂÜçÁ≠âÂæÖÔºåËÄå‰∏çÊòØsynchronizedÂíåwaitÁöÑÊú∫Âà∂„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(E e)</span> <span class="keyword">throws</span> InterruptedException {  </span><br><span class="line">    checkNotNull(e);     </span><br><span class="line">    <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="built_in">this</span>.lock;  </span><br><span class="line">    lock.lockInterruptibly();    </span><br><span class="line">    <span class="keyword">try</span> {        </span><br><span class="line">        <span class="keyword">while</span> (count == items.length)     </span><br><span class="line">            notFull.await();   </span><br><span class="line">        enqueue(e);    </span><br><span class="line">    } <span class="keyword">finally</span> {  </span><br><span class="line">        lock.unlock(); </span><br><span class="line">    }  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÜçÊù•Áúã‰∏Ä‰∏ãÊ∂àË¥πËÄÖË∞ÉÁî®ÁöÑtakeÂáΩÊï∞ÔºåtakeÂáΩÊï∞Âú®ÈòüÂàó‰∏∫Á©∫Êó∂‰ºöË¢´ÈòªÂ°ûÔºå‰∏ÄÁõ¥Âà∞ÈòªÂ°ûÈòüÂàóÂä†ÂÖ•‰∫ÜÊñ∞ÁöÑÂÖÉÁ¥†„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">take</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException {  </span><br><span class="line">    <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="built_in">this</span>.lock;      </span><br><span class="line">    lock.lockInterruptibly();   </span><br><span class="line">    <span class="keyword">try</span> {       </span><br><span class="line">        <span class="keyword">while</span> (count == <span class="number">0</span>)      </span><br><span class="line">            notEmpty.await(); </span><br><span class="line">        <span class="keyword">return</span> dequeue();  </span><br><span class="line">    } <span class="keyword">finally</span> {    </span><br><span class="line">        lock.unlock();  </span><br><span class="line">    } </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>awaitÊìç‰ΩúÔºö</p>
<p>Êàë‰ª¨ÂèëÁé∞ArrayBlockingQueueÂπ∂Ê≤°Êúâ‰ΩøÁî®Object.waitÔºåËÄåÊòØ‰ΩøÁî®ÁöÑCondition.awaitÔºåËøôÊòØ‰∏∫‰ªÄ‰πàÂë¢ÔºüConditionÂØπË±°ÂèØ‰ª•Êèê‰æõÂíåObjectÁöÑwaitÂíånotify‰∏ÄÊ†∑ÁöÑË°å‰∏∫Ôºå‰ΩÜÊòØÂêéËÄÖÂøÖÈ°ªÂÖàËé∑ÂèñsynchronizedËøô‰∏™ÂÜÖÁΩÆÁöÑmonitorÈîÅÊâçËÉΩË∞ÉÁî®ÔºåËÄåConditionÂàôÂøÖÈ°ªÂÖàËé∑ÂèñReentrantLock„ÄÇËøô‰∏§ÁßçÊñπÂºèÂú®ÈòªÂ°ûÁ≠âÂæÖÊó∂ÈÉΩ‰ºöÂ∞ÜÁõ∏Â∫îÁöÑÈîÅÈáäÊîæÊéâÔºå‰ΩÜÊòØConditionÁöÑÁ≠âÂæÖÂèØ‰ª•‰∏≠Êñ≠ÔºåËøôÊòØ‰∫åËÄÖÂîØ‰∏ÄÁöÑÂå∫Âà´„ÄÇ</p>
<p>Êàë‰ª¨ÂÖàÊù•Áúã‰∏Ä‰∏ãConditionÁöÑawaitÂáΩÊï∞ÔºåawaitÂáΩÊï∞ÁöÑÊµÅÁ®ãÂ§ßËá¥Â¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇawaitÂáΩÊï∞‰∏ªË¶ÅÊúâ‰∏â‰∏™Ê≠•È™§Ôºå‰∏ÄÊòØË∞ÉÁî®addConditionWaiterÂáΩÊï∞ÔºåÂú®condition wait queueÈòüÂàó‰∏≠Ê∑ªÂä†‰∏Ä‰∏™ËäÇÁÇπÔºå‰ª£Ë°®ÂΩìÂâçÁ∫øÁ®ãÂú®Á≠âÂæÖ‰∏Ä‰∏™Ê∂àÊÅØ„ÄÇÁÑ∂ÂêéË∞ÉÁî®fullyReleaseÂáΩÊï∞ÔºåÂ∞ÜÊåÅÊúâÁöÑÈîÅÈáäÊîæÊéâÔºåË∞ÉÁî®ÁöÑÊòØAQSÁöÑÂáΩÊï∞„ÄÇÊúÄÂêé‰∏ÄÁõ¥Ë∞ÉÁî®isOnSyncQueueÂáΩÊï∞Âà§Êñ≠ËäÇÁÇπÊòØÂê¶Ë¢´ËΩ¨ÁßªÂà∞sync queueÈòüÂàó‰∏äÔºå‰πüÂ∞±ÊòØAQS‰∏≠Á≠âÂæÖËé∑ÂèñÈîÅÁöÑÈòüÂàó„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÔºåÂàôËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÔºåÂ¶ÇÊûúÂ∑≤ÁªèÂú®ÈòüÂàó‰∏äÔºåÂàôË∞ÉÁî®acquireQueuedÂáΩÊï∞ÈáçÊñ∞Ëé∑ÂèñÈîÅ„ÄÇ</p>
<p><img src="/p/3818800b/37DE256DECC211F4D5230BF7A654E128.png" alt="img"></p>
<p>signalÊìç‰ΩúÔºö</p>
<p>signalÂáΩÊï∞Â∞Ücondition wait queueÈòüÂàó‰∏≠ÈòüÈ¶ñÁöÑÁ∫øÁ®ãËäÇÁÇπËΩ¨ÁßªÁ≠âÂæÖËé∑ÂèñÈîÅÁöÑsync queueÈòüÂàó‰∏≠„ÄÇËøôÊ†∑ÁöÑËØùÔºåawaitÂáΩÊï∞‰∏≠Ë∞ÉÁî®isOnSyncQueueÂáΩÊï∞Â∞±‰ºöËøîÂõûtrueÔºåÂØºËá¥awaitÂáΩÊï∞ËøõÂÖ•ÊúÄÂêé‰∏ÄÊ≠•ÈáçÊñ∞Ëé∑ÂèñÈîÅÁöÑÁä∂ÊÄÅ„ÄÇ</p>
<p>Êàë‰ª¨ËøôÈáåÊù•ËØ¶ÁªÜËß£Êûê‰∏Ä‰∏ãcondition wait queueÂíåsync queue‰∏§‰∏™ÈòüÂàóÁöÑËÆæËÆ°ÂéüÁêÜ„ÄÇcondition wait queueÊòØÁ≠âÂæÖÊ∂àÊÅØÁöÑÈòüÂàóÔºåÂõ†‰∏∫ÈòªÂ°ûÈòüÂàó‰∏∫Á©∫ËÄåËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÁöÑtakeÂáΩÊï∞Êìç‰ΩúÂ∞±ÊòØÂú®Á≠âÂæÖÈòªÂ°ûÈòüÂàó‰∏ç‰∏∫Á©∫ÁöÑÊ∂àÊÅØ„ÄÇËÄåsync queueÈòüÂàóÂàôÊòØÁ≠âÂæÖËé∑ÂèñÈîÅÁöÑÈòüÂàóÔºåtakeÂáΩÊï∞Ëé∑Âæó‰∫ÜÊ∂àÊÅØÔºåÂ∞±ÂèØ‰ª•ËøêË°å‰∫ÜÔºå‰ΩÜÊòØÂÆÉËøòÂøÖÈ°ªÁ≠âÂæÖËé∑ÂèñÈîÅ‰πãÂêéÊâçËÉΩÁúüÊ≠£ËøõË°åËøêË°åÁä∂ÊÄÅ„ÄÇ</p>
<p>signalÂáΩÊï∞ÂÖ∂ÂÆûÂ∞±ÂÅö‰∫Ü‰∏Ä‰ª∂‰∫ãÊÉÖÔºåÂ∞±ÊòØ‰∏çÊñ≠Â∞ùËØïË∞ÉÁî®transferForSignalÂáΩÊï∞ÔºåÂ∞Ücondition wait queueÈòüÈ¶ñÁöÑ‰∏Ä‰∏™ËäÇÁÇπËΩ¨ÁßªÂà∞sync queueÈòüÂàó‰∏≠ÔºåÁõ¥Âà∞ËΩ¨ÁßªÊàêÂäü„ÄÇÂõ†‰∏∫‰∏ÄÊ¨°ËΩ¨ÁßªÊàêÂäüÔºåÂ∞±‰ª£Ë°®Ëøô‰∏™Ê∂àÊÅØË¢´ÊàêÂäüÈÄöÁü•Âà∞‰∫ÜÁ≠âÂæÖÊ∂àÊÅØÁöÑËäÇÁÇπ„ÄÇ</p>
<p>signalÂáΩÊï∞ÁöÑÁ§∫ÊÑèÂõæÂ¶Ç‰∏ãÊâÄÁ§∫„ÄÇ</p>
<p><img src="/p/3818800b/61A52D5795794D763D6F8D37D13AFE07.png" alt="img"></p>
<h3 id="StreamÔºà‰∏çÊòØIOStreamÔºâÊúâÂì™‰∫õÊñπÊ≥ïÔºü"><a href="#StreamÔºà‰∏çÊòØIOStreamÔºâÊúâÂì™‰∫õÊñπÊ≥ïÔºü" class="headerlink" title="StreamÔºà‰∏çÊòØIOStreamÔºâÊúâÂì™‰∫õÊñπÊ≥ïÔºü"></a>StreamÔºà‰∏çÊòØIOStreamÔºâÊúâÂì™‰∫õÊñπÊ≥ïÔºü</h3><p>StreamÊèê‰æõ‰∫ÜÂ§ßÈáèÁöÑÊñπÊ≥ïËøõË°åËÅöÈõÜÊìç‰ΩúÔºåËøô‰∫õÊñπÊ≥ïÊó¢ÂèØ‰ª•ÊòØ‚Äú‰∏≠Èó¥ÁöÑ‚ÄùÔºå‰πüÂèØ‰ª•ÊòØ‚ÄúÊú´Á´ØÁöÑ‚Äù„ÄÇ</p>
<ul>
<li>‰∏≠Èó¥ÊñπÊ≥ïÔºö‰∏≠Èó¥Êìç‰ΩúÂÖÅËÆ∏ÊµÅ‰øùÊåÅÊâìÂºÄÁä∂ÊÄÅÔºåÂπ∂ÂÖÅËÆ∏Áõ¥Êé•Ë∞ÉÁî®ÂêéÁª≠ÊñπÊ≥ï„ÄÇ‰∏äÈù¢Á®ãÂ∫è‰∏≠ÁöÑmap()ÊñπÊ≥ïÂ∞±ÊòØ‰∏≠Èó¥ÊñπÊ≥ï„ÄÇ‰∏≠Èó¥ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÊòØÂè¶Â§ñ‰∏Ä‰∏™ÊµÅ„ÄÇ</li>
<li>Êú´Á´ØÊñπÊ≥ïÔºöÊú´Á´ØÊñπÊ≥ïÊòØÂØπÊµÅÁöÑÊúÄÁªàÊìç‰Ωú„ÄÇÂΩìÂØπÊüê‰∏™StreamÊâßË°åÊú´Á´ØÊñπÊ≥ïÂêéÔºåËØ•ÊµÅÂ∞Ü‰ºöË¢´‚ÄúÊ∂àËÄó‚Äù‰∏î‰∏çÂÜçÂèØÁî®„ÄÇ‰∏äÈù¢Á®ãÂ∫è‰∏≠ÁöÑsum()„ÄÅcount()„ÄÅaverage()Á≠âÊñπÊ≥ïÈÉΩÊòØÊú´Á´ØÊñπÊ≥ï„ÄÇ</li>
</ul>
<p>Èô§Ê≠§‰πãÂ§ñÔºåÂÖ≥‰∫éÊµÅÁöÑÊñπÊ≥ïËøòÊúâÂ¶Ç‰∏ã‰∏§‰∏™ÁâπÂæÅÔºö</p>
<ul>
<li>ÊúâÁä∂ÊÄÅÁöÑÊñπÊ≥ïÔºöËøôÁßçÊñπÊ≥ï‰ºöÁªôÊµÅÂ¢ûÂä†‰∏Ä‰∫õÊñ∞ÁöÑÂ±ûÊÄßÔºåÊØîÂ¶ÇÂÖÉÁ¥†ÁöÑÂîØ‰∏ÄÊÄß„ÄÅÂÖÉÁ¥†ÁöÑÊúÄÂ§ßÊï∞Èáè„ÄÅ‰øùËØÅÂÖÉÁ¥†‰ª•ÊéíÂ∫èÁöÑÊñπÂºèË¢´Â§ÑÁêÜÁ≠â„ÄÇÊúâÁä∂ÊÄÅÁöÑÊñπÊ≥ïÂæÄÂæÄÈúÄË¶ÅÊõ¥Â§ßÁöÑÊÄßËÉΩÂºÄÈîÄ„ÄÇ</li>
<li>Áü≠Ë∑ØÊñπÊ≥ïÔºöÁü≠Ë∑ØÊñπÊ≥ïÂèØ‰ª•Â∞ΩÊó©ÁªìÊùüÂØπÊµÅÁöÑÊìç‰ΩúÔºå‰∏çÂøÖÊ£ÄÊü•ÊâÄÊúâÁöÑÂÖÉÁ¥†„ÄÇ</li>
</ul>
<p>‰∏ãÈù¢ÁÆÄÂçï‰ªãÁªç‰∏Ä‰∏ãStreamÂ∏∏Áî®ÁöÑ‰∏≠Èó¥ÊñπÊ≥ïÔºö</p>
<ul>
<li>filter(Predicate predicate)ÔºöËøáÊª§Stream‰∏≠ÊâÄÊúâ‰∏çÁ¨¶ÂêàpredicateÁöÑÂÖÉÁ¥†„ÄÇ</li>
<li>mapToXxx(ToXxxFunction mapper)Ôºö‰ΩøÁî®ToXxxFunctionÂØπÊµÅ‰∏≠ÁöÑÂÖÉÁ¥†ÊâßË°å‰∏ÄÂØπ‰∏ÄÁöÑËΩ¨Êç¢ÔºåËØ•ÊñπÊ≥ïËøîÂõûÁöÑÊñ∞ÊµÅ‰∏≠ÂåÖÂê´‰∫ÜToXxxFunctionËΩ¨Êç¢ÁîüÊàêÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇ</li>
<li>peek(Consumer action)Ôºö‰æùÊ¨°ÂØπÊØè‰∏™ÂÖÉÁ¥†ÊâßË°å‰∏Ä‰∫õÊìç‰ΩúÔºåËØ•ÊñπÊ≥ïËøîÂõûÁöÑÊµÅ‰∏éÂéüÊúâÊµÅÂåÖÂê´Áõ∏ÂêåÁöÑÂÖÉÁ¥†„ÄÇËØ•ÊñπÊ≥ï‰∏ªË¶ÅÁî®‰∫éË∞ÉËØï„ÄÇ</li>
<li>distinct()ÔºöËØ•ÊñπÊ≥ïÁî®‰∫éÊéíÂ∫èÊµÅ‰∏≠ÊâÄÊúâÈáçÂ§çÁöÑÂÖÉÁ¥†ÔºàÂà§Êñ≠ÂÖÉÁ¥†ÈáçÂ§çÁöÑÊ†áÂáÜÊòØ‰ΩøÁî®equals()ÊØîËæÉËøîÂõûtrueÔºâ„ÄÇËøôÊòØ‰∏Ä‰∏™ÊúâÁä∂ÊÄÅÁöÑÊñπÊ≥ï„ÄÇ</li>
<li>sorted()ÔºöËØ•ÊñπÊ≥ïÁî®‰∫é‰øùËØÅÊµÅ‰∏≠ÁöÑÂÖÉÁ¥†Âú®ÂêéÁª≠ÁöÑËÆøÈóÆ‰∏≠Â§Ñ‰∫éÊúâÂ∫èÁä∂ÊÄÅ„ÄÇËøôÊòØ‰∏Ä‰∏™ÊúâÁä∂ÊÄÅÁöÑÊñπÊ≥ï„ÄÇ</li>
<li>limit(long maxSize)ÔºöËØ•ÊñπÊ≥ïÁî®‰∫é‰øùËØÅÂØπËØ•ÊµÅÁöÑÂêéÁª≠ËÆøÈóÆ‰∏≠ÊúÄÂ§ßÂÖÅËÆ∏ËÆøÈóÆÁöÑÂÖÉÁ¥†‰∏™Êï∞„ÄÇËøôÊòØ‰∏Ä‰∏™ÊúâÁä∂ÊÄÅÁöÑ„ÄÅÁü≠Ë∑ØÊñπÊ≥ï„ÄÇ</li>
</ul>
<p>‰∏ãÈù¢ÁÆÄÂçï‰ªãÁªç‰∏Ä‰∏ãStreamÂ∏∏Áî®ÁöÑÊú´Á´ØÊñπÊ≥ïÔºö</p>
<ul>
<li>forEach(Consumer action)ÔºöÈÅçÂéÜÊµÅ‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÔºåÂØπÊØè‰∏™ÂÖÉÁ¥†ÊâßË°åaction„ÄÇ</li>
<li>toArray()ÔºöÂ∞ÜÊµÅ‰∏≠ÊâÄÊúâÂÖÉÁ¥†ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™Êï∞ÁªÑ„ÄÇ</li>
<li>reduce()ÔºöËØ•ÊñπÊ≥ïÊúâ‰∏â‰∏™ÈáçËΩΩÁöÑÁâàÊú¨ÔºåÈÉΩÁî®‰∫éÈÄöËøáÊüêÁßçÊìç‰ΩúÊù•ÂêàÂπ∂ÊµÅ‰∏≠ÁöÑÂÖÉÁ¥†„ÄÇ</li>
<li>min()ÔºöËøîÂõûÊµÅ‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÁöÑÊúÄÂ∞èÂÄº„ÄÇ</li>
<li>max()ÔºöËøîÂõûÊµÅ‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÁöÑÊúÄÂ§ßÂÄº„ÄÇ</li>
<li>count()ÔºöËøîÂõûÊµÅ‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÁöÑÊï∞Èáè„ÄÇ</li>
<li>anyMatch(Predicate predicate)ÔºöÂà§Êñ≠ÊµÅ‰∏≠ÊòØÂê¶Ëá≥Â∞ëÂåÖÂê´‰∏Ä‰∏™ÂÖÉÁ¥†Á¨¶ÂêàPredicateÊù°‰ª∂„ÄÇ</li>
<li>noneMatch(Predicate predicate)ÔºöÂà§Êñ≠ÊµÅ‰∏≠ÊòØÂê¶ÊâÄÊúâÂÖÉÁ¥†ÈÉΩ‰∏çÁ¨¶ÂêàPredicateÊù°‰ª∂„ÄÇ</li>
<li>findFirst()ÔºöËøîÂõûÊµÅ‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ</li>
<li>findAny()ÔºöËøîÂõûÊµÅ‰∏≠ÁöÑ‰ªªÊÑè‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ</li>
</ul>
<p>Èô§Ê≠§‰πãÂ§ñÔºåJava 8ÂÖÅËÆ∏‰ΩøÁî®ÊµÅÂºèAPIÊù•Êìç‰ΩúÈõÜÂêàÔºåCollectionÊé•Âè£Êèê‰æõ‰∫Ü‰∏Ä‰∏™stream()ÈªòËÆ§ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÂèØËøîÂõûËØ•ÈõÜÂêàÂØπÂ∫îÁöÑÊµÅÔºåÊé•‰∏ãÊù•Âç≥ÂèØÈÄöËøáÊµÅÂºèAPIÊù•Êìç‰ΩúÈõÜÂêàÂÖÉÁ¥†„ÄÇÁî±‰∫éStreamÂèØ‰ª•ÂØπÈõÜÂêàÂÖÉÁ¥†ËøõË°åÊï¥‰ΩìÁöÑËÅöÈõÜÊìç‰ΩúÔºåÂõ†Ê≠§StreamÊûÅÂ§ßÂú∞‰∏∞ÂØå‰∫ÜÈõÜÂêàÁöÑÂäüËÉΩ„ÄÇ</p>
<p><strong>Êâ©Â±ïÈòÖËØª</strong></p>
<p>Java 8Êñ∞Â¢û‰∫ÜStream„ÄÅIntStream„ÄÅLongStream„ÄÅDoubleStreamÁ≠âÊµÅÂºèAPIÔºåËøô‰∫õAPI‰ª£Ë°®Â§ö‰∏™ÊîØÊåÅ‰∏≤Ë°åÂíåÂπ∂Ë°åËÅöÈõÜÊìç‰ΩúÁöÑÂÖÉÁ¥†„ÄÇ‰∏äÈù¢4‰∏™Êé•Âè£‰∏≠ÔºåStreamÊòØ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÊµÅÊé•Âè£ÔºåËÄåIntStream„ÄÅLongStream„ÄÅDoubleStreamÂàô‰ª£Ë°®ÂÖÉÁ¥†Á±ªÂûã‰∏∫int„ÄÅlong„ÄÅdoubleÁöÑÊµÅ„ÄÇ</p>
<p>Java 8Ëøò‰∏∫‰∏äÈù¢ÊØè‰∏™ÊµÅÂºèAPIÊèê‰æõ‰∫ÜÂØπÂ∫îÁöÑBuilderÔºå‰æãÂ¶ÇStream.Builder„ÄÅIntStream.Builder„ÄÅLongStream.Builder„ÄÅDoubleStream.BuilderÔºåÂºÄÂèëËÄÖÂèØ‰ª•ÈÄöËøáËøô‰∫õBuilderÊù•ÂàõÂª∫ÂØπÂ∫îÁöÑÊµÅ„ÄÇ</p>
<p>Áã¨Á´ã‰ΩøÁî®StreamÁöÑÊ≠•È™§Â¶Ç‰∏ãÔºö</p>
<ol>
<li>‰ΩøÁî®StreamÊàñXxxStreamÁöÑbuilder()Á±ªÊñπÊ≥ïÂàõÂª∫ËØ•StreamÂØπÂ∫îÁöÑBuilder„ÄÇ</li>
<li>ÈáçÂ§çË∞ÉÁî®BuilderÁöÑadd()ÊñπÊ≥ïÂêëËØ•ÊµÅ‰∏≠Ê∑ªÂä†Â§ö‰∏™ÂÖÉÁ¥†„ÄÇ</li>
<li>Ë∞ÉÁî®BuilderÁöÑbuild()ÊñπÊ≥ïËé∑ÂèñÂØπÂ∫îÁöÑStream„ÄÇ</li>
<li>Ë∞ÉÁî®StreamÁöÑËÅöÈõÜÊñπÊ≥ï„ÄÇ</li>
</ol>
<p>Âú®‰∏äÈù¢4‰∏™Ê≠•È™§‰∏≠ÔºåÁ¨¨4Ê≠•ÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÈúÄÊ±ÇÊù•Ë∞ÉÁî®‰∏çÂêåÁöÑÊñπÊ≥ïÔºåStreamÊèê‰æõ‰∫ÜÂ§ßÈáèÁöÑËÅöÈõÜÊñπÊ≥ï‰æõÁî®Êà∑Ë∞ÉÁî®ÔºåÂÖ∑‰ΩìÂèØÂèÇËÄÉStreamÊàñXxxStreamÁöÑAPIÊñáÊ°£„ÄÇÂØπ‰∫éÂ§ßÈÉ®ÂàÜËÅöÈõÜÊñπÊ≥ïËÄåË®ÄÔºåÊØè‰∏™StreamÂè™ËÉΩÊâßË°å‰∏ÄÊ¨°„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>HashMap</title>
    <url>/p/9da5e46.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Â§ç‰π†È¢ÑÁÉ≠"><a href="#Â§ç‰π†È¢ÑÁÉ≠" class="headerlink" title="Â§ç‰π†È¢ÑÁÉ≠"></a>Â§ç‰π†È¢ÑÁÉ≠</h2><h3 id="ÂçÅËøõÂà∂ËΩ¨‰∫åËøõÂà∂ÁöÑÂø´ÈÄüËÆ°ÁÆóÊñπÂºè"><a href="#ÂçÅËøõÂà∂ËΩ¨‰∫åËøõÂà∂ÁöÑÂø´ÈÄüËÆ°ÁÆóÊñπÂºè" class="headerlink" title="ÂçÅËøõÂà∂ËΩ¨‰∫åËøõÂà∂ÁöÑÂø´ÈÄüËÆ°ÁÆóÊñπÂºè"></a>ÂçÅËøõÂà∂ËΩ¨‰∫åËøõÂà∂ÁöÑÂø´ÈÄüËÆ°ÁÆóÊñπÂºè</h3><p>17 ÁöÑ‰∫åËøõÂà∂Ôºö17=16+1 ÊâÄ‰ª•Âú®‰∏ãÈù¢ 16Âíå1 ÁöÑ‰ΩçÁΩÆ‰∏∫1ÔºåÂÖ∂ÂÆÉÈÉΩ‰∏∫0ÔºåÂÄº‰∏∫ 0001 0001„ÄÇ</p>
<p>37 ÁöÑ‰∫åËøõÂà∂Ôºö37=32+4+1 ÊâÄ‰ª•‰∏ãÈù¢32Âíå4Âíå1ÁöÑ‰Ωç‰∏äÈÉΩ‰∏∫1ÔºåÂÖ∂ÂÆÉÈÉΩ‰∏∫0ÔºåÂÄº‰∏∫ 0010 0101„ÄÇ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">    0      0      0      0        0    0    0      0</span><br><span class="line">    128   64     32     16        8    4    2      1</span><br><span class="line">ËÆ°ÁÆóÁ§∫‰æãÔºö    </span><br><span class="line">17Ôºö 0     0      0      1        0    0    0      1</span><br><span class="line">37Ôºö 0     0      1      0        0    1    0      1 </span><br></pre></td></tr></tbody></table></figure>

<h3 id="‰∏é„ÄÅÊàñ„ÄÅÂºÇÊàñËøêÁÆó"><a href="#‰∏é„ÄÅÊàñ„ÄÅÂºÇÊàñËøêÁÆó" class="headerlink" title="‰∏é„ÄÅÊàñ„ÄÅÂºÇÊàñËøêÁÆó"></a>‰∏é„ÄÅÊàñ„ÄÅÂºÇÊàñËøêÁÆó</h3><p>&amp; ÂèàÂè´ÂÅöandÔºà‰∏éËøêÁÆóÔºâÔºå‰æãÔºö3 &amp; 5 = 1 (000011 &amp; 000101 = 000001)„ÄÇ3ÁöÑ‰∫åËøõÂà∂Âíå5ÁöÑ‰∫åËøõÂà∂‰ΩçÁõ∏ÂØπÂ∫îÔºåÂ£πÂ£πÊØîËæÉÔºåÈÉΩ‰∏∫1ÁöÑ‰Ωç‰∏äÊâç‰∏∫1„ÄÇ</p>
<p>| ‰πüÂè´ÂÅöorÔºå‰æãÔºö3 | 5 = 7 (0000011 | 00000101 = 0000111)„ÄÇ</p>
<p>^ ‰πüÂè´xor (‰ª•ÂêéÂÅöÈ¢ò‰ºöÈÅáÂà∞xor,Â∞±ÊòØÂºÇÊàñ)Ôºå‰∏§‰∏™ÊØîËæÉÁöÑ‰∫åËøõÂà∂ÁöÑ‰Ωç‰∏äÁõ∏Âêå‰∏∫0Ôºå‰∏çÂêå‰∏∫1„ÄÇ‰æãÔºö3^5 = 6(0000 0011 ^ 0000 0101=0000 0110)„ÄÇÁâπÂà´ÁöÑ‰ªªÊÑèÊï∞ ^ 0 = ‰ªªÊÑèÊï∞„ÄÇ</p>
<p>ÂèñÂèçËøêÁÆóÁ¨¶(~)Ôºå‰∫åËøõÂà∂‰Ωç0Âèò‰∏∫1,1Âèò‰∏∫0<br><img src="https://img-blog.csdnimg.cn/20210402154702645.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNjQ3OTk5,size_16,color_FFFFFF,t_70" alt="‰∏éÊàñÈùûË°®Ê†º"></p>
<h3 id="‚Äú-lt-lt-‚Äù-Âíå-‚Äú-gt-gt-‚Äù-ËøêÁÆóÁ¨¶"><a href="#‚Äú-lt-lt-‚Äù-Âíå-‚Äú-gt-gt-‚Äù-ËøêÁÆóÁ¨¶" class="headerlink" title="‚Äú<<‚Äù Âíå ‚Äú>>‚Äù ËøêÁÆóÁ¨¶"></a>‚Äú&lt;&lt;‚Äù Âíå ‚Äú&gt;&gt;‚Äù ËøêÁÆóÁ¨¶</h3><p>ÁÆ≠Â§¥ÂêëÂ∑¶Âè´Â∑¶ÁßªÔºåÂêëÂè≥Âè´Âè≥Áßª„ÄÇ</p>
<p>‰∏§‰∏™ÁÆ≠Â§¥ÁöÑ‰ª£Ë°®Â∏¶Á¨¶Âè∑Áßª‰ΩçÔºå‰∏â‰∏™ÁÆ≠Â§¥Ôºà‚Äú&lt;&lt;&lt;‚ÄùÂíå‚Äú&gt;&gt;&gt;‚ÄùÔºâ‰∏çÂ∏¶Á¨¶Âè∑Áßª‰Ωç„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå17ÁöÑ‰∫åËøõÂà∂‰∏∫Ôºö0001 0001ÔºåËøêÁÆó 17 &lt;&lt; 1ÔºåË°®Á§∫‰∏∫17ÁöÑ‰∫åËøõÂà∂ÂêëÂ∑¶Áßª1‰ΩçÔºå0010 0010 ËΩ¨Êàê10ËøõÂà∂ÁöÑÂÄº‰∏∫34„ÄÇ</p>
<h3 id="JDK1-7-ÊúÄÈ´ò‰ΩçËÆ°ÁÆó"><a href="#JDK1-7-ÊúÄÈ´ò‰ΩçËÆ°ÁÆó" class="headerlink" title="JDK1.7 ÊúÄÈ´ò‰ΩçËÆ°ÁÆó"></a>JDK1.7 ÊúÄÈ´ò‰ΩçËÆ°ÁÆó</h3><p>ÂÖ∂‰∏≠Êúâ‰∏Ä‰∏™Áî®‰∫éÂØªÊâæ2ÁöÑnÊ¨°ÊñπÂ∞è‰∫éi ÁöÑËøô‰∏™Êï∞ÁöÑÊñπÊ≥ïÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">highestOneBit</span><span class="params">(<span class="type">int</span> i)</span> {</span><br><span class="line">    <span class="comment">// Á§∫‰æã i=17 Êó∂, ËÆ°ÁÆó i|= i |= (i &gt;&gt; 1) ÁöÑÁªìÊûú </span></span><br><span class="line">    <span class="comment">// 0 0 0 1   0 0 0 1      17ÁöÑ‰∫åËøõÂà∂</span></span><br><span class="line">    <span class="comment">// 0 0 0 0   1 0 0 0      17ÂêëÂè≥Áßª‰∏Ä‰Ωç</span></span><br><span class="line">    <span class="comment">// 0 0 0 1   1 0 0 1      Âè≥Áßª‰∏Ä‰Ωç‰πãÂêéÂíå17ÊàñËøêÁÆó</span></span><br><span class="line">    <span class="comment">//       16  8     1      ÁªìÊûú‰∏∫Ôºö16+8+1=25</span></span><br><span class="line">    i |= (i &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    i |= (i &gt;&gt; <span class="number">2</span>);</span><br><span class="line">    i |= (i &gt;&gt; <span class="number">4</span>);  <span class="comment">// ÂΩìi=17Êó∂ÔºåÂÅáÂ¶ÇÊ≠§Â§ÑËøêÁÆóÁöÑÁªìÊûú‰∏∫num</span></span><br><span class="line">    i |= (i &gt;&gt; <span class="number">8</span>);  <span class="comment">// ÂÆûÈôÖ‰∏äÂà∞8ËøôÈáåËøêÁÆóÁªìÊûú 0000 0000Âú®‰∏é num ÊàñËøêÁÆóÔºånumÁöÑÂÄºÂ∞±‰∏ç‰ºöÂú®ÂèëÁîüÊîπÂèò‰∫Ü</span></span><br><span class="line">    i |= (i &gt;&gt; <span class="number">16</span>); </span><br><span class="line">    <span class="keyword">return</span> i - (i &gt;&gt;&gt; <span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ËÆ°ÁÆóÂ§öÊ¨°ÊòØ‰∏∫‰∫ÜÊää i ÁöÑÊúÄÈ´ò‰ΩçÂèòÊàê 0„ÄÇ</p>
<p>JDK 1.8‰πãÂâçÁöÑHashMapÁî± <strong>Êï∞ÁªÑ+ÈìæË°®</strong> ÁªÑÊàêÁöÑÔºåJDK1.8‰∏≠HashMapÁî±<strong>ÈìæË°®+Êï∞ÁªÑ+Á∫¢ÈªëÊ†ë</strong>ÁªÑÊàêÔºàÂΩìÈìæË°®ËäÇÁÇπÂç≥ÈòàÂÄºÂ§ß‰∫é8ÔºåÊï∞ÁªÑÈïøÂ∫¶Â§ß‰∫é64ÂêéËΩ¨Âåñ‰∏∫Á∫¢ÈªëÊï∞ÔºåÈ´òÊïàÁöÑÊü•ËØ¢ÔºõÂΩìÈòàÂÄºÂ§ß‰∫é8ÔºåÊï∞ÁªÑÈïøÂ∫¶Â∞è‰∫é64ÁöÑÊó∂ÂÄôÔºå‰ºöÊâ©ÂÆπÔºâ„ÄÇ</p>
<p>HashMap Âü∫‰∫éÂìàÂ∏åË°®ÁöÑ Map Êé•Âè£ÁöÑÂÆûÁé∞ÔºåkeyÂíåvalueÈÉΩÂÖÅËÆ∏‰∏∫nullÔºåÊó†Â∫èÁöÑ„ÄÇ</p>
<p>ÈìæË°®ÂàôÊòØ‰∏ªË¶Å‰∏∫‰∫ÜËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™ÅÔºà‰∏§‰∏™ÂØπË±°‰æãÂ¶ÇAaÂíåBBË∞ÉÁî®ÁöÑ hashCodeÊñπÊ≥ïËÆ°ÁÆóÁöÑÂìàÂ∏åÁ†ÅÂÄº‰∏ÄËá¥ÂØºËá¥ËÆ°ÁÆóÁöÑÊï∞ÁªÑÁ¥¢ÂºïÂÄºÁõ∏ÂêåÔºâ„ÄÇ</p>
<h2 id="HashMapÂ≠òÂÇ®Êï∞ÊçÆÁöÑËøáÁ®ã"><a href="#HashMapÂ≠òÂÇ®Êï∞ÊçÆÁöÑËøáÁ®ã" class="headerlink" title="HashMapÂ≠òÂÇ®Êï∞ÊçÆÁöÑËøáÁ®ã"></a>HashMapÂ≠òÂÇ®Êï∞ÊçÆÁöÑËøáÁ®ã</h2><p>‚Äã        Âú®JDK8‰ª•ÂâçÔºåÂΩìÂàõÂª∫HashMapÈõÜÂêàÂØπË±°ÁöÑÊó∂ÂÄôÔºåÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÂàõÂª∫‰∏Ä‰∏™ÈïøÂ∫¶‰∏∫16ÁöÑEntry[ ] table Â≠òÂÇ®ÈîÆÂÄºÂØπÊï∞ÊçÆÔºõ</p>
<p>‚Äã        Âú®JDK8‰πãÂêéÔºå‰∏çÂú®ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÂàõÂª∫Êï∞ÁªÑ‰∫ÜÔºåËÄåÊòØÂú®Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî® put ÊñπÊ≥ïÊó∂ÂàõÂª∫ Node[ ] tableÔºàÂÆûÈôÖ‰∏äÂè™ÊòØEntryÊç¢‰∫Ü‰∏™ÂêçÂ≠óÔºåÂ∫ïÂ±ÇËøòÊòØMap.EntryÔºâ„ÄÇ</p>
<blockquote>
<h4 id="ÂìàÂ∏åË°®ÁöÑÂ∫ïÂ±ÇÊòØÂ¶Ç‰ΩïËÆ°ÁÆóÂìàÂ∏åÂÄºÁöÑÔºüËøòÊúâÂì™‰∫õÁÆóÊ≥ïÂèØ‰ª•ËÆ°ÁÆóÂá∫ÂìàÂ∏åÂÄºÔºü"><a href="#ÂìàÂ∏åË°®ÁöÑÂ∫ïÂ±ÇÊòØÂ¶Ç‰ΩïËÆ°ÁÆóÂìàÂ∏åÂÄºÁöÑÔºüËøòÊúâÂì™‰∫õÁÆóÊ≥ïÂèØ‰ª•ËÆ°ÁÆóÂá∫ÂìàÂ∏åÂÄºÔºü" class="headerlink" title="ÂìàÂ∏åË°®ÁöÑÂ∫ïÂ±ÇÊòØÂ¶Ç‰ΩïËÆ°ÁÆóÂìàÂ∏åÂÄºÁöÑÔºüËøòÊúâÂì™‰∫õÁÆóÊ≥ïÂèØ‰ª•ËÆ°ÁÆóÂá∫ÂìàÂ∏åÂÄºÔºü"></a>ÂìàÂ∏åË°®ÁöÑÂ∫ïÂ±ÇÊòØÂ¶Ç‰ΩïËÆ°ÁÆóÂìàÂ∏åÂÄºÁöÑÔºüËøòÊúâÂì™‰∫õÁÆóÊ≥ïÂèØ‰ª•ËÆ°ÁÆóÂá∫ÂìàÂ∏åÂÄºÔºü</h4></blockquote>
<p>‚Äã        Â∫ïÂ±ÇÈááÁî® keyÁöÑÂìàÂ∏åÂÄºÔºàhashCodeÊñπÊ≥ïÁöÑËÆ°ÁÆóÂÄºÔºâÔºåÁªìÂêàÊï∞ÁªÑÈïøÂ∫¶ËøõË°åÊó†Á¨¶Âè∑Âè≥Áßª(&gt;&gt;&gt;)„ÄÅÂºÇÊàñÔºà^ÔºâËøêÁÆó„ÄÅ‰∏éËøêÁÆóÔºà^ÔºâËÆ°ÁÆóÂá∫Êï∞ÁªÑÁöÑÁ¥¢Âºï‰∏ãÊ†á„ÄÇ</p>
<p>Èô§‰∫ÜÂìàÂ∏åÁÆóÊ≥ïÂ§ñÔºåËøòÂèØ‰ª•ÈááÁî®Âπ≥ÊñπÂèñ‰∏≠Ê≥ï„ÄÅÂèñ‰ΩôÊï∞„ÄÅ‰º™ÈöèÊú∫Êï∞Ê≥ïÔºå‰ΩÜ‰∏∫‰ªÄ‰πàÈááÁî®ÂìàÂ∏åÁÆóÊ≥ïÔºü</p>
<p>‚Äã        ÂêëÂìàÂ∏åË°®‰∏≠Â≠òÂÇ®‰∏Ä‰∏™ key - value Êï∞ÊçÆÔºåÂÅáËÆæ key ËÆ°ÁÆóÂá∫ÁöÑÂìàÂ∏åÂÄºÁªìÂêàÊï∞ÁªÑÈïøÂ∫¶ËÆ°ÁÆóÂá∫ÁöÑÁ¥¢ÂºïÂÄº‰∏∫3ÔºåÂΩìÊï∞ÁªÑÁ©∫Èó¥‰∏ç‰∏∫nullÊó∂Ôºå‰ºö‰∏éÁ¥¢Âºï‰∏∫3ÁöÑÊ°∂ÔºàÊï∞ÁªÑ‰∏≠‰∏∫3ÁöÑÂÖÉÁ¥†ÔºâÊØîËæÉÔºåÂ¶ÇÊûúÊ≤°ÊúâÂåπÈÖçÂà∞Áõ∏ÂêåÂìàÂ∏åÂÄºÁöÑkeyÔºåÈÇ£‰πà‰ªéËøô‰∏™Ê°∂ÂÜÖÂàíÂá∫‰∏Ä‰∏™ËäÇÁÇπÊù•Â≠òÂÇ®ÂΩìÂâçÁöÑkey-valueÔºåËøôÁßçÊñπÊ≥ïÁß∞‰∏∫<strong>ÊãâÈìæÊ≥ï</strong>„ÄÇÂ¶ÇÊûúÂåπÈÖçÂà∞‰∫Ü‰∏Ä‰∏™ÂìàÂ∏åÂÄºÁõ∏Á≠âÁöÑkeyÔºåÊ≠§Êó∂ÂèëÁîü<strong>ÂìàÂ∏åÁ¢∞Êíû</strong>ÔºåÈÇ£‰πà‰ºöË∞ÉÁî®String.equals()ÊñπÊ≥ïÊØîËæÉ‰∏§‰∏™ÂÄºÁöÑÂºïÁî®Âú∞ÂùÄÊòØÂê¶Áõ∏Á≠âÔºåÁõ∏Á≠âÂàôËøîÂõûÂπ∂Ë¶ÜÁõñ‰πãÂâçÁöÑvalueÔºåÂèç‰πãÂàíÂá∫‰∏Ä‰∏™ËäÇÁÇπÂ≠òÂÇ®key-value„ÄÇ Â¶ÇÊûúÈìæË°®ËäÇÁÇπÊï∞Â§ß‰∫éÈòàÂÄº8ÔºåÂπ∂‰∏îÊï∞ÁªÑÈïøÂ∫¶Â§ß‰∫é64ÔºåÂàôÂ∞ÜÈìæË°®ËΩ¨‰∏∫Á∫¢ÈªëÊ†ë„ÄÇ</p>
<blockquote>
<h4 id="‰ªÄ‰πàÊòØÂìàÂ∏åÁ¢∞ÊíûÔºü‰ΩïÊó∂ÂèëÁîüÔºüÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü"><a href="#‰ªÄ‰πàÊòØÂìàÂ∏åÁ¢∞ÊíûÔºü‰ΩïÊó∂ÂèëÁîüÔºüÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü" class="headerlink" title="‰ªÄ‰πàÊòØÂìàÂ∏åÁ¢∞ÊíûÔºü‰ΩïÊó∂ÂèëÁîüÔºüÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü"></a>‰ªÄ‰πàÊòØÂìàÂ∏åÁ¢∞ÊíûÔºü‰ΩïÊó∂ÂèëÁîüÔºüÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü</h4></blockquote>
<p>Âè™Ë¶Å‰∏§‰∏™keyÈÄöËøáhashCodeÊñπÊ≥ïËÆ°ÁÆóÂá∫ÁöÑÂìàÂ∏åÂÄºÁõ∏Á≠âÂ∞±ÊòØÂìàÂ∏åÁ¢∞ÊíûÔºåJDK8‰ΩøÁî®ÈìæË°®Ëß£ÂÜ≥ÂìàÂ∏åÁ¢∞ÊíûÔºåJDK8‰πãÂêé‰ΩøÁî®ÈìæË°®+Á∫¢ÈªëÊ†ëËß£ÂÜ≥ÂìàÂ∏åÁ¢∞Êíû„ÄÇ</p>
<blockquote>
<h4 id="Â¶ÇÊûú‰∏§‰∏™keyÁöÑÂìàÂ∏åÂÄºÁõ∏ÂêåÔºåÂ¶Ç‰ΩïÂ≠òÂÇ®ÈîÆÂÄºÂØπÔºü"><a href="#Â¶ÇÊûú‰∏§‰∏™keyÁöÑÂìàÂ∏åÂÄºÁõ∏ÂêåÔºåÂ¶Ç‰ΩïÂ≠òÂÇ®ÈîÆÂÄºÂØπÔºü" class="headerlink" title="Â¶ÇÊûú‰∏§‰∏™keyÁöÑÂìàÂ∏åÂÄºÁõ∏ÂêåÔºåÂ¶Ç‰ΩïÂ≠òÂÇ®ÈîÆÂÄºÂØπÔºü"></a>Â¶ÇÊûú‰∏§‰∏™keyÁöÑÂìàÂ∏åÂÄºÁõ∏ÂêåÔºåÂ¶Ç‰ΩïÂ≠òÂÇ®ÈîÆÂÄºÂØπÔºü</h4></blockquote>
<p>ÂìàÂ∏åÂÄºÁõ∏ÂêåÁöÑ‰∏§‰∏™ key ÔºåÈÄöËøá equals ÊØîËæÉÂÜÖÂÆπÊòØÂê¶Áõ∏ÂêåÔºåÂ¶ÇÊûúÁõ∏ÂêåÂàôÊñ∞ÁöÑvalueË¶ÜÁõñÊóßvalueÂπ∂ËøîÂõûÊóßvalue„ÄÇ</p>
<blockquote>
<h4 id="‰∏∫‰ªÄ‰πà-JDK1-8-Ë¶Å‰ΩøÁî®Á∫¢ÈªëÊ†ëÔºü‰∏∫‰ªÄ‰πàÈòàÂÄºÂ§ß‰∫é8ÊâçÊç¢ÊàêÁ∫¢ÈªëÊ†ëÔºü"><a href="#‰∏∫‰ªÄ‰πà-JDK1-8-Ë¶Å‰ΩøÁî®Á∫¢ÈªëÊ†ëÔºü‰∏∫‰ªÄ‰πàÈòàÂÄºÂ§ß‰∫é8ÊâçÊç¢ÊàêÁ∫¢ÈªëÊ†ëÔºü" class="headerlink" title="‰∏∫‰ªÄ‰πà JDK1.8 Ë¶Å‰ΩøÁî®Á∫¢ÈªëÊ†ëÔºü‰∏∫‰ªÄ‰πàÈòàÂÄºÂ§ß‰∫é8ÊâçÊç¢ÊàêÁ∫¢ÈªëÊ†ëÔºü"></a>‰∏∫‰ªÄ‰πà JDK1.8 Ë¶Å‰ΩøÁî®Á∫¢ÈªëÊ†ëÔºü‰∏∫‰ªÄ‰πàÈòàÂÄºÂ§ß‰∫é8ÊâçÊç¢ÊàêÁ∫¢ÈªëÊ†ëÔºü</h4></blockquote>
<p>Âú®JDK1.8‰πãÂâçÁöÑHashMap‰∏≠ÔºåÊï∞ÊçÆÁªìÊûÑÊòØÊï∞ÁªÑ+ÈìæË°®ÔºåÂç≥‰ΩøÂìàÂ∏åÂáΩÊï∞ÂèñÂæóÂÜçÂ•ΩÔºå‰πüÂæàÈöæËææÂà∞ÂÖÉÁ¥†ÁôæÂàÜÁôæÂùáÂåÄÂàÜÂ∏É„ÄÇÂΩìHashMap‰∏≠‰ª•ÂêéÂ§ßÈáèÁöÑÂÖÉÁ¥†ÈÉΩÂ≠òÊîæÂú®Âêå‰∏Ä‰∏™Ê°∂‰∏≠Êó∂ÔºåËøô‰∏™Ê°∂Êúâ‰∏ÄÊù°ÂæàÂ§öËäÇÁÇπÁöÑÈìæË°®ÔºåÊ≠§Êó∂ÁöÑHashMapÂ∞±Áõ∏ÂΩì‰∫é‰∏Ä‰∏™ÂçïÈìæË°®ÔºåÂä†ÂÖ•ÈìæË°®Êúân‰∏™ËäÇÁÇπÔºåÂàôÊü•ËØ¢ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n)„ÄÇÈíàÂØπËøô‰∏ÄÊÉÖÂÜµÔºåJDK1.8ÂºïÂÖ•‰∫ÜÁ∫¢ÈªëÊ†ëÔºàÊü•ÊâæÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(lognÔºâÔºâ„ÄÇ</p>
<p>ÂΩìÈìæË°®ÂæàÂ∞èÊó∂ÔºåÈÅçÂéÜÈÄüÂ∫¶‰πü‰ºöÈùûÂ∏∏Âø´Ôºå‰ΩÜÊòØÂΩìÈìæË°®ËäÇÁÇπÂ§ö‰∫Ü‰ª•ÂêéÔºåÊü•ËØ¢ÊÄßËÉΩÂèóÂΩ±ÂìçÔºåÊâÄ‰ª•Êç¢ÊàêÊ†ëÁöÑÁªìÊûÑÊù•Â¢ûÂä†Êü•ËØ¢ÊÄßËÉΩ„ÄÇ<br><img src="/p/9da5e46/HashMap%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="HashMapÊµÅÁ®ãÂõæ"><br>1„ÄÅËÆ°ÁÆóÂá∫ÂΩìÂâçÊèíÂÖ•EntryÔºàÈîÆÂÄºÂØπ)keyÁöÑ hashCodeÔºåÂÜçÈÄöËøá<strong>ÊüêÁßçÁÆóÊ≥ï</strong>ËÆ°ÁÆóÂá∫ÊèíÂÖ•ÁöÑ‰∏ãÊ†á i„ÄÇ</p>
<p>2„ÄÅÂ¶ÇÊûú table[ i ] == nullÔºåÂàôÁõ¥Êé•ÊèíÂÖ•ÔºõÂ¶ÇÊûú‰∏çÁ≠â‰∫énullÔºåÂàôÈÄöËøáequals ÊØîËæÉ key Âíå table[i] ‰∏≠ÁöÑkeyÊòØÂê¶Áõ∏Á≠âÔºåÂ¶ÇÊûúÁõ∏Á≠âÔºåÂàôÊñ∞valueÁõ¥Êé•Ë¶ÜÁõñÂπ∂ËøîÂõûÊóßvalueÔºåÂ¶ÇÊûú‰∏çÁõ∏Á≠âÔºåÂàôÂà§Êñ≠ÂΩìÂâç table[i] ÊòØÂê¶‰∏∫Á∫¢ÈªëÊ†ëËäÇÁÇπÔºåÂ¶ÇÊûúÊòØÁ∫¢ÈªëÊ†ëÔºåÂàôÁõ¥Êé•ÊèíÂÖ•Entry Âà∞Âè∂Â≠êËäÇÁÇπÔºåÂ¶ÇÊûúÊòØÈìæË°®ÂàôÂÖàÂà§Êñ≠ÈìæË°®ÁöÑËäÇÁÇπÈïøÂ∫¶ÊòØÂê¶Â∞è‰∫é8‰∏îÊï∞ÁªÑÈïøÂ∫¶ÊòØÂê¶Â∞è‰∫é64ÔºåÊª°Ë∂≥Êù°‰ª∂ÂàôÈÅçÂéÜkeyÊØîÂØπÂêéÂàíÂá∫‰∏Ä‰∏™Êñ∞ÁöÑËäÇÁÇπËøûÊé•‰∏äÈìæË°®„ÄÇ</p>
<p>3„ÄÅsize Ë°®Á§∫HashMap‰∏≠K-VÁöÑÂÆûÊó∂Êï∞ÈáèÔºå‰∏çÁ≠â‰∫éÊï∞ÁªÑÁöÑÈïøÂ∫¶„ÄÇ</p>
<p>4„ÄÅthresholdÔºà‰∏¥ÁïåÂÄºÔºâ= capacityÔºàÊï∞ÁªÑÂÆπÈáèÔºâ * loadFactorÔºàË¥üËΩΩÂõ†Â≠êÔºâ„ÄÇËøô‰∏™ÂÄºÊòØÂΩìÂâçÂ∑≤Âç†Áî®Êï∞ÁªÑÈïøÂ∫¶ÁöÑÊúÄÂ§ßÂÄº„ÄÇsize Ë∂ÖËøáËøô‰∏™‰∏¥ÁïåÂÄºÂ∞±ÈáçÊñ∞ resizeÔºåÊâ©ÂÆπÂêé ÂÆπÈáèÊòØ‰πãÂâçÂÆπÈáèÁöÑ‰∏§ÂÄç„ÄÇÔºàHashMapÊï∞ÁªÑÁöÑÁ©∫Èó¥ÊòØÂæàÈöæÊØè‰∏™Á©∫Èó¥ÈÉΩÂ≠òÊª°Êï∞ÊçÆÁöÑÔºåÊâÄ‰ª•‰πò‰ª•‰∏Ä‰∏™Ë¥üËΩΩÂõ†Â≠êÔºâ</p>
<h2 id="HashMapÁöÑÁªßÊâøÂÖ≥Á≥ª"><a href="#HashMapÁöÑÁªßÊâøÂÖ≥Á≥ª" class="headerlink" title="HashMapÁöÑÁªßÊâøÂÖ≥Á≥ª"></a>HashMapÁöÑÁªßÊâøÂÖ≥Á≥ª</h2><p><img src="https://img-blog.csdnimg.cn/20210402154821479.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNjQ3OTk5,size_16,color_FFFFFF,t_70" alt="HashMapÁöÑÁªßÊâøÂÖ≥Á≥ª"></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMap</span>&lt;K,V&gt; <span class="keyword">extends</span> <span class="title class_">AbstractMap</span>&lt;K,V&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">Map</span>&lt;K,V&gt;, Cloneable, Serializable {...}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractMap</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>&lt;K,V&gt; {...}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>CloneableÔºö</strong> ÂÆûÁé∞ËØ•Êé•Âè£Ë°®Á§∫ÂèØ‰ª•ÂÖãÈöÜ„ÄÇ</p>
<p><strong>Serializable</strong>ÔºöË°®Á§∫HashMapÂØπË±°ÂèØ‰ª•Ë¢´Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ„ÄÇ</p>
<h2 id="ÊàêÂëòÂèòÈáè"><a href="#ÊàêÂëòÂèòÈáè" class="headerlink" title="ÊàêÂëòÂèòÈáè"></a>ÊàêÂëòÂèòÈáè</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The default initial capacity - MUST be a power of two.</span></span><br><span class="line"><span class="comment"> * ÈªòËÆ§ÁöÑÂàùÂßãÂåñÂÆπÈáèÂøÖÈ°ªÊòØ2ÁöÑnÊ¨°ÂπÇ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_INITIAL_CAPACITY</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">4</span>; <span class="comment">// aka 16  = 1*2^4</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<h4 id="‰∏∫‰ªÄ‰πàÂàùÂßãÂÄºÂøÖÈ°ªÊòØ2ÁöÑnÊ¨°ÂπÇÔºü‰∏çÊòØ2ÁöÑnÊ¨°ÂπÇ‰ºöÊÄéÊ†∑Ôºü"><a href="#‰∏∫‰ªÄ‰πàÂàùÂßãÂÄºÂøÖÈ°ªÊòØ2ÁöÑnÊ¨°ÂπÇÔºü‰∏çÊòØ2ÁöÑnÊ¨°ÂπÇ‰ºöÊÄéÊ†∑Ôºü" class="headerlink" title="‰∏∫‰ªÄ‰πàÂàùÂßãÂÄºÂøÖÈ°ªÊòØ2ÁöÑnÊ¨°ÂπÇÔºü‰∏çÊòØ2ÁöÑnÊ¨°ÂπÇ‰ºöÊÄéÊ†∑Ôºü"></a>‰∏∫‰ªÄ‰πàÂàùÂßãÂÄºÂøÖÈ°ªÊòØ2ÁöÑnÊ¨°ÂπÇÔºü‰∏çÊòØ2ÁöÑnÊ¨°ÂπÇ‰ºöÊÄéÊ†∑Ôºü</h4></blockquote>
<p>HashMap Âú® put Ëøõ‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÈÄöËøá key ÁöÑÂìàÂ∏åÂÄºÊù•ËÆ°ÁÆóÂá∫Â≠òÂÇ®Âú®Êï∞ÁªÑ‰∏≠ÁöÑÁ¥¢Âºï‰∏ãÊ†áÔºåHashMap ‰∏∫‰∫ÜÂ≠òÂèñÈ´òÊïà„ÄÅÂ∞ΩÈáèÂáèÂ∞ëÁ¢∞ÊíûÔºåÂ∞±ÈúÄË¶ÅÂ∞ΩÈáèÊääÊï∞ÊçÆÂàÜÈÖçÂùáÂåÄÔºåÊØè‰∏™ÈìæË°®ÁöÑÈïøÂ∫¶Â§ßËá¥Áõ∏ÂêåÔºåËøô‰∏™ÂÆûÁé∞Â∞±Âú®ÊääÊï∞ÊçÆÂ≠òÂà∞Âì™‰∏™ÈìæË°®‰∏≠ÁöÑÁÆóÊ≥ï„ÄÇËøô‰∏™ÁÆóÊ≥ïÂÆûÈôÖ‰∏äÂ∞±ÊòØ<strong>ÂèñÊ®°ËøêÁÆó</strong>Ôºàhash%lengthÔºâÔºåËÆ°ÁÆóÊú∫‰∏≠Áõ¥Êé•Ê±Ç‰ΩôÊïàÁéá‰∏çÂ¶Ç‰ΩçÁßªËøêÁÆóÔºåÊâÄ‰ª•HashMapÂØπÊ≠§ÂÅö‰∫Ü‰ºòÂåñ‰ΩøÁî® <strong>hash&amp;length-1</strong>ÔºåËÄåÂÆûÈôÖ hash%length Á≠â‰∫é hash&amp;(length-1) ÁöÑ<strong>ÂâçÊèêÊòØlengthÊòØ2ÁöÑnÊ¨°ÂπÇ</strong>„ÄÇ</p>
<blockquote>
<h4 id="‰∏∫‰ªÄ‰πàÈÄöËøáÂèñÊ®°ËøêÁÆóÔºàhash-amp-length-1ÔºâËÉΩÂ§üÂùáÂåÄÂàÜÂ∏ÉÂáèÂ∞ëÁ¢∞ÊíûÂë¢Ôºü‰∏∫‰ªÄ‰πàÊòØ2ÁöÑnÊ¨°ÂπÇÔºü"><a href="#‰∏∫‰ªÄ‰πàÈÄöËøáÂèñÊ®°ËøêÁÆóÔºàhash-amp-length-1ÔºâËÉΩÂ§üÂùáÂåÄÂàÜÂ∏ÉÂáèÂ∞ëÁ¢∞ÊíûÂë¢Ôºü‰∏∫‰ªÄ‰πàÊòØ2ÁöÑnÊ¨°ÂπÇÔºü" class="headerlink" title="‰∏∫‰ªÄ‰πàÈÄöËøáÂèñÊ®°ËøêÁÆóÔºàhash&amp;length-1ÔºâËÉΩÂ§üÂùáÂåÄÂàÜÂ∏ÉÂáèÂ∞ëÁ¢∞ÊíûÂë¢Ôºü‰∏∫‰ªÄ‰πàÊòØ2ÁöÑnÊ¨°ÂπÇÔºü"></a>‰∏∫‰ªÄ‰πàÈÄöËøáÂèñÊ®°ËøêÁÆóÔºàhash&amp;length-1ÔºâËÉΩÂ§üÂùáÂåÄÂàÜÂ∏ÉÂáèÂ∞ëÁ¢∞ÊíûÂë¢Ôºü‰∏∫‰ªÄ‰πàÊòØ2ÁöÑnÊ¨°ÂπÇÔºü</h4></blockquote>
<p>2^n ÁöÑ‰∫åËøõÂà∂ÂÆûÈôÖ‰∏äÂ∞±ÊòØ100‚Ä¶00Ôºå2^n - 1 ÁöÑ‰∫åËøõÂà∂ÂÆûÈôÖ‰∏äÂ∞±ÊòØ 111‚Ä¶11„ÄÇÊâÄ‰ª•length-1ÂÆûÈôÖ‰∏äÂ∞±ÊòØ 2^n-1ÔºåÂõ†‰∏∫hashÂÄºÂ§™Â§ß‰∫ÜÔºåÊâÄ‰ª•ÈúÄË¶ÅÈÄöËøáÂèñÊ®°Êù•ËÆ©ËÆ°ÁÆóÁªìÊûúÁº©Â∞èÂú®lengthÂ§ßÂ∞èÁöÑËåÉÂõ¥ÂÜÖ„ÄÇ</p>
<p>Â¶ÇÊûúÊï∞ÁªÑÈïøÂ∫¶‰∏çÊòØ2ÁöÑnÊ¨°ÂπÇÔºåÈÄöËøá hash&amp;length-1 ÁöÑ‰∏ãÊ†áÂæàÂÆπÊòìÁõ∏ÂêåÔºå<strong>Êòì‰∫ßÁîüÂìàÂ∏åÁ¢∞Êíû</strong>ÔºåÂØºËá¥Êï∞ÁªÑÁöÑÁ©∫Èó¥ÂæàÂ§ßÁ®ãÂ∫¶‰∏äÂπ∂Ê≤°ÊúâÂ≠òÂÇ®Êï∞ÊçÆÔºå<strong>Êµ™Ë¥πÊï∞ÁªÑÁ©∫Èó¥</strong>ÔºåÂØºËá¥Âçï‰∏™Ê°∂ÁöÑ<strong>ÈìæË°®ÊàñÁ∫¢ÈªëÊ†ëËøáÈïø</strong>ÔºåÊïàÁéáÈôç‰Ωé„ÄÇ</p>
<p><strong>Â¶ÇÊûúÊï∞ÁªÑÁöÑÈïøÂ∫¶ÊòØ2ÁöÑnÊ¨°ÂπÇ</strong></p>
 <figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">‰æãÂ¶ÇÂΩìÂâçhashÂÄº‰∏∫3ÔºåÊï∞ÁªÑÈïøÂ∫¶‰∏∫8ÔºàÂàô length-1=7Ôºâ</span><br><span class="line">3ÁöÑ‰∫åËøõÂà∂Ôºö0 0 0 0 0 0 1 1</span><br><span class="line">7ÁöÑ‰∫åËøõÂà∂Ôºö0 0 0 0 0 1 1 1</span><br><span class="line">‰∏éËøêÁÆóÁªìÊûúÔºö0 0 0 0 0 0 1 1 ÂçÅËøõÂà∂‰∏∫Ôºö3 Ôºà‰∏ãÊ†áÔºâ</span><br><span class="line"></span><br><span class="line">‰æãÂ¶ÇÂΩìÂâçhashÂÄº‰∏∫2ÔºåÊï∞ÁªÑÈïøÂ∫¶‰∏∫8ÔºàÂàô length-1=7Ôºâ</span><br><span class="line">2ÁöÑ‰∫åËøõÂà∂Ôºö0 0 0 0 0 0 1 0</span><br><span class="line">7ÁöÑ‰∫åËøõÂà∂Ôºö0 0 0 0 0 1 1 1</span><br><span class="line">&amp;ËøêÁÆóÁªìÊûúÔºö0 0 0 0 0 0 1 0 ÂçÅËøõÂà∂‰∏∫Ôºö2 Ôºà‰∏ãÊ†áÔºâ</span><br></pre></td></tr></tbody></table></figure>

<p><strong>Â¶ÇÊûúÊï∞ÁªÑÁöÑÈïøÂ∫¶‰∏çÊòØ2ÁöÑnÊ¨°ÂπÇ</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">‰æãÂ¶ÇÂΩìÂâçhashÂÄº‰∏∫3ÔºåÊï∞ÁªÑÈïøÂ∫¶‰∏∫9ÔºàÂàô length-1=8Ôºâ</span><br><span class="line">3ÁöÑ‰∫åËøõÂà∂Ôºö0 0 0 0 0 0 1 1</span><br><span class="line">8ÁöÑ‰∫åËøõÂà∂Ôºö0 0 0 0 1 0 0 0</span><br><span class="line">‰∏éËøêÁÆóÁªìÊûúÔºö0 0 0 0 0 0 0 0 ÂçÅËøõÂà∂‰∏∫Ôºö0 Ôºà‰∏ãÊ†áÔºâ</span><br><span class="line"></span><br><span class="line">‰æãÂ¶ÇÂΩìÂâçhashÂÄº‰∏∫2ÔºåÊï∞ÁªÑÈïøÂ∫¶‰∏∫9ÔºàÂàô length-1=8Ôºâ</span><br><span class="line">2ÁöÑ‰∫åËøõÂà∂Ôºö0 0 0 0 0 0 1 0</span><br><span class="line">7ÁöÑ‰∫åËøõÂà∂Ôºö0 0 0 0 0 1 1 1</span><br><span class="line">&amp;ËøêÁÆóÁªìÊûúÔºö0 0 0 0 0 0 1 0 ÂçÅËøõÂà∂‰∏∫Ôºö0 Ôºà‰∏ãÊ†áÔºâ</span><br></pre></td></tr></tbody></table></figure>

<p>ÂèëÁé∞‰∏Ä‰∏™ÈóÆÈ¢òÔºöÂ¶ÇÊûú‰∏çÊòØ2ÁöÑnÊ¨°ÂπÇÂæàÂÆπÊòìÂØºËá¥Â≠òÂÇ®Âà∞Êï∞ÁªÑÁöÑ‰∏ãÊ†á‰∏∫0„ÄÇ</p>
<blockquote>
<h4 id="Â¶ÇÊûúÂú®ÂàùÂßã-HashMap-Êó∂Ôºå‰º†ÂÖ•‰∏Ä‰∏™ÂàùÂßãÂÆπÈáè‰∏ç‰∏∫-2-ÁöÑ-n-Ê¨°ÂπÇ‰ºöÊÄé‰πàÊ†∑Ôºü"><a href="#Â¶ÇÊûúÂú®ÂàùÂßã-HashMap-Êó∂Ôºå‰º†ÂÖ•‰∏Ä‰∏™ÂàùÂßãÂÆπÈáè‰∏ç‰∏∫-2-ÁöÑ-n-Ê¨°ÂπÇ‰ºöÊÄé‰πàÊ†∑Ôºü" class="headerlink" title="Â¶ÇÊûúÂú®ÂàùÂßã HashMap Êó∂Ôºå‰º†ÂÖ•‰∏Ä‰∏™ÂàùÂßãÂÆπÈáè‰∏ç‰∏∫ 2 ÁöÑ n Ê¨°ÂπÇ‰ºöÊÄé‰πàÊ†∑Ôºü"></a>Â¶ÇÊûúÂú®ÂàùÂßã HashMap Êó∂Ôºå‰º†ÂÖ•‰∏Ä‰∏™ÂàùÂßãÂÆπÈáè‰∏ç‰∏∫ 2 ÁöÑ n Ê¨°ÂπÇ‰ºöÊÄé‰πàÊ†∑Ôºü</h4></blockquote>
<p>‰ºöÊâæ‰∏Ä‰∏™ÊØî‰Ω†‰º†ÂÖ•Ëøô‰∏™ÂÄºÂ§ßÁöÑ‰∏Ä‰∏™2ÁöÑnÊ¨°ÂπÇÔºå‰æãÂ¶Ç‰º†ÂÖ•7ÔºåÂàôÈªòËÆ§ÂàùÂßãÂÆπÈáè‰∏∫8Ôºõ‰º†ÂÖ•10ÔºåÂàôÂàùÂßãÂÆπÈáè‰∏∫16„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ÂΩì cap ‰º†ÂÖ• 10 Êó∂</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">tableSizeFor</span><span class="params">(<span class="type">int</span> cap)</span> {</span><br><span class="line">    <span class="comment">// cap-1 ÊòØ‰∏∫‰∫ÜÈÅøÂÖç‰º†ÂÖ•ÁöÑÂÄºÂ∞±ÊòØ2ÁöÑnÊ¨°ÂπÇ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> cap - <span class="number">1</span>; <span class="comment">// n=9Ôºå9ÁöÑ‰∫åËøõÂà∂Ôºö0000 1001</span></span><br><span class="line">     <span class="comment">// 9ÂêëÂè≥Áßª1‰ΩçÔºö0 0 0 0 0 1 0 0 ÂÜçÂíånËøõË°åÊàñËøêÁÆó 0000 1101</span></span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">1</span>; <span class="comment">// n=13</span></span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">2</span>; <span class="comment">// n=15</span></span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">4</span>; <span class="comment">// n=15ÔºåÊ≠§Êó∂Âú®ÂæÄÂêéËøêÁÆóÂ∑≤ÁªèÊ≤°‰ΩúÁî®‰∫Ü</span></span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">8</span>; <span class="comment">// n=15</span></span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">16</span>;<span class="comment">// n=15</span></span><br><span class="line">    <span class="comment">// n&lt;0=false  n&gt;2^30=falseÔºåÊâÄ‰ª•Ëµ∞n+1 =15+1 ÁªìÊûú‰∏∫ 16</span></span><br><span class="line">    <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= <span class="number">1</span> &lt;&lt; <span class="number">30</span>) ? <span class="number">1</span> &lt;&lt; <span class="number">30</span> : ;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÖ∂ÂÆûÂà∞ËøôÈáåÂèëÁé∞ËßÑÂæã‰∫ÜÔºåÂú®ÊÉ≥ÂäûÊ≥ïËÆ©ÂêÑ‰∏™‰Ωç‰∏äÁöÑÂÄºÂèòÊàê1ÔºåÂç∞ËØÅ‰∫ÜËßÑÂæãÔºö 2^n - 1 ÁöÑ‰∫åËøõÂà∂ÂÆûÈôÖ‰∏äÂ∞±ÊòØ 111‚Ä¶11ÔºåÂú®ÊúÄÂêéÂú®Âä†‰∏™1Â∞±ÂèòÊàê‰∫Ü2ÁöÑnÊ¨°ÂπÇ„ÄÇ</p>
<h3 id="Ë¥üËΩΩÂõ†Â≠ê"><a href="#Ë¥üËΩΩÂõ†Â≠ê" class="headerlink" title="Ë¥üËΩΩÂõ†Â≠ê"></a>Ë¥üËΩΩÂõ†Â≠ê</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ÈªòËÆ§ÁöÑË¥üËΩΩÂõ†Â≠êÂ§ßÂ∞è‰∏∫ 0.75f</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">float</span> <span class="variable">DEFAULT_LOAD_FACTOR</span> <span class="operator">=</span> <span class="number">0.75f</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>ÂΩìÊï∞ÁªÑÁöÑÁöÑÂ§ßÂ∞èË∂ÖËøá‰∏¥ÁïåÂÄºÊòØÂ∞±‰ºöÊâ©ÂÆπÔºåthresholdÔºà‰∏¥ÁïåÂÄºÔºâ= capacityÔºàÂΩìÂâçÂÆπÈáèÔºâ * loadFactorÔºàË¥üËΩΩÂõ†Â≠êÔºâ„ÄÇ</p>
<h3 id="ÈìæË°®Ê†ëÂåñÁöÑÊúÄÂ∞èËäÇÁÇπÊï∞"><a href="#ÈìæË°®Ê†ëÂåñÁöÑÊúÄÂ∞èËäÇÁÇπÊï∞" class="headerlink" title="ÈìæË°®Ê†ëÂåñÁöÑÊúÄÂ∞èËäÇÁÇπÊï∞"></a>ÈìæË°®Ê†ëÂåñÁöÑÊúÄÂ∞èËäÇÁÇπÊï∞</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÂΩìÈìæË°®ÁöÑËäÇÁÇπÊï∞Ë∂ÖËøá 8 ÂêéÔºåÈìæË°®ËΩ¨Á∫¢ÈªëÊ†ë</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TREEIFY_THRESHOLD</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÂΩìÈìæË°®ËäÇÁÇπÊï∞Â∞è‰∫é 6 Êó∂ÔºåÊ†ëËΩ¨ÈìæË°®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">UNTREEIFY_THRESHOLD</span> <span class="operator">=</span> <span class="number">6</span>;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<h4 id="‰∏∫‰ªÄ‰πàÊ°∂ÈáåÈù¢ÁöÑËäÇÁÇπÊï∞ÔºàÈìæË°®ËäÇÁÇπÊï∞ÔºâË∂ÖËøá8ÂêéÊâçËΩ¨‰∏∫Á∫¢ÈªëÊ†ëÔºü"><a href="#‰∏∫‰ªÄ‰πàÊ°∂ÈáåÈù¢ÁöÑËäÇÁÇπÊï∞ÔºàÈìæË°®ËäÇÁÇπÊï∞ÔºâË∂ÖËøá8ÂêéÊâçËΩ¨‰∏∫Á∫¢ÈªëÊ†ëÔºü" class="headerlink" title="‰∏∫‰ªÄ‰πàÊ°∂ÈáåÈù¢ÁöÑËäÇÁÇπÊï∞ÔºàÈìæË°®ËäÇÁÇπÊï∞ÔºâË∂ÖËøá8ÂêéÊâçËΩ¨‰∏∫Á∫¢ÈªëÊ†ëÔºü"></a>‰∏∫‰ªÄ‰πàÊ°∂ÈáåÈù¢ÁöÑËäÇÁÇπÊï∞ÔºàÈìæË°®ËäÇÁÇπÊï∞ÔºâË∂ÖËøá8ÂêéÊâçËΩ¨‰∏∫Á∫¢ÈªëÊ†ëÔºü</h4><p>Êç¢‰∏™ÊèêÈóÆÂßøÂäøÔºöHashMapÁöÑÊ†ëÂåñÈó®Êßõ‰∏∫‰ªÄ‰πàÊòØ8Ôºü</p>
</blockquote>
<p><strong>‰ªéËÆæËÆ°ËÄÖÊÄùÊÉ≥ËÄÉËôë</strong></p>
<p>Âá∫‰∫éÂØπÁ©∫Èó¥ÂíåÊó∂Èó¥ÁöÑÊùÉË°°ÔºåÂõ†‰∏∫Ê†ëËäÇÁÇπÁöÑÂ§ßÂ∞èÁ∫¶ÊòØÊôÆÈÄöËäÇÁÇπÁöÑ‰∏§ÂÄçÔºåÊâÄ‰ª•Êàë‰ª¨Âè™Âú®ÂåÖÂê´‰∫ÜË∂≥Â§üÂ§öËäÇÁÇπÁöÑÊ°∂Èáå‰ΩøÁî®Ê†ëËäÇÁÇπ„ÄÇÂΩìÂÆÉ‰ª¨ÂèòÂæóÂ§™Â∞èÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöË¢´ËΩ¨Êç¢‰∏∫ÊôÆÈÄöÁöÑÈìæË°®„ÄÇÂú®‰ΩøÁî®ÂàÜÂ∏ÉËâØÂ•ΩÁöÑhashCodeÊó∂ÔºåÂæàÂ∞ë‰ºö‰ΩøÁî®Ê†ëËäÇÁÇπ„ÄÇÁêÜÊÉ≥Áä∂ÊÄÅ‰∏ãÔºåÂú®ÈöèÊú∫ÂìàÂ∏åÁ†Å‰∏ãÔºåÁÆ±Â≠ê‰∏≠ËäÇÁÇπÁöÑÈ¢ëÁéáÊúç‰ªéÊ≥äÊùæÂàÜÂ∏É„ÄÇ</p>
<p><strong>‰ªéÊü•ËØ¢ÊïàÁéáËÄÉËôë</strong></p>
<p>Á∫¢ÈªëÊ†ëÁöÑÂπ≥ÂùáÊü•ÊâæÈïøÂ∫¶ÊòØlog(n)ÔºåÂ¶ÇÊûúÈïøÂ∫¶‰∏∫8ÔºåÂπ≥ÂùáÊü•ÊâæÈïøÂ∫¶‰∏∫log(8)=3ÔºåÈìæË°®ÁöÑÂπ≥ÂùáÊü•ÊâæÈïøÂ∫¶‰∏∫n/2ÔºåÂΩìÈïøÂ∫¶‰∏∫8Êó∂ÔºåÂπ≥ÂùáÊü•ÊâæÈïøÂ∫¶‰∏∫8/2=4ÔºåÁ∫¢ÈªëÊ†ëÁöÑÊü•ÊâæÊïàÁéáÊõ¥È´òÔºåËøôÊâçÊúâËΩ¨Êç¢ÊàêÊ†ëÁöÑÂøÖË¶ÅÔºõ<br>ÈìæË°®ÈïøÂ∫¶Â¶ÇÊûúÊòØÂ∞è‰∫éÁ≠â‰∫é6Ôºå6/2=3ÔºåËÄålog(6)=2.6ÔºåËôΩÁÑ∂ÈÄüÂ∫¶‰πüÂæàÂø´ÁöÑÔºå‰ΩÜÊòØËΩ¨Âåñ‰∏∫Ê†ëÁªìÊûÑÂíåÁîüÊàêÊ†ëÁöÑÊó∂Èó¥Âπ∂‰∏ç‰ºöÂ§™Áü≠„ÄÇ</p>
<p>ÔºàÂΩìn=6Êó∂Ôºå6/2=3 &gt; log(6)Êª°Ë∂≥ËΩ¨ÊàêÁ∫¢ÈªëÊ†ëË¶ÅÊ±ÇÔºå‰ΩÜÊòØÂ¶ÇÊûúËΩ¨‰∏∫Á∫¢ÈªëÊ†ëÂêéÔºåÂà†Èô§‰∏Ä‰∏™ËäÇÁÇπÔºåÁ∫¢ÈªëÊ†ëÈúÄË¶Å‰∏ÄÁ≥ªÂàóÊìç‰ΩúÊù•‰øùÊåÅÂπ≥Ë°°ÔºåÊïàÁéáÂèçËÄåÊõ¥‰Ωé‰∫ÜÔºâ</p>
<h3 id="ÈìæË°®Ê†ëÂåñÊï∞ÁªÑÁöÑÊúÄÂ∞èÂÆπÈáè"><a href="#ÈìæË°®Ê†ëÂåñÊï∞ÁªÑÁöÑÊúÄÂ∞èÂÆπÈáè" class="headerlink" title="ÈìæË°®Ê†ëÂåñÊï∞ÁªÑÁöÑÊúÄÂ∞èÂÆπÈáè"></a>ÈìæË°®Ê†ëÂåñÊï∞ÁªÑÁöÑÊúÄÂ∞èÂÆπÈáè</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The smallest table capacity for which bins may be treeified.</span></span><br><span class="line"><span class="comment"> * (Otherwise the table is resized if too many nodes in a bin.)</span></span><br><span class="line"><span class="comment"> * Should be at least 4 * TREEIFY_THRESHOLD to avoid conflicts</span></span><br><span class="line"><span class="comment"> * between resizing and treeification thresholds.</span></span><br><span class="line"><span class="comment"> * ÂΩìÊï∞ÁªÑÁöÑÈïøÂ∫¶Â§ß‰∫é64ÂêéÊâç‰ºöÊ†ëÂåñ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MIN_TREEIFY_CAPACITY</span> <span class="operator">=</span> <span class="number">64</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>ÈìæË°®Ê†ëÂåñÁöÑ‰∏§‰∏™Êù°‰ª∂ÔºöÂçï‰∏™Ê°∂ÂÜÖÁöÑÈìæË°®ËäÇÁÇπÊï∞Â§ß‰∫é8Âπ∂‰∏îÊï∞ÁªÑÂÆπÈáèÂ§ß‰∫é64Ôºõ</p>
<h2 id="Â±ûÊÄß"><a href="#Â±ûÊÄß" class="headerlink" title="Â±ûÊÄß"></a>Â±ûÊÄß</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HashMapÁöÑÊï∞ÁªÑ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Áî®‰∫éÁºìÂ≠òÂÖ∑‰ΩìÂÖÉÁ¥†ÁöÑÈõÜÂêà</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The number of key-value mappings contained in this map.</span></span><br><span class="line"><span class="comment"> * HashMap‰∏≠ÁöÑÂÆûÊó∂ÂÆπÈáèÔºåÈùûÊï∞ÁªÑÈïøÂ∫¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> <span class="type">int</span> size;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÊØèÊ¨°Êâ©ÂÆπÂíåÊõ¥ÊîπMapÁªìÊûÑÁöÑËÆ°Êï∞Âô®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> <span class="type">int</span> modCount;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÈòàÂÄºÔºà‰∏¥ÁïåÂÄºÔºâÔºåÂΩìÂÆûÈôÖÂ§ßÂ∞èÔºàÊï∞ÁªÑÂÆπÈáè*Ë¥üËΩΩÂõ†Â≠êÔºâË∂ÖËøá‰∏¥ÁïåÂÄºÊó∂Ôºå‰ºöËøõË°åÊâ©ÂÆπ</span></span><br><span class="line"><span class="comment"> * ÈªòËÆ§ÂàùÂßãÂåñ size=16(DEFAULT_INITIAL_CAPACITY)*0.75(DEFAULT_LOAD_FACTOR)=12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> threshold;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë¥üËΩΩÂõ†Â≠ê„ÄÇ0Âà∞1ËåÉÂõ¥ÂèñÂÄºÔºåÁî®‰∫éË°°ÈáèHashMapÊª°ÁöÑÁ®ãÂ∫¶ÔºåÂÄºË∂äÂ∞èHashMapË∂äÁ®ÄÁñèÔºåÂΩ±ÂìçHashÊìç‰ΩúÂà∞</span></span><br><span class="line"><span class="comment"> * ‰∏Ä‰∏™Êï∞ÁªÑ‰ΩçÁΩÆÁöÑÊ¶ÇÁéáÔºåËÆ°ÁÆó HashMap ÁöÑÂÆûÊó∂Âä†ËΩΩÂõ†Â≠êÁöÑÊñπÊ≥ï‰∏∫ÔºösizeÔºàÂÆûÊó∂EntryÂ§ßÂ∞èÔºâ/capacityÔºàÊ°∂ÁöÑÂÆπÈáèÔºâÔºåËÄå‰∏çÊòØÂç†Áî®Ê°∂ÁöÑÊï∞ÈáèÂéªÈô§‰ª•capacity</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">final</span> <span class="type">float</span> loadFactor;</span><br></pre></td></tr></tbody></table></figure>

<p>Âº∫Ë∞É‰∏Ä‰∏ãÈùûÂ∏∏ÈáçË¶ÅÁöÑÂ±ûÊÄß loadFactor„ÄÇ</p>
<p>loadFactor Â§™Â§ß‰ºöÂØºËá¥Êü•ÊâæÊïàÁéá‰ΩéÔºåÂ§™Â∞èÂèà‰ºöÂØºËá¥Êï∞ÁªÑÂà©Áî®Áéá‰ΩéÔºåÂ≠òÊîæÁöÑÊï∞ÊçÆ‰ºöÂæàÂàÜÊï£ÔºåloadFactorÈªòËÆ§ÁöÑ0.75f ÊòØÂÆòÊñπÁªèËøáÂ§ßÈáèÂÆûÈ™åÁªôÂá∫ÁöÑ‰∏Ä‰∏™ÊØîËæÉÂ•ΩÁöÑ‰∏¥ÁïåÂÄº„ÄÇÂΩìÊï∞ÁªÑÁöÑÈïøÂ∫¶ËææÂà∞75%Êó∂ÔºåË°®Á§∫HashMapÂ§™Êå§‰∫ÜÔºåÈúÄË¶ÅÊâ©ÂÆπÔºåËÄåÊâ©ÂÆπÈúÄË¶Å rehash„ÄÅÂ§çÂà∂Êï∞ÊçÆÁ≠âÊìç‰ΩúÔºåÈùûÂ∏∏Ê∂àËÄóÊÄßËÉΩ„ÄÇÊâÄ‰ª•ÂºÄÂèë‰∏≠Â∞ΩÈáèÂáèÂ∞ëÊâ©ÂÆπÊ¨°Êï∞ÔºåÂèØ‰ª•ÈÄöËøáÂàõÂª∫HashMapÊó∂ÊåáÂÆöÂàùÂßãÂÆπÈáèÊù•Â∞ΩÈáèÈÅøÂÖç„ÄÇ</p>
<blockquote>
<p>‰∏∫‰ªÄ‰πà loadFactor = 0.75f ‰∏çÂª∫ËÆÆ‰øÆÊîπÔºü</p>
</blockquote>
<p>thresholdÔºàÈòàÂÄºÔºâ = capacity * 0.75ÔºåÈªòËÆ§ÂàùÂßãÂåñÂêéÈòàÂÄº‰∏∫12„ÄÇ</p>
<p>ÂΩìÂàùÂßãloadFactorÂ§™Â∞èÔºåÂ¶Ç loadFactor=0.4Êó∂ÔºåÈÇ£‰πàËÆ°ÁÆóÂá∫ÁöÑÈòàÂÄº 16*0.4=6ÔºåÊ≠§Êó∂ÁöÑÊï∞ÁªÑÈïøÂ∫¶‰∏∫16ÔºåËææÂà∞6‰∏™ÂÆπÈáèÂêéÂ∞±‰ºöÊâ©ÂÆπÔºåÂØºËá¥Âè¶Â§ñÁöÑ10‰∏™Á©∫Èó¥Êµ™Ë¥π„ÄÅÊâ©ÂÆπÈáçÊñ∞ËÆ°ÁÆóhashÂíåÂ§çÂà∂Êï∞ÊçÆ„ÄÇ</p>
<p>ÂΩìÂàùÂßãloadFactorÂ§™Â§ßÔºåÂ¶ÇloadFactor=0.9Êó∂ÔºåÈÇ£‰πàËÆ°ÁÆóÂá∫ÈòàÂÄº‰∏∫14ÔºåËÆ©Êï∞ÁªÑÁöÑÁ©∫Èó¥ÂÖÖÂàÜÂà©Áî®ÊòØÂæàÈöæÁöÑÔºåÈòàÂÄºËøáÂ§ß‰ºöÂØºËá¥Â¢ûÂ§ßÊØè‰∏™Ê°∂ÈáåËäÇÁÇπÈùûÂ∏∏Â§öÁöÑÊ¶ÇÁéáÔºåÂΩìÊï∞ÁªÑÈïøÂ∫¶Â§ß‰∫é64ËäÇÁÇπÈïøÂ∫¶Â§ß‰∫é8‰πãÂêéÊ†ëÂåñÔºåÁ∫¢ÈªëÊ†ë‰∏çÊñ≠ËøõË°å‰øùÊåÅÂπ≥Ë°°ÁöÑÊìç‰ΩúÔºåÂØºËá¥ÊïàÁéáÂèçËÄåÊõ¥‰Ωé„ÄÇ</p>
<h2 id="ÊûÑÈÄ†ÊñπÊ≥ï"><a href="#ÊûÑÈÄ†ÊñπÊ≥ï" class="headerlink" title="ÊûÑÈÄ†ÊñπÊ≥ï"></a>ÊûÑÈÄ†ÊñπÊ≥ï</h2><p><strong>HashMap()</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">()</span> {</span><br><span class="line">   <span class="comment">// Â∞ÜÈªòËÆ§ÁöÑË¥üËΩΩÂõ†Â≠ê0.75ËµãÂÄºÁªôloadFactorÔºåÂπ∂Ê≤°ÊúâÂàõÂª∫Êï∞ÁªÑ</span></span><br><span class="line">   <span class="built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>HashMap(int initialCapacity, float loadFactor)</strong></p>
<p>ÊûÑÈÄ†‰∏Ä‰∏™ÂÖ∑ÊúâÊåáÂÆöÁöÑÂàùÂßãÂÆπÈáèÂíåÈªòËÆ§Ë¥üËΩΩÂõ†Â≠êÔºà0.75ÔºâHashMap „ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">float</span> loadFactor)</span> {</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">"Illegal initial capacity: "</span> +</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">        initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">    <span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">"Illegal load factor: "</span> +</span><br><span class="line">                                           loadFactor);</span><br><span class="line">    <span class="built_in">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="comment">// ‰∏ãÈù¢ËøôË°åÊåâÁêÜÂ∫îËØ•ÊòØ threshold=tableSizeFor(initialCapacity)*loadFactor</span></span><br><span class="line">    <span class="comment">// ‰ΩÜËøô‰∏çÊòØBUGÔºåÂú® put ÊñπÊ≥ï‰∏≠‰ºöÂØπÈòàÂÄºËøõË°å‰øÆÊîπ</span></span><br><span class="line">    <span class="built_in">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>HashMap(Map&lt;? extends K, ? extends V&gt; m)</strong></p>
<p>ÂåÖÂê´Âè¶‰∏Ä‰∏™ Map ÁöÑÊûÑÈÄ†ÂáΩÊï∞</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ÊûÑÈÄ†‰∏Ä‰∏™Êò†Â∞ÑÂÖ≥Á≥ª‰∏éÊåáÂÆö Map Áõ∏ÂêåÁöÑÊñ∞ HashMap</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m)</span> {</span><br><span class="line">    <span class="built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR;</span><br><span class="line">    putMapEntries(m, <span class="literal">false</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">putMapEntries</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m, <span class="type">boolean</span> evict)</span> {</span><br><span class="line">    <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> m.size();</span><br><span class="line">    <span class="keyword">if</span> (s &gt; <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">if</span> (table == <span class="literal">null</span>) {</span><br><span class="line">            <span class="comment">// ‰∏ãÈù¢ÂçïÁã¨ËÆ≤Ëøô‰∏ÄË°å</span></span><br><span class="line">            <span class="type">float</span> <span class="variable">ft</span> <span class="operator">=</span> ((<span class="type">float</span>)s / loadFactor) + <span class="number">1.0F</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> ((ft &lt; (<span class="type">float</span>)MAXIMUM_CAPACITY) ?</span><br><span class="line">                     (<span class="type">int</span>)ft : MAXIMUM_CAPACITY);</span><br><span class="line">            <span class="comment">// threshold=0</span></span><br><span class="line">            <span class="keyword">if</span> (t &gt; threshold)</span><br><span class="line">                <span class="comment">// ÂàùÂßãÈòàÂÄº(threshold)</span></span><br><span class="line">                threshold = tableSizeFor(t);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s &gt; threshold)</span><br><span class="line">            resize();</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;? <span class="keyword">extends</span> <span class="title class_">K</span>, ? <span class="keyword">extends</span> <span class="title class_">V</span>&gt; e : m.entrySet()) {</span><br><span class="line">            <span class="type">K</span> <span class="variable">key</span> <span class="operator">=</span> e.getKey();</span><br><span class="line">            <span class="type">V</span> <span class="variable">value</span> <span class="operator">=</span> e.getValue();</span><br><span class="line">            putVal(hash(key), key, value, <span class="literal">false</span>, evict);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ‰∏∫‰ªÄ‰πàË¶ÅÂä† 1.0FÔºü</span></span><br><span class="line"><span class="type">float</span> <span class="variable">ft</span> <span class="operator">=</span> ((<span class="type">float</span>)s / loadFactor) + <span class="number">1.0F</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>s/loadFactor ÁöÑÁªìÊûúÊòØÂ∞èÊï∞ÔºåÂä† 1.0F ‰∏é (int)ft Áõ∏ÂΩì‰∫éÊòØÂØπÂ∞èÊï∞ÂÅö‰∏Ä‰∏™Âêë‰∏äÂèñÊï¥‰ª•Â∞ΩÂèØËÉΩÁöÑ‰øùËØÅÊõ¥Â§ßÂÆπÈáèÔºåÊõ¥Â§ßÁöÑÂÆπÈáèËÉΩÂ§üÂáèÂ∞ë resize ÁöÑË∞ÉÁî®Ê¨°Êï∞„ÄÇÊâÄ‰ª• + 1.0F ÊòØ‰∏∫‰∫ÜËé∑ÂèñÊõ¥Â§ßÁöÑÂÆπÈáè„ÄÇ</p>
<p>‰æãÂ¶ÇÔºöÂéüÊù•ÈõÜÂêàÁöÑÂÖÉÁ¥†‰∏™Êï∞ÊòØ 6 ‰∏™ÔºåÈÇ£‰πà ft = 6/0.75=8ÔºåÊòØ 2 ÁöÑnÊ¨°ÂπÇÔºåÈÇ£‰πàÊñ∞Êï∞ÁªÑÂ§ßÂ∞èÂ∞±ÊòØ 8 ‰∫Ü„ÄÇÁÑ∂ÂêéÂéüÊù•Êï∞ÁªÑÁöÑÊï∞ÊçÆÂ∞±‰ºöÂ≠òÂÇ®Âà∞ÈïøÂ∫¶ÊòØ 8 ÁöÑÊñ∞Êï∞ÁªÑ‰∏≠ÔºåËøôÊ†∑‰ºöÂØºËá¥Âú®Â≠òÂÇ®ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÔºåÂÆπÈáè‰∏çÂ§üÔºåËøòÂæóÁªßÁª≠Êâ©ÂÆπÔºåÈÇ£‰πàÊÄßËÉΩÈôç‰Ωé‰∫ÜÔºåËÄåÂ¶ÇÊûú +1 Âë¢ÔºåÊï∞ÁªÑÈïøÂ∫¶Áõ¥Êé•Âèò‰∏∫16‰∫ÜÔºåËøôÊ†∑ÂèØ‰ª•ÂáèÂ∞ëÊï∞ÁªÑÁöÑÊâ©ÂÆπ„ÄÇ</p>
<h2 id="ÊàêÂëòÊñπÊ≥ï"><a href="#ÊàêÂëòÊñπÊ≥ï" class="headerlink" title="ÊàêÂëòÊñπÊ≥ï"></a>ÊàêÂëòÊñπÊ≥ï</h2><p> <strong>put()</strong></p>
<p>ÂÆûÁé∞Ê≠•È™§Ôºö</p>
<p>1„ÄÅÂÖàÈÄöËøá hash ÂÄºËÆ°ÁÆóÂá∫ key Êò†Â∞ÑÂà∞Âì™‰∏™Ê°∂Ôºõ</p>
<p>2„ÄÅÂ¶ÇÊûúÊ°∂‰∏äÊ≤°ÊúâÁ¢∞ÊíûÂÜ≤Á™ÅÔºåÂàôÁõ¥Êé•ÊèíÂÖ•Ôºõ</p>
<p>3„ÄÅÂ¶ÇÊûúÂá∫Áé∞Á¢∞ÊíûÂÜ≤Á™Å‰∫ÜÔºåÂàôÈúÄË¶ÅÂ§ÑÁêÜÂÜ≤Á™ÅÔºö</p>
<ul>
<li><p>a Â¶ÇÊûúËØ•Ê°∂‰ΩøÁî®Á∫¢ÈªëÊ†ëÂ§ÑÁêÜÂÜ≤Á™ÅÔºåÂàôË∞ÉÁî®Á∫¢ÈªëÊ†ëÁöÑÊñπÊ≥ïÊèíÂÖ•Êï∞ÊçÆÔºõ</p>
</li>
<li><p>b Âê¶ÂàôÈááÁî®‰º†ÁªüÁöÑÈìæÂºèÊñπÊ≥ïÊèíÂÖ•„ÄÇÂ¶ÇÊûúÈìæÁöÑÈïøÂ∫¶ËææÂà∞‰∏¥ÁïåÂÄºÔºåÂàôÊääÈìæËΩ¨Âèò‰∏∫Á∫¢ÈªëÊ†ëÔºõ</p>
</li>
</ul>
<p>4„ÄÅÂ¶ÇÊûúÊ°∂‰∏≠Â≠òÂú®ÈáçÂ§çÁöÑÈîÆÔºåÂàô‰∏∫ËØ•ÈîÆÊõøÊç¢Êñ∞ÂÄº valueÔºõ</p>
<p>5„ÄÅÂ¶ÇÊûú size Â§ß‰∫éÈòàÂÄº thresholdÔºåÂàôËøõË°åÊâ©ÂÆπÔºõ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> {</span><br><span class="line">	<span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// Âú®HashMap‰∏≠Ôºåkey Âíå value ÊòØÂÖÅËÆ∏‰∏∫ null ÁöÑ</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> {</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="comment">/** Â¶ÇÊûúkey‰∏∫nullÔºåÂàôËøîÂõûhashÂÄº‰∏∫0</span></span><br><span class="line"><span class="comment">     * Â¶ÇÊûú‰∏ç‰∏∫nullÔºåÈ¶ñÂÖàËÆ°ÁÆóÂá∫keyÁöÑhashCodeËµãÂÄºÁªôhÔºå</span></span><br><span class="line"><span class="comment">     * ÁÑ∂Âêé‰∏éhÊó†Á¨¶Âè∑Âè≥Áßª16‰ΩçÔºà‰∏∫‰∫ÜÂà†Èô§È´ò‰ΩçÔºå‰øùËØÅ‰ªª‰ΩïÂìàÂ∏åÂÄºÈÉΩËÉΩÂèòÂ∞èÔºâÂêéÁöÑ‰∫åËøõÂà∂ËøõË°åÊåâ‰ΩçÂºÇÊàñÂæóÂà∞ÊúÄÂêéÁöÑhashÂÄº</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Implements Map.put and related methods</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> hash hash for key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key the key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value the value to put</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> onlyIfAbsent if true, don't change existing value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> evict if false, the table is in creation mode.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> previous value, or null if none</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">               <span class="type">boolean</span> evict)</span> {</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="type">int</span> n, i;</span><br><span class="line">    <span class="comment">// ÂàùÊ¨°Ë∞ÉÁî®putValÊñπÊ≥ïÊó∂this.tableÊòØnullÔºåÂú®resizeÊñπÊ≥ï‰∏≠ÂàùÂßãÂåñÈòàÂÄºÔºåËøîÂõûÈáçÊñ∞ÂàõÂª∫ÁöÑÊï∞ÁªÑ</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="comment">// ÈÄöËøái = (n - 1) &amp; hash ËÆ°ÁÆóÂá∫ÊîæÂÖ•Êï∞ÁªÑÁöÑ‰∏ãÊ†áÔºåÊää table[i] ÁöÑÊ°∂ËµãÂÄºÁªô p</span></span><br><span class="line">    <span class="comment">// Â¶ÇÊûúÊï∞ÁªÑ‰∏≠Âú®iÁöÑ‰ΩçÁΩÆÊòØÂê¶‰∏∫Á©∫</span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)</span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// Â¶ÇÊûúÂú®table[i]ÁöÑ‰ΩçÁΩÆ‰∏äÊ°∂ÈáåÊúâËäÇÁÇπ</span></span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="comment">// pÂ∞±ÊòØÊï∞ÁªÑ‰∏äÁ¨¨i‰∏™Ê°∂(p=table[i])ÔºåÁÑ∂ÂêéÊØîËæÉ‰∏§‰∏™keyÁöÑÂìàÂ∏åÂÄºÂíåÂºïÁî®Âú∞ÂùÄÊòØÂê¶Áõ∏Âêå</span></span><br><span class="line">        <span class="comment">// ËøôÈáåÁöÑÂ§ö‰∏™Âà§Êñ≠ÊòØ‰∏∫‰∫ÜÈÅøÂÖçÂìàÂ∏åÂÄº‰∏ÄÊ†∑Ôºåkey‰∏ç‰∏ÄÊ†∑ÁöÑÊÉÖÂÜµ</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        <span class="comment">// Â¶ÇÊûú‰∏§‰∏™key‰∏çÁõ∏ÂêåÔºåÂàôÂà§Êñ≠ÂΩìÂâçÊ°∂‰∏≠ÊòØ‰∏çÊòØÊ†ë</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode) </span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="built_in">this</span>, tab, hash, key, value);</span><br><span class="line">        <span class="comment">// ‰∏§‰∏™key‰∏çÁõ∏ÂêåÔºå‰∏çÊòØÊ†ëÔºåÈÇ£‰πàÊ°∂ÈáåÂ∞±ÊòØÈìæË°®</span></span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            <span class="comment">// binCount Ë°®Á§∫ÊòØÂΩìÂâçÈìæË°®‰∏≠ÁöÑÁ¨¨binCount‰∏™ËäÇÁÇπ</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">binCount</span> <span class="operator">=</span> <span class="number">0</span>; ; ++binCount) {</span><br><span class="line">                <span class="comment">// Âà§Êñ≠ÂΩìÂâçËäÇÁÇπÊòØ‰∏çÊòØÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÔºåÂ¶ÇÊûúÊòØÁöÑËØùÔºåÁõ¥Êé•ÂàíÂá∫‰∏Ä‰∏™Êñ∞ÁöÑËäÇÁÇπ</span></span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="literal">null</span>) {</span><br><span class="line">                    p.next = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">                    <span class="comment">// Ê†ëÂåñÁöÑÁ¨¨‰∏ÄË¶ÅÊ±ÇÔºöÈìæË°®ËäÇÁÇπÊï∞ÊòØÂê¶Âà∞ËææÊ†ëÂåñÈòàÂÄº</span></span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">  		       <span class="comment">// ËøôÈáåÁöÑÂà§Êñ≠ÊòØ‰∏∫‰∫ÜÂà§Êñ≠keyÊòØÂê¶ÂíåÂΩìÂâçÁ¨¨ binCount ‰∏™ËäÇÁÇπÁöÑkeyÁõ∏ÂêåÔºå</span></span><br><span class="line">                <span class="comment">// Â¶ÇÊûúÊèíÂÖ•ÁöÑkeyÂíåpÁöÑËøô‰∏™keyÁõ∏ÂêåÔºåÂàôÈÄÄÂá∫Âæ™ÁéØÔºåËØ¥ÊòéÂ∑≤ÁªèÊâæÂà∞‰∫ÜÈáçÂ§çÁöÑÂÄºÔºå</span></span><br><span class="line">                <span class="comment">// Ê≤°ÂøÖË¶ÅÂú®Êé•ÁùÄÂæÄ‰∏ãÈÅçÂéÜÂÆåÊâÄÊúâÁöÑËäÇÁÇπ</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">// Âêë‰∏ã‰∏Ä‰∏™ËäÇÁÇπÁßªÂä®ÊåáÈíà</span></span><br><span class="line">                p = e;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// ÂΩìÊèíÂÖ•keyÂíåÊ°∂‰∏≠ÁöÑ‰∏Ä‰∏™keyÁõ∏ÂêåÂêéÔºåe Â∞±ÊòØÈÄÄÂá∫Âæ™ÁéØ‰πãÂâçÊúÄÂêéÊåáÂêëÁöÑÈÇ£‰∏™ËäÇÁÇπ</span></span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) { <span class="comment">// existing mapping for key</span></span><br><span class="line">            <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    ++modCount;</span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<h4 id="‰∏∫‰ªÄ‰πàË¶ÅÈÄöËøá-n-1-amp-hash-ÂæóÂà∞‰∏ãÊ†áÔºü"><a href="#‰∏∫‰ªÄ‰πàË¶ÅÈÄöËøá-n-1-amp-hash-ÂæóÂà∞‰∏ãÊ†áÔºü" class="headerlink" title="‰∏∫‰ªÄ‰πàË¶ÅÈÄöËøá (n - 1) &amp; hash ÂæóÂà∞‰∏ãÊ†áÔºü"></a>‰∏∫‰ªÄ‰πàË¶ÅÈÄöËøá (n - 1) &amp; hash ÂæóÂà∞‰∏ãÊ†áÔºü</h4></blockquote>
<p>Ê≥®ÊÑèËøôÈáåÁöÑnÊòØÊï∞ÁªÑÁöÑÂÆπÈáèÂ§ßÂ∞èÔºåÊ≠§Â§ÑÁöÑ n-1 Áõ∏ÂΩì‰∫é 2ÁöÑnÊ¨°ÂπÇ-1Ôºå‰∫åËøõÂà∂Â∞±ÊòØn‰∏™1Ôºå‰∏éhashËøõË°å‰∏éËøêÁÆóÔºåÂèØ‰ª•‰øùËØÅËÆ°ÁÆóÂá∫Êù•ÁöÑ‰∏ãÊ†áÂú®Êï∞ÁªÑÂ§ßÂ∞èÁöÑËåÉÂõ¥ÂÜÖ„ÄÇ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ÂÅáËÆæÂ≠òÂÇ®ÁöÑkeyÊòØk1Ôºåk1.hashCode()=3366ÔºåÈÄöËøáhash()ËÆ°ÁÆóÂá∫hash=3366</span><br><span class="line">Â¶ÇÊûúnÂáèÂéª1Ôºö(n - 1) &amp; hash</span><br><span class="line">0000 0000 0000 0000 0000 0000 0000 1111   15</span><br><span class="line">0000 0000 0000 0000 0000 1101 0010 0110   15&amp;3366</span><br><span class="line">0000 0000 0000 0000 0000 0000 0000 0110   6  ‰∏ãÊ†á</span><br></pre></td></tr></tbody></table></figure>

<p>Â¶ÇÊûú n ‰∏çÂáè 1ÔºåÈ¶ñÂÖànÊòØ2ÁöÑnÊ¨°ÂπÇÔºå‰∫åËøõÂà∂ÊòØ‰∏Ä‰∏™1ÂêéÈù¢n‰∏™0Ôºå‰∏éhashËøõË°å‰∏éËøêÁÆóÔºåÂæàÂ§ßÊ¶ÇÁéá‰ºöÈÄ†ÊàêËÆ°ÁÆóÂá∫Êù•ÁöÑ‰∏ãÊ†áÈÉΩÊòØ0„ÄÇ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Â¶ÇÊûún‰∏çÂáè1Ôºön &amp; hash</span><br><span class="line">0000 0000 0000 0000 | 0000 0000 0001 0000  16</span><br><span class="line">0000 0000 0000 0000 | 0000 1101 0010 0110  16&amp;3366</span><br><span class="line">0000 0000 0000 0000 | 0000 0000 0000 0000  0   ‰∏ãÊ†á</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÈìæË°®Ê†ëÂåñ"><a href="#ÈìæË°®Ê†ëÂåñ" class="headerlink" title="ÈìæË°®Ê†ëÂåñ"></a>ÈìæË°®Ê†ëÂåñ</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">treeifyBin</span><span class="params">(Node&lt;K,V&gt;[] tab, <span class="type">int</span> hash)</span> {</span><br><span class="line">    <span class="type">int</span> n, index; Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="comment">// Ê†ëÂåñÁöÑÁ¨¨‰∫å‰∏™Ë¶ÅÊ±ÇÔºöÊï∞ÁªÑÈïøÂ∫¶ÊòØÂê¶ËææÂà∞64„ÄÇ</span></span><br><span class="line">    <span class="keyword">if</span> (tab == <span class="literal">null</span> || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY)</span><br><span class="line">         <span class="comment">// ËäÇÁÇπÊï∞Â§ß‰∫é8Ôºå‰ΩÜÊòØÊï∞ÁªÑÈïøÂ∫¶Ê≤°ÊúâËææÂà∞64ËøõË°åÊâ©ÂÆπÔºàÂÆπÈáèÊâ©Â§ß‰∏§ÂÄçÔºâ</span></span><br><span class="line">        resize();</span><br><span class="line">    <span class="comment">// e ÊòØ table[i] Ëøô‰∏™Ê°∂</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((e = tab[index = (n - <span class="number">1</span>) &amp; hash]) != <span class="literal">null</span>) {</span><br><span class="line">        <span class="comment">// ËÄÅÂ§ñÂëΩÂêçÔºöhdÊòØheadÔºåtlÊòØtail</span></span><br><span class="line">        TreeNode&lt;K,V&gt; hd = <span class="literal">null</span>, tl = <span class="literal">null</span>;</span><br><span class="line">         <span class="comment">// do while ÊääÈìæË°®ËäÇÁÇπÂ§ÑÁêÜÊàêÊ†ëËäÇÁÇπÁÑ∂ÂêéËøûËµ∑Êù•</span></span><br><span class="line">        <span class="keyword">do</span> {</span><br><span class="line">            TreeNode&lt;K,V&gt; p = replacementTreeNode(e, <span class="literal">null</span>);</span><br><span class="line">            <span class="keyword">if</span> (tl == <span class="literal">null</span>)</span><br><span class="line">                hd = p;</span><br><span class="line">            <span class="keyword">else</span> {</span><br><span class="line">                p.prev = tl;</span><br><span class="line">                tl.next = p;</span><br><span class="line">            }</span><br><span class="line">            tl = p;</span><br><span class="line">        } <span class="keyword">while</span> ((e = e.next) != <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">if</span> ((tab[index] = hd) != <span class="literal">null</span>)</span><br><span class="line">            <span class="comment">// ËÆ©Ê†ëÂπ≥Ë°°</span></span><br><span class="line">            hd.treeify(tab);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Êâ©ÂÆπ"><a href="#Êâ©ÂÆπ" class="headerlink" title="Êâ©ÂÆπ"></a>Êâ©ÂÆπ</h2><blockquote>
<h4 id="‰ªÄ‰πàÊó∂ÂÄôÊâ©ÂÆπÔºü"><a href="#‰ªÄ‰πàÊó∂ÂÄôÊâ©ÂÆπÔºü" class="headerlink" title="‰ªÄ‰πàÊó∂ÂÄôÊâ©ÂÆπÔºü"></a>‰ªÄ‰πàÊó∂ÂÄôÊâ©ÂÆπÔºü</h4></blockquote>
<p>ÂΩìHashMap‰∏≠ÂÖÉÁ¥†‰∏™Êï∞Ë∂ÖËøáÈòàÂÄºÔºàthreshold=capacityÔºàÊï∞ÁªÑÂÆπÈáèÔºâ*loadFactorÔºàÈªòËÆ§0.75ÔºâÊó∂Êâ©ÂÆπÔºåcapacity Êâ©Â§ßÂà∞2x16=32„ÄÇ</p>
<p>Êâ©ÂÆπÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ËÄóÊÄßËÉΩÁöÑÊìç‰ΩúÔºåÊâÄ‰ª•Â¶ÇÊûúÊàë‰ª¨ËÉΩÈ¢ÑÁü• HashMap‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ÔºåÈÇ£‰πàÈ¢ÑÁü•ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ËÉΩÂ§üÊúâÊïàÂú∞ÊèêÈ´òHashMapÁöÑÊÄßËÉΩ„ÄÇ</p>
<blockquote>
<h4 id="HashMapÁöÑÊâ©ÂÆπÊú∫Âà∂ÊòØ‰ªÄ‰πàÔºü"><a href="#HashMapÁöÑÊâ©ÂÆπÊú∫Âà∂ÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="HashMapÁöÑÊâ©ÂÆπÊú∫Âà∂ÊòØ‰ªÄ‰πàÔºü"></a>HashMapÁöÑÊâ©ÂÆπÊú∫Âà∂ÊòØ‰ªÄ‰πàÔºü</h4></blockquote>
<p>ËøõË°åÊâ©ÂÆπÔºå‰ºö‰º¥ÈöèÁùÄ‰∏ÄÊ¨°ÈáçÊñ∞ËÆ°ÁÆó hash ÂíåÊèíÂÖ•ÁöÑ‰∏ãÊ†áÔºåÂπ∂‰∏î‰ºöÈÅçÂéÜ hash Ë°®‰∏≠ÊâÄÊúâÁöÑÂÖÉÁ¥†ÔºåÊòØÈùûÂ∏∏ËÄóÊó∂ÁöÑ„ÄÇÂú®ÁºñÂÜôÁ®ãÂ∫è‰∏≠ÔºåË¶ÅÂ∞ΩÈáèÈÅøÂÖç resize„ÄÇ</p>
<p>HashMap Âú®ËøõË°åÊâ©ÂÆπÊó∂Ôºå‰ΩøÁî®ÁöÑ rehash ÊñπÂºèÈùûÂ∏∏Â∑ßÂ¶ôÔºåÂõ†‰∏∫ÊØèÊ¨°Êâ©ÂÆπÈÉΩÊòØÁøªÂÄçÔºå‰∏éÂéüÊù•ËÆ°ÁÆóÁöÑ (n - 1) &amp; hash ÁöÑÁªìÊûúÁõ∏ÊØîÔºåÂè™ÊòØÂ§ö‰∫Ü‰∏Ä‰∏™ bit ‰ΩçÔºåÊâÄ‰ª•Êñ∞ËäÇÁÇπË¶Å‰πàÂ∞±Âú®ÂéüÊù•ÁöÑ‰ΩçÁΩÆÔºåË¶Å‰πàÂ∞±Ë¢´ÂàÜÈÖçÂà∞ ‚ÄúÂéü‰ΩçÁΩÆ + ÊóßÂÆπÈáè‚Äù Ëøô‰∏™‰ΩçÁΩÆ„ÄÇ</p>
<p>ÈÄöËøá (n-1)&amp;hash ËÆ°ÁÆóÂá∫‰∏ãÊ†áÔºånÊòØÊï∞ÁªÑÁöÑÂÆπÈáèÂ§ßÂ∞èÔºà2ÁöÑnÊ¨°ÂπÇÔºâÔºån-1Á≠â‰∫é2ÁöÑnÊ¨°ÂπÇ-1Ôºå‰∫åËøõÂà∂Â∞±ÊòØn‰∏™1„ÄÇHashMap ÊØèÊ¨°Êâ©ÂÆπÊòØÂú®ÂéüÊù•ÁöÑÂÆπÈáè‰∏äx2ÔºåÊâ©ÂÆπÂêéÁöÑÊï∞ÁªÑÂÆπÈáèÂ§ßÂ∞è‰∏∫2ÁöÑn+1Ê¨°ÂπÇÔºån-1Â∞±Á≠â‰∫é2ÁöÑn+1Ê¨°ÂπÇ-1Ôºå‰∫åËøõÂà∂‰∏äÂ∞±Áõ∏ÂΩì‰∫éÊØî2ÁöÑnÊ¨°ÂπÇÂ∞±Â§ö‰∫Ü‰∏Ä‰∏™bit‰Ωç„ÄÇËÆ°ÁÆóÂá∫‰∏ãÊ†áÁöÑ‰∫åËøõÂà∂Ë¶Å‰πà‰∏çÂèòÔºåË¶Å‰πàÂ§ö‰∏Ä‰∏™bit‰Ωç„ÄÇ</p>
<p><img src="https://img-blog.csdnimg.cn/20210402154845682.png" alt="rehash"><br>        Âõ†Ê≠§ÔºåÂú®Êâ©ÂÆπÁöÑÊó∂ÂÄôÔºå‰∏çÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆó hashÔºåÂè™ÈúÄË¶ÅÁúãÁúãÂéüÊù•ÁöÑ hash ÂÄºÊñ∞Â¢ûÁöÑÈÇ£‰∏™ bit ÊòØ 1 ËøòÊòØ 0 Â∞±ÂèØ‰ª•‰∫ÜÔºåÊòØ 0 ÁöÑËØùÁ¥¢ÂºïÊ≤°ÂèòÔºåÊòØ 1 ÁöÑËØùÁ¥¢ÂºïÂèòÊàê <strong>‚ÄúÂéü‰ΩçÁΩÆ + ÊóßÂÆπÈáè‚Äù</strong> „ÄÇÂèØ‰ª•ÁúãÁúã‰∏ãÂõæ‰∏∫ 16 Êâ©ÂÖÖ‰∏∫ 32 ÁöÑ resize Á§∫ÊÑèÂõæÔºö</p>
<p><img src="https://img-blog.csdnimg.cn/20210402154912579.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNjQ3OTk5,size_16,color_FFFFFF,t_70" alt="resize"><br>        Ê≠£ÊòØÂõ†‰∏∫ËøôÊ†∑Â∑ßÂ¶ôÁöÑ rehash ÊñπÂºèÔºåÊó¢ÁúÅÂéª‰∫ÜÈáçÊñ∞ËÆ°ÁÆó hash ÂÄºÁöÑÊó∂Èó¥ÔºåËÄå‰∏îÂêåÊó∂ÔºåÁî±‰∫éÊñ∞Â¢ûÁöÑ 1 bit ÊòØ 0 ËøòÊòØ 1 ÂèØ‰ª•ËÆ§‰∏∫ÊòØÈöèÊú∫ÁöÑÔºåÂú® resize ÁöÑËøáÁ®ã‰∏≠‰øùËØÅ‰∫Ü rehash ‰πãÂêéÊØè‰∏™Ê°∂‰∏äÁöÑÁªìÁÇπÊï∞‰∏ÄÂÆöÂ∞è‰∫éÁ≠â‰∫éÂéüÊù•Ê°∂‰∏äÁöÑÁªìÁÇπÊï∞Ôºå‰øùËØÅ‰∫Ü rehash ‰πãÂêé‰∏ç‰ºöÂá∫Áé∞Êõ¥‰∏•ÈáçÁöÑ hash ÂÜ≤Á™ÅÔºåÂùáÂåÄÁöÑÊää‰πãÂâçÁöÑÂÜ≤Á™ÅÁöÑÁªìÁÇπÂàÜÊï£Âà∞Êñ∞ÁöÑÊ°∂‰∏≠‰∫Ü„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() {</span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCap</span> <span class="operator">=</span> (oldTab == <span class="literal">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">oldThr</span> <span class="operator">=</span> threshold;</span><br><span class="line">    <span class="comment">// Êñ∞ÂÆπÈáè Êñ∞ÈòàÂÄº</span></span><br><span class="line">    <span class="type">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//======== if...elseif...else...Âè™ÊòØ‰∏∫‰∫ÜÂàùÂßãÂåñÊñ∞ÂÆπÈáèÂíåÊñ∞ÈòàÂÄº =========</span></span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) {</span><br><span class="line">        <span class="comment">// ÊúÄÂ§ßÂÆπÈáèÊòØ2ÁöÑ30Ê¨°Êñπ</span></span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) {</span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span> oldTab;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// Êñ∞ÂÆπÈáèÁ≠â‰∫éÊâ©ÂÆπÂâçÁöÑÂÆπÈáèÂ∑¶Áßª‰∏Ä‰ΩçÔºàÁõ∏ÂΩì‰∫éX2Ôºâ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">            <span class="comment">// Êñ∞ÈòàÂÄº‰πüÊâ©Â§ßX2</span></span><br><span class="line">            newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Â¶ÇÊûúÊóßÂÆπÈáè‰∏∫0ÔºåÊóßÈòàÂÄºÂ§ß‰∫é0ÔºåÂàôÊñ∞ÂÆπÈáèÂ∞±Á≠â‰∫éÈòàÂÄº</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">        newCap = oldThr;</span><br><span class="line">    <span class="comment">// ÊóßÂÆπÈáè‰∏∫0ÔºåÈòàÂÄº‰∏∫0</span></span><br><span class="line">    <span class="keyword">else</span> {               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">        newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">        newThr = (<span class="type">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Â¶ÇÊûúÈªòËÆ§ÁöÑÂä†ËΩΩÂõ†Â≠ê‰∏∫0ÊàñÂàùÂßãÂÆπÈáè‰∏∫0</span></span><br><span class="line">    <span class="keyword">if</span> (newThr == <span class="number">0</span>) {</span><br><span class="line">        <span class="comment">// ËÆ°ÁÆóÊñ∞ÈòàÂÄº</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">ft</span> <span class="operator">=</span> (<span class="type">float</span>)newCap * loadFactor;</span><br><span class="line">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="type">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                  (<span class="type">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">    }</span><br><span class="line">    threshold = newThr;</span><br><span class="line">    <span class="meta">@SuppressWarnings({"rawtypes","unchecked"})</span></span><br><span class="line">    Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> <span class="title class_">Node</span>[newCap];</span><br><span class="line">    table = newTab;</span><br><span class="line">    <span class="keyword">if</span> (oldTab != <span class="literal">null</span>) {</span><br><span class="line">        <span class="comment">// ÈÅçÂéÜÂèñÂá∫ÊóßÊï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏Ä‰∏™Ê°∂</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; oldCap; ++j) {</span><br><span class="line">            Node&lt;K,V&gt; e;</span><br><span class="line">            <span class="comment">// ÊääÁ¨¨j‰∏™Ê°∂ËµãÂÄºÁªôe</span></span><br><span class="line">            <span class="keyword">if</span> ((e = oldTab[j]) != <span class="literal">null</span>) {</span><br><span class="line">                oldTab[j] = <span class="literal">null</span>;</span><br><span class="line">                <span class="comment">// Âè™Êúâ‰∏Ä‰∏™ËäÇÁÇπ</span></span><br><span class="line">                <span class="keyword">if</span> (e.next == <span class="literal">null</span>)</span><br><span class="line">                    newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">                <span class="comment">// ÊòØÊ†ë</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                    ((TreeNode&lt;K,V&gt;)e).split(<span class="built_in">this</span>, newTab, j, oldCap);</span><br><span class="line">                <span class="comment">// ÊòØÈìæË°®</span></span><br><span class="line">                <span class="keyword">else</span> { <span class="comment">// preserve order</span></span><br><span class="line">                    Node&lt;K,V&gt; loHead = <span class="literal">null</span>, loTail = <span class="literal">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; hiHead = <span class="literal">null</span>, hiTail = <span class="literal">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; next;</span><br><span class="line">                    <span class="keyword">do</span> {</span><br><span class="line">                        next = e.next;</span><br><span class="line">                        <span class="comment">// ‰ΩøÁî®&amp;Ôºà‰∏éËøêÁÆóÔºâÊù•ËÆ°ÁÆóÊúÄÈ´ò‰ΩçÊòØ0ËøòÊòØ1</span></span><br><span class="line">                        <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) {</span><br><span class="line">                      		<span class="comment">// ËøôÈáåÁöÑif...else...Áî®‰∫éËäÇÁÇπÁöÑÁßªÂä®Êìç‰Ωú</span></span><br><span class="line">                            <span class="keyword">if</span> (loTail == <span class="literal">null</span>)</span><br><span class="line">                                loHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                loTail.next = e;</span><br><span class="line">                            <span class="comment">// Â¶ÇÊûúÊòØ0ÔºåÊääÂΩìÂâçÊ°∂ËµãÂÄºÁªôloTail</span></span><br><span class="line">                            loTail = e;</span><br><span class="line">                        }</span><br><span class="line">                        <span class="keyword">else</span> {</span><br><span class="line">                            <span class="keyword">if</span> (hiTail == <span class="literal">null</span>)</span><br><span class="line">                                hiHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                hiTail.next = e;</span><br><span class="line">                            <span class="comment">// Â¶ÇÊûúÊòØ1ÔºåÊääÂΩìÂâçÊ°∂ËµãÂÄºÁªô hiTail</span></span><br><span class="line">                            hiTail = e;</span><br><span class="line">                        }</span><br><span class="line">                    } <span class="keyword">while</span> ((e = next) != <span class="literal">null</span>);</span><br><span class="line">                    <span class="comment">// Â¶ÇÊûúÊòØ0ÔºåÊîæÂõûÂéü‰ΩçÁΩÆ‰∏çÂä®</span></span><br><span class="line">                    <span class="keyword">if</span> (loTail != <span class="literal">null</span>) {</span><br><span class="line">                        loTail.next = <span class="literal">null</span>;</span><br><span class="line">                        newTab[j] = loHead;</span><br><span class="line">                    }</span><br><span class="line">                    <span class="comment">// Â¶ÇÊûúÊòØ1ÔºåÊñ∞ÁöÑ‰∏ãÊ†á‰∏∫ÔºöÊóß‰∏ãÊ†á+ÊóßÂÆπÈáè</span></span><br><span class="line">                    <span class="keyword">if</span> (hiTail != <span class="literal">null</span>) {</span><br><span class="line">                        hiTail.next = <span class="literal">null</span>;</span><br><span class="line">                        newTab[j + oldCap] = hiHead;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> newTab;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Âà†Èô§"><a href="#Âà†Èô§" class="headerlink" title="Âà†Èô§"></a>Âà†Èô§</h2><p>ÊâæÂà∞ÂÖÉÁ¥†ÊâÄÂú®Êï∞ÁªÑ‰∏äÁöÑ‰ΩçÁΩÆÔºåÈÅçÂéÜÊ°∂ÔºåÊâæÂà∞ÂÖÉÁ¥†Â∞±ÂÅúÊ≠¢ÈÅçÂéÜÔºõÂ¶ÇÊûúÊòØÊ†ëÔºåÂà†Èô§‰πãÂêéÂà§Êñ≠ÂΩìÂâçÊ°∂ÁöÑËäÇÁÇπÊòØÂê¶Â∞è‰∫é6ÔºåÂ∞è‰∫éÂ∞±ËΩ¨ÈìæË°®„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">remove</span><span class="params">(Object key)</span> {</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="comment">// ËÆ°ÁÆókeyÁöÑhashÂÄº</span></span><br><span class="line">    <span class="comment">// Â¶ÇÊûúÊâæÂà∞‰∫ÜÂ∞±ËøîÂõûÂà†Èô§keyÁöÑvalueÔºåÂê¶ÂàôËøîÂõûnull</span></span><br><span class="line">    <span class="keyword">return</span> (e = removeNode(hash(key), key, <span class="literal">null</span>, <span class="literal">false</span>, <span class="literal">true</span>)) == <span class="literal">null</span> ?</span><br><span class="line">        <span class="literal">null</span> : e.value;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Implements Map.remove and related methods</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> hash hash for key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key the key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value the value to match if matchValue, else ignored Â¶ÇÊûúÂÄº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> matchValue if true only remove if value is equal ÊòØÂê¶ÂÄºÁõ∏Á≠âÊâçÂà†Èô§</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> movable if false do not move other nodes while removing</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the node, or null if none</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title function_">removeNode</span><span class="params">(<span class="type">int</span> hash, Object key, Object value,</span></span><br><span class="line"><span class="params">                           <span class="type">boolean</span> matchValue, <span class="type">boolean</span> movable)</span> {</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="type">int</span> n, index;</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="literal">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        <span class="comment">// ÈÄöËøáÂà†Èô§keyËÆ°ÁÆóÁöÑ‰∏ãÊ†áiÔºåÂú®Êï∞ÁªÑ‰∏≠ÂéªÊâæiËøô‰∏™‰ΩçÁΩÆ</span></span><br><span class="line">        (p = tab[index = (n - <span class="number">1</span>) &amp; hash]) != <span class="literal">null</span>) {</span><br><span class="line">        Node&lt;K,V&gt; node = <span class="literal">null</span>, e; K k; V v;</span><br><span class="line">        <span class="comment">// ÊØîËæÉ‰∏§‰∏™keyÊòØÂê¶ÂÆåÂÖ®Áõ∏ÂêåÔºàÂÄº„ÄÅÂºïÁî®Âú∞ÂùÄÔºâ</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            <span class="comment">// ÊâæÂà∞Ëøô‰∏™ÂÖÉÁ¥†‰πãÂêéÊääËøô‰∏™ÂÖÉÁ¥†ËµãÂÄºÁªônode</span></span><br><span class="line">            node = p;</span><br><span class="line">        <span class="comment">// Â¶ÇÊûúËøòÊúâËäÇÁÇπÔºåÈÇ£‰πàÈúÄË¶ÅÂà§Êñ≠ÊòØÊ†ëËøòÊòØÈìæË°®Âú®Êé•ÁùÄÈÅçÂéÜ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((e = p.next) != <span class="literal">null</span>) {</span><br><span class="line">            <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key);</span><br><span class="line">            <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">do</span> {</span><br><span class="line">                    <span class="comment">// ÊâæÂà∞ÂÖÉÁ¥†Â∞±ÈÄÄÂá∫Âæ™ÁéØ</span></span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key ||</span><br><span class="line">                         (key != <span class="literal">null</span> &amp;&amp; key.equals(k)))) {</span><br><span class="line">                        node = e;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    }</span><br><span class="line">                    <span class="comment">// Âêë‰∏ã‰∏Ä‰∏™ËäÇÁÇπÁßªÂä®ÔºåÁõ¥Âà∞‰∏ã‰∏Ä‰∏™ËäÇÁÇπ‰∏∫null</span></span><br><span class="line">                    p = e;</span><br><span class="line">                } <span class="keyword">while</span> ((e = e.next) != <span class="literal">null</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// ÊâæÂà∞‰∫Ü</span></span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">null</span> &amp;&amp; (!matchValue || (v = node.value) == value ||</span><br><span class="line">                             (value != <span class="literal">null</span> &amp;&amp; value.equals(v)))) {</span><br><span class="line">            <span class="keyword">if</span> (node <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                <span class="comment">// Á∫¢ÈªëÊ†ëÁöÑÂà†Èô§ÊñπÊ≥ï</span></span><br><span class="line">                ((TreeNode&lt;K,V&gt;)node).removeTreeNode(<span class="built_in">this</span>, tab, movable);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (node == p)</span><br><span class="line">                tab[index] = node.next;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                p.next = node.next;</span><br><span class="line">            ++modCount;</span><br><span class="line">            --size;</span><br><span class="line">            afterNodeRemoval(node);</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Êü•Êâæ"><a href="#Êü•Êâæ" class="headerlink" title="Êü•Êâæ"></a>Êü•Êâæ</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(Object key)</span> {</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="comment">// ËÆ°ÁÆókeyÁöÑhashÂÄº</span></span><br><span class="line">    <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="literal">null</span> ? <span class="literal">null</span> : e.value;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title function_">getNode</span><span class="params">(<span class="type">int</span> hash, Object key)</span> {</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="type">int</span> n; K k;</span><br><span class="line">    <span class="comment">// ÈÄöËøákeyËÆ°ÁÆóÁöÑ‰∏ãÊ†áiÔºåÂà§Êñ≠Âú®Êï∞ÁªÑÁöÑÁ¨¨i‰∏™‰ΩçÁΩÆÊòØÂê¶‰∏∫Á©∫</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="literal">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="literal">null</span>) {</span><br><span class="line">        <span class="comment">// ÊØîËæÉkeyÂíåÁ¨¨‰∏Ä‰∏™ËäÇÁÇπÁöÑkeyÊòØÂê¶ÂÆåÂÖ®Áõ∏Âêå</span></span><br><span class="line">        <span class="keyword">if</span> (first.hash == hash &amp;&amp; <span class="comment">// always check first node</span></span><br><span class="line">            ((k = first.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            <span class="keyword">return</span> first;</span><br><span class="line">        <span class="comment">// Êâæ‰∏ã‰∏Ä‰∏™ËäÇÁÇπÔºåÂà§Êñ≠‰∏ã‰∏Ä‰∏™ËäÇÁÇπÊòØÊ†ëËøòÊòØÈìæË°®ÔºåÂÜçÊé•ÁùÄÈÅçÂéÜÂÖ∂ÂÆÉËäÇÁÇπ</span></span><br><span class="line">        <span class="keyword">if</span> ((e = first.next) != <span class="literal">null</span>) {</span><br><span class="line">            <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">            <span class="keyword">do</span> {</span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">return</span> e;</span><br><span class="line">            } <span class="keyword">while</span> ((e = e.next) != <span class="literal">null</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Á∫¢ÈªëÊ†ëÁöÑÊäòÂçäÈÄíÂΩíÊü•ÊâæÊñπÊ≥ï</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> TreeNode&lt;K,V&gt; <span class="title function_">getTreeNode</span><span class="params">(<span class="type">int</span> h, Object k)</span> {</span><br><span class="line">    <span class="keyword">return</span> ((parent != <span class="literal">null</span>) ? root() : <span class="built_in">this</span>).find(h, k, <span class="literal">null</span>);</span><br><span class="line">}</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * h Êü•ÊâækeyÁöÑhashÂÄº</span></span><br><span class="line"><span class="comment"> * kc ÂÖ≥ÈîÆÂ≠ókeyÁöÑÊØîËæÉÂô®Á±ªÂûã</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">final</span> TreeNode&lt;K,V&gt; <span class="title function_">find</span><span class="params">(<span class="type">int</span> h, Object k, Class&lt;?&gt; kc)</span> {</span><br><span class="line">    TreeNode&lt;K,V&gt; p = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">do</span> {</span><br><span class="line">        <span class="comment">// ph ÂΩìÂâçËäÇÁÇπÁöÑhashÂÄºÔºåpk ÂΩìÂâçËäÇÁÇπÁöÑkey</span></span><br><span class="line">        <span class="type">int</span> ph, dir; K pk;</span><br><span class="line">        TreeNode&lt;K,V&gt; pl = p.left, pr = p.right, q;</span><br><span class="line">        <span class="comment">// ÂΩìÂâçÁöÑËäÇÁÇπÁöÑhashÂÄºÊòØÂê¶Â§ß‰∫é‰º†ÂÖ•keyÁöÑhashÂÄº</span></span><br><span class="line">        <span class="keyword">if</span> ((ph = p.hash) &gt; h)</span><br><span class="line">            p = pl;</span><br><span class="line">        <span class="comment">// Â¶ÇÊûúÂ∞è‰∫éÔºåÂàô‰ªéÂè≥ËäÇÁÇπËµãÂÄºÁªôp</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ph &lt; h)</span><br><span class="line">            p = pr;</span><br><span class="line">        <span class="comment">// Â¶ÇÊûúÁõ∏Á≠âÔºåÂàôÊØîËæÉÊòØÂê¶ÂÆåÂÖ®Áõ∏Á≠âÔºàÂÄº„ÄÅÂºïÁî®Âú∞ÂùÄÔºâ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((pk = p.key) == k || (k != <span class="literal">null</span> &amp;&amp; k.equals(pk)))</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        <span class="comment">// Â¶ÇÊûúÂ∑¶ËäÇÁÇπ‰∏∫Á©∫ÔºåÊääÂè≥ËäÇÁÇπËµãÂÄºÁªôp</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (pl == <span class="literal">null</span>)</span><br><span class="line">            p = pr;</span><br><span class="line">        <span class="comment">// Â¶ÇÊûúÂè≥ËäÇÁÇπ‰∏∫Á©∫ÔºåÊääÂ∑¶ËäÇÁÇπËµãÂÄºÁªôp</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (pr == <span class="literal">null</span>)</span><br><span class="line">            p = pl;</span><br><span class="line">        <span class="comment">// Â¶ÇÊûú‰∏çÊåâÂìàÂ∏åÂÄºÊéíÂ∫èÔºåËÄåÊòØÊåâÁÖßÊØîËæÉÂô®ÊéíÂ∫èÔºåÂàôÈÄöËøáÊØîËæÉÂô®ËøîÂõûÂÄºÂÜ≥ÂÆöËøõÂÖ•Â∑¶Âè≥ÁªìÁÇπ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((kc != <span class="literal">null</span> ||</span><br><span class="line">                  (kc = comparableClassFor(k)) != <span class="literal">null</span>) &amp;&amp;</span><br><span class="line">                 (dir = compareComparables(kc, k, pk)) != <span class="number">0</span>)</span><br><span class="line">            p = (dir &lt; <span class="number">0</span>) ? pl : pr;</span><br><span class="line">        <span class="comment">// ÈÄíÂΩíÈáçÊñ∞Êü•Êâæ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((q = pr.find(h, k, kc)) != <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> q;</span><br><span class="line">        <span class="type">else</span></span><br><span class="line">            <span class="variable">p</span> <span class="operator">=</span> pl;</span><br><span class="line">    } <span class="keyword">while</span> (p != <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Á∫¢ÈªëÊ†ëÁöÑÊü•ÊâæÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ÔºöO(logn)</p>
<p>ÈìæË°®Êü•ÊâæÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ÔºöO(n)</p>
<p>O(logn)&lt;O(n) ÔºåÊâÄ‰ª•Á∫¢ÈªëÊ†ëÊïàÁéáÊØîÈìæË°®È´ò„ÄÇ</p>
<hr>
<p>Âà∞ËøôÈáå‰∏∫Ê≠¢ÔºåHashMapÁöÑÂéüÁêÜÂ∞±ÁÆóÂÆå‰∫ÜÔºå‰∏ãÈù¢ÂõûÈ°æ‰∏Ä‰∏ãÈÅçÂéÜÁöÑÂõõÁßçÊñπÂºèÔºö</p>
<h2 id="HashMapÁöÑÈÅçÂéÜ"><a href="#HashMapÁöÑÈÅçÂéÜ" class="headerlink" title="HashMapÁöÑÈÅçÂéÜ"></a>HashMapÁöÑÈÅçÂéÜ</h2><ol>
<li>ÂàÜÂà´ÈÅçÂéÜ key Âíå value</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (String key : map.keySet()) {</span><br><span class="line">	System.out.println(key);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span> (Object vlaue : map.values() {</span><br><span class="line">	System.out.println(value);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>‰ΩøÁî® Iterator Ëø≠‰ª£Âô®Ëø≠‰ª£</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Iterator&lt;Map.Entry&lt;String, Object&gt;&gt; iterator = map.entrySet().iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) {</span><br><span class="line">    Map.Entry&lt;String, Object&gt; mapEntry = iterator.next();</span><br><span class="line">    System.out.println(mapEntry.getKey() + <span class="string">"---"</span> + mapEntry.getValue());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>ÈÄöËøá get ÊñπÂºèÔºà‰∏çÂª∫ËÆÆ‰ΩøÁî®Ôºâ</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Set&lt;String&gt; keySet = map.keySet();</span><br><span class="line"><span class="keyword">for</span> (String str : keySet) {</span><br><span class="line">	System.out.println(str + <span class="string">"---"</span> + map.get(str));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ê†πÊçÆÈòøÈáåÂºÄÂèëÊâãÂÜåÔºå‰∏çÂª∫ËÆÆ‰ΩøÁî®ËøôÁßçÊñπÂºèÔºåÂõ†‰∏∫Ëø≠‰ª£‰∏§Ê¨°„ÄÇkeySet Ëé∑Âèñ Iterator‰∏ÄÊ¨°ÔºåËøòÊúâÈÄöËøá get ÂèàËø≠‰ª£‰∏ÄÊ¨°ÔºåÈôç‰ΩéÊÄßËÉΩ„ÄÇ</p>
<ol start="4">
<li>jdk8 ‰ª•Âêé‰ΩøÁî® Map.foreach((k,v)-&gt;{ System.out.println(key + ‚Äú‚Äî‚Äú + value); })</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">HashMap&lt;String,String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">map.put(<span class="string">"k1"</span>, <span class="string">"v1"</span>);</span><br><span class="line">map.put(<span class="string">"k2"</span>, <span class="string">"v2"</span>);</span><br><span class="line">map.forEach((key, value) -&gt; {</span><br><span class="line">    System.out.println(key + <span class="string">"---"</span> + value);</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<h2 id="„ÄäÈòøÈáåÂ∑¥Â∑¥JavaÂºÄÂèëÊâãÂÜå„ÄãÁöÑÂª∫ËÆÆ"><a href="#„ÄäÈòøÈáåÂ∑¥Â∑¥JavaÂºÄÂèëÊâãÂÜå„ÄãÁöÑÂª∫ËÆÆ" class="headerlink" title="„ÄäÈòøÈáåÂ∑¥Â∑¥JavaÂºÄÂèëÊâãÂÜå„ÄãÁöÑÂª∫ËÆÆ"></a>„ÄäÈòøÈáåÂ∑¥Â∑¥JavaÂºÄÂèëÊâãÂÜå„ÄãÁöÑÂª∫ËÆÆ</h2><p>ÂèØ‰ª•‰ΩøÁî® Guava ÁöÑ Maps.newHashMapWithExpectedSize(ÂÆûÈôÖÁî®Èáè)Êù•ÂàõÂª∫‰∏Ä‰∏™ÂêàÁêÜÁöÑHashMap„ÄÇ </p>
<p>ÂÖ≥‰∫éËÆæÁΩÆ HashMap ÁöÑÂàùÂßãÂåñÂÆπÈáèÔºö</p>
<p>Êàë‰ª¨‰∏äÈù¢‰ªãÁªçËøáÔºåHashMap ÁöÑÊâ©ÂÆπÊú∫Âà∂ÔºåÂ∞±ÊòØÂΩìËææÂà∞Êâ©ÂÆπÊù°‰ª∂Êó∂‰ºöËøõË°åÊâ©ÂÆπ„ÄÇHashMap ÁöÑÊâ©ÂÆπÊù°‰ª∂Â∞±ÊòØÂΩì HashMap ‰∏≠ÁöÑÂÖÉÁ¥†‰∏™Êï∞ÔºàsizeÔºâË∂ÖËøá‰∏¥ÁïåÂÄºÔºàthresholdÔºâÊó∂Â∞±‰ºöËá™Âä®Êâ©ÂÆπ„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇÊûúÊàë‰ª¨Ê≤°ÊúâËÆæÁΩÆÂàùÂßãÂÆπÈáèÂ§ßÂ∞èÔºåÈöèÁùÄÂÖÉÁ¥†ÁöÑ‰∏çÊñ≠Â¢ûÂä†ÔºåHashMap ‰ºöÊúâÂèØËÉΩÂèëÁîüÂ§öÊ¨°Êâ©ÂÆπÔºåËÄå HashMap ‰∏≠ÁöÑÊâ©ÂÆπÊú∫Âà∂ÂÜ≥ÂÆö‰∫ÜÊØèÊ¨°Êâ©ÂÆπÈÉΩÈúÄË¶ÅÈáçÂª∫ hash Ë°®ÔºåÊòØÈùûÂ∏∏ÂΩ±ÂìçÊÄßËÉΩÁöÑ„ÄÇ</p>
<p>‰ΩÜÊòØËÆæÁΩÆÂàùÂßãÂåñÂÆπÈáèÔºåËÆæÁΩÆÁöÑÊï∞ÂÄº‰∏çÂêå‰πü‰ºöÂΩ±ÂìçÊÄßËÉΩÔºåÈÇ£‰πàÂΩìÊàë‰ª¨Â∑≤Áü• HashMap ‰∏≠Âç≥Â∞ÜÂ≠òÊîæÁöÑ KV ‰∏™Êï∞ÁöÑÊó∂ÂÄôÔºåÂÆπÈáèËÆæÁΩÆÊàêÂ§öÂ∞ë‰∏∫Â•ΩÂë¢Ôºü</p>
<p>ÂÖ≥‰∫éËÆæÁΩÆ HashMap ÁöÑÂàùÂßãÂåñÂÆπÈáèÂ§ßÂ∞èÔºö</p>
<p>ÂèØ‰ª•ËÆ§‰∏∫ÔºåÂΩìÊàë‰ª¨ÊòéÁ°ÆÁü•ÈÅì HashMap ‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ÁöÑÊó∂ÂÄôÔºåÊääÈªòËÆ§ÂÆπÈáèËÆæÁΩÆÊàê initialCapacity/ 0.75F + 1.0F ÊòØ‰∏Ä‰∏™Âú®ÊÄßËÉΩ‰∏äÁõ∏ÂØπÂ•ΩÁöÑÈÄâÊã©Ôºå‰ΩÜÊòØÔºåÂêåÊó∂‰πü‰ºöÁâ∫Áâ≤‰∫õÂÜÖÂ≠ò„ÄÇ</p>
<p>ËÄå Jdk Âπ∂‰∏ç‰ºöÁõ¥Êé•ÊãøÁî®Êà∑‰º†ËøõÊù•ÁöÑÊï∞Â≠óÂΩìÂÅöÈªòËÆ§ÂÆπÈáèÔºåËÄåÊòØ‰ºöËøõË°å‰∏ÄÁï™ËøêÁÆóÔºåÊúÄÁªàÂæóÂà∞‰∏Ä‰∏™ 2 ÁöÑÂπÇ„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ObjectÁ±ª</title>
    <url>/p/7ace31b3.html</url>
    <content><![CDATA[<html><head></head><body><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// native ÊñπÊ≥ïÔºåÁî®‰∫éËøîÂõûÂΩìÂâçËøêË°åÊó∂ÂØπË±°ÁöÑ Class ÂØπË±°Ôºå‰ΩøÁî®‰∫Üfinal ÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞Ôºå‰∏çÂÖÅËÆ∏Â≠êÁ±ªÈáçÂÜô„ÄÇ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> Class&lt;?&gt; getClass()</span><br><span class="line"></span><br><span class="line"> <span class="comment">// native ÊñπÊ≥ïÔºåÁî®‰∫éËøîÂõûÂØπË±°ÁöÑÂìàÂ∏åÁ†ÅÔºå‰∏ªË¶Å‰ΩøÁî®Âú®ÂìàÂ∏åË°®‰∏≠ÔºåÊØîÂ¶Ç JDK ‰∏≠ÁöÑHashMap„ÄÇ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">native</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Áî®‰∫éÊØîËæÉ 2 ‰∏™ÂØπË±°ÁöÑÂÜÖÂ≠òÂú∞ÂùÄÊòØÂê¶Áõ∏Á≠âÔºåString Á±ªÂØπËØ•ÊñπÊ≥ïËøõË°å‰∫ÜÈáçÂÜôÁî®Êà∑ÊØîËæÉÂ≠óÁ¨¶‰∏≤ÁöÑÂÄºÊòØÂê¶Áõ∏Á≠â„ÄÇ</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//naitive ÊñπÊ≥ïÔºåÁî®‰∫éÂàõÂª∫Âπ∂ËøîÂõûÂΩìÂâçÂØπË±°ÁöÑ‰∏Ä‰ªΩÊã∑Ë¥ù„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂØπ‰∫é‰ªª‰ΩïÂØπË±° xÔºåË°®ËææÂºè x.clone() != x ‰∏∫ trueÔºåx.clone().getClass()== x.getClass() ‰∏∫ true„ÄÇObject Êú¨Ë∫´Ê≤°ÊúâÂÆûÁé∞ Cloneable Êé•Âè£ÔºåÊâÄ‰ª•‰∏çÈáçÂÜô clone ÊñπÊ≥ïÂπ∂‰∏îËøõË°åË∞ÉÁî®ÁöÑËØù‰ºöÂèëÁîüCloneNotSupportedException ÂºÇÂ∏∏„ÄÇ</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">native</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException</span><br><span class="line"></span><br><span class="line"><span class="comment">//ËøîÂõûÁ±ªÁöÑÂêçÂ≠ó@ÂÆû‰æãÁöÑÂìàÂ∏åÁ†ÅÁöÑ 16 ËøõÂà∂ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÂª∫ËÆÆ Object ÊâÄÊúâÁöÑÂ≠êÁ±ªÈÉΩÈáçÂÜôËøô‰∏™ÊñπÊ≥ï„ÄÇ</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//native ÊñπÊ≥ïÔºåÂπ∂‰∏î‰∏çËÉΩÈáçÂÜô„ÄÇÂî§ÈÜí‰∏Ä‰∏™Âú®Ê≠§ÂØπË±°ÁõëËßÜÂô®‰∏äÁ≠âÂæÖÁöÑÁ∫øÁ®ã(ÁõëËßÜÂô®Áõ∏ÂΩì‰∫éÂ∞±ÊòØÈîÅÁöÑÊ¶ÇÂøµ)„ÄÇÂ¶ÇÊûúÊúâÂ§ö‰∏™Á∫øÁ®ãÂú®Á≠âÂæÖÂè™‰ºö‰ªªÊÑèÂî§ÈÜí‰∏Ä‰∏™„ÄÇ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">notify</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//native ÊñπÊ≥ïÔºåÂπ∂‰∏î‰∏çËÉΩÈáçÂÜô„ÄÇË∑ü notify ‰∏ÄÊ†∑ÔºåÂîØ‰∏ÄÁöÑÂå∫Âà´Â∞±ÊòØ‰ºöÂî§ÈÜíÂú®Ê≠§ÂØπË±°ÁõëËßÜÂô®‰∏äÁ≠âÂæÖÁöÑÊâÄÊúâÁ∫øÁ®ãÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™Á∫øÁ®ã„ÄÇ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">notifyAll</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//native ÊñπÊ≥ïÔºåÂπ∂‰∏î‰∏çËÉΩÈáçÂÜô„ÄÇÊöÇÂÅúÁ∫øÁ®ãÁöÑÊâßË°å„ÄÇÊ≥®ÊÑèÔºösleep ÊñπÊ≥ïÊ≤°ÊúâÈáäÊîæÈîÅÔºåËÄå wait ÊñπÊ≥ïÈáäÊîæ‰∫ÜÈîÅ „ÄÇtimeout ÊòØÁ≠âÂæÖÊó∂Èó¥„ÄÇ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">wait</span><span class="params">(<span class="type">long</span> timeout)</span> <span class="keyword">throws</span> InterruptedException</span><br><span class="line"></span><br><span class="line"><span class="comment">//Â§ö‰∫Ü nanos ÂèÇÊï∞ÔºåËøô‰∏™ÂèÇÊï∞Ë°®Á§∫È¢ùÂ§ñÊó∂Èó¥Ôºà‰ª•ÊØ´ÂæÆÁßí‰∏∫Âçï‰ΩçÔºåËåÉÂõ¥ÊòØ 0-999999Ôºâ„ÄÇ ÊâÄ‰ª•Ë∂ÖÊó∂ÁöÑÊó∂Èó¥ËøòÈúÄË¶ÅÂä†‰∏ä nanos ÊØ´Áßí„ÄÇ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">wait</span><span class="params">(<span class="type">long</span> timeout, <span class="type">int</span> nanos)</span> <span class="keyword">throws</span> InterruptedException</span><br><span class="line"></span><br><span class="line"><span class="comment">//Ë∑ü‰πãÂâçÁöÑ 2 ‰∏™ wait ÊñπÊ≥ï‰∏ÄÊ†∑ÔºåÂè™‰∏çËøáËØ•ÊñπÊ≥ï‰∏ÄÁõ¥Á≠âÂæÖÔºåÊ≤°ÊúâË∂ÖÊó∂Êó∂Èó¥Ëøô‰∏™Ê¶ÇÂøµ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">wait</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException</span><br><span class="line"></span><br><span class="line"><span class="comment">//ÂÆû‰æãË¢´ÂûÉÂúæÂõûÊî∂Âô®ÂõûÊî∂ÁöÑÊó∂ÂÄôËß¶ÂèëÁöÑÊìç‰Ωú</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable { }</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>QueueÊé•Âè£</title>
    <url>/p/18ebe4f.html</url>
    <content><![CDATA[<html><head></head><body><p>ÈòüÂàóÁöÑÁâπÁÇπÊòØÂÖàËøõÂÖàÂá∫ÔºåÊ†àÁöÑÁâπÁÇπÊòØÂêéËøõÂÖàÂá∫„ÄÇQueueÁªßÊâøCollectionÊé•Âè£ÔºåStackÁªßÊâøVectorÂÆπÂô®Á±ªÔºåÊúÄÈ°∂Â±ÇÊé•Âè£‰πüÊòØCollection„ÄÇÂú®Java‰∏≠ÂÆπÂô®ÂàÜ‰∏∫CollectionÂíåMap‰∏§Â§ßÁ±ª„ÄÇ CollectionÂÆ∂Êóè‰∏≠Èô§‰∫ÜÂ∏∏ËßÅÁöÑList„ÄÅSetÔºåÁé∞Âú®ÂèàÊñ∞Â¢û‰∏Ä‰∏™Queue„ÄÅStack„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Queue</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Collection</span>&lt;E&gt; {}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="BlockingQueue-ÁöÑÂõõÁªÑAPI"><a href="#BlockingQueue-ÁöÑÂõõÁªÑAPI" class="headerlink" title="BlockingQueue ÁöÑÂõõÁªÑAPI"></a>BlockingQueue ÁöÑÂõõÁªÑAPI</h3><table>
<thead>
<tr>
<th>ÊñπÂºè</th>
<th>ÊäõÂá∫ÂºÇÂ∏∏</th>
<th>‰∏çÊäõÂºÇÂ∏∏ÔºåÊúâËøîÂõûÂÄº</th>
<th>ÈòªÂ°ûÁ≠âÂæÖ</th>
<th>Ë∂ÖÊó∂Á≠âÂæÖ</th>
</tr>
</thead>
<tbody><tr>
<td>ÂÖ•ÈòüÂàó</td>
<td>add</td>
<td>offer</td>
<td>put</td>
<td>offer(Element,Time,TimeUnit)</td>
</tr>
<tr>
<td>Âá∫ÈòüÂàó</td>
<td>remove</td>
<td>poll</td>
<td>take</td>
<td>poll(,)</td>
</tr>
<tr>
<td>ËøîÂõûÂ§¥ÈÉ®ÂÖÉÁ¥†</td>
<td>element</td>
<td>peek</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<p>BlockingQueue‰∏ªË¶ÅÊúâ‰∏§‰∏™ÂÆûÁé∞ÔºöArrayBlockingQueue„ÄÅLinkedBlockingQueue„ÄÇ</p>
<p>BlockingQueueÁöÑÂÖ∂‰∏≠‰∏ÄÁªÑÊ†∏ÂøÉÊñπÊ≥ïÔºàÂè™‰ªãÁªçÂÖ∂‰∏≠‰∏ÄÁªÑÔºåÂÖ∂ÂÆÉ‰∏âÁªÑÁ±ª‰ººÔºâÔºö</p>
<table>
<thead>
<tr>
<th>ÊñπÊ≥ïÂêç</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody><tr>
<td>offer(anObject)</td>
<td>Ë°®Á§∫Â¶ÇÊûúÂèØ‰ª•ÁöÑËØùÔºåÂ∞ÜanObjectÂä†Âà∞BlockingQueueÈáåÔºåÊîæÂÖ•ÊàêÂäüËøîÂõûtrueÔºåÂê¶ÂàôËøîÂõûfalse„ÄÇ</td>
</tr>
<tr>
<td>offer(E o, long timeout, TimeUnit unit)</td>
<td>ÂèØ‰ª•ËÆæÂÆöÁ≠âÂæÖÁöÑÊó∂Èó¥ÔºåÂ¶ÇÊûúÂú®ÊåáÂÆöÁöÑÊó∂Èó¥ÂÜÖÔºåËøò‰∏çËÉΩÂæÄÈòüÂàó‰∏≠Âä†ÂÖ•BlockingQueueÔºåÂàôËøîÂõûÂ§±Ë¥•„ÄÇ</td>
</tr>
<tr>
<td>put(anObject)</td>
<td>ÊääanObjectÂä†Âà∞BlockingQueueÈáå,Â¶ÇÊûúBlockQueueÊ≤°ÊúâÁ©∫Èó¥,ÂàôË∞ÉÁî®Ê≠§ÊñπÊ≥ïÁöÑÁ∫øÁ®ãË¢´ÈòªÊñ≠Áõ¥Âà∞BlockingQueueÈáåÈù¢ÊúâÁ©∫Èó¥ÂÜçÁªßÁª≠„ÄÇ</td>
</tr>
<tr>
<td>poll(time)</td>
<td>ÂèñËµ∞BlockingQueueÈáåÊéíÂú®È¶ñ‰ΩçÁöÑÂØπË±°,Ëã•‰∏çËÉΩÁ´ãÂç≥ÂèñÂá∫,ÂàôÂèØ‰ª•Á≠âtimeÂèÇÊï∞ËßÑÂÆöÁöÑÊó∂Èó¥,Âèñ‰∏çÂà∞Êó∂ËøîÂõûnull„ÄÇ</td>
</tr>
<tr>
<td>poll(long timeout, TimeUnit unit)</td>
<td>‰ªéBlockingQueueÂèñÂá∫‰∏Ä‰∏™ÈòüÈ¶ñÁöÑÂØπË±°ÔºåÂ¶ÇÊûúÂú®ÊåáÂÆöÊó∂Èó¥ÂÜÖÔºåÈòüÂàó‰∏ÄÊó¶ÊúâÊï∞ÊçÆÂèØÂèñÔºåÂàôÁ´ãÂç≥ËøîÂõûÈòüÂàó‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇÂê¶ÂàôÁõ¥Âà∞Êó∂Èó¥Ë∂ÖÊó∂ËøòÊ≤°ÊúâÊï∞ÊçÆÂèØÂèñÔºåËøîÂõûÂ§±Ë¥•„ÄÇ</td>
</tr>
<tr>
<td>take()</td>
<td>ÂèñËµ∞BlockingQueueÈáåÊéíÂú®È¶ñ‰ΩçÁöÑÂØπË±°,Ëã•BlockingQueue‰∏∫Á©∫,ÈòªÊñ≠ËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÁõ¥Âà∞BlockingQueueÊúâÊñ∞ÁöÑÊï∞ÊçÆË¢´Âä†ÂÖ•;„ÄÇ</td>
</tr>
<tr>
<td>drainTo()</td>
<td>‰∏ÄÊ¨°ÊÄß‰ªéBlockingQueueËé∑ÂèñÊâÄÊúâÂèØÁî®ÁöÑÊï∞ÊçÆÂØπË±°ÔºàËøòÂèØ‰ª•ÊåáÂÆöËé∑ÂèñÊï∞ÊçÆÁöÑ‰∏™Êï∞ÔºâÔºåÈÄöËøáËØ•ÊñπÊ≥ïÔºåÂèØ‰ª•ÊèêÂçáËé∑ÂèñÊï∞ÊçÆÊïàÁéáÔºõ‰∏çÈúÄË¶ÅÂ§öÊ¨°ÂàÜÊâπÂä†ÈîÅÊàñÈáäÊîæÈîÅ„ÄÇ</td>
</tr>
</tbody></table>
<p>Âú®ArrayBlockingQueue‰∏≠ÂØπpoll(long timeout, TimeUnit unit) ÊñπÊ≥ïÁöÑÂÖ∑‰ΩìÂÆûÁé∞Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">(<span class="type">long</span> timeout, TimeUnit unit)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    <span class="comment">// Â∫ïÂ±ÇÁªü‰∏ÄÊòØ‰ª•Á∫≥Áßí‰Ωú‰∏∫Êó∂Èó¥ÁöÑËÆ°ÁÆóÂçï‰ΩçÁöÑ</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">nanos</span> <span class="operator">=</span> unit.toNanos(timeout);</span><br><span class="line">    <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="built_in">this</span>.lock;</span><br><span class="line">    lock.lockInterruptibly();</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// ËΩÆËØ¢Ëé∑ÂèñÂÖÉÁ¥†Âá∫ÈòüÂàó</span></span><br><span class="line">        <span class="keyword">while</span> (count == <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">if</span> (nanos &lt;= <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            nanos = notEmpty.awaitNanos(nanos);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> dequeue();</span><br><span class="line">    } <span class="keyword">finally</span> {</span><br><span class="line">        lock.unlock();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>Â∫îÁî®Á§∫‰æã</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">BlockingQueue&lt;String&gt; queue = <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">3</span>);</span><br><span class="line"><span class="comment">// ÂêåÊ≠•ÈòüÂàó‰∏çÂ≠òÂÇ®ÂÖÉÁ¥†Ôºö‰∏Ä‰∏™ÂÖÉÁ¥†ËøõÂá∫ÂÆåÊàêÂêéÔºå‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†ÊâçËÉΩËøõÂá∫„ÄÇ</span></span><br><span class="line">BlockingQueue&lt;String&gt; syncQueue = <span class="keyword">new</span> <span class="title class_">SynchronousQueue</span>&lt;&gt;();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÊäõÂºÇÂ∏∏:</span></span><br><span class="line"><span class="comment"> * add()„ÄÅremove()„ÄÅelement()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> {</span><br><span class="line">    <span class="comment">// ============== add ============= //</span></span><br><span class="line">    queue.add(<span class="string">"1"</span>);</span><br><span class="line">    queue.add(<span class="string">"2"</span>);</span><br><span class="line">    queue.add(<span class="string">"3"</span>);</span><br><span class="line">    <span class="comment">// ÂÜçËøõ‰∏Ä‰∏™ÂÖÉÁ¥†ÂàôÊä•Èîô</span></span><br><span class="line">    queue.add(<span class="string">"4"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ============== element ============= //</span></span><br><span class="line">    <span class="comment">// Ê£ÄÊü•ÈòüÈ¶ñÂÖÉÁ¥†ÔºàËØ•Êìç‰Ωú‰∏ç‰ºöÂá∫ÈòüÂàóÔºâ</span></span><br><span class="line">    System.out.println(queue.element());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ============== remove ============= //</span></span><br><span class="line">    System.out.println(queue.remove());</span><br><span class="line">    System.out.println(queue.remove());</span><br><span class="line">    System.out.println(queue.remove());</span><br><span class="line">    <span class="comment">// ÂÜçÂèñ‰∏Ä‰∏™</span></span><br><span class="line">    System.out.println(queue.remove());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ‰∏çÊäõÂºÇÂ∏∏ÔºåÊúâËøîÂõûÂÄº</span></span><br><span class="line"><span class="comment"> * offer()„ÄÅpoll()„ÄÅpeek()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> {</span><br><span class="line">    <span class="comment">// ============== offer ============= //</span></span><br><span class="line">    queue.offer(<span class="string">"1"</span>);</span><br><span class="line">    queue.offer(<span class="string">"2"</span>);</span><br><span class="line">    queue.offer(<span class="string">"3"</span>);</span><br><span class="line">    <span class="comment">// ÂÜçÊ∑ªÂä†‰∏Ä‰∏™</span></span><br><span class="line">    System.out.println(queue.offer(<span class="string">"4"</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ============== poll ============= //</span></span><br><span class="line">    <span class="comment">// Ê£ÄÊü•ÈòüÈ¶ñÂÖÉÁ¥†ÔºàËØ•Êìç‰Ωú‰∏ç‰ºöÂá∫ÈòüÂàóÔºâ</span></span><br><span class="line">    System.out.println(queue.peek());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ============== peek ============= //</span></span><br><span class="line">    queue.poll();</span><br><span class="line">    queue.poll();</span><br><span class="line">    queue.poll();</span><br><span class="line">    System.out.println(queue.size());</span><br><span class="line">    <span class="comment">// ÂÜçÂèñ‰∏Ä‰∏™</span></span><br><span class="line">    System.out.println(queue.poll());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÈòªÂ°ûÁ≠âÂæÖ</span></span><br><span class="line"><span class="comment"> * put„ÄÅtake</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    <span class="comment">// ============== put ============= //</span></span><br><span class="line">    queue.put(<span class="string">"1"</span>);</span><br><span class="line">    queue.put(<span class="string">"2"</span>);</span><br><span class="line">    queue.put(<span class="string">"3"</span>);</span><br><span class="line">    <span class="comment">// ÂÜçÊ∑ªÂä†‰∏Ä‰∏™ÔºåÈòªÂ°û</span></span><br><span class="line">    queue.put(<span class="string">"4"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ============== take ============= //</span></span><br><span class="line">    queue.take();</span><br><span class="line">    queue.take();</span><br><span class="line">    queue.take();</span><br><span class="line">    System.out.println(queue.size());</span><br><span class="line">    <span class="comment">// ÂÜçÂèñ‰∏Ä‰∏™ÔºåÈòªÂ°û</span></span><br><span class="line">    queue.take();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ë∂ÖÊó∂Á≠âÂæÖ</span></span><br><span class="line"><span class="comment"> * offer„ÄÅpoll</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    queue.offer(<span class="string">"1"</span>);</span><br><span class="line">    queue.offer(<span class="string">"2"</span>);</span><br><span class="line">    queue.offer(<span class="string">"3"</span>);</span><br><span class="line">    <span class="comment">// 2sÂêéÂÖ•ÈòüÂàóÂ§±Ë¥•</span></span><br><span class="line">    System.out.println(queue.offer(<span class="string">"4"</span>, <span class="number">2</span>, TimeUnit.SECONDS));</span><br><span class="line"></span><br><span class="line">    queue.poll();</span><br><span class="line">    queue.poll();</span><br><span class="line">    queue.poll();</span><br><span class="line">    System.out.println(queue.size());</span><br><span class="line">    <span class="comment">// 2sÂêéÂá∫ÈòüÂàóÂ§±Ë¥•</span></span><br><span class="line">    System.out.println(queue.poll(<span class="number">2</span>, TimeUnit.SECONDS));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SynchronousQueue"><a href="#SynchronousQueue" class="headerlink" title="SynchronousQueue"></a>SynchronousQueue</h3><p>ÂêåÊ≠•ÈòüÂàóÔºå‰∏çÂ≠òÂÇ®ÂÖÉÁ¥†Ôºå‰∏Ä‰∏™ÂÖÉÁ¥†ËøõÂá∫ÂÆåÊàêÂêéÔºå‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†ÊâçËÉΩËøõÂá∫„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÂêåÊ≠•ÈòüÂàó</span></span><br><span class="line"><span class="comment"> * ÂàõÂª∫‰∏§‰∏™Á∫øÁ®ãÔºöÁ∫øÁ®ã‰∏ÄÂ≠òÂèñ‰∏â‰∏™ÂÖÉÁ¥†ÔºåÁ∫øÁ®ã‰∫åËØªÂèñ‰∏â‰∏™ÂÖÉÁ¥†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">" put 1"</span>);</span><br><span class="line">            syncQueue.put(<span class="string">"1"</span>);</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">" put 2"</span>);</span><br><span class="line">            syncQueue.put(<span class="string">"2"</span>);</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">" put 3"</span>);</span><br><span class="line">            syncQueue.put(<span class="string">"3"</span>);</span><br><span class="line">        } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }, <span class="string">"A"</span>).start();</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// Á≠âÂæÖ‰∏§ÁßíÂÜçÂèñÔºåÁ°Æ‰øùÁ∫øÁ®ã1ÂÖ•ÈòüÂàóÊàêÂäü</span></span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"=&gt;"</span> + syncQueue.take());</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"=&gt;"</span> + syncQueue.take());</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"=&gt;"</span> + syncQueue.take());</span><br><span class="line">        } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }, <span class="string">"B"</span>).start();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="PriorityQueue-‰ºòÂÖàÁ∫ßÈòüÂàó"><a href="#PriorityQueue-‰ºòÂÖàÁ∫ßÈòüÂàó" class="headerlink" title="PriorityQueue ‰ºòÂÖàÁ∫ßÈòüÂàó"></a>PriorityQueue ‰ºòÂÖàÁ∫ßÈòüÂàó</h3><p>PriorityQueueÊòØ‰∏Ä‰∏™Â∏¶Êúâ‰ºòÂÖàÁ∫ßÁöÑÈòüÂàóÔºåËÄå‰∏çÊòØÂÖàËøõÂÖàÂá∫ÈòüÂàóÔºåÂÖÉÁ¥†Êåâ‰ºòÂÖàÁ∫ßÈ°∫Â∫èË¢´ÁßªÈô§ÔºåËØ•ÈòüÂàó‰πüÊ≤°Êúâ‰∏äÈôêÔºàÂç≥ Integer.MAX_VALUEÔºâÔºåÊó†ÂÆπÈáèÈôêÂà∂ÔºåËá™Âä®Êâ©ÂÆπ„ÄÇ</p>
<p>Ê≠§ÈòüÂàóËôΩÁÑ∂Ê≤°ÊúâÂÆπÈáèÈôêÂà∂Ôºå‰ΩÜÊòØ‰ºöÁî±‰∫éÊúçÂä°Âô®ËµÑÊ∫êËÄóÂ∞ΩÊäõOutOfMemoryErrorÂºÇÂ∏∏„ÄÇ</p>
<p>Â¶ÇÊûúÈòüÂàó‰∏∫Á©∫ÔºåÈÇ£‰πàÂèñÂÖÉÁ¥†ÁöÑÊìç‰ΩútakeÂ∞±‰ºöÈòªÂ°ûÔºåÊâÄ‰ª•Ê£ÄÁ¥¢Êìç‰ΩútakeÊòØÂèóÈòªÁöÑ„ÄÇ</p>
<p>ÊîæÂÖ•PriorityQueue‰∏≠ÁöÑÂÖÉÁ¥†ÈúÄË¶ÅÂÖ∑ÊúâÊØîËæÉËÉΩÂäõ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PriorityQueueDemo</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// ËÆæÁΩÆÊØîÂØπÊñπÂºè</span></span><br><span class="line">        PriorityQueue&lt;String&gt; priorityQueue = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;String&gt;() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String o1, String o2)</span> {</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        priorityQueue.add(<span class="string">"c"</span>);</span><br><span class="line">        priorityQueue.add(<span class="string">"a"</span>);</span><br><span class="line">        priorityQueue.add(<span class="string">"b"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(priorityQueue.poll());</span><br><span class="line">        System.out.println(priorityQueue.poll());</span><br><span class="line">        System.out.println(priorityQueue.poll());</span><br><span class="line"></span><br><span class="line">		<span class="comment">// ÂÆö‰πâMessageObjectÂ≠òÊîæÁöÑ‰ºòÂÖàÁ∫ß</span></span><br><span class="line">        PriorityQueue&lt;MessageObject&gt; MessageObjectQueue = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;MessageObject&gt;() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(MessageObject o1, MessageObject o2)</span> {</span><br><span class="line">                <span class="comment">// OrderÊØîËæÉÂ§ßÁöÑMessageObjectÊîæÂêéÈù¢</span></span><br><span class="line">                <span class="keyword">return</span> o1.order &gt; o2.order ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MessageObject</span> {</span><br><span class="line">        String content;</span><br><span class="line">        <span class="type">int</span> order;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏ãÈù¢Êé¢ÂØª‰∏Ä‰∏ãÂª∂Êó∂ÈòüÂàóÁöÑÂÆûÁé∞ÂéüÁêÜ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DelayQueue</span>&lt;E <span class="keyword">extends</span> <span class="title class_">Delayed</span>&gt; <span class="keyword">extends</span> <span class="title class_">AbstractQueue</span>&lt;E&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">BlockingQueue</span>&lt;E&gt; {</span><br><span class="line">    <span class="comment">// Âü∫‰∫éPriorityQueueÊù•ÂÆûÁé∞ÁöÑÂª∂Êó∂ÈòüÂàó</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> PriorityQueue&lt;E&gt; q = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;E&gt;();</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>DelayQueueÁöÑÊ≥õÂûãÂøÖÈ°ªÂÆûÁé∞DelayedÊé•Âè£„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Delayed</span> <span class="keyword">extends</span> <span class="title class_">Comparable</span>&lt;Delayed&gt; {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the remaining delay associated with this object, in the</span></span><br><span class="line"><span class="comment">     * given time unit.</span></span><br><span class="line"><span class="comment">     * Ëøô‰∏™ÂÖÉÁ¥†ÈúÄË¶ÅÂú®ÈòüÂàó‰∏≠ÂæÖÂ§ö‰πÖÊó∂Èó¥</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> unit the time unit</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the remaining delay; zero or negative values indicate</span></span><br><span class="line"><span class="comment">     * that the delay has already elapsed</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">long</span> <span class="title function_">getDelay</span><span class="params">(TimeUnit unit)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>Â∫îÁî®Á§∫‰æã</strong></p>
<p>Á∫øÁ®ãÊ±†‰∏≠ÁöÑÂÆöÊó∂Ë∞ÉÂ∫¶Â∞±ÊòØ‰ΩøÁî®ËøôÊ†∑ÁöÑÊñπÊ≥ïÂÆûÁé∞ÁöÑ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DelayQueueDemo</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">        DelayQueue&lt;Message&gt; delayQueue = <span class="keyword">new</span> <span class="title class_">DelayQueue</span>&lt;Message&gt;();</span><br><span class="line">        <span class="comment">// ËøôÊù°Ê∂àÊÅØ5ÁßíÂêéÂèëÈÄÅ</span></span><br><span class="line">        <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Message</span>(<span class="string">"message - 00001"</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis() + <span class="number">5000L</span>));</span><br><span class="line">        delayQueue.add(message);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) {</span><br><span class="line">            System.out.println(delayQueue.poll());</span><br><span class="line">            Thread.sleep(<span class="number">1000L</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÂÆûÁé∞DelayedÊé•Âè£ÁöÑÂÖÉÁ¥†ÊâçËÉΩÂ≠òÂà∞DelayQueue</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Message</span> <span class="keyword">implements</span> <span class="title class_">Delayed</span> {</span><br><span class="line">        String content;</span><br><span class="line">        Date sendTime;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> content  Ê∂àÊÅØÂÜÖÂÆπ</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> sendTime ÂÆöÊó∂ÂèëÈÄÅ</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Message</span><span class="params">(String content, Date sendTime)</span> {</span><br><span class="line">            <span class="built_in">this</span>.content = content;</span><br><span class="line">            <span class="built_in">this</span>.sendTime = sendTime;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Âà§Êñ≠ÂΩìÂâçËøô‰∏™ÂÖÉÁ¥†ÊòØ‰∏çÊòØÂ∑≤ÁªèÂà∞‰∫ÜÈúÄË¶ÅË¢´ÊãøÂá∫Êù•ÁöÑÊó∂Èó¥</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getDelay</span><span class="params">(TimeUnit unit)</span> {</span><br><span class="line">            <span class="type">long</span> <span class="variable">duration</span> <span class="operator">=</span> sendTime.getTime() - System.currentTimeMillis();</span><br><span class="line">            <span class="keyword">return</span> TimeUnit.NANOSECONDS.convert(duration, TimeUnit.MILLISECONDS);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Delayed o)</span> {</span><br><span class="line">            <span class="keyword">return</span> o.getDelay(TimeUnit.NANOSECONDS) &gt; <span class="built_in">this</span>.getDelay(TimeUnit.NANOSECONDS) ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Â∏∏Áî®ÁöÑÊéíÂ∫èÊñπÊ≥ï</title>
    <url>/p/b07f48bf.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="ÂÜíÊ≥°ÊéíÂ∫è"><a href="#ÂÜíÊ≥°ÊéíÂ∫è" class="headerlink" title="ÂÜíÊ≥°ÊéíÂ∫è"></a>ÂÜíÊ≥°ÊéíÂ∫è</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bubble</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]{<span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">4</span>};</span><br><span class="line">        sort(arr);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; arr.length - i; j++) {</span><br><span class="line">                <span class="keyword">if</span> (arr[j - <span class="number">1</span>] &gt; arr[j]) {</span><br><span class="line">                    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[j - <span class="number">1</span>];</span><br><span class="line">                    arr[j - <span class="number">1</span>] = arr[j];</span><br><span class="line">                    arr[j] = temp;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÈÄâÊã©ÊéíÂ∫è"><a href="#ÈÄâÊã©ÊéíÂ∫è" class="headerlink" title="ÈÄâÊã©ÊéíÂ∫è"></a>ÈÄâÊã©ÊéíÂ∫è</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Selection</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]{<span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">4</span>};</span><br><span class="line">        sort(arr);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) {</span><br><span class="line">            <span class="type">int</span> <span class="variable">minIndex</span> <span class="operator">=</span> i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; arr.length; j++) {</span><br><span class="line">                <span class="keyword">if</span> (arr[minIndex] &gt; arr[j]) {</span><br><span class="line">                    minIndex = j;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            arr[i] = arr[minIndex];</span><br><span class="line">            arr[minIndex] = temp;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÊèíÂÖ•ÊéíÂ∫è"><a href="#ÊèíÂÖ•ÊéíÂ∫è" class="headerlink" title="ÊèíÂÖ•ÊéíÂ∫è"></a>ÊèíÂÖ•ÊéíÂ∫è</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Insertion</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]{<span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">4</span>};</span><br><span class="line">        sort(arr);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &gt; <span class="number">0</span>; j--) {</span><br><span class="line">                <span class="keyword">if</span> (arr[j - <span class="number">1</span>] &gt; arr[j]) {</span><br><span class="line">                    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                    arr[j] = arr[j - <span class="number">1</span>];</span><br><span class="line">                    arr[j - <span class="number">1</span>] = temp;</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Â∏åÂ∞îÊéíÂ∫è"><a href="#Â∏åÂ∞îÊéíÂ∫è" class="headerlink" title="Â∏åÂ∞îÊéíÂ∫è"></a>Â∏åÂ∞îÊéíÂ∫è</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Shell</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span> {</span><br><span class="line">        <span class="comment">// Â¢ûÈïøÈáèh</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (h &lt;= arr.length / <span class="number">2</span>) {</span><br><span class="line">            h = h * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">while</span> (h &gt;= <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> h; i &lt; arr.length; i++) {</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &gt;= h; j -= h) {</span><br><span class="line">                    <span class="keyword">if</span> (arr[j - h] &gt; arr[j]) {</span><br><span class="line">                        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                        arr[j] = arr[j - h];</span><br><span class="line">                        arr[j - h] = temp;</span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// ÂáèÂ∞èÂ¢ûÈïøÈáè</span></span><br><span class="line">            h = h / <span class="number">2</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>AQSÊäΩË±°ÈòüÂàóÂêåÊ≠•Âô®</title>
    <url>/p/290c6541.html</url>
    <content><![CDATA[<html><head></head><body><p>AQSÂÖ®Áß∞‰∏∫AbstractQueuedSynchronizerÔºåÊèê‰æõ‰∫ÜÂØπËµÑÊ∫êÂç†Áî®„ÄÅÈáäÊîæÔºåÁ∫øÁ®ãÁ≠âÂæÖ„ÄÅÂî§ÈÜíÁ≠âÊé•Âè£ÂíåÂÖ∑‰ΩìÂÆûÁé∞„ÄÇÂèØ‰ª•Áî®Âú®ÂêÑÁßçÈúÄË¶ÅÊéßÂà∂ËµÑÊ∫ê‰∫âÁî®ÁöÑÂú∫ÊôØÔºå‰æãÂ¶ÇReentrantLock„ÄÅCountDownLatch„ÄÅSemphore‰∏≠„ÄÇ</p>
<h2 id="AQSÁªÑÊàêÈÉ®ÂàÜ"><a href="#AQSÁªÑÊàêÈÉ®ÂàÜ" class="headerlink" title="AQSÁªÑÊàêÈÉ®ÂàÜ"></a>AQSÁªÑÊàêÈÉ®ÂàÜ</h2><p><img src="/p/290c6541/AQS-%E6%8E%A5%E5%8F%A3.png" alt="image-20210513220313583"></p>
<p>acquire„ÄÅacquireSharedÔºöÂÆö‰πâ‰∫ÜËµÑÊ∫ê‰∫âÁî®ÁöÑÈÄªËæëÔºåÂ¶ÇÊûúÊ≤°ÊãøÂà∞ÂàôÁ≠âÂæÖ„ÄÇ</p>
<p>tryAcquire„ÄÅtryAcquireSharedÔºöÂÆûÈôÖÊâßË°åÂç†Áî®ËµÑÊ∫êÁöÑÊìç‰ΩúÔºåÂ¶Ç‰ΩïÂà§Êñ≠‰∏Ä‰∏™Áî±‰ΩøÁî®ËÄÖÂÖ∑‰ΩìÂéªÂÆûÁé∞„ÄÇ</p>
<p>release„ÄÅreleaseSharedÔºöÂÆö‰πâÈáäÊîæËµÑÊ∫êÁöÑÈÄªËæëÔºåÈáäÊîæ‰πãÂêéÈÄöÁü•ÂêéÁª≠ËäÇÁÇπËøõË°å‰∫âÊä¢„ÄÇ</p>
<p>tryRelease„ÄÅtryReleaseSharedÔºöÂÆûÈôÖÊâßË°åËµÑÊ∫êÈáäÊîæÁöÑÊìç‰ΩúÔºåÂÖ∑‰ΩìÁî±‰ΩøÁî®ËÄÖÂéªÂÆûÁé∞„ÄÇ</p>
<h2 id="ÁÆÄÂçïÂ∫îÁî®AQS"><a href="#ÁÆÄÂçïÂ∫îÁî®AQS" class="headerlink" title="ÁÆÄÂçïÂ∫îÁî®AQS"></a>ÁÆÄÂçïÂ∫îÁî®AQS</h2><p>ÈÄöËøáËøô‰∏™ÂÆû‰æãÂä†Ê∑±ÂØπAQSÁöÑÁêÜËß£Ôºå‰∏∫ÁúãÊáÇÊ∫êÁ†ÅÊâì‰∏ã‰∏ÄÂÆöÁöÑÂü∫Á°Ä„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAqs</span> {</span><br><span class="line">    <span class="comment">// Âç†Áî®ÂΩìÂâçËµÑÊ∫êÁöÑÁ∫øÁ®ã</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">volatile</span> AtomicReference&lt;Thread&gt; owner = <span class="keyword">new</span> <span class="title class_">AtomicReference</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// ‰øùÂ≠òÁ≠âÂæÖÁöÑÁ∫øÁ®ã</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">volatile</span> LinkedBlockingQueue&lt;Thread&gt; waiters = <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// ËÆ∞ÂΩïËµÑÊ∫êÁä∂ÊÄÅ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">volatile</span> <span class="type">AtomicInteger</span> <span class="variable">state</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">acquire</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">addQ</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (!tryAcquire()) {</span><br><span class="line">            <span class="keyword">if</span> (addQ) {</span><br><span class="line">                <span class="comment">// Ê≤°ÊãøÂà∞ÈîÅÔºåÂä†ÂÖ•Âà∞Á≠âÂæÖÈõÜÂêà</span></span><br><span class="line">                waiters.offer(Thread.currentThread());</span><br><span class="line">                addQ = <span class="literal">false</span>;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="comment">// ÈòªÂ°û„ÄÅÊåÇËµ∑ÂΩìÂâçÁöÑÁ∫øÁ®ã</span></span><br><span class="line">                LockSupport.park(); </span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// ÂΩìÂâçÁ∫øÁ®ãÊãøÂà∞ÈîÅÂêéÔºåÁßªÈô§ÂΩìÂâçÁ∫øÁ®ã</span></span><br><span class="line">        waiters.remove(Thread.currentThread()); </span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ‰∫§Áî±‰ΩøÁî®ËÄÖËá™Â∑±ÂÆûÁé∞</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">tryAcquire</span><span class="params">()</span> { </span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">if</span> (tryRelease()) {</span><br><span class="line">            <span class="comment">// ÈÄöÁü•Á≠âÂæÖËÄÖ</span></span><br><span class="line">            Iterator&lt;Thread&gt; iterator = waiters.iterator();</span><br><span class="line">            <span class="keyword">if</span> (iterator.hasNext()) {</span><br><span class="line">                <span class="type">Thread</span> <span class="variable">next</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">                <span class="comment">// ÂΩìÂâçÁ∫øÁ®ãÈáäÊîæËµÑÊ∫êÂêéÔºåÂî§ÈÜí‰∏ã‰∏Ä‰∏™Á∫øÁ®ã</span></span><br><span class="line">                LockSupport.unpark(next); </span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">tryRelease</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//================== ÂÖ±‰∫´ËµÑÊ∫êÈÄªËæë ==================//</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">acquireShared</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">addQ</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (tryAcquireShared() &lt; <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">if</span> (addQ) {</span><br><span class="line">                waiters.offer(Thread.currentThread());</span><br><span class="line">                addQ = <span class="literal">false</span>;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                LockSupport.park(); </span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        waiters.remove(Thread.currentThread());</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">tryAcquireShared</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    }</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">releaseShared</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">if</span> (tryReleaseShared()) {</span><br><span class="line">            Iterator&lt;Thread&gt; iterator = waiters.iterator();</span><br><span class="line">            <span class="keyword">if</span> (iterator.hasNext()) {</span><br><span class="line">                <span class="type">Thread</span> <span class="variable">next</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">                LockSupport.unpark(next);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">tryReleaseShared</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Áªô‰ΩøÁî®ËÄÖÊèê‰æõÁä∂ÊÄÅ‰øÆÊîπÊñπÊ≥ï</span></span><br><span class="line">    <span class="keyword">public</span> AtomicInteger <span class="title function_">getState</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(AtomicInteger state)</span> {</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="AQSÊ∫êÁ†ÅÈòÖËØª"><a href="#AQSÊ∫êÁ†ÅÈòÖËØª" class="headerlink" title="AQSÊ∫êÁ†ÅÈòÖËØª"></a>AQSÊ∫êÁ†ÅÈòÖËØª</h2><p>Ê∫êÁ†Å‰∏≠Á≠âÂæÖÈòüÂàóÁª¥Êä§ÁöÑÊòØ‰∏Ä‰∏™ÈìæË°®ÔºåËÄå‰∏çÊòØÊàë‰ª¨‰∏äÈù¢‰ΩøÁî®ÁöÑBlockingQueue„ÄÇ</p>
<p>Âú®Áã¨Âç†Ê®°Âºè‰∏ãÂøΩÁï•‰∏≠Êñ≠ÁöÑÊÉÖÂÜµËé∑ÂèñÈîÅ„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊãøÂà∞ÈîÅÂàôÂΩìÂâçÁ∫øÁ®ãÂ≠òÂÖ•ÈòüÂàóÁ≠âÂæÖÂêéÔºå‰∏çÊñ≠Â∞ùËØïËé∑ÂèñÈîÅÔºåÂÖ∑‰Ωì‰ª£Á†ÅÂú®acquireQueued() ‰∏≠„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">acquire</span><span class="params">(<span class="type">int</span> arg)</span> {</span><br><span class="line">    <span class="comment">// Âà§Êñ≠ÊòØÂê¶ÊãøÂà∞ÈîÅ</span></span><br><span class="line">    <span class="keyword">if</span> (!tryAcquire(arg) &amp;&amp; acquireQueued(addWaiter(Node.EXCLUSIVE), arg))</span><br><span class="line">        selfInterrupt();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">tryAcquire</span><span class="params">(<span class="type">int</span> arg)</span> {</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Â¶ÇÊûúÁ¨¨‰∏ÄÊ¨°ÊâßË°åtryAcquire() Ê≤°ÊúâÊãøÂà∞ÈîÅÔºåÂàôÂΩìÂâçÁ∫øÁ®ãÂ∞ÜËøõË°åËá™ÊóãÔºåÁõ¥Âà∞ÊàêÂäüÊãøÂà∞ÈîÅ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">acquireQueued</span><span class="params">(<span class="keyword">final</span> Node node, <span class="type">int</span> arg)</span> {</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">failed</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">interrupted</span> <span class="operator">=</span> <span class="literal">false</span>; <span class="comment">// ÂΩìÂâçÁ∫øÁ®ãÈáäÊîæ‰∏≠Êñ≠ÁöÑÊ†áÂøó‰Ωç</span></span><br><span class="line">        <span class="keyword">for</span> (;;) {<span class="comment">// ‰∏çÊñ≠Â∞ùËØï</span></span><br><span class="line">            <span class="keyword">final</span> <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> node.predecessor(); <span class="comment">// Ëé∑ÂèñÂâç‰∏Ä‰∏™ËäÇÁÇπ</span></span><br><span class="line">            <span class="keyword">if</span> (p == head &amp;&amp; tryAcquire(arg)) { <span class="comment">// Â¶ÇÊûúÂâç‰∏Ä‰∏™ËäÇÁÇπÊòØheadÔºåÂ∞ùËØïÊä¢‰∏ÄÊ¨°ÈîÅ</span></span><br><span class="line">                setHead(node); <span class="comment">// Êõ¥Êç¢head</span></span><br><span class="line">                p.next = <span class="literal">null</span>; <span class="comment">// help GC</span></span><br><span class="line">                failed = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">return</span> interrupted;</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// Ê£ÄÊü•Âú®ÂΩìÂâçËäÇÁÇπ‰πãÂâçÁöÑÁ∫øÁ®ãËäÇÁÇπÁä∂ÊÄÅÔºåÊòØÂê¶ÈúÄË¶ÅÊåÇËµ∑Á∫øÁ®ã</span></span><br><span class="line">            <span class="keyword">if</span> (shouldParkAfterFailedAcquire(p, node) &amp;&amp;</span><br><span class="line">                parkAndCheckInterrupt())<span class="comment">// Â¶ÇÊûúÈúÄË¶ÅÊåÇËµ∑ÔºåÂàôÈÄöËøáParkËøõÂÖ•ÂÅúËΩ¶Âú∫ÊåÇËµ∑</span></span><br><span class="line">                interrupted = <span class="literal">true</span>; <span class="comment">// Â¶ÇÊûúÂá∫Áé∞‰∏≠Êñ≠ÔºåÂàô‰øÆÊîπÊ†áËÆ∞</span></span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">finally</span> {</span><br><span class="line">        <span class="keyword">if</span> (failed)</span><br><span class="line">            cancelAcquire(node);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> Node <span class="title function_">predecessor</span><span class="params">()</span> <span class="keyword">throws</span> NullPointerException {</span><br><span class="line">    <span class="comment">// ÂΩìÂâçËäÇÁÇπÂâçÂ¶ÇÊûúÊ≤°ÊúâÂÖ∂ÂÆÉËäÇÁÇπÔºåÈÇ£Â∞±ËÇØÂÆöÊòØheadËäÇÁÇπ</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> prev;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">shouldParkAfterFailedAcquire</span><span class="params">(Node pred, Node node)</span> {</span><br><span class="line">    <span class="type">int</span> <span class="variable">ws</span> <span class="operator">=</span> pred.waitStatus; <span class="comment">// Ê†πÊçÆ ÂâçÁΩÆËäÇÁÇπÁöÑÁä∂ÊÄÅ ÊâßË°å‰∏çÂêåÁöÑÊµÅÁ®ã</span></span><br><span class="line">    <span class="keyword">if</span> (ws == Node.SIGNAL) <span class="comment">// ÂâçÁΩÆËäÇÁÇπÈáäÊîæÈîÅ‰πãÂêé‰ºöÈÄöÁü•ÂΩìÂâçÁ∫øÁ®ãÔºåÊåÇËµ∑Âêß</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * This node has already set status asking a release</span></span><br><span class="line"><span class="comment">         * to signal it, so it can safely park.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (ws &gt; <span class="number">0</span>) { <span class="comment">// ÂâçÁΩÆËäÇÁÇπÂ§Ñ‰∫éCANCELLEDÁä∂ÊÄÅÔºåË∑≥ËøáÂÆÉÁªßÁª≠ÂØªÊâæÊ≠£Â∏∏ÁöÑËäÇÁÇπÔºåÂπ∂‰∏îÁî©Êéâ‰∏≠Èó¥ÈÇ£ÊÆµ‰∏çÊ≠£Â∏∏ÁöÑËäÇÁÇπ</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * Predecessor was cancelled. Skip over predecessors and</span></span><br><span class="line"><span class="comment">         * indicate retry.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">do</span> { <span class="comment">// ‰πüÂèØ‰ª•ÁêÜËß£‰∏∫ÔºåËøôÊòØ‰∏ÄÊ¨°ÈòüÂàóÊ£ÄÊü•</span></span><br><span class="line">            node.prev = pred = pred.prev;</span><br><span class="line">        } <span class="keyword">while</span> (pred.waitStatus &gt; <span class="number">0</span>);</span><br><span class="line">        pred.next = node;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * waitStatus must be 0 or PROPAGATE.  Indicate that we</span></span><br><span class="line"><span class="comment">         * need a signal, but don't park yet.  Caller will need to</span></span><br><span class="line"><span class="comment">         * retry to make sure it cannot acquire before parking.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        compareAndSetWaitStatus(pred, ws, Node.SIGNAL); <span class="comment">// ‰øÆÊîπÂâçÁΩÆÁöÑÁä∂ÊÄÅ‰∏∫SIGNALÔºåÁî®ÊÑèÊòØÈáäÊîæÈîÅ‰πãÂêé‰ºöÈÄöÁü•ÂêéÁª≠ËäÇÁÇπ</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÈáäÊîæËµÑÊ∫ê„ÄÇËß£ÈîÅÊàêÂäüÂêéÔºåÂçïÂêëÈìæË°®‰∏≠ÁöÑÁ∫øÁ®ãËäÇÁÇπÂæÄÂêéÁßªÔºåÂî§ÈÜí‰∏ã‰∏Ä‰∏™Áä∂ÊÄÅÊ≠£Â∏∏ÁöÑÁ∫øÁ®ã„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">release</span><span class="params">(<span class="type">int</span> arg)</span> {</span><br><span class="line">    <span class="keyword">if</span> (tryRelease(arg)) {</span><br><span class="line">        <span class="type">Node</span> <span class="variable">h</span> <span class="operator">=</span> head; <span class="comment">// ‰ªéÂ§¥ÂºÄÂßãÊâæ</span></span><br><span class="line">        <span class="keyword">if</span> (h != <span class="literal">null</span> &amp;&amp; h.waitStatus != <span class="number">0</span>)</span><br><span class="line">            unparkSuccessor(h); <span class="comment">// Âî§ÈÜí‰∏ã‰∏Ä‰∏™Á∫øÁ®ã</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">tryRelease</span><span class="params">(<span class="type">int</span> arg)</span> {</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">unparkSuccessor</span><span class="params">(Node node)</span> {</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * If status is negative (i.e., possibly needing signal) try</span></span><br><span class="line"><span class="comment">     * to clear in anticipation of signalling.  It is OK if this</span></span><br><span class="line"><span class="comment">     * fails or if status is changed by waiting thread.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">ws</span> <span class="operator">=</span> node.waitStatus; <span class="comment">// Ê≠£Âú®ÈáäÊîæÈîÅÁöÑÁ∫øÁ®ãËäÇÁÇπÁä∂ÊÄÅ</span></span><br><span class="line">    <span class="keyword">if</span> (ws &lt; <span class="number">0</span>)</span><br><span class="line">        compareAndSetWaitStatus(node, ws, <span class="number">0</span>); <span class="comment">// ‰øÆÊîπÂΩìÂâçËäÇÁÇπÁä∂ÊÄÅ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * Thread to unpark is held in successor, which is normally</span></span><br><span class="line"><span class="comment">     * just the next node.  But if cancelled or apparently null,</span></span><br><span class="line"><span class="comment">     * traverse backwards from tail to find the actual</span></span><br><span class="line"><span class="comment">     * non-cancelled successor.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">s</span> <span class="operator">=</span> node.next; <span class="comment">// Êâæ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ</span></span><br><span class="line">    <span class="keyword">if</span> (s == <span class="literal">null</span> || s.waitStatus &gt; <span class="number">0</span>) { <span class="comment">// Â¶ÇÊûú‰∏çÂ≠òÂú®ÊàñËÄÖË¢´ÂèñÊ∂à‰∫ÜÔºåÁªßÁª≠ÂØªÊâæÂêàÈÄÇÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ</span></span><br><span class="line">        s = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> tail; t != <span class="literal">null</span> &amp;&amp; t != node; t = t.prev)</span><br><span class="line">            <span class="keyword">if</span> (t.waitStatus &lt;= <span class="number">0</span>)</span><br><span class="line">                s = t;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (s != <span class="literal">null</span>) <span class="comment">// Â¶ÇÊûúÊâæÂà∞‰∫ÜÂêàÈÄÇÁöÑËäÇÁÇπÔºåÂ∞±Âî§ÈÜíÂÆÉ</span></span><br><span class="line">        LockSupport.unpark(s.thread);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><p>ËµÑÊ∫êÂç†Áî®ÁöÑÂÆåÊï¥ÊµÅÁ®ã</p>
<p><img src="/p/290c6541/AQS-%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8%E6%B5%81%E7%A8%8B.png" alt="image-20210514131357784"></p>
</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>CAS</title>
    <url>/p/969d9481.html</url>
    <content><![CDATA[<html><head></head><body><p>Á∫øÁ®ãÁöÑ‰∏âÂ§ßÁâπÊÄßÔºöÂéüÂ≠êÊÄß„ÄÅÊúâÂ∫èÊÄß„ÄÅÂèØËßÅÊÄß„ÄÇ</p>
<ul>
<li><p>ÂéüÂ≠êÊÄßÔºö‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êìç‰ΩúÁöÑÁ®ãÂ∫èÊâßË°åËßÜ‰Ωú‰∏Ä‰∏™Êï¥‰ΩìÔºå‰∏çÂèØË¢´ÂàÜÂâ≤Ôºå‰∏çÂèØË¢´‰∏≠Êñ≠Ôºå‰∏çÂèØË¢´Â§ñÁïåÂπ≤Êâ∞Ôºå‰πüÂ∞±ÊòØËØ¥Âêå‰∏ÄÊó∂ÂàªÂè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãÊù•ÊâßË°åËøô‰∫õÊìç‰Ωú„ÄÇ</p>
</li>
<li><p>ÊúâÂ∫èÊÄßÔºöÁ®ãÂ∫èÊåâ‰∏ÄÂÆöËßÑÂàôËøõË°åÈ°∫Â∫èÁöÑÊâßË°å„ÄÇ</p>
</li>
<li><p>ÂèØËßÅÊÄßÔºöÂΩìÂ§ö‰∏™Á∫øÁ®ãËÆøÈóÆÂêå‰∏Ä‰∏™ÂèòÈáèÊó∂Ôºå‰∏Ä‰∏™Á∫øÁ®ã‰øÆÊîπ‰∫ÜËøô‰∏™ÂèòÈáèÁöÑÂÄºÔºåÂÖ∂‰ªñÁ∫øÁ®ãËÉΩÂ§üÁ´ãÂç≥ÁúãÁöÑÂà∞‰øÆÊîπÁöÑÂÄº„ÄÇ</p>
</li>
</ul>
<h2 id="‰ªÄ‰πàÊòØCASÔºü"><a href="#‰ªÄ‰πàÊòØCASÔºü" class="headerlink" title="‰ªÄ‰πàÊòØCASÔºü"></a>‰ªÄ‰πàÊòØCASÔºü</h2><p>CASÂú®JavaÂá∫Áé∞ÔºåÂú®Java‰∏≠Áß∞‰∏∫Ëá™ÊóãÈîÅ„ÄÇCASÁ±ª‰ºº‰∫ésynchronizedÈîÅÁöÑÂäüËÉΩÔºå‰ΩÜ‰∏§ËÄÖÂéüÁêÜ‰∏çÂêå„ÄÇ</p>
<p>CASÊú∫Âà∂ÂΩì‰∏≠‰ΩøÁî®‰∫Ü3‰∏™Âü∫Êú¨Êìç‰ΩúÊï∞ÔºöÂÜÖÂ≠òÂú∞ÂùÄVÔºåÊóßÁöÑÈ¢ÑÊúüÂÄºAÔºåË¶Å‰øÆÊîπÁöÑÊñ∞ÂÄºB„ÄÇÊõ¥Êñ∞‰∏Ä‰∏™ÂèòÈáèÁöÑÊó∂ÂÄôÔºåÂè™ÊúâÂΩìÂèòÈáèÁöÑÈ¢ÑÊúüÂÄºAÂíåÂÜÖÂ≠òÂú∞ÂùÄVÂΩì‰∏≠ÁöÑÂÆûÈôÖÂÄºÁõ∏ÂêåÊó∂ÔºåÊâç‰ºöÂ∞ÜÂÜÖÂ≠òÂú∞ÂùÄVÂØπÂ∫îÁöÑÂÄº‰øÆÊîπ‰∏∫B„ÄÇËøôÊ†∑ËØ¥ÊàñËÆ∏Êúâ‰∫õÊäΩË±°ÔºåÊàë‰ª¨Êù•Áúã‰∏Ä‰∏™‰æãÂ≠êÔºö</p>
<ol>
<li>Âú®ÂÜÖÂ≠òÂú∞ÂùÄVÂΩì‰∏≠ÔºåÂ≠òÂÇ®ÁùÄÂÄº‰∏∫10ÁöÑÂèòÈáè„ÄÇ</li>
</ol>
<p><img src="/p/969d9481/1193919-20180102142540362-571280295.png" alt="img"></p>
<ol start="2">
<li>Ê≠§Êó∂Á∫øÁ®ã1ÊÉ≥Ë¶ÅÊääÂèòÈáèÁöÑÂÄºÂ¢ûÂä†1„ÄÇÂØπÁ∫øÁ®ã1Êù•ËØ¥ÔºåÊóßÁöÑÈ¢ÑÊúüÂÄºA=10ÔºåË¶Å‰øÆÊîπÁöÑÊñ∞ÂÄºB=11„ÄÇ</li>
</ol>
<p><img src="/p/969d9481/1193919-20180102142542299-1617994496.png" alt="img"></p>
<ol start="3">
<li>Âú®Á∫øÁ®ã1Ë¶ÅÊèê‰∫§Êõ¥Êñ∞‰πãÂâçÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ã2Êä¢ÂÖà‰∏ÄÊ≠•ÔºåÊääÂÜÖÂ≠òÂú∞ÂùÄV‰∏≠ÁöÑÂèòÈáèÂÄºÁéáÂÖàÊõ¥Êñ∞Êàê‰∫Ü11„ÄÇ</li>
</ol>
<p><img src="/p/969d9481/1193919-20180102142543784-1625100143.png" alt="img"></p>
<ol start="4">
<li>Á∫øÁ®ã1ÂºÄÂßãÊèê‰∫§Êõ¥Êñ∞ÔºåÈ¶ñÂÖàËøõË°å<strong>AÂíåÂú∞ÂùÄVÁöÑÂÆûÈôÖÂÄºÊØîËæÉÔºàCompareÔºâ</strong>ÔºåÂèëÁé∞A‰∏çÁ≠â‰∫éVÁöÑÂÆûÈôÖÂÄºÔºåÊèê‰∫§Â§±Ë¥•„ÄÇ</li>
</ol>
<p><img src="/p/969d9481/1193919-20180102142545221-837543615.png" alt="img"></p>
<ol start="5">
<li>Á∫øÁ®ã1ÈáçÊñ∞Ëé∑ÂèñÂÜÖÂ≠òÂú∞ÂùÄVÁöÑÂΩìÂâçÂÄºÔºåÂπ∂ÈáçÊñ∞ËÆ°ÁÆóÊÉ≥Ë¶Å‰øÆÊîπÁöÑÊñ∞ÂÄº„ÄÇÊ≠§Êó∂ÂØπÁ∫øÁ®ã1Êù•ËØ¥ÔºåA=11ÔºåB=12„ÄÇËøô‰∏™ÈáçÊñ∞Â∞ùËØïÁöÑËøáÁ®ãË¢´Áß∞‰∏∫<strong>Ëá™Êóã</strong>„ÄÇ</li>
</ol>
<p><img src="/p/969d9481/1193919-20180102142546909-270453852.png" alt="img"></p>
<ol start="6">
<li>Ëøô‰∏ÄÊ¨°ÊØîËæÉÂπ∏ËøêÔºåÊ≤°ÊúâÂÖ∂‰ªñÁ∫øÁ®ãÊîπÂèòÂú∞ÂùÄVÁöÑÂÄº„ÄÇÁ∫øÁ®ã1ËøõË°å<strong>Compare</strong>ÔºåÂèëÁé∞AÂíåÂú∞ÂùÄVÁöÑÂÆûÈôÖÂÄºÊòØÁõ∏Á≠âÁöÑ„ÄÇ</li>
</ol>
<p><img src="/p/969d9481/1193919-20180102142548299-328053032-16464619321157.png" alt="img"></p>
<ol start="7">
<li>Á∫øÁ®ã1ËøõË°å<strong>SWAP</strong>ÔºåÊääÂú∞ÂùÄVÁöÑÂÄºÊõøÊç¢‰∏∫BÔºå‰πüÂ∞±ÊòØ12„ÄÇ</li>
</ol>
<p><img src="/p/969d9481/1193919-20180102142625753-443716413.png" alt="img"></p>
<p>‰ªéÊÄùÊÉ≥‰∏äÊù•ËØ¥ÔºåSynchronizedÂ±û‰∫é<strong>ÊÇ≤ËßÇÈîÅ</strong>ÔºåÊÇ≤ËßÇÂú∞ËÆ§‰∏∫Á®ãÂ∫è‰∏≠ÁöÑÂπ∂ÂèëÊÉÖÂÜµ‰∏•ÈáçÔºåÊâÄ‰ª•‰∏•Èò≤Ê≠ªÂÆà„ÄÇCASÂ±û‰∫é<strong>‰πêËßÇÈîÅ</strong>Ôºå‰πêËßÇÂú∞ËÆ§‰∏∫Á®ãÂ∫è‰∏≠ÁöÑÂπ∂ÂèëÊÉÖÂÜµ‰∏çÈÇ£‰πà‰∏•ÈáçÔºåÊâÄ‰ª•ËÆ©Á∫øÁ®ã‰∏çÊñ≠ÂéªÂ∞ùËØïÊõ¥Êñ∞„ÄÇ</p>
<h2 id="JDK‰∏≠ÁöÑCASÂ∫îÁî®ÂÆû‰æã"><a href="#JDK‰∏≠ÁöÑCASÂ∫îÁî®ÂÆû‰æã" class="headerlink" title="JDK‰∏≠ÁöÑCASÂ∫îÁî®ÂÆû‰æã"></a>JDK‰∏≠ÁöÑCASÂ∫îÁî®ÂÆû‰æã</h2><p>Âú®JDKÁöÑ java.util.concurrent.atomic ÂåÖ‰∏ãÔºå‰∏ÄÁ≥ªÂàó‰ª•AtomicÂºÄÂ§¥ÁöÑÂåÖË£ÖÁ±ª„ÄÇÂ¶ÇAtomicBooleanÔºåAtomicIntegerÔºåAtomicLong„ÄÇÂÆÉ‰ª¨ÂàÜÂà´Áî®‰∫éBooleanÔºåIntegerÔºåLongÁ±ªÂûãÁöÑÂéüÂ≠êÊÄßÊìç‰Ωú„ÄÇ</p>
<p>compareAndSetÂà©Áî®JNIÊù•ÂÆåÊàêCPUÊåá‰ª§ÁöÑÊìç‰Ωú„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">compareAndSet</span><span class="params">(<span class="type">int</span> expect, <span class="type">int</span> update)</span> {   </span><br><span class="line">    <span class="keyword">return</span> unsafe.compareAndSwapInt(<span class="built_in">this</span>, valueOffset, expect, update);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="CASÁöÑ‰ºòÁÇπ"><a href="#CASÁöÑ‰ºòÁÇπ" class="headerlink" title="CASÁöÑ‰ºòÁÇπ"></a>CASÁöÑ‰ºòÁÇπ</h2><h3 id="ÊèêÂçáÂêûÂêêÈáè"><a href="#ÊèêÂçáÂêûÂêêÈáè" class="headerlink" title="ÊèêÂçáÂêûÂêêÈáè"></a>ÊèêÂçáÂêûÂêêÈáè</h3><p>Á∫øÁ®ã‰∏ÄÁõ¥Â§Ñ‰∫éÊ¥ªË∑ÉÁä∂ÊÄÅÔºàÈùûÈòªÂ°ûÔºâÔºå‰∏çÈúÄË¶ÅCPUËøõË°åÈ¢ëÁπÅË∞ÉÂ∫¶„ÄÇ</p>
<h3 id="ÂèØÈÅøÂÖçÊ≠ªÈîÅ"><a href="#ÂèØÈÅøÂÖçÊ≠ªÈîÅ" class="headerlink" title="ÂèØÈÅøÂÖçÊ≠ªÈîÅ"></a>ÂèØÈÅøÂÖçÊ≠ªÈîÅ</h3><p>‰∏çÁî® synchronized Êàñ Lock ÂΩìÁÑ∂Â∞±ÂèØ‰ª•ÈÅøÂÖçÊ≠ªÈîÅ„ÄÇ</p>
<h2 id="CASÁöÑÂºäÁ´Ø"><a href="#CASÁöÑÂºäÁ´Ø" class="headerlink" title="CASÁöÑÂºäÁ´Ø"></a>CASÁöÑÂºäÁ´Ø</h2><h3 id="ABAÈóÆÈ¢ò"><a href="#ABAÈóÆÈ¢ò" class="headerlink" title="ABAÈóÆÈ¢ò"></a>ABAÈóÆÈ¢ò</h3><p>Âú®Âπ∂ÂèëÁéØÂ¢É‰∏ã‰ºöÂá∫Áé∞ÁöÑABAÈóÆÈ¢òÊòØCASÊú∫Âà∂‰∏≠ÁöÑ‰∏Ä‰∏™‰∏•ÈáçÂºäÁ´Ø„ÄÇ</p>
<blockquote>
<p>‰ªÄ‰πàÊòØABAÈóÆÈ¢òÔºü</p>
</blockquote>
<p>ÂÅáËÆæÁé∞Âú®Êúâ‰∏Ä‰ªΩËµÑÊ∫êÂàùÂßãÂÄº‰∏∫AÔºåÊ≠§Êó∂Êúâ‰∏â‰∏™Á∫øÁ®ãÂØπËøô‰ªΩËµÑÊ∫êËøõË°åCASÊìç‰ΩúÔºö</p>
<ul>
<li>Á∫øÁ®ã1ÔºåÊúüÊúõÂÄº‰∏∫AÔºåÊ¨≤Êõ¥Êñ∞ÂÄº‰∏∫B</li>
<li>Á∫øÁ®ã2ÔºåÊúüÊúõÂÄº‰∏∫AÔºåÊ¨≤Êõ¥Êñ∞ÂÄº‰∏∫B</li>
<li>Á∫øÁ®ã3ÔºåÊúüÊúõÂÄº‰∏∫BÔºåÊ¨≤Êõ¥Êñ∞ÂÄº‰∏∫A</li>
</ul>
<p>Á∫øÁ®ã1ÁéáÂÖàÊä¢Âà∞CPUÊó∂Èó¥ÁâáÔºåÁ∫øÁ®ã2Âõ†‰∏∫Êüê‰∫õÂéüÂõ†ÈòªÂ°û‰∫ÜÔºõÁ∫øÁ®ã1ÂèñÂÄº‰∏éAÊØîËæÉÔºåÂèëÁé∞Áõ∏Á≠âÂêéÂ∞ÜÂÄºÊîπ‰∏∫BÔºõÊ≠§Êó∂Á∫øÁ®ã3Âá∫Áé∞ÔºåÁ∫øÁ®ã3ÂèñÂÄº‰∏éBÊØîËæÉÔºåÂèëÁé∞Áõ∏Á≠âÂêéÊîπ‰∏∫AÔºõÊ≠§Êó∂Á∫øÁ®ã2‰ªéÈòªÂ°û‰∏≠ÊÅ¢Â§çÂºÄÂßãÊâßË°åÔºåÁ∫øÁ®ã2ÁöÑÂèñÂÄº‰∏éAÂØπÊØîÁõ∏Á≠âÔºåÊúÄÁªàÊîπ‰∏∫B„ÄÇ</p>
<p>Âú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÔºåÁ∫øÁ®ã2ËôΩÁÑ∂ÂÆåÊàê‰∫ÜÊìç‰ΩúÔºå‰ΩÜÁ∫øÁ®ã2Âπ∂‰∏çÁü•ÈÅìËØ•ÂÄºÁªèËøá‰∫Ü<code>A-&gt;B-&gt;A</code>ÁöÑËøô‰∏™ÂèòÂåñËøáÁ®ã„ÄÇ</p>
<p>ÁúãÂà∞ËøôÈáåÂèØËÉΩÂØπËøô‰∏™ABAÈóÆÈ¢òËøòÊòØÊ≤°ÊúâÊÑüËßâÔºåÂÜç‰∏æ‰∏™Áé∞ÂÆû‰∏≠ÁöÑÊ†óÂ≠êÔºö</p>
<p>Â∞èÊòé‰ªé‰ªñÁöÑÂ∑®È¢ùË¥¶Êà∑‰∏≠Â∑≤ÊúâÁöÑ100ÂÖÉ‰∏≠ÂèñËµ∞50ÂÖÉÔºåÈÇ£‰ªñÂèñËµ∞50ÂêéËøòÂâ©50ÔºåÂÅáËÆæÊèêÊ¨æÊú∫ÁöÑ‰ª£Á†ÅÊúâBUGÔºåÂêéÂè∞ÂºÄ‰∫Ü‰∏§‰∏™Á∫øÁ®ãÂéªÊâ£Ê¨æÔºö</p>
<ul>
<li>Á∫øÁ®ã1ÔºöËé∑ÂèñÂΩìÂâçÂÄº100ÔºåÊúüÊúõÊõ¥Êñ∞‰∏∫50Ôºõ</li>
<li>Á∫øÁ®ã2ÔºöËé∑ÂèñÂΩìÂâçÂÄº100ÔºåÊúüÊúõÊõ¥Êñ∞‰∏∫50Ôºõ</li>
<li>Á∫øÁ®ã1ÔºöÊâßË°åÊàêÂäüÔºåÁ∫øÁ®ã2ÊüêÁßçÂéüÂõ†ÈòªÂ°û‰∫ÜÔºåÊ≠§Êó∂Êüê‰∫∫ÁªôÂ∞èÊòéËΩ¨Ë¥¶50ÔºåÂºÄ‰∏Ä‰∏™Á∫øÁ®ã3ÂéªÂ§ÑÁêÜËΩ¨Ë¥¶„ÄÇ</li>
<li>Á∫øÁ®ã3ÔºöËé∑ÂèñÂΩìÂâçÂÄº50ÔºåÊúüÊúõÊõ¥Êñ∞‰∏∫100ÔºåÊ≠§Êó∂Á∫øÁ®ã3ÊâßË°åÊàêÂäüÔºå‰ΩôÈ¢ùÂèò‰∏∫100„ÄÇ</li>
<li>Á∫øÁ®ã2Ôºö‰ªéÈòªÂ°û‰∏≠ÊÅ¢Â§çÔºåËé∑ÂèñÂà∞ÁöÑ‰πüÊòØ100Ôºåcompare‰πãÂêéÔºåÁªßÁª≠Êõ¥Êñ∞‰ΩôÈ¢ù‰∏∫50ÔºÅÔºÅÔºÅÔºàÂ∞èÊòéÂì≠ÂîßÂîßÔºâ</li>
</ul>
<p>Ê≠§Êó∂ÂèØ‰ª•ÁúãÂà∞ÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÂ∞èÊòé‰ªé100ÂÖÉÂèñËµ∞50ËøòÂâ©50ÔºåÊúâ‰∫∫ËΩ¨Ë¥¶50ËøáÊù•ÔºåÈÇ£ÊúÄÁªàÂ∞èÊòéÁöÑÂ≠òÊ¨æ‰∏∫100ÂÖÉ„ÄÇÂú®Ëøô‰∏™Ê°à‰æã‰∏≠Ë¢´Ëøô‰∏™ÊèêÊ¨æÊú∫ÁöÑABAÈóÆÈ¢òÂºïÂèëÁöÑBUGÁªôÂºÑÊéâ‰∫Ü50ÂùóÈí±„ÄÇ</p>
<p>ABAÈóÆÈ¢òÁöÑÂÆû‰æã‰ª£Á†ÅÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">AtomicInteger</span> <span class="variable">DATA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">100</span>);</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">        <span class="comment">// Êä¢Âà∞CPUÊó∂Èó¥ÁâáÔºåÂºÄÂßãÂ∑•‰Ωú</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> DATA.compareAndSet(<span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"ÊòØÂê¶ÊàêÂäüÂ∞ÜDATAÁöÑÂÄº‰øÆÊîπ‰∏∫50Ôºö"</span> + b);</span><br><span class="line">        <span class="keyword">try</span> { Thread.sleep(<span class="number">1000</span>); } <span class="keyword">catch</span> (InterruptedException ignored) {}</span><br><span class="line">    }, <span class="string">"Á∫øÁ®ã1"</span>).start();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">        <span class="comment">// Âõ†Êüê‰∫õÂéüÂõ†ÈòªÂ°û‰∫Ü</span></span><br><span class="line">        <span class="keyword">try</span> { Thread.sleep(<span class="number">3000</span>); } <span class="keyword">catch</span> (InterruptedException ignored) {}</span><br><span class="line">        <span class="comment">// ÈòªÂ°ûÂêéÊÅ¢Â§çÂ∑•‰Ωú</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> DATA.compareAndSet(<span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"ÊòØÂê¶ÊàêÂäüÂ∞ÜDATAÁöÑÂÄº‰øÆÊîπ‰∏∫50Ôºö"</span> + b);</span><br><span class="line">    }, <span class="string">"Á∫øÁ®ã2"</span>).start();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">        <span class="keyword">try</span> { Thread.sleep(<span class="number">2000</span>); } <span class="keyword">catch</span> (InterruptedException ignored) {}</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> DATA.compareAndSet(<span class="number">50</span>, <span class="number">100</span>);</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"ÊòØÂê¶ÊàêÂäüÂ∞ÜDATAÁöÑÂÄº‰øÆÊîπ‰∏∫100Ôºö"</span> + b);</span><br><span class="line">    }, <span class="string">"Á∫øÁ®ã3"</span>).start();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Á≠âÂæÖÂÖ∂‰ªñÁ∫øÁ®ãÂÆåÊàêÔºå‰∏∫‰ªÄ‰πàÊòØ2ÔºåÂõ†‰∏∫‰∏Ä‰∏™ÊòØmainÁ∫øÁ®ãÔºå‰∏Ä‰∏™ÊòØÂêéÂè∞ÁöÑGCÁ∫øÁ®ã</span></span><br><span class="line">    <span class="keyword">while</span> (Thread.activeCount() &gt; <span class="number">2</span>) {</span><br><span class="line">        Thread.yield();</span><br><span class="line">    }</span><br><span class="line">    System.out.println(<span class="string">"DATAÊúÄÁªàÁöÑÂÄº‰∏∫Ôºö"</span> + DATA.get());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûúÔºö</p>
<figure class="highlight tex"><table><tbody><tr><td class="code"><pre><span class="line">Á∫øÁ®ã1ÊòØÂê¶ÊàêÂäüÂ∞ÜDATAÁöÑÂÄº‰øÆÊîπ‰∏∫50Ôºötrue</span><br><span class="line">Á∫øÁ®ã3ÊòØÂê¶ÊàêÂäüÂ∞ÜDATAÁöÑÂÄº‰øÆÊîπ‰∏∫100Ôºötrue</span><br><span class="line">Á∫øÁ®ã2ÊòØÂê¶ÊàêÂäüÂ∞ÜDATAÁöÑÂÄº‰øÆÊîπ‰∏∫50Ôºötrue</span><br><span class="line">DATAÊúÄÁªàÁöÑÂÄº‰∏∫Ôºö50</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ABAÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°à</p>
</blockquote>
<p>Ëøô‰∏™ÈóÆÈ¢òÂ∞±ÂÉèÊòØÔºöÊúâÂº†‰∏â„ÄÅÊùéÂõõ‰∏§‰∏™ÂçïË∫´ÁãóÔºåÂº†‰∏âÂú®Êüê‰∏™Êó∂Èó¥ÊÆµÂÜÖÊâæÂà∞Â•≥ÊúãÂèã‰ΩÜÊòØÂèàÂàÜÊâã‰∫ÜÔºå‰ΩÜÊ≤°ÂëäËØâÊùéÂõõÔºåÊ≠§Êó∂ÊùéÂõõËøòÊòØ‰ºöÂú®Âº†‰∏âÊòØÂçïË∫´ÁãóÁöÑÊÉÖÂÜµ‰∏ãÂ∏¶‰ªñÂéªÊ¥óËÑö„ÄÇËß£ÂÜ≥ÊñπÊ°àÂ∞±ÊòØÔºöÂº†‰∏âÊØèÊ¨°‰∫§Â•≥ÊúãÂèãÈÉΩÂñúÊ¨¢ÊôíÊúãÂèãÂúàÔºåÂº†‰∏âÊòØÊùéÂõõÁöÑÁâπÂà´ÂÖ≥ÂøÉÔºåÊØèÊ¨°Âº†‰∏âÂèëÊúãÂèãÂúàÈÉΩ‰ºöÊèêÈÜíÊùéÂõõÁúã„ÄÇ</p>
<p>CASÊòØ‰πêËßÇÈîÅÔºåËøòËÆ∞ÂæóMySQL‰∏≠‰πüÊúâ‰∏™‰πêËßÇÈîÅÂêóÔºüMySQL‰∏≠ÁöÑ‰πêËßÇÈîÅÊòØÊØèÊ¨°‰øÆÊîπÂÆåÊï∞ÊçÆÂêéÔºåÁïô‰∏ã‰∏Ä‰∏™ÁâàÊú¨Âè∑ÔºåÂú®ÊØèÊ¨°Ë¢´Êõ¥Êñ∞‰πãÂêéÁâàÊú¨Âè∑‰ºö+1ÔºåÂç≥ <code>A-&gt;B-&gt;A</code> Â∞±ÂèòÊàê‰∫Ü <code>1A-&gt;2B-&gt;3A</code> „ÄÇ</p>
<p>Ë°•ÂÖÖ‰∏ÄÁÇπÔºö</p>
<p>Integer ÁöÑÊ∫êÁ†ÅÔºàIntegerCacheÔºâ ÈáåÈù¢Áî®‰∫ÜÁºìÂ≠òÔºå‰ºöÁºìÂ≠ò[-128, 127] Âå∫Èó¥ÁöÑÂÄºÔºåÂú®‰ΩøÁî® AtomicInteger ÈúÄË¶ÅÊ†ºÂ§ñÊ≥®ÊÑèÔºÅÂæàÊúâÂèØËÉΩÂÄºË¢´‰øÆÊîπÊàêÂäüÂêéÔºå‰∏ã‰∏ÄÊ¨°Ë¢´getÊó∂Ôºå‰ºöÂõ†‰∏∫ÁºìÂ≠òÔºåËÄåÂèñÂà∞‰∏ä‰∏ÄÊ¨°ÁöÑÂÄº„ÄÇ</p>
<h3 id="CPUÂºÄÈîÄÂ§ß"><a href="#CPUÂºÄÈîÄÂ§ß" class="headerlink" title="CPUÂºÄÈîÄÂ§ß"></a>CPUÂºÄÈîÄÂ§ß</h3><p>Âú®Âπ∂ÂèëÈáèÊØîËæÉÈ´òÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúËÆ∏Â§öÁ∫øÁ®ãÂèçÂ§çÂ∞ùËØïÊõ¥Êñ∞Êüê‰∏Ä‰∏™ÂèòÈáèÔºåÂç¥Âèà‰∏ÄÁõ¥Êõ¥Êñ∞‰∏çÊàêÂäüÔºåÂæ™ÁéØÂæÄÂ§çÔºå‰ºöÁªôCPUÂ∏¶Êù•ÂæàÂ§ßÁöÑÂéãÂäõ„ÄÇ</p>
<h3 id="Âè™ËÉΩ‰øùËØÅ‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÁöÑÂéüÂ≠êÊìç‰Ωú"><a href="#Âè™ËÉΩ‰øùËØÅ‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÁöÑÂéüÂ≠êÊìç‰Ωú" class="headerlink" title="Âè™ËÉΩ‰øùËØÅ‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÁöÑÂéüÂ≠êÊìç‰Ωú"></a>Âè™ËÉΩ‰øùËØÅ‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÁöÑÂéüÂ≠êÊìç‰Ωú</h3><p>CASÊú∫Âà∂ÊâÄ‰øùËØÅÁöÑÂè™ÊòØ‰∏Ä‰∏™ÂèòÈáèÁöÑÂéüÂ≠êÊÄßÊìç‰ΩúÔºåËÄå‰∏çËÉΩ‰øùËØÅ<strong>Êï¥‰∏™‰ª£Á†ÅÂùó</strong>ÁöÑÂéüÂ≠êÊÄß„ÄÇÊØîÂ¶ÇÈúÄË¶Å‰øùËØÅ3‰∏™ÂèòÈáèÂÖ±ÂêåËøõË°åÂéüÂ≠êÊÄßÁöÑÊõ¥Êñ∞ÔºåÂ∞±‰∏çÂæó‰∏ç‰ΩøÁî®SynchronizedÊàñLock‰∫Ü„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>CPU‰ºòÂåñÊÄßËÉΩÁöÑÊâãÊÆµ</title>
    <url>/p/ffba6cb8.html</url>
    <content><![CDATA[<html><head></head><body><p>‰∏∫‰∫ÜÊèêÈ´òÁ®ãÂ∫èËøêË°åÁöÑÊÄßËÉΩÔºåÁé∞‰ª£CPUÂú®ÂæàÂ§öÊñπÈù¢ÂØπÁ®ãÂ∫èËøõË°å‰∫Ü‰ºòÂåñ„ÄÇ‰æãÂ¶ÇÔºöCPUÈ´òÈÄüÁºìÂ≠ò„ÄÇÂ∞ΩÂèØËÉΩÁöÑÈÅøÂÖçÂ§ÑÁêÜÂô®ËÆøÈóÆ‰∏ªÂ≠òÁöÑÊó∂Èó¥ÂºÄÈîÄÔºåÂ§ÑÁêÜÂô®Â§ßÂ§ö‰ºöÂà©Áî®ÁºìÂ≠òÊù•ÊèêÈ´òÊÄßËÉΩ„ÄÇ</p>
<h2 id="Â§öÁ∫ßÁºìÂ≠ò"><a href="#Â§öÁ∫ßÁºìÂ≠ò" class="headerlink" title="Â§öÁ∫ßÁºìÂ≠ò"></a>Â§öÁ∫ßÁºìÂ≠ò</h2><p><img src="/p/ffba6cb8/CPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E7%BA%A7%E5%88%AB.png" alt="CPUÈ´òÈÄüÁºìÂ≠òÁ∫ßÂà´"></p>
<h3 id="Á≠âÁ∫ßÂàíÂàÜ"><a href="#Á≠âÁ∫ßÂàíÂàÜ" class="headerlink" title="Á≠âÁ∫ßÂàíÂàÜ"></a>Á≠âÁ∫ßÂàíÂàÜ</h3><p>CPUÁöÑÁºìÂ≠òÂàÜ‰∏∫‰∏â‰∏™Á∫ßÂà´ÔºåÁ¶ªCPUË∂äËøúÁ≠âÁ∫ßË∂äÂ§ßÔºö</p>
<ul>
<li>L1 Cache(‰∏ÄÁ∫ßÁºìÂ≠ò)ÊòØCPUÁ¨¨‰∏ÄÂ±ÇÈ´òÈÄüÁºìÂ≠òÔºåÂàÜ‰∏∫<strong>Êï∞ÊçÆÁºìÂ≠ò</strong>Âíå<strong>Êåá‰ª§ÁºìÂ≠ò</strong>„ÄÇ‰∏ÄËà¨ÊúçÂä°Âô®CPUÁöÑL1ÁºìÂ≠òÂÆπÈáèÈÄöÂ∏∏Âú® 32-4096KBÔºàÂÆûÂú®ÊòØÂ§™Â∞è‰∫ÜÔºâ„ÄÇ</li>
<li>L2 Cache(‰∫åÁ∫ßÁºìÂ≠ò) Áî±‰∫éL1Á∫ßÈ´òÈÄüÁºìÂ≠òÂÆπÈáèÁöÑÈôêÂà∂Ôºå‰∏∫‰∫ÜÂÜçÊ¨°ÊèêÈ´òCPUÁöÑËøêÁÆóÈÄüÂ∫¶ÔºåÂú®CPUÂ§ñÈÉ®ÊîæÁΩÆ‰∏Ä‰∏™È´òÈÄüÂ≠òÂÇ®Âô®ÔºàÁî±‰∫éÂú®Â§ñÈÉ®ÔºåÊúâÂª∂ËøüÂØºËá¥ÈÄüÂ∫¶ËøòÊòØ‰∏çÂ§üÂø´Ôºâ„ÄÇ</li>
<li>L3 Áé∞Âú®ÁöÑÈÉΩÊòØÂÜÖÁΩÆÁöÑ„ÄÇL3ÁºìÂ≠òÁöÑÂ∫îÁî®ÂèØ‰ª•Ëøõ‰∏ÄÊ≠•Èôç‰ΩéÂÜÖÂ≠òÂª∂ËøüÔºåÂêåÊó∂ÊèêÂçáÂ§ßÊï∞ÊçÆÈáèËÆ°ÁÆóÊó∂ÁöÑÂ§ÑÁêÜÂô®ÊÄßËÉΩ„ÄÇÂÖ∑ÊúâËæÉÂ§ßL3ÁºìÂ≠òÁöÑÂ§ÑÁêÜÂô®Êèê‰æõÊõ¥ÊúâÊïàÁöÑÊñá‰ª∂Á≥ªÁªüÁºìÂ≠òË°å‰∏∫ÔºåÂèäËæÉÁü≠Ê∂àÊÅØÂíåÂ§ÑÁêÜÂô®ÈòüÂàóÈïøÂ∫¶„ÄÇ‰∏ÄËà¨ÊòØÂ§öÊ†∏ÂÖ±‰∫´‰∏Ä‰∏™L3ÁºìÂ≠ò„ÄÇ</li>
</ul>
<h3 id="ÁºìÂ≠òÁöÑÂêåÊ≠•ÂçèËÆÆ"><a href="#ÁºìÂ≠òÁöÑÂêåÊ≠•ÂçèËÆÆ" class="headerlink" title="ÁºìÂ≠òÁöÑÂêåÊ≠•ÂçèËÆÆ"></a>ÁºìÂ≠òÁöÑÂêåÊ≠•ÂçèËÆÆ</h3><p>Â§öCPUËØªÂèñÂêåÊ†∑ÁöÑÊï∞ÊçÆËøõË°åÁºìÂ≠òÔºåËøõË°å‰∏çÂêåÁöÑËøêÁÆó‰πãÂêéÔºåÊúÄÁªàÂÜôÂÖ•‰∏ªÂÜÖÂ≠òÔºåÈÇ£‰πà‰ª•Âì™‰∏™CPU‰∏∫ÂáÜÔºü</p>
<p>Ëøô‰∫õ CPU ÂéÇÂïÜÂ∞±Âà∂ÂÆö‰∫Ü‰∏Ä‰∏™ÁºìÂ≠ò‰∏ÄËá¥ÊÄßÁöÑÂçèËÆÆÔºåÂ∞±ÊòØ MESIÂçèËÆÆÔºåËßÑÂÆöÊØèÊù°ÁºìÂ≠òÊúâ‰∏Ä‰∏™Áä∂ÊÄÅ‰ΩçÔºåÂêåÊó∂ÂÆö‰πâ‰∫ÜÂõõ‰∏™Áä∂ÊÄÅÔºö</p>
<ul>
<li><p>‰øÆÊîπÊÄÅ(Modified) ÔºöÊ≠§cacheË°åÂ∑≤Ë¢´‰øÆÊîπËøá(ËÑèË°å)ÔºåÂÜÖÂÆπÂ∑≤‰∏çÂêå‰∫é‰∏ªÂ≠òÔºå‰∏∫Ê≠§cache‰∏ìÊúâ</p>
</li>
<li><p>‰∏ìÊúâÊÄÅ(Exclusive)ÔºöÊ≠§cacheË°åÂÜÖÂÆπÂêå‰∫é‰∏ªÂ≠òÔºå‰ΩÜ‰∏çÂá∫Áé∞‰∫éÂÖ∂‰ªñcache‰∏≠Ôºõ</p>
</li>
<li><p>ÂÖ±‰∫´ÊÄÅ(Shared)ÔºöÊ≠§cacheË°åÂÜÖÂÆπÂêå‰∫é‰∏ªÂ≠òÔºå‰ΩÜ‰πüÂá∫Áé∞‰∫éÂÖ∂‰ªñcache‰∏≠Ôºõ</p>
</li>
<li><p>Êó†ÊïàÊÄÅ(Invalid)ÔºöÊ≠§cacheË°åÂÜÖÂÆπÊó†Êïà(Á©∫Ë°å)Ôºõ</p>
</li>
</ul>
<p>Â§öÂ§ÑÁêÜÂô®Êó∂ÔºåÂçï‰∏™CPUÂØπÁºìÂ≠ò‰∏≠Êï∞ÊçÆËøõË°å‰∫ÜÊîπÂä®ÔºåÈúÄÈÄöÁü•ÁªôÂÖ∂‰ªñCPU„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåCPUÂ§ÑÁêÜË¶ÅÊéßÂà∂Ëá™Â∑±ÁöÑËØªÂÜôÊìç‰ΩúÔºåËøòË¶ÅÁõëÂê¨ÂÖ∂‰ªñCPUÂèëÂá∫ÁöÑÈÄöÁü•Ôºå‰ªéËÄå‰øùËØÅÊï∞ÊçÆÁöÑ<strong>ÊúÄÁªà‰∏ÄËá¥</strong>„ÄÇ</p>
<p>ÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰∏é‰∏ªÂ≠òÁöÑÊï∞ÊçÆÂπ∂‰∏çÊòØÂÆûÊó∂ÂêåÊ≠•ÁöÑÔºåÂêÑCPUÊ†∏ÂøÉÈó¥ÁöÑÁºìÂ≠òÊï∞ÊçÆ‰πü‰∏çÊòØÂÆûÊó∂ÂêåÊ≠•ÁöÑ„ÄÇÂú®Âêå‰∏ÄÊó∂Èó¥ÁÇπÔºåÂêÑ‰∏™CPUÊâÄÁúãÂà∞Âêå‰∏ÄÂÜÖÂ≠òÂú∞ÂùÄÁöÑÊï∞ÊçÆÂèØËÉΩÊòØ‰∏ç‰∏ÄËá¥ÁöÑÔºåÂ∞±‰ºöÂ≠òÂú®Á∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇ</p>
<h2 id="Êåá‰ª§ÈáçÊéí"><a href="#Êåá‰ª§ÈáçÊéí" class="headerlink" title="Êåá‰ª§ÈáçÊéí"></a>Êåá‰ª§ÈáçÊéí</h2><p>ÂΩìCPU<strong>ÂÜôÁºìÂ≠òÊó∂</strong>ÂèëÁé∞ÁºìÂ≠òÂå∫ÂùóÊ≠£Ë¢´ÂÖ∂‰ªñCPUÂç†Áî®Ôºå‰∏∫‰∫ÜÊèêÈ´òCPUÂ§ÑÁêÜÊÄßËÉΩÔºåÂèØËÉΩÂ∞ÜÂêéÈù¢ÁöÑ<strong>ËØªÁºìÂ≠òÂëΩ‰ª§‰ºòÂÖàÊâßË°å</strong>„ÄÇ</p>
<p><img src="/p/ffba6cb8/image-20220305180930700.png" alt="image-20220305180930700"></p>
<p><strong>ÈáçÊéíÈúÄË¶ÅÈÅµÂæ™ as-if-serial ËØ≠‰πâ</strong>Ôºö‰∏çÁÆ°ÊÄé‰πàÈáçÊéíÂ∫è(ÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®‰∏∫‰∫ÜÊèêÈ´òÂπ∂Ë°åÂ∫¶)Ôºå(ÂçïÁ∫øÁ®ã)Á®ãÂ∫èÁöÑÊâßË°åÁªìÊûú‰∏çËÉΩË¢´ÊîπÂèò„ÄÇÁºñËØëÂô®Ôºåruntime ÂíåÂ§ÑÁêÜÂô®ÈÉΩÂøÖÈ°ªÈÅµÂÆà as-if-serial ËØ≠‰πâ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºöÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®<strong>‰∏ç‰ºöÂØπÂ≠òÂú®Êï∞ÊçÆ‰æùËµñÂÖ≥Á≥ªÁöÑÊìç‰ΩúÂÅöÈáçÊéíÂ∫è</strong>„ÄÇ</p>
<p><code>as-if-serialËØ≠‰πâ</code>ÊääÂçïÁ∫øÁ®ãÁ®ãÂ∫è‰øùÊä§‰∫ÜËµ∑Êù•ÔºåÊç¢Âè•ËØùËØ¥Ôºö<code>as-if-serialËØ≠‰πâ</code>‰ªÖÂú®ÂçïCPUÂçïÁ∫øÁ®ãÁöÑÊÉÖÂÜµ‰∏ãËÉΩ‰øùËØÅÁªìÊûúÊ≠£Á°Æ„ÄÇÂ§öÊ†∏Â§öÁ∫øÁ®ã‰∏≠ÔºåÊåá‰ª§ÈÄªËæëÊó†Ê≥ïÂàÜËæ®Âõ†ÊûúÂÖ≥Á≥ªÔºåÂèØËÉΩ‰ºöÂá∫Áé∞<strong>‰π±Â∫èÊâßË°å</strong>ÔºåÂØºËá¥Á®ãÂ∫èËøêË°åÁªìÊûúÈîôËØØÔºåÂ∞±‰ºöÂ≠òÂú®Á∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇ</p>
<h2 id="ÂÜÖÂ≠òÂ±èÈöú"><a href="#ÂÜÖÂ≠òÂ±èÈöú" class="headerlink" title="ÂÜÖÂ≠òÂ±èÈöú"></a>ÂÜÖÂ≠òÂ±èÈöú</h2><p>‰∏çËÆ∫ÊòØÁºìÂ≠òÂêåÊ≠•ËøòÊòØÊåá‰ª§ÈáçÊéíÔºåÈÉΩÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑ„ÄÇ</p>
<p>Â§ÑÁêÜÂô®Êèê‰æõ‰∫Ü‰∏§‰∏™ÂÜÖÂ≠òÂ±èÈöúÊåá‰ª§(Memory Barrier)Áî®‰∫éËß£ÂÜ≥ÁºìÂ≠òÂêåÊ≠•ÂíåÊåá‰ª§ÈáçÊéíÁöÑÈóÆÈ¢ò„ÄÇ </p>
<ul>
<li><p>ËØªÂÜÖÂ≠òÂ±èÈöú(Load Memory Barrier)ÔºöÂú®Êåá‰ª§ÂâçÊèíÂÖ•Load BarrierÔºåÂèØ‰ª•ËÆ©È´òÈÄüÁºìÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂ§±ÊïàÔºåÂº∫Âà∂ÈáçÊñ∞‰ªé‰∏ªÂÜÖÂ≠òÂä†ËΩΩÊï∞ÊçÆ„ÄÇÂº∫Âà∂ËØªÂèñ‰∏ªÂÜÖÂ≠òÂÜÖÂÆπÔºåËÆ©CPUÁºìÂ≠ò‰∏é‰∏ªÂÜÖÂ≠ò‰øùÊåÅ‰∏ÄËá¥ÔºåÈÅøÂÖç‰∫ÜÁºìÂ≠òÂØºËá¥ÁöÑ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇ</p>
</li>
<li><p>ÂÜôÂÜÖÂ≠òÂ±èÈöú(Store Memory Barrier)ÔºöÂú®Êåá‰ª§ÂêéÊèíÂÖ•Store BarrierÔºåËÉΩËÆ©ÂÜôÂÖ•ÁºìÂ≠ò‰∏≠ÁöÑÊúÄÊñ∞Êï∞ÊçÆÊõ¥Êñ∞ÂÜôÂÖ•‰∏ªÂÜÖÂ≠òÔºåËÆ©ÂÖ∂‰ªñÁ∫øÁ®ãÂèØËßÅ„ÄÇÂº∫Âà∂ÂÜôÂÖ•‰∏ªÂÜÖÂ≠òÔºåËøôÁßçÊòæÁ§∫Ë∞ÉÁî®ÔºåCPUÂ∞±‰∏ç‰ºöÂõ†‰∏∫ÊÄßËÉΩËÄÉËôëËÄåÂéªÂØπÊåá‰ª§ÈáçÊéí„ÄÇ</p>
</li>
</ul>
</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>CallableÊé•Âè£</title>
    <url>/p/b279e65c.html</url>
    <content><![CDATA[<html><head></head><body><p>CallableÊòØ‰∏Ä‰∏™Êó†ÂÖ•ÂèÇÔºåÊúâËøîÂõûÂÄºÔºåÂèØÊäõÂºÇÂ∏∏ÁöÑ‰∏Ä‰∏™Êé•Âè£„ÄÇ</p>
<p>Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Callable</span>&lt;V&gt; {</span><br><span class="line">    V <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// RunnableÊé•Âè£Êó¢Êó†ËøîÂõûÂÄºÔºå‰πüÊó†ÂÖ•ÂèÇÔºå‰∏çËÉΩÊäõÂºÇÂ∏∏</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Runnable</span> {</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÈÄöÂ∏∏Áî®‰∫éÂ∏¶ËøîÂõûÂÄºÁöÑÁ∫øÁ®ãÔºåÂú®Á∫øÁ®ãÊâßË°åÂÆåÊØïÂêéÂõûË∞É‰∏Ä‰∏ãËøô‰∏™Êé•Âè£ÔºåÂÆûÁé∞ Callable&lt;T&gt; Êé•Âè£ÂàõÂª∫Á∫øÁ®ãÁ§∫‰æãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadCallable</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException {</span><br><span class="line">        <span class="comment">// FutureTaskÊòØ‰∏™ÈÄÇÈÖçÁ±ªÔºåÈÄÇÈÖçÂô®Ê®°Âºè</span></span><br><span class="line">        FutureTask&lt;String&gt; futureTask = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">MyThread0403</span>());</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(futureTask,<span class="string">"A"</span>).start();</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> futureTask.get();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ÂÆûÁé∞ Callable&lt;T&gt; Êé•Âè£</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread0403</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt; {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">"---&gt;Call()"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"1024"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>FutureTask</strong></p>
<p>FutureTask ÂÆûÁé∞‰∫ÜRunnableFutureÊé•Âè£ÔºåÂØπRunnableÊé•Âè£ÂíåCallableÊé•Âè£ÁöÑÁ∫øÁ®ãÂÅö‰∫ÜÈÄÇÈÖç„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FutureTask</span>&lt;V&gt; <span class="keyword">implements</span> <span class="title class_">RunnableFuture</span>&lt;V&gt; {}</span><br><span class="line"></span><br><span class="line"><span class="comment">// RunnableFutureÊé•Âè£ÁªßÊâø‰∏éRunnableÔºåFutureTaskÈó¥Êé•ÁöÑÂÆûÁé∞‰∫ÜRunnableÊé•Âè£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RunnableFuture</span>&lt;V&gt; <span class="keyword">extends</span> <span class="title class_">Runnable</span>, Future&lt;V&gt; {}</span><br></pre></td></tr></tbody></table></figure>

<p>FutureTask ÊòØÂèØÂèñÊ∂àÂºèÁöÑÂºÇÊ≠•ËÆ°ÁÆóÔºåËØ•Á±ªÊèê‰æõ‰∫Ü‰∏Ä‰∏™FutureÁöÑÂü∫Êú¨ÂÆûÁé∞ÔºåÂÖ∑ÊúâÂêØÂä®ÂíåÂèñÊ∂àËÆ°ÁÆóÁöÑÊñπÊ≥ïÔºåÊü•ËØ¢ËÆ°ÁÆóÊòØÂê¶ÂÆåÊï¥ÔºåÂπ∂Ê£ÄÁ¥¢ËÆ°ÁÆóÁªìÊûú„ÄÇ ÁªìÊûúÂè™ËÉΩÂú®ËÆ°ÁÆóÂÆåÊàêÂêéÊâçËÉΩÊ£ÄÁ¥¢; Â¶ÇÊûúËÆ°ÁÆóÂ∞öÊú™ÂÆåÊàêÔºåÂàôgetÊñπÊ≥ïÂ∞ÜÈòªÊ≠¢„ÄÇ ‰∏ÄÊó¶ËÆ°ÁÆóÂÆåÊàêÔºåÂàôÊó†Ê≥ïÈáçÊñ∞ÂêØÂä®ÊàñÂèñÊ∂àËÆ°ÁÆóÔºàÈô§Èùû‰ΩøÁî® runAndReset() ÊñπÊ≥ïË∞ÉÁî®ËÆ°ÁÆó Ôºâ„ÄÇ </p>
</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>ForkJoin</title>
    <url>/p/f6316a6c.html</url>
    <content><![CDATA[<html><head></head><body><p>ForkJoinPool ÊòØExecutorService Êé•Âè£ÁöÑÂÆûÁé∞ÔºåÂÆÉ‰∏ì‰∏∫ÂèØ‰ª•ÈÄíÂΩíÂàÜËß£ÊàêÂ∞èÂùóÁöÑÂ∑•‰ΩúËÄåËÆæËÆ°„ÄÇJava 7ÂºÄÂßãÂºïÂÖ•‰∫Ü‰∏ÄÁßçÊñ∞ÁöÑFork/JoinÁ∫øÁ®ãÊ±†ÔºåÂÆÉÂèØ‰ª•ÊâßË°å‰∏ÄÁßçÁâπÊÆäÁöÑ‰ªªÂä°ÔºàRunnableÔºâÔºöÊää‰∏Ä‰∏™Â§ß‰ªªÂä°ÊãÜÊàêÂ§ö‰∏™Â∞è‰ªªÂä°Âπ∂Ë°åÂ§ÑÁêÜÔºåÊúÄÂêéÂ∞ÜÂ≠ê‰ªªÂä°ÁªìÊûúÂêàÂπ∂ÊàêÊúÄÂêéÁöÑËÆ°ÁÆóÁªìÊûú„ÄÇÂÖÖÂàÜÂà©Áî®Â§öÁ∫øÁ®ãÂ§ÑÁêÜÂô®ÁöÑ‰ºòÂäøÔºåÊèêÈ´òÁ®ãÂ∫èÊÄßËÉΩ„ÄÇ</p>
<p><img src="/p/f6316a6c/ForkJoin.png" alt="forkJoin"></p>
<h2 id="È´òÊÄßËÉΩ‰ΩéÂÜ≤Á™Å"><a href="#È´òÊÄßËÉΩ‰ΩéÂÜ≤Á™Å" class="headerlink" title="È´òÊÄßËÉΩ‰ΩéÂÜ≤Á™Å"></a>È´òÊÄßËÉΩ‰ΩéÂÜ≤Á™Å</h2><ul>
<li><p>ÊØè‰∏™WorkerÁ∫øÁ®ãÈÉΩÁª¥Êä§‰∏Ä‰∏™‰ªªÂä°ÈòüÂàóÔºåÂç≥ForkJoinWorkerThread‰∏≠ÁöÑ‰ªªÂä°ÈòüÂàóÔºõ</p>
</li>
<li><p>ForkJoinÁª¥Êä§ÁöÑ‰ªªÂä°ÈòüÂàóÊòØÂèåÁ´ØÈòüÂàóÔºàDeQueueÔºâÔºåÂèØ‰ª•ÂêåÊó∂ÊîØÊåÅLIFOÔºàÂÖàËøõÂêéÂá∫ÔºâÂíåFIFOÔºàÂÖàËøõÂÖàÂá∫ÔºâÔºõ</p>
</li>
<li><p>Â≠ê‰ªªÂä°‰ºöË¢´Âä†ÂÖ•Âà∞ÂéüÂÖà‰ªªÂä°ÊâÄÂú® Worker Á∫øÁ®ãÁöÑ‰ªªÂä°ÈòüÂàóÔºõ</p>
</li>
<li><p>ÂΩì‰ªªÂä°ÈòüÂàó‰∏∫Á©∫Êó∂ÔºåÁ∫øÁ®ã‰ºöÈöèÊú∫‰ªéÂÖ∂‰ªñÁöÑ Worker ÁöÑÈòüÂàó‰∏≠ÊãøËµ∞‰∏Ä‰∏™‰ªªÂä°ÊâßË°åÔºàÂ∑•‰ΩúÁ™ÉÂèñÔºösteal workÔºâÔºåÂ∑•‰ΩúÁ™ÉÂèñÂ∏¶Êù•ÁöÑÊÄßËÉΩÊèêÂçáÂÅèÁêÜËÆ∫ÔºåAPIÁöÑÂ§çÊùÇÊÄßËæÉÈ´òÔºåÂÆûÈôÖÁ†îÂèë‰∏≠ÂèØÊéßÊÄßÊù•ËØ¥‰∏çÂ¶ÇÂÖ∂‰ªñAPI„ÄÇ</p>
</li>
</ul>
<h2 id="Áº∫ÁÇπ"><a href="#Áº∫ÁÇπ" class="headerlink" title="Áº∫ÁÇπ"></a>Áº∫ÁÇπ</h2><ul>
<li><p>Â¶ÇÊûú‰∏Ä‰∏™ Worker Á∫øÁ®ãÈÅáÂà∞‰∫Ü join Êìç‰ΩúÔºåËÄåËøôÊó∂ÂÄôÊ≠£Âú®Â§ÑÁêÜÂÖ∂‰ªñ‰ªªÂä°Ôºå‰ºöÁ≠âÂà∞Ëøô‰∏™‰ªªÂä°ÁªìÊùü„ÄÇÂê¶ÂàôÁõ¥Êé•ËøîÂõûÔºõ</p>
</li>
<li><p>Â¶ÇÊûú‰∏Ä‰∏™ Worker Á∫øÁ®ãÁ™ÉÂèñ‰ªªÂä°Â§±Ë¥•ÔºåÂÆÉ‰ºöË∞ÉÁî® yield ÊàñËÄÖ sleep ‰πãÁ±ªÁöÑÊñπÊ≥ï‰ºëÊÅØ‰∏Ä‰ºöÂÑøÔºåÂÜçÂ∞ùËØïÔºàÂ¶ÇÊûúÊâÄÊúâÁ∫øÁ®ãÈÉΩÊòØÁ©∫Èó≤Áä∂ÊÄÅÔºåÂç≥Ê≤°Êúâ‰ªªÂä°ÊâßË°åÔºåÈÇ£‰πàËØ•Á∫øÁ®ã‰πü‰ºöËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÁ≠âÂæÖÊñ∞‰ªªÂä°ÁöÑÂà∞Êù•ÔºâÔºõ</p>
</li>
</ul>
<h2 id="ÈÄÇÁî®Âú∫ÊôØ"><a href="#ÈÄÇÁî®Âú∫ÊôØ" class="headerlink" title="ÈÄÇÁî®Âú∫ÊôØ"></a>ÈÄÇÁî®Âú∫ÊôØ</h2><ul>
<li><p>‰ΩøÁî®Â∞ΩÂèØËÉΩÂ∞ëÁöÑÁ∫øÁ®ãÊ±†ÔºåÂú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÊúÄÂ•ΩÁöÑÂÜ≥ÂÆöÊòØ‰∏∫ÊØè‰∏™Â∫îÁî®Á®ãÂ∫èÊàñÁ≥ªÁªü‰ΩøÁî®‰∏Ä‰∏™Á∫øÁ®ãÊ±†Ôºõ</p>
</li>
<li><p>Â¶ÇÊûú‰∏çÈúÄË¶ÅÁâπÂÆöË∞ÉÊï¥ÔºåËØ∑‰ΩøÁî®ÈªòËÆ§ÁöÑÂÖ¨ÂÖ±Á∫øÁ®ãÊ±†Ôºõ</p>
</li>
<li><p>‰ΩøÁî®ÂêàÁêÜÁöÑÈòàÂÄºÂ∞ÜForkJoinTaskÊãÜÂàÜ‰∏∫Â≠ê‰ªªÂä°Ôºõ</p>
</li>
<li><p><strong>ÈÅøÂÖçÂú®ForkJoinTask‰∏≠Âá∫Áé∞‰ªª‰ΩïÈòªÂ°ûÔºà‰æãÂ¶ÇËÄóÊó∂IOÔºåÂ§ßÈáèÊü•ËØ¢Êï∞ÊçÆÂ∫ì„ÄÅÁΩëÁªúËØ∑Ê±ÇÁ≠âÔºâÔºõ</strong></p>
</li>
<li><p>ÈÄÇÂêàÊï∞ÊçÆÂ§ÑÁêÜ„ÄÅÁªìÊûúÊ±áÊÄª„ÄÅÁªüËÆ°Á≠âÂú∫ÊôØÔºõ</p>
</li>
</ul>
<p>java8ÂÆû‰æãÔºöjava.utilArraysÁ±ªÁî®‰∫éÂÖ∂ parallelSort() ÊñπÊ≥ïÔºõ</p>
<h2 id="Â∫îÁî®Á§∫‰æã"><a href="#Â∫îÁî®Á§∫‰æã" class="headerlink" title="Â∫îÁî®Á§∫‰æã"></a>Â∫îÁî®Á§∫‰æã</h2><p>‰æãÂ¶ÇÔºå‰∏ãÈù¢Â∞Ü‰ªé 0 Âä†Âà∞ 10_0000_0000Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">long</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10_0000_0000L</span>; i++) {</span><br><span class="line">        sum += i;</span><br><span class="line">    }</span><br><span class="line">    System.out.println(sum + <span class="string">",ËÄóÊó∂Ôºö"</span> + (System.currentTimeMillis() - start) + <span class="string">"ms"</span>);<span class="comment">// ËÄóÊó∂Ôºö361ms</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ΩøÁî® ForkJoinPool ÊâßË°åËØ•‰ªªÂä°Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> ExecutionException, InterruptedException {</span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">    <span class="type">ForkJoinPool</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinPool</span>();</span><br><span class="line">    ForkJoinTask&lt;Long&gt; task = <span class="keyword">new</span> <span class="title class_">Task04051</span>(<span class="number">0L</span>, <span class="number">10_0000_0000L</span>);</span><br><span class="line">    ForkJoinTask&lt;Long&gt; submit = pool.submit(task);</span><br><span class="line">    <span class="type">Long</span> <span class="variable">result</span> <span class="operator">=</span> submit.get();</span><br><span class="line"></span><br><span class="line">    System.out.println(result + <span class="string">",ËÄóÊó∂Ôºö"</span> + (System.currentTimeMillis() - start) + <span class="string">"ms"</span>); <span class="comment">// ËÄóÊó∂Ôºö186ms</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ΩøÁî®  stream Âπ∂Ë°åÊâßË°å‰ªªÂä°Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">	<span class="comment">// ‰∏é LongStream Á±ª‰ººÁöÑÊúâDoubleStream„ÄÅIntegerStream Á≠â</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> LongStream.rangeClosed(<span class="number">0L</span>, num).parallel().reduce(<span class="number">0</span>, Long::sum);</span><br><span class="line"></span><br><span class="line">    System.out.println(sum + <span class="string">",ËÄóÊó∂Ôºö"</span> + (System.currentTimeMillis() - start) + <span class="string">"ms"</span>);<span class="comment">// ËÄóÊó∂Ôºö126ms</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>JMMÂÜÖÂ≠òÊ®°Âûã</title>
    <url>/p/eb5989ef.html</url>
    <content><![CDATA[<html><head></head><body><p>JMMÂÖ®Áß∞Java Memory ModelÔºåJavaÂÜÖÂ≠òÊ®°ÂûãÊòØJSR133ÈáåÊåáÂá∫‰∫ÜJMMÊòØÁî®Êù•ÂÆö‰πâ‰∏Ä‰∏™<strong>‰∏ÄËá¥ÁöÑ„ÄÅË∑®Âπ≥Âè∞</strong>ÁöÑÂÜÖÂ≠òÊ®°ÂûãÔºåÊòØÁºìÂ≠ò‰∏ÄËá¥ÊÄßÂçèËÆÆÔºåÁî®‰∫éÂ±èËîΩÊéâÂêÑÁßçÁ°¨‰ª∂ÂíåÊìç‰ΩúÁ≥ªÁªüÁöÑÂÜÖÂ≠òËÆøÈóÆÂ∑ÆÂºÇÔºåËÆ©JavaÁ®ãÂ∫èÂú®ÂêÑÁßçÂπ≥Âè∞‰∏ãÈÉΩËÉΩËææÂà∞‰∏ÄËá¥ÁöÑÂπ∂ÂèëÊïàÊûú„ÄÇ</p>
<h2 id="Âå∫ÂàÜÂºÄÂÜÖÂ≠òÁªìÊûÑ"><a href="#Âå∫ÂàÜÂºÄÂÜÖÂ≠òÁªìÊûÑ" class="headerlink" title="Âå∫ÂàÜÂºÄÂÜÖÂ≠òÁªìÊûÑ"></a>Âå∫ÂàÜÂºÄÂÜÖÂ≠òÁªìÊûÑ</h2><p>ÂÜÖÂ≠òÁªìÊûÑÂíåÂÜÖÂ≠òÊ®°ÂûãÂÆåÂÖ®ÊòØ‰∏§‰∏™‰∏úË•øÔºåÂÜÖÂ≠òÁªìÊûÑÊòØ‰∏ãÂõæ‰∏≠ÁöÑËøô‰∫õ</p>
<p><img src="/p/eb5989ef/webp.webp" alt="img"></p>
<h2 id="‰ªÄ‰πàÊòØÂÜÖÂ≠òÊ®°Âûã"><a href="#‰ªÄ‰πàÊòØÂÜÖÂ≠òÊ®°Âûã" class="headerlink" title="‰ªÄ‰πàÊòØÂÜÖÂ≠òÊ®°Âûã"></a>‰ªÄ‰πàÊòØÂÜÖÂ≠òÊ®°Âûã</h2><p>Âú®Â§öCPUÁöÑÁ≥ªÁªü‰∏≠ÔºåÊØè‰∏™CPUÈÉΩÊúâÂ§öÁ∫ßÁºìÂ≠òÔºå‰∏ÄËà¨ÂàÜ‰∏∫L1„ÄÅL2„ÄÅL3ÁºìÂ≠ò„ÄÇÂõ†‰∏∫Ëøô‰∫õÁºìÂ≠òÁöÑÂ≠òÂú®ÔºåÊèêÂçá‰∫ÜÂêûÂêêÈáèÔºåÂáèËΩª‰∫ÜÊï∞ÊçÆÊÄªÁ∫ø‰∏äÊï∞ÊçÆ‰º†ËæìÁöÑÂéãÂäõÔºåÂêåÊó∂‰πüÂ∏¶Êù•‰∫ÜÂæàÂ§öÊñ∞ÁöÑÊåëÊàòÔºåÊØîÂ¶Ç‰∏§‰∏™CPUÂêåÊó∂ÂéªÊìç‰ΩúÂêå‰∏Ä‰∏™ÂÜÖÂ≠òÂú∞ÂùÄÔºå‰ºöÂèëÁîü‰ªÄ‰πàÔºüÂú®‰ªÄ‰πàÊù°‰ª∂‰∏ãÔºåÂÆÉ‰ª¨ÂèØ‰ª•ÁúãÂà∞Áõ∏ÂêåÁöÑÁªìÊûúÔºüËøô‰∫õÈÉΩÊòØÈúÄË¶ÅËß£ÂÜ≥ÁöÑ„ÄÇ</p>
<p>ÊâÄ‰ª•Âú®CPUÁöÑÂ±ÇÈù¢ÔºåÂÜÖÂ≠òÊ®°ÂûãÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂÖÖÂàÜÂøÖË¶ÅÊù°‰ª∂Ôºå‰øùËØÅÂÖ∂ÂÆÉCPUÁöÑÂÜôÂÖ•Âä®‰ΩúÂØπËØ•CPUÊòØÂèØËßÅÁöÑÔºåËÄå‰∏îËØ•CPUÁöÑÂÜôÂÖ•Âä®‰ΩúÂØπÂÖ∂ÂÆÉCPU‰πüÊòØÂèØËßÅÁöÑÔºåÈÇ£ËøôÁßçÂèØËßÅÊÄßÔºåÂ∫îËØ•Â¶Ç‰ΩïÂÆûÁé∞Âë¢Ôºü</p>
<p>Êúâ‰∫õÂ§ÑÁêÜÂô®Êèê‰æõ‰∫ÜÂº∫ÂÜÖÂ≠òÊ®°ÂûãÔºå‰ªéÁ°¨‰ª∂Â±ÇÈù¢‰∏äÊîØÊåÅÊâÄÊúâCPUÂú®‰ªª‰ΩïÊó∂ÂÄôÈÉΩËÉΩÁúãÂà∞ÂÜÖÂ≠ò‰∏≠‰ªªÊÑè‰ΩçÁΩÆÁõ∏ÂêåÁöÑÂÄº„ÄÇÂ§ßÂ§öÊï∞Â§ÑÁêÜÂô®Êèê‰æõÁöÑÊòØÂº±ÂÜÖÂ≠òÊ®°ÂûãÔºåÈúÄË¶ÅÊâßË°å‰∏Ä‰∫õÁâπÊÆäÊåá‰ª§Ôºà<code>Memory Barriers</code>ÂÜÖÂ≠òÂ±èÈöúÔºâÔºåÂà∑Êñ∞CPUÁºìÂ≠òÁöÑÊï∞ÊçÆÂà∞ÂÜÖÂ≠ò‰∏≠Ôºå‰øùËØÅËøô‰∏™ÂÜôÊìç‰ΩúËÉΩÂ§üË¢´ÂÖ∂ÂÆÉCPUÂèØËßÅÔºåÊàñËÄÖÂ∞ÜCPUÁºìÂ≠òÁöÑÊï∞ÊçÆËÆæÁΩÆ‰∏∫Êó†ÊïàÁä∂ÊÄÅÔºå‰øùËØÅÂÖ∂ÂÆÉCPUÁöÑÂÜôÊìç‰ΩúÂØπÂΩìÂâçCPUÂèØËßÅ„ÄÇ</p>
<p>ÂÜÖÂ≠òÂ±èÈöúÈô§‰∫ÜÂÆûÁé∞CPU‰πãÂâçÁöÑÊï∞ÊçÆÂèØËßÅÊÄß‰πãÂ§ñÔºåËøòÊúâ‰∏Ä‰∏™ÈáçË¶ÅÁöÑËÅåË¥£ÊòØ<strong>Á¶ÅÊ≠¢Êåá‰ª§ÁöÑÈáçÊéíÂ∫è</strong>„ÄÇÈáçÊéíÂ∫èÂèØ‰ª•ÂèëÁîüÂú®Â•ΩÂá†‰∏™Âú∞ÊñπÔºöÁºñËØëÂô®„ÄÅËøêË°åÊó∂„ÄÅJITÁ≠âÔºåÈÄöËøáÂÜÖÂ≠òÂ±èÈöúÁöÑÂäüËÉΩÔºåÂèØ‰ª•Á¶ÅÊ≠¢‰∏Ä‰∫õ‰∏çÂøÖË¶Å„ÄÅÊàñËÄÖ‰ºöÂ∏¶Êù•Ë¥üÈù¢ÂΩ±ÂìçÁöÑÈáçÊéíÂ∫è‰ºòÂåñÔºåÂú®ÂÜÖÂ≠òÊ®°ÂûãÁöÑËåÉÂõ¥ÂÜÖÔºåÂÆûÁé∞Êõ¥È´òÁöÑÊÄßËÉΩÔºåÂêåÊó∂‰øùËØÅÁ®ãÂ∫èÁöÑÊ≠£Á°ÆÊÄß„ÄÇ</p>
<h2 id="Java‰∏≠ÁöÑÂÜÖÂ≠òÊ®°Âûã"><a href="#Java‰∏≠ÁöÑÂÜÖÂ≠òÊ®°Âûã" class="headerlink" title="Java‰∏≠ÁöÑÂÜÖÂ≠òÊ®°Âûã"></a>Java‰∏≠ÁöÑÂÜÖÂ≠òÊ®°Âûã</h2><ul>
<li>Âú®JavaÂÜÖÂ≠òÊ®°ÂûãÔºàJMMÔºâ‰∏≠ÔºåÊèèËø∞‰∫ÜÂú®Â§öÁ∫øÁ®ã‰ª£Á†Å‰∏≠Âì™‰∫õË°å‰∏∫ÊòØËßÑËåÉÊ≠£Á°ÆÁöÑÔºå‰ª•ÂèäÂ§öÁ∫øÁ®ã‰πãÈó¥Â¶Ç‰ΩïËøõË°åÈÄö‰ø°Ôºå‰ª£Á†Å‰∏≠ÂèòÈáèÁöÑËØªÂÜôË°å‰∏∫Â¶Ç‰ΩïÂèçÂ∫îÂà∞ÂÜÖÂ≠ò„ÄÅCPUÁºìÂ≠òÁöÑÂ∫ïÂ±ÇÁªÜËäÇ„ÄÇJavaÂÜÖÂ≠òÊ®°Âûã‰∏≠ÂÆö‰πâ‰∫ÜÂÆÉ‰ª¨ÁöÑË°å‰∏∫ÔºåÁ°Æ‰øùÊ≠£Á°ÆÂêåÊ≠•ÁöÑJava‰ª£Á†ÅÂú®ÊâÄÊúâÁöÑÂ§ÑÁêÜÂô®Êû∂ÊûÑ‰∏äÈÉΩËÉΩÊ≠£Á°ÆÊâßË°å„ÄÇ</li>
<li>Âú®Java‰∏≠ÂåÖÂê´‰∫ÜÂá†‰∏™ÂÖ≥ÈîÆÂ≠óÔºövolatile„ÄÅfinal Âíå synchronizedÔºåÂ∏ÆÂä©Á®ãÂ∫èÂëòÊää‰ª£Á†Å‰∏≠ÁöÑÂπ∂ÂèëÈúÄÊ±ÇÊèèËø∞ÁªôÁºñËØëÂô®„ÄÅËß£ÈáäÂô®ÔºåÂÜçËΩ¨ÊàêÊú∫Âô®Êåá‰ª§‰∏ãËææÁªôÂ§ÑÁêÜÂô®„ÄÇ</li>
</ul>
<h3 id="ÂÜÖÂ≠òÂèØËßÅÊÄß"><a href="#ÂÜÖÂ≠òÂèØËßÅÊÄß" class="headerlink" title="ÂÜÖÂ≠òÂèØËßÅÊÄß"></a>ÂÜÖÂ≠òÂèØËßÅÊÄß</h3><p>‰∏çÂêåÁ∫øÁ®ãÊã•ÊúâÂêÑËá™ÁöÑÁßÅÊúâ<strong>Â∑•‰ΩúÂÜÖÂ≠ò</strong>ÔºåÂΩìÁ∫øÁ®ãÈúÄË¶ÅËØªÂèñÊàñ‰øÆÊîπÊüê‰∏™ÂèòÈáèÊó∂Ôºå‰∏çËÉΩÁõ¥Êé•ÂéªÊìç‰Ωú<strong>‰∏ªÂÜÖÂ≠ò</strong>‰∏≠ÁöÑÂèòÈáèÔºåËÄåÊòØÈúÄË¶ÅÂ∞ÜËøô‰∏™ÂèòÈáèËØªÂèñÂà∞Á∫øÁ®ãÁöÑ<strong>Â∑•‰ΩúÂÜÖÂ≠ò</strong>ÁöÑ<strong>ÂèòÈáèÂâØÊú¨</strong>‰∏≠ÔºåÂΩìËØ•Á∫øÁ®ã‰øÆÊîπÂÖ∂ÂèòÈáèÂâØÊú¨ÁöÑÂÄºÂêéÔºå<strong>ÂÖ∂ÂÆÉÁ∫øÁ®ãÂπ∂‰∏çËÉΩÁ´ãÂàªËØªÂèñÂà∞Êñ∞ÂÄº</strong>ÔºåÈúÄË¶ÅÂ∞Ü‰øÆÊîπÂêéÁöÑÂÄº<strong>Âà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠</strong>ÔºåÂÖ∂ÂÆÉÁ∫øÁ®ãÊâçËÉΩ<strong>‰ªé‰∏ªÂÜÖÂ≠òËØªÂèñÂà∞‰øÆÊîπÂêéÁöÑÂÄº</strong>„ÄÇ</p>
<p><img src="/p/eb5989ef/image-20220305205222083.png" alt="image-20220305205222083"></p>
<p>Á∫øÁ®ãA‰ªé‰∏ªÂ≠ò‰∏≠ËØªÂà∞ÂÄºflag=trueÔºåÂä†ËΩΩÂà∞Ëá™Â∑±ÁöÑÂ∑•‰ΩúÂÜÖÂ≠ò‰∏≠ÔºàÂ†ÜÂå∫ÔºâÔºåÁî±ÊâßË°åÂºïÊìéÂ§ÑÁêÜÂêéÂ∞ÜÂÄºÂÜçËµãÂÄºÁªôÂ∑•‰ΩúÂÜÖÂ≠òÔºåÂÜôÂÖ•Â≠òÂÇ®ËøáÁ®ãÔºàÂ≠òÂÇ®ËøáÁ®ãÂ∞±ÊòØÊäästoreÊìç‰Ωú‰ªéÂ∑•‰ΩúÂÜÖÂ≠ò‰∏≠ÂæóÂà∞ÁöÑÂèòÈáèÊîæÂÖ•‰∏ªÂ≠ò‰∏≠ÁöÑÊìç‰ΩúÔºâ„ÄÇ</p>
<p>lock ‰ΩúÁî®‰∫é‰∏ªÂÜÖÂ≠òÁöÑÂèòÈáèÔºåÊää‰∏Ä‰∏™ÂèòÈáèÊ†áËØÜ‰∏∫Á∫øÁ®ãÁã¨Âç†Áä∂ÊÄÅÔºåunlock ‰πüÊòØ‰ΩúÁî®‰∫é‰∏ªÂÜÖÂ≠òÁöÑÂèòÈáèÔºåÂ∞ÜË¢´ÈîÅÂÆöÁöÑÂèòÈáèÈáäÊîæÂá∫Êù•ÔºåÈáäÊîæÂêéÊâçËÉΩË¢´ÂÖ∂ÂÆÉÁ∫øÁ®ãÈîÅÂÆö„ÄÇ</p>
<blockquote>
<p>Â§öÁ∫øÁ®ãÊìç‰ΩúÁ∫øÁ®ãÂÖ±‰∫´ÁöÑÂèòÈáèÊó∂ÔºåÂèòÈáèË¢´ÂÖ∂‰∏≠‰∏Ä‰∏™Á∫øÁ®ã‰øÆÊîπÂêéÔºåÂπ∂‰∏çËÉΩÂéªÂÆûÊó∂‰øÆÊîπÂÖ∂ÂÆÉÁ∫øÁ®ãÊ≠£Âú®‰ΩøÁî®ËØ•ÂèòÈáèÁöÑÂÄºÔºåÊÄé‰πàËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºü</p>
</blockquote>
<p>Âú®‰∏ãÈù¢Ëøô‰∏™ÂÆû‰æã‰∏≠ÔºåÁ∫øÁ®ãA‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠ËØªÂèñÂà∞n=0ÔºåÂä†ËΩΩÂà∞Ëá™Â∑±ÁöÑÂ∑•‰ΩúÂÜÖÂ≠òÔºå‰∏ÄÁßíÈíüÂêéÔºåmainÁ∫øÁ®ãÊäänÁöÑÂÄºÊîπ‰∏∫1ÂêéÂÜôÂõû‰∏ªÂÜÖÂ≠òÔºåÊ≠§Êó∂AËøòÊ≤°ÊúâÊãøÂà∞ÊúÄÊñ∞ÁöÑÂÄº„ÄÇÊâÄ‰ª•Á∫øÁ®ãAÊòØ‰∏ç‰ºöÂÅúÊ≠¢ÊâßË°åÁöÑ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">        <span class="keyword">while</span> (n == <span class="number">0</span>) {</span><br><span class="line">        }</span><br><span class="line">    }, <span class="string">"A"</span>).start();</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// ‰ºëÁú† 1s Âêé‰øÆÊîπn=1ÔºåËÉΩÂê¶ÂÅúÊ≠¢Á∫øÁ®ãAÔºü</span></span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    n = <span class="number">1</span>;</span><br><span class="line">    System.out.println(<span class="string">"Á∫øÁ®ãÂÅúÊ≠¢‰∫ÜÂêóÔºü"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ëß£ÂÜ≥ÔºöÂΩì‰∏ªÂ≠ò‰∏≠ÁöÑÂÄºÂèëÁîü‰øÆÊîπÂêéÔºåÂ∫îËØ•ÈÄöÁü•ÊâÄÊúâÊìç‰Ωú‰∏ªÂ≠òÂèòÈáèÁöÑÁ∫øÁ®ã„ÄÇÂú®Java‰∏≠Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî® volatile ÂÖ≥ÈîÆÂ≠óÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p>‰∏ãÈù¢ÁªßÁª≠ÂØπÁ∫øÁ®ãÂèØËßÅÊÄßÈóÆÈ¢òËøõË°åÂâñÊûê„ÄÇ</p>
<h3 id="Á∫øÁ®ãËÆøÈóÆÊï∞ÊçÆÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò"><a href="#Á∫øÁ®ãËÆøÈóÆÊï∞ÊçÆÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò" class="headerlink" title="Á∫øÁ®ãËÆøÈóÆÊï∞ÊçÆÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò"></a>Á∫øÁ®ãËÆøÈóÆÊï∞ÊçÆÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò</h3><p>ÁºìÂ≠òÂºïËµ∑ÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò„ÄÇÂΩì‰∏ªÂ≠ò‰∏≠ÁöÑdataÂèëÁîüÊîπÂèòÂêéÔºåÂÖ∂‰ªñÁ∫øÁ®ãÊ†à‰∏≠ÁöÑ‰ΩøÁî®ÁöÑ data ÊòØ‰∏çËÉΩÂ§üÂèäÊó∂‰øÆÊîπÁöÑ„ÄÇ</p>
<p><img src="/p/eb5989ef/image-20220306162004447.png" alt="image-20220306162004447"></p>
<h4 id="Êåá‰ª§ÈáçÊéíÂ∫èÂºïËµ∑ÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò"><a href="#Êåá‰ª§ÈáçÊéíÂ∫èÂºïËµ∑ÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò" class="headerlink" title="Êåá‰ª§ÈáçÊéíÂ∫èÂºïËµ∑ÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò"></a>Êåá‰ª§ÈáçÊéíÂ∫èÂºïËµ∑ÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò</h4><p>Âú®JavaÂ±ÇÈù¢ÔºåÊåá‰ª§ÈáçÊéíÂ∫è‰∏çËÉΩÂ§üÈÄöËøá javap Êü•ÁúãÂá∫classÊñá‰ª∂‰∏≠ÁöÑÈáçÊéíÂ∫èÔºåËÄåÊòØÂèëÁîüÂú®ËøêË°åÊó∂ÁöÑÁºñËØëÂô®ÔºàJIT - Just In TimeÔºâÔºåÂ∞ÜÂ≠óËäÇÁ†ÅËøõË°åÈáçÊéíÂ∫èÁºñËØëÊú∫Âô®ËØ≠Ë®ÄÔºàÊ±áÁºñÔºâ„ÄÇ</p>
<blockquote>
<p>‰ªÄ‰πàÊòØJust In TimeÁºñËØëÂô®?</p>
</blockquote>
<p>JavaÁ®ãÂ∫è‰∏ÄÂºÄÂßãÊòØÈÄöËøáËß£ÈáäÂô®ÔºàInterpreterÔºâËøõË°åËß£ÈáäÊâßË°åÁöÑ„ÄÇÂΩìJVMÂèëÁé∞Êüê‰∏™ÊñπÊ≥ïÊàñ‰ª£Á†ÅÂùóËøêË°åÁâπÂà´È¢ëÁπÅÊó∂ÔºåÂ∞±‰ºöÊääËøô‰∫õ‰ª£Á†ÅËÆ§ÂÆö‰∏∫‚ÄúÁÉ≠ÁÇπ‰ª£Á†ÅÔºàHot Spot CodeÔºâ‚ÄùÔºåÁÑ∂ÂêéJVM‰ºöÊääËøô‰∫õ‰ª£Á†ÅÁºñËØëÊàê‰∏éÊú¨Âú∞Âπ≥Âè∞Áõ∏ÂÖ≥ÁöÑÊú∫Âô®Á†ÅÔºåÂπ∂ËøõË°åÂêÑÁßçÂ±ÇÊ¨°ÁöÑ‰ºòÂåñÔºåÂÆåÊàêËøô‰∏™‰ªªÂä°ÁöÑÁºñËØëÂô®Áß∞‰∏∫ÔºöÂç≥Êó∂ÁºñËØëÂô®ÔºàJust In Time CompilerÔºåJITÔºâ„ÄÇ<br>JITÁºñËØëÂô®ÊòØ‚ÄúÂä®ÊÄÅÁºñËØëÂô®‚ÄùÁöÑ‰∏ÄÁßçÔºåÁõ∏ÂØπÁöÑ‚ÄúÈùôÊÄÅÁºñËØëÂô®‚ÄùÂàôÊòØÊåáÁöÑÊØîÂ¶ÇÔºöC/C++ÁöÑÁºñËØëÂô®„ÄÇ<br>Ê≥®ÊÑèÔºö<br>JITÂπ∂‰∏çÊòØJVMÁöÑÂøÖÈ°ªÈÉ®ÂàÜÔºåJVMËßÑËåÉÂπ∂Ê≤°ÊúâËßÑÂÆöJITÂøÖÈ°ªÂ≠òÂú®ÔºåÊõ¥Ê≤°ÊúâÈôêÂÆöÂíåÊåáÂØºJIT„ÄÇ‰ΩÜÊòØÔºåJITÊÄßËÉΩÁöÑÂ•ΩÂùè„ÄÅ‰ª£Á†Å‰ºòÂåñÁ®ãÂ∫¶ÁöÑÈ´ò‰ΩéÂç¥ÊòØË°°Èáè‰∏ÄÊ¨æJVMÊòØÂê¶‰ºòÁßÄÁöÑÊúÄÂÖ≥ÈîÆÊåáÊ†á‰πã‰∏ÄÔºå‰πüÊòØËôöÊãüÊú∫‰∏≠ÊúÄÊ†∏ÂøÉ‰∏îÊúÄËÉΩ‰ΩìÁé∞ËôöÊãüÊú∫ÊäÄÊúØÊ∞¥Âπ≥ÁöÑÈÉ®ÂàÜ„ÄÇ</p>
<p><img src="/p/eb5989ef/image-20220306162227282.png" alt="image-20220306162227282"></p>
<p>ËøòÂèØËÉΩÂèëÁîüÁ≠âÊïàÊõøÊç¢„ÄÇ</p>
<p><img src="/p/eb5989ef/image-20220306162316303.png" alt="image-20220306162316303"></p>
<p>Â∞Ü‰∏äÈù¢Ëøô‰∫õ‰ª£Á†Åjava.exe ÁºñËØëÊàêclassÂ≠óËäÇÁ†ÅÂä†ËΩΩÂà∞JVM‰πãÂêéÔºåÈÄöËøáËøêË°åÊó∂ÁºñËØëÂô®JITÂ∞ÜclassÂ≠óËäÇÁ†ÅËΩ¨ÊàêÊ±áÁºñÊåá‰ª§ÂêéËøõË°åÈáçÊéíÂ∫èÊàñÁ≠âÊïàÊõøÊç¢„ÄÇ </p>
<p>Âú®ËøêË°åÊó∂ÔºåJVM‰ºöÊ†πÊçÆ‰ª£Á†ÅÁöÑË∞ÉÁî®ÊÉÖÂÜµËøõË°åÂà§Êñ≠ÔºöÂ¶ÇÊûú n=0ÔºåÈÇ£‰πàwhile(n==0) Â∞±Áõ∏ÂΩì‰∫éÊòØ‰∏Ä‰∏™Ê≠ªÂæ™ÁéØÊàê‰∏∫ÁÉ≠ÁÇπ‰ª£Á†ÅÔºåÈÇ£‰πàJITÂ∞±‰ºöËÆ§‰∏∫ÂèØ‰ª•ÊâßË°åÊàê‰∏∫ if(n==0){while(true){}} ËøôÊ†∑ÁöÑ‰ºòÂåñÔºåÂ∞±‰∏ç‰ºöÂÜçÂõûÂéªËØªÂèñ n ÁöÑÂÄºÔºåÁõ∏ÂΩì‰∫éÊâßË°å‰∫Ü‰∏ÄÊ¨°JavaÂ±ÇÈù¢ÁöÑÈáçÊéíÂ∫è„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (n == <span class="number">0</span>) {}  Ë¢´JITÁºñËØëÂô®Êåá‰ª§ÈáçÊéíÂ∫è‰∏∫ <span class="keyword">if</span>(n==<span class="number">0</span>){<span class="keyword">while</span>(<span class="literal">true</span>){}}</span><br></pre></td></tr></tbody></table></figure>

<p>Â¶ÇÊûú‰ª£Á†ÅÊîπ‰∏∫Âä†ÈîÅÁöÑÊñπÂºèÔºåËôöÊãüÊú∫ÂØπ‰∫éËøôÁßçÂÖ≥ÈîÆÁöÑ‰ª£Á†ÅÊÆµÂ∞±‰∏ç‰ºöËøõË°å‰ºòÂåñÂ§ÑÁêÜ‰∫Ü„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">    <span class="keyword">while</span> (n == <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">synchronized</span>(<span class="built_in">this</span>){</span><br><span class="line">            add();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}, <span class="string">"A"</span>).start();</span><br></pre></td></tr></tbody></table></figure>

<p>JMM ÂèØ‰ª•ÈÄöËøá happens-before Ê®°ÂûãÂêëÁ®ãÂ∫èÂëòÊèê‰æõË∑®Á∫øÁ®ãÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß‰øùËØÅ„ÄÇ</p>
<h4 id="happen-beforeÂéüÂàô"><a href="#happen-beforeÂéüÂàô" class="headerlink" title="happen-beforeÂéüÂàô"></a>happen-beforeÂéüÂàô</h4><p>‰ªéJDK1.5ÂºÄÂßãÔºåÂºïÂÖ•‰∫Ü‰∏Ä‰∏™ happens-before ÁöÑÊ¶ÇÂøµÊù•ÈòêËø∞Â§ö‰∏™Á∫øÁ®ãÊìç‰ΩúÂÖ±‰∫´ÂèòÈáèÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ÂèØ‰ª•ËÆ§‰∏∫Âú®JMM‰∏≠ÔºåÂ¶ÇÊûú‰∏Ä‰∏™Êìç‰ΩúÊâßË°åÁöÑÁªìÊûúÈúÄË¶ÅÂØπÂè¶‰∏Ä‰∏™Êìç‰ΩúÂèØËßÅÔºåÈÇ£‰πàËøô‰∏§‰∏™Êìç‰ΩúÂøÖÈ°ªÊª°Ë∂≥ happens-before ÂéüÂàô„ÄÇ</p>
<ol>
<li><p>Á®ãÂ∫èÈ°∫Â∫èËßÑÂàôÔºö‰∏Ä‰∏™Á∫øÁ®ãÂÜÖÔºåÊåâÁÖßÁ®ãÂ∫è‰ª£Á†ÅÈ°∫Â∫èÔºå‰π¶ÂÜôÂú®ÂâçÈù¢ÁöÑÊìç‰ΩúÂÖàË°åÂèëÁîü‰∏é‰π¶ÂÜôÂú®ÂêéÈù¢ÁöÑÊìç‰Ωú„ÄÇ</p>
</li>
<li><p>ÁõëËßÜÂô®ÈîÅËßÑÂàôÔºö‰∏Ä‰∏™unlockÊìç‰ΩúÂÖàË°åÂèëÁîü‰∏éÂêéÈù¢ÂØπÂêå‰∏Ä‰∏™ÈîÅÁöÑlockÊìç‰ΩúËÄÖÔºåËøôÈáåÂøÖÈ°ªÊåáÂêå‰∏Ä‰∏™ÈîÅÔºåÂêéÈù¢ÊåáÁöÑÊòØÊó∂Èó¥‰∏äÁöÑÂÖàÂêéÈ°∫Â∫è„ÄÇ</p>
</li>
<li><p>volatileÂèòÈáèËßÑÂàôÔºöÂØπ‰∏Ä‰∏™volatileÂèòÈáèÁöÑÂÜôÊìç‰ΩúÂÖàË°åÂèëÁîü‰∫éÂêéÈù¢ÂØπËøô‰∏™ÂèòÈáèÁöÑËØªÊìç‰ΩúÔºåËøôÈáåÁöÑÂêéÈù¢ÂêåÊ†∑ÊåáÊó∂Èó¥‰∏äÁöÑÂÖàÂêéÈ°∫Â∫è„ÄÇ</p>
</li>
<li><p>Á∫øÁ®ãÂêØÂä®ËßÑÂàôÔºöThread ÂØπË±°ÁöÑ start() ÊñπÊ≥ïÂÖàË°åÂèëÁîü‰∫éÊ≠§Á∫øÁ®ãÁöÑ‰ªªÊÑèÂä®‰Ωú„ÄÇ</p>
</li>
<li><p>Á∫øÁ®ãÁªàÊ≠¢ËßÑÂàôÔºöÁ∫øÁ®ã‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúÈÉΩÂÖàË°åÂèëÁîü‰∫éÂØπÊ≠§Á∫øÁ®ãÁöÑÁªàÊ≠¢Ê£ÄÊµãÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáthread.joinÊñπÊ≥ïÁªìÊùüÔºåthread.isAliveÁöÑËøîÂõûÂÄºÁ≠âÊâãÊÆµÊ£ÄÊµãÂà∞Á∫øÁ®ãÂ∑≤ÁªèÁªàÊ≠¢ÊâßË°å„ÄÇ</p>
</li>
<li><p>Á∫øÁ®ã‰∏≠Êñ≠ËßÑÂàôÔºöÂØπÁ∫øÁ®ãinterruptÊñπÊ≥ïÁöÑË∞ÉÁî®ÂÖàË°åÂèëÁîü‰∫éË¢´‰∏≠Êñ≠Á∫øÁ®ãÁöÑ‰ª£Á†ÅÁõëÊµãÂà∞‰∏≠Êñ≠Êó∂Èó¥ÁöÑÂèëÁîüÔºåÂèØ‰ª•ÈÄöËøáinterruptÊñπÊ≥ïÊ£ÄÊµãÂà∞ÊòØÂê¶Âèà‰∏≠Êñ≠ÂèëÁîü„ÄÇ</p>
</li>
<li><p>ÂØπË±°ÁªàÁªìËßÑÂàôÔºö‰∏Ä‰∏™ÂØπË±°ÁöÑÂàùÂßãÂåñÂÆåÊàêÔºåÂÖàË°åÂèëÁîü‰∫éÂÆÉÁöÑfinalizeÊñπÊ≥ïÁöÑÂºÄÂßã„ÄÇ</p>
</li>
<li><p>‰º†ÈÄíÊÄßÔºöÂ¶ÇÊûúAÂÖàË°åÂèëÁîü‰∫éBÔºåBÂÖàË°åÂèëÁîü‰∫éCÔºåÂàôAÂÖàË°åÂèëÁîü‰∫éC„ÄÇ</p>
</li>
</ol>
<h3 id="ÂÖ≥ÈîÆÂ≠ó-final-Âú®JMM‰∏≠ÁöÑÂ§ÑÁêÜ"><a href="#ÂÖ≥ÈîÆÂ≠ó-final-Âú®JMM‰∏≠ÁöÑÂ§ÑÁêÜ" class="headerlink" title="ÂÖ≥ÈîÆÂ≠ó final Âú®JMM‰∏≠ÁöÑÂ§ÑÁêÜ"></a>ÂÖ≥ÈîÆÂ≠ó <code>final</code> Âú®JMM‰∏≠ÁöÑÂ§ÑÁêÜ</h3><p>Âú®‰∏ãÈù¢Ëøô‰∏™ÂÆû‰æã‰∏≠ÔºåÂú®read() ÊñπÊ≥ï‰∏≠Ôºå‰∏Ä‰∏™ÂèòÈáèÂä†‰∫Üfinal‰øÆÈ•∞Ôºå‰∏Ä‰∏™Ê≤°Âä†„ÄÇ</p>
<p>Âú®Â§öÁ∫øÁ®ãÁöÑÊÉÖÂÜµ‰∏ãÊú™Âä†final‰øÆÈ•∞Á¨¶ÂèòÈáèÁöÑÂÄºÔºåÊúâÂèØËÉΩ‰∏∫0Ôºå‰∏ç‰øùËØÅÂÄº‰∏∫ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑËµãÂÄº„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> {</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">static</span> A a;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">A</span><span class="params">()</span> {</span><br><span class="line">        x=<span class="number">3</span>;</span><br><span class="line">        y=<span class="number">4</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">()</span>{</span><br><span class="line">        a = <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">if</span>(f!=<span class="literal">null</span>){</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> a.x; <span class="comment">// ËÇØÂÆöÊòØ3</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> a.y; <span class="comment">// ÂèØËÉΩÊòØ0</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËØªÂèñËØ•ÂÖ±‰∫´ÂØπË±°ÁöÑfinalÊàêÂëòÂèòÈáè‰πãÂâçÔºåÂÖàË¶ÅËØªÂèñÂÖ±‰∫´ÁöÑÂØπË±°„ÄÇ‰º™‰ª£Á†ÅÁ§∫‰æãÔºör = new A()Ôºõk = r.a Ëøô‰∏§‰∏™Êìç‰Ωú‰∏çËÉΩÈáçÊéíÂ∫è„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>ReetrantLock &amp; ReadWriteLock</title>
    <url>/p/5fd8877a.html</url>
    <content><![CDATA[<html><head></head><body><p>‰∏ªË¶ÅÊúâËØªÂÜôÈîÅÂíåÂèØÈáçÂÖ•ÈîÅ‰∏§‰∏™ÈáçË¶ÅÁöÑÂÆûÁé∞„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Lock</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">lock</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// Âú®Ëé∑ÂèñÈîÅÁöÑËøáÁ®ã‰∏≠ÂèØ‰ª•‰∏≠Êñ≠ÂΩìÂâçÁ∫øÁ®ã</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">lockInterruptibly</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException;</span><br><span class="line">    <span class="comment">// Â∞ùËØïÈùûÈòªÂ°ûÂú∞Ëé∑ÂèñÈîÅÔºåÁ´ãÂç≥ËøîÂõû</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">()</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">(<span class="type">long</span> time, TimeUnit unit)</span> <span class="keyword">throws</span> InterruptedException;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">unlock</span><span class="params">()</span>;</span><br><span class="line">    Condition <span class="title function_">newCondition</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ReentrantLock"><a href="#ReentrantLock" class="headerlink" title="ReentrantLock"></a>ReentrantLock</h2><p><strong>ReentrantLock</strong> ÂÆûÁé∞‰∫Ü <strong>Lock</strong>Êé•Âè£Ôºå<strong>Lock</strong>Êé•Âè£‰∏≠ÂÆö‰πâ‰∫Ü <strong>lock</strong>‰∏é <strong>unlock</strong>Áõ∏ÂÖ≥Êìç‰ΩúÔºåÂπ∂‰∏îËøòÂ≠òÂú® <strong>newCondition</strong>ÊñπÊ≥ïÔºåË°®Á§∫ÁîüÊàê‰∏Ä‰∏™Êù°‰ª∂„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// AQS Ê†∏ÂøÉ‰ª£Á†Å</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Sync</span> <span class="keyword">extends</span> <span class="title class_">AbstractQueuedSynchronizer</span> {</span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">5179523762034025860L</span>;</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// Ëé∑ÂèñÈîÅ</span></span><br><span class="line">     <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">lock</span><span class="params">()</span>;</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// ÈùûÂÖ¨Âπ≥ÊñπÂºèËé∑Âèñ</span></span><br><span class="line">     <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">nonfairTryAcquire</span><span class="params">(<span class="type">int</span> acquires)</span> {</span><br><span class="line">         <span class="comment">// ÂΩìÂâçÁ∫øÁ®ã</span></span><br><span class="line">         <span class="keyword">final</span> <span class="type">Thread</span> <span class="variable">current</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">         <span class="comment">// Ëé∑ÂèñÁä∂ÊÄÅ</span></span><br><span class="line">         <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> getState();</span><br><span class="line">         <span class="keyword">if</span> (c == <span class="number">0</span>) { <span class="comment">// Ë°®Á§∫Ê≤°ÊúâÁ∫øÁ®ãÊ≠£Âú®Á´û‰∫âËØ•ÈîÅ</span></span><br><span class="line">             <span class="keyword">if</span> (compareAndSetState(<span class="number">0</span>, acquires)) { <span class="comment">// ÊØîËæÉÂπ∂ËÆæÁΩÆÁä∂ÊÄÅÊàêÂäüÔºåÁä∂ÊÄÅ0Ë°®Á§∫ÈîÅÊ≤°ÊúâË¢´Âç†Áî®</span></span><br><span class="line">                 <span class="comment">// ËÆæÁΩÆÂΩìÂâçÁ∫øÁ®ãÁã¨Âç†</span></span><br><span class="line">                 setExclusiveOwnerThread(current); </span><br><span class="line">                 <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// ÊàêÂäü</span></span><br><span class="line">             }</span><br><span class="line">         }</span><br><span class="line">         <span class="keyword">else</span> <span class="keyword">if</span> (current == getExclusiveOwnerThread()) { <span class="comment">// ÂΩìÂâçÁ∫øÁ®ãÊã•ÊúâËØ•ÈîÅ</span></span><br><span class="line">             <span class="type">int</span> <span class="variable">nextc</span> <span class="operator">=</span> c + acquires; <span class="comment">// Â¢ûÂä†ÈáçÂÖ•Ê¨°Êï∞</span></span><br><span class="line">             <span class="keyword">if</span> (nextc &lt; <span class="number">0</span>) <span class="comment">// overflow</span></span><br><span class="line">                 <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">"Maximum lock count exceeded"</span>);</span><br><span class="line">             <span class="comment">// ËÆæÁΩÆÁä∂ÊÄÅ</span></span><br><span class="line">             setState(nextc); </span><br><span class="line">             <span class="comment">// ÊàêÂäü</span></span><br><span class="line">             <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">         }</span><br><span class="line">         <span class="comment">// Â§±Ë¥•</span></span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">     }</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// ËØïÂõæÂú®ÂÖ±‰∫´Ê®°Âºè‰∏ãËé∑ÂèñÂØπË±°Áä∂ÊÄÅÔºåÊ≠§ÊñπÊ≥ïÂ∫îËØ•Êü•ËØ¢ÊòØÂê¶ÂÖÅËÆ∏ÂÆÉÂú®ÂÖ±‰∫´Ê®°Âºè‰∏ãËé∑ÂèñÂØπË±°Áä∂ÊÄÅÔºåÂ¶ÇÊûúÂÖÅËÆ∏ÔºåÂàôËé∑ÂèñÂÆÉ</span></span><br><span class="line">     <span class="keyword">protected</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">tryRelease</span><span class="params">(<span class="type">int</span> releases)</span> {</span><br><span class="line">         <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> getState() - releases;</span><br><span class="line">         <span class="keyword">if</span> (Thread.currentThread() != getExclusiveOwnerThread()) <span class="comment">// ÂΩìÂâçÁ∫øÁ®ã‰∏ç‰∏∫Áã¨Âç†Á∫øÁ®ã</span></span><br><span class="line">             <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalMonitorStateException</span>(); <span class="comment">// ÊäõÂá∫ÂºÇÂ∏∏</span></span><br><span class="line">         <span class="comment">// ÈáäÊîæÊ†áËØÜ</span></span><br><span class="line">         <span class="type">boolean</span> <span class="variable">free</span> <span class="operator">=</span> <span class="literal">false</span>; </span><br><span class="line">         <span class="keyword">if</span> (c == <span class="number">0</span>) {</span><br><span class="line">             free = <span class="literal">true</span>;</span><br><span class="line">             <span class="comment">// Â∑≤ÁªèÈáäÊîæÔºåÊ∏ÖÁ©∫Áã¨Âç†</span></span><br><span class="line">             setExclusiveOwnerThread(<span class="literal">null</span>); </span><br><span class="line">         }</span><br><span class="line">         <span class="comment">// ËÆæÁΩÆÊ†áËØÜ</span></span><br><span class="line">         setState(c); </span><br><span class="line">         <span class="keyword">return</span> free; </span><br><span class="line">     }</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// Âà§Êñ≠ËµÑÊ∫êÊòØÂê¶Ë¢´ÂΩìÂâçÁ∫øÁ®ãÂç†Êúâ</span></span><br><span class="line">     <span class="keyword">protected</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">isHeldExclusively</span><span class="params">()</span> {</span><br><span class="line">         <span class="keyword">return</span> getExclusiveOwnerThread() == Thread.currentThread();</span><br><span class="line">     }</span><br><span class="line"> </span><br><span class="line">     <span class="comment">// Êñ∞Áîü‰∏Ä‰∏™Êù°‰ª∂</span></span><br><span class="line">     <span class="keyword">final</span> ConditionObject <span class="title function_">newCondition</span><span class="params">()</span> {</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ConditionObject</span>();</span><br><span class="line">     }</span><br><span class="line"> </span><br><span class="line">     <span class="comment">// ËøîÂõûËµÑÊ∫êÁöÑÂç†Áî®Á∫øÁ®ã</span></span><br><span class="line">     <span class="keyword">final</span> Thread <span class="title function_">getOwner</span><span class="params">()</span> {        </span><br><span class="line">         <span class="keyword">return</span> getState() == <span class="number">0</span> ? <span class="literal">null</span> : getExclusiveOwnerThread();</span><br><span class="line">     }</span><br><span class="line">     <span class="comment">// ËøîÂõûÁä∂ÊÄÅ</span></span><br><span class="line">     <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">getHoldCount</span><span class="params">()</span> {            </span><br><span class="line">         <span class="keyword">return</span> isHeldExclusively() ? getState() : <span class="number">0</span>;</span><br><span class="line">     }</span><br><span class="line"> </span><br><span class="line">     <span class="comment">// ËµÑÊ∫êÊòØÂê¶Ë¢´Âç†Áî®</span></span><br><span class="line">     <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">isLocked</span><span class="params">()</span> {        </span><br><span class="line">         <span class="keyword">return</span> getState() != <span class="number">0</span>;</span><br><span class="line">     }</span><br><span class="line"> </span><br><span class="line">     <span class="comment">// Ëá™ÂÆö‰πâÂèçÂ∫èÂàóÂåñÈÄªËæë</span></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span><br><span class="line">         <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException {</span><br><span class="line">         s.defaultReadObject();</span><br><span class="line">         setState(<span class="number">0</span>); <span class="comment">// reset to unlocked state</span></span><br><span class="line">     }</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<p>Áã¨‰∫´ÈîÅ„ÄÅÊîØÊåÅÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅ‰∏§ÁßçÊ®°ÂºèÔºåÂèØÈáçÂÖ•ÈîÅ„ÄÇ</p>
<p><img src="/p/5fd8877a/Lock-ReetrantLock%E9%94%81%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86.png" alt="image-20210429135322710"></p>
<p>ÂàùÂßãÊó∂ÊåÅÊúâËÄÖ‰∏∫nullÔºåËÆ°Êï∞ÊòØÂΩìÂâçË∞ÉÁî®lock()ÊñπÊ≥ïÂä†ÈîÅÁöÑÊ¨°Êï∞Ôºåunlock()‰ºöÂ∞ÜËÆ°Êï∞Âáè1ÔºåÂΩìËÆ°Êï∞‰∏∫0Êó∂ÔºåÂàôË°®Á§∫ÂΩìÂâçÈîÅË¢´ÈáäÊîæ„ÄÇÔºàËé∑ÂèñÂΩìÂâçÈîÅÁöÑÊ¨°Êï∞ getHoldCount()Ôºâ</p>
<p>ÂèØÈáçÂÖ•ÈîÅÁöÑËØùÔºåÂÅö‰∫Ü‰∏ÄÊ¨°Âä†ÈîÅÂ∞±‰∏ÄÂÆöË¶ÅÊúâÂØπÂ∫îÁöÑ‰∏ÄÊ¨°Ëß£ÈîÅÔºåÂê¶Âàô‰∫ßÁîüÊ≠ªÈîÅ„ÄÇ    </p>
<h2 id="ReadWriteLockÔºàÊ≥®Ôºö‰∏çÊòØLockÈîÅÁöÑÂ≠êÁ±ªÔºâ"><a href="#ReadWriteLockÔºàÊ≥®Ôºö‰∏çÊòØLockÈîÅÁöÑÂ≠êÁ±ªÔºâ" class="headerlink" title="ReadWriteLockÔºàÊ≥®Ôºö‰∏çÊòØLockÈîÅÁöÑÂ≠êÁ±ªÔºâ"></a>ReadWriteLockÔºàÊ≥®Ôºö‰∏çÊòØLockÈîÅÁöÑÂ≠êÁ±ªÔºâ</h2><p>Áª¥Êä§‰∏ÄÂØπÂÖ≥ËÅîÈîÅÔºå‰∏Ä‰∏™Áî®‰∫éÂè™ËØªÊìç‰ΩúÔºå‰∏Ä‰∏™Áî®‰∫éÂÜôÂÖ•;ËØªÈîÅÂèØ‰ª•Áî±Â§ö‰∏™ËØªÁ∫øÁ®ãÂêåÊó∂ÊåÅÊúâÔºåÂÜôÈîÅÊòØÊéí‰ªñÁöÑ„ÄÇ</p>
<p>ËØªÈîÅÊãíÁªùÂÖ∂‰ªñÁ∫øÁ®ãËé∑ÂæóÂÜôÈîÅÔºåËØªÈîÅ‰∏çÊãíÁªùÂÖ∂‰ªñÁ∫øÁ®ãËé∑ÂæóËØªÈîÅÔºåÂ§ö‰∏™‰∏ä‰∫ÜËØªÈîÅÁöÑÁ∫øÁ®ãÂèØ‰ª•Âπ∂ÂèëËØª‰∏ç‰ºöÈòªÂ°û„ÄÇÂ§ö‰∏™ËØªÈîÅÂêåÊó∂‰ΩúÁî®ÊúüÈó¥ÔºåÂÖ∂‰ªñÊÉ≥‰∏äÂÜôÈîÅÁöÑÁ∫øÁ®ãÈÉΩÂ§ÑÂú®Á≠âÂæÖÁä∂ÊÄÅÔºåÂΩìÊúÄÂêé‰∏Ä‰∏™ËØªÈîÅÈáäÊîæÂêéÔºåÊâçÊúâÂèØËÉΩ‰∏äÈîÅ„ÄÇ</p>
<p>ÈÄÇÂêàËØªÂèñÁ∫øÁ®ãÊØîÂÜôÂÖ•Á∫øÁ®ãÂ§öÁöÑÂú∫ÊôØÔºåÊîπËøõ‰∫íÊñ•ÈîÅÁöÑÊÄßËÉΩÔºåÁ§∫‰æãÂú∫ÊôØ:ÁºìÂ≠òÁªÑ‰ª∂„ÄÅÈõÜÂêàÁöÑÂπ∂ÂèëÁ∫øÁ®ãÂÆâÂÖ®ÊÄßÊîπÈÄ†„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ËØªÂÜôÈîÅÊ°à‰æã</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LockDemo2</span> {</span><br><span class="line">    <span class="type">ReadWriteLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">LockDemo2</span> <span class="variable">lockDemo2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LockDemo2</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) {</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">                lockDemo2.read(Thread.currentThread());</span><br><span class="line">            }, <span class="string">"A"</span> + i).start();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">            lockDemo2.write(Thread.currentThread());</span><br><span class="line">        }, <span class="string">"C"</span>).start();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â§öÁ∫øÁ®ãËØªÔºåÂÖ±‰∫´ÈîÅ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">(Thread t)</span> {</span><br><span class="line">        lock.readLock().lock();</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">            <span class="keyword">while</span> (System.currentTimeMillis() - start &lt;= <span class="number">1</span>) {</span><br><span class="line">                System.out.println(t.getName() + <span class="string">"Ê≠£Âú®„ÄêËØª„ÄëÊìç‰Ωú"</span>);</span><br><span class="line">            }</span><br><span class="line">            System.out.println(t.getName() + <span class="string">"„ÄêËØª„ÄëÊìç‰ΩúÂÆåÊàê"</span>);</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            lock.readLock().unlock();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Áã¨‰∫´ÈîÅ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(Thread t)</span> {</span><br><span class="line">        lock.writeLock().lock();</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">            <span class="keyword">while</span> (System.currentTimeMillis() - start &lt;= <span class="number">1</span>) {</span><br><span class="line">                System.out.println(t.getName() + <span class="string">"Ê≠£Âú®„ÄêÂÜô„ÄëÊìç‰Ωú"</span>);</span><br><span class="line">            }</span><br><span class="line">            System.out.println(t.getName() + <span class="string">"„ÄêÂÜô„ÄëÊìç‰ΩúÂÆåÊàê"</span>);</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            lock.writeLock().unlock();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ReadWriteLockÈîÅÈôçÁ∫ß"><a href="#ReadWriteLockÈîÅÈôçÁ∫ß" class="headerlink" title="ReadWriteLockÈîÅÈôçÁ∫ß"></a>ReadWriteLockÈîÅÈôçÁ∫ß</h2><p>ÈîÅÈôçÁ∫ßÊåáÁöÑÊòØÂÜôÈîÅÈôçÁ∫ßÊàê‰∏∫ËØªÈîÅ„ÄÇÊääÊåÅ‰ΩèÂΩìÂâçÊã•ÊúâÁöÑÂÜôÈîÅÁöÑÂêåÊó∂ÔºåÂÜçËé∑ÂèñÂà∞ËØªÈîÅ,ÈöèÂêéÈáäÊîæÂÜôÈîÅÁöÑËøáÁ®ã„ÄÇ</p>
<p>ÂÜôÈîÅÊòØÁ∫øÁ®ãÁã¨Âç†ÔºåËØªÈîÅÊòØÂÖ±‰∫´ÔºåÊâÄ‰ª•ÂÜô-&gt;ËØªÊòØÂçáÁ∫ß„ÄÇ(ËØª~&gt;ÂÜô, ÊòØ‰∏çËÉΩÂÆûÁé∞ÁöÑ)</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ‰∏Ä‰∏™ÁºìÂ≠òdemoÔºåËØªÂÜôÈîÅ‰æãÂ≠êÔºåÂÆûÁé∞ËØªÂíåÂÜô‰∫íÊñ•„ÄÅÂÜôÂíåÂÜô‰∫íÊñ•Ôºå‰ΩÜÊúâÂèØ‰ª•Â§ö‰∏™Âπ∂ÂèëÁöÑËØªÔºåÂèØÊèêÈ´òÁ≥ªÁªüÊÄßËÉΩ</span></span><br><span class="line"><span class="comment"> * ReentrantReadWriteLockÁöÑÂ∫îÁî®Âú∫ÊôØ‰∏≠Ôºå‰ΩøÁî®ÂÜôÈîÅÂèØËÉΩÊ≤°ÊúâÊ≥®ÊÑèÂà∞ÁºìÂ≠òÈóÆÈ¢òÔºàÂáªÁ©ø„ÄÅÈõ™Â¥©„ÄÅÁ©øÈÄèÔºâ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> DengJun 2021/4/29</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LockDemo3</span> {</span><br><span class="line">    <span class="comment">// Êï∞ÊçÆ</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; cache = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// ËØªÂÜôÈîÅ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">ReadWriteLock</span> <span class="variable">rwl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getData</span><span class="params">(String key)</span> {</span><br><span class="line">        <span class="comment">// ‰∏äËØªÈîÅÔºåÂ§ö‰∏™ËØªÊó∂ÂèØ‰ª•Âπ∂ÂèëÔºå‰∏ç‰ºöÈÄ†ÊàêÂØπÊï∞ÊçÆÁöÑÁ†¥Âùè</span></span><br><span class="line">        rwl.readLock().lock();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            value = cache.get(key);</span><br><span class="line">            <span class="comment">// Â¶ÇÊûúÊï∞ÊçÆ‰∏∫Á©∫</span></span><br><span class="line">            <span class="keyword">if</span> (value == <span class="literal">null</span>) {</span><br><span class="line">                <span class="comment">// ÈáäÊîæËØªÈîÅ‰∏äÂÜôÈîÅÔºå‰∏äÂÜôÈîÅÂêéÔºåÊï∞ÊçÆ‰∏çËÉΩË¢´ËØª</span></span><br><span class="line">                rwl.readLock().unlock();</span><br><span class="line">                rwl.writeLock().lock();</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    <span class="comment">// Ê≠§Â§ÑÂà§Êñ≠ÊòØ‰∏∫Èò≤Ê≠¢Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂ËøõÂÖ•Âà∞ËøôÈáåÊó∂ÔºåÂ§ö‰∏™Á∫øÁ®ãÂØπÊï∞ÊçÆËøõË°åÈáçÂ§çÂÜô</span></span><br><span class="line">                    <span class="keyword">if</span> (value == <span class="literal">null</span>) {</span><br><span class="line">                        <span class="comment">// Â¶ÇÊûúÊ≤°ÊúâÊï∞ÊçÆÔºåÂàôÂéªÊü•DBËé∑ÂèñÊï∞ÊçÆ</span></span><br><span class="line">                        value = <span class="string">"XXX"</span>;</span><br><span class="line">                    }</span><br><span class="line">                } <span class="keyword">finally</span> {</span><br><span class="line">                    <span class="comment">// ËØªÂèñÊï∞ÊçÆÂêéÈáäÊîæÂÜôÈîÅ</span></span><br><span class="line">                    rwl.writeLock().unlock();</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">// Ëé∑ÂèñÂÆåÊï∞ÊçÆÂêéÔºåÊÅ¢Â§çËØªÈîÅÔºåÈáçÊñ∞ËØªÂèñÊï∞ÊçÆ</span></span><br><span class="line">                rwl.readLock().lock();</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="comment">// ÈáçÊñ∞ËØªÂèñÊï∞ÊçÆÈáäÊîæËØªÈîÅ</span></span><br><span class="line">            value = cache.get(key);</span><br><span class="line">            rwl.readLock().unlock();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Condition"><a href="#Condition" class="headerlink" title="Condition"></a>Condition</h2><p><img src="/p/5fd8877a/Lock-ReentrantLock-Condition%E5%8E%9F%E7%90%86.png" alt="image-20210429171248960"></p>
</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂõõÁßçÂçï‰æãÊ®°Âºè</title>
    <url>/p/e38626a3.html</url>
    <content><![CDATA[<html><head></head><body><p>ÂÖ∂ÂÆûÂú®Â≠¶Spring5Ê∫êÁ†ÅÁöÑÊó∂ÂÄôÔºåÂ∞±Â∑≤ÁªèÁΩóÂàó‰∫ÜÂêÑÁßçÂçï‰æãÊ®°Âºè„ÄÇÂú®Ê≠§ÔºåÂ≠¶‰π†Ëøá java.util.concurrent ÂåÖÂêéÔºåÁ´ôÂú®Â§öÁ∫øÁ®ãÁöÑËßíÂ∫¶‰∏äÂàÜÊûêÊØîËæÉÁªèÂÖ∏ÁöÑÊáíÊ±âÊ®°ÂºèÁöÑÂèåÈáçÈîÅÊ†°È™åÔºàÂèàÁß∞‰∏∫DCLÊáíÊ±âÂºèÔºàDouble Check LockÔºâÔºâ„ÄÇ</p>
<h2 id="ÈÄêÊ≠•ËøõÈò∂ÔºåÂü∫Á°ÄÁâàÊú¨"><a href="#ÈÄêÊ≠•ËøõÈò∂ÔºåÂü∫Á°ÄÁâàÊú¨" class="headerlink" title="ÈÄêÊ≠•ËøõÈò∂ÔºåÂü∫Á°ÄÁâàÊú¨"></a>ÈÄêÊ≠•ËøõÈò∂ÔºåÂü∫Á°ÄÁâàÊú¨</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> LazySingleton singleton4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> LazySingleton <span class="title function_">lazy</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">if</span> (singleton4 == <span class="literal">null</span>) {</span><br><span class="line">        singleton4 = <span class="keyword">new</span> <span class="title class_">LazySingleton</span>();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> singleton4;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Â≠òÂú®ÈóÆÈ¢òÂàÜÊûêÔºöÂ§öÁ∫øÁ®ãËøõË°åËÆøÈóÆÊó∂ÔºåÂèØËÉΩÂ§ö‰∏™Á∫øÁ®ã‰ºöÂêåÊó∂ËøõÂÖ•if ÁöÑ‰ΩúÁî®Âüü‰∏≠ÔºåÈÇ£‰πàÂ∞±‰ºöÂàõÂª∫Â§ö‰∏™ LazySingleton() ÂØπË±°ÔºåÂØºËá¥Ëøô‰∫õÁ∫øÁ®ãËøîÂõûÁöÑÂØπË±°Âú∞ÂùÄ‰∏ç‰∏ÄËá¥„ÄÇ</p>
<h2 id="ÊôÆÈÄöÂä†ÈîÅÁâàÊú¨"><a href="#ÊôÆÈÄöÂä†ÈîÅÁâàÊú¨" class="headerlink" title="ÊôÆÈÄöÂä†ÈîÅÁâàÊú¨"></a>ÊôÆÈÄöÂä†ÈîÅÁâàÊú¨</h2><p>Áõ¥Êé•ÊñπÊ≥ïÂä†ÈîÅÔºåÁ°ÆÂÆûËÉΩÂ§üËß£ÂÜ≥ÈóÆÈ¢òÔºå‰ΩÜÊòØÊÄßËÉΩÂçÅÂàÜ‰Ωé‰∏ã„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> LazySingleton singleton4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> LazySingleton <span class="title function_">lazy</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">if</span> (singleton4 == <span class="literal">null</span>) {</span><br><span class="line">        singleton4 = <span class="keyword">new</span> <span class="title class_">LazySingleton</span>();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> singleton4;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÂèåÈáçÊ†°È™åÂä†ÈîÅÁâàÊú¨"><a href="#ÂèåÈáçÊ†°È™åÂä†ÈîÅÁâàÊú¨" class="headerlink" title="ÂèåÈáçÊ†°È™åÂä†ÈîÅÁâàÊú¨"></a>ÂèåÈáçÊ†°È™åÂä†ÈîÅÁâàÊú¨</h2><p>‚Äã        Â§öÁ∫øÁ®ãÈÉΩÂèØ‰ª•ËøõÂÖ•ÊñπÊ≥ïÂíåÁ¨¨‰∏Ä‰∏™ if ÁöÑ‰ΩúÁî®ÂüüÔºåÈîÅÁ±ªÁöÑÁõÆÁöÑÊòØ‰øùËØÅÂè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãËøõÂÖ•ÂΩìÂâçÁ±ªÂêéËøõÂÖ•Á¨¨‰∫å‰∏™if‰ΩúÁî®ÂüüÂàõÂª∫ÂÆû‰æãÂØπË±°ÔºåÈöèÂêéËß£ÈîÅÔºåËÆ©ÂÖ∂ÂÆÉËøõÂÖ•Á¨¨‰∏Ä‰∏™if‰ΩúÁî®ÂüüÁöÑÈòªÂ°ûÁ∫øÁ®ãÂú®Âà§Êñ≠‰∏ÄÊ¨°ÊòØÂê¶‰∏∫Á©∫„ÄÇ<br>‚Äã        ËôΩÁÑ∂ÊÄßËÉΩÊòØÊèêÂçá‰∫ÜÔºå‰ΩÜÊòØÁúüÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÂêóÔºüÂπ∂Âèë‰∏ãÁöÑÊåá‰ª§ÈáçÊéíÊòØ‰ºöÂá∫ÈóÆÈ¢òÁöÑÔºåÂàÜÊûêÔºö singleton4 = new LazySingleton() ‰∏çÊòØÂéüÂ≠êÊÄßÊìç‰ΩúÔºåÊúâ‰∏â‰∏™Ê≠•È™§Ôºö ‚ë†ÂàÜÈÖçÂÜÖÂ≠òÁ©∫Èó¥ ‚ë°ÊâßË°åÊûÑÈÄ†ÊñπÊ≥ïÂπ∂ÂÆû‰æãÂåñÂØπË±° ‚ë¢ ÂàÜÈÖçÂÜÖÂ≠òÂú∞ÂùÄÔºåÊääËøô‰∏™ÂØπË±°ÊåáÂêëËøô‰∏™Á©∫Èó¥„ÄÇCPUÊâßË°åÊó∂‰∏ç‰∏ÄÂÆöÊòØÊåâÁÖß123ÊâßË°åÁöÑÔºåÂ¶ÇÊûúÊåâÁÖßÊâßË°åÈ°∫Â∫èÊòØ132ÔºåÁ¨¨3Ê≠•ÂÖàÊâßË°åÁöÑËØùÔºåËøòÊ≤°ÊúâÂÆåÊàêÂÆû‰æãÂåñÔºåÂ∞±ÊåáÂêëËøô‰∏™Á©∫Èó¥‰∫ÜÔºåÊ≠§Êó∂ÁöÑ singleton4 ‰∏ç‰∏∫Á©∫Ôºå‰∏ã‰∏Ä‰∏™Á∫øÁ®ãËøõÂÖ•ÊñπÊ≥ïÁöÑÁ¨¨‰∏Ä‰∏™ifÂà§Êñ≠Ëµ∞falseÔºåÁõ¥Êé•ËøîÂõûËøô‰∏™ÂØπË±°ÔºåÊ≠§Êó∂ÁöÑËøô‰∏™ singleton4 Âπ∂Ê≤°ÊúâÂÆåÊàêÂÆû‰æãÂåñÔºÅÊâÄ‰ª•Â∞±‰ºöÂØºËá¥Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p>‚Äã    volatile Êúâ‰∏âÂ§ßÁâπÊÄßÔºö1„ÄÅÂèØËßÅÊÄßÔºõ2„ÄÅÁ¶ÅÊ≠¢Êåá‰ª§ÈáçÊéíÔºõ3„ÄÅ‰∏ç‰øùËØÅÂéüÂ≠êÊÄß„ÄÇÊâÄ‰ª•‰ΩøÁî®volatile ÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞Âç≥ÂèØ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> LazySingleton singleton4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> LazySingleton <span class="title function_">lazy2</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    <span class="keyword">if</span> (singleton4 == <span class="literal">null</span>) {</span><br><span class="line">        <span class="keyword">synchronized</span> (LazySingleton.class) {</span><br><span class="line">            <span class="keyword">if</span> (singleton4 == <span class="literal">null</span>) {</span><br><span class="line">                singleton4 = <span class="keyword">new</span> <span class="title class_">LazySingleton</span>();</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">return</span> singleton4;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> singleton4;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Âçï‰æãÊ®°ÂºèË¢´Á†¥ÂùèÁöÑÊÉÖÂÜµ"><a href="#Âçï‰æãÊ®°ÂºèË¢´Á†¥ÂùèÁöÑÊÉÖÂÜµ" class="headerlink" title="Âçï‰æãÊ®°ÂºèË¢´Á†¥ÂùèÁöÑÊÉÖÂÜµ"></a>Âçï‰æãÊ®°ÂºèË¢´Á†¥ÂùèÁöÑÊÉÖÂÜµ</h2><p>Á†¥ÂùèÂçï‰æãÊ®°ÂºèÁöÑÊÑèÊÄùÂ∞±ÊòØÔºö‰∏Ä‰∏™Âçï‰æãÂØπË±°Â≠òÂú®Â§ö‰∏™„ÄÇ</p>
<p>ÂèçÂ∞Ñ„ÄÅÂ∫èÂàóÂåñ„ÄÅÂÖãÈöÜÈÉΩ‰ºöÁ†¥ÂùèÂçï‰æãÊ®°Âºè„ÄÇ</p>
<p>Ëß£ÂÜ≥ÊñπÊ°àÔºöÊûö‰∏æÂçï‰æãÊ®°Âºè„ÄÅÂÆπÂô®ÂºèÂçï‰æãÊ®°ÂºèÔºàConcurrentHashMapÔºâ„ÄÅÁ∫øÁ®ãÈöîÁ¶ªÂºèÂçï‰æãÊ®°ÂºèÔºàThreadLocalÔºâ</p>
<p>Â∞ùËØïÁ†¥ÂùèÊûö‰∏æÂçï‰æãÊ®°ÂºèÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">enum</span> <span class="title class_">Lazy4</span> {</span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Lazy4 <span class="title function_">getInstance</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">Lazy4</span> <span class="variable">instance1</span> <span class="operator">=</span> Lazy4.INSTANCE;</span><br><span class="line">        Constructor&lt;Lazy4&gt; declaredConstructor = Lazy4.class.getDeclaredConstructor(String.class, <span class="type">int</span>.class);</span><br><span class="line">        declaredConstructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">Lazy4</span> <span class="variable">instance2</span> <span class="operator">=</span> declaredConstructor.newInstance(); </span><br><span class="line">        System.out.println(instance1); System.out.println(instance2);</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>Semaphore‰ø°Âè∑Èáè</title>
    <url>/p/f353d57c.html</url>
    <content><![CDATA[<html><head></head><body><p>Â∫îÁî®Âú∫ÊôØÔºöÂ§ö‰∏™ÂÖ±‰∫´ËµÑÊ∫ê‰∫íÊñ•„ÄÅÂπ∂ÂèëÈôêÊµÅÔºàÂ¶ÇHystrixÔºâ„ÄÇ</p>
<h2 id="‰ªÄ‰πàÊòØ‰ø°Âè∑ÈáèÔºü"><a href="#‰ªÄ‰πàÊòØ‰ø°Âè∑ÈáèÔºü" class="headerlink" title="‰ªÄ‰πàÊòØ‰ø°Âè∑ÈáèÔºü"></a>‰ªÄ‰πàÊòØ‰ø°Âè∑ÈáèÔºü</h2><p>‰ø°Âè∑ÈáèÊòØÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂÆûÁé∞ËøõÁ®ãÈó¥ËµÑÊ∫êÁöÑ‰∫íÊñ•‰∏éÂêåÊ≠•„ÄÇ‰ø°Âè∑ÈáèÁª¥Êä§‰∫Ü‰∏ÄÁªÑËÆ∏ÂèØËØÅÔºå‰ª•Á∫¶ÊùüËÆøÈóÆË¢´ÈôêÂà∂ËµÑÊ∫êÁöÑÁ∫øÁ®ãÊï∞„ÄÇ</p>
<h2 id="Java‰∏≠ÁöÑSemaphore"><a href="#Java‰∏≠ÁöÑSemaphore" class="headerlink" title="Java‰∏≠ÁöÑSemaphore"></a>Java‰∏≠ÁöÑSemaphore</h2><p>JavaÂπ∂ÂèëÂåÖ‰∏≠ÁöÑ Semaphore ÂèØ‰ª•ÊéßÂà∂Êüê‰∏™ËµÑÊ∫êË¢´ÂêåÊó∂ËÆøÈóÆÁöÑ‰ªªÂä°Êï∞ÔºåÂÖ∂‰∏ªË¶ÅÊñπÊ≥ïÊúâÔºö</p>
<ul>
<li>void acquire()Ôºö‰ªéÊ≠§‰ø°Âè∑ÈáèËé∑Âèñ‰∏Ä‰∏™ËÆ∏ÂèØÔºåÂú®Êèê‰æõ‰∏Ä‰∏™ËÆ∏ÂèØÂâç‰∏ÄÁõ¥Â∞ÜÁ∫øÁ®ãÈòªÂ°ûÔºåÂê¶ÂàôÁ∫øÁ®ãË¢´‰∏≠Êñ≠„ÄÇ</li>
<li>void release()ÔºöÈáäÊîæ‰∏Ä‰∏™ËÆ∏ÂèØÔºåÂ∞ÜÂÖ∂ËøîÂõûÁªô‰ø°Âè∑Èáè„ÄÇ</li>
<li>int availablePermits()ÔºöËøîÂõûÊ≠§‰ø°Âè∑Èáè‰∏≠ÂΩìÂâçÂèØÁî®ÁöÑËÆ∏ÂèØÊï∞„ÄÇ</li>
<li>boolean hasQueuedThreads()ÔºöÊü•ËØ¢ÊòØÂê¶ÊúâÁ∫øÁ®ãÊ≠£Âú®Á≠âÂæÖËé∑Âèñ„ÄÇ</li>
</ul>
<p>Â¶ÇÊûúË¢´ÂêåÊó∂ËÆøÈóÆÁöÑ‰ªªÂä°Êï∞Â∑≤Êª°ÔºåÂàôÂÖ∂‰ªñacquireÁöÑ‰ªªÂä°ËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅÔºåÁõ¥Âà∞Êúâ‰∏Ä‰∏™‰ªªÂä°Ë¢´releaseÊéâÔºåÂÆÉÊâçËÉΩÂæóÂà∞ËÆ∏ÂèØ„ÄÇ</p>
<h3 id="Â∫îÁî®Á§∫‰æã"><a href="#Â∫îÁî®Á§∫‰æã" class="headerlink" title="Â∫îÁî®Á§∫‰æã"></a>Â∫îÁî®Á§∫‰æã</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSemaphore</span><span class="params">()</span> {</span><br><span class="line">    <span class="comment">// ÂÖÅËÆ∏Èáè‰∏∫3ÔºåÂÅáËÆæ‰∏∫3‰∏™ÂÅúËΩ¶‰Ωç</span></span><br><span class="line">    <span class="type">Semaphore</span> <span class="variable">semaphore</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Semaphore</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) {</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                semaphore.acquire();</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">"Êä¢Âà∞ËΩ¶‰Ωç"</span>);</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">"Á¶ªÂºÄËΩ¶‰Ωç"</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            } <span class="keyword">finally</span> {</span><br><span class="line">                semaphore.release();</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        }, <span class="string">""</span> + i).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËøêË°åÁªìÊûú</p>
<figure class="highlight tex"><table><tbody><tr><td class="code"><pre><span class="line">0Êä¢Âà∞ËΩ¶‰Ωç</span><br><span class="line">1Êä¢Âà∞ËΩ¶‰Ωç</span><br><span class="line">2Êä¢Âà∞ËΩ¶‰Ωç</span><br><span class="line">1Á¶ªÂºÄËΩ¶‰Ωç</span><br><span class="line">2Á¶ªÂºÄËΩ¶‰Ωç</span><br><span class="line">0Á¶ªÂºÄËΩ¶‰Ωç</span><br><span class="line">4Êä¢Âà∞ËΩ¶‰Ωç</span><br><span class="line">3Êä¢Âà∞ËΩ¶‰Ωç</span><br><span class="line">5Êä¢Âà∞ËΩ¶‰Ωç</span><br><span class="line">3Á¶ªÂºÄËΩ¶‰Ωç</span><br><span class="line">5Á¶ªÂºÄËΩ¶‰Ωç</span><br><span class="line">4Á¶ªÂºÄËΩ¶‰Ωç</span><br></pre></td></tr></tbody></table></figure>

<p>SemaphroeÂ∫ïÂ±Ç‰πüÊòØÁî®SyncÁ±ªÔºåÈªòËÆ§ÊòØÈùûÂÖ¨Âπ≥ÁöÑÔºå‰πüÊúâÂÖ¨Âπ≥ÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Semaphore</span><span class="params">(<span class="type">int</span> permits, <span class="type">boolean</span> fair)</span> {</span><br><span class="line">    sync = fair ? <span class="keyword">new</span> <span class="title class_">FairSync</span>(permits) : <span class="keyword">new</span> <span class="title class_">NonfairSync</span>(permits);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÆö‰πâÁöÑËÆ∏ÂèØÊï∞ÔºåÂÆûÈôÖÊòØËÆæÁΩÆÈîÅÁöÑÁä∂ÊÄÅÂÄºÁöÑ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Sync</span> <span class="keyword">extends</span> <span class="title class_">AbstractQueuedSynchronizer</span> {</span><br><span class="line">    Sync(<span class="type">int</span> permits) {</span><br><span class="line">        setState(permits);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="‰∏∫‰ªÄ‰πàSemaphoreËÉΩÈôêÂà∂ÂêåÊó∂ÊâßË°åÁöÑÁ∫øÁ®ãÊï∞Ôºü"><a href="#‰∏∫‰ªÄ‰πàSemaphoreËÉΩÈôêÂà∂ÂêåÊó∂ÊâßË°åÁöÑÁ∫øÁ®ãÊï∞Ôºü" class="headerlink" title="‰∏∫‰ªÄ‰πàSemaphoreËÉΩÈôêÂà∂ÂêåÊó∂ÊâßË°åÁöÑÁ∫øÁ®ãÊï∞Ôºü"></a>‰∏∫‰ªÄ‰πàSemaphoreËÉΩÈôêÂà∂ÂêåÊó∂ÊâßË°åÁöÑÁ∫øÁ®ãÊï∞Ôºü</h3><p>ËøôÂ∞±ÊòØ<code>acquire()</code>ÁöÑÁî®Â§Ñ‰∫Ü</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">acquire</span><span class="params">(<span class="type">int</span> permits)</span> { </span><br><span class="line">	sync.acquireSharedInterruptibly(permits);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÁÇπËøõSemaphore‰∏≠ÁöÑÂÜÖÈÉ®Á±ªSyncÁöÑ <code>acquireSharedInterruptibly</code>Ëøô‰∏™ÊñπÊ≥ï</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">acquireSharedInterruptibly</span><span class="params">(<span class="type">int</span> arg)</span></span><br><span class="line">    <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    <span class="keyword">if</span> (Thread.interrupted())</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">InterruptedException</span>();</span><br><span class="line">    <span class="comment">// Â∞ùËØïËé∑ÂèñÈîÅÔºåËøîÂõûÂÄºÂ∞è‰∫é0Â∞±ÊòØËé∑ÂèñÈîÅÂ§±Ë¥•</span></span><br><span class="line">    <span class="comment">// ‰ø°Âè∑ÈáèÊòØÈùûÁã¨Âç†ËµÑÊ∫êÔºå‰ΩøÁî®ÂÖ±‰∫´ÈîÅÊù•Ëé∑Âèñ‰ø°Âè∑Èáè</span></span><br><span class="line">    <span class="keyword">if</span> (tryAcquireShared(arg) &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="comment">// Â¶ÇÊûúËé∑ÂèñÂ§±Ë¥•ÔºåÂàôËøõÂÖ•ÈòüÂàóËøõË°åÁ≠âÂæÖÔºå‰πãÂâçÂ∑≤ÁªèËß£ÊûêËøá</span></span><br><span class="line">        doAcquireSharedInterruptibly(arg);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®<code>doAcquireSharedInterruptibly</code> ÊñπÊ≥ï‰∏≠‰ºöÊ≠ªÂæ™ÁéØÈÅçÂéÜÈòüÂàó‰∏≠Á≠âÂæÖÁöÑÁ∫øÁ®ãÔºå‰∏çÊñ≠ÁöÑË∞ÉÁî® <code>tryAcquireShared</code> ÊñπÊ≥ï„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doAcquireSharedInterruptibly</span><span class="params">(<span class="type">int</span> arg)</span></span><br><span class="line">    <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    <span class="keyword">final</span> <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> addWaiter(Node.SHARED);</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">failed</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">for</span> (;;) {</span><br><span class="line">            <span class="keyword">final</span> <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> node.predecessor();</span><br><span class="line">            <span class="keyword">if</span> (p == head) {</span><br><span class="line">                <span class="comment">// ËΩÆÂà∞ÁöÑÁ∫øÁ®ãË∞ÉÁî®ËØ•ÊñπÊ≥ïËé∑ÂèñÂΩìÂâçÁöÑËÆ∏ÂèØÊï∞</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> tryAcquireShared(arg);</span><br><span class="line">                <span class="keyword">if</span> (r &gt;= <span class="number">0</span>) {</span><br><span class="line">                    setHeadAndPropagate(node, r);</span><br><span class="line">                    p.next = <span class="literal">null</span>; <span class="comment">// help GC</span></span><br><span class="line">                    failed = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (shouldParkAfterFailedAcquire(p, node) &amp;&amp;</span><br><span class="line">                parkAndCheckInterrupt())</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">InterruptedException</span>();</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">finally</span> {</span><br><span class="line">        <span class="keyword">if</span> (failed)</span><br><span class="line">            cancelAcquire(node);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>tryAcquireShared</code> ÊñπÊ≥ïÊúâ<code>NonfairSync</code> Âíå <code>FairSync</code> ‰∏§‰∏™Á±ªÁöÑÂÆûÁé∞Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//----------------------- NonfairSync -------------------------//</span></span><br><span class="line"><span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">tryAcquireShared</span><span class="params">(<span class="type">int</span> acquires)</span> {</span><br><span class="line">    <span class="comment">// Ëé∑ÂèñÂà∞Êó∂Èó¥ÁâáÁöÑÁ∫øÁ®ãÔºåÂè™Ë¶ÅÊúâËÆ∏ÂèØÂ∞±Áõ¥Êé•ÂàÜÈÖç</span></span><br><span class="line">    <span class="keyword">return</span> nonfairTryAcquireShared(acquires);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">final</span> <span class="type">int</span> <span class="title function_">nonfairTryAcquireShared</span><span class="params">(<span class="type">int</span> acquires)</span> {</span><br><span class="line">    <span class="keyword">for</span> (;;) {</span><br><span class="line">        <span class="comment">// Ëé∑ÂèñÂΩìÂâçÈîÅÁä∂ÊÄÅÔºåÈîÅÁä∂ÊÄÅÂÄº‰∏ÄÂºÄÂßãÊòØËá™ÂÆö‰πâÁöÑ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">available</span> <span class="operator">=</span> getState();</span><br><span class="line">        <span class="comment">// ÂΩìÂâçÁî≥ËØ∑ÂêéÂâ©‰ΩôÁöÑÈîÅÁä∂ÊÄÅÂÄº</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">remaining</span> <span class="operator">=</span> available - acquires;</span><br><span class="line">        <span class="keyword">if</span> (remaining &lt; <span class="number">0</span> ||</span><br><span class="line">            <span class="comment">// CASÊõøÊç¢ÈîÅÁä∂ÊÄÅÂÄº</span></span><br><span class="line">            compareAndSetState(available, remaining))</span><br><span class="line">            <span class="keyword">return</span> remaining;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">//----------------------- FairSync -------------------------//</span></span><br><span class="line"><span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">tryAcquireShared</span><span class="params">(<span class="type">int</span> acquires)</span> {</span><br><span class="line">    <span class="keyword">for</span> (;;) {</span><br><span class="line">        <span class="comment">// Âà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÂú®ÈòüÂàó‰∏≠ÁöÑ‰ΩçÁΩÆÔºåÊòØÂê¶ËΩÆÂà∞ËØ•Á∫øÁ®ã‰∫Ü</span></span><br><span class="line">        <span class="keyword">if</span> (hasQueuedPredecessors())</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">available</span> <span class="operator">=</span> getState();</span><br><span class="line">        <span class="type">int</span> <span class="variable">remaining</span> <span class="operator">=</span> available - acquires;</span><br><span class="line">        <span class="keyword">if</span> (remaining &lt; <span class="number">0</span> ||</span><br><span class="line">            compareAndSetState(available, remaining))</span><br><span class="line">            <span class="keyword">return</span> remaining;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="SemaphoreÈáäÊîæÈîÅ"><a href="#SemaphoreÈáäÊîæÈîÅ" class="headerlink" title="SemaphoreÈáäÊîæÈîÅ"></a>SemaphoreÈáäÊîæÈîÅ</h3><p>Á∫øÁ®ãËé∑ÂèñÊâßË°åËµÑÊ†º‰πãÂêéÈúÄË¶ÅÈáäÊîæÈîÅÔºåÂΩìÂâçÁ∫øÁ®ã‰∏çÈáäÊîæÈîÅÁöÑËØùÔºå‰ºöÂØºËá¥ÂÖ∂ÂÆÉÁ∫øÁ®ãÊó†Ê≥ïËøõÂÖ•Ëé∑ÂèñËÆ∏ÂèØ„ÄÇÈáäÊîæÈîÅË∞ÉÁî®ÁöÑÊòØAQS‰∏≠ÁöÑrelaseÊñπÊ≥ïÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">(<span class="type">int</span> permits)</span> {</span><br><span class="line">    <span class="keyword">if</span> (permits &lt; <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">    sync.releaseShared(permits);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">releaseShared</span><span class="params">(<span class="type">int</span> arg)</span> {</span><br><span class="line">    <span class="keyword">if</span> (tryReleaseShared(arg)) {</span><br><span class="line">        doReleaseShared();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">tryReleaseShared</span><span class="params">(<span class="type">int</span> releases)</span> {</span><br><span class="line">    <span class="keyword">for</span> (;;) {</span><br><span class="line">        <span class="comment">// Ëé∑ÂèñÈîÅÂΩìÂâçÁä∂ÊÄÅ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">current</span> <span class="operator">=</span> getState();</span><br><span class="line">        <span class="comment">// ÈáäÊîæÈîÅÂâçÂÖàÊÅ¢Â§çËÆ∏ÂèØÊï∞</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">next</span> <span class="operator">=</span> current + releases;</span><br><span class="line">        <span class="keyword">if</span> (next &lt; current) <span class="comment">// overflow</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">"Maximum permit count exceeded"</span>);</span><br><span class="line">        <span class="comment">// Áî®CASÊõ¥Êñ∞ÈîÅÁä∂ÊÄÅ</span></span><br><span class="line">        <span class="keyword">if</span> (compareAndSetState(current, next))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>Synchronized VS Lock</title>
    <url>/p/ace4e0d0.html</url>
    <content><![CDATA[<html><head></head><body><p><a href="https://mrdjun.gitee.io/p/8360cd4.html">synchronized ÊñáÁ´†ÈòÖËØªÂú∞ÂùÄ</a></p>
<p><a href="https://mrdjun.gitee.io/p/5fd8877a.html">ReetrantLock &amp; ReadWriteLock ÊñáÁ´†ÈòÖËØªÂú∞ÂùÄ</a></p>
<table>
<thead>
<tr>
<th>‰∏çÂêåÁÇπ</th>
<th>synchronized</th>
<th>lock</th>
</tr>
</thead>
<tbody><tr>
<td>ÂÆûÁé∞ÊñπÂºè</td>
<td>Âü∫‰∫éJVMÂØπË±°ÁõëËßÜÂô®</td>
<td>ÂÆûÁé∞‰∫ÜAQSÊé•Âè£ÔºåÈÄöËøáJDKÁöÑ API ÊâßË°åÂ∫ïÂ±ÇÁöÑÊìç‰ΩúÁ≥ªÁªüÊåá‰ª§</td>
</tr>
<tr>
<td>È´òÁ∫ßÁâπÊÄß</td>
<td>ÂèØÈáçÂÖ•„ÄÅÈùûÂÖ¨Âπ≥</td>
<td>ÂèØÈáçÂÖ•„ÄÅÂèØ‰∏≠Êñ≠„ÄÅÂèØÈÄâÊã©ÔºàÈùûÔºâÂÖ¨Âπ≥„ÄÅÂèØÈÄâÊã©ÊÄßÈÄöÁü•Á∫øÁ®ã</td>
</tr>
<tr>
<td>ÊÄßËÉΩÊñπÈù¢</td>
<td>jdk1.6ÂâçÊÄßËÉΩËæÉÂ∑Æ</td>
<td>jdk1.5ÂºïÂÖ•ÔºåÂ∞ÜÂêåÊ≠•SynchronizedÊõøÊç¢ÊàêÊòæÂºèLockÊìç‰Ωú</td>
</tr>
</tbody></table>
<ul>
<li><p>LockÔºöÁî®‰∫éÊõø‰ª£ synchronized</p>
<pre><code>lock 
unlock
newCondition()
</code></pre>
</li>
<li><p>ConditionÔºöÁî®‰∫éÊõø‰ª£ Object wait notify notifyAll</p>
<pre><code>await();
signal();
signalAll();
</code></pre>
</li>
</ul>
<p>Âú®JDK1.6ÂêéÔºåsynchronizedÁöÑÂºïÂÖ•‰∫ÜÂÅèÂêëÈîÅ„ÄÅËá™ÈÄÇÂ∫îÂÅèÂêëÈîÅÁ≠âÊâãÊÆµ‰ΩøÂæóÊÄßËÉΩ‰∏éLockÈîÅÁõ∏Â™≤ÁæéÔºåÁîöËá≥JDKÂÆòÊñπÈÉΩÂª∫ËÆÆ‰ΩøÁî®synchronizedÈîÅ„ÄÇ</p>
<blockquote>
<p>‰∏§ËÄÖÁöÑ‰ΩøÁî®Âú∫ÊôØÔºü</p>
</blockquote>
<p>ËÉΩÁî®synchronizedÂ∞±Áî®synchronizedÔºåÂú®ÈúÄË¶ÅÁî®Âà∞LockÈîÅÁöÑÈ´òÁ∫ßÁâπÊÄßÔºåÂ¶ÇÂèØ‰∏≠Êñ≠„ÄÅÊåáÂÆöÁ∫øÁ®ãÈÄöÁü•„ÄÅÂÖ¨Âπ≥ÈîÅÊó∂Â∞±ÈÄâÊã©LockÈîÅ‰ΩøÁî®„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>Synchronized</title>
    <url>/p/8360cd4.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="synchronizedÁöÑ‰ΩúÁî®"><a href="#synchronizedÁöÑ‰ΩúÁî®" class="headerlink" title="synchronizedÁöÑ‰ΩúÁî®"></a>synchronizedÁöÑ‰ΩúÁî®</h2><p>synchronizedÔºàÊÇ≤ËßÇÈîÅÂèàÂè´Áã¨‰∫´ÈîÅÔºâ Áî®‰∫é‰øùÈöúÂéüÂ≠êÊÄß„ÄÅÂèØËßÅÊÄß„ÄÅÊúâÂ∫èÊÄß„ÄÇ</p>
<ol>
<li>ÂéüÂ≠êÊÄßÔºöÁ°Æ‰øùÁ∫øÁ®ã‰∫íÊñ•ÁöÑËÆøÈóÆÂêåÊ≠•‰ª£Á†ÅÔºõ</li>
<li>ÂèØËßÅÊÄßÔºö‰øùËØÅÂÖ±‰∫´ÂèòÈáèÁöÑ‰øÆÊîπËÉΩÂ§üÂèäÊó∂ÂèØËßÅÔºåÂÖ∂ÂÆûÊòØÈÄöËøáJavaÂÜÖÂ≠òÊ®°Âûã‰∏≠ÁöÑ ‚Äú<strong>ÂØπ‰∏Ä‰∏™ÂèòÈáèunlockÊìç‰Ωú‰πãÂâçÔºåÂøÖÈ°ªË¶ÅÂêåÊ≠•Âà∞‰∏ªÂÜÖÂ≠ò‰∏≠ÔºõÂ¶ÇÊûúÂØπ‰∏Ä‰∏™ÂèòÈáèËøõË°ålockÊìç‰ΩúÔºåÂàôÂ∞Ü‰ºöÊ∏ÖÁ©∫Â∑•‰ΩúÂÜÖÂ≠ò‰∏≠Ê≠§ÂèòÈáèÁöÑÂÄºÔºåÂú®ÊâßË°åÂºïÊìé‰ΩøÁî®Ê≠§ÂèòÈáèÂâçÔºåÈúÄË¶ÅÈáçÊñ∞‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠loadÊìç‰ΩúÊàñassignÊìç‰ΩúÂàùÂßãÂåñÂèòÈáèÂÄº</strong>‚Äù Êù•‰øùËØÅÁöÑÔºõ</li>
<li>ÊúâÂ∫èÊÄßÔºöÊúâÊïàËß£ÂÜ≥ÈáçÊéíÂ∫èÈóÆÈ¢òÔºåÂç≥ ‚Äú‰∏Ä‰∏™unlockÊìç‰ΩúÂÖàË°åÂèëÁîü(happen-before)‰∫éÂêéÈù¢ÂØπÂêå‰∏Ä‰∏™ÈîÅÁöÑlockÊìç‰Ωú‚ÄùÔºõ</li>
</ol>
<p>‰ªéËØ≠Ê≥ï‰∏äËÆ≤ÔºåSynchronizedÂèØ‰ª•Êää‰ªª‰Ωï‰∏Ä‰∏™ÈùûnullÂØπË±°‰Ωú‰∏∫‚ÄùÈîÅ‚ÄùÔºåÂú®HotSpot JVMÂÆûÁé∞‰∏≠ÔºåÈîÅÊúâ‰∏™‰∏ìÈó®ÁöÑÂêçÂ≠óÔºö<strong>ÂØπË±°ÁõëËßÜÂô®ÔºàObject MonitorÔºâ</strong>„ÄÇJava‰∏≠ÊØè‰∏™ÂØπË±°ÈÉΩ‰∏é‰∏Ä‰∏™ÁõëËßÜÂô®Áõ∏ÂÖ≥ËÅîÔºå‰∏ÄÊ¨°Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•ÂØπÁõëËßÜÂô®ËøõË°åÂä†ÈîÅÊàñËß£ÈîÅÔºåËØïÂõæÈîÅÂÆöËØ•ÁõëËßÜÂô®ÁöÑÂÖ∂ÂÆÉÁ∫øÁ®ãÈÉΩ‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Âà∞ÂÆÉ‰ª¨ÂèØ‰ª•Ëé∑ÂæóËØ•ÁõëËßÜÂô®‰∏äÁöÑÈîÅÂÆö‰∏∫Ê≠¢„ÄÇ‰ªÄ‰πàÊòØÂØπË±°ÁõëËßÜÂô®Ôºü</p>
<h2 id="ÁõëËßÜÂô®ÔºàMonitorÔºâ"><a href="#ÁõëËßÜÂô®ÔºàMonitorÔºâ" class="headerlink" title="ÁõëËßÜÂô®ÔºàMonitorÔºâ"></a>ÁõëËßÜÂô®ÔºàMonitorÔºâ</h2><p>Â§ßÂ≠¶Êúâ‰∏ÄÈó®ËØæÂè´Êìç‰ΩúÁ≥ªÁªüÔºåÂ≠¶ËøáÁöÑÂêåÂ≠¶Â∫îËØ•ÈÉΩËÆ∞ÂæóÔºåÁõëËßÜÂô®ÔºàMonitorÔºâÊòØÊìç‰ΩúÁ≥ªÁªüÂÆûÁé∞ÂêåÊ≠•ÁöÑÈáçË¶ÅÂü∫Á°ÄÊ¶ÇÂøµ„ÄÇÁõëËßÜÂô®ÂèØ‰ª•ÁúãÂÅöÊòØ‰∏Ä‰∏™Âè™Êúâ‰∏Ä‰∏™ÊúçÂä°Âè∞ÁöÑÈì∂Ë°åÈó®Â∫óÔºå‰∏ÄÊ¨°Âè™ËÉΩÊúçÂä°‰∏Ä‰∏™Ê∂àË¥πËÄÖ„ÄÇÂΩìÊúâ‰∫∫Ê≠£Âú®ÊúçÂä°Âè∞Êó∂ÔºåÂÖ∂‰ªñ‰∫∫ÂøÖÈ°ªÂú®Â§ßÂéÖÁ≠âÂæÖ„ÄÇÊúçÂä°Âè∞Á©∫Èó≤Êó∂Ôºå‰øùÂÆâ‰ºö‰ªéÂ§ßÂéÖÈÄâÊã©‰∏ã‰∏Ä‰∏™Ê∂àË¥πËÄÖÂéªÊúçÂä°Âè∞ÔºåÂ¶ÇÊûúË¢´ÈÄâ‰∏≠ÁöÑÊ∂àË¥πËÄÖÊ≠£Âú®Èó®Âè£Êé•ÁîµËØùÔºåÈÇ£‰πà‰øùÂÆâ‰ºöÂú®‰ªñÊâìÂÆåÁîµËØù‰πãÂêéË¢´ÈáçÊñ∞ÈÄâÊã©ÂéªÊúçÂä°Âè∞ÂäûÁêÜ‰∏öÂä°„ÄÇ</p>
<p>Âú®Ëøô‰∏™Âú∫ÊôØ‰∏≠ÔºåÊúçÂä°Âè∞ÁúãÂÅöÊòØÊï∞ÊçÆÂíå‰ª£Á†ÅÔºå‰øùÂÆâÁúãÂÅöÊòØÁõëËßÜÂô®„ÄÇÁõëËßÜÂô®ÁõëËßÜÁ∫øÁ®ãËÆøÈóÆÊï∞ÊçÆÔºåÁ°Æ‰øùÂêå‰∏ÄÊó∂Èó¥Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩÂ§üËÆøÈóÆÊï∞ÊçÆÂíå‰ª£Á†Å„ÄÇ</p>
<p>Âú®JavaÁöÑËÆæËÆ°‰∏≠Ôºå<strong>ÊØè‰∏Ä‰∏™JavaÂØπË±°Ëá™ÊâìÂ®òËÉéÈáåÂá∫Êù•Â∞±Â∏¶‰∫Ü‰∏ÄÊääÁúã‰∏çËßÅÁöÑÈîÅÔºåÂÆÉÂè´ÂÅöÁõëËßÜÂô®ÈîÅÔºàmonitorÔºâ</strong>„ÄÇÂØπË±°ÁõëËßÜÂô®ÂÆûÈôÖ‰∏äÂ∞±ÊòØ‰∏éÊØè‰∏™ÂØπË±°ÂÖ≥ËÅîÁöÑMonitorÂØπË±°ÔºåÂØπË±°Âú®ÂÜÖÂ≠ò‰∏≠Áî±ÂØπË±°Â§¥„ÄÅÂÆû‰æãÊï∞ÊçÆ„ÄÅÂØπÈΩêÂ°´ÂÖÖ‰∏âÂùóÂå∫ÂüüÁªÑÊàêÔºåÂØπË±°Â§¥ÂåÖÂê´Mark Word„ÄÅKlass point„ÄÅMonitor„ÄÇ</p>
<ul>
<li>Mark WorldÔºöÂ≠òÂÇ®ÂØπË±°ÁöÑHashCode„ÄÅÂàÜ‰ª£Âπ¥ÈæÑ„ÄÅÈîÅÁöÑÊ†áÂøó‰Ωç‰ø°ÊÅØ„ÄÇ</li>
<li>Klass pointÔºöÂØπË±°ÊåáÂêëÂÆÉÁöÑÁ±ªÂÖÉÊï∞ÊçÆÁöÑÊåáÈíàÔºåËôöÊãüÊú∫ÈÄöËøáËøô‰∏™ÊåáÈíàÊù•Á°ÆÂÆöÊ≠§ÂØπË±°ÊòØÂì™‰∏™Á±ªÁöÑÂÆû‰æã„ÄÇ</li>
<li>MonitorÔºöMonitor‰∏≠ÊúâOwnerÂíåËÆ°Êï∞Âô®ÔºåOwnerÊåáÂêëÊåÅÊúâ Monitor ÁöÑÁ∫øÁ®ãÔºåËÆ°Êï∞Âô®‰ªé 0 ÂºÄÂßãËÆ∞ÂΩïËøõÂÖ•Êï∞ÔºõÂè¶Â§ñËøòÊúâ EntryList„ÄÅWaitSet ‰∏§‰∏™ÈòüÂàóÔºåÁî®Êù•Â≠òÊîæËøõÂÖ•ÂèäÁ≠âÂæÖËé∑ÂèñÈîÅÁöÑÁ∫øÁ®ã„ÄÇ</li>
</ul>
<p>synchronized Áõ∏ÂÖ≥ÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§ÔºöACC_SYNCHRONIZED ‰øÆÈ•∞ÊñπÊ≥ï„ÄÅmonitorenter+monitorexit ‰øÆÈ•∞‰ª£Á†ÅÂùó„ÄÇ</p>
<p><img src="/p/8360cd4/image-20201105143058691.png" alt="image-20201105143058691"></p>
<p>ËøõÂÖ• synchronized ÂêåÊ≠•ÂùóÊó∂ÔºåÊâßË°å monitorenter Êåá‰ª§ÔºåÂ∞ùËØïËé∑ÂèñÂΩìÂâçÂØπË±° Monitor ÁöÑÈîÅ„ÄÇÂØπË±°ÁõëËßÜÂô®ÊòØÂØπË±°ÈîÅÔºåÈîÅÁöÑÊòØÂØπË±°ËÄåÈùûÂºïÁî®ÂèòÈáèÔºå‰ΩúÁî®Á≤íÂ∫¶ÊòØÂØπË±° ÔºåÂèØ‰ª•Áî®Êù•ÂÆûÁé∞ÂØπ‰∏¥ÁïåËµÑÊ∫êÁöÑÂêåÊ≠•‰∫íÊñ•ÔºàMutexÔºâËÆøÈóÆ„ÄÇ</p>
<p>Âú®JavaËôöÊãüÊú∫ÔºàHotSpotÔºâ‰∏≠ÔºåMonitorÊòØÁî±ObjectMonitorÂÆûÁé∞ÁöÑÔºåÂÖ∂‰∏ªË¶ÅÊï∞ÊçÆÁªìÊûÑÂ¶Ç‰∏ãÔºà‰Ωç‰∫éHotSpotËôöÊãüÊú∫Ê∫êÁ†ÅObjectMonitor.hppÊñá‰ª∂ÔºåC++ÂÆûÁé∞ÁöÑÔºâÔºö</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">ObjectMonitor</span>() {</span><br><span class="line">    _header       = <span class="literal">NULL</span>;</span><br><span class="line">    _count        = <span class="number">0</span>; <span class="comment">// ËÆ∞ÂΩï‰∏™Êï∞</span></span><br><span class="line">    _waiters      = <span class="number">0</span>,</span><br><span class="line">    _recursions   = <span class="number">0</span>;</span><br><span class="line">    _object       = <span class="literal">NULL</span>;</span><br><span class="line">    _owner        = <span class="literal">NULL</span>;</span><br><span class="line">    _WaitSet      = <span class="literal">NULL</span>; <span class="comment">// Â§Ñ‰∫éwaitÁä∂ÊÄÅÁöÑÁ∫øÁ®ãÔºå‰ºöË¢´Âä†ÂÖ•Âà∞_WaitSet</span></span><br><span class="line">    _WaitSetLock  = <span class="number">0</span> ;</span><br><span class="line">    _Responsible  = <span class="literal">NULL</span> ;</span><br><span class="line">    _succ         = <span class="literal">NULL</span> ;</span><br><span class="line">    _cxq          = <span class="literal">NULL</span> ;</span><br><span class="line">    FreeNext      = <span class="literal">NULL</span> ;</span><br><span class="line">    _EntryList    = <span class="literal">NULL</span> ; <span class="comment">// Â§Ñ‰∫éÁ≠âÂæÖÈîÅblockÁä∂ÊÄÅÁöÑÁ∫øÁ®ãÔºå‰ºöË¢´Âä†ÂÖ•Âà∞ËØ•ÂàóË°®</span></span><br><span class="line">    _SpinFreq     = <span class="number">0</span> ;</span><br><span class="line">    _SpinClock    = <span class="number">0</span> ;</span><br><span class="line">    OwnerIsThread = <span class="number">0</span> ;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ObjectMonitor‰∏≠Êúâ‰∏§‰∏™ÈòüÂàóÔºå_WaitSet Âíå _EntryListÔºåÁî®Êù•‰øùÂ≠òObjectWaiterÂØπË±°ÂàóË°®Ôºà ÊØè‰∏™Á≠âÂæÖÈîÅÁöÑÁ∫øÁ®ãÈÉΩ‰ºöË¢´Â∞ÅË£ÖÊàêObjectWaiterÂØπË±° ÔºâÔºå_ownerÊåáÂêëÊåÅÊúâObjectMonitorÂØπË±°ÁöÑÁ∫øÁ®ãÔºåÂΩìÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ËÆøÈóÆ‰∏ÄÊÆµÂêåÊ≠•‰ª£Á†ÅÊó∂Ôºö</p>
<blockquote>
<ol>
<li>ÂÖà‰ºöËøõÂÖ• _EntryList ÈõÜÂêàÔºåÂΩìÁ∫øÁ®ãËé∑ÂèñÂà∞ÂØπË±°ÁöÑmonitorÂêéÔºåËøõÂÖ• _OwnerÂå∫ÂüüÂπ∂Êäämonitor‰∏≠ÁöÑownerÂèòÈáèËÆæÁΩÆ‰∏∫ÂΩìÂâçÁ∫øÁ®ãÔºåÂêåÊó∂monitor‰∏≠ÁöÑËÆ°Êï∞Âô®countÂä†1Ôºõ</li>
<li>Ëã•Á∫øÁ®ãË∞ÉÁî® wait() ÊñπÊ≥ïÔºåÂ∞ÜÈáäÊîæÂΩìÂâçÊåÅÊúâÁöÑmonitorÔºåownerÂèòÈáèÊÅ¢Â§ç‰∏∫nullÔºåcountËá™Âáè1ÔºåÂêåÊó∂ËØ•Á∫øÁ®ãËøõÂÖ• WaitSetÈõÜÂêà‰∏≠Á≠âÂæÖË¢´Âî§ÈÜíÔºõ</li>
<li>Ëã•ÂΩìÂâçÁ∫øÁ®ãÊâßË°åÂÆåÊØïÔºå‰πüÂ∞ÜÈáäÊîæmonitorÔºàÈîÅÔºâÂπ∂Â§ç‰ΩçcountÁöÑÂÄºÔºå‰ª•‰æøÂÖ∂‰ªñÁ∫øÁ®ãËøõÂÖ•Ëé∑Âèñmonitor(ÈîÅ)Ôºõ</li>
</ol>
</blockquote>
<p>ÂêåÊó∂<strong>ÔºåMonitorÂØπË±°Â≠òÂú®‰∫éÊØè‰∏™JavaÂØπË±°ÁöÑÂØπË±°Â§¥Mark Word‰∏≠ÔºàÂ≠òÂÇ®ÁöÑÊåáÈíàÁöÑÊåáÂêëÔºâÔºåSynchronizedÈîÅ‰æøÊòØÈÄöËøáËøôÁßçÊñπÂºèËé∑ÂèñÈîÅÁöÑÔºå‰πüÊòØ‰∏∫‰ªÄ‰πàJava‰∏≠‰ªªÊÑèÂØπË±°ÂèØ‰ª•‰Ωú‰∏∫ÈîÅÁöÑÂéüÂõ†ÔºåÂêåÊó∂notify/notifyAll/waitÁ≠âÊñπÊ≥ï‰ºö‰ΩøÁî®Âà∞MonitorÈîÅÂØπË±°ÔºåÊâÄ‰ª•ÂøÖÈ°ªÂú®ÂêåÊ≠•‰ª£Á†ÅÂùó‰∏≠‰ΩøÁî®„ÄÇ</strong></p>
<p>ÁõëËßÜÂô®MonitorÊúâ‰∏§ÁßçÂêåÊ≠•ÊñπÂºèÔºö‰∫íÊñ•‰∏éÂçè‰Ωú„ÄÇÂ§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÁ∫øÁ®ã‰πãÈó¥Â¶ÇÊûúÈúÄË¶ÅÂÖ±‰∫´Êï∞ÊçÆÔºåÈúÄË¶ÅËß£ÂÜ≥‰∫íÊñ•ËÆøÈóÆÊï∞ÊçÆÁöÑÈóÆÈ¢òÔºåÁõëËßÜÂô®ÂèØ‰ª•Á°Æ‰øùÁõëËßÜÂô®‰∏äÁöÑÊï∞ÊçÆÂú®Âêå‰∏ÄÊó∂ÂàªÂè™‰ºöÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂú®ËÆøÈóÆ„ÄÇ</p>
<p>‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶ÅÂçè‰ΩúÔºü ÊØîÂ¶ÇÔºö</p>
<blockquote>
<p>‰∏Ä‰∏™Á∫øÁ®ãÂêëÁºìÂÜ≤Âå∫ÂÜôÊï∞ÊçÆÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ã‰ªéÁºìÂÜ≤Âå∫ËØªÊï∞ÊçÆÔºåÂ¶ÇÊûúËØªÁ∫øÁ®ãÂèëÁé∞ÁºìÂÜ≤Âå∫‰∏∫Á©∫Â∞±‰ºöÁ≠âÂæÖÔºåÂΩìÂÜôÁ∫øÁ®ãÂêëÁºìÂÜ≤Âå∫ÂÜôÂÖ•Êï∞ÊçÆÔºåÂ∞±‰ºöÂî§ÈÜíËØªÁ∫øÁ®ãÔºåËøôÈáåËØªÁ∫øÁ®ãÂíåÂÜôÁ∫øÁ®ãÂ∞±ÊòØ‰∏Ä‰∏™Âêà‰ΩúÂÖ≥Á≥ª„ÄÇJVMÈÄöËøáObjectÁ±ªÁöÑwaitÊñπÊ≥ïÊù•‰ΩøËá™Â∑±Á≠âÂæÖÔºåÂú®Ë∞ÉÁî®waitÊñπÊ≥ïÂêéÔºåËØ•Á∫øÁ®ã‰ºöÈáäÊîæÂÆÉÊåÅÊúâÁöÑÁõëËßÜÂô®ÔºåÁõ¥Âà∞ÂÖ∂‰ªñÁ∫øÁ®ãÈÄöÁü•ÂÆÉÊâçÊúâÊâßË°åÁöÑÊú∫‰ºö„ÄÇ‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®notifyÊñπÊ≥ïÈÄöÁü•Âú®Á≠âÂæÖÁöÑÁ∫øÁ®ãÔºåËøô‰∏™Á≠âÂæÖÁöÑÁ∫øÁ®ãÂπ∂‰∏ç‰ºöÈ©¨‰∏äÊâßË°åÔºåËÄåÊòØË¶ÅÈÄöÁü•Á∫øÁ®ãÈáäÊîæÁõëËßÜÂô®ÂêéÔºåÂÆÉÈáçÊñ∞Ëé∑ÂèñÁõëËßÜÂô®ÊâçÊúâÊâßË°åÁöÑÊú∫‰ºö„ÄÇÂ¶ÇÊûúÂàöÂ•ΩÂî§ÈÜíÁöÑËøô‰∏™Á∫øÁ®ãÈúÄË¶ÅÁöÑÁõëËßÜÂô®Ë¢´ÂÖ∂‰ªñÁ∫øÁ®ãÊä¢Âç†ÔºåÈÇ£‰πàËøô‰∏™Á∫øÁ®ã‰ºöÁªßÁª≠Á≠âÂæÖ„ÄÇObjectÁ±ª‰∏≠ÁöÑnotifyAllÊñπÊ≥ïÂèØ‰ª•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÂÆÉÂèØ‰ª•Âî§ÈÜíÊâÄÊúâÁ≠âÂæÖÁöÑÁ∫øÁ®ãÔºåÊÄªÊúâ‰∏Ä‰∏™Á∫øÁ®ãÊâßË°å„ÄÇ</p>
</blockquote>
<p><img src="/p/8360cd4/2062729-d1cc81ebcf0e912b.png" alt="img"></p>
<p>Â¶Ç‰∏äÂõæÊâÄÁ§∫Ôºå‰∏Ä‰∏™Á∫øÁ®ãÈÄöËøá1Âè∑Èó®ËøõÂÖ•Entry Set(ÂÖ•Âè£Âå∫)ÔºåÂ¶ÇÊûúÂú®ÂÖ•Âè£Âå∫Ê≤°ÊúâÁ∫øÁ®ãÁ≠âÂæÖÔºåÈÇ£‰πàËøô‰∏™Á∫øÁ®ãÂ∞±‰ºöËé∑ÂèñÁõëËßÜÂô®Êàê‰∏∫ÁõëËßÜÂô®ÁöÑOwnerÔºåÁÑ∂ÂêéÊâßË°åÁõëËßÜÂå∫ÂüüÁöÑ‰ª£Á†Å„ÄÇÂ¶ÇÊûúÂú®ÂÖ•Âè£Âå∫‰∏≠ÊúâÂÖ∂ÂÆÉÁ∫øÁ®ãÂú®Á≠âÂæÖÔºåÈÇ£‰πàÊñ∞Êù•ÁöÑÁ∫øÁ®ã‰πü‰ºöÂíåËøô‰∫õÁ∫øÁ®ã‰∏ÄËµ∑Á≠âÂæÖ„ÄÇÁ∫øÁ®ãÂú®ÊåÅÊúâÁõëËßÜÂô®ÁöÑËøáÁ®ã‰∏≠ÔºåÊúâ‰∏§‰∏™ÈÄâÊã©Ôºå‰∏Ä‰∏™ÊòØÊ≠£Â∏∏ÊâßË°åÁõëËßÜÂô®Âå∫ÂüüÁöÑ‰ª£Á†ÅÔºåÈáäÊîæÁõëËßÜÂô®ÔºåÈÄöËøá5Âè∑Èó®ÈÄÄÂá∫ÁõëËßÜÂô®ÔºõËøòÊúâÂèØËÉΩÁ≠âÂæÖÊüê‰∏™Êù°‰ª∂ÁöÑÂá∫Áé∞Ôºå‰∫éÊòØÂÆÉ‰ºöÈÄöËøá3Âè∑Èó®Âà∞Wait SetÔºàÁ≠âÂæÖÂå∫Ôºâ‰ºëÊÅØÔºåÁõ¥Âà∞Áõ∏Â∫îÁöÑÊù°‰ª∂Êª°Ë∂≥ÂêéÂÜçÈÄöËøá4Âè∑Èó®ËøõÂÖ•ÈáçÊñ∞Ëé∑ÂèñÁõëËßÜÂô®ÂÜçÊâßË°å„ÄÇ</p>
<p>Ê≥®ÊÑèÔºö</p>
<blockquote>
<p>ÂΩì‰∏Ä‰∏™Á∫øÁ®ãÈáäÊîæÁõëËßÜÂô®Êó∂ÔºåÂú®ÂÖ•Âè£Âå∫ÂíåÁ≠âÂæÖÂå∫ÁöÑÁ≠âÂæÖÁ∫øÁ®ãÈÉΩ‰ºöÂéªÁ´û‰∫âÁõëËßÜÂô®ÔºåÂ¶ÇÊûúÂÖ•Âè£Âå∫ÁöÑÁ∫øÁ®ãËµ¢‰∫ÜÔºå‰ºö‰ªé2Âè∑Èó®ËøõÂÖ•ÔºõÂ¶ÇÊûúÁ≠âÂæÖÂå∫ÁöÑÁ∫øÁ®ãËµ¢‰∫Ü‰ºö‰ªé4Âè∑Èó®ËøõÂÖ•„ÄÇÂè™ÊúâÈÄöËøá3Âè∑Èó®ÊâçËÉΩËøõÂÖ•Á≠âÂæÖÂå∫ÔºåÂú®Á≠âÂæÖÂå∫‰∏≠ÁöÑÁ∫øÁ®ãÂè™ÊúâÈÄöËøá4Âè∑Èó®ÊâçËÉΩÈÄÄÂá∫Á≠âÂæÖÂå∫Ôºå‰πüÂ∞±ÊòØËØ¥‰∏Ä‰∏™Á∫øÁ®ãÂè™ÊúâÂú®ÊåÅÊúâÁõëËßÜÂô®Êó∂ÊâçËÉΩÊâßË°åwaitÊìç‰ΩúÔºåÂ§Ñ‰∫éÁ≠âÂæÖÁöÑÁ∫øÁ®ãÂè™ÊúâÂÜçÊ¨°Ëé∑ÂæóÁõëËßÜÂô®ÊâçËÉΩÈÄÄÂá∫Á≠âÂæÖÁä∂ÊÄÅ„ÄÇ</p>
</blockquote>
<h2 id="synchronizedÁöÑÂü∫Êú¨‰ΩøÁî®"><a href="#synchronizedÁöÑÂü∫Êú¨‰ΩøÁî®" class="headerlink" title="synchronizedÁöÑÂü∫Êú¨‰ΩøÁî®"></a>synchronizedÁöÑÂü∫Êú¨‰ΩøÁî®</h2><p>ÊÄªÂÖ±Â∞±‰∏âÁßçÁî®Ê≥ïÔºö‰øÆÈ•∞‰ª£Á†ÅÂùó„ÄÅ‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ï„ÄÅ‰øÆÈ•∞ÈùôÊÄÅÊñπÊ≥ï„ÄÇ</p>
<ol>
<li>‰øÆÈ•∞‰ª£Á†ÅÂùóÊó∂ÔºåÁõëËßÜÂô®ÈîÅÊòØÊã¨Âè∑‰∏≠ÁöÑÈÇ£‰∏™ÂØπË±°„ÄÇ</li>
<li>‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ïÊó∂ÔºåÁõëËßÜÂô®ÈîÅÊòØÂØπË±°ÂÆû‰æãÔºàthisÔºâ</li>
<li>‰øÆÈ•∞ÈùôÊÄÅÊñπÊ≥ïÊó∂ÔºåÁõëËßÜÂô®ÈîÅÊòØÂØπË±°ÁöÑClassÂÆû‰æãÔºåÂõ†‰∏∫ClassÊï∞ÊçÆÂ≠òÂú®‰∫éÊ∞∏‰πÖ‰ª£ÔºåÂõ†Ê≠§ÈùôÊÄÅÊñπÊ≥ïÈîÅÁõ∏ÂΩì‰∫éËØ•Á±ªÁöÑ‰∏Ä‰∏™ÂÖ®Â±ÄÈîÅÔºõ</li>
</ol>
<h2 id="ÂêåÊ≠•ÂéüÁêÜ"><a href="#ÂêåÊ≠•ÂéüÁêÜ" class="headerlink" title="ÂêåÊ≠•ÂéüÁêÜ"></a>ÂêåÊ≠•ÂéüÁêÜ</h2><p>synchronizedÂú®ËΩØ‰ª∂Â±ÇÈù¢‰æùËµñJVMÔºåËÄå j.u.c.Lock Âú®Á°¨‰ª∂Â±ÇÈù¢‰æùËµñÁâπÊÆäÁöÑCPUÊåá‰ª§„ÄÇ</p>
<h2 id="‰øÆÈ•∞‰ª£Á†ÅÂùóÁöÑÂéüÁêÜ"><a href="#‰øÆÈ•∞‰ª£Á†ÅÂùóÁöÑÂéüÁêÜ" class="headerlink" title="‰øÆÈ•∞‰ª£Á†ÅÂùóÁöÑÂéüÁêÜ"></a>‰øÆÈ•∞‰ª£Á†ÅÂùóÁöÑÂéüÁêÜ</h2><p>ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆÂêåÊ≠•‰ª£Á†ÅÂùóÊó∂ÔºåÈ¶ñÂÖàÊòØÈúÄË¶ÅÂæóÂà∞ÈîÅÊâçËÉΩÊâßË°åÂêåÊ≠•‰ª£Á†ÅÔºåÂΩìÈÄÄÂá∫ÊàñËÄÖÊäõÂá∫ÂºÇÂ∏∏Êó∂ÂøÖÈ°ªË¶ÅÈáäÊîæÈîÅÔºåÈÇ£‰πàÂÆÉÊòØÂ¶Ç‰ΩïÊù•ÂÆûÁé∞Ëøô‰∏™Êú∫Âà∂ÁöÑÂë¢ÔºüÊàë‰ª¨ÂÖàÁúã‰∏ÄÊÆµÁÆÄÂçïÁöÑ‰ª£Á†ÅÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SynchronizedDemo</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="built_in">this</span>) {</span><br><span class="line">            System.out.println(<span class="string">"Method 1 start"</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âà©Áî®jclasslibÊèí‰ª∂Êü•ÁúãÁºñËØëÂêéÁöÑÂ≠óËäÇÁ†Å</p>
<p><img src="/p/8360cd4/image-20220312160414720.png" alt="image-20220312160414720"></p>
<h4 id="monitorenter"><a href="#monitorenter" class="headerlink" title="monitorenter"></a>monitorenter</h4><p>ÊØè‰∏™ÂØπË±°ÈÉΩÊòØ‰∏Ä‰∏™ÁõëËßÜÂô®ÈîÅÔºàmonitorÔºâ„ÄÇÂΩìmonitorË¢´Âç†Áî®Êó∂Â∞±‰ºöÂ§Ñ‰∫éÈîÅÂÆöÁä∂ÊÄÅÔºåÁ∫øÁ®ãÊâßË°åmonitorenterÊåá‰ª§Êó∂Â∞ùËØïËé∑ÂèñmonitorÁöÑÊâÄÊúâÊùÉÔºåËøáÁ®ãÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>Â¶ÇÊûúmonitorÁöÑËøõÂÖ•Êï∞‰∏∫0ÔºåÂàôËØ•Á∫øÁ®ãËøõÂÖ•monitorÔºåÁÑ∂ÂêéÂ∞ÜËøõÂÖ•Êï∞ËÆæÁΩÆ‰∏∫1ÔºåËØ•Á∫øÁ®ãÂç≥‰∏∫monitorÁöÑÊâÄÊúâËÄÖÔºõ</li>
<li>Â¶ÇÊûúÁ∫øÁ®ãÂ∑≤ÁªèÂç†ÊúâËØ•monitorÔºåÂè™ÊòØÂÜçÊ¨°ËøõÂÖ•ÔºåÂàôËøõÂÖ•monitorÁöÑËøõÂÖ•Êï∞ +1Ôºõ</li>
<li>Â¶ÇÊûúÂÖ∂‰ªñÁ∫øÁ®ãÂ∑≤ÁªèÂç†Áî®‰∫ÜmonitorÔºåÂàôËØ•Á∫øÁ®ãËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅÔºåÁõ¥Âà∞monitorÁöÑËøõÂÖ•Êï∞‰∏∫0ÔºåÂÜçÈáçÊñ∞Â∞ùËØïËé∑ÂèñmonitorÁöÑÊâÄÊúâÊùÉÔºõ</li>
</ul>
<h4 id="monitorexit"><a href="#monitorexit" class="headerlink" title="monitorexit"></a>monitorexit</h4><p>ÊâßË°åmonitorexitÁöÑÁ∫øÁ®ãÂøÖÈ°ªÊòØobjectrefÊâÄÂØπÂ∫îÁöÑmonitorÁöÑÊâÄÊúâËÄÖ„ÄÇÊåá‰ª§ÊâßË°åÊó∂ÔºåmonitorÁöÑËøõÂÖ•Êï∞Âáè1ÔºåÂ¶ÇÊûúÂáè1ÂêéËøõÂÖ•Êï∞‰∏∫0ÔºåÈÇ£Á∫øÁ®ãÈÄÄÂá∫monitorÔºå‰∏çÂÜçÊòØËøô‰∏™monitorÁöÑÊâÄÊúâËÄÖ„ÄÇÂÖ∂‰ªñË¢´Ëøô‰∏™monitorÈòªÂ°ûÁöÑÁ∫øÁ®ãÂèØ‰ª•Â∞ùËØïÂéªËé∑ÂèñËøô‰∏™ monitor ÁöÑÊâÄÊúâÊùÉ„ÄÇ</p>
<p>Ê≥®ÊÑèËßÇÂØüÂõæ‰∏äÂá∫Áé∞‰∫Ü‰∏§Ê¨°monitorexitÔºåÁ¨¨1Ê¨°ÊòØÂêåÊ≠•Ê≠£Â∏∏ÈÄÄÂá∫ÈáäÊîæÈîÅÔºåÁ¨¨2Ê¨°ÊòØÂèëÁîüÂºÇÊ≠•ÈÄÄÂá∫ÈáäÊîæÈîÅÔºõ</p>
<h3 id="‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ïÁöÑÂéüÁêÜ"><a href="#‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ïÁöÑÂéüÁêÜ" class="headerlink" title="‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ïÁöÑÂéüÁêÜ"></a>‰øÆÈ•∞ÂÆû‰æãÊñπÊ≥ïÁöÑÂéüÁêÜ</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> {</span><br><span class="line">    System.out.println(<span class="string">"javer"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÈÄöËøá<code>javap -v</code> ÂëΩ‰ª§Êü•ÁúãÂ≠óËäÇÁ†Å‰∏≠ÁöÑÈôÑÂä†‰ø°ÊÅØ„ÄÇ</p>
<p><img src="/p/8360cd4/image-20220312161514457.png" alt="image-20220312161514457"></p>
<p>ÊñπÊ≥ïÁöÑÂêåÊ≠•Âπ∂Ê≤°ÊúâÈÄöËøáÊåá‰ª§ <code>monitorenter</code> Âíå <code>monitorexit</code> Êù•ÂÆåÊàêÔºàÁêÜËÆ∫‰∏äÂÖ∂ÂÆû‰πüÂèØ‰ª•ÈÄöËøáËøô‰∏§Êù°Êåá‰ª§Êù•ÂÆûÁé∞ÔºâÔºå‰∏çËøáÁõ∏ÂØπ‰∫éÊôÆÈÄöÊñπÊ≥ïÔºåÂÖ∂Â∏∏ÈáèÊ±†‰∏≠Â§ö‰∫Ü <code>ACC_SYNCHRONIZED</code> Ê†áÁ§∫Á¨¶„ÄÇJVMÂ∞±ÊòØÊ†πÊçÆËØ•Ê†áÁ§∫Á¨¶Êù•ÂÆûÁé∞ÊñπÊ≥ïÁöÑÂêåÊ≠•ÁöÑÔºö</p>
<blockquote>
<p>ÂΩìÊñπÊ≥ïË∞ÉÁî®Êó∂ÔºåË∞ÉÁî®Êåá‰ª§Â∞Ü‰ºöÊ£ÄÊü•ÊñπÊ≥ïÁöÑ ACC_SYNCHRONIZED ËÆøÈóÆÊ†áÂøóÊòØÂê¶Ë¢´ËÆæÁΩÆÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∫ÜÔºåÊâßË°åÁ∫øÁ®ãÂ∞ÜÂÖàËé∑ÂèñmonitorÔºåËé∑ÂèñÊàêÂäü‰πãÂêéÊâçËÉΩÊâßË°åÊñπÊ≥ï‰ΩìÔºåÊñπÊ≥ïÊâßË°åÂÆåÂêéÂÜçÈáäÊîæmonitor„ÄÇ<strong>Âú®ÊñπÊ≥ïÊâßË°åÊúüÈó¥ÔºåÂÖ∂‰ªñ‰ªª‰ΩïÁ∫øÁ®ãÈÉΩÊó†Ê≥ïÂÜçËé∑ÂæóÂêå‰∏Ä‰∏™monitorÂØπË±°„ÄÇ</strong></p>
</blockquote>
<h3 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h3><p>‰∏§ÁßçÂêåÊ≠•ÊñπÂºèÊú¨Ë¥®‰∏äÊ≤°ÊúâÂå∫Âà´ÔºåÂè™ÊòØÊñπÊ≥ïÁöÑÂêåÊ≠•ÊòØ‰∏ÄÁßçÈöêÂºèÁöÑÊñπÂºèÊù•ÂÆûÁé∞ÔºåÊó†ÈúÄÈÄöËøáÂ≠óËäÇÁ†ÅÊù•ÂÆåÊàê„ÄÇ‰∏§‰∏™Êåá‰ª§ÁöÑÊâßË°åÊòØJVMÈÄöËøáË∞ÉÁî®Êìç‰ΩúÁ≥ªÁªüÁöÑ‰∫íÊñ•ÂéüËØ≠mutexÊù•ÂÆûÁé∞ÔºåË¢´ÈòªÂ°ûÁöÑÁ∫øÁ®ã‰ºöË¢´ÊåÇËµ∑„ÄÅÁ≠âÂæÖÈáçÊñ∞Ë∞ÉÂ∫¶Ôºå‰ºöÂØºËá¥‚ÄúÁî®Êà∑ÊÄÅÂíåÂÜÖÊ†∏ÊÄÅ‚Äù‰∏§‰∏™ÊÄÅ‰πãÈó¥Êù•ÂõûÂàáÊç¢ÔºåÂØπÊÄßËÉΩÊúâËæÉÂ§ßÂΩ±Âìç„ÄÇ</p>
<p>SynchronizedÁöÑËØ≠‰πâÂ∫ïÂ±ÇÊòØÈÄöËøá‰∏Ä‰∏™monitorÁöÑÂØπË±°Êù•ÂÆåÊàêÔºåÂÖ∂ÂÆûwait/notifyÁ≠âÊñπÊ≥ï‰πü‰æùËµñ‰∫émonitorÂØπË±°ÔºåËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàÂè™ÊúâÂú®ÂêåÊ≠•ÁöÑÂùóÊàñËÄÖÊñπÊ≥ï‰∏≠ÊâçËÉΩË∞ÉÁî®wait/notifyÁ≠âÊñπÊ≥ïÔºåÂê¶Âàô‰ºöÊäõÂá∫<code>java.lang.IllegalMonitorStateException</code>ÁöÑÂºÇÂ∏∏ÁöÑÂéüÂõ†„ÄÇ</p>
<p>Ê≥®ÊÑèÔºö</p>
<ul>
<li>Âú®Java ‰∏≠ÔºåÂè™ÊúâÂ∞ÜÂØπË±°‰Ωú‰∏∫ÈîÅËøôÁßçËØ¥Ê≥ïÔºåÊ≤°ÊúâÈîÅÊñπÊ≥ïËøôÁßçËØ¥Ê≥ï„ÄÇ</li>
<li>Âú®Java‰∏≠ÔºåÈîÅÂ∞±ÊòØÂØπË±°ÔºåÂØπË±°ÂèØ‰ª•Êò†Â∞ÑÊàêÈîÅÔºåÂì™‰∏™Á∫øÁ®ãÊãøÂà∞ËøôÊääÈîÅÔºåÂì™‰∏™Á∫øÁ®ãÂ∞±ÂèØ‰ª•ÊâßË°åËøô‰∏™ÂØπË±°‰∏≠ÁöÑ synchronized ÂêåÊ≠•ÊñπÊ≥ï„ÄÇ</li>
<li>Â¶ÇÊûúÂú®ÊüêÂØπË±°‰∏≠‰ΩøÁî®‰∫Ü synchronized ÂÖ≥ÈîÆÂ≠óÂ£∞ÊòéÈùûÈùôÊÄÅÊñπÊ≥ïÔºåÈÇ£‰πàËøô‰∏™ÂØπË±°Â∞±Ë¢´ÂΩìÊàêÈîÅ„ÄÇ</li>
</ul>
<blockquote>
<p>ËøôÈáåÂ≠òÂú®‰∏Ä‰∏™ËØØÂå∫Ôºösynchronized‰øÆÈ•∞ÊñπÊ≥ïÊó∂ÔºåÂ¶ÇÊûúËØ•ÊñπÊ≥ïÊ≤°ÊúâstaticÂÖ≥ÈîÆÂ≠ó‰∏çÊòØÈùôÊÄÅÊñπÊ≥ïÔºåÂàôÈîÅÁöÑÂè™ÊòØËøô‰∏™ÂØπË±°Ôºå‰πüÂ∞±ÊòØËØ¥Âú®Âè¶‰∏Ä‰∏™Á∫øÁ®ã‰∏≠Êñ∞ÂàõÂª∫‰∏Ä‰∏™Ëøô‰∏™Á±ªÁöÑÂØπË±°Ôºå‰∏§‰∏™Á∫øÁ®ãÊìç‰Ωú‰∏çÊòØÂêå‰∏ÄÊääÈîÅÊòØ‰∏ç‰ºö‰∫ßÁîüÁ´ûÊÄÅÊù°‰ª∂ÁöÑ„ÄÇÂ¶ÇÊûúËØ•ÊñπÊ≥ï‰∏ä‰ΩøÁî®‰∫ÜÈùôÊÄÅÂÖ≥ÈîÆÂ≠óÔºåÂàôÂΩìÂâçÈîÅÈîÅÁöÑÊòØËøô‰∏™ÂØπË±°ÁöÑÁ±ªÔºå‰ΩøÁî®ËØ•Á±ªÈáçÊñ∞ÂàõÂª∫ÂØπË±°Â§ö‰∏™Á∫øÁ®ãÁöÑÊìç‰ΩúËØ•ÂØπË±°ÈÉΩ‰ºö‰∫ßÁîüÈùôÊÄÅÊù°‰ª∂„ÄÇ</p>
</blockquote>
<h2 id="ÂêåÊ≠•Ê¶ÇÂøµ"><a href="#ÂêåÊ≠•Ê¶ÇÂøµ" class="headerlink" title="ÂêåÊ≠•Ê¶ÇÂøµ"></a>ÂêåÊ≠•Ê¶ÇÂøµ</h2><h3 id="JavaÂØπË±°ÁöÑÁªìÊûÑÁªÑÊàê"><a href="#JavaÂØπË±°ÁöÑÁªìÊûÑÁªÑÊàê" class="headerlink" title="JavaÂØπË±°ÁöÑÁªìÊûÑÁªÑÊàê"></a>JavaÂØπË±°ÁöÑÁªìÊûÑÁªÑÊàê</h3><p>Âú®JVM‰∏≠Ôºå<strong>ÂØπË±°Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂ∏ÉÂ±ÄÂàÜ‰∏∫‰∏âÂùóÂå∫ÂüüÔºöÂØπË±°Â§¥„ÄÅÂÆû‰æãÊï∞ÊçÆÂíåÂØπÈΩêÂ°´ÂÖÖ„ÄÇ</strong>Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="/p/8360cd4/2062729-9a78f7ea7671a031.png" alt="img"></p>
<ol>
<li>ÂÆû‰æãÊï∞ÊçÆÔºöÂ≠òÊîæÁ±ªÁöÑÂ±ûÊÄßÊï∞ÊçÆ‰ø°ÊÅØÔºåÂåÖÊã¨Áà∂Á±ªÁöÑÂ±ûÊÄß‰ø°ÊÅØÔºõ</li>
<li>ÂØπÈΩêÂ°´ÂÖÖÔºöÂ°´ÂÖÖÊï∞ÊçÆ‰∏çÊòØÂøÖÈ°ªÂ≠òÂú®ÁöÑÔºå‰ªÖ‰ªÖÊòØ‰∏∫‰∫ÜÂ≠óËäÇÂØπÈΩêÔºåÁî±‰∫éËôöÊãüÊú∫Ë¶ÅÊ±ÇÂØπË±°Ëµ∑ÂßãÂú∞ÂùÄÂøÖÈ°ªÊòØ8Â≠óËäÇÁöÑÊï¥Êï∞ÂÄç„ÄÇ</li>
<li>ÂØπË±°Â§¥Ôºö<strong>JavaÂØπË±°Â§¥‰∏ÄËà¨Âç†Êúâ2‰∏™Êú∫Âô®Á†ÅÔºàÂú®32‰ΩçËôöÊãüÊú∫‰∏≠Ôºå1‰∏™Êú∫Âô®Á†ÅÁ≠â‰∫é4Â≠óËäÇÔºå‰πüÂ∞±ÊòØ32bitÔºåÂú®64‰ΩçËôöÊãüÊú∫‰∏≠Ôºå1‰∏™Êú∫Âô®Á†ÅÊòØ8‰∏™Â≠óËäÇÔºå‰πüÂ∞±ÊòØ64bitÔºâÔºå‰ΩÜÊòØÂ¶ÇÊûúÂØπË±°ÊòØÊï∞ÁªÑÁ±ªÂûãÔºåÂàôÈúÄË¶Å3‰∏™Êú∫Âô®Á†ÅÔºåÂõ†‰∏∫JVMËôöÊãüÊú∫ÂèØ‰ª•ÈÄöËøáJavaÂØπË±°ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÁ°ÆÂÆöJavaÂØπË±°ÁöÑÂ§ßÂ∞èÔºå‰ΩÜÊòØÊó†Ê≥ï‰ªéÊï∞ÁªÑÁöÑÂÖÉÊï∞ÊçÆÊù•Á°ÆËÆ§Êï∞ÁªÑÁöÑÂ§ßÂ∞èÔºåÊâÄ‰ª•Áî®‰∏ÄÂùóÊù•ËÆ∞ÂΩïÊï∞ÁªÑÈïøÂ∫¶„ÄÇ</strong></li>
</ol>
<h3 id="JavaÂØπË±°Â§¥ÁöÑÁªìÊûÑÁªÑÊàê"><a href="#JavaÂØπË±°Â§¥ÁöÑÁªìÊûÑÁªÑÊàê" class="headerlink" title="JavaÂØπË±°Â§¥ÁöÑÁªìÊûÑÁªÑÊàê"></a>JavaÂØπË±°Â§¥ÁöÑÁªìÊûÑÁªÑÊàê</h3><p><a href="https://openjdk.java.net/groups/hotspot/docs/HotSpotGlossary.html">ÂéüÊñáÈìæÊé•</a></p>
<p>Mark WorldÔºöÂ≠òÂÇ®ÂØπË±°ÁöÑhashCode„ÄÅÈîÅ‰ø°ÊÅØ„ÄÅGCÂàÜ‰ª£Âπ¥ÈæÑ„ÄÅÈîÅÁä∂ÊÄÅÊ†áÂøó„ÄÅÁ∫øÁ®ãÊåÅÊúâÁöÑÈîÅ„ÄÅÂÅèÂêëÁ∫øÁ®ã ID„ÄÅÂÅèÂêëÊó∂Èó¥Êà≥Á≠â„ÄÇ</p>
<p>Class Metadata AddressÔºöÂ≠òÂÇ®Âà∞ÂØπË±°Á±ªÂûãÊï∞ÊçÆÁöÑÊåáÈíà„ÄÇ</p>
<p>Array LengthÔºöÊï∞ÁªÑÁöÑÈïøÂ∫¶ÔºàÂ¶ÇÊûúÂΩìÂâçÂØπË±°ÊòØÊï∞ÁªÑÔºâ„ÄÇ</p>
<p>‰∏ãÂõæÊòØJavaÂØπË±°Â§¥ Êó†ÈîÅÁä∂ÊÄÅ‰∏ãMark WordÈÉ®ÂàÜÁöÑÂ≠òÂÇ®ÁªìÊûÑÔºà32‰ΩçËôöÊãüÊú∫ÔºâÔºö</p>
<p><img src="/p/8360cd4/2062729-063a9a5dc677cd12.png" alt="img"></p>
<p>ÂØπË±°Â§¥‰ø°ÊÅØÊòØ‰∏éÂØπË±°Ëá™Ë∫´ÂÆö‰πâÁöÑÊï∞ÊçÆÊó†ÂÖ≥ÁöÑÈ¢ùÂ§ñÂ≠òÂÇ®ÊàêÊú¨Ôºå‰ΩÜÊòØËÄÉËôëÂà∞ËôöÊãüÊú∫ÁöÑÁ©∫Èó¥ÊïàÁéáÔºåMark Word Ë¢´ËÆæËÆ°Êàê‰∏Ä‰∏™ÈùûÂõ∫ÂÆöÁöÑÊï∞ÊçÆÁªìÊûÑ‰ª•‰æøÂú®ÊûÅÂ∞èÁöÑÁ©∫Èó¥ÂÜÖÂ≠òÂ≠òÂÇ®Â∞ΩÈáèÂ§öÁöÑÊï∞ÊçÆÔºåÂÆÉ‰ºöÊ†πÊçÆÂØπË±°ÁöÑÁä∂ÊÄÅÂ§çÁî®Ëá™Â∑±ÁöÑÂ≠òÂÇ®Á©∫Èó¥Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåMark Word‰ºöÈöèÁùÄÁ®ãÂ∫èÁöÑËøêË°åÂèëÁîüÂèòÂåñÔºåÂèØËÉΩÂèòÂåñ‰∏∫Â≠òÂÇ®‰ª•‰∏ã4ÁßçÊï∞ÊçÆÔºö</p>
<p><img src="/p/8360cd4/2062729-c63ff6c2d337ad5f.png" alt="img"></p>
<p>Mark WordÂèØËÉΩÂ≠òÂÇ®4ÁßçÊï∞ÊçÆ„ÄÇÂú®64‰ΩçËôöÊãüÊú∫‰∏ãÔºåMark WordÊòØ64bitÂ§ßÂ∞èÁöÑÔºåÂÖ∂Â≠òÂÇ®ÁªìÊûÑÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/8360cd4/2062729-5f6d3993ba018942.png" alt="img"></p>
<p>64‰ΩçMark WordÂ≠òÂÇ®ÁªìÊûÑ„ÄÇÂØπË±°Â§¥ÁöÑÊúÄÂêé‰∏§‰ΩçÂ≠òÂÇ®‰∫ÜÈîÅÁöÑÊ†áÂøó‰ΩçÔºå01ÊòØÂàùÂßãÁä∂ÊÄÅÔºåÊú™Âä†ÈîÅÔºåÂÖ∂ÂØπË±°Â§¥ÈáåÂ≠òÂÇ®ÁöÑÊòØÂØπË±°Êú¨Ë∫´ÁöÑÂìàÂ∏åÁ†ÅÔºåÈöèÁùÄÈîÅÁ∫ßÂà´ÁöÑ‰∏çÂêåÔºåÂØπË±°Â§¥Èáå‰ºöÂ≠òÂÇ®‰∏çÂêåÁöÑÂÜÖÂÆπ„ÄÇÂÅèÂêëÈîÅÂ≠òÂÇ®ÁöÑÊòØÂΩìÂâçÂç†Áî®Ê≠§ÂØπË±°ÁöÑÁ∫øÁ®ãIDÔºõËÄåËΩªÈáèÁ∫ßÂàôÂ≠òÂÇ®ÊåáÂêëÁ∫øÁ®ãÊ†à‰∏≠ÈîÅËÆ∞ÂΩïÁöÑÊåáÈíà„ÄÇ‰ªéËøôÈáåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Ôºå‚ÄúÈîÅ‚ÄùËøô‰∏™‰∏úË•øÔºåÂèØËÉΩÊòØ‰∏™ÈîÅËÆ∞ÂΩï+ÂØπË±°Â§¥ÈáåÁöÑÂºïÁî®ÊåáÈíàÔºàÂà§Êñ≠Á∫øÁ®ãÊòØÂê¶Êã•ÊúâÈîÅÊó∂Â∞ÜÁ∫øÁ®ãÁöÑÈîÅËÆ∞ÂΩïÂú∞ÂùÄÂíåÂØπË±°Â§¥ÈáåÁöÑÊåáÈíàÂú∞ÂùÄÊØîËæÉ)Ôºå‰πüÂèØËÉΩÊòØÂØπË±°Â§¥ÈáåÁöÑÁ∫øÁ®ãIDÔºàÂà§Êñ≠Á∫øÁ®ãÊòØÂê¶Êã•ÊúâÈîÅÊó∂Â∞ÜÁ∫øÁ®ãÁöÑIDÂíåÂØπË±°Â§¥ÈáåÂ≠òÂÇ®ÁöÑÁ∫øÁ®ãIDÊØîËæÉÔºâ„ÄÇ </p>
<p><img src="/p/8360cd4/2062729-36035cd1936bd2c6.png" alt="img"></p>
<h2 id="ÂØπË±°Â§¥‰∏≠Mark-Word‰∏éÁ∫øÁ®ã‰∏≠Lock-Record"><a href="#ÂØπË±°Â§¥‰∏≠Mark-Word‰∏éÁ∫øÁ®ã‰∏≠Lock-Record" class="headerlink" title="ÂØπË±°Â§¥‰∏≠Mark Word‰∏éÁ∫øÁ®ã‰∏≠Lock Record"></a>ÂØπË±°Â§¥‰∏≠Mark Word‰∏éÁ∫øÁ®ã‰∏≠Lock Record</h2><p>Lock Record ÔºöÁî®‰∫éËΩªÈáèÁ∫ßÈîÅ‰ºòÂåñÔºåÂú®Á∫øÁ®ãËøõÂÖ•ÂêåÊ≠•‰ª£Á†ÅÂùóÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÊ≠§ÂêåÊ≠•ÂØπË±°Ê≤°ÊúâË¢´ÈîÅÂÆöÔºåÂç≥ÂÆÉÁöÑÈîÅÊ†áÂøó‰ΩçÊòØ01ÔºåÂàôËôöÊãüÊú∫È¶ñÂÖàÂú®ÂΩìÂâçÁ∫øÁ®ãÁöÑÊ†à‰∏≠ÂàõÂª∫ Lock Record ÁöÑÁ©∫Èó¥ÔºåÁî®‰∫éÂ≠òÂÇ®ÈîÅÂØπË±°ÁöÑMark WordÁöÑÊã∑Ë¥ùÔºåÂÆòÊñπÊääËøô‰∏™Êã∑Ë¥ùÁß∞‰∏∫Displaced Mark Word„ÄÇÂú®Êã∑Ë¥ùÂÆåÊàêÂêéÔºåÈ¶ñÂÖà‰ºöÊåÇËµ∑ÊåÅÊúâÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãÔºåÂõ†‰∏∫Ë¶ÅËøõË°åÂ∞ùËØï‰øÆÊîπÈîÅËÆ∞ÂΩïÊåáÈíàÔºåMarkWord‰ºöÊúâÂèòÂåñÔºåÊâÄÊúâÁ∫øÁ®ã‰ºöÂà©Áî®CASÂ∞ùËØïÂ∞ÜMarkWordÁöÑÈîÅËÆ∞ÂΩïÊåáÈíàÊîπ‰∏∫ÊåáÂêëËá™Â∑±(Á∫øÁ®ã)ÁöÑÈîÅËÆ∞ÂΩïÔºåÁÑ∂Âêé lock recordÁöÑownerÊåáÂêëÂØπË±°ÁöÑmarkwordÔºå‰øÆÊîπÊàêÂäüÁöÑÁ∫øÁ®ãÂ∞ÜËé∑ÂæóËΩªÈáèÁ∫ßÈîÅ„ÄÇÂ§±Ë¥•ÂàôÁ∫øÁ®ãÂçáÁ∫ß‰∏∫ÈáçÈáèÁ∫ßÈîÅ„ÄÇÈáäÊîæÊó∂‰ºöÊ£ÄÊü•markword‰∏≠ÁöÑlockrecordÊåáÈíàÊòØÂê¶ÊåáÂêëËá™Â∑±(Ëé∑ÂæóÈîÅÁöÑÁ∫øÁ®ãlockrecord)Ôºå‰ΩøÁî®ÂéüÂ≠êÁöÑCASÂ∞ÜDisplaced Mark WordÊõøÊç¢ÂõûÂØπË±°Â§¥ÔºåÂ¶ÇÊûúÊàêÂäüÔºåÂàôË°®Á§∫Ê≤°ÊúâÁ´û‰∫âÂèëÁîüÔºåÂ¶ÇÊûúÊõøÊç¢Â§±Ë¥•ÂàôÂçáÁ∫ß‰∏∫ÈáçÈáèÁ∫ßÈîÅ„ÄÇÊï¥‰∏™ËøáÁ®ã‰∏≠ÔºåLockRecordÊòØ‰∏Ä‰∏™Á∫øÁ®ãÂÜÖÁã¨‰∫´ÁöÑÂ≠òÂÇ®ÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊúâ‰∏Ä‰∏™ÂèØÁî®<code>Monitor Record</code>ÂàóË°®„ÄÇ</p>
<p>Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">CASE</span>(_monitorenter): {</span><br><span class="line">    oop lockee = <span class="built_in">STACK_OBJECT</span>(<span class="number">-1</span>);</span><br><span class="line">    <span class="comment">// derefing's lockee ought to provoke implicit null check</span></span><br><span class="line">    <span class="built_in">CHECK_NULL</span>(lockee);</span><br><span class="line">    <span class="comment">// find a free monitor or one already allocated for this object</span></span><br><span class="line">    <span class="comment">// if we find a matching object then we need a new monitor</span></span><br><span class="line">    <span class="comment">// since this is recursive enter</span></span><br><span class="line">    BasicObjectLock* limit = istate-&gt;<span class="built_in">monitor_base</span>();</span><br><span class="line">    BasicObjectLock* most_recent = (BasicObjectLock*) istate-&gt;<span class="built_in">stack_base</span>();</span><br><span class="line">    BasicObjectLock* entry = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">while</span> (most_recent != limit ) {</span><br><span class="line">        <span class="keyword">if</span> (most_recent-&gt;<span class="built_in">obj</span>() == <span class="literal">NULL</span>) entry = most_recent;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (most_recent-&gt;<span class="built_in">obj</span>() == lockee) <span class="keyword">break</span>;</span><br><span class="line">        most_recent++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (entry != <span class="literal">NULL</span>) {</span><br><span class="line">        entry-&gt;<span class="built_in">set_obj</span>(lockee);</span><br><span class="line">        <span class="type">int</span> success = <span class="literal">false</span>;</span><br><span class="line">        <span class="type">uintptr_t</span> epoch_mask_in_place = (<span class="type">uintptr_t</span>)markOopDesc::epoch_mask_in_place;</span><br><span class="line"></span><br><span class="line">        markOop mark = lockee-&gt;<span class="built_in">mark</span>();</span><br><span class="line">        <span class="type">intptr_t</span> hash = (<span class="type">intptr_t</span>) markOopDesc::no_hash;</span><br><span class="line">        <span class="comment">// implies UseBiasedLocking</span></span><br><span class="line">        <span class="keyword">if</span> (mark-&gt;<span class="built_in">has_bias_pattern</span>()) {</span><br><span class="line">            <span class="type">uintptr_t</span> thread_ident;</span><br><span class="line">            <span class="type">uintptr_t</span> anticipated_bias_locking_value;</span><br><span class="line">            thread_ident = (<span class="type">uintptr_t</span>)istate-&gt;<span class="built_in">thread</span>();</span><br><span class="line">            anticipated_bias_locking_value =</span><br><span class="line">                (((<span class="type">uintptr_t</span>)lockee-&gt;<span class="built_in">klass</span>()-&gt;<span class="built_in">prototype_header</span>() | thread_ident) ^ (<span class="type">uintptr_t</span>)mark) &amp;</span><br><span class="line">                ~((<span class="type">uintptr_t</span>) markOopDesc::age_mask_in_place);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>  (anticipated_bias_locking_value == <span class="number">0</span>) {</span><br><span class="line">                <span class="comment">// already biased towards this thread, nothing to do</span></span><br><span class="line">                <span class="keyword">if</span> (PrintBiasedLockingStatistics) {</span><br><span class="line">                    (* BiasedLocking::<span class="built_in">biased_lock_entry_count_addr</span>())++;</span><br><span class="line">                }</span><br><span class="line">                success = <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((anticipated_bias_locking_value &amp; markOopDesc::biased_lock_mask_in_place) != <span class="number">0</span>) {</span><br><span class="line">                <span class="comment">// try revoke bias</span></span><br><span class="line">                markOop header = lockee-&gt;<span class="built_in">klass</span>()-&gt;<span class="built_in">prototype_header</span>();</span><br><span class="line">                <span class="keyword">if</span> (hash != markOopDesc::no_hash) {</span><br><span class="line">                    header = header-&gt;<span class="built_in">copy_set_hash</span>(hash);</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (lockee-&gt;<span class="built_in">cas_set_mark</span>(header, mark) == mark) {</span><br><span class="line">                    <span class="keyword">if</span> (PrintBiasedLockingStatistics)</span><br><span class="line">                        (*BiasedLocking::<span class="built_in">revoked_lock_entry_count_addr</span>())++;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ((anticipated_bias_locking_value &amp; epoch_mask_in_place) !=<span class="number">0</span>) {</span><br><span class="line">                <span class="comment">// try rebias</span></span><br><span class="line">                markOop new_header = (markOop) ( (<span class="type">intptr_t</span>) lockee-&gt;<span class="built_in">klass</span>()-&gt;<span class="built_in">prototype_header</span>() | thread_ident);</span><br><span class="line">                <span class="keyword">if</span> (hash != markOopDesc::no_hash) {</span><br><span class="line">                    new_header = new_header-&gt;<span class="built_in">copy_set_hash</span>(hash);</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (lockee-&gt;<span class="built_in">cas_set_mark</span>(new_header, mark) == mark) {</span><br><span class="line">                    <span class="keyword">if</span> (PrintBiasedLockingStatistics)</span><br><span class="line">                        (* BiasedLocking::<span class="built_in">rebiased_lock_entry_count_addr</span>())++;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">else</span> {</span><br><span class="line">                    <span class="built_in">CALL_VM</span>(InterpreterRuntime::<span class="built_in">monitorenter</span>(THREAD, entry), handle_exception);</span><br><span class="line">                }</span><br><span class="line">                success = <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> {</span><br><span class="line">                <span class="comment">// try to bias towards thread in case object is anonymously biased</span></span><br><span class="line">                markOop header = (markOop) ((<span class="type">uintptr_t</span>) mark &amp; ((<span class="type">uintptr_t</span>)markOopDesc::biased_lock_mask_in_place |</span><br><span class="line">                                                                (<span class="type">uintptr_t</span>)markOopDesc::age_mask_in_place |</span><br><span class="line">                                                                epoch_mask_in_place));</span><br><span class="line">                <span class="keyword">if</span> (hash != markOopDesc::no_hash) {</span><br><span class="line">                    header = header-&gt;<span class="built_in">copy_set_hash</span>(hash);</span><br><span class="line">                }</span><br><span class="line">                markOop new_header = (markOop) ((<span class="type">uintptr_t</span>) header | thread_ident);</span><br><span class="line">                <span class="comment">// debugging hint</span></span><br><span class="line">                <span class="built_in">DEBUG_ONLY</span>(entry-&gt;<span class="built_in">lock</span>()-&gt;<span class="built_in">set_displaced_header</span>((markOop) (<span class="type">uintptr_t</span>) <span class="number">0xdeaddead</span>);)</span><br><span class="line">                    <span class="keyword">if</span> (lockee-&gt;<span class="built_in">cas_set_mark</span>(new_header, header) == header) {</span><br><span class="line">                        <span class="keyword">if</span> (PrintBiasedLockingStatistics)</span><br><span class="line">                            (* BiasedLocking::<span class="built_in">anonymously_biased_lock_entry_count_addr</span>())++;</span><br><span class="line">                    }</span><br><span class="line">                <span class="keyword">else</span> {</span><br><span class="line">                    <span class="built_in">CALL_VM</span>(InterpreterRuntime::<span class="built_in">monitorenter</span>(THREAD, entry), handle_exception);</span><br><span class="line">                }</span><br><span class="line">                success = <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// traditional lightweight locking</span></span><br><span class="line">        <span class="keyword">if</span> (!success) {</span><br><span class="line">            markOop displaced = lockee-&gt;<span class="built_in">mark</span>()-&gt;<span class="built_in">set_unlocked</span>();</span><br><span class="line">            entry-&gt;<span class="built_in">lock</span>()-&gt;<span class="built_in">set_displaced_header</span>(displaced);</span><br><span class="line">            <span class="type">bool</span> call_vm = UseHeavyMonitors;</span><br><span class="line">            <span class="keyword">if</span> (call_vm || lockee-&gt;<span class="built_in">cas_set_mark</span>((markOop)entry, displaced) != displaced) {</span><br><span class="line">                <span class="comment">// Is it simple recursive case?</span></span><br><span class="line">                <span class="keyword">if</span> (!call_vm &amp;&amp; THREAD-&gt;<span class="built_in">is_lock_owned</span>((address) displaced-&gt;<span class="built_in">clear_lock_bits</span>())) {</span><br><span class="line">                    entry-&gt;<span class="built_in">lock</span>()-&gt;<span class="built_in">set_displaced_header</span>(<span class="literal">NULL</span>);</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    <span class="built_in">CALL_VM</span>(InterpreterRuntime::<span class="built_in">monitorenter</span>(THREAD, entry), handle_exception);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">UPDATE_PC_AND_TOS_AND_CONTINUE</span>(<span class="number">1</span>, <span class="number">-1</span>);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        istate-&gt;<span class="built_in">set_msg</span>(more_monitors);</span><br><span class="line">        <span class="built_in">UPDATE_PC_AND_RETURN</span>(<span class="number">0</span>); <span class="comment">// Re-execute</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>Lock RecordÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑÊï∞ÊçÆÁªìÊûÑ</strong>ÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊúâ‰∏Ä‰∏™ÂèØÁî®Lock RecordÂàóË°®ÔºåÂêåÊó∂ËøòÊúâ‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑÂèØÁî®ÂàóË°®„ÄÇÊØè‰∏Ä‰∏™Ë¢´ÈîÅ‰ΩèÁöÑÂØπË±°Mark WordÈÉΩ‰ºöÂíå‰∏Ä‰∏™Lock RecordÂÖ≥ËÅîÔºàÂØπË±°Â§¥ÁöÑMarkWord‰∏≠ÁöÑLock WordÊåáÂêëLock RecordÁöÑËµ∑ÂßãÂú∞ÂùÄÔºâÔºåÂêåÊó∂ Lock Record ‰∏≠Êúâ‰∏Ä‰∏™ Owner Â≠óÊÆµÂ≠òÊîæÊã•ÊúâËØ•ÈîÅÁöÑÁ∫øÁ®ãÁöÑÂîØ‰∏ÄÊ†áËØÜÔºàÊàñËÄÖ<code>object mark word</code>ÔºâÔºåË°®Á§∫ËØ•ÈîÅË¢´Ëøô‰∏™Á∫øÁ®ãÂç†Áî®„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫‰∏∫Lock RecordÁöÑÂÜÖÈÉ®ÁªìÊûÑÔºö</p>
<table>
<thead>
<tr>
<th>Lock Record</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody><tr>
<td>Owner</td>
<td>ÂàùÂßãÊó∂‰∏∫NULLË°®Á§∫ÂΩìÂâçÊ≤°Êúâ‰ªª‰ΩïÁ∫øÁ®ãÊã•ÊúâËØ•monitor recordÔºåÂΩìÁ∫øÁ®ãÊàêÂäüÊã•ÊúâËØ•ÈîÅÂêé‰øùÂ≠òÁ∫øÁ®ãÂîØ‰∏ÄÊ†áËØÜÔºåÂΩìÈîÅË¢´ÈáäÊîæÊó∂ÂèàËÆæÁΩÆ‰∏∫NULLÔºõ</td>
</tr>
<tr>
<td>EntryQ</td>
<td>ÂÖ≥ËÅî‰∏Ä‰∏™Á≥ªÁªü‰∫íÊñ•ÈîÅÔºàsemaphoreÔºâÔºåÈòªÂ°ûÊâÄÊúâËØïÂõæÈîÅ‰Ωèmonitor recordÂ§±Ë¥•ÁöÑÁ∫øÁ®ãÔºõ</td>
</tr>
<tr>
<td>RcThis</td>
<td>Ë°®Á§∫blockedÊàñwaitingÂú®ËØ•monitor record‰∏äÁöÑÊâÄÊúâÁ∫øÁ®ãÁöÑ‰∏™Êï∞Ôºõ</td>
</tr>
<tr>
<td>Nest</td>
<td>Áî®Êù•ÂÆûÁé∞ ÈáçÂÖ•ÈîÅÁöÑËÆ°Êï∞Ôºõ</td>
</tr>
<tr>
<td>HashCode</td>
<td>‰øùÂ≠ò‰ªéÂØπË±°Â§¥Êã∑Ë¥ùËøáÊù•ÁöÑHashCodeÂÄºÔºàÂèØËÉΩËøòÂåÖÂê´GC ageÔºâ„ÄÇ</td>
</tr>
<tr>
<td>Candidate</td>
<td>Áî®Êù•ÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÈòªÂ°ûÊàñÁ≠âÂæÖÁ∫øÁ®ãÂî§ÈÜíÔºåÂõ†‰∏∫ÊØè‰∏ÄÊ¨°Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩÂ§üÊàêÂäüÊã•ÊúâÈîÅÔºåÂ¶ÇÊûúÊØèÊ¨°Ââç‰∏Ä‰∏™ÈáäÊîæÈîÅÁöÑÁ∫øÁ®ãÂî§ÈÜíÊâÄÊúâÊ≠£Âú®ÈòªÂ°ûÊàñÁ≠âÂæÖÁöÑÁ∫øÁ®ãÔºå‰ºöÂºïËµ∑‰∏çÂøÖË¶ÅÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢Ôºà‰ªéÈòªÂ°ûÂà∞Â∞±Áª™ÁÑ∂ÂêéÂõ†‰∏∫Á´û‰∫âÈîÅÂ§±Ë¥•ÂèàË¢´ÈòªÂ°ûÔºâ‰ªéËÄåÂØºËá¥ÊÄßËÉΩ‰∏•Èáç‰∏ãÈôç„ÄÇCandidateÂè™Êúâ‰∏§ÁßçÂèØËÉΩÁöÑÂÄº0Ë°®Á§∫Ê≤°ÊúâÈúÄË¶ÅÂî§ÈÜíÁöÑÁ∫øÁ®ã1Ë°®Á§∫Ë¶ÅÂî§ÈÜí‰∏Ä‰∏™Áªß‰ªªÁ∫øÁ®ãÊù•Á´û‰∫âÈîÅ„ÄÇ</td>
</tr>
</tbody></table>
<h2 id="synchronized-ÈîÅÈáçÂÖ•"><a href="#synchronized-ÈîÅÈáçÂÖ•" class="headerlink" title="synchronized ÈîÅÈáçÂÖ•"></a>synchronized ÈîÅÈáçÂÖ•</h2><h3 id="ÈóÆÈ¢òÂØºÂÖ•"><a href="#ÈóÆÈ¢òÂØºÂÖ•" class="headerlink" title="ÈóÆÈ¢òÂØºÂÖ•"></a>ÈóÆÈ¢òÂØºÂÖ•</h3><blockquote>
<p>Â¶ÇÊûú‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®‰∫Ü‰∏Ä‰∏™ÂØπË±°ÁöÑÂêåÊ≠•ÊñπÊ≥ïÔºåÈÇ£‰πà‰ªñËøòËÉΩ‰∏çËÉΩÂú®Ë∞ÉÁî®Ëøô‰∏™ÂØπË±°ÁöÑÂè¶Â§ñ‰∏Ä‰∏™ÂêåÊ≠•ÊñπÊ≥ïÂë¢Ôºü</p>
</blockquote>
<p>synchronized ÈîÅÊã•ÊúâÈáçÂÖ•ÈîÅÁöÑÂäüËÉΩÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂæóÂà∞ÂØπË±°ÈîÅ‰πãÂêéÔºåÂÜçÊ¨°ËØ∑Ê±ÇÊ≠§ÂØπË±°ÈîÅÊó∂ÊòØÂèØ‰ª•Ëé∑ÂèñÂà∞ËØ•ÂØπË±°ÈîÅÁöÑÔºå‰πüÂ∞±ÂèØ‰ª•Âú®‰∏Ä‰∏™ synchronized ÊñπÊ≥ï ÔºàÂùóÔºâÁöÑÂÜÖÈÉ®Ë∞ÉÁî®Êú¨Á±ªÁöÑÂÖ∂ÂÆÉÂä†ÈîÅÁöÑÊñπÊ≥ïÔºàÂùóÔºâÔºåÊòØÂèØ‰ª•Áõ¥Êé•ÂæóÂà∞ÈîÅÁöÑ„ÄÇ</p>
<p>‰∏ãÈù¢ÊòØ‰∏Ä‰∏™synchronizedÂèØÈáçÂÖ•ÊÄßÈ™åËØÅÁöÑÁ§∫‰æã‰ª£Á†ÅÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Service</span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span>  <span class="keyword">void</span> <span class="title function_">fun1</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(<span class="string">"‰∏ÄÂè∑ÂêåÊ≠•ÊñπÊ≥ï"</span>);</span><br><span class="line">        fun2();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">fun2</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(<span class="string">"‰∫åÂè∑ÂêåÊ≠•ÊñπÊ≥ï"</span>);</span><br><span class="line">        fun3();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">fun3</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(<span class="string">"‰∏âÂè∑ÂêåÊ≠•ÊñπÊ≥ï"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> {</span><br><span class="line">    <span class="keyword">private</span> Service service;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SynThreadText</span><span class="params">(Service service)</span>{</span><br><span class="line">        <span class="built_in">this</span>.service=service;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>{</span><br><span class="line">        service.fun1();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">Service</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Service</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(service);</span><br><span class="line">        myThread.start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûúÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">‰∏ÄÂè∑ÂêåÊ≠•ÊñπÊ≥ï</span><br><span class="line">‰∫åÂè∑ÂêåÊ≠•ÊñπÊ≥ï</span><br><span class="line">‰∏âÂè∑ÂêåÊ≠•ÊñπÊ≥ï</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÂÆö‰πâ"><a href="#ÂÆö‰πâ" class="headerlink" title="ÂÆö‰πâ"></a>ÂÆö‰πâ</h3><p>ÂèØÈáçÂÖ•ÈîÅÂèàÂêçÈÄíÂΩíÈîÅÔºåÊòØÊåáÂú®Âêå‰∏Ä‰∏™Á∫øÁ®ãÂú®Â§ñÂ±ÇÊñπÊ≥ïËé∑ÂèñÈîÅÁöÑÊó∂ÂÄôÔºåÂÜçÊ¨°ËøõÂÖ•ËØ•Á∫øÁ®ãÁöÑÂÜÖÂ±ÇÊñπÊ≥ï‰ºöËá™Âä®Ëé∑ÂèñÈîÅÔºàÂâçÊèêÈîÅÂØπË±°ÂæóÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÊàñËÄÖ classÔºâÔºå‰∏ç‰ºöÂõ†‰∏∫‰πãÂâçÂ∑≤ÁªèËé∑ÂèñËøáËøòÊ≤°ÈáäÊîæËÄåÈòªÂ°û„ÄÇÂèØÈáçÂÖ•ÈîÅÁöÑ‰∏Ä‰∏™‰ºòÁÇπÊòØÂèØ‰∏ÄÂÆöÁ®ãÂ∫¶ÈÅøÂÖçÊ≠ªÈîÅ„ÄÇ</p>
<h3 id="ÂéüÁêÜ"><a href="#ÂéüÁêÜ" class="headerlink" title="ÂéüÁêÜ"></a>ÂéüÁêÜ</h3><p>Âú®object monitor ÁöÑÊ∫êÁ†Å‰∏≠Êúâ‰∏Ä‰∏™ _count ÂèòÈáèÔºåÂΩìËé∑Âèñ‰∫ÜËØ•ÈîÅÁöÑÁ∫øÁ®ãÂÜçÊ¨°Ëé∑ÂèñÈîÅÊó∂ÂèëÁé∞ÈîÅÊã•ÊúâËÄÖÊòØËá™Â∑±ÔºåÂ∞±‰ºöÊää _countÔºã1, ÂΩìÈáäÊîæÈîÅÂêé  _countÔºç1„ÄÇÂΩìËÆ°Êï∞Âô®ÂÄº‰∏∫ 0 Êó∂ÔºåÈîÅÈáåÈù¢ÁöÑÁ∫øÁ®ãÊ†áÁ§∫Ë¢´ÈáçÁΩÆ‰∏∫ nullÔºåËøôÊó∂ÂÄôË¢´ÈòªÂ°ûÁöÑÁ∫øÁ®ã‰ºöË¢´Âî§ÈÜíÊù•Á´û‰∫âËé∑ÂèñËØ•ÈîÅ„ÄÇ</p>
<h3 id="ÈîÅÈáçÂÖ•ÊîØÊåÅÁà∂Á±ªÁªßÊâø"><a href="#ÈîÅÈáçÂÖ•ÊîØÊåÅÁà∂Á±ªÁªßÊâø" class="headerlink" title="ÈîÅÈáçÂÖ•ÊîØÊåÅÁà∂Á±ªÁªßÊâø"></a>ÈîÅÈáçÂÖ•ÊîØÊåÅÁà∂Á±ªÁªßÊâø</h3><p>Êó¢ÁÑ∂ synchronized ÊîØÊåÅÂØπË±°ÁöÑÊñπÊ≥ïÈáçÂÖ•ÔºåÈÇ£‰πà‰ªñÊòØÂê¶‰πüÊîØÊåÅÂ≠êÁ±ªÁªßÊâøÁà∂Á±ªÁöÑÂêåÊ≠•ÊñπÊ≥ïÈáçÂÖ•Ôºü</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SubClass</span> <span class="keyword">extends</span> <span class="title class_">SuperClass</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>{</span><br><span class="line">        <span class="built_in">this</span>.subFun();</span><br><span class="line">    }</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span>  <span class="keyword">void</span> <span class="title function_">subFun</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(<span class="string">"Â≠êÁ±ªÁöÑÂêåÊ≠•ÊñπÊ≥ï"</span>);</span><br><span class="line">        <span class="built_in">this</span>.superSynFun();</span><br><span class="line">    }</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">SubClass</span> <span class="variable">sub</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SubClass</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sub);</span><br><span class="line">        t.start();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SuperClass</span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">superSynFun</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(<span class="string">"Áà∂Á±ªÁöÑÂêåÊ≠•ÊñπÊ≥ï"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûúÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Â≠êÁ±ªÁöÑÂêåÊ≠•ÊñπÊ≥ï</span><br><span class="line">Áà∂Á±ªÁöÑÂêåÊ≠•ÊñπÊ≥ï</span><br></pre></td></tr></tbody></table></figure>

<p>Â¶ÇÊûúË¢´ÈáçÂÜôÁöÑÊñπÊ≥ïÊúâsynchronizedÂÖ≥ÈîÆÂ≠óÔºåÂú®ÊâÄÈáçÂÜôÊñπÊ≥ïÂ¶ÇÊûú‰∏çÂä† synchronized  ‰øÆÈ•∞ÔºåÈÇ£Â∞±ÊòØÈùûÂêåÊ≠•ÊñπÊ≥ï„ÄÇ</p>
<h2 id="ÈîÅÁöÑ‰ºòÂåñ"><a href="#ÈîÅÁöÑ‰ºòÂåñ" class="headerlink" title="ÈîÅÁöÑ‰ºòÂåñ"></a>ÈîÅÁöÑ‰ºòÂåñ</h2><h3 id="Ëá™ÊóãÈîÅ"><a href="#Ëá™ÊóãÈîÅ" class="headerlink" title="Ëá™ÊóãÈîÅ"></a>Ëá™ÊóãÈîÅ</h3><p><strong>Á∫øÁ®ãÁöÑÈòªÂ°ûÂíåÂî§ÈÜíÈúÄË¶ÅCPU‰ªéÁî®Êà∑ÊÄÅËΩ¨‰∏∫Ê†∏ÂøÉÊÄÅ</strong>ÔºåÈ¢ëÁπÅÁöÑÈòªÂ°ûÂíåÂî§ÈÜíÂØπCPUÊù•ËØ¥ÊòØ‰∏Ä‰ª∂Ë¥üÊãÖÂæàÈáçÁöÑÂ∑•‰ΩúÔºåÂäøÂøÖ‰ºöÁªôÁ≥ªÁªüÁöÑÂπ∂ÂèëÊÄßËÉΩÂ∏¶Êù•ÂæàÂ§ßÁöÑÂéãÂäõ„ÄÇÂêåÊó∂Êàë‰ª¨ÂèëÁé∞Âú®ËÆ∏Â§öÂ∫îÁî®‰∏äÈù¢ÔºåÂØπË±°ÈîÅÁöÑÈîÅÁä∂ÊÄÅÂè™‰ºöÊåÅÁª≠ÂæàÁü≠‰∏ÄÊÆµÊó∂Èó¥Ôºå‰∏∫‰∫ÜËøô‰∏ÄÊÆµÂæàÁü≠ÁöÑÊó∂Èó¥È¢ëÁπÅÂú∞ÈòªÂ°ûÂíåÂî§ÈÜíÁ∫øÁ®ãÊòØÈùûÂ∏∏‰∏çÂÄºÂæóÁöÑ„ÄÇ</p>
<p>ÊâÄ‰ª•ÂºïÂÖ•Ëá™ÊóãÈîÅÔºå‰ΩïË∞ìËá™ÊóãÈîÅÔºü </p>
<p>ÊâÄË∞ìËá™ÊóãÈîÅÂ∞±ÊòØÊåáÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂ∞ùËØïËé∑ÂèñÊüê‰∏™ÈîÅÊó∂ÔºåÂ¶ÇÊûúËØ•ÈîÅÂ∑≤Ë¢´ÂÖ∂‰ªñÁ∫øÁ®ãÂç†Áî®ÔºåÂ∞±‰∏ÄÁõ¥Âæ™ÁéØÊ£ÄÊµãÈîÅÊòØÂê¶Ë¢´ÈáäÊîæÔºåËÄå‰∏çÊòØËøõÂÖ•Á∫øÁ®ãÊåÇËµ∑ÊàñÁù°Áú†Áä∂ÊÄÅ„ÄÇ</p>
<p>Ëá™ÊóãÈîÅÈÄÇÁî®‰∫éÈîÅ‰øùÊä§ÁöÑ‰∏¥ÁïåÂå∫ÂæàÂ∞èÁöÑÊÉÖÂÜµÔºå‰∏¥ÁïåÂå∫ÂæàÂ∞èÁöÑËØùÔºåÈîÅÂç†Áî®ÁöÑÊó∂Èó¥Â∞±ÂæàÁü≠„ÄÇËá™ÊóãÁ≠âÂæÖ‰∏çËÉΩÊõø‰ª£ÈòªÂ°ûÔºåËôΩÁÑ∂ÂÆÉÂèØ‰ª•ÈÅøÂÖçÁ∫øÁ®ãÂàáÊç¢Â∏¶Êù•ÁöÑÂºÄÈîÄÔºå‰ΩÜÊòØÂÆÉÂç†Áî®‰∫ÜCPUÂ§ÑÁêÜÂô®ÁöÑÊó∂Èó¥„ÄÇÂ¶ÇÊûúÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÂæàÂø´Â∞±ÈáäÊîæ‰∫ÜÈîÅÔºåÈÇ£‰πàËá™ÊóãÁöÑÊïàÁéáÂ∞±ÈùûÂ∏∏Â•ΩÔºåÂèç‰πãÔºåËá™ÊóãÁöÑÁ∫øÁ®ãÂ∞±‰ºöÁôΩÁôΩÊ∂àËÄóÊéâÂ§ÑÁêÜÁöÑËµÑÊ∫êÔºåÂÆÉ‰∏ç‰ºöÂÅö‰ªª‰ΩïÊúâÊÑè‰πâÁöÑÂ∑•‰ΩúÔºåÂÖ∏ÂûãÁöÑÂç†ÁùÄËåÖÂùë‰∏çÊãâÂ±éÔºåËøôÊ†∑ÂèçËÄå‰ºöÂ∏¶Êù•ÊÄßËÉΩ‰∏äÁöÑÊµ™Ë¥π„ÄÇÊâÄ‰ª•ËØ¥ÔºåËá™ÊóãÁ≠âÂæÖÁöÑÊó∂Èó¥ÔºàËá™ÊóãÁöÑÊ¨°Êï∞ÔºâÂøÖÈ°ªË¶ÅÊúâ‰∏Ä‰∏™ÈôêÂ∫¶ÔºåÂ¶ÇÊûúËá™ÊóãË∂ÖËøá‰∫ÜÂÆö‰πâÁöÑÊó∂Èó¥‰ªçÁÑ∂Ê≤°ÊúâËé∑ÂèñÂà∞ÈîÅÔºåÂàôÂ∫îËØ•Ë¢´ÊåÇËµ∑„ÄÇ</p>
<p>Ëá™ÊóãÈîÅÂú®JDK 1.4.2‰∏≠ÂºïÂÖ•ÔºåÈªòËÆ§ÂÖ≥Èó≠Ôºå‰ΩÜÊòØÂèØ‰ª•‰ΩøÁî®-XX:+UseSpinningÂºÄÂºÄÂêØÔºåÂú®JDK1.6‰∏≠ÈªòËÆ§ÂºÄÂêØ„ÄÇÂêåÊó∂Ëá™ÊóãÁöÑÈªòËÆ§Ê¨°Êï∞‰∏∫10Ê¨°ÔºåÂèØ‰ª•ÈÄöËøáÂèÇÊï∞-XX:PreBlockSpinÊù•Ë∞ÉÊï¥„ÄÇÂ¶ÇÊûúÈÄöËøáÂèÇÊï∞-XX:PreBlockSpinÊù•Ë∞ÉÊï¥Ëá™ÊóãÈîÅÁöÑËá™ÊóãÊ¨°Êï∞Ôºå‰ºöÂ∏¶Êù•ËØ∏Â§ö‰∏ç‰æø„ÄÇÂÅáÂ¶ÇÂ∞ÜÂèÇÊï∞Ë∞ÉÊï¥‰∏∫10Ôºå‰ΩÜÊòØÁ≥ªÁªüÂæàÂ§öÁ∫øÁ®ãÈÉΩÊòØÁ≠â‰Ω†ÂàöÂàöÈÄÄÂá∫ÁöÑÊó∂ÂÄôÂ∞±ÈáäÊîæ‰∫ÜÈîÅÔºàÂÅáÂ¶ÇÂ§öËá™Êóã‰∏Ä‰∏§Ê¨°Â∞±ÂèØ‰ª•Ëé∑ÂèñÈîÅÔºâÔºåÊòØ‰∏çÊòØÂæàÂ∞¥Â∞¨„ÄÇ‰∫éÊòØJDK1.6ÂºïÂÖ•Ëá™ÈÄÇÂ∫îÁöÑËá™ÊóãÈîÅÔºåËÆ©ËôöÊãüÊú∫‰ºöÂèòÂæóË∂äÊù•Ë∂äËÅ™Êòé„ÄÇ</p>
<h3 id="ÈÄÇÂ∫îÊÄßËá™ÊóãÈîÅ"><a href="#ÈÄÇÂ∫îÊÄßËá™ÊóãÈîÅ" class="headerlink" title="ÈÄÇÂ∫îÊÄßËá™ÊóãÈîÅ"></a>ÈÄÇÂ∫îÊÄßËá™ÊóãÈîÅ</h3><p>JDK 1.6ÂºïÂÖ•‰∫ÜÊõ¥Âä†ËÅ™ÊòéÁöÑËá™ÊóãÈîÅÔºåÂç≥Ëá™ÈÄÇÂ∫îËá™ÊóãÈîÅ„ÄÇÊâÄË∞ìËá™ÈÄÇÂ∫îÂ∞±ÊÑèÂë≥ÁùÄËá™ÊóãÁöÑÊ¨°Êï∞‰∏çÂÜçÊòØÂõ∫ÂÆöÁöÑÔºåÂÆÉÊòØÁî±Ââç‰∏ÄÊ¨°Âú®Âêå‰∏Ä‰∏™ÈîÅ‰∏äÁöÑËá™ÊóãÊó∂Èó¥ÂèäÈîÅÁöÑÊã•ÊúâËÄÖÁöÑÁä∂ÊÄÅÊù•ÂÜ≥ÂÆö„ÄÇÈÇ£ÂÆÉÂ¶Ç‰ΩïËøõË°åÈÄÇÂ∫îÊÄßËá™ÊóãÂë¢Ôºü </p>
<p><strong>Á∫øÁ®ãÂ¶ÇÊûúËá™ÊóãÊàêÂäü‰∫ÜÔºåÈÇ£‰πà‰∏ãÊ¨°Ëá™ÊóãÁöÑÊ¨°Êï∞‰ºöÊõ¥Âä†Â§öÔºåÂõ†‰∏∫ËôöÊãüÊú∫ËÆ§‰∏∫Êó¢ÁÑ∂‰∏äÊ¨°ÊàêÂäü‰∫ÜÔºåÈÇ£‰πàÊ≠§Ê¨°Ëá™Êóã‰πüÂæàÊúâÂèØËÉΩ‰ºöÂÜçÊ¨°ÊàêÂäüÔºåÈÇ£‰πàÂÆÉÂ∞±‰ºöÂÖÅËÆ∏Ëá™ÊóãÁ≠âÂæÖÊåÅÁª≠ÁöÑÊ¨°Êï∞Êõ¥Â§ö„ÄÇÂèç‰πãÔºåÂ¶ÇÊûúÂØπ‰∫éÊüê‰∏™ÈîÅÔºåÂæàÂ∞ëÊúâËá™ÊóãËÉΩÂ§üÊàêÂäüÔºåÈÇ£‰πàÂú®‰ª•ÂêéË¶ÅÊàñËÄÖËøô‰∏™ÈîÅÁöÑÊó∂ÂÄôËá™ÊóãÁöÑÊ¨°Êï∞‰ºöÂáèÂ∞ëÁîöËá≥ÁúÅÁï•ÊéâËá™ÊóãËøáÁ®ãÔºå‰ª•ÂÖçÊµ™Ë¥πÂ§ÑÁêÜÂô®ËµÑÊ∫ê„ÄÇ</strong></p>
<p>Êúâ‰∫ÜËá™ÈÄÇÂ∫îËá™ÊóãÈîÅÔºåÈöèÁùÄÁ®ãÂ∫èËøêË°åÂíåÊÄßËÉΩÁõëÊéß‰ø°ÊÅØÁöÑ‰∏çÊñ≠ÂÆåÂñÑÔºåËôöÊãüÊú∫ÂØπÁ®ãÂ∫èÈîÅÁöÑÁä∂ÂÜµÈ¢ÑÊµã‰ºöË∂äÊù•Ë∂äÂáÜÁ°ÆÔºåËôöÊãüÊú∫‰ºöÂèòÂæóË∂äÊù•Ë∂äËÅ™Êòé„ÄÇ</p>
<h3 id="ÈîÅÁ≤óÂåñ"><a href="#ÈîÅÁ≤óÂåñ" class="headerlink" title="ÈîÅÁ≤óÂåñ"></a>ÈîÅÁ≤óÂåñ</h3><p>ÂèØÈÄöËøáJITWatchÊü•ÁúãËøêË°åÁöÑËøáÁ®ã„ÄÇÈîÅÁ≤óËØùÊ¶ÇÂøµÊØîËæÉÂ•ΩÁêÜËß£ÔºåÂ∞±ÊòØÂ∞ÜÂ§ö‰∏™ËøûÁª≠ÁöÑÂä†ÈîÅ„ÄÅËß£ÈîÅÊìç‰ΩúËøûÊé•Âú®‰∏ÄËµ∑ÔºåÊâ©Â±ïÊàê‰∏Ä‰∏™ËåÉÂõ¥Êõ¥Â§ßÁöÑÈîÅ„ÄÇStringBuffer‰∏≠ÁöÑappendÊñπÊ≥ï‰∏äÊúâsynchronizedÂêåÊ≠•ÂÖ≥ÈîÆÂ≠ó„ÄÇÊØèÊ¨°appendÁöÑÊó∂ÂÄôÈÉΩÈúÄË¶ÅÂä†ÈîÅÊìç‰ΩúÔºå<strong>JVMÊ£ÄÊµãÂà∞ÂØπÂêå‰∏Ä‰∏™ÂØπË±°ËøûÁª≠Âä†ÈîÅ„ÄÅËß£ÈîÅÊìç‰ΩúÔºå‰ºöÂêàÂπ∂‰∏Ä‰∏™Êõ¥Â§ßËåÉÂõ¥ÁöÑÂä†ÈîÅ„ÄÅËß£ÈîÅÊìç‰ΩúÔºåÂç≥Âä†ÈîÅËß£ÈîÅÊìç‰Ωú‰ºöÁßªÂà∞forÂæ™ÁéØ‰πãÂ§ñ„ÄÇ</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">100000</span>; i++){</span><br><span class="line">        sb.append(i+<span class="string">""</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// ‰ºòÂåñÂêé</span></span><br><span class="line">    <span class="keyword">synchronized</span>(<span class="built_in">this</span>) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">100000</span>; i++){</span><br><span class="line">            <span class="comment">// appendÁöÑsynchronizedÂÖ≥ÈîÆÂ≠ó‰ºöË¢´Ê∂àÈô§</span></span><br><span class="line">            sb.append(i+<span class="string">""</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÈîÅÊ∂àÈô§"><a href="#ÈîÅÊ∂àÈô§" class="headerlink" title="ÈîÅÊ∂àÈô§"></a>ÈîÅÊ∂àÈô§</h3><p>‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄßÔºåÂú®ËøõË°åÊìç‰ΩúÊó∂ÈúÄË¶ÅÂØπËøôÈÉ®ÂàÜÊìç‰ΩúËøõË°åÂêåÊ≠•ÊéßÂà∂Ôºå‰ΩÜÊòØÂú®Êúâ‰∫õÊÉÖÂÜµ‰∏ãÔºåJVMÊ£ÄÊµãÂà∞‰∏çÂèØËÉΩÂ≠òÂú®ÂÖ±‰∫´Êï∞ÊçÆÁ´û‰∫âÔºåËøôÊòØJVM‰ºöÂØπËøô‰∫õÂêåÊ≠•ÈîÅËøõË°åÈîÅÊ∂àÈô§„ÄÇ‰æãÂ¶ÇÔºåStringBufferÁ±ªÁöÑappend() ÊñπÊ≥ï‰ΩøÁî®‰∫Ü synchronized ÂÖ≥ÈîÆÂ≠óÔºåÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰ΩÜÊòØ‰ªÖÁî®Âú®Á∫øÁ®ãÂ∞ÅÈó≠ÁöÑÁéØÂ¢É‰∏≠ÔºåÂàôÈîÅ‰ºöÊµ™Ë¥πËµÑÊ∫êÔºåJITÂ∞±‰ºöÂØπÈîÅËøõË°åÊ∂àÈô§„ÄÇ</p>
<blockquote>
<p>ÈîÅÊ∂àÈô§ÁöÑ‰æùÊçÆÊòØÈÄÉÈÄ∏ÂàÜÊûêÁöÑÊï∞ÊçÆÊîØÊåÅ</p>
</blockquote>
<p>ÈÄÉÈÄ∏ÂàÜÊûêÔºöÂΩì‰∏Ä‰∏™ÂØπË±°ÁöÑÊåáÈíàË¢´Â§ö‰∏™ÊñπÊ≥ïÊàñÁ∫øÁ®ãÂºïÁî®Êó∂ÔºåÊàë‰ª¨Áß∞Ëøô‰∏™ÊåáÈíàÂèëÁîü‰∫ÜÈÄÉÈÄ∏Ôºå‰ºöÂèëÁîüÈÄÉÈÄ∏ÁöÑ‰∏â‰∏™Âú∫ÊôØÊòØÂÖ®Â±ÄÂèòÈáèËµãÂÄº„ÄÅÊñπÊ≥ïËøîÂõûÂÄº„ÄÅÂÆû‰æãÂºïÁî®‰º†ÈÄí„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> {  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> B b;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">globalVariablePointerEscape</span><span class="params">()</span> { <span class="comment">// ÁªôÂÖ®Â±ÄÂèòÈáèËµãÂÄºÔºåÂèëÁîüÈÄÉÈÄ∏  </span></span><br><span class="line">        b = <span class="keyword">new</span> <span class="title class_">B</span>();  </span><br><span class="line">    }  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> B <span class="title function_">methodPointerEscape</span><span class="params">()</span> { <span class="comment">// ÊñπÊ≥ïËøîÂõûÂÄºÔºåÂèëÁîüÈÄÉÈÄ∏  </span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">B</span>();  </span><br><span class="line">    }  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">instancePassPointerEscape</span><span class="params">()</span> {  </span><br><span class="line">        methodPointerEscape().printClassName(<span class="built_in">this</span>); <span class="comment">// ÂÆû‰æãÂºïÁî®‰º†ÈÄíÔºåÂèëÁîüÈÄÉÈÄ∏  </span></span><br><span class="line">    }  </span><br><span class="line">}  </span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> {  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printClassName</span><span class="params">(A a)</span> {  </span><br><span class="line">        System.out.println(a.class.getName());  </span><br><span class="line">    }  </span><br><span class="line">}  </span><br></pre></td></tr></tbody></table></figure>

<p>Â¶ÇÊûú‰∏çÂ≠òÂú®Á´û‰∫âÔºå‰∏∫‰ªÄ‰πàËøòÈúÄË¶ÅÂä†ÈîÅÂë¢ÔºüÊâÄ‰ª•ÈîÅÊ∂àÈô§ÂèØ‰ª•ËäÇÁúÅÊØ´Êó†ÊÑè‰πâÁöÑËØ∑Ê±ÇÈîÅÁöÑÊó∂Èó¥„ÄÇÂèòÈáèÊòØÂê¶ÈÄÉÈÄ∏ÔºåÂØπ‰∫éËôöÊãüÊú∫Êù•ËØ¥ÈúÄË¶Å‰ΩøÁî®Êï∞ÊçÆÊµÅÂàÜÊûêÊù•Á°ÆÂÆöÔºå‰ΩÜÊòØÂØπ‰∫éÁ®ãÂ∫èÂëòÊù•ËØ¥ËøôËøò‰∏çÊ∏ÖÊ•ö‰πàÔºü</p>
<p>Êï∞ÊçÆÊµÅÔºö‰æãÂ¶ÇÂú®ÊñπÊ≥ï‰∏≠ÔºåÂ∞ÜÂèòÈáèAÁöÑÂÄºËµãÂÄºÁªô‰∫ÜÂèòÈáèBÔºå‰ª£Á†ÅA=BÁöÑËøô‰∏™ËµãÂÄºËøáÁ®ãÁ≤óÁï•ÁöÑÁß∞‰∏∫Êï∞ÊçÆÊµÅ„ÄÇ</p>
<p>Âú®ÊòéÊòéÁü•ÈÅì‰∏çÂ≠òÂú®Êï∞ÊçÆÁ´û‰∫âÁöÑ‰ª£Á†ÅÂùóÂâçÂä†‰∏äÂêåÊ≠•ÂêóÔºü‰ΩÜÊòØÊúâÊó∂ÂÄôÁ®ãÂ∫èÂπ∂‰∏çÊòØÊàë‰ª¨ÊâÄÊÉ≥ÁöÑÈÇ£Ê†∑ÔºüËôΩÁÑ∂Ê≤°ÊúâÊòæÁ§∫‰ΩøÁî®ÈîÅÔºå‰ΩÜÊòØÂú®‰ΩøÁî®‰∏Ä‰∫õJDKÁöÑÂÜÖÁΩÆAPIÊó∂ÔºåÂ¶ÇStringBuffer„ÄÅVector„ÄÅHashTableÁ≠âÔºåËøô‰∏™Êó∂ÂÄô‰ºöÂ≠òÂú®ÈöêÂΩ¢ÁöÑÂä†ÈîÅÊìç‰Ωú„ÄÇÊØîÂ¶ÇStringBufferÁöÑappend()ÊñπÊ≥ïÔºåVectorÁöÑadd()ÊñπÊ≥ïÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">vectorTest</span><span class="params">()</span>{</span><br><span class="line">    Vector&lt;String&gt; vector = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;String&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; <span class="number">10</span> ; i++){</span><br><span class="line">        vector.add(i + <span class="string">""</span>);</span><br><span class="line">    }</span><br><span class="line">    System.out.println(vector);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®ËøêË°åËøôÊÆµ‰ª£Á†ÅÊó∂ÔºåJVMÂèØ‰ª•ÊòéÊòæÊ£ÄÊµãÂà∞ÂèòÈáèvectorÊ≤°ÊúâÈÄÉÈÄ∏Âá∫ÊñπÊ≥ïvectorTest()‰πãÂ§ñÔºåÊâÄ‰ª•JVMÂèØ‰ª•Â§ßËÉÜÂú∞Â∞ÜvectorÂÜÖÈÉ®ÁöÑÂä†ÈîÅÊìç‰ΩúÊ∂àÈô§„ÄÇ</p>
<h3 id="ÂÅèÂêëÈîÅ"><a href="#ÂÅèÂêëÈîÅ" class="headerlink" title="ÂÅèÂêëÈîÅ"></a>ÂÅèÂêëÈîÅ</h3><p>ÂÅèÂêëÈîÅÊòØJDK6‰∏≠ÁöÑÈáçË¶ÅÂºïËøõÔºåÂõ†‰∏∫HotSpot‰ΩúËÄÖÁªèËøáÁ†îÁ©∂ÂÆûË∑µÂèëÁé∞ÔºåÂú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÈîÅ‰∏ç‰ªÖ‰∏çÂ≠òÂú®Â§öÁ∫øÁ®ãÁ´û‰∫âÔºåËÄå‰∏îÊÄªÊòØÁî±Âêå‰∏ÄÁ∫øÁ®ãÂ§öÊ¨°Ëé∑ÂæóÔºå‰∏∫‰∫ÜËÆ©Á∫øÁ®ãËé∑ÂæóÈîÅÁöÑ‰ª£‰ª∑Êõ¥‰ΩéÔºåÂºïËøõ‰∫ÜÂÅèÂêëÈîÅ„ÄÇ</p>
<p>ÂÅèÂêëÈîÅÊòØÂú®ÂçïÁ∫øÁ®ãÊâßË°å‰ª£Á†ÅÂùóÊó∂‰ΩøÁî®ÁöÑÊú∫Âà∂ÔºåÂ¶ÇÊûúÂú®Â§öÁ∫øÁ®ãÂπ∂ÂèëÁöÑÁéØÂ¢É‰∏ãÔºàÂç≥Á∫øÁ®ãAÂ∞öÊú™ÊâßË°åÂÆåÂêåÊ≠•‰ª£Á†ÅÂùóÔºåÁ∫øÁ®ãBÂèëËµ∑‰∫ÜÁî≥ËØ∑ÈîÅÁöÑÁî≥ËØ∑ÔºâÔºåÂàô‰∏ÄÂÆö‰ºöËΩ¨Âåñ‰∏∫ËΩªÈáèÁ∫ßÈîÅÊàñËÄÖÈáçÈáèÁ∫ßÈîÅ„ÄÇ</p>
<p>Âú®JDK5‰∏≠ÂÅèÂêëÈîÅÈªòËÆ§ÊòØÂÖ≥Èó≠ÁöÑÔºåËÄåÂà∞‰∫ÜJDK6‰∏≠ÂÅèÂêëÈîÅÂ∑≤ÁªèÈªòËÆ§ÂºÄÂêØ„ÄÇÂ¶ÇÊûúÂπ∂ÂèëÊï∞ËæÉÂ§ßÂêåÊó∂ÂêåÊ≠•‰ª£Á†ÅÂùóÊâßË°åÊó∂Èó¥ËæÉÈïøÔºåÂàôË¢´Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂ËÆøÈóÆÁöÑÊ¶ÇÁéáÂ∞±ÂæàÂ§ßÔºåÂ∞±ÂèØ‰ª•‰ΩøÁî®ÂèÇÊï∞-XX:-UseBiasedLockingÊù•Á¶ÅÊ≠¢ÂÅèÂêëÈîÅ(‰ΩÜËøôÊòØ‰∏™JVMÂèÇÊï∞Ôºå‰∏çËÉΩÈíàÂØπÊüê‰∏™ÂØπË±°ÈîÅÊù•ÂçïÁã¨ËÆæÁΩÆ)„ÄÇ</p>
<p>ÂºïÂÖ•ÂÅèÂêëÈîÅ‰∏ªË¶ÅÁõÆÁöÑÊòØÔºö‰∏∫‰∫ÜÂú®Ê≤°ÊúâÂ§öÁ∫øÁ®ãÁ´û‰∫âÁöÑÊÉÖÂÜµ‰∏ãÂ∞ΩÈáèÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑËΩªÈáèÁ∫ßÈîÅÊâßË°åË∑ØÂæÑ„ÄÇÂõ†‰∏∫ËΩªÈáèÁ∫ßÈîÅÁöÑÂä†ÈîÅËß£ÈîÅÊìç‰ΩúÊòØÈúÄË¶Å‰æùËµñÂ§öÊ¨°CASÂéüÂ≠êÊåá‰ª§ÁöÑÔºåËÄåÂÅèÂêëÈîÅÂè™ÈúÄË¶ÅÂú®ÁΩÆÊç¢ThreadIDÁöÑÊó∂ÂÄô‰æùËµñ‰∏ÄÊ¨°CASÂéüÂ≠êÊåá‰ª§ÔºàÁî±‰∫é‰∏ÄÊó¶Âá∫Áé∞Â§öÁ∫øÁ®ãÁ´û‰∫âÁöÑÊÉÖÂÜµÂ∞±ÂøÖÈ°ªÊí§ÈîÄÂÅèÂêëÈîÅÔºåÊâÄ‰ª•ÂÅèÂêëÈîÅÁöÑÊí§ÈîÄÊìç‰ΩúÁöÑÊÄßËÉΩÊçüËÄó‰πüÂøÖÈ°ªÂ∞è‰∫éËäÇÁúÅ‰∏ãÊù•ÁöÑCASÂéüÂ≠êÊåá‰ª§ÁöÑÊÄßËÉΩÊ∂àËÄóÔºâ„ÄÇ</p>
<blockquote>
<p>ËΩªÈáèÁ∫ßÈîÅÊòØ‰∏∫‰∫ÜÂú®Á∫øÁ®ã‰∫§ÊõøÊâßË°åÂêåÊ≠•ÂùóÊó∂ÊèêÈ´òÊÄßËÉΩÔºåËÄåÂÅèÂêëÈîÅÂàôÊòØÂú®Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÊâßË°åÂêåÊ≠•ÂùóÊó∂Ëøõ‰∏ÄÊ≠•ÊèêÈ´òÊÄßËÉΩ„ÄÇ</p>
</blockquote>
<p>ÈÇ£‰πàÂÅèÂêëÈîÅÊòØÂ¶Ç‰ΩïÊù•ÂáèÂ∞ë‰∏çÂøÖË¶ÅÁöÑCASÊìç‰ΩúÂë¢ÔºüÈ¶ñÂÖàÊàë‰ª¨Áúã‰∏ãÊó†Á´û‰∫â‰∏ãÈîÅÂ≠òÂú®‰ªÄ‰πàÈóÆÈ¢òÔºö</p>
<blockquote>
<p><strong>Áé∞Âú®Âá†‰πéÊâÄÊúâÁöÑÈîÅÈÉΩÊòØÂèØÈáçÂÖ•ÁöÑÔºåÂç≥Â∑≤ÁªèËé∑ÂæóÈîÅÁöÑÁ∫øÁ®ãÂèØ‰ª•Â§öÊ¨°ÈîÅ‰Ωè/Ëß£ÈîÅÁõëËßÜÂØπË±°ÔºåÊåâÁÖß‰πãÂâçÁöÑHotSpotËÆæËÆ°ÔºåÊØèÊ¨°Âä†ÈîÅ/Ëß£ÈîÅÈÉΩ‰ºöÊ∂âÂèäÂà∞‰∏Ä‰∫õCASÊìç‰ΩúÔºàÊØîÂ¶ÇÂØπÁ≠âÂæÖÈòüÂàóÁöÑCASÊìç‰ΩúÔºâÔºåCASÊìç‰Ωú‰ºöÂª∂ËøüÊú¨Âú∞Ë∞ÉÁî®ÔºåÂõ†Ê≠§ÂÅèÂêëÈîÅÁöÑÊÉ≥Ê≥ïÊòØ ‰∏ÄÊó¶Á∫øÁ®ãÁ¨¨‰∏ÄÊ¨°Ëé∑Âæó‰∫ÜÁõëËßÜÂØπË±°Ôºå‰πãÂêéËÆ©ÁõëËßÜÂØπË±°‚ÄúÂÅèÂêë‚ÄùËøô‰∏™Á∫øÁ®ãÔºå‰πãÂêéÁöÑÂ§öÊ¨°Ë∞ÉÁî®ÂàôÂèØ‰ª•ÈÅøÂÖçCASÊìç‰ΩúÔºåËØ¥ÁôΩ‰∫ÜÂ∞±ÊòØÁΩÆ‰∏™ÂèòÈáèÔºåÂ¶ÇÊûúÂèëÁé∞‰∏∫trueÂàôÊó†ÈúÄÂÜçËµ∞ÂêÑÁßçÂä†ÈîÅ/Ëß£ÈîÅÊµÅÁ®ã„ÄÇ</strong></p>
</blockquote>
<p>CAS‰∏∫‰ªÄ‰πà‰ºöÂºïÂÖ•Êú¨Âú∞Âª∂ËøüÔºüËøôË¶Å‰ªéSMPÔºàÂØπÁß∞Â§öÂ§ÑÁêÜÂô®ÔºâÊû∂ÊûÑËØ¥Ëµ∑Ôºå‰∏ãÂõæÂ§ßÊ¶ÇË°®Êòé‰∫ÜSMPÁöÑÁªìÊûÑÔºö</p>
<p><img src="/p/8360cd4/2062729-0f9f45797f3e732a.png" alt="img"></p>
<p>SMPÔºàÂØπÁß∞Â§öÂ§ÑÁêÜÂô®ÔºâÊû∂ÊûÑ</p>
<blockquote>
<p>ÂÖ∂ÊÑèÊÄùÊòØ ÊâÄÊúâÁöÑCPU‰ºöÂÖ±‰∫´‰∏ÄÊù°Á≥ªÁªüÊÄªÁ∫øÔºàBUSÔºâÔºåÈù†Ê≠§ÊÄªÁ∫øËøûÊé•‰∏ªÂ≠ò„ÄÇÊØè‰∏™Ê†∏ÈÉΩÊúâËá™Â∑±ÁöÑ‰∏ÄÁ∫ßÁºìÂ≠òÔºåÂêÑÊ†∏Áõ∏ÂØπ‰∫éBUSÂØπÁß∞ÂàÜÂ∏ÉÔºåÂõ†Ê≠§ËøôÁßçÁªìÊûÑÁß∞‰∏∫‚ÄúÂØπÁß∞Â§öÂ§ÑÁêÜÂô®‚Äù„ÄÇ</p>
</blockquote>
<p>ËÄåCASÁöÑÂÖ®Áß∞‰∏∫Compare-And-SwapÔºåÊòØ‰∏ÄÊù°CPUÁöÑÂéüÂ≠êÊåá‰ª§ÔºåÂÖ∂‰ΩúÁî®ÊòØËÆ©CPUÊØîËæÉÂêéÂéüÂ≠êÂú∞Êõ¥Êñ∞Êüê‰∏™‰ΩçÁΩÆÁöÑÂÄºÔºåÁªèËøáË∞ÉÊü•ÂèëÁé∞ÔºåÂÖ∂ÂÆûÁé∞ÊñπÂºèÊòØÂü∫‰∫éÁ°¨‰ª∂Âπ≥Âè∞ÁöÑÊ±áÁºñÊåá‰ª§ÔºåÂ∞±ÊòØËØ¥CASÊòØÈù†Á°¨‰ª∂ÂÆûÁé∞ÁöÑÔºåJVMÂè™ÊòØÂ∞ÅË£Ö‰∫ÜÊ±áÁºñË∞ÉÁî®ÔºåÈÇ£‰∫õAtomicIntegerÁ±ª‰æøÊòØ‰ΩøÁî®‰∫ÜËøô‰∫õÂ∞ÅË£ÖÂêéÁöÑÊé•Âè£„ÄÇ</p>
<p>‰æãÂ¶ÇÔºöCore1ÂíåCore2ÂèØËÉΩ‰ºöÂêåÊó∂Êää‰∏ªÂ≠ò‰∏≠Êüê‰∏™‰ΩçÁΩÆÁöÑÂÄºLoadÂà∞Ëá™Â∑±ÁöÑL1 Cache‰∏≠ÔºåÂΩìCore1Âú®Ëá™Â∑±ÁöÑL1 Cache‰∏≠‰øÆÊîπËøô‰∏™‰ΩçÁΩÆÁöÑÂÄºÊó∂Ôºå‰ºöÈÄöËøáÊÄªÁ∫øÔºå‰ΩøCore2‰∏≠L1 CacheÂØπÂ∫îÁöÑÂÄº‚ÄúÂ§±Êïà‚ÄùÔºåËÄåCore2‰∏ÄÊó¶ÂèëÁé∞Ëá™Â∑±L1 Cache‰∏≠ÁöÑÂÄºÂ§±ÊïàÔºàÁß∞‰∏∫CacheÂëΩ‰∏≠Áº∫Â§±ÔºâÂàô‰ºöÈÄöËøáÊÄªÁ∫ø‰ªéÂÜÖÂ≠ò‰∏≠Âä†ËΩΩËØ•Âú∞ÂùÄÊúÄÊñ∞ÁöÑÂÄºÔºåÂ§ßÂÆ∂ÈÄöËøáÊÄªÁ∫øÁöÑÊù•ÂõûÈÄö‰ø°Áß∞‰∏∫‚ÄúCache‰∏ÄËá¥ÊÄßÊµÅÈáè‚ÄùÔºåÂõ†‰∏∫ÊÄªÁ∫øË¢´ËÆæËÆ°‰∏∫Âõ∫ÂÆöÁöÑ‚ÄúÈÄö‰ø°ËÉΩÂäõ‚ÄùÔºåÂ¶ÇÊûúCache‰∏ÄËá¥ÊÄßÊµÅÈáèËøáÂ§ßÔºåÊÄªÁ∫øÂ∞ÜÊàê‰∏∫Áì∂È¢à„ÄÇËÄåÂΩìCore1ÂíåCore2‰∏≠ÁöÑÂÄºÂÜçÊ¨°‰∏ÄËá¥Êó∂ÔºåÁß∞‰∏∫‚ÄúCache‰∏ÄËá¥ÊÄß‚ÄùÔºå‰ªéËøô‰∏™Â±ÇÈù¢Êù•ËØ¥ÔºåÈîÅËÆæËÆ°ÁöÑÁªàÊûÅÁõÆÊ†á‰æøÊòØÂáèÂ∞ëCache‰∏ÄËá¥ÊÄßÊµÅÈáè„ÄÇ</p>
<p>ËÄåCASÊÅ∞Â•Ω‰ºöÂØºËá¥Cache‰∏ÄËá¥ÊÄßÊµÅÈáèÔºåÂ¶ÇÊûúÊúâÂæàÂ§öÁ∫øÁ®ãÈÉΩÂÖ±‰∫´Âêå‰∏Ä‰∏™ÂØπË±°ÔºåÂΩìÊüê‰∏™Core CASÊàêÂäüÊó∂ÂøÖÁÑ∂‰ºöÂºïËµ∑ÊÄªÁ∫øÈ£éÊö¥ÔºåËøôÂ∞±ÊòØÊâÄË∞ìÁöÑÊú¨Âú∞Âª∂ËøüÔºåÊú¨Ë¥®‰∏äÂÅèÂêëÈîÅÂ∞±ÊòØ‰∏∫‰∫ÜÊ∂àÈô§CASÔºåÈôç‰ΩéCache‰∏ÄËá¥ÊÄßÊµÅÈáè„ÄÇ</p>
<p><em>Cache‰∏ÄËá¥ÊÄßÔºö</em></p>
<blockquote>
<p>‰∏äÈù¢ÊèêÂà∞Cache‰∏ÄËá¥ÊÄßÔºåÂÖ∂ÂÆûÊòØÊúâÂçèËÆÆÊîØÊåÅÁöÑÔºåÁé∞Âú®ÈÄöÁî®ÁöÑÂçèËÆÆÊòØMESIÔºàÊúÄÊó©Áî±IntelÂºÄÂßãÊîØÊåÅÔºâÔºåÂÖ∑‰ΩìÂèÇËÄÉÔºö<a href="http://en.wikipedia.org/wiki/MESI_protocol%E3%80%82">http://en.wikipedia.org/wiki/MESI_protocol„ÄÇ</a></p>
</blockquote>
<p><em>Cache‰∏ÄËá¥ÊÄßÊµÅÈáèÁöÑ‰æãÂ§ñÊÉÖÂÜµÔºö</em></p>
<blockquote>
<p>ÂÖ∂ÂÆû‰πü‰∏çÊòØÊâÄÊúâÁöÑCASÈÉΩ‰ºöÂØºËá¥ÊÄªÁ∫øÈ£éÊö¥ÔºåËøôË∑üCache‰∏ÄËá¥ÊÄßÂçèËÆÆÊúâÂÖ≥ÔºåÂÖ∑‰ΩìÂèÇËÄÉÔºö<a href="http://blogs.oracle.com/dave/entry/biased_locking_in_hotspot">http://blogs.oracle.com/dave/entry/biased_locking_in_hotspot</a></p>
</blockquote>
<p><em>NUMA(Non Uniform Memory Access AchitectureÔºâÊû∂ÊûÑÔºö</em></p>
<blockquote>
<p>‰∏éSMPÂØπÂ∫îËøòÊúâÈùûÂØπÁß∞Â§öÂ§ÑÁêÜÂô®Êû∂ÊûÑÔºåÁé∞Âú®‰∏ªË¶ÅÂ∫îÁî®Âú®‰∏Ä‰∫õÈ´òÁ´ØÂ§ÑÁêÜÂô®‰∏äÔºå‰∏ªË¶ÅÁâπÁÇπÊòØÊ≤°ÊúâÊÄªÁ∫øÔºåÊ≤°ÊúâÂÖ¨Áî®‰∏ªÂ≠òÔºåÊØè‰∏™CoreÊúâËá™Â∑±ÁöÑÂÜÖÂ≠òÔºåÈíàÂØπËøôÁßçÁªìÊûÑÊ≠§Â§Ñ‰∏çÂÅöËÆ®ËÆ∫„ÄÇ</p>
</blockquote>
<p>ÊâÄ‰ª•ÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆÂêåÊ≠•ÂùóÂπ∂Ëé∑ÂèñÈîÅÊó∂Ôºå‰ºöÂú®ÂØπË±°Â§¥ÂíåÊ†àÂ∏ß‰∏≠ÁöÑÈîÅËÆ∞ÂΩïÈáåÂ≠òÂÇ®ÈîÅÂÅèÂêëÁöÑÁ∫øÁ®ãIDÔºå‰ª•ÂêéËØ•Á∫øÁ®ãËøõÂÖ•ÂíåÈÄÄÂá∫ÂêåÊ≠•ÂùóÊó∂‰∏çÈúÄË¶ÅËä±Ë¥πCASÊìç‰ΩúÊù•‰∫âÂ§∫ÈîÅËµÑÊ∫êÔºåÂè™ÈúÄË¶ÅÊ£ÄÊü•ÊòØÂê¶‰∏∫ÂÅèÂêëÈîÅ„ÄÅÈîÅÊ†áËØÜ‰∏∫‰ª•ÂèäThreadIDÂç≥ÂèØÔºåÂ§ÑÁêÜÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p>
<blockquote>
<ol>
<li>Ê£ÄÊµãMark WordÊòØÂê¶‰∏∫ÂèØÂÅèÂêëÁä∂ÊÄÅÔºåÂç≥ÊòØÂê¶‰∏∫ÂÅèÂêëÈîÅ1ÔºåÈîÅÊ†áËØÜ‰Ωç‰∏∫01Ôºõ</li>
<li>Ëã•‰∏∫ÂèØÂÅèÂêëÁä∂ÊÄÅÔºåÂàôÊµãËØïÁ∫øÁ®ãIDÊòØÂê¶‰∏∫ÂΩìÂâçÁ∫øÁ®ãIDÔºåÂ¶ÇÊûúÊòØÔºåÂàôÊâßË°åÊ≠•È™§Ôºà5ÔºâÔºåÂê¶ÂàôÊâßË°åÊ≠•È™§Ôºà3ÔºâÔºõ</li>
<li>Â¶ÇÊûúÊµãËØïÁ∫øÁ®ãID‰∏ç‰∏∫ÂΩìÂâçÁ∫øÁ®ãIDÔºåÂàôÈÄöËøáCASÊìç‰ΩúÁ´û‰∫âÈîÅÔºåÁ´û‰∫âÊàêÂäüÔºåÂàôÂ∞ÜMark WordÁöÑÁ∫øÁ®ãIDÊõøÊç¢‰∏∫ÂΩìÂâçÁ∫øÁ®ãIDÔºåÂê¶ÂàôÊâßË°åÁ∫øÁ®ãÔºà4ÔºâÔºõ</li>
<li>ÈÄöËøáCASÁ´û‰∫âÈîÅÂ§±Ë¥•ÔºåËØÅÊòéÂΩìÂâçÂ≠òÂú®Â§öÁ∫øÁ®ãÁ´û‰∫âÊÉÖÂÜµÔºåÂΩìÂà∞ËææÂÖ®Â±ÄÂÆâÂÖ®ÁÇπÔºåËé∑ÂæóÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãË¢´ÊåÇËµ∑ÔºåÂÅèÂêëÈîÅÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅÔºåÁÑ∂ÂêéË¢´ÈòªÂ°ûÂú®ÂÆâÂÖ®ÁÇπÁöÑÁ∫øÁ®ãÁªßÁª≠ÂæÄ‰∏ãÊâßË°åÂêåÊ≠•‰ª£Á†ÅÂùóÔºõ</li>
<li>ÊâßË°åÂêåÊ≠•‰ª£Á†ÅÂùóÔºõ</li>
</ol>
</blockquote>
<p>ÂÅèÂêëÈîÅÁöÑÈáäÊîæÈááÁî®‰∫Ü ‰∏ÄÁßçÂè™ÊúâÁ´û‰∫âÊâç‰ºöÈáäÊîæÈîÅÁöÑÊú∫Âà∂ÔºåÁ∫øÁ®ãÊòØ‰∏ç‰ºö‰∏ªÂä®ÂéªÈáäÊîæÂÅèÂêëÈîÅÔºåÈúÄË¶ÅÁ≠âÂæÖÂÖ∂‰ªñÁ∫øÁ®ãÊù•Á´û‰∫â„ÄÇÂÅèÂêëÈîÅÁöÑÊí§ÈîÄÈúÄË¶Å Á≠âÂæÖÂÖ®Â±ÄÂÆâÂÖ®ÁÇπÔºàËøô‰∏™Êó∂Èó¥ÁÇπÊòØ‰∏äÊ≤°ÊúâÊ≠£Âú®ÊâßË°åÁöÑ‰ª£Á†ÅÔºâ„ÄÇÂÖ∂Ê≠•È™§Â¶Ç‰∏ãÔºö</p>
<blockquote>
<ol>
<li>ÊöÇÂÅúÊã•ÊúâÂÅèÂêëÈîÅÁöÑÁ∫øÁ®ãÔºõ</li>
<li>Âà§Êñ≠ÈîÅÂØπË±°ÊòØÂê¶ËøòÂ§Ñ‰∫éË¢´ÈîÅÂÆöÁä∂ÊÄÅÔºåÂê¶ÔºåÂàôÊÅ¢Â§çÂà∞Êó†ÈîÅÁä∂ÊÄÅÔºà01ÔºâÔºå‰ª•ÂÖÅËÆ∏ÂÖ∂‰ΩôÁ∫øÁ®ãÁ´û‰∫â„ÄÇÊòØÔºåÂàôÊåÇËµ∑ÊåÅÊúâÈîÅÁöÑÂΩìÂâçÁ∫øÁ®ãÔºåÂπ∂Â∞ÜÊåáÂêëÂΩìÂâçÁ∫øÁ®ãÁöÑÈîÅËÆ∞ÂΩïÂú∞ÂùÄÁöÑÊåáÈíàÊîæÂÖ•ÂØπË±°Â§¥Mark WordÔºåÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅÁä∂ÊÄÅÔºà00ÔºâÔºåÁÑ∂ÂêéÊÅ¢Â§çÊåÅÊúâÈîÅÁöÑÂΩìÂâçÁ∫øÁ®ãÔºåËøõÂÖ•ËΩªÈáèÁ∫ßÈîÅÁöÑÁ´û‰∫âÊ®°ÂºèÔºõ</li>
</ol>
<p>Ê≥®ÊÑèÔºöÊ≠§Â§ÑÂ∞Ü ÂΩìÂâçÁ∫øÁ®ãÊåÇËµ∑ÂÜçÊÅ¢Â§çÁöÑËøáÁ®ã‰∏≠Âπ∂Ê≤°ÊúâÂèëÁîüÈîÅÁöÑËΩ¨ÁßªÔºå‰ªçÁÑ∂Âú®ÂΩìÂâçÁ∫øÁ®ãÊâã‰∏≠ÔºåÂè™ÊòØÁ©øÊèí‰∫Ü‰∏™ ‚ÄúÂ∞ÜÂØπË±°Â§¥‰∏≠ÁöÑÁ∫øÁ®ãIDÂèòÊõ¥‰∏∫ÊåáÂêëÈîÅËÆ∞ÂΩïÂú∞ÂùÄÁöÑÊåáÈíà‚Äù Ëøô‰πà‰∏™‰∫ã„ÄÇ</p>
</blockquote>
<p>ÂÅèÂêëÈîÅÁöÑËé∑ÂèñÂíåÈáäÊîæËøáÁ®ãÔºö</p>
<p><img src="/p/8360cd4/2062729-b4873ca2e39c1db7.png" alt="img"></p>
<h3 id="ËΩªÈáèÁ∫ßÈîÅ"><a href="#ËΩªÈáèÁ∫ßÈîÅ" class="headerlink" title="ËΩªÈáèÁ∫ßÈîÅ"></a>ËΩªÈáèÁ∫ßÈîÅ</h3><p>ÂºïÂÖ•ËΩªÈáèÁ∫ßÈîÅÁöÑ‰∏ªË¶ÅÁõÆÁöÑÊòØ Âú®Ê≤°ÊúâÂ§öÁ∫øÁ®ãÁ´û‰∫âÁöÑÂâçÊèê‰∏ãÔºåÂáèÂ∞ë‰º†ÁªüÁöÑÈáçÈáèÁ∫ßÈîÅ‰ΩøÁî®Êìç‰ΩúÁ≥ªÁªü‰∫íÊñ•Èáè‰∫ßÁîüÁöÑÊÄßËÉΩÊ∂àËÄó„ÄÇÂΩìÂÖ≥Èó≠ÂÅèÂêëÈîÅÂäüËÉΩÊàñËÄÖÂ§ö‰∏™Á∫øÁ®ãÁ´û‰∫âÂÅèÂêëÈîÅÂØºËá¥ÂÅèÂêëÈîÅÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅÔºåÂàô‰ºöÂ∞ùËØïËé∑ÂèñËΩªÈáèÁ∫ßÈîÅÔºåÂÖ∂Ê≠•È™§Â¶Ç‰∏ãÔºö</p>
<ol>
<li>Âú®Á∫øÁ®ãËøõÂÖ•ÂêåÊ≠•ÂùóÊó∂ÔºåÂ¶ÇÊûúÂêåÊ≠•ÂØπË±°ÈîÅÁä∂ÊÄÅ‰∏∫Êó†ÈîÅÁä∂ÊÄÅÔºàÈîÅÊ†áÂøó‰Ωç‰∏∫‚Äú01‚ÄùÁä∂ÊÄÅÔºåÊòØÂê¶‰∏∫ÂÅèÂêëÈîÅ‰∏∫‚Äú0‚ÄùÔºâÔºåËôöÊãüÊú∫È¶ñÂÖàÂ∞ÜÂú®ÂΩìÂâçÁ∫øÁ®ãÁöÑÊ†àÂ∏ß‰∏≠Âª∫Á´ã‰∏Ä‰∏™Âêç‰∏∫ÈîÅËÆ∞ÂΩïÔºàLock RecordÔºâÁöÑÁ©∫Èó¥ÔºåÁî®‰∫éÂ≠òÂÇ®ÈîÅÂØπË±°ÁõÆÂâçÁöÑMark WordÁöÑÊã∑Ë¥ùÔºåÂÆòÊñπÁß∞‰πã‰∏∫ Displaced Mark Word„ÄÇÊ≠§Êó∂Á∫øÁ®ãÂ†ÜÊ†à‰∏éÂØπË±°Â§¥ÁöÑÁä∂ÊÄÅÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</li>
</ol>
<p><img src="/p/8360cd4/2062729-7e332020d9f252db.png" alt="img"></p>
<ol>
<li>ËΩªÈáèÁ∫ßÈîÅCASÊìç‰Ωú‰πãÂâçÁ∫øÁ®ãÂ†ÜÊ†à‰∏éÂØπË±°ÁöÑÁä∂ÊÄÅ</li>
<li>Êã∑Ë¥ùÂØπË±°Â§¥‰∏≠ÁöÑMark WordÂ§çÂà∂Âà∞ÈîÅËÆ∞ÂΩïÔºàLock RecordÔºâ‰∏≠Ôºõ</li>
<li>Êã∑Ë¥ùÊàêÂäüÂêéÔºåËôöÊãüÊú∫Â∞Ü‰ΩøÁî®CASÊìç‰ΩúÂ∞ùËØïÂ∞ÜÂØπË±°Mark Word‰∏≠ÁöÑLock WordÊõ¥Êñ∞‰∏∫ÊåáÂêëÂΩìÂâçÁ∫øÁ®ãLock RecordÁöÑÊåáÈíàÔºåÂπ∂Â∞ÜLock recordÈáåÁöÑownerÊåáÈíàÊåáÂêëobject mark word„ÄÇÂ¶ÇÊûúÊõ¥Êñ∞ÊàêÂäüÔºåÂàôÊâßË°åÊ≠•È™§Ôºà4ÔºâÔºåÂê¶ÂàôÊâßË°åÊ≠•È™§Ôºà5ÔºâÔºõ</li>
<li>Â¶ÇÊûúËøô‰∏™Êõ¥Êñ∞Âä®‰ΩúÊàêÂäü‰∫ÜÔºåÈÇ£‰πàÂΩìÂâçÁ∫øÁ®ãÂ∞±Êã•Êúâ‰∫ÜËØ•ÂØπË±°ÁöÑÈîÅÔºåÂπ∂‰∏îÂØπË±°Mark WordÁöÑÈîÅÊ†áÂøó‰ΩçËÆæÁΩÆ‰∏∫‚Äú00‚ÄùÔºåÂç≥Ë°®Á§∫Ê≠§ÂØπË±°Â§Ñ‰∫éËΩªÈáèÁ∫ßÈîÅÂÆöÁä∂ÊÄÅÔºåÊ≠§Êó∂Á∫øÁ®ãÂ†ÜÊ†à‰∏éÂØπË±°Â§¥ÁöÑÁä∂ÊÄÅÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</li>
</ol>
<p><img src="/p/8360cd4/2062729-5e935668eddb8fcd.png" alt="img"></p>
<ol>
<li>ËΩªÈáèÁ∫ßÈîÅCASÊìç‰Ωú‰πãÂêéÁ∫øÁ®ãÂ†ÜÊ†à‰∏éÂØπË±°ÁöÑÁä∂ÊÄÅ</li>
<li>Â¶ÇÊûúËøô‰∏™Êõ¥Êñ∞Êìç‰ΩúÂ§±Ë¥•‰∫ÜÔºåËôöÊãüÊú∫È¶ñÂÖà‰ºöÊ£ÄÊü•ÂØπË±°Mark Word‰∏≠ÁöÑLock WordÊòØÂê¶ÊåáÂêëÂΩìÂâçÁ∫øÁ®ãÁöÑÊ†àÂ∏ßÔºåÂ¶ÇÊûúÊòØÔºåÂ∞±ËØ¥ÊòéÂΩìÂâçÁ∫øÁ®ãÂ∑≤ÁªèÊã•Êúâ‰∫ÜËøô‰∏™ÂØπË±°ÁöÑÈîÅÔºåÈÇ£Â∞±ÂèØ‰ª•Áõ¥Êé•ËøõÂÖ•ÂêåÊ≠•ÂùóÁªßÁª≠ÊâßË°å„ÄÇÂê¶ÂàôËØ¥ÊòéÂ§ö‰∏™Á∫øÁ®ãÁ´û‰∫âÈîÅÔºåËøõÂÖ•Ëá™ÊóãÊâßË°åÔºà3ÔºâÔºåËã•Ëá™ÊóãÁªìÊùüÊó∂‰ªçÊú™Ëé∑ÂæóÈîÅÔºåËΩªÈáèÁ∫ßÈîÅÂ∞±Ë¶ÅËÜ®ËÉÄ‰∏∫ÈáçÈáèÁ∫ßÈîÅÔºåÈîÅÊ†áÂøóÁöÑÁä∂ÊÄÅÂÄºÂèò‰∏∫‚Äú10‚ÄùÔºåMark Word‰∏≠Â≠òÂÇ®ÁöÑÂ∞±ÊòØÊåáÂêëÈáçÈáèÁ∫ßÈîÅÔºà‰∫íÊñ•ÈáèÔºâÁöÑÊåáÈíàÔºåÂΩìÂâçÁ∫øÁ®ã‰ª•ÂèäÂêéÈù¢Á≠âÂæÖÈîÅÁöÑÁ∫øÁ®ã‰πüË¶ÅËøõÂÖ•ÈòªÂ°ûÁä∂ÊÄÅ„ÄÇ</li>
</ol>
<p>ËΩªÈáèÁ∫ßÈîÅÁöÑÈáäÊîæ‰πüÊòØÈÄöËøáCASÊìç‰ΩúÊù•ËøõË°åÁöÑÔºå‰∏ªË¶ÅÊ≠•È™§Â¶Ç‰∏ãÔºö</p>
<blockquote>
<ol>
<li>ÈÄöËøáCASÊìç‰ΩúÂ∞ùËØïÊääÁ∫øÁ®ã‰∏≠Â§çÂà∂ÁöÑDisplaced Mark WordÂØπË±°ÊõøÊç¢ÂΩìÂâçÁöÑMark WordÔºõ</li>
<li>Â¶ÇÊûúÊõøÊç¢ÊàêÂäüÔºåÊï¥‰∏™ÂêåÊ≠•ËøáÁ®ãÂ∞±ÂÆåÊàê‰∫ÜÔºåÊÅ¢Â§çÂà∞Êó†ÈîÅÁä∂ÊÄÅÔºà01ÔºâÔºõ</li>
<li>Â¶ÇÊûúÊõøÊç¢Â§±Ë¥•ÔºåËØ¥ÊòéÊúâÂÖ∂‰ªñÁ∫øÁ®ãÂ∞ùËØïËøáËé∑ÂèñËØ•ÈîÅÔºàÊ≠§Êó∂ÈîÅÂ∑≤ËÜ®ËÉÄÔºâÔºåÈÇ£Â∞±Ë¶ÅÂú®ÈáäÊîæÈîÅÁöÑÂêåÊó∂ÔºåÂî§ÈÜíË¢´ÊåÇËµ∑ÁöÑÁ∫øÁ®ãÔºõ</li>
</ol>
</blockquote>
<p>ÂØπ‰∫éËΩªÈáèÁ∫ßÈîÅÔºåÂÖ∂ÊÄßËÉΩÊèêÂçáÁöÑ‰æùÊçÆÊòØ ‚ÄúÂØπ‰∫éÁªùÂ§ßÈÉ®ÂàÜÁöÑÈîÅÔºåÂú®Êï¥‰∏™ÁîüÂëΩÂë®ÊúüÂÜÖÈÉΩÊòØ‰∏ç‰ºöÂ≠òÂú®Á´û‰∫âÁöÑ‚ÄùÔºåÂ¶ÇÊûúÊâìÁ†¥Ëøô‰∏™‰æùÊçÆÂàôÈô§‰∫Ü‰∫íÊñ•ÁöÑÂºÄÈîÄÂ§ñÔºåËøòÊúâÈ¢ùÂ§ñÁöÑCASÊìç‰ΩúÔºåÂõ†Ê≠§Âú®ÊúâÂ§öÁ∫øÁ®ãÁ´û‰∫âÁöÑÊÉÖÂÜµ‰∏ãÔºåËΩªÈáèÁ∫ßÈîÅÊØîÈáçÈáèÁ∫ßÈîÅÊõ¥ÊÖ¢„ÄÇ</p>
<p><img src="/p/8360cd4/2062729-b952465daf77e896.png" alt="img"></p>
<p>ËΩªÈáèÁ∫ßÈîÅÁöÑËé∑ÂèñÂíåÈáäÊîæËøáÁ®ã</p>
<ol>
<li><p>‰∏∫‰ªÄ‰πàÂçáÁ∫ß‰∏∫ËΩªÈáèÈîÅÊó∂Ë¶ÅÊääÂØπË±°Â§¥ÈáåÁöÑMark WordÂ§çÂà∂Âà∞Á∫øÁ®ãÊ†àÁöÑÈîÅËÆ∞ÂΩï‰∏≠Âë¢Ôºü</p>
<blockquote>
<p>Âõ†‰∏∫Âú®Áî≥ËØ∑ÂØπË±°ÈîÅÊó∂ ÈúÄË¶Å‰ª•ËØ•ÂÄº‰Ωú‰∏∫CASÁöÑÊØîËæÉÊù°‰ª∂ÔºåÂêåÊó∂Âú®ÂçáÁ∫ßÂà∞ÈáçÈáèÁ∫ßÈîÅÁöÑÊó∂ÂÄôÔºåËÉΩÈÄöËøáËøô‰∏™ÊØîËæÉÂà§ÂÆöÊòØÂê¶Âú®ÊåÅÊúâÈîÅÁöÑËøáÁ®ã‰∏≠Ê≠§ÈîÅË¢´ÂÖ∂‰ªñÁ∫øÁ®ãÁî≥ËØ∑ËøáÔºåÂ¶ÇÊûúË¢´ÂÖ∂‰ªñÁ∫øÁ®ãÁî≥ËØ∑‰∫ÜÔºåÂàôÂú®ÈáäÊîæÈîÅÁöÑÊó∂ÂÄôË¶ÅÂî§ÈÜíË¢´ÊåÇËµ∑ÁöÑÁ∫øÁ®ã„ÄÇ</p>
</blockquote>
</li>
<li><p>‰∏∫‰ªÄ‰πà‰ºöÂ∞ùËØïCAS‰∏çÊàêÂäü‰ª•Âèä‰ªÄ‰πàÊÉÖÂÜµ‰∏ã‰ºö‰∏çÊàêÂäüÔºü</p>
<blockquote>
<p>CASÊú¨Ë∫´ÊòØ‰∏çÂ∏¶ÈîÅÊú∫Âà∂ÁöÑÔºåÂÖ∂ÊòØÈÄöËøáÊØîËæÉËÄåÊù•„ÄÇÂÅáËÆæÂ¶Ç‰∏ãÂú∫ÊôØÔºöÁ∫øÁ®ãAÂíåÁ∫øÁ®ãBÈÉΩÂú®ÂØπË±°Â§¥ÈáåÁöÑÈîÅÊ†áËØÜ‰∏∫Êó†ÈîÅÁä∂ÊÄÅËøõÂÖ•ÔºåÈÇ£‰πàÂ¶ÇÁ∫øÁ®ãAÂÖàÊõ¥Êñ∞ÂØπË±°Â§¥‰∏∫ÂÖ∂ÈîÅËÆ∞ÂΩïÊåáÈíàÊàêÂäü‰πãÂêéÔºåÁ∫øÁ®ãBÂÜçÁî®CASÂéªÊõ¥Êñ∞ÔºåÂ∞±‰ºöÂèëÁé∞Ê≠§Êó∂ÁöÑÂØπË±°Â§¥Â∑≤Áªè‰∏çÊòØÂÖ∂Êìç‰ΩúÂâçÁöÑÂØπË±°HashCode‰∫ÜÔºåÊâÄ‰ª•CAS‰ºöÂ§±Ë¥•„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂè™Êúâ‰∏§‰∏™Á∫øÁ®ãÂπ∂ÂèëÁî≥ËØ∑ÈîÅÁöÑÊó∂ÂÄô‰ºöÂèëÁîüCASÂ§±Ë¥•„ÄÇ</p>
<p>ÁÑ∂ÂêéÁ∫øÁ®ãBËøõË°åCASËá™ÊóãÔºåÁ≠âÂæÖÂØπË±°Â§¥ÁöÑÈîÅÊ†áËØÜÈáçÊñ∞ÂèòÂõûÊó†ÈîÅÁä∂ÊÄÅÊàñÂØπË±°Â§¥ÂÜÖÂÆπÁ≠â‰∫éÂØπË±°HashCodeÔºàÂõ†‰∏∫ËøôÊòØÁ∫øÁ®ãBÂÅöCASÊìç‰ΩúÂâçÁöÑÂÄºÔºâÔºåËøô‰πüÂ∞±ÊÑèÂë≥ÁùÄÁ∫øÁ®ãAÊâßË°åÁªìÊùüÔºàÂèÇËßÅÂêéÈù¢ËΩªÈáèÁ∫ßÈîÅÁöÑÊí§ÈîÄÔºåÂè™ÊúâÁ∫øÁ®ãAÊâßË°åÂÆåÊØïÊí§ÈîÄÈîÅ‰∫ÜÊâç‰ºöÈáçÁΩÆÂØπË±°Â§¥ÔºâÔºåÊ≠§Êó∂Á∫øÁ®ãBÁöÑCASÊìç‰ΩúÁªà‰∫éÊàêÂäü‰∫ÜÔºå‰∫éÊòØÁ∫øÁ®ãBËé∑Âæó‰∫ÜÈîÅ‰ª•ÂèäÊâßË°åÂêåÊ≠•‰ª£Á†ÅÁöÑÊùÉÈôê„ÄÇÂ¶ÇÊûúÁ∫øÁ®ãAÁöÑÊâßË°åÊó∂Èó¥ËæÉÈïøÔºåÁ∫øÁ®ãBÁªèËøáËã•Âπ≤Ê¨°CASÊó∂ÈíüÊ≤°ÊúâÊàêÂäüÔºåÂàôÈîÅËÜ®ËÉÄ‰∏∫ÈáçÈáèÁ∫ßÈîÅÔºåÂç≥Á∫øÁ®ãBË¢´ÊåÇËµ∑ÈòªÂ°û„ÄÅÁ≠âÂæÖÈáçÊñ∞Ë∞ÉÂ∫¶„ÄÇ</p>
</blockquote>
</li>
</ol>
<p>Ê≠§Â§ÑÔºåÂ¶Ç‰ΩïÁêÜËß£‚ÄúËΩªÈáèÁ∫ß‚ÄùÔºü‚ÄúËΩªÈáèÁ∫ß‚ÄùÊòØÁõ∏ÂØπ‰∫é‰ΩøÁî®Êìç‰ΩúÁ≥ªÁªü‰∫íÊñ•ÈáèÊù•ÂÆûÁé∞ÁöÑ‰º†ÁªüÈîÅËÄåË®ÄÁöÑ„ÄÇ‰ΩÜÊòØÔºåÈ¶ñÂÖàÈúÄË¶ÅÂº∫Ë∞É‰∏ÄÁÇπÁöÑÊòØÔºåËΩªÈáèÁ∫ßÈîÅÂπ∂‰∏çÊòØÁî®Êù•‰ª£ÊõøÈáçÈáèÁ∫ßÈîÅÁöÑÔºåÂÆÉÁöÑÊú¨ÊÑèÊòØÂú®Ê≤°ÊúâÂ§öÁ∫øÁ®ãÁ´û‰∫âÁöÑÂâçÊèê‰∏ãÔºåÂáèÂ∞ë‰º†ÁªüÁöÑÈáçÈáèÁ∫ßÈîÅ‰ΩøÁî®‰∫ßÁîüÁöÑÊÄßËÉΩÊ∂àËÄó„ÄÇ</p>
<blockquote>
<p>ËΩªÈáèÁ∫ßÈîÅÊâÄÈÄÇÂ∫îÁöÑÂú∫ÊôØÊòØÁ∫øÁ®ã‰∫§ÊõøÊâßË°åÂêåÊ≠•ÂùóÁöÑÊÉÖÂÜµÔºåÂ¶ÇÊûúÂ≠òÂú®Âêå‰∏ÄÊó∂Èó¥ËÆøÈóÆÂêå‰∏ÄÈîÅÁöÑÊÉÖÂÜµÔºåÂøÖÁÑ∂Â∞±‰ºöÂØºËá¥ËΩªÈáèÁ∫ßÈîÅËÜ®ËÉÄ‰∏∫ÈáçÈáèÁ∫ßÈîÅ„ÄÇ</p>
</blockquote>
<h3 id="ÈáçÈáèÁ∫ßÈîÅ"><a href="#ÈáçÈáèÁ∫ßÈîÅ" class="headerlink" title="ÈáçÈáèÁ∫ßÈîÅ"></a>ÈáçÈáèÁ∫ßÈîÅ</h3><p>SynchronizedÊòØÈÄöËøáÂØπË±°ÂÜÖÈÉ®ÁöÑ‰∏Ä‰∏™Âè´ÂÅö ÁõëËßÜÂô®ÈîÅÔºàMonitorÔºâÊù•ÂÆûÁé∞ÁöÑ„ÄÇ‰ΩÜÊòØÁõëËßÜÂô®ÈîÅÊú¨Ë¥®ÂèàÊòØ‰æùËµñ‰∫éÂ∫ïÂ±ÇÁöÑÊìç‰ΩúÁ≥ªÁªüÁöÑMutex LockÊù•ÂÆûÁé∞ÁöÑ„ÄÇËÄåÊìç‰ΩúÁ≥ªÁªüÂÆûÁé∞Á∫øÁ®ã‰πãÈó¥ÁöÑÂàáÊç¢ËøôÂ∞±ÈúÄË¶Å‰ªéÁî®Êà∑ÊÄÅËΩ¨Êç¢Âà∞Ê†∏ÂøÉÊÄÅÔºåËøô‰∏™ÊàêÊú¨ÈùûÂ∏∏È´òÔºåÁä∂ÊÄÅ‰πãÈó¥ÁöÑËΩ¨Êç¢ÈúÄË¶ÅÁõ∏ÂØπÊØîËæÉÈïøÁöÑÊó∂Èó¥ÔºåËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàSynchronizedÊïàÁéá‰ΩéÁöÑÂéüÂõ†„ÄÇÂõ†Ê≠§ÔºåËøôÁßç‰æùËµñ‰∫éÊìç‰ΩúÁ≥ªÁªüMutex LockÊâÄÂÆûÁé∞ÁöÑÈîÅÊàë‰ª¨Áß∞‰πã‰∏∫ ‚ÄúÈáçÈáèÁ∫ßÈîÅ‚Äù„ÄÇ</p>
<h3 id="ÈîÅÂçáÁ∫ß"><a href="#ÈîÅÂçáÁ∫ß" class="headerlink" title="ÈîÅÂçáÁ∫ß"></a>ÈîÅÂçáÁ∫ß</h3><p><img src="/p/8360cd4/2062729-5f1830874fd93080.png" alt="img"></p>
<p>SynchronizedÂÅèÂêëÈîÅ„ÄÅËΩªÈáèÁ∫ßÈîÅÂèäÈáçÈáèÁ∫ßÈîÅËΩ¨Êç¢ÊµÅÁ®ãÔºö</p>
<p><img src="/p/8360cd4/2062729-61dfb07d48d8588c.png" alt="img"></p>
<h2 id="ÈîÅÁöÑ‰ºòÂä£"><a href="#ÈîÅÁöÑ‰ºòÂä£" class="headerlink" title="ÈîÅÁöÑ‰ºòÂä£"></a>ÈîÅÁöÑ‰ºòÂä£</h2><p>ÂêÑÁßçÈîÅÂπ∂‰∏çÊòØÁõ∏‰∫í‰ª£ÊõøÁöÑÔºåËÄåÊòØÂú®‰∏çÂêåÂú∫ÊôØ‰∏ãÁöÑ‰∏çÂêåÈÄâÊã©ÔºåÁªùÂØπ‰∏çÊòØËØ¥ÈáçÈáèÁ∫ßÈîÅÂ∞±ÊòØ‰∏çÂêàÈÄÇÁöÑ„ÄÇÊØèÁßçÈîÅÊòØÂè™ËÉΩÂçáÁ∫ßÔºå‰∏çËÉΩÈôçÁ∫ßÔºåÂç≥Áî±ÂÅèÂêëÈîÅ-&gt;ËΩªÈáèÁ∫ßÈîÅ-&gt;ÈáçÈáèÁ∫ßÈîÅÔºåËÄåËøô‰∏™ËøáÁ®ãÂ∞±ÊòØÂºÄÈîÄÈÄêÊ∏êÂä†Â§ßÁöÑËøáÁ®ã„ÄÇ</p>
<blockquote>
<ol>
<li>Â¶ÇÊûúÊòØÂçïÁ∫øÁ®ã‰ΩøÁî®ÔºåÈÇ£ÂÅèÂêëÈîÅÊØ´Êó†ÁñëÈóÆ‰ª£‰ª∑ÊúÄÂ∞èÔºåÂπ∂‰∏îÂÆÉÂ∞±ËÉΩËß£ÂÜ≥ÈóÆÈ¢òÔºåËøûCASÈÉΩ‰∏çÁî®ÂÅöÔºå‰ªÖ‰ªÖÂú®ÂÜÖÂ≠ò‰∏≠ÊØîËæÉ‰∏ãÂØπË±°Â§¥Â∞±ÂèØ‰ª•‰∫ÜÔºõ</li>
<li>Â¶ÇÊûúÂá∫Áé∞‰∫ÜÂÖ∂‰ªñÁ∫øÁ®ãÁ´û‰∫âÔºåÂàôÂÅèÂêëÈîÅÂ∞±‰ºöÂçáÁ∫ß‰∏∫ËΩªÈáèÁ∫ßÈîÅÔºõ</li>
<li>Â¶ÇÊûúÂÖ∂‰ªñÁ∫øÁ®ãÈÄöËøá‰∏ÄÂÆöÊ¨°Êï∞ÁöÑCASÂ∞ùËØïÊ≤°ÊúâÊàêÂäüÔºåÂàôËøõÂÖ•ÈáçÈáèÁ∫ßÈîÅÔºõ</li>
</ol>
</blockquote>
<p>Âú®Á¨¨3ÁßçÊÉÖÂÜµ‰∏ãËøõÂÖ•ÂêåÊ≠•‰ª£Á†ÅÂùóÂ∞± Ë¶ÅÂÅöÂÅèÂêëÈîÅÂª∫Á´ã„ÄÅÂÅèÂêëÈîÅÊí§ÈîÄ„ÄÅËΩªÈáèÁ∫ßÈîÅÂª∫Á´ã„ÄÅÂçáÁ∫ßÂà∞ÈáçÈáèÁ∫ßÈîÅÔºåÊúÄÁªàËøòÊòØÂæóÈù†ÈáçÈáèÁ∫ßÈîÅÊù•Ëß£ÂÜ≥ÈóÆÈ¢òÔºåÈÇ£ËøôÊ†∑ÁöÑ‰ª£‰ª∑Â∞±ÊØîÁõ¥Êé•Áî®ÈáçÈáèÁ∫ßÈîÅË¶ÅÂ§ß‰∏çÂ∞ë‰∫Ü„ÄÇÊâÄ‰ª•‰ΩøÁî®Âì™ÁßçÊäÄÊúØÔºå‰∏ÄÂÆöË¶ÅÁúãÂÖ∂ÊâÄÂ§ÑÁöÑÁéØÂ¢ÉÂèäÂú∫ÊôØÔºåÂú®ÁªùÂ§ßÂ§öÊï∞ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÅèÂêëÈîÅÊòØÊúâÊïàÁöÑÔºåËøôÊòØÂü∫‰∫éHotSpot‰ΩúËÄÖÂèëÁé∞ÁöÑ‚ÄúÂ§ßÂ§öÊï∞ÈîÅÂè™‰ºöÁî±Âêå‰∏ÄÁ∫øÁ®ãÂπ∂ÂèëÁî≥ËØ∑‚ÄùÁöÑÁªèÈ™åËßÑÂæã„ÄÇ</p>
<p><img src="/p/8360cd4/2062729-c9740ab79f4d178c.png" alt="img"></p>
</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>‰ºòÈõÖÁöÑ‰∏≠Êñ≠Á∫øÁ®ã</title>
    <url>/p/5f59eead.html</url>
    <content><![CDATA[<html><head></head><body><p>‰∏çÊé®Ëçê‰ΩøÁî® stop„ÄÅsuspend„ÄÅresume Ëøô‰∏â‰∏™ËøáÊúü‰ΩúÂ∫üÁöÑÊñπÊ≥ïÔºåÂõ†‰∏∫ÊúâÂèØËÉΩ‰ºöÂèëÁîü‰∏çÂèØÈ¢ÑÊñôÁöÑÁªìÊûúËÄå‰∏îÂá∫Áé∞ÈîôËØØÂêéËøòÊØîËæÉÈöæÂÆö‰Ωç„ÄÇ</p>
<p>‰∏çÊé®Ëçê‰ΩøÁî® Thread.stop() ÁöÑÂéüÂõ†„ÄÇËøô‰∏™ÊñπÊ≥ïÊòØ‰ªéÂ§ñÈù¢ËÆ©Á∫øÁ®ã<strong>Âº∫Âà∂ÂÅúÊ≠¢</strong>ÔºåÂ¶ÇÊûúÂÅúÊ≠¢ÁöÑÁ∫øÁ®ãÊåÅÊúâ‰∏Ä‰∏™‰∏¥ÁïåÈîÅÔºå Êää‰∏Ä‰∏™ÂØπË±°ÁΩÆ‰∫é‰∏Ä‰∏™‰∏ç‰∏ÄËá¥ÁöÑÁä∂ÊÄÅÔºàÂåÖÂê´‰∏¥Áïå„ÄÅÊåÅ‰πÖÂåñ„ÄÅÊ∏∏Á¶ªÔºâÔºåËØ¥ÁôΩ‰∫ÜÂ∞±ÊòØÈÄ†ÊàêÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÁªìÊûú„ÄÇÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÂÅúÊ≠¢‰∏Ä‰∏™Á∫øÁ®ã‰ΩøÁî®  Thread.interrupt() ÊñπÊ≥ïÔºå‰ΩÜÊòØËøô‰∏™ÊñπÊ≥ï‰∏ç‰ºöÁªàÊ≠¢‰∏Ä‰∏™Ê≠£Âú®ËøêË°åÁä∂ÊÄÅÁöÑÁ∫øÁ®ãÔºåËøòÈúÄË¶ÅÂä†ÂÖ•‰∏Ä‰∫õÂà§Êñ≠ÊâçËÉΩÂÆåÊàêÂÅúÊ≠¢Á∫øÁ®ã„ÄÇ</p>
<p>Âú®Java‰∏≠Êúâ3ÁßçÊñπÂºèÂÅúÊ≠¢Ê≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÔºö</p>
<p>‚Äã        1„ÄÅ‰ΩøÁî®ÈÄÄÂá∫Ê†áÂøóÔºåÊ≠£Â∏∏ÈÄÄÂá∫Ôºõ</p>
<p>‚Äã        2„ÄÅ‰ΩøÁî® stop()Ôºå Âº∫Ë°åÁªàÊ≠¢Ôºõ</p>
<p>‚Äã        3„ÄÅ‰ΩøÁî® interrupt() ÊñπÊ≥ïÔºå‰∏≠Êñ≠Á∫øÁ®ãÔºõ</p>
<h2 id="interrupt-Âàù‰ΩìÈ™å"><a href="#interrupt-Âàù‰ΩìÈ™å" class="headerlink" title="interrupt() Âàù‰ΩìÈ™å"></a>interrupt() Âàù‰ΩìÈ™å</h2><p>‚Äã    ‰∏Ä‰∏äÊù•Â∞±ÊåâÁÖß‰∏ãÈù¢ËøôÁßçÊñπÂºèËøêË°åÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadInterrupt</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        myThread.start();</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        myThread.interrupt();</span><br><span class="line">        System.out.println(<span class="string">"mrdjun"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">        <span class="built_in">super</span>.run();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) {</span><br><span class="line">            System.out.println(<span class="string">"i="</span> + (i + <span class="number">1</span>));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂèëÁé∞ÁªìÊûúËæìÂá∫‰∫Ü <strong>1000000</strong> Ë°åÔºåËÄå‰∏î mrdjun ËøòËæìÂá∫Âú®‰∫Ü‰∏≠Èó¥ÔºåËØ¥Êòé interrupt Âπ∂Ê≤°ÊúâËÆ©Á∫øÁ®ãÂÅú‰∏ãÊù•„ÄÇ</p>
<h2 id="Âà§Êñ≠Á∫øÁ®ãÊòØÂê¶‰∏∫ÂÅúÊ≠¢Áä∂ÊÄÅ"><a href="#Âà§Êñ≠Á∫øÁ®ãÊòØÂê¶‰∏∫ÂÅúÊ≠¢Áä∂ÊÄÅ" class="headerlink" title="Âà§Êñ≠Á∫øÁ®ãÊòØÂê¶‰∏∫ÂÅúÊ≠¢Áä∂ÊÄÅ"></a>Âà§Êñ≠Á∫øÁ®ãÊòØÂê¶‰∏∫ÂÅúÊ≠¢Áä∂ÊÄÅ</h2><p>‚Äã    ‰∏ãÈù¢JavaÊèê‰æõ‰∫Ü‰∏§‰∏™Âà§Êñ≠Á∫øÁ®ãÊòØÂê¶‰∏∫ÂÅúÊ≠¢Áä∂ÊÄÅÁöÑÊñπÊ≥ï„ÄÇ</p>
<p>‚Äã    public static boolean interrupted() Ôºö‰ΩøÁî® Thread.interrupted() ÊµãËØïÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Â∑≤Áªè‰∏≠Êñ≠ÔºåÊâßË°åÂêéÊ∏ÖÊ•öÁä∂ÊÄÅÊ†áÂøóÂÄº‰∏∫ false ÁöÑÂäüËÉΩ„ÄÇ</p>
<p>‚Äã    public boolean this.isInterrupted()Ôºö ÊµãËØï this ÂÖ≥ÈîÆÂ≠óÊâÄÂú®Á±ªÁöÑÂØπË±°ÊòØÂê¶Â∑≤Áªè‰∏≠Êñ≠Ôºå‰∏çÊ∏ÖÊ•öÊ†áÂøó„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadInterrupt</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        myThread.start();</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        myThread.interrupt(); <span class="comment">// ‰ΩúÁî®‰∫é myThread ÂØπË±°</span></span><br><span class="line">        <span class="comment">// isInterrupted ÊµãËØïÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Â∑≤Áªè‰∏≠Êñ≠</span></span><br><span class="line">        System.out.println(<span class="string">"Á∫øÁ®ãÊòØÂê¶ÂÅúÊ≠¢Ôºü"</span>+myThread.isInterrupted());</span><br><span class="line">        System.out.println(<span class="string">"Á∫øÁ®ãÊòØÂê¶ÂÅúÊ≠¢Ôºü"</span>+myThread.isInterrupted());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‚Äã        Ë°•ÂÖÖ‰∏ÄÁÇπÔºö‰πüÂèØ‰ª•‰ΩøÁî® Thread.interrupted() Êù•Âà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Â∑≤Áªè‰∏≠Êñ≠ÔºåÂõ†‰∏∫Âú® Thread.java Ëøô‰∏™Á±ª‰∏≠Ë∞ÉÁî®ÈùôÊÄÅstaticÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºåÂ§ßÂ§öÊï∞ÊòØÈíàÂØπ currentThread() Á∫øÁ®ãËøõË°åÊìç‰ΩúÁöÑ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadInterrupt</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">      	Thread.currentThread().interrupt(); <span class="comment">// ‰ΩúÁî®‰∫é Thread</span></span><br><span class="line">        <span class="comment">// isInterrupted ÊµãËØïÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Â∑≤Áªè‰∏≠Êñ≠</span></span><br><span class="line">        System.out.println(<span class="string">"Á∫øÁ®ãÊòØÂê¶ÂÅúÊ≠¢Ôºü"</span>+ Thread.interrupted()); <span class="comment">// ËæìÂá∫ true</span></span><br><span class="line">        System.out.println(<span class="string">"Á∫øÁ®ãÊòØÂê¶ÂÅúÊ≠¢Ôºü"</span>+ Thread.interrupted()); <span class="comment">// ËæìÂá∫ false</span></span><br><span class="line">        System.out.println(<span class="string">"END!"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âá∫‰πéÊÑèÊñôÁöÑÊòØÁªìÊûúËæìÂá∫‰∏ç‰∏ÄËá¥ÔºåÊü•ÁúãÂÆòÊñπÂ∏ÆÂä©ÊñáÊ°£‰∏≠ÁöÑ interrupted() Ëß£ÈáäÔºö</p>
<blockquote>
<p>ÊµãËØïÂΩìÂâçÁ∫øÁ®ãÊòØÂê¶Â∑≤Áªè‰∏≠Êñ≠„ÄÇÁ∫øÁ®ãÁöÑ‰∏≠Êñ≠Áä∂ÊÄÅÁî±ËØ•ÊñπÊ≥ïÊ∏ÖÈô§„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂ¶ÇÊûúËøûÁª≠‰∏§Ê¨°Ë∞ÉÁî®ËØ•ÊñπÊ≥ïÔºåÂàôÁ¨¨‰∫åÊ¨°Ë∞ÉÁî®Â∞ÜËøîÂõûfalseÔºàÂú®Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî®Â∑≤Ê∏ÖÈô§‰∫ÜÂÖ∂‰∏≠Êñ≠Áä∂ÊÄÅ‰πãÂêéÔºå‰∏îÁ¨¨‰∫åÊ¨°Ë∞ÉÁî®Ê£ÄÈ™åÂÆå‰∏≠Êñ≠Áä∂ÊÄÅÂâçÔºåÂΩìÂâçÁ∫øÁ®ãÂÜçÊ¨°‰∏≠Êñ≠ÁöÑÊÉÖÂÜµÈô§Â§ñÔºâ„ÄÇ</p>
</blockquote>
<p>isInterrupted() ÁöÑÊñπÊ≥ïÂ£∞ÊòéÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isInterrupted</span><span class="params">()</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>ÂæàÊòæÁÑ∂ÔºåËøô‰∏™ÊñπÊ≥ï‰∏çÊòØ‰∏Ä‰∏™staticÊñπÊ≥ïÔºå‰ΩúÁî®‰∫éËøô‰∏™ÊñπÊ≥ïÁöÑÂØπË±°ÔºåÂ¶Ç‰∏ã„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadInterrupt</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        myThread.start();</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">	    myThread.interrupt();</span><br><span class="line">        System.out.println(<span class="string">"Á∫øÁ®ãÊòØÂê¶ÂÅúÊ≠¢Ôºü"</span> + myThread.isInterrupted()); <span class="comment">// ËæìÂá∫ true</span></span><br><span class="line">        System.out.println(<span class="string">"Á∫øÁ®ãÊòØÂê¶ÂÅúÊ≠¢Ôºü"</span> + myThread.isInterrupted()); <span class="comment">// ËæìÂá∫ true</span></span><br><span class="line">        System.out.println(<span class="string">"END!"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Áªº‰∏äÊâÄËø∞Ôºå‰∏§ËÄÖÂå∫Âà´Â¶Ç‰∏ãÔºö</p>
<p>Ôºà1ÔºâThread.interrupted() ÊµãËØïÁ∫øÁ®ãÊòØÂê¶Â∑≤Áªè‰∏≠Êñ≠ÔºåÊâßË°åÂêéÂÖ∑ÊúâÊ∏ÖÈô§Áä∂ÊÄÅÊ†áÂøóÂÄº‰∏∫falseÁöÑÂäüËÉΩÔºõ</p>
<p>Ôºà2Ôºânew Thread().isInterrupted() ÊµãËØïÁ∫øÁ®ãThreadÂØπË±°ÊòØÂê¶Â∑≤ÁªèÊòØ‰∏≠Êñ≠Áä∂ÊÄÅÔºå‰∏çÊ∏ÖÈô§Áä∂ÊÄÅÊ†áÂøóÔºõ</p>
<h2 id="ËÉΩÂÅúÊ≠¢ÁöÑÁ∫øÁ®ã‚Äî‚ÄîÂºÇÂ∏∏Ê≥ï"><a href="#ËÉΩÂÅúÊ≠¢ÁöÑÁ∫øÁ®ã‚Äî‚ÄîÂºÇÂ∏∏Ê≥ï" class="headerlink" title="ËÉΩÂÅúÊ≠¢ÁöÑÁ∫øÁ®ã‚Äî‚ÄîÂºÇÂ∏∏Ê≥ï"></a>ËÉΩÂÅúÊ≠¢ÁöÑÁ∫øÁ®ã‚Äî‚ÄîÂºÇÂ∏∏Ê≥ï</h2><p>‚Äã    Âú®mainÊñπÊ≥ï‰∏≠‰∏§ÁßíÂêéË∞ÉÁî® Thread ÂØπË±°ÁöÑ myThread.interrupt() ÊñπÊ≥ïÔºåÂú®Á∫øÁ®ã‰∏≠ÁöÑforÂæ™ÁéØ‰∏≠Âä†ÂÖ• if Âà§Êñ≠ÂêéÈù¢ÁöÑ‰ª£Á†ÅÊòØÂê¶ÂèØ‰ª•ËøêË°å„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadInterrupt</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        myThread.start();</span><br><span class="line">        Thread.sleep(<span class="number">500</span>);</span><br><span class="line">        myThread.interrupt();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">        <span class="built_in">super</span>.run();</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5000000</span>; i++) {</span><br><span class="line">                <span class="keyword">if</span> (interrupted()) {</span><br><span class="line">                    System.out.println(<span class="string">"Á∫øÁ®ãÂ∑≤ÁªèÂÅúÊ≠¢"</span>);</span><br><span class="line">                    <span class="comment">// ÈÄÄÂá∫ÂΩìÂâçÂæ™ÁéØÔºåÂ¶ÇÊûú‰∏∫ return; Êàñ throw new InterruptedException() ÂàôÁõ¥Êé•ÈÄÄÂá∫ÂΩìÂâçÁ∫øÁ®ã</span></span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">InterruptedException</span>();</span><br><span class="line">                }</span><br><span class="line">                System.out.println(<span class="string">"i="</span> + (i + <span class="number">1</span>));</span><br><span class="line">            }</span><br><span class="line">            System.out.println(<span class="string">"forÂæ™ÁéØÂ§ñÈù¢ÁöÑËØ≠Âè•"</span>);</span><br><span class="line">        } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊäõÂá∫ÂºÇÂ∏∏ÊñπÂºèËØ¶ÊÉÖÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadInterrupt</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">            myThread.start();</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            myThread.interrupt();</span><br><span class="line">        } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">        <span class="built_in">super</span>.run();</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5000000</span>; i++) {</span><br><span class="line">                <span class="keyword">if</span> (interrupted()) {</span><br><span class="line">                    System.out.println(<span class="string">"Á∫øÁ®ãÂ∑≤ÁªèÂÅúÊ≠¢"</span>);</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">InterruptedException</span>();</span><br><span class="line">                }</span><br><span class="line">                System.out.println(<span class="string">"i="</span> + (i + <span class="number">1</span>));</span><br><span class="line">            }</span><br><span class="line">            System.out.println(<span class="string">"forÂæ™ÁéØÂ§ñÈù¢ÁöÑËØ≠Âè•"</span>);</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            System.out.println(<span class="string">"ÊäõÂá∫ÂºÇÂ∏∏"</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÈÄöËøá‰∏ãÈù¢ÁöÑËøêË°åÁªìÊûúÂèØ‰ª•ÁúãÂá∫ÔºåÁ∫øÁ®ãÁªà‰∫éË¢´Ê≠£Á°ÆÁöÑÂÅúÊ≠¢‰∫Ü„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">i=<span class="number">312961</span></span><br><span class="line">i=<span class="number">312962</span></span><br><span class="line">Á∫øÁ®ãÂ∑≤ÁªèÂÅúÊ≠¢</span><br><span class="line">ÊäõÂá∫ÂºÇÂ∏∏</span><br><span class="line">java.lang.InterruptedException</span><br><span class="line">	at com.fun.async.test.class03.MyThread.run(ThreadInterrupt.java:<span class="number">34</span>)</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Âú®-sleep-Áä∂ÊÄÅ‰∏ãÂÅúÊ≠¢Á∫øÁ®ã"><a href="#Âú®-sleep-Áä∂ÊÄÅ‰∏ãÂÅúÊ≠¢Á∫øÁ®ã" class="headerlink" title="Âú® sleep Áä∂ÊÄÅ‰∏ãÂÅúÊ≠¢Á∫øÁ®ã"></a>Âú® sleep Áä∂ÊÄÅ‰∏ãÂÅúÊ≠¢Á∫øÁ®ã</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SleepThreadInterrupt</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="type">MyThread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">            thread.start();</span><br><span class="line">            Thread.sleep(<span class="number">200</span>); <span class="comment">// ÂÖàsleep Âú®Ë∞ÉÁî® interrupt</span></span><br><span class="line">            thread.interrupt();</span><br><span class="line">            System.out.println(<span class="string">"complete!"</span>);</span><br><span class="line">        } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">            System.out.println(<span class="string">"main catch"</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>{</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">            <span class="built_in">super</span>.run();</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                System.out.println(<span class="string">"run start ..."</span>);</span><br><span class="line">                Thread.sleep(<span class="number">200000</span>);</span><br><span class="line">                System.out.println(<span class="string">"run end!"</span>);</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">                System.out.println(<span class="string">"Âú®sleep‰∏≠ÂÅúÊ≠¢ÔºåËøõÂÖ•catchÔºÅ"</span>+<span class="built_in">this</span>.isInterrupted());</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ªé‰∏ãÈù¢ÁöÑËæìÂá∫ÁªìÊûúÊù•ÁúãÔºåÂ¶ÇÊûúÁ∫øÁ®ãÂú® sleep Áä∂ÊÄÅ‰∏ãÂÅúÊ≠¢ÔºåÂàôËØ•Á∫øÁ®ã‰ºöËøõÂÖ• catch ËØ≠Âè•ÔºåÂπ∂‰∏îÊ∏ÖÈô§ÂÅúÊ≠¢Áä∂ÊÄÅÂÄºÔºåÂèòÊàêfalse„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">run start ...</span><br><span class="line">complete!</span><br><span class="line">Âú®sleep‰∏≠ÂÅúÊ≠¢ÔºåËøõÂÖ•<span class="keyword">catch</span>ÔºÅ<span class="literal">false</span></span><br><span class="line">java.lang.InterruptedException: sleep interrupted</span><br><span class="line">	at java.lang.Thread.sleep(Native Method)</span><br><span class="line">	at com.fun.async.test.class03.SleepThreadInterrupt$MyThread.run(SleepThreadInterrupt.java:<span class="number">26</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>Á∫øÁ®ãSuspend &amp; Resume</title>
    <url>/p/64fda4e0.html</url>
    <content><![CDATA[<html><head></head><body><table>
<thead>
<tr>
<th>ÊñπÊ≥ïÂêç</th>
<th>Áî®ÈÄî</th>
</tr>
</thead>
<tbody><tr>
<td>suspend</td>
<td>Á∫øÁ®ãÊöÇÂÅú</td>
</tr>
<tr>
<td>resume</td>
<td>ÊÅ¢Â§çÁ∫øÁ®ãÊâßË°å</td>
</tr>
</tbody></table>
<h2 id="‰∏Ä„ÄÅÂü∫Êú¨Â∫îÁî®"><a href="#‰∏Ä„ÄÅÂü∫Êú¨Â∫îÁî®" class="headerlink" title="‰∏Ä„ÄÅÂü∫Êú¨Â∫îÁî®"></a>‰∏Ä„ÄÅÂü∫Êú¨Â∫îÁî®</h2><p>‰∏Ä‰∏™Ê°à‰æãÁúãÊáÇ suspend() ‰∏é resume() ÁöÑÂü∫Êú¨Â∫îÁî®Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadSuspendAndResume</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        myThread.start();</span><br><span class="line">        Thread.sleep(<span class="number">500</span>); <span class="comment">// ËÆ©Á∫øÁ®ãÊâßË°å500ÊØ´Áßí</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// AÊÆµ</span></span><br><span class="line">        myThread.suspend(); <span class="comment">// ÊöÇÂÅú</span></span><br><span class="line">        System.out.println(<span class="string">"A="</span> + System.currentTimeMillis() + <span class="string">" i="</span> + myThread.i); <span class="comment">// Êü•ÁúãÊöÇÂÅú‰πãÂêéÁöÑÁªìÊûú</span></span><br><span class="line">        Thread.sleep(<span class="number">500</span>);</span><br><span class="line">        System.out.println(<span class="string">"A="</span> + System.currentTimeMillis() + <span class="string">" i="</span> + myThread.i); <span class="comment">// Êü•Áúã500ÊØ´ÁßíÂêéÁöÑÁªìÊûú</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// BÊÆµ</span></span><br><span class="line">        myThread.resume();<span class="comment">// ÊöÇÂÅú500ÊØ´Áßí‰πãÂêéÔºå‰ΩøÁî®resumeÊÅ¢Â§ç</span></span><br><span class="line">        Thread.sleep(<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">        myThread.suspend();</span><br><span class="line">        System.out.println(<span class="string">"B="</span> + System.currentTimeMillis() + <span class="string">" i="</span> + myThread.i);</span><br><span class="line">        Thread.sleep(<span class="number">500</span>);</span><br><span class="line">        System.out.println(<span class="string">"B="</span> + System.currentTimeMillis() + <span class="string">" i="</span> + myThread.i);</span><br><span class="line"></span><br><span class="line">        myThread.stop(); <span class="comment">// ÈîÄÊØÅÁ∫øÁ®ãÂØπË±°</span></span><br><span class="line">        System.out.println(<span class="string">"END!"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) {</span><br><span class="line">            i++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûúÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">A=1613381037365 i=389072852</span><br><span class="line">A=1613381037868 i=389072852</span><br><span class="line">B=1613381038373 i=784162715</span><br><span class="line">B=1613381038889 i=784162715</span><br><span class="line">END!</span><br></pre></td></tr></tbody></table></figure>

<p>‰ªéÊéßÂà∂Âè∞‰∏äÁöÑÊó∂Èó¥ÂíåÊï∞ÂÄºÊù•ÁúãÔºåÁ∫øÁ®ãÁöÑÁ°ÆÊòØË¢´ÊöÇÂÅú‰∫ÜÔºåËÄå‰∏îÂèØ‰ª•ÊÅ¢Â§çÊàêËøêË°åÁä∂ÊÄÅ„ÄÇ</p>
<h2 id="‰∫å„ÄÅÁº∫ÁÇπ‚Äî‚ÄîÁã¨Âç†"><a href="#‰∫å„ÄÅÁº∫ÁÇπ‚Äî‚ÄîÁã¨Âç†" class="headerlink" title="‰∫å„ÄÅÁº∫ÁÇπ‚Äî‚ÄîÁã¨Âç†"></a>‰∫å„ÄÅÁº∫ÁÇπ‚Äî‚ÄîÁã¨Âç†</h2><p>Ëøô‰∏§‰∏™ÊñπÊ≥ïÂú®‰ΩøÁî®‰∏çÂΩìÁöÑÊÉÖÂÜµ‰∏ãÔºåÊûÅÊòìÈÄ†ÊàêÂÖ¨ÂÖ±ÂêåÊ≠•ÂØπË±°Ë¢´Áã¨Âç†ÔºåÈÄ†Êàê<strong>Ê≠ªÈîÅ</strong>ÔºàÂÖ∂‰ªñÁ∫øÁ®ãÊó†Ê≥ïËÆøÈóÆÂÖ¨ÂÖ±ÂêåÊ≠•ÂØπË±°ÔºâÁöÑÁªìÊûú„ÄÇ</p>
<p>Áã¨Âç†Ê°à‰æãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SuspendResumeDealLock</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">SuspendResumeDealLock</span> <span class="variable">that</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SuspendResumeDealLock</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">                System.out.println(<span class="string">"Á∫øÁ®ãaÂêØÂä®"</span>);</span><br><span class="line">                that.printString();</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">        thread1.setName(<span class="string">"a"</span>);</span><br><span class="line">        thread1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">                System.out.println(<span class="string">"Á∫øÁ®ã2ÂêØÂä®"</span>);</span><br><span class="line">                that.printString();</span><br><span class="line">                System.out.println(<span class="string">"Á∫øÁ®ã2ÂÆåÊàêÊâìÂç∞!!!!!"</span>);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">        thread2.start();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">synchronized</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printString</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"begin"</span>);</span><br><span class="line">        <span class="keyword">if</span> (Thread.currentThread().getName().equals(<span class="string">"a"</span>)) {</span><br><span class="line">            System.out.println(<span class="string">"Á∫øÁ®ãaËøõÂÖ•Ê∞∏ËøúÊöÇÂÅú"</span>);</span><br><span class="line">            Thread.currentThread().suspend();</span><br><span class="line">        }</span><br><span class="line">        System.out.println(<span class="string">"end"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâìÂç∞ÁªìÊûúÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Á∫øÁ®ãaÂêØÂä®</span><br><span class="line">Á∫øÁ®ã2ÂêØÂä®</span><br><span class="line">begin</span><br><span class="line">Á∫øÁ®ãaËøõÂÖ•Ê∞∏ËøúÊöÇÂÅú</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>aÁ∫øÁ®ãÊää printString() ÊñπÊ≥ïÈîÅÂÆö‰∫ÜÔºåÈÄ†Êàê thread2 Êó†Ê≥ïËøõÂÖ• printString()„ÄÇ</p>
<h2 id="‰∏â„ÄÅÁº∫ÁÇπ‚Äî‚ÄîÊï∞ÊçÆ‰∏çÂÆåÊï¥"><a href="#‰∏â„ÄÅÁº∫ÁÇπ‚Äî‚ÄîÊï∞ÊçÆ‰∏çÂÆåÊï¥" class="headerlink" title="‰∏â„ÄÅÁº∫ÁÇπ‚Äî‚ÄîÊï∞ÊçÆ‰∏çÂÆåÊï¥"></a>‰∏â„ÄÅÁº∫ÁÇπ‚Äî‚ÄîÊï∞ÊçÆ‰∏çÂÆåÊï¥</h2><p>Âú®‰ΩøÁî®suspend()ÊñπÊ≥ïÂíåresume()ÊñπÊ≥ïÊó∂ÔºåÂÆπÊòìÂá∫Áé∞Á∫øÁ®ãÊöÇÂÅúËøõËÄåÂØºËá¥Êï∞‰∏çÂÆåÊï¥ÁöÑÊÉÖÂÜµ„ÄÇ‰∏ãÈù¢Ëøô‰∏™Ê°à‰æãÂ∞±ÊòØ‰∏Ä‰∏™Êï∞ÊçÆ‰∏çÂÆåÊï¥ÁöÑÂÆû‰æãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SuspendResumeDealLock_3</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">"1"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">"11"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValue</span><span class="params">(String u, String p)</span> {</span><br><span class="line">        <span class="built_in">this</span>.username = u;</span><br><span class="line">        <span class="keyword">if</span> (Thread.currentThread().getName().equals(<span class="string">"a"</span>)) {</span><br><span class="line">            System.out.println(<span class="string">"ÊöÇÂÅúÁ∫øÁ®ãa"</span>);</span><br><span class="line">            Thread.currentThread().suspend();</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">this</span>.password = p;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printUsernamePassword</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(username + <span class="string">" "</span> + password);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Run</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Run</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Run</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">        <span class="keyword">final</span> <span class="type">SuspendResumeDealLock_3</span> <span class="variable">myObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SuspendResumeDealLock_3</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">                myObject.setValue(<span class="string">"a"</span>, <span class="string">"aa"</span>);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">        thread.setName(<span class="string">"a"</span>);</span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line">                myObject.printUsernamePassword();</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">        thread1.start();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËøêË°åÁªìÊûúÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ÊöÇÂÅúÁ∫øÁ®ãa</span><br><span class="line">a 11</span><br></pre></td></tr></tbody></table></figure>

<p>Á∫øÁ®ãÁöÑÊöÇÂÅúÂíåÂî§ÈÜíÂ∫îÂΩì‰ΩøÁî® wait()„ÄÅnotify()„ÄÅnotifyAll()ÊñπÊ≥ï„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>Unsafe</title>
    <url>/p/f5630658.html</url>
    <content><![CDATA[<html><head></head><body><p>‰∏ªË¶ÅÊèê‰æõ‰∏Ä‰∫õÁî®‰∫éÊâßË°å‰ΩéÁ∫ßÂà´„ÄÅ‰∏çÂÆâÂÖ®Êìç‰ΩúÁöÑÊñπÊ≥ïÔºåÂ¶ÇÁõ¥Êé•ËÆøÈóÆÁ≥ªÁªüÂÜÖÂ≠òËµÑÊ∫ê„ÄÅËá™‰∏ªÁÆ°ÁêÜÂÜÖÂ≠òËµÑÊ∫êÁ≠â„ÄÇJava Êó†Ê≥ïÁõ¥Êé•Êìç‰ΩúÂÜÖÂ≠òÔºåUnsafeÁ±ªÁõ∏ÂΩì‰∫éJavaÁöÑÂêéÈó®ÔºåÂèØ‰ª•ÈÄöËøáC++Êù•Êìç‰ΩúÂÜÖÂ≠ò„ÄÇ</p>
<p>JDKÂπ∂‰∏çÂª∫ËÆÆÁõ¥Êé•‰ΩøÁî®UnsafeÁ±ªÔºå‚ÄúUnsafe‚Äù Á±ªÂêçÁöÑÁî±Êù•ÔºöÂú®Á®ãÂ∫è‰∏≠ËøáÂ∫¶„ÄÅ‰∏çÊ≠£Á°Æ‰ΩøÁî®UnsafeÁ±ª‰ºö‰ΩøÂæóÁ®ãÂ∫èÂá∫ÈîôÁöÑÊ¶ÇÁéáÂèòÂ§ßÔºå‰ΩøÂæóJavaËøôÁßçÂÆâÂÖ®ÁöÑËØ≠Ë®ÄÂèòÂæó‰∏çÂÜç‚ÄúÂÆâÂÖ®‚Äù„ÄÇËÄå‰∏îJDKÂ∫ïÂ±ÇÊúâÂæàÂ§öÈíàÂØπ‰∏çÂêåÂπ≥Âè∞ËøêË°åÁöÑ‰ª£Á†ÅÔºå‰ΩøÁî®UnsafeÁ±ªÂèØËÉΩ‰ºöÈÄ†Êàê‰∏Ä‰∫õË∑®Âπ≥Âè∞ÁöÑÈóÆÈ¢ò„ÄÇ</p>
<blockquote>
<p>UnsafeÁ±ªÊèê‰æõ‰∫ÜÂì™‰∫õÂäüËÉΩÔºü</p>
</blockquote>
<p>DirectByteBufferÔºöÂú®ËØ•Á±ª‰∏≠‰ΩøÁî®UnsafeÂØπÂÜÖÂ≠òËøõË°åÁÆ°ÁêÜÔºåÊòØJavaÁî®‰∫éÂÆûÁé∞Â†ÜÂ§ñÂÜÖÂ≠ò(Áõ¥Êé•ÂÜÖÂ≠ò)ÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÁ±ªÔºåÈÄöÂ∏∏Áî®Âú®ÈÄö‰ø°ËøáÁ®ã‰∏≠ÂÅöÁºìÂÜ≤Ê±†ÔºåÂ¶ÇÂú®Netty„ÄÅMINAÁ≠âNIOÊ°ÜÊû∂‰∏≠Â∫îÁî®ÂπøÊ≥õ„ÄÇDirectByteBufferÂØπ‰∫éÂ†ÜÂ§ñÂÜÖÂ≠òÁöÑÂàõÂª∫„ÄÅ‰ΩøÁî®„ÄÅÈîÄÊØÅÁ≠âÈÄªËæëÂùáÁî±UnsafeÊèê‰æõÁöÑÂ†ÜÂ§ñÂÜÖÂ≠òAPIÊù•ÂÆûÁé∞„ÄÇ</p>
<p>LockSupportÔºöÁ∫øÁ®ãË∞ÉÂ∫¶„ÄÇ</p>
<p>AtomicIntegerArrayÔºöÊï∞ÁªÑÊìç‰ΩúÔºåÈÄöËøáËÆ°ÁÆóÂÜÖÂ≠òÂú∞ÂùÄÁöÑÂÅèÁßªÈáèÊù•Á°ÆÂÆöÊØè‰∏™ÂÖÉÁ¥†ÊâÄÂú®ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p>StampedLockÔºöÂÜÖÂ≠òÂ±èÈöú„ÄÇ</p>
<p>java.nio.BitsÔºöÁ≥ªÁªüÁÆ°ÁêÜÔºå ËÆ°ÁÆóÂæÖÁî≥ËØ∑ÂÜÖÂ≠òÊâÄÈúÄÂÜÖÂ≠òÈ°µÊï∞ÈáèÁöÑÈùôÊÄÅÊñπÊ≥ïÔºåÂÖ∂‰æùËµñ‰∫éUnsafe‰∏≠pageSizeÊñπÊ≥ïËé∑ÂèñÁ≥ªÁªüÂÜÖÂ≠òÈ°µÂ§ßÂ∞èÂÆûÁé∞ÂêéÁª≠ËÆ°ÁÆóÈÄªËæë,ËØ•Á±ªÂú®ÁßÅÂåÖ‰∏≠ÔºåÊó†Ê≥ïÊ≠£Â∏∏ÂàùÂßãÂåñ„ÄÇ</p>
<p><img src="/p/f5630658/20191211175818692.png" alt="20191211175818692"></p>
<p>Âú® <code>java.util.concurrent.atomic</code> ÂåÖ‰∏ãÁªùÂ§ßÂ§öÊï∞Á±ªÁöÑÊ∫êÁ†Å‰∏≠ÈÉΩ‰ΩøÁî®Âà∞‰∫ÜUnsafeËøô‰∏™Á±ª„ÄÇ‰æãÂ¶Ç<code>AtomicInteger</code>Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AtomicInteger</span> <span class="keyword">extends</span> <span class="title class_">Number</span> <span class="keyword">implements</span> <span class="title class_">java</span>.io.Serializable {</span><br><span class="line">    <span class="comment">// setup to use Unsafe.compareAndSwapInt for updates</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Unsafe</span> <span class="variable">unsafe</span> <span class="operator">=</span> Unsafe.getUnsafe();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> valueOffset;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            valueOffset = unsafe.objectFieldOffset</span><br><span class="line">                (AtomicInteger.class.getDeclaredField(<span class="string">"value"</span>));</span><br><span class="line">        } <span class="keyword">catch</span> (Exception ex) { <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(ex); }</span><br><span class="line">    }</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®UnsafeÁ±ª‰∏≠Êúâ‰ª•‰∏ã‰∏â‰∏™ÊñπÊ≥ïÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> var1 Êìç‰ΩúÁöÑÂØπË±°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> var2 Êìç‰ΩúÂØπË±°ÁöÑÂ±ûÊÄßÂÅèÁßªÈáèÔºåÁî®‰∫éËé∑ÂèñËØ•Â±ûÊÄßÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂÖ∑‰ΩìÂú∞ÂùÄ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> var4 ÊúüÊúõÂÄºÔºåËØªÂèñ‰º†ÂÖ•ÂØπË±°oÂú®ÂÜÖÂ≠ò‰∏≠ÂÅèÁßªÈáè‰∏∫offset‰ΩçÁΩÆÁöÑÂÄº‰∏éÊúüÊúõÂÄºexpected‰ΩúÊØîËæÉ</span></span><br><span class="line"><span class="comment"> *             Áõ∏Á≠âÂ∞±ÊääxÂÄºËµãÂÄºÁªôoffset‰ΩçÁΩÆÁöÑÂÄº„ÄÇÊñπÊ≥ïËøîÂõûtrue</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> var5 ÁõÆÊ†áÂÄº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ‰∏éÁõÆÊ†áÁöÑÊúüÊúõÂÄº‰∏çÁõ∏Á≠âËøîÂõûfalse</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="type">boolean</span> <span class="title function_">compareAndSwapObject</span><span class="params">(Object var1, <span class="type">long</span> var2, Object var4, Object var5)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="type">boolean</span> <span class="title function_">compareAndSwapInt</span><span class="params">(Object var1, <span class="type">long</span> var2, <span class="type">int</span> var4, <span class="type">int</span> var5)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="type">boolean</span> <span class="title function_">compareAndSwapLong</span><span class="params">(Object var1, <span class="type">long</span> var2, <span class="type">long</span> var4, <span class="type">long</span> var6)</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>‰ΩøÁî®UnsafeÁ±ªÁöÑÊñπÊ≥ïÂØπÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑadd()ÊñπÊ≥ïËøõË°å‰øÆÊîπÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ëé∑ÂèñÂπ∂‰ΩøÁî® Unsafe ÂØπË±°Ôºö</span></span><br><span class="line"><span class="comment"> * Java Êó†Ê≥ïÁõ¥Êé•Êìç‰ΩúÂÜÖÂ≠òÔºå‰ΩÜÂèØ‰ª•ÈÄöËøáC++Êù•Êìç‰ΩúÂÜÖÂ≠òÔºå</span></span><br><span class="line"><span class="comment"> * UnsafeÁ±ªÁõ∏ÂΩì‰∫éJavaÁöÑÂêéÈó®ÔºåÂèØ‰ª•ÈÄöËøáËøô‰∏™Á±ªÊù•Êìç‰ΩúÂÜÖÂ≠ò„ÄÅ‰øÆÊîπÂØπË±°„ÄÅÊï∞ÁªÑÂÜÖÂ≠ò</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Unsafe unsafe;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Ëé∑ÂèñÂà∞valueÂ±ûÊÄßÂÅèÁßªÈáèÔºåÁî®‰∫éÂÆö‰πâvalueÂ±ûÊÄßÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂÖ∑‰ΩìÂú∞ÂùÄ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">long</span> valueOffset;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> {</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// ÈÄöËøáÂèçÂ∞ÑËé∑ÂèñUnsafeÂØπË±°</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> Unsafe.class.getDeclaredField(<span class="string">"theUnsafe"</span>);</span><br><span class="line">        field.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// Ëé∑ÂèñUnsafeÂÆû‰æã</span></span><br><span class="line">        unsafe = (Unsafe) field.get(<span class="literal">null</span>);</span><br><span class="line">        valueOffset = unsafe.objectFieldOffset(CASDemo.class.getDeclaredField(<span class="string">"value"</span>));</span><br><span class="line">    } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ËØ•ÊñπÊ≥ïÁªèËøá‰ª•‰∏ãÈóÆÈ¢ò‰∏çÊñ≠ÊîπËøõ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> {</span><br><span class="line">    <span class="comment">// 1„ÄÅ‰∏â‰∏™Ê≠•È™§</span></span><br><span class="line">    <span class="comment">// value++;</span></span><br><span class="line">    <span class="comment">// 2„ÄÅÂèØËÉΩ‰ºöÂ§±Ë¥•Ôºå‰∏çËÉΩÊØèÊ¨°ÈÉΩÊàêÂäü</span></span><br><span class="line">    <span class="comment">// unsafe.compareAndSwapInt(this, valueOffset, value, value + 1);</span></span><br><span class="line">    <span class="comment">// 3„ÄÅCAS+Ê≠ªÂæ™ÁéØÈáçËØïÔºåÁ°Æ‰øùÊØè‰∏ÄÊ¨°ÈÉΩËÉΩÊìç‰ΩúÊàêÂäü</span></span><br><span class="line">    <span class="type">int</span> current, target;</span><br><span class="line">    <span class="keyword">do</span> {</span><br><span class="line">        <span class="comment">// ÂΩìÂâçÂÄºÂèØËÉΩË¢´ÂÖ∂ÂÆÉÁ∫øÁ®ãÊîπ‰∫ÜÔºåÊØè‰∏ÄÊ¨°Âæ™ÁéØÈÉΩÈáçÊñ∞Ëé∑Âèñ‰∏ÄÊ¨°ÂÄº</span></span><br><span class="line">        current = unsafe.getIntVolatile(<span class="built_in">this</span>, valueOffset);</span><br><span class="line">        target = current + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// current ÊòØÊúüÊúõÂÄºÔºåÂ¶ÇÊûúÊØîËæÉÁöÑÊúüÊúõÂÄºÁõ∏ÂêåÂàô‰øÆÊîπ‰∏∫ÂÄº‰∏∫targetÔºåÂπ∂ËøîÂõûtrue</span></span><br><span class="line">    } <span class="keyword">while</span> (!unsafe.compareAndSwapInt(<span class="built_in">this</span>, valueOffset, current, target));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) {</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; {</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) {</span><br><span class="line">                add();</span><br><span class="line">            }</span><br><span class="line">        }).start();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">    System.out.println(value);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>JUCÂπ∂ÂèëÂåÖ</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÁ±ªÂä†ËΩΩÂ≠êÁ≥ªÁªü</title>
    <url>/p/2b3d9fc3.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Á±ªÂä†ËΩΩÂô®"><a href="#Á±ªÂä†ËΩΩÂô®" class="headerlink" title="Á±ªÂä†ËΩΩÂô®"></a>Á±ªÂä†ËΩΩÂô®</h2><p>Á±ªÂä†ËΩΩÂ≠êÁ≥ªÁªüÂ∞Ü *.class Êñá‰ª∂Âä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÁ±ªÁöÑÂä†ËΩΩÂàÜ‰∏∫Âä†ËΩΩÈò∂ÊÆµ„ÄÅÈìæÊé•Èò∂ÊÆµ„ÄÅÂàùÂßãÂåñÈò∂ÊÆµ‰∏â‰∏™Èò∂ÊÆµ„ÄÇ</p>
<p><img src="/p/2b3d9fc3/JVM-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F.png" alt="JVM-Á±ªÂä†ËΩΩÂ≠êÁ≥ªÁªü"></p>
<ul>
<li><p>Á±ªÂä†ËΩΩÂô®Â≠êÁ≥ªÁªüË¥üË¥£‰ªéÊñá‰ª∂Á≥ªÁªüÊàñËÄÖÁΩëÁªú‰∏≠Âä†ËΩΩClassÊñá‰ª∂ÔºåclassÊñá‰ª∂Âú®Êñá‰ª∂ÂºÄÂ§¥ÊúâÁâπÂÆöÁöÑÊñá‰ª∂Ê†áËØÜ„ÄÇ</p>
</li>
<li><p>ClassLoaderÂè™Ë¥üË¥£classÊñá‰ª∂ÁöÑÂä†ËΩΩÔºåËá≥‰∫éÂÆÉÊòØÂê¶ÂèØ‰ª•ËøêË°åÔºåÂàôÁî±Execution EngineÂÜ≥ÂÆö„ÄÇ</p>
</li>
<li><p>Âä†ËΩΩÁöÑÁ±ª‰ø°ÊÅØÂ≠òÊîæ‰∫é‰∏ÄÂùóÁß∞‰∏∫ÊñπÊ≥ïÂå∫ÁöÑÂÜÖÂ≠òÁ©∫Èó¥„ÄÇÈô§‰∫ÜÁ±ªÁöÑ‰ø°ÊÅØÂ§ñÔºåÊñπÊ≥ïÂå∫‰∏≠Ëøò‰ºöÂ≠òÊîæËøêË°åÊó∂Â∏∏ÈáèÊ±†‰ø°ÊÅØÔºåÂèØËÉΩËøòÂåÖÊã¨Â≠óÁ¨¶‰∏≤Â≠óÈù¢ÈáèÂíåÊï∞Â≠óÂ∏∏Èáè(ËøôÈÉ®ÂàÜÂ∏∏Èáè‰ø°ÊÅØÊòØClassÊñá‰ª∂‰∏≠Â∏∏ÈáèÊ±†ÈÉ®ÂàÜÁöÑÂÜÖÂ≠òÊò†Â∞Ñ)</p>
</li>
</ul>
<p><img src="/p/2b3d9fc3/JVM%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8.png" alt="image-20210725220740473"></p>
<h2 id="Á±ªÂä†ËΩΩÂô®ÁöÑÂàÜÁ±ª"><a href="#Á±ªÂä†ËΩΩÂô®ÁöÑÂàÜÁ±ª" class="headerlink" title="Á±ªÂä†ËΩΩÂô®ÁöÑÂàÜÁ±ª"></a>Á±ªÂä†ËΩΩÂô®ÁöÑÂàÜÁ±ª</h2><ul>
<li><p>JVMÊîØÊåÅ‰∏§ÁßçÁ±ªÂûãÁöÑÁ±ªÂä†ËΩΩÂô®ÔºåÂàÜÂà´‰∏∫ÂºïÂØºÁ±ªÂä†ËΩΩÂô®ÔºàBootstrap ClassLoaderÔºâÂíåËá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®ÔºàUser-Defined ClassLoaderÔºâ„ÄÇ</p>
</li>
<li><p>Âú®JavaËôöÊãüÊú∫‰∏≠ÔºåÂ∞ÜÊâÄÊúâÊ¥æÁîü‰∫éÊäΩË±°Á±ªÁöÑClassLoaderÁöÑÁ±ªÂä†ËΩΩÂô®ÈÉΩÂàíÂàÜ‰∏∫Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®„ÄÇ</p>
</li>
<li><p>Êó†ËÆ∫Á±ªÂä†ËΩΩÂô®ÁöÑÁ±ªÂûãÂ¶Ç‰ΩïÂàíÂàÜÔºåÂú®Á®ãÂ∫è‰∏≠Êàë‰ª¨ÊúÄÂ∏∏ËßÅÁöÑÁ±ªÂä†ËΩΩÂô®ÂßãÁªàÂè™Êúâ3‰∏™„ÄÇ</p>
</li>
</ul>
<p>Âú® sun.misc.LauncherÁ±ª‰∏≠ÔºåÊúâAppClassLoader„ÄÅExtClassLoader ‰∏§‰∏™ÂÜÖÈÉ®Á±ªÔºåÈÉΩÈó¥Êé•ÁöÑÁªßÊâø‰∫ÜClassLoaderÔºåÊâÄ‰ª•ÈÉΩÂ±û‰∫éËá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®„ÄÇ</p>
<h3 id="Bootstrap-ClassLoader"><a href="#Bootstrap-ClassLoader" class="headerlink" title="Bootstrap ClassLoader"></a>Bootstrap ClassLoader</h3><p>ÂêØÂä®Á±ªÂä†ËΩΩÂô®„ÄÅÂºïÂØºÁ±ªÂä†ËΩΩÂô®„ÄÇ</p>
<p>Ôºà1ÔºâBootstrapClassLoaderÊòØ‰ΩøÁî®C++ÂÆûÁé∞ÁöÑÔºåÂµåÂ•óÂú®JVMÁöÑÂÜÖÈÉ®ÔºåÊâÄ‰ª•ÂÖ∂Âπ∂‰∏çÁªßÊâøËá™ java.lang.ClassLoaderÔºåÊ≤°ÊúâÁà∂Âä†ËΩΩÂô®„ÄÇ</p>
<p>Ôºà2ÔºâÂÆÉÁî®Êù•Âä†ËΩΩJavaÁöÑÊ†∏ÂøÉÂ∫ìÔºà\jre\lib\rt.jar„ÄÅresources.jarÊàñsun.boot.class.pathË∑ØÂæÑ‰∏ãÁöÑÂÜÖÂÆπÔºâÔºåÁî®‰∫éÊèê‰æõJVMËá™Ë∫´ÈúÄË¶ÅÁöÑÁ±ª„ÄÇ</p>
<p>Ôºà3ÔºâÂä†ËΩΩÊâ©Â±ïÁ±ªÂíåÂ∫îÁî®Á®ãÂ∫èÁ±ªÂä†ËΩΩÂô®ÔºåÂπ∂ÊåáÂÆö‰ªñ‰ª¨ÁöÑÁà∂Á±ªÂä†ËΩΩÂô®„ÄÇ</p>
<p>Ôºà4ÔºâÂá∫‰∫éÂÆâÂÖ®ËÄÉËôëÔºåBootstrapÂêØÂä®Á±ªÂä†ËΩΩÂô®Âè™Âä†ËΩΩÂåÖÂêç‰∏∫ java„ÄÅjavax„ÄÅsunÁ≠âÂºÄÂ§¥ÁöÑÁ±ª„ÄÇ</p>
<h3 id="Extension-ClassLoader"><a href="#Extension-ClassLoader" class="headerlink" title="Extension ClassLoader"></a>Extension ClassLoader</h3><p>Êâ©Â±ïÁ±ªÂä†ËΩΩÂô®„ÄÇ</p>
<p>Ôºà1ÔºâJavaËØ≠Ë®ÄÁºñÂÜôÔºåÁî±sun. misc. LauncherSExtClassLoaderÂÆûÁé∞„ÄÇ</p>
<p>Ôºà2ÔºâÊ¥æÁîü‰∫éClassLoaderÁ±ª„ÄÇ</p>
<p>Ôºà3ÔºâÁà∂Á±ªÂä†ËΩΩÂô®ÊòØBootstrap ClassLoader„ÄÇ</p>
<p>Ôºà4Ôºâ‰ªéjava.ext.dirsÁ≥ªÁªüÂ±ûÊÄßÊâÄÊåáÂÆöÁöÑÁõÆÂΩï‰∏≠Âä†ËΩΩÁ±ªÂ∫ìÔºåÊàñ‰ªéJDKÁöÑÂÆâË£ÖÁõÆÂΩïÁöÑ jre/lib/ext Â≠êÁõÆÂΩïÔºàÊâ©Â±ïÁõÆÂΩïÔºâÂä†ËΩΩÁ±ªÂ∫ì„ÄÇÂ¶ÇÊûúÁî®Êà∑ÂàõÂª∫ÁöÑ JAR ÊîæÂú®Ê≠§ÁõÆÂΩï‰∏ãÔºå‰πü‰ºöËá™Âä®Áî±Êâ©Â±ïÁ±ªÂä†ËΩΩÂô®Âä†ËΩΩ„ÄÇ</p>
<h3 id="Application-ClassLoader"><a href="#Application-ClassLoader" class="headerlink" title="Application ClassLoader"></a>Application ClassLoader</h3><p>Â∫îÁî®Á®ãÂ∫èÁ±ªÂä†ËΩΩÂô®„ÄÅÁ≥ªÁªüÁ±ªÂä†ËΩΩÂô®„ÄÇ</p>
<p>Ôºà1ÔºâJava ËØ≠Ë®ÄÁºñÂÜôÔºåÁî± sun. misc . Launcher$AppClassLoader ÂÆûÁé∞„ÄÇ</p>
<p>Ôºà2ÔºâÊ¥æÁîü‰∫é ClassLoader Á±ª„ÄÇ</p>
<p>Ôºà3ÔºâÂÆÉË¥üË¥£Âä†ËΩΩÁéØÂ¢ÉÂèòÈáèclasspathÊàñÁ≥ªÁªüÂ±ûÊÄß java. class.path ÊåáÂÆöË∑ØÂæÑ‰∏ãÁöÑÁ±ªÂ∫ì„ÄÇ</p>
<p>Ôºà4ÔºâËØ•Á±ªÂä†ËΩΩÊòØÁ®ãÂ∫è‰∏≠ÈªòËÆ§ÁöÑÁ±ªÂä†ËΩΩÂô®Ôºå‰∏Ä Ëà¨Êù•ËØ¥ÔºåJavaÂ∫îÁî®ÁöÑÁ±ªÈÉΩÊòØÁî±ÂÆÉÊù•ÂÆåÊàêÂä†ËΩΩ„ÄÇ</p>
<p>Ôºà5ÔºâÈÄöËøáClassLoader #getSystemClassLoader ()ÊñπÊ≥ïÂèØ‰ª•Ëé∑ÂèñÂà∞ËØ•Á±ªÂä†ËΩΩÂô®„ÄÇ</p>
<h3 id="Áî®Êà∑Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®"><a href="#Áî®Êà∑Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®" class="headerlink" title="Áî®Êà∑Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®"></a>Áî®Êà∑Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®</h3><p>Âú®JavaÁöÑÊó•Â∏∏Â∫îÁî®Á®ãÂ∫èÂºÄÂèë‰∏≠ÔºåÁ±ªÁöÑÂä†ËΩΩÂá†‰πéÊòØÁî±‰∏äËø∞3ÁßçÁ±ªÂä†ËΩΩÂô®Áõ∏‰∫íÈÖçÂêàÊâßË°åÁöÑÔºåÂú®ÂøÖË¶ÅÊó∂ÔºåÊàë‰ª¨ËøòÂèØ‰ª•Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®ÔºåÊù•ÂÆöÂà∂Á±ªÁöÑÂä†ËΩΩÊñπÂºè„ÄÇ</p>
<p>Ëá™ÂÆö‰πâÁ±ªÂä†ËΩΩÂô®ÂèØ‰ª•ÂÆûÁé∞‰ª•‰∏ãÂäüËÉΩÔºö</p>
<p>Ôºà1ÔºâÈöîÁ¶ªÁ±ªÂä†ËΩΩÂô®„ÄÇ‰æãÂ¶ÇÔºåÂºïÂÖ•Â§ö‰∏™jarÂåÖÊó∂ÔºåÂèØËÉΩ‰ºöÂá∫Áé∞ÂåÖÂêçÁ±ªÂêçÂÆåÂÖ®‰∏ÄËá¥ÁöÑÊÉÖÂÜµÔºåÂØºËá¥ÂÜ≤Á™Å„ÄÇ</p>
<p>Ôºà2Ôºâ‰øÆÊîπÁ±ªÂä†ËΩΩÁöÑÊñπÂºè„ÄÇ‰æãÂ¶ÇÔºåÂú®ÈúÄË¶ÅÊüê‰∏™Á±ªÁöÑÊó∂ÂÄôÔºåÊâç‰∏ªÂä®Âä†ËΩΩËøô‰∏™Á±ª„ÄÇ</p>
<p>Ôºà3ÔºâÊâ©Â±ïÂä†ËΩΩÊ∫ê„ÄÇ‰æãÂ¶ÇÔºå‰ªéÊï∞ÊçÆÂ∫ìÂä†ËΩΩ„ÄÇ</p>
<p>Ôºà4ÔºâÈò≤Ê≠¢Ê∫êÁ†ÅÊ≥ÑÈú≤„ÄÇ‰æãÂ¶ÇÔºåÂØπËøõË°åÂä†ÂØÜÁöÑÂ≠óËäÇÁ†ÅÊñá‰ª∂Ôºå‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑÁ±ªÂä†ËΩΩÂô®ËøõË°åËß£ÂØÜÂêéÂÜçÂä†ËΩΩÂà∞JVM„ÄÇ</p>
<h2 id="ÂÖ≥‰∫éClassLoader"><a href="#ÂÖ≥‰∫éClassLoader" class="headerlink" title="ÂÖ≥‰∫éClassLoader"></a>ÂÖ≥‰∫éClassLoader</h2><h3 id="ClassLoaderÁ±ªÁöÑÂÆö‰πâ"><a href="#ClassLoaderÁ±ªÁöÑÂÆö‰πâ" class="headerlink" title="ClassLoaderÁ±ªÁöÑÂÆö‰πâ"></a>ClassLoaderÁ±ªÁöÑÂÆö‰πâ</h3><p>ClassloaderÁ±ªÔºåÂÆÉÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÔºåÂÖ∂ÂêéÊâÄÊúâÁöÑÁ±ªÂä†ËΩΩÂô®ÈÉΩÁªßÊâøËá™ClassLoaderÔºà‰∏çÂåÖÊã¨ÂêØÂä®Á±ªÂä†ËΩΩÂô®Ôºâ„ÄÇ</p>
<p><img src="/p/2b3d9fc3/ClassLoader%E7%B1%BB%E7%9A%84%E6%96%B9%E6%B3%95.png" alt="img"></p>
<h3 id="ÁªßÊâøÂÖ≥Á≥ª"><a href="#ÁªßÊâøÂÖ≥Á≥ª" class="headerlink" title="ÁªßÊâøÂÖ≥Á≥ª"></a>ÁªßÊâøÂÖ≥Á≥ª</h3><p>ClassLoaderÁöÑÁªßÊâøÂÖ≥Á≥ªÂ¶Ç‰∏ãÔºåsun.misc.Launcher ÊòØ‰∏Ä‰∏™JavaËôöÊãüÊú∫ÁöÑÂÖ•Âè£Â∫îÁî®„ÄÇ</p>
<p><img src="/p/2b3d9fc3/ClassLoader%E7%9A%84%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB.png" alt="img"></p>
<h3 id="Ëé∑ÂèñClassLoaderÁöÑÈÄîÂæÑ"><a href="#Ëé∑ÂèñClassLoaderÁöÑÈÄîÂæÑ" class="headerlink" title="Ëé∑ÂèñClassLoaderÁöÑÈÄîÂæÑ"></a>Ëé∑ÂèñClassLoaderÁöÑÈÄîÂæÑ</h3><table>
<thead>
<tr>
<th>ÊñπÂºè</th>
<th>Ë∞ÉÁî®ÊñπÊ≥ï</th>
</tr>
</thead>
<tbody><tr>
<td>Ëé∑ÂèñÂΩìÂâçÁ±ªÁöÑclassLoader</td>
<td>Clazz.getClassLoader()</td>
</tr>
<tr>
<td>Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ã‰∏ä‰∏ãÊñáÁöÑclassLoader</td>
<td>Thread.currentThread().getContextClassLoader()</td>
</tr>
<tr>
<td>Ëé∑ÂèñÁ≥ªÁªüÁöÑclassLoader</td>
<td>ClassLoader.getSystemClassloader()</td>
</tr>
<tr>
<td>Ëé∑ÂèñË∞ÉÁî®ËÄÖÁöÑclassLoader</td>
<td>DriverManager.getCallerClassLoader()</td>
</tr>
</tbody></table>
<h2 id="Á±ªÁöÑÁîüÂëΩÂë®Êúü"><a href="#Á±ªÁöÑÁîüÂëΩÂë®Êúü" class="headerlink" title="Á±ªÁöÑÁîüÂëΩÂë®Êúü"></a>Á±ªÁöÑÁîüÂëΩÂë®Êúü</h2><p><img src="/p/2b3d9fc3/JVM-%E7%B1%BB%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="image-20210719225706738"></p>
<blockquote>
<p>JavaÂ¶Ç‰ΩïÁü•ÈÅìÊàë‰ª¨ÁöÑÁ±ªÂú®Âì™ÈáåÔºü</p>
</blockquote>
<p>Âú®JDK\binÁõÆÂΩïÊúâjps„ÄÅjcmd‰∏§‰∏™ÂëΩ‰ª§ÔºåjpsÁî®‰∫éÊü•ÁúãÂΩìÂâçÁöÑJavaËøõÁ®ãÁöÑ‰∏Ä‰∫õÁÆÄÂçïÊÉÖÂÜµÔºåjcmdÂèØÁî®‰∫éÊü•ÁúãÂ†ÜÂàÜÊûê„ÄÅÁ≥ªÁªüpropertiesÂÜÖÂÆπ„ÄÅÂ†ÜÂ§ñÂÜÖÂ≠ò‰ø°ÊÅØÁ≠â„ÄÇ</p>
<p>ÈÄöËøájcmdÊü•ÁúãVM.system.propertiesÂç≥ÂèØÊü•ÁúãÂà∞ÂΩìÂâçJavaÁ±ªÁöÑÊâÄÂú®‰ΩçÁΩÆ„ÄÇ</p>
<h3 id="LoadingÔºàÂä†ËΩΩÈò∂ÊÆµÔºâ"><a href="#LoadingÔºàÂä†ËΩΩÈò∂ÊÆµÔºâ" class="headerlink" title="LoadingÔºàÂä†ËΩΩÈò∂ÊÆµÔºâ"></a>LoadingÔºàÂä†ËΩΩÈò∂ÊÆµÔºâ</h3><p>Âä†ËΩΩ‚ÄùÈò∂ÊÆµÊòØ‚ÄúÁ±ªÂä†ËΩΩ‚ÄùÁîüÂëΩÂë®ÊúüÁöÑÁ¨¨‰∏Ä‰∏™Èò∂ÊÆµÔºåÂú®Âä†ËΩΩÈò∂ÊÆµÔºåJVMË¶ÅÂÆåÊàê‰∏ãÈù¢‰∏â‰ª∂‰∫ãÔºö</p>
<p>‚ë†„ÄÅÈÄöËøá‰∏Ä‰∏™Á±ªÁöÑÂÖ®ÈôêÂÆöÂêçÊù•Ëé∑ÂèñÂÆö‰πâÊ≠§Á±ªÁöÑ‰∫åËøõÂà∂Â≠óËäÇÊµÅ„ÄÇ</p>
<p>‚ë°„ÄÅÂ∞ÜËøô‰∏™Â≠óËäÇÊµÅÊâÄ‰ª£Ë°®ÁöÑÈùôÊÄÅÂ≠òÂÇ®ÁªìÊûÑËΩ¨Âåñ‰∏∫ÊñπÊ≥ïÂå∫ÁöÑËøêË°åÊó∂Êï∞ÊçÆÁªìÊûÑ„ÄÇ</p>
<p>‚ë¢„ÄÅÂú®JavaÂ†Ü‰∏≠ÁîüÊàê‰∏Ä‰∏™‰ª£Ë°®Ëøô‰∏™Á±ªÁöÑjava.lang.ClassÂØπË±°Ôºå‰Ωú‰∏∫ÊñπÊ≥ïÂå∫Ëøô‰∫õÊï∞ÊçÆÁöÑËÆøÈóÆÂÖ•Âè£„ÄÇ</p>
<p>PSÔºöÂä†ËΩΩ *.class ÁöÑÊñπÂºèÊúâÂì™‰∫õÔºü</p>
<ul>
<li>‰ªéÊú¨Âú∞Á≥ªÁªü‰∏≠Áõ¥Êé•Âä†ËΩΩ</li>
<li>ÈÄöËøáÁΩëÁªúËé∑ÂèñÔºåÂ¶ÇWeb Applet</li>
<li>‰ªé ZIP ÂåÖ‰∏≠ËØªÂèñÔºåÊàê‰∏∫Êó•ÂêéÁöÑ JAR„ÄÅEAR„ÄÅWAR Ê†ºÂºèÁöÑÂü∫Á°Ä</li>
<li>ËøêË°åÊó∂ËÆ°ÁÆóÁîüÊàêÔºå‰ΩøÁî®ÊúÄÂ§öÁöÑÊòØÂä®ÊÄÅ‰ª£ÁêÜÊäÄÊúØ</li>
<li>‰ªé‰∏ìÊúâÊï∞ÊçÆÂ∫ì‰∏≠ÊèêÂèñ.classÊñá‰ª∂ÔºåÊØîËæÉÂ∞ëËßÅ</li>
<li>‰ªéÂä†ÂØÜÊñá‰ª∂‰∏≠Ëé∑ÂèñÔºåÂÖ∏ÂûãÁöÑÈò≤classÊñá‰ª∂Ë¢´ÂèçÁºñËØëÁöÑ‰øùÊä§Êé™ÊñΩ</li>
</ul>
<h3 id="LinkingÔºàÈìæÊé•Èò∂ÊÆµÔºâ"><a href="#LinkingÔºàÈìæÊé•Èò∂ÊÆµÔºâ" class="headerlink" title="LinkingÔºàÈìæÊé•Èò∂ÊÆµÔºâ"></a>LinkingÔºàÈìæÊé•Èò∂ÊÆµÔºâ</h3><h4 id="Ôºà1ÔºâVerifyÔºàÈ™åËØÅÔºâ"><a href="#Ôºà1ÔºâVerifyÔºàÈ™åËØÅÔºâ" class="headerlink" title="Ôºà1ÔºâVerifyÔºàÈ™åËØÅÔºâ"></a>Ôºà1ÔºâVerifyÔºàÈ™åËØÅÔºâ</h4><ul>
<li><p>ÁõÆÁöÑÂú®‰∫éÁ°Æ‰øù Class Êñá‰ª∂ÁöÑÂ≠óËäÇÊµÅ‰∏≠ÂåÖÂê´ÁöÑ‰ø°ÊÅØÁ¨¶ÂêàÂΩìÂâçËôöÊãüÊú∫ÁöÑË¶ÅÊ±ÇÔºå‰øùËØÅË¢´Âä†ËΩΩÁ±ªÁöÑÊ≠£Á°ÆÊÄßÔºåÂπ∂‰∏î‰∏ç‰ºöÂç±ÂÆ≥ËôöÊãüÊú∫Ëá™Ë∫´ÁöÑÂÆâÂÖ®„ÄÇ</p>
</li>
<li><p>‰∏ªË¶ÅÂåÖÊã¨Âõõ‰∏™ÊñπÈù¢ÁöÑÊ£ÄÊü•ÔºöÊñá‰ª∂Ê†ºÂºèÈ™åËØÅ„ÄÅÂÖÉÊï∞ÊçÆÈ™åËØÅ„ÄÅÂ≠óËäÇÁ†ÅÈ™åËØÅ„ÄÅÁ¨¶Âè∑ÂºïÁî®È™åËØÅ„ÄÇ</p>
</li>
</ul>
<h5 id="‚ë†„ÄÅÊñá‰ª∂Ê†ºÂºèÈ™åËØÅ"><a href="#‚ë†„ÄÅÊñá‰ª∂Ê†ºÂºèÈ™åËØÅ" class="headerlink" title="‚ë†„ÄÅÊñá‰ª∂Ê†ºÂºèÈ™åËØÅ"></a>‚ë†„ÄÅÊñá‰ª∂Ê†ºÂºèÈ™åËØÅ</h5><p>„ÄÄ„ÄÄÊ†°È™åÂ≠óËäÇÊµÅÊòØÂê¶Á¨¶ÂêàClassÊñá‰ª∂Ê†ºÂºèÁöÑËßÑËåÉÔºåÂπ∂‰∏îËÉΩÂ§üË¢´ÂΩìÂâçÁâàÊú¨ÁöÑËôöÊãüÊú∫Â§ÑÁêÜ„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∏Ä„ÄÅÊòØÂê¶‰ª•È≠îÊï∞ 0xCAFEBABE ÂºÄÂ§¥„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∫å„ÄÅ‰∏ª„ÄÅÊ¨°ÁâàÊú¨Âè∑ÊòØÂê¶ÊòØÂΩìÂâçËôöÊãüÊú∫Â§ÑÁêÜËåÉÂõ¥‰πãÂÜÖ„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∏â„ÄÅÂ∏∏ÈáèÊ±†ÁöÑÂ∏∏Èáè‰∏≠ÊòØÂê¶Êúâ‰∏çË¢´ÊîØÊåÅÁöÑÂ∏∏ÈáèÁ±ªÂûãÔºàÊ£ÄÊü•Â∏∏ÈáètagÊ†áÂøóÔºâ</p>
<p>„ÄÄ„ÄÄÂõõ„ÄÅÊåáÂêëÂ∏∏ÈáèÁöÑÂêÑÁßçÁ¥¢ÂºïÂÄº‰∏≠ÊòØÂê¶ÊúâÊåáÂêë‰∏çÂ≠òÂú®ÁöÑÂ∏∏ÈáèÊàñ‰∏çÁ¨¶ÂêàÁ±ªÂûãÁöÑÂ∏∏Èáè„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∫î„ÄÅCONSTANT_Utf8_info ÂûãÁöÑÂ∏∏Èáè‰∏≠ÊòØÂê¶Êúâ‰∏çÁ¨¶Âêà UTF8 ÁºñÁ†ÅÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p>„ÄÄ„ÄÄÂÖ≠„ÄÅClass Êñá‰ª∂‰∏≠ÂêÑ‰∏™ÈÉ®ÂàÜÂèäÊñá‰ª∂Êú¨Ë∫´ÊòØÂê¶ÊúâË¢´Âà†Èô§ÁöÑÊàñÈôÑÂä†ÁöÑÂÖ∂‰ªñ‰ø°ÊÅØ„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰ª•‰∏äÊòØ‰∏ÄÈÉ®ÂàÜÊ†°È™åÂÜÖÂÆπÔºåÂΩìÁÑ∂Ëøú‰∏çÊ≠¢Ëøô‰∫õ„ÄÇÁªèËøáËøô‰∫õÊ†°È™åÂêéÔºåÂ≠óËäÇÊµÅÊâç‰ºöËøõÂÖ•ÂÜÖÂ≠òÁöÑÊñπÊ≥ïÂå∫‰∏≠Â≠òÂÇ®ÔºåÊé•‰∏ãÊù•ÂêéÈù¢ÁöÑ‰∏â‰∏™Èò∂ÊÆµÊ†°È™åÈÉΩÊòØÂü∫‰∫éÊñπÊ≥ïÂå∫ÁöÑÂ≠òÂÇ®ÁªìÊûÑËøõË°åÁöÑ„ÄÇ</p>
<h5 id="‚ë°„ÄÅÂÖÉÊï∞ÊçÆÈ™åËØÅ"><a href="#‚ë°„ÄÅÂÖÉÊï∞ÊçÆÈ™åËØÅ" class="headerlink" title="‚ë°„ÄÅÂÖÉÊï∞ÊçÆÈ™åËØÅ"></a>‚ë°„ÄÅÂÖÉÊï∞ÊçÆÈ™åËØÅ</h5><p>„ÄÄ„ÄÄÁ¨¨‰∫å‰∏™Èò∂ÊÆµ‰∏ªË¶ÅÊòØÂØπÂ≠óËäÇÁ†ÅÊèèËø∞ÁöÑ‰ø°ÊÅØËøõË°åËØ≠‰πâÂàÜÊûêÔºå‰ª•‰øùËØÅÂÖ∂ÊèèËø∞ÁöÑ‰ø°ÊÅØÁ¨¶ÂêàJavaËØ≠Ë®ÄËßÑËåÉË¶ÅÊ±Ç„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∏Ä„ÄÅËøô‰∏™Á±ªÊòØÂê¶ÊúâÁà∂Á±ªÔºàÈô§‰∫Üjava.lang.Object Á±ª‰πãÂ§ñÔºåÊâÄÊúâÁöÑÁ±ªÈÉΩÂ∫îÂΩìÊúâÁà∂Á±ªÔºâ„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∫å„ÄÅËøô‰∏™Á±ªÁöÑÁà∂Á±ªÊòØÂê¶ÁªßÊâø‰∫Ü‰∏çÂÖÅËÆ∏Ë¢´ÁªßÊâøÁöÑÁ±ªÔºàË¢´final‰øÆÈ•∞ÁöÑÁ±ªÔºâ„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∏â„ÄÅÂ¶ÇÊûúËøô‰∏™Á±ª‰∏çÊòØÊäΩË±°Á±ªÔºåÊòØÂê¶ÂÆûÁé∞‰∫ÜÂÖ∂Áà∂Á±ªÊàñÊé•Âè£‰πã‰∏≠Ë¶ÅÊ±ÇÂÆûÁé∞ÁöÑÊâÄÊúâÊôÆÈÄöÊñπÊ≥ï„ÄÇ</p>
<p>„ÄÄ„ÄÄÂõõ„ÄÅÁ±ª‰∏≠ÁöÑÂ≠óÊÆµ„ÄÅÊñπÊ≥ïÊòØÂê¶‰∏éÁà∂Á±ª‰∫ßÁîü‰∫ÜÁüõÁõæÔºà‰æãÂ¶ÇË¶ÜÁõñ‰∫ÜÁà∂Á±ªÁöÑfinalÂ≠óÊÆµ„ÄÅÊàñËÄÖÂá∫Áé∞‰∏çÁ¨¶ÂêàËßÑÂàôÁöÑÈáçËΩΩÔºâ</p>
<h5 id="‚ë¢„ÄÅÂ≠óËäÇÁ†ÅÈ™åËØÅ"><a href="#‚ë¢„ÄÅÂ≠óËäÇÁ†ÅÈ™åËØÅ" class="headerlink" title="‚ë¢„ÄÅÂ≠óËäÇÁ†ÅÈ™åËØÅ"></a>‚ë¢„ÄÅÂ≠óËäÇÁ†ÅÈ™åËØÅ</h5><p>„ÄÄ„ÄÄÁ¨¨‰∏â‰∏™Èò∂ÊÆµÂ≠óËäÇÁ†ÅÈ™åËØÅÊòØÊï¥‰∏™È™åËØÅÈò∂ÊÆµ‰∏≠ÊúÄÂ§çÊùÇÁöÑÔºå‰∏ªË¶ÅÊòØËøõË°åÊï∞ÊçÆÊµÅÂíåÊéßÂà∂ÊµÅÂàÜÊûê„ÄÇËØ•Èò∂ÊÆµÂ∞ÜÂØπÁ±ªÁöÑÊñπÊ≥ïËøõË°åÂàÜÊûêÔºå‰øùËØÅË¢´Ê†°È™åÁöÑÊñπÊ≥ïÂú®ËøêË°åÊó∂‰∏ç‰ºöÂÅöÂá∫Âç±ÂÆ≥ËôöÊãüÊú∫ÂÆâÂÖ®ÁöÑË°å‰∏∫„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∏Ä„ÄÅ‰øùËØÅ‰ªªÊÑèÊó∂ÂàªÊìç‰ΩúÊï∞Ê†à‰∏≠ÁöÑÊï∞ÊçÆÁ±ªÂûã‰∏éÊåá‰ª§‰ª£Á†ÅÂ∫èÂàóÈÉΩËÉΩÈÖçÂêàÂ∑•‰Ωú„ÄÇ‰æãÂ¶Ç‰∏ç‰ºöÂá∫Áé∞Âú®Êìç‰ΩúÊï∞Ê†à‰∏≠ÊîæÁΩÆ‰∫Ü‰∏Ä‰∏™ int Á±ªÂûãÁöÑÊï∞ÊçÆÔºå‰ΩøÁî®Êó∂Âç¥ÊåâÁÖß long Á±ªÂûãÊù•Âä†ËΩΩÂà∞Êú¨Âú∞ÂèòÈáèË°®‰∏≠„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∫å„ÄÅ‰øùËØÅË∑≥ËΩ¨Êåá‰ª§‰∏ç‰ºöË∑≥ËΩ¨Âà∞ÊñπÊ≥ï‰Ωì‰ª•Â§ñÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§‰∏≠„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∏â„ÄÅ‰øùËØÅÊñπÊ≥ï‰Ωì‰∏≠ÁöÑÁ±ªÂûãËΩ¨Êç¢ÊòØÊúâÊïàÁöÑ„ÄÇÊØîÂ¶ÇÊää‰∏Ä‰∏™Â≠êÁ±ªÂØπË±°ËµãÂÄºÁªôÁà∂Á±ªÊï∞ÊçÆÁ±ªÂûãÔºåËøôÊòØÂÆâÂÖ®ÁöÑ„ÄÇ‰ΩÜÊòØÊääÁà∂Á±ªÂØπË±°ËµãÂÄºÁªôÂ≠êÁ±ªÊï∞ÊçÆÁ±ªÂûãÔºåÁîöËá≥ËµãÂÄºÁªôÂÆåÂÖ®‰∏çÁõ∏Âπ≤ÁöÑÁ±ªÂûãÔºåËøôÂ∞±ÊòØ‰∏çÂêàÊ≥ïÁöÑ„ÄÇ</p>
<h5 id="‚ë£„ÄÅÁ¨¶Âè∑ÂºïÁî®È™åËØÅ"><a href="#‚ë£„ÄÅÁ¨¶Âè∑ÂºïÁî®È™åËØÅ" class="headerlink" title="‚ë£„ÄÅÁ¨¶Âè∑ÂºïÁî®È™åËØÅ"></a>‚ë£„ÄÅÁ¨¶Âè∑ÂºïÁî®È™åËØÅ</h5><p>„ÄÄ„ÄÄÁ¨¶Âè∑ÂºïÁî®È™åËØÅ‰∏ªË¶ÅÊòØÂØπÁ±ªËá™Ë∫´‰ª•Â§ñÔºàÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÂêÑÁßçÁ¨¶Âè∑ÂºïÁî®ÔºâÁöÑ‰ø°ÊÅØËøõË°åÂåπÈÖçÊÄßÁöÑÊ†°È™åÔºåÈÄöÂ∏∏ÈúÄË¶ÅÊ†°È™åÂ¶Ç‰∏ãÂÜÖÂÆπÔºö</p>
<p>„ÄÄ„ÄÄ‰∏Ä„ÄÅÁ¨¶Âè∑ÂºïÁî®‰∏≠ÈÄöËøáÂ≠óÁ¨¶‰∏≤ÊèèËø∞ÁöÑÂÖ®ÈôêÂÆöÂêçÊòØÂê¶ËÉΩÂ§üÊâæÂà∞Áõ∏Â∫îÁöÑÁ±ª„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∫å„ÄÅÂú®ÊåáÂÆöÁ±ª‰∏≠ÊòØÂê¶Â≠òÂú®Á¨¶ÂêàÊñπÊ≥ïÁöÑÂ≠óÊÆµÊèèËø∞Á¨¶ÂèäÁÆÄÂçïÂêçÁß∞ÊâÄÊèèËø∞ÁöÑÊñπÊ≥ïÂíåÂ≠óÊÆµ„ÄÇ</p>
<p>„ÄÄ„ÄÄ‰∏â„ÄÅÁ¨¶Âè∑ÂºïÁî®‰∏≠ÁöÑÁ±ª„ÄÅÂ≠óÊÆµÂíåÊñπÊ≥ïÁöÑËÆøÈóÆÊÄßÔºàprivate„ÄÅprotected„ÄÅpublic„ÄÅdefaultÔºâÊòØÂê¶ÂèØ‰ª•Ë¢´ÂΩìÂâçÁ±ªËÆøÈóÆ„ÄÇ</p>
<h4 id="Ôºà2ÔºâPrepareÔºàÂáÜÂ§áÔºâ"><a href="#Ôºà2ÔºâPrepareÔºàÂáÜÂ§áÔºâ" class="headerlink" title="Ôºà2ÔºâPrepareÔºàÂáÜÂ§áÔºâ"></a>Ôºà2ÔºâPrepareÔºàÂáÜÂ§áÔºâ</h4><ul>
<li>ÂáÜÂ§áÈò∂ÊÆµÊòØÊ≠£Âºè‰∏∫<strong>Á±ªÂèòÈáè</strong>ÂàÜÈÖçÂÜÖÂ≠òÂπ∂ËÆæÁΩÆ<strong>Á±ªÂèòÈáè</strong>ÂàùÂßãÂÄºÁöÑÈò∂ÊÆµÔºåËøô‰∫õÂÜÖÂ≠òÊòØÂú®ÊñπÊ≥ïÂå∫‰∏≠ËøõË°åÂàÜÈÖç„ÄÇ</li>
</ul>
<p><img src="/p/2b3d9fc3/Java%E4%B8%AD%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%9D%E5%A7%8B%E5%80%BC.png" alt="Java‰∏≠Âü∫Êú¨ÁöÑÊï∞ÊçÆÁ±ªÂûãÂàùÂßãÂÄº"></p>
<ul>
<li>ËøôÈáå‰∏çÂåÖÂê´Áî® final ‰øÆÈ•∞ÁöÑstaticÔºåÂõ†‰∏∫ final Âú®ÁºñËØëÁöÑÊó∂ÂÄôÂ∞±‰ºöÂàÜÈÖç‰∫ÜÔºåÂáÜÂ§áÈò∂ÊÆµ‰ºöÊòæÂºèÂàùÂßãÂåñ„ÄÇ</li>
<li>ËøôÈáå‰∏ç‰ºö‰∏∫ÂÆû‰æãÂèòÈáèÂàÜÈÖçÂàùÂßãÂåñÔºåÁ±ªÂèòÈáè‰ºöÂàÜÈÖçÂú®ÊñπÊ≥ïÂå∫‰∏≠ÔºåËÄåÂÆû‰æãÂèòÈáèÊòØ‰ºöÈöèÁùÄÂØπË±°‰∏ÄËµ∑ÂàÜÈÖçÂà∞JavaÂ†Ü‰∏≠„ÄÇ</li>
</ul>
<h4 id="Ôºà3ÔºâResolveÔºàËß£ÊûêÔºâ"><a href="#Ôºà3ÔºâResolveÔºàËß£ÊûêÔºâ" class="headerlink" title="Ôºà3ÔºâResolveÔºàËß£ÊûêÔºâ"></a>Ôºà3ÔºâResolveÔºàËß£ÊûêÔºâ</h4><ul>
<li>Â∞ÜÂ∏∏ÈáèÊ±†‰∏≠ÁöÑÁ¨¶Âè∑ÂºïÁî®ÊõøÊç¢‰∏∫Áõ¥Êé•ÂºïÁî®ÁöÑËøáÁ®ã„ÄÇ</li>
<li>‰∫ãÂÆû‰∏äÔºåËß£ÊûêÊìç‰ΩúÂæÄÂæÄ‰ºö‰º¥ÈöèÁùÄJVMÂú®ÊâßË°åÂÆåÂàùÂßãÂåñ‰πãÂêéÂú®ÊâßË°å„ÄÇ</li>
<li>Á¨¶Âè∑ÂºïÁî®ÔºàSymbolic ReferencesÔºâÔºöÁ¨¶Âè∑ÂºïÁî®‰ª•‰∏ÄÁªÑÁ¨¶Âè∑Êù•ÊèèËø∞ÊâÄÂºïÁî®ÁöÑÁõÆÊ†áÔºåÁ¨¶Âè∑ÂèØ‰ª•ÊòØ‰ªª‰ΩïÂΩ¢ÂºèÁöÑÂ≠óÈù¢ÈáèÔºåÂè™Ë¶Å‰ΩøÁî®Êó∂ËÉΩÊó†Ê≠ß‰πâÁöÑÂÆö‰ΩçÂà∞ÁõÆÊ†áÂç≥ÂèØ„ÄÇÁ¨¶Âè∑ÂºïÁî®‰∏éËôöÊãüÊú∫ÂÆûÁé∞ÁöÑÂÜÖÂ≠òÂ∏ÉÂ±ÄÊó†ÂÖ≥ÔºåÂºïÁî®ÁöÑÁõÆÊ†á‰∏ç‰∏ÄÂÆöÂ∑≤ÁªèÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇ</li>
<li>Áõ¥Êé•ÂºïÁî®ÔºàDirect ReferencesÔºâÔºöÁõ¥Êé•ÂºïÁî®ÂèØ‰ª•ÊòØÁõ¥Êé•ÊåáÂêëÁõÆÊ†áÁöÑÊåáÈíà„ÄÅÁõ∏ÂØπÂÅèÁßªÈáèÊàñÊòØ‰∏Ä‰∏™ËÉΩÈó¥Êé•ÂÆö‰ΩçÂà∞ÁõÆÊ†áÁöÑÂè•ÊüÑ„ÄÇÁõ¥Êé•ÂºïÁî®ÊòØ‰∏éËôöÊãüÊú∫ÂÆûÁé∞ÂÜÖÂ≠òÂ∏ÉÂ±ÄÁõ∏ÂÖ≥ÁöÑÔºåÂêå‰∏Ä‰∏™Á¨¶Âè∑ÂºïÁî®Âú®‰∏çÂêåËôöÊãüÊú∫ÂÆû‰æã‰∏äÁøªËØëÂá∫Êù•ÁöÑÁõ¥Êé•ÂºïÁî®‰∏ÄËà¨‰∏ç‰ºöÁõ∏Âêå„ÄÇÂ¶ÇÊûúÊúâ‰∫ÜÁõ¥Êé•ÂºïÁî®ÔºåÈÇ£‰πàÂºïÁî®ÁöÑÁõÆÊ†áÂøÖÂÆöÂ∑≤ÁªèÂú®ÂÜÖÂ≠ò‰∏≠Â≠òÂú®„ÄÇ</li>
<li>Ëß£ÊûêÂä®‰Ωú‰∏ªË¶ÅÈíàÂØπÁ±ªÊàñÊé•Âè£„ÄÅÂ≠óÊÆµ„ÄÅÁ±ªÊñπÊ≥ï„ÄÅÊé•Âè£ÊñπÊ≥ïÂõõÁ±ªÁ¨¶Âè∑ÂºïÁî®ÔºåÂàÜÂà´ÂØπÂ∫î‰∫éÂ∏∏ÈáèÊ±†ÁöÑ CONSTANT_Class_info„ÄÅCONSTANT_Fieldref_info„ÄÅCONSTANT_Methodref_info„ÄÅCONSTANTS_InterfaceMethodref_info ÂõõÁßçÁ±ªÂûãÂ∏∏Èáè„ÄÇ</li>
</ul>
<h3 id="InitializationÔºàÂàùÂßãÂåñÈò∂ÊÆµÔºâ"><a href="#InitializationÔºàÂàùÂßãÂåñÈò∂ÊÆµÔºâ" class="headerlink" title="InitializationÔºàÂàùÂßãÂåñÈò∂ÊÆµÔºâ"></a>InitializationÔºàÂàùÂßãÂåñÈò∂ÊÆµÔºâ</h3><p>ÂàùÂßãÂåñÈò∂ÊÆµÊòØÁ±ªÂä†ËΩΩÈò∂ÊÆµÁöÑÊúÄÂêé‰∏ÄÊ≠•ÔºåÂà∞‰∫ÜÂàùÂßãÂåñÈò∂ÊÆµÔºåÁ±ªÂèòÈáèÂ∑≤ÁªèË¢´ËµãÂÄºËøáÂàùÂßãÂÄº‰∫ÜÔºåÂºÄÂßãÁúüÊ≠£ÊâßË°åÁ±ª‰∏≠ÂÆö‰πâÁöÑJavaÁ®ãÂ∫è‰ª£Á†ÅÔºàÊàñËÄÖËØ¥ÊòØÂ≠óËäÇÁ†ÅÔºâÔºåÊç¢Âè•ËØùÊù•ËØ¥Ôºå<strong>ÂàùÂßãÂåñÈò∂ÊÆµÊòØÊâßË°åÁ±ªÊûÑÈÄ†Âô®&lt;clinit&gt;() ÊñπÊ≥ïÁöÑËøáÁ®ã</strong>„ÄÇ</p>
<ul>
<li>Ê≠§ÊñπÊ≥ï‰∏çÈúÄÂÆö‰πâÔºåÊòØjavacÁºñËØëÂô®Ëá™Âä®Êî∂ÈõÜÁ±ª‰∏≠ÁöÑÊâÄÊúâÁ±ªÂèòÈáèÁöÑËµãÂÄºÂä®‰ΩúÂíåÈùôÊÄÅ‰ª£Á†ÅÂùó‰∏≠ÁöÑËØ≠Âè•ÂêàÂπ∂ËÄåÊù•„ÄÇ</li>
<li>ÊûÑÈÄ†Âô®ÊñπÊ≥ï‰∏≠Êåá‰ª§ÊåâËØ≠Âè•Âú®Ê∫êÊñá‰ª∂‰∏≠Âá∫Áé∞ÁöÑÈ°∫Â∫èÊâßË°å„ÄÇ</li>
<li>&lt;clinit&gt;() ‰∏çÂêå‰∫éÁ±ªÁöÑÊûÑÈÄ†Âô®„ÄÇÂÆÉ‰∏çÈúÄË¶ÅÊòæÂºèÁöÑË∞ÉÁî®Áà∂Á±ªÊûÑÈÄ†Âô®ÔºåËôöÊãüÊú∫‰ºö‰øùËØÅÂú®Â≠êÁ±ªÁöÑ&lt;init&gt;()ÊñπÊ≥ïÊâßË°å‰πãÂâçÔºåÁà∂Á±ªÁöÑ&lt;init&gt;()ÊñπÊ≥ïÂ∑≤ÁªèÊâßË°åÂÆåÊØï„ÄÇÂõ†Ê≠§ËôöÊãüÊú∫‰∏≠Á¨¨‰∏Ä‰∏™Ë¢´ÊâßË°åÁöÑ&lt;init&gt;()ÊñπÊ≥ïÁöÑÁ±ªËÇØÂÆöÊòØ java.lang.Object„ÄÇ</li>
<li>ËôöÊãüÊú∫ÂøÖÈ°ª‰øùËØÅ‰∏Ä‰∏™Á±ªÁöÑ  &lt;clinit&gt;()  ÊñπÊ≥ïÂú®Â§öÁ∫øÁ®ã‰∏ãË¢´ÂêåÊ≠•Âä†ÈîÅ„ÄÇÂ¶ÇÊûúÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂéªÂàùÂßãÂåñ‰∏Ä‰∏™Á±ªÔºåÈÇ£‰πàÂè™‰ºöÊúâ‰∏Ä‰∏™Á∫øÁ®ãÂéªÊâßË°åËøô‰∏™Á±ªÁöÑ&lt;clinit&gt;() ÊñπÊ≥ïÔºåÂÖ∂‰ªñÁöÑÁ∫øÁ®ãÈÉΩÈúÄË¶ÅÈòªÂ°ûÁ≠âÂæÖÔºåÁõ¥Âà∞Ê¥ªÂä®Á∫øÁ®ãÊâßË°å&lt;clinit&gt;() ÊñπÊ≥ïÂÆåÊØï„ÄÇÂ¶ÇÊûúÂú®‰∏Ä‰∏™Á±ªÁöÑ&lt;clinit&gt;() ÊñπÊ≥ï‰∏≠ÊúâÂæàËÄóÊó∂ÁöÑÊìç‰ΩúÔºåÈÇ£‰πàÂèØËÉΩÈÄ†ÊàêÂ§ö‰∏™ËøõÁ®ãÁöÑÈòªÂ°û„ÄÇ</li>
</ul>
<h2 id="Á±ª‰∏ç‰ºöÈáçÂ§çÂä†ËΩΩ"><a href="#Á±ª‰∏ç‰ºöÈáçÂ§çÂä†ËΩΩ" class="headerlink" title="Á±ª‰∏ç‰ºöÈáçÂ§çÂä†ËΩΩ"></a>Á±ª‰∏ç‰ºöÈáçÂ§çÂä†ËΩΩ</h2><p><img src="/p/2b3d9fc3/JVM%E7%B1%BB%E4%B8%8D%E4%BC%9A%E9%87%8D%E5%A4%8D%E5%8A%A0%E8%BD%BD.png" alt="image-20210725224111099"></p>
<h2 id="Á±ªÁöÑÂç∏ËΩΩ"><a href="#Á±ªÁöÑÂç∏ËΩΩ" class="headerlink" title="Á±ªÁöÑÂç∏ËΩΩ"></a>Á±ªÁöÑÂç∏ËΩΩ</h2><p>Êª°Ë∂≥‰∏§‰∏™Êù°‰ª∂Â∞±‰ºöË¢´Âç∏ËΩΩÔºö</p>
<p>1„ÄÅËØ•ClassÊâÄÊúâÁöÑÂÆû‰æãÈÉΩÂ∑≤ÁªèË¢´GCÔºõ</p>
<p>2„ÄÅÂä†ËΩΩËØ•Á±ªÁöÑClassLoaderÂÆû‰æãÂ∑≤ÁªèË¢´GCÔºõ</p>
<p>È™åËØÅÊñπÂºèÔºöJVMÂêØÂä®‰∏≠Â¢ûÂä† <code>-verbose:class</code>ÂèÇÊï∞ÔºåËæìÂá∫Á±ªÂä†ËΩΩÂíåÂç∏ËΩΩÁöÑÊó•Âøó‰ø°ÊÅØ„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÂàÜÂå∫‰∏éÁ®ãÂ∫èËøêË°åÂéüÁêÜ</title>
    <url>/p/df88bc10.html</url>
    <content><![CDATA[<html><head></head><body><p>classÊñá‰ª∂ÂåÖÂê´JAVAÁ®ãÂ∫èÊâßË°åÁöÑÂ≠óËäÇÁ†Å;Êï∞ÊçÆ‰∏•Ê†ºÊåâÁÖßÊ†ºÂºèÁ¥ßÂáëÊéíÂàóÂú®classÊñá‰ª∂‰∏≠ÁöÑ‰∫åËøõÂà∂ÊµÅÔºå‰∏≠Èó¥Êó†‰ªª‰ΩïÂàÜÈöîÁ¨¶;Êñá‰ª∂ÂºÄÂ§¥Êúâ‰∏Ä‰∏™0xcafebabe(16ËøõÂà∂)ÁâπÊÆäÁöÑ‰∏Ä‰∏™Ê†áÂøó„ÄÇ</p>
<p>Â≠òÊîæÊúâÔºöJDKÁâàÊú¨„ÄÅËÆøÈóÆÊ†áÂøó„ÄÅÂ∏∏ÈáèÊ±†„ÄÅÂΩìÂâçÁ±ª„ÄÅË∂ÖÁ∫ßÁ±ª„ÄÅÊé•Âè£„ÄÅÂ≠óÊÆµ„ÄÅÊñπÊ≥ï„ÄÅÂ±ûÊÄßÔºåËøô‰∫õÊñá‰ª∂ÊòØÊúâÂ§çÊùÇÊ†ºÂºèÁöÑÔºå‰∏ìÈó®ÁªôJVMËØªÈáåÈù¢ÁöÑÂÜÖÂÆπÔºåÂèØ‰ª•ÂÄüÂä©Â∑•ÂÖ∑Êü•ÁúãÂ≠óËäÇÁ†ÅÊñá‰ª∂„ÄÇ</p>
<h2 id="JVMÂàÜÂå∫"><a href="#JVMÂàÜÂå∫" class="headerlink" title="JVMÂàÜÂå∫"></a>JVMÂàÜÂå∫</h2><p><img src="/p/df88bc10/image-20220306165204228.png" alt="image-20220306165204228"></p>
<p>JDK1.8Âú®ÊñπÊ≥ïÂå∫‰∏≠ÊúâËæÉÂ§ßÁöÑÊîπÂä®Ôºö</p>
<ul>
<li>ÁßªÈô§‰∫ÜÊ∞∏‰πÖ‰ª£ÔºàPermGenÔºâÔºåÊõøÊç¢‰∏∫ÂÖÉÁ©∫Èó¥ÔºàMetaspaceÔºâÔºõ</li>
<li>Ê∞∏‰πÖ‰ª£‰∏≠ÁöÑ class metadata ËΩ¨ÁßªÂà∞‰∫Ü native memoryÔºàÊú¨Âú∞ÂÜÖÂ≠òÔºåËÄå‰∏çÊòØËôöÊãüÊú∫ÔºâÔºõ</li>
<li>Ê∞∏‰πÖ‰ª£‰∏≠ÁöÑ interned Strings Âíå class static variables ËΩ¨ÁßªÂà∞‰∫Ü Java heapÔºõ</li>
<li>Ê∞∏‰πÖ‰ª£ÂèÇÊï∞ ÔºàPermSize MaxPermSizeÔºâ -&gt; ÂÖÉÁ©∫Èó¥ÂèÇÊï∞ÔºàMetaspaceSize MaxMetaspaceSizeÔºâÔºõ</li>
</ul>
<p><img src="/p/df88bc10/image-20220306165242400.png" alt="image-20220306165242400"></p>
<h3 id="Â†ÜÂÜÖÂ≠ò"><a href="#Â†ÜÂÜÖÂ≠ò" class="headerlink" title="Â†ÜÂÜÖÂ≠ò"></a>Â†ÜÂÜÖÂ≠ò</h3><p><img src="/p/df88bc10/image-20220306165302672.png" alt="image-20220306165302672"></p>
<h3 id="ËôöÊãüÊú∫Ê†à"><a href="#ËôöÊãüÊú∫Ê†à" class="headerlink" title="ËôöÊãüÊú∫Ê†à"></a>ËôöÊãüÊú∫Ê†à</h3><img src="/p/df88bc10/JVMËôöÊãüÊú∫Ê†àÂå∫.png" alt="image-20210411134428910" style="zoom:110%;">

<h3 id="Êú¨Âú∞ÊñπÊ≥ïÊ†à"><a href="#Êú¨Âú∞ÊñπÊ≥ïÊ†à" class="headerlink" title="Êú¨Âú∞ÊñπÊ≥ïÊ†à"></a>Êú¨Âú∞ÊñπÊ≥ïÊ†à</h3><img src="/p/df88bc10/JVMÊú¨Âú∞ÊñπÊ≥ïÊ†à.png" alt="image-20210411135011461" style="zoom:110%;">

<h3 id="Á®ãÂ∫èËÆ°Êï∞Âô®"><a href="#Á®ãÂ∫èËÆ°Êï∞Âô®" class="headerlink" title="Á®ãÂ∫èËÆ°Êï∞Âô®"></a>Á®ãÂ∫èËÆ°Êï∞Âô®</h3><img src="/p/df88bc10/JVMÁ®ãÂ∫èËÆ°Êï∞Âô®-16465568468561.png" alt="image-20210411134803099" style="zoom:110%;">

<img src="/p/df88bc10/JavaÁ®ãÂ∫èÁºñËØëÂéüÁêÜÔºà1Ôºâ-16465568468572.png" alt="image-20210411141220263" style="zoom:110%;">

<h2 id="JVMÂ±ÇÈù¢‚Äî‚ÄîÁ®ãÂ∫èËøêË°åÂÆåÊï¥ÂàÜÊûê"><a href="#JVMÂ±ÇÈù¢‚Äî‚ÄîÁ®ãÂ∫èËøêË°åÂÆåÊï¥ÂàÜÊûê" class="headerlink" title="JVMÂ±ÇÈù¢‚Äî‚ÄîÁ®ãÂ∫èËøêË°åÂÆåÊï¥ÂàÜÊûê"></a>JVMÂ±ÇÈù¢‚Äî‚ÄîÁ®ãÂ∫èËøêË°åÂÆåÊï¥ÂàÜÊûê</h2><p>Êü•ÁúãÂ≠óËäÇÁ†ÅÊñá‰ª∂ÂÜÖÂÆπÔºà.classÔºâÔºö</p>
<p>1„ÄÅJavap -v xxx.class ÊâìÂç∞Âú®ÊéßÂà∂Âè∞</p>
<p>2„ÄÅJavap -v xxx.class &gt; xxx.txt ËæìÂá∫Âà∞xxx.txtËÆ∞‰∫ãÊú¨‰∏≠</p>
<p><img src="/p/df88bc10/%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%E6%A0%87%E5%BF%97-16465568468573.png" alt="image-20210411225956114"></p>
<p><img src="/p/df88bc10/%E5%AD%97%E8%8A%82%E7%A0%81%E5%86%85%E5%AE%B9-%E5%B8%B8%E9%87%8F%E6%B1%A0-16465568468574.png" alt="image-20210411230118748"></p>
<p>Â∞Ü Demo1 Á±ª‰ΩøÁî®Java.exeÁºñËØëÊàêÂ≠óËäÇÁ†ÅÊñá‰ª∂ÔºàclassÔºâ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">500</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> x / y;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line">        System.out.println(a + b);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ΩøÁî®JavapÊü•ÁúãÂ≠óËäÇÁ†ÅÊñá‰ª∂</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">D:\jdk1<span class="number">.8</span>\bin&gt;javap.exe -v E:\demo\target\classes\cn\com\demo\test\Demo1.<span class="keyword">class</span></span><br><span class="line"><span class="title class_">Classfile</span> /E:\demo\target\classes\cn\com\demo\test\Demo1.<span class="keyword">class</span></span><br><span class="line">  <span class="title class_">Last</span> modified <span class="number">2021</span>-<span class="number">4</span>-<span class="number">11</span>; size <span class="number">620</span> bytes</span><br><span class="line">  MD5 checksum 71c6b97950ddc7fb31e028064d2763c0</span><br><span class="line">  Compiled from <span class="string">"Demo1.java"</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">cn</span>.com.demo.test.Demo1</span><br><span class="line">  minor version: <span class="number">0</span>  <span class="comment">// Ê¨°ÁâàÊú¨Âè∑</span></span><br><span class="line">  major version: <span class="number">52</span> <span class="comment">// ‰∏ªÁâàÊú¨Âè∑ÔºöJDK5,6,7,8 ÂØπÂ∫î49,50,51,52</span></span><br><span class="line">  flags: ACC_PUBLIC, ACC_SUPER <span class="comment">// ËÆøÈóÆÊ†áÂøó</span></span><br><span class="line">Constant pool:</span><br><span class="line">   #<span class="number">1</span> = Methodref          #<span class="number">5.</span>#<span class="number">24</span>         <span class="comment">// java/lang/Object."&lt;init&gt;":()V</span></span><br><span class="line">   #<span class="number">2</span> = Fieldref           #<span class="number">25.</span>#<span class="number">26</span>        <span class="comment">// java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">   #<span class="number">3</span> = Methodref          #<span class="number">27.</span>#<span class="number">28</span>        <span class="comment">// java/io/PrintStream.println:(I)V</span></span><br><span class="line">   #<span class="number">4</span> = Class              #<span class="number">29</span>            <span class="comment">// cn/com/newdoone/test/Demo1</span></span><br><span class="line">   #<span class="number">5</span> = Class              #<span class="number">30</span>            <span class="comment">// java/lang/Object</span></span><br><span class="line">   #<span class="number">6</span> = Utf8               &lt;init&gt;</span><br><span class="line">   #<span class="number">7</span> = Utf8               ()V</span><br><span class="line">   #<span class="number">8</span> = Utf8               Code</span><br><span class="line">   #<span class="number">9</span> = Utf8               LineNumberTable</span><br><span class="line">  #<span class="number">10</span> = Utf8               LocalVariableTable</span><br><span class="line">  #<span class="number">11</span> = Utf8               <span class="built_in">this</span></span><br><span class="line">  #<span class="number">12</span> = Utf8               Lcn/com/newdoone/test/Demo1;</span><br><span class="line">  #<span class="number">13</span> = Utf8               main</span><br><span class="line">  #<span class="number">14</span> = Utf8               ([Ljava/lang/String;)V</span><br><span class="line">  #<span class="number">15</span> = Utf8               args</span><br><span class="line">  #<span class="number">16</span> = Utf8               [Ljava/lang/String;</span><br><span class="line">  #<span class="number">17</span> = Utf8               x</span><br><span class="line">  #<span class="number">18</span> = Utf8               I</span><br><span class="line">  #<span class="number">19</span> = Utf8               y</span><br><span class="line">  #<span class="number">20</span> = Utf8               a</span><br><span class="line">  #<span class="number">21</span> = Utf8               b</span><br><span class="line">  #<span class="number">22</span> = Utf8               SourceFile</span><br><span class="line">  #<span class="number">23</span> = Utf8               Demo1.java</span><br><span class="line">  #<span class="number">24</span> = NameAndType        #<span class="number">6</span>:#<span class="number">7</span>          <span class="comment">// "&lt;init&gt;":()V</span></span><br><span class="line">  #<span class="number">25</span> = Class              #<span class="number">31</span>            <span class="comment">// java/lang/System</span></span><br><span class="line">  #<span class="number">26</span> = NameAndType        #<span class="number">32</span>:#<span class="number">33</span>        <span class="comment">// out:Ljava/io/PrintStream;</span></span><br><span class="line">  #<span class="number">27</span> = Class              #<span class="number">34</span>            <span class="comment">// java/io/PrintStream</span></span><br><span class="line">  #<span class="number">28</span> = NameAndType        #<span class="number">35</span>:#<span class="number">36</span>        <span class="comment">// println:(I)V</span></span><br><span class="line">  #<span class="number">29</span> = Utf8               cn/com/newdoone/test/Demo1</span><br><span class="line">  #<span class="number">30</span> = Utf8               java/lang/Object</span><br><span class="line">  #<span class="number">31</span> = Utf8               java/lang/System</span><br><span class="line">  #<span class="number">32</span> = Utf8               out</span><br><span class="line">  #<span class="number">33</span> = Utf8               Ljava/io/PrintStream;</span><br><span class="line">  #<span class="number">34</span> = Utf8               java/io/PrintStream</span><br><span class="line">  #<span class="number">35</span> = Utf8               println</span><br><span class="line">  #<span class="number">36</span> = Utf8               (I)V</span><br><span class="line">{</span><br><span class="line">  <span class="comment">// Âú®Á±ª‰∏≠Ê≤°ÊúâÂÜôÊûÑÈÄ†ÊñπÊ≥ïÔºå‰ΩÜÂú®Ê≠§Â§ÑÊúâ‰∏Ä‰∏™ÊûÑÈÄ†ÊñπÊ≥ï</span></span><br><span class="line">  <span class="comment">// Áî±Ê≠§ÂèØËßÅÔºåÊ≤°ÊúâÂÆö‰πâÊûÑÈÄ†ÂáΩÊï∞Êó∂Ôºå‰ºöÊúâÈöêÂºèÁöÑÊó†ÂèÇÊûÑÈÄ†ÂáΩÊï∞„ÄÇ</span></span><br><span class="line">  <span class="keyword">public</span> cn.com.demo.test.Demo1();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object."&lt;init&gt;":()V</span></span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">6</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  <span class="built_in">this</span>   Lcn/com/newdoone/test/Demo1;</span><br><span class="line"> <span class="comment">// Á®ãÂ∫èÂÖ•Âè£mainÊñπÊ≥ï</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(java.lang.String[])</span>;</span><br><span class="line">    descriptor: ([Ljava/lang/String;)V</span><br><span class="line">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      <span class="comment">// Êú¨Âú∞ÂèòÈáèÊï∞Èáè„ÄÅÂèÇÊï∞Êï∞Èáè„ÄÅÊñπÊ≥ïÂØπÂ∫îÊ†àÂ∏ß‰∏≠Êìç‰ΩúÊï∞Ê†àÁöÑÊ∑±Â∫¶</span></span><br><span class="line">      stack=<span class="number">3</span>, locals=<span class="number">5</span>, args_size=<span class="number">1</span> </span><br><span class="line">       <span class="comment">// ‰∏ãÈù¢ÊòØ‰∏Ä‰∫õJVMÊâßË°åËøô‰∫õÊ∫êÁ†ÅÁºñËØëËøáÂêéÁöÑÊåá‰ª§Á†Å</span></span><br><span class="line">       <span class="comment">// javap ÁøªËØëÂá∫Êù•ÊòØÊìç‰ΩúÁ¨¶ÔºåclassÊñá‰ª∂ÂÜÖÂ≠òÂÇ®ÁöÑÊòØÊåá‰ª§Á†Å</span></span><br><span class="line">       <span class="comment">// ÂâçÈù¢ÁöÑÊï∞Â≠óÊòØÂÅèÁßªÈáèÔºàÂ≠óËäÇÔºâÔºåJVMÊ†πÊçÆËøô‰∏™ÂéªÂå∫ÂàÜ‰∏çÂêåÁöÑÊåá‰ª§ÔºåËØ¶ÊÉÖËßÅ„ÄäJVMÊåá‰ª§Á†ÅË°®„ÄãÔºåÂú®Êú¨ÁØáÊñáÁ´†‰∏ãÈù¢„ÄÇ</span></span><br><span class="line">         <span class="number">0</span>: sipush        <span class="number">500</span></span><br><span class="line">         <span class="number">3</span>: istore_1</span><br><span class="line">         <span class="number">4</span>: sipush        <span class="number">200</span></span><br><span class="line">         <span class="number">7</span>: istore_2</span><br><span class="line">         <span class="number">8</span>: iload_1</span><br><span class="line">         <span class="number">9</span>: iload_2</span><br><span class="line">        <span class="number">10</span>: idiv</span><br><span class="line">        <span class="number">11</span>: istore_3</span><br><span class="line">        <span class="number">12</span>: bipush        <span class="number">50</span></span><br><span class="line">        <span class="number">14</span>: istore        <span class="number">4</span></span><br><span class="line">        <span class="number">16</span>: getstatic     #<span class="number">2</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">        <span class="number">19</span>: iload_3</span><br><span class="line">        <span class="number">20</span>: iload         <span class="number">4</span></span><br><span class="line">        <span class="number">22</span>: iadd</span><br><span class="line">        <span class="number">23</span>: invokevirtual #<span class="number">3</span>                  <span class="comment">// Method java/io/PrintStream.println:(I)V</span></span><br><span class="line">        <span class="number">26</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">8</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">9</span>: <span class="number">4</span></span><br><span class="line">        line <span class="number">10</span>: <span class="number">8</span></span><br><span class="line">        line <span class="number">11</span>: <span class="number">12</span></span><br><span class="line">        line <span class="number">12</span>: <span class="number">16</span></span><br><span class="line">        line <span class="number">13</span>: <span class="number">26</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">27</span>     <span class="number">0</span>  args   [Ljava/lang/String;</span><br><span class="line">            <span class="number">4</span>      <span class="number">23</span>     <span class="number">1</span>     x   I</span><br><span class="line">            <span class="number">8</span>      <span class="number">19</span>     <span class="number">2</span>     y   I</span><br><span class="line">           <span class="number">12</span>      <span class="number">15</span>     <span class="number">3</span>     a   I</span><br><span class="line">           <span class="number">16</span>      <span class="number">11</span>     <span class="number">4</span>     b   I</span><br><span class="line">}</span><br><span class="line">SourceFile: <span class="string">"Demo1.java"</span></span><br></pre></td></tr></tbody></table></figure>

<p>Á¨¨‰∏ÄÊ≠•ÔºåÂä†ËΩΩ„ÄÇÂ∞ÜÊàë‰ª¨ÂÜôÁöÑ‰ª£Á†ÅÁºñËØë‰∏∫Â≠óËäÇÁ†ÅÔºåÂ∞ÜÂ≠óËäÇÁ†ÅÂä†ËΩΩÂà∞ÊñπÊ≥ïÂå∫ÔºåÂÖ∂‰∏≠Á±ª‰ø°ÊÅØÂä†ËΩΩÂà∞ÊñπÊ≥ïÂå∫ÔºåÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÂä†ËΩΩÂà∞Â∏∏ÈáèÊ±†„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%80%EF%BC%89-16465568468575.png" alt="image-20210411232445707"></p>
<p>Á¨¨‰∫åÊ≠•ÔºåËøêË°å„ÄÇJVMÂàõÂª∫Á∫øÁ®ãÊù•ÊâßË°å‰ª£Á†ÅÔºåÊ∂âÂèäÂà∞Á∫øÁ®ãÔºåÈÇ£‰πàËôöÊãüÊú∫Ê†àÂíåÁ®ãÂ∫èËÆ°Êï∞Âô®Â∞±‰ºöÂàÜÈÖç‰∏Ä‰∏™ÂΩìÂâçÁ∫øÁ®ãÁã¨Âç†ÁöÑÁ©∫Èó¥ÔºåÁî®Êù•‰øùÂ≠òÂΩìÂâçÁ∫øÁ®ãÊâßË°åÊåá‰ª§Á†ÅÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%8C%EF%BC%89-16465568468576.png" alt="image-20210411233544796"></p>
<p>ÂºÄÂßãÊâßË°åÊìç‰ΩúÁ†ÅÔºàÂä©ËÆ∞Á¨¶ÔºâÔºåÁªìÂêà„ÄäJVMÊåá‰ª§Á†ÅË°®„ÄãÊù•Áúã„ÄÇÈÄöËøá‰∏äÈù¢ÁöÑÂ≠óËäÇÁ†ÅÊñá‰ª∂‰∏≠ÂèØ‰ª•ÂæóÂá∫ÔºåÊúâ5‰∏™Êú¨Âú∞ÂèòÈáèÔºåÂèòÈáè0ÊòØÊñπÊ≥ïÂèÇÊï∞args„ÄÇ</p>
<p>ÊâßË°å sipush 500 Êìç‰ΩúÁ†ÅÔºåsipushÁöÑÊÑèÊÄùÊòØ(valuebyte1 &lt;&lt; 8) | valuebyte2 ÂÄºÂ∏¶Á¨¶Âè∑Êâ©Â±ïÊàêintÂÄºÂÖ•Ê†à„ÄÇ‰πüÂ∞±ÊòØËØ¥Â∞Ü500ÂéãÂÖ•Êìç‰ΩúÊï∞Ê†à„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%89%EF%BC%89-16465568468577.png" alt="image-20210411234151590"></p>
<p>Á®ãÂ∫èËÆ°Êï∞Âô®‰øùÂ≠òÁöÑÂΩìÂâçÁ∫øÁ®ãÊâßË°å‰ΩçÁΩÆ‰∏∫3Ôºåistore_1 Â∞ÜÊìç‰ΩúÊï∞Ê†à‰∏≠ÁöÑ500‰øùÂ≠òÂà∞Êú¨Âú∞ÂèòÈáèË°®Â∫èÂè∑‰∏∫1ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E5%9B%9B%EF%BC%89-16465568468578.png" alt="image-20210411234834340"></p>
<p>Á®ãÂ∫èËÆ°Êï∞Âô®‰øùÂ≠òÁöÑÂΩìÂâçÁ∫øÁ®ãÊâßË°å‰ΩçÁΩÆ‰∏∫4Ôºåbipush 100 Â∞Ü100ÂéãÂÖ•Êìç‰ΩúÊï∞Ê†àÔºåbipush ÁöÑÊÑèÊÄùÊòØ valuebyteÂÄºÂ∏¶Á¨¶Âè∑Êâ©Â±ïÊàêintÂÄºÂÖ•Ê†à„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E4%BA%94%EF%BC%89-16465568468579.png" alt="image-20210411235134311"></p>
<p>Á®ãÂ∫èËÆ°Êï∞Âô®‰øùÂ≠òÁöÑÂΩìÂâçÁ∫øÁ®ãÊâßË°å‰ΩçÁΩÆ‰∏∫6Ôºåistore_2 Â∞ÜÊìç‰ΩúÊï∞Ê†à‰∏≠ÁöÑ100ÂéãÂÖ•Êú¨Âú∞ÂèòÈáèË°®‰∏≠Â∫èÂè∑‰∏∫2ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E5%85%AD%EF%BC%89-164655684685810.png" alt="image-20210411235413503"></p>
<p>iload_1Âíåiload_2 ÂàÜÂà´ËØªÂèñÊú¨Âú∞ÂèòÈáèË°®‰∏≠Â∫èÂè∑‰∏∫1Âíå2ÁöÑÂÄºÂéãÂÖ•Êìç‰ΩúÊï∞Ê†àÔºåidiv Â∞ÜÊ†àÈ°∂ÁöÑ‰∏§‰∏™ intÁ±ªÂûãÊï∞Áõ∏Èô§ÔºåÁªìÊûúÂÖ•Ê†à 500/100 = 5Ôºåistore_3 ‰øùÂ≠òÂú®Êú¨Âú∞ÂèòÈáèË°®‰∏≠ÁöÑ3ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%83%EF%BC%89-164655684685811.png" alt="image-20210411235703594"></p>
<p>bipush 50 Â∞Ü50ÂéãÂÖ•Ê†à‰∏≠Ôºåistore_4 ‰øùÂ≠òÂú®Êú¨Âú∞ÂèòÈáèË°®4ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E5%85%AB%EF%BC%89-164655684685812.png" alt="image-20210412000117859"></p>
<p>getstatic #2 Ë°®Á§∫Ëé∑ÂèñÂ∏∏ÈáèÊ±†‰∏≠Á¨¨2‰∏™Â±ûÊÄßÁöÑÂºïÁî®ÔºåÂéãÂÖ•Êìç‰ΩúÊï∞Ê†à„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E4%B9%9D%EF%BC%89-164655684685813.png" alt="image-20210412000326682"></p>
<p>iload_3Âíå iload_4 ÂèñÂá∫Êú¨Âú∞ÂèòÈáèË°®‰∏≠Á¨¨3ÂíåÁ¨¨4ÁöÑÂÄºÂéãÂÖ•Ê†à‰∏≠„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E5%8D%81%EF%BC%89-164655684685814.png" alt="image-20210412000541845"></p>
<p>iadd Áõ∏Âä†„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89-164655684685815.png" alt="image-20210412000708796"></p>
<p>invokevirtual #3 ÔºåÂéüÊù•ÁöÑÊñπÊ≥ï‰∏çÊé•ÁùÄÊâßË°å‰∫ÜÔºåÁ®ãÂ∫èËÆ°Êï∞Âô®ÈáçÊñ∞ÂºÄÂßãËÆ°Êï∞ÔºåÊâßË°åÂÖ∂ÂÆÉÊñπÊ≥ïÂÆåÊØï‰πãÂêéÔºåÂú®ÁªßÁª≠ÊâßË°åmainÊñπÊ≥ïÂØπÂ∫îÁöÑÊ†àÂ∏ß„ÄÇ</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89-164655684685816.png" alt="image-20210412001042190"></p>
<p>ÊâßË°åÁªìÊùü</p>
<p><img src="/p/df88bc10/%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%EF%BC%88%E5%8D%81%E4%B8%89%EF%BC%89-164655684685817.png" alt="image-20210412001128690"></p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÂèëÂ±ïÂéÜÁ®ã</title>
    <url>/p/a270ae4b.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="JavaÂèëÂ±ïÁöÑÈáçÂ§ß‰∫ã‰ª∂"><a href="#JavaÂèëÂ±ïÁöÑÈáçÂ§ß‰∫ã‰ª∂" class="headerlink" title="JavaÂèëÂ±ïÁöÑÈáçÂ§ß‰∫ã‰ª∂"></a>JavaÂèëÂ±ïÁöÑÈáçÂ§ß‰∫ã‰ª∂</h2><ul>
<li>1990Âπ¥ÔºåÂú®sunÂÖ¨Âè∏‰∏≠ÔºåÁî±Patrick naughton„ÄÅmikesheridan‰ª•Âèäjames GoslingÈ¢ÜÂØºÁöÑÂ∞èÁªÑGreen TeamÔºåÂºÄÂèëÂá∫Êñ∞ÁöÑÁ®ãÂ∫èËØ≠Ë®ÄÔºåÂëΩÂêç‰∏∫OAKÔºåÂêéÊúüÊõ¥Âêç‰∏∫Java</li>
<li>1995Âπ¥ÔºåsunÊ≠£ÂºèÂèëÂ∏ÉJavaÂíåhotJAVA‰∫ßÂìÅÔºåJavaÈ¶ñÊ¨°ÂÖ¨ÂºÄ‰∫ÆÁõ∏„ÄÇ</li>
<li>1996Âπ¥1Êúà23Êó•sun MicrosystemsÂèëÂ∏É‰∫ÜJDK1.0.</li>
<li>1998Âπ¥ÔºåJDK1.2ÁâàÊú¨ÂèëÂ∏É„ÄÇÂêåÊó∂ÔºåsunÂèëÂ∏É‰∫ÜJSP/Servlet„ÄÅEJBËßÑËåÉÔºå‰ª•ÂèäÂ∞ÜJavaÂàÜÊàê‰∫ÜJ2EE„ÄÅJ2SEÂíåJ2ME„ÄÇËøôË°®ÊòéJavaÂºÄÂßãÂêë‰ºÅ‰∏ö„ÄÅÊ°åÈù¢Â∫îÁî®ÂíåÁßªÂä®ËÆæÂ§áÂ∫îÁî®3Â§ßÈ¢ÜÂüüÊå∫Ëøõ„ÄÇ</li>
<li>2000Âπ¥ÔºåJDK1.3ÂèëÂ∏ÉÔºåJava HotSpot Virtual MachineÊ≠£ÂºèÂèëÂ∏ÉÔºåÊàê‰∏∫JavaÈªòËÆ§ÁöÑËôöÊãüÊú∫„ÄÇ</li>
<li>2002Âπ¥ÔºåJDK 1.4ÂèëÂ∏ÉÔºåÂè§ËÄÅÁöÑclassicËôöÊãüÊú∫ÈÄÄÂá∫ÂéÜÂè≤ËàûÂè∞„ÄÇ</li>
<li>2003Âπ¥Â∫ïÔºåJavaÂπ≥Âè∞ÁöÑscalaÊ≠£ÂºèÂèëÂ∏ÉÔºåÂêåÂπ¥Groovy‰πüÂä†ÂÖ•‰∫ÜJavaÈòµËê•„ÄÇ</li>
<li>2004Âπ¥ÔºåJDK1.5ÂèëÂ∏ÉÔºåÂêåÊó∂JDK1.5ÊîπÂêç‰∏∫JavaSE5.0.</li>
<li>2006Âπ¥ÔºåJDK 6ÂèëÂ∏ÉÔºåÂêåÂπ¥JavaÂºÄÊ∫êÂπ∂Âª∫Á´ã‰∫ÜopenJDKÔºåÈ°∫ÁêÜÊàêÁ´†ÔºåHotspotËôöÊãüÊú∫Êàê‰∏∫‰∫ÜOpenJDK‰∏≠ÈªòËÆ§ÁöÑËôöÊãüÊú∫„ÄÇ</li>
<li>2007Âπ¥ÔºåJavaÂπ≥Âè∞ËøéÊù•‰∫ÜÊñ∞‰ºô‰º¥Clojure„ÄÇ</li>
<li>2008Âπ¥ÔºåOracleÊî∂Ë¥≠‰∫ÜBEAÔºåÂæóÂà∞‰∫ÜJRockitËôöÊãüÊú∫„ÄÇ</li>
<li>2009Âπ¥ÔºåTwitterÂÆ£Â∏ÉÂ∞ÜÂêéÂè∞Â§ßÈÉ®ÂàÜÁ®ãÂ∫è‰ªérubyËøÅÁßªÂà∞ScalaÔºåËøôÊòØJavaÂπ≥Âè∞ÁöÑÊúâ‰∏ÄÊ¨°Â§ßËßÑÊ®°Â∫îÁî®„ÄÇ</li>
<li>2010Âπ¥ÔºåOracleÊî∂Ë¥≠‰∫ÜsunÔºåËé∑ÂæóJavaÂïÜÊ†áÂíåÊúÄÂÖ∑‰ª∑ÂÄºÁöÑhotspotËôöÊãüÊú∫„ÄÇÊ≠§Êó∂OracleÊã•ÊúâÂ∏ÇÂú∫Âç†Áî®ÁéáÊúÄÈ´òÁöÑ‰∏§Ê¨æËôöÊãüÊú∫hotspotÂíåJRockitÔºåÂπ∂‰∏îËÆ°ÂàíÊú™Êù•ËøõË°åÊï¥ÂêàÔºöHotRockit„ÄÇ</li>
<li>2011Âπ¥ÔºåJDK7ÂèëÂ∏ÉÔºåÂú®JDKÔºë.7ÔΩï4‰∏≠ÔºåÊ≠£ÂºèÂêØÁî®‰∫ÜÊñ∞ÁöÑÂûÉÂúæÂõûÊî∂Âô®G1.</li>
<li>2017Âπ¥ÔºåJDK9ÂèëÂ∏ÉÔºåÂ∞ÜG1ËÆæÁΩÆ‰∏∫ÈªòËÆ§GCÔºåÊõø‰ª£CMS„ÄÇ</li>
<li>2017ÂêåÂπ¥ÔºåIBMÁöÑJ9ÂºÄÊ∫êÔºåÂΩ¢Êàê‰∫ÜÁé∞Âú®ÁöÑopen J9Á§æÂå∫„ÄÇ</li>
<li>2018Âπ¥ÔºåAndroidÁöÑJava‰æµÊùÉÊ°àÂà§ÂÜ≥ÔºåGoogleÂÖ¨Âè∏ËµîÂÅøOracleÊÄªËÆ°88‰∫øÁæéÂÖÉ„ÄÇ</li>
<li>2018ÂêåÂπ¥ÔºåOracleÂÆ£Â∏ÉJavaEEÊàê‰∏∫ÂéÜÂè≤ÂêçËØçÔºåJDBC„ÄÅJMS„ÄÅServletËµ†‰∏éEclipseÂü∫Èáë‰ºö„ÄÇ</li>
<li>2018ÂêåÂπ¥ÔºåJDK11ÂèëÂ∏ÉÔºåLTSÁâàÊú¨ÁöÑJDKÔºåÂèëÂ∏ÉÈù©ÂëΩÊÄßÁöÑZGCÔºåË∞ÉÊï¥JDKÊéàÊùÉËÆ∏ÂèØ„ÄÇ</li>
<li>2019Âπ¥ÔºåJDK12ÂèëÂ∏ÉÔºåÂä†ÂÖ•RedHatÈ¢ÜÂØºÂºÄÂèëÁöÑshenandoah GC„ÄÇ</li>
<li>Âú®JDK11‰πãÂâçÔºåOracleJDKËøò‰ºöÂ≠òÂú®‰∏Ä‰∫õopenJDK‰∏≠Ê≤°ÊúâÁöÑ„ÄÅÈó≠Ê∫êÁöÑÂäüËÉΩ„ÄÇ‰ΩÜÂú®JDK11‰∏≠ÔºåopenJDKÂíåOracleJDK‰ª£Á†ÅÂÆûË¥®‰∏äÂ∑≤ÁªèËææÂà∞ÂÆåÂÖ®‰∏ÄËá¥ÁöÑÁ®ãÂ∫¶„ÄÇ</li>
</ul>
<h2 id="JVMÁöÑÂèëÂ±ïÂéÜÁ®ã"><a href="#JVMÁöÑÂèëÂ±ïÂéÜÁ®ã" class="headerlink" title="JVMÁöÑÂèëÂ±ïÂéÜÁ®ã"></a>JVMÁöÑÂèëÂ±ïÂéÜÁ®ã</h2><h3 id="Sun-Classic-VM"><a href="#Sun-Classic-VM" class="headerlink" title="Sun Classic VM"></a>Sun Classic VM</h3><ul>
<li>1996Âπ¥ÈöèJava1.0ÁâàÊú¨ÂèëÂ∏ÉÔºåJDK1.4Êó∂Ë¢´ÂÆåÂÖ®Ê∑òÊ±∞„ÄÇ</li>
<li>ÂÆÉÂè™Êèê‰æõËß£ÈáäÂô®„ÄÇ</li>
<li>Â¶ÇÊûú‰ΩøÁî®JITÁºñËØëÂô®ÔºåÂ∞±ÈúÄË¶ÅËøõË°åÂ§ñÊåÇ„ÄÇ‰ΩÜ‰∏ÄÊó¶‰ΩøÁî®‰∫ÜJITÁºñËØëÂô®ÔºåJIT‰ºöÊé•ÁÆ°ËôöÊãüÊú∫ÁöÑÊâßË°åÁ≥ªÁªü„ÄÇËß£ÈáäÂô®Â∞±‰∏çÂÜçÂ∑•‰ΩúÔºåËß£ÈáäÂô®ÂíåÁºñËØëÂô®‰∏çËÉΩÈÖçÂêàÂ∑•‰Ωú„ÄÇ</li>
<li>Áé∞Âú®hotspotÂÜÖÁΩÆ‰∫ÜÊ≠§ËôöÊãüÊú∫</li>
</ul>
<h3 id="Exact-VM"><a href="#Exact-VM" class="headerlink" title="Exact VM"></a>Exact VM</h3><ul>
<li>‰∏∫‰∫ÜËß£ÂÜ≥‰∏ä‰∏Ä‰∏™ËôöÊãüÊú∫ÈóÆÈ¢òÔºåJDK1.2Êó∂ÔºåSunÊèê‰æõ‰∫ÜÊ≠§ËôöÊãüÊú∫„ÄÇ</li>
<li>Exact ManagementÔºöÂáÜÁ°ÆÂºèÂÜÖÂ≠òÁÆ°ÁêÜ<ul>
<li>ËôöÊãüÊú∫ÂèØ‰ª•Áü•ÈÅìÂÜÖÂ≠ò‰∏≠Êüê‰∏™‰ΩçÁΩÆÁöÑÊï∞ÊçÆÊòØ‰ªÄ‰πàÁ±ªÂûã„ÄÇ</li>
</ul>
</li>
<li>ÂÖ∑Â§áÁé∞‰ª£È´òÊÄßËÉΩËôöÊãüÊú∫ÁöÑÈõèÂΩ¢<ul>
<li>ÁÉ≠ÁÇπÊé¢Êµã</li>
<li>ÁºñËØëÂô®‰∏éËß£ÈáäÂô®Ê∑∑ÂêàÂ∑•‰ΩúÊ®°Âºè</li>
</ul>
</li>
<li>Âè™Âú®SolarisÂπ≥Âè∞Áü≠ÊöÇ‰ΩøÁî®ÔºåÂÖ∂ÂÆÉÂπ≥Âè∞‰∏äËøòÊòØClassic VM<ul>
<li>Ëã±ÈõÑÊ∞îÁü≠ÔºåÁªàË¢´HotspotËôöÊãüÊú∫ÊõøÊç¢</li>
</ul>
</li>
</ul>
<h3 id="Hotspot-VM"><a href="#Hotspot-VM" class="headerlink" title="Hotspot VM"></a>Hotspot VM</h3><ul>
<li>JDK1.3Êó∂ÔºåHotspot VMÊàê‰∏∫ÈªòËÆ§ËôöÊãüÊú∫</li>
<li>ÁõÆÂâçHotspotÂç†ÊúâÁªùÂØπÁöÑÂ∏ÇÂú∫Âú∞‰Ωç„ÄÇ</li>
<li>HotspotÊåáÁöÑÂ∞±ÊòØÁÉ≠ÁÇπ‰ª£Á†ÅÊé¢ÊµãÊäÄÊúØ„ÄÇ<ul>
<li>ÈÄöËøáËÆ°Êï∞Âô®ÊâæÂà∞ÊúÄÂÖ∑ÊúâÁºñËØë‰ª∑ÂÄºÁöÑ‰ª£Á†ÅÔºåËß¶ÂèëÂç≥Êó∂ÁºñËØëÊàñÊ†à‰∏äÊõøÊç¢</li>
<li>ÈÄöËøáÁºñËØëÂô®‰∏éËß£ÈáäÂô®ÂçèÂêåÂ∑•‰ΩúÔºåÂú®ÊúÄ‰ºòÂåñÁöÑÁ®ãÂ∫èÂìçÂ∫îÊó∂Èó¥‰∏éÊúÄ‰Ω≥ÊâßË°åÊÄßËÉΩ‰∏≠ÂèñÂæóÂπ≥Ë°°„ÄÇ</li>
</ul>
</li>
</ul>
<h3 id="BEA-ÁöÑ-JRockit"><a href="#BEA-ÁöÑ-JRockit" class="headerlink" title="BEA ÁöÑ JRockit"></a>BEA ÁöÑ JRockit</h3><ul>
<li>‰∏ìÊ≥®‰∫éÊúçÂä°Âô®Á´ØÂ∫îÁî®<ul>
<li>ÂÆÉÂèØ‰ª•‰∏çÂ§™ÂÖ≥Ê≥®Á®ãÂ∫èÁöÑÂêØÂä®ÈÄüÂ∫¶ÔºåÂõ†Ê≠§JRockit ÂÜÖÈÉ®‰∏çÂåÖÂê´Ëß£ÈáäÂô®ÂÆûÁé∞ÔºåÂÖ®ÈÉ®‰ª£Á†ÅÈÉΩÈù†Âç≥Êó∂ÁºñËØëÂô®ÁºñËØëÂêéÊâßË°å„ÄÇ</li>
</ul>
</li>
<li>Â§ßÈáèÁöÑË°å‰∏öÂü∫ÂáÜÊµãËØïÊòæÁ§∫ÔºåJRockit JVMÊòØ‰∏ñÁïå‰∏äÊúÄÂø´ÁöÑJVM<ul>
<li>ÊòæËëóÁöÑÊÄßËÉΩÊèêÈ´òÔºà‰∏Ä‰∫õË∂ÖËøá‰∫Ü70%ÔºâÂíåÁ°¨‰ª∂ÊàêÊú¨ÁöÑÂáèÂ∞ëÔºàËææ50%)</li>
</ul>
</li>
<li>‰ºòÂäøÂÖ®Èù¢ÁöÑJavaËøêË°åÊó∂Ëß£ÂÜ≥ÊñπÊ°àÁªÑÂêà<ul>
<li>JRockit Èù¢ÂØπÂª∂ËøüÊïèÊÑüÂûãÂ∫îÁî®ÁöÑËß£ÂÜ≥ÊñπÊ°àJRockit Real TimeÊèê‰æõ‰ª•ÊØ´ÁßíÊàñÂæÆÂ¶ôÁ∫ßÁöÑJVMÂìçÂ∫îÊó∂Èó¥ÔºåÈÄÇÂêàË¥¢Âä°„ÄÅÂÜõ‰∫ãÊåáÊå•„ÄÅÁîµ‰ø°ÁΩëÁªúÁöÑÈúÄË¶Å„ÄÇ</li>
<li>Mission ControlÊúçÂä°Â•ó‰ª∂Ôºö‰ª•ÊûÅ‰ΩéÁöÑÂºÄÈîÄÊù•ÁõëÊéß„ÄÅÁÆ°ÁêÜÂíåÂàÜÊûêÁîü‰∫ßÁéØÂ¢É‰∏≠ÁöÑÂ∫îÁî®Á®ãÂ∫èÁöÑÂ∑•ÂÖ∑</li>
</ul>
</li>
<li>2008Âπ¥ÔºåBEAË¢´OracleÊî∂Ë¥≠</li>
<li>OracleÂ§ßËá¥Âú®JDK8Âú®Hotspot‰∏äÁßªÊ§ç‰∫ÜJRockitÁöÑ‰ºòÁßÄÁâπÂæÅ„ÄÇ</li>
</ul>
<h3 id="IBM-ÁöÑJ9"><a href="#IBM-ÁöÑJ9" class="headerlink" title="IBM ÁöÑJ9"></a>IBM ÁöÑJ9</h3><ul>
<li>ÂÖ®Áß∞ÔºöIBM Technology for Java Virtual Machine,ÁÆÄÁß∞IT4JÔºåÂÜÖÈÉ®‰ª£Âè∑ÔºöJ9</li>
<li>Â∏ÇÂú∫ÂÆö‰Ωç‰∏éHotspotÊé•ËøëÔºåÊúçÂä°Âô®Á´Ø„ÄÅÊ°åÈù¢Â∫îÁî®„ÄÅÂµåÂÖ•ÂºèÁ≠âÂ§öÁî®ÈÄîJVM</li>
<li>ÂπøÊ≥õÁî®‰∫éIBMÁöÑÂêÑÁßçJava‰∫ßÂìÅ„ÄÇ</li>
<li>ÁõÆÂâçÔºåÊúâÂΩ±ÂìçÂäõÁöÑ‰∏âÂ§ßÂïÜÁî®ËôöÊãüÊú∫‰πã‰∏ÄÔºå‰πüÊòØÂè∑Áß∞ÊòØ‰∏ñÁïå‰∏äÊúÄÂø´ÁöÑJavaËôöÊãüÊú∫„ÄÇ</li>
<li>2017Âπ¥Â∑¶Âè≥ÔºåIBMÂèëÂ∏É‰∫ÜÂºÄÊ∫êJ9 VMÔºåÂëΩÂêç‰∏∫OpenJ9Ôºå‰∫§ÁªôEclipseÂü∫Èáë‰ºöÁÆ°ÁêÜÔºå‰πüÁß∞‰∏∫ Eclipse OpenJ9</li>
</ul>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>GCË∞É‰ºò</title>
    <url>/p/3eea71e9.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="G1-GC-Ë∞É‰ºòÊåáÂçó"><a href="#G1-GC-Ë∞É‰ºòÊåáÂçó" class="headerlink" title="G1 GC Ë∞É‰ºòÊåáÂçó"></a>G1 GC Ë∞É‰ºòÊåáÂçó</h2><p><a href="https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector.htm">https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector.htm</a></p>
<h3 id="ÂèÇÊï∞Ê®°Êùø"><a href="#ÂèÇÊï∞Ê®°Êùø" class="headerlink" title="ÂèÇÊï∞Ê®°Êùø"></a>ÂèÇÊï∞Ê®°Êùø</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">-Xmx**g -Xms**g -XX:MetaspaceSize=512m -XX:+MaxMetaspaceSize=512m -XX:G1MaxNewSizePercent=50 -XX:G1NewSizePercent=20 -XX:HeapDumpPath=/home/admin/logs -XX:+DisableExplicitGC</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Âü∫Êú¨ËÆæÁΩÆ"><a href="#Âü∫Êú¨ËÆæÁΩÆ" class="headerlink" title="Âü∫Êú¨ËÆæÁΩÆ"></a>Âü∫Êú¨ËÆæÁΩÆ</h3><ul>
<li>ËØ∑Ê†πÊçÆÂÖ∑‰ΩìÊÉÖÂÜµÊåáÂÆöÂèÇÊï∞Ê®°Êùø‰∏≠ÁöÑXmxÂíåXmsÔºåËøô‰∏§‰∏™Êï∞ÂÄº‰∏ÄËà¨ÂÜôÊàê‰∏ÄÊ†∑ÁöÑ<br> ÂÖ∂Êï∞ÂÄºÂèØ‰ª•Ê†πÊçÆ‰∏ãÈù¢ÁöÑÊñπÊ≥ïÊé®ÁÆóÔºö </li>
<li>Âú®Â∫îÁî®Ê≠£Â∏∏ÊâßË°åÊó∂‰ΩøÁî®jmapÊâãÂä®Ëß¶Âèë‰∏ÄÊ¨°full GC, <code>jmap -histo:live </code> <ul>
<li> ÁÑ∂ÂêéËßÇÂØüGCÊó•ÂøóÈáåÈù¢Full GC‰πãÂêéÊï¥‰∏™heapÁöÑÂâ©‰ΩôÁ©∫Èó¥ÔºåËøô‰∏™ÂèØ‰ª•‰º∞ÁÆó‰∏∫Ê¥ªË∑ÉÊï∞ÊçÆÁöÑÊÄªÂ§ßÂ∞èLDS (Live Data Set) </li>
<li> ÁÑ∂ÂêéÊï¥‰∏™heapÁöÑÂ§ßÂ∞èÂèØ‰ª•Áî®ÁªèÈ™åÂÖ¨Âºè Xmx = LDS * f Êù•ËÆ°ÁÆóÔºåÂÖ∂‰∏≠fÂõ†Â≠êÊåâÁÖßÁªèÈ™å‰∏ÄËà¨ÊòØÂèñ3~4„ÄÇ </li>
</ul>
</li>
<li>Êñ∞Áîü‰ª£Â§ßÂ∞è-Xmn**g<br> Èô§ÈùûÁªèËøáÁâπÂà´Ë∞ÉÊ†°ÔºåÂê¶Âàô‰∏çÊé®ËçêÊâãÂä®ÊåáÂÆöG1Êñ∞Áîü‰ª£Â§ßÂ∞èÔºåÂèØËÉΩ‰ºöÂØπG1ÂÜÖÈÉ®ÂèÇÊï∞ÁöÑËá™Âä®Ë∞ÉÊï¥‰∫ßÁîüÂØºËá¥‰∏çÊ≠£Á°ÆÁöÑÂΩ±ÂìçÔºåÊúÄÂùèÊÉÖÂÜµÂèØËÉΩÂØºËá¥È¢ëÁπÅÁöÑFull GC„ÄÇ </li>
</ul>
<blockquote>
<p>G1ÁöÑyoungÂå∫Â§ßÂ∞èÊúâ‰∏â‰∏™Á≠ñÁï•Ôºö1ÔºåÂõ∫ÂÆöÂ§ßÂ∞èÔºõ2ÔºåÂõ∫ÂÆö‰∏äÈôêÔºõ3ÔºåÂõ∫ÂÆö‰∏ä‰∏ãÈôêÔºå Ëøô‰∏™Á≠ñÁï•‰ºöÂú®JVMÂêØÂä®Êó∂Ê†πÊçÆVMÂèÇÊï∞ËøõË°åÈÄâÊã©ÔºåÈªòËÆ§ÊòØ‰ΩøÁî®#3ÔºåÂú®5%ÔΩû60%ÁöÑHeapÂ§ßÂ∞èËåÉÂõ¥ÂÜÖË∞ÉÊï¥„ÄÇ<br>ÂØπ‰∫éËá™Âä®Ë∞ÉÊï¥Á≠ñÁï•ÔºåÂú®Ê†πÊçÆÂéÜÂè≤Êï∞ÊçÆÈ¢ÑÊµãGCÊåáÊ†áÊó∂ÔºåG1ÂÅáËÆæÂêÑÈ°πÊåáÊ†áÊòØÊåâÁÖßÁ∫øÊÄßÂÖ≥Á≥ªÂèòÂåñÁöÑÔºå ÂØπ‰∫éË°å‰∏∫ÂâßÁÉàÂèòÂåñÁöÑÂ∫îÁî®ÔºåG1ÁöÑËá™Âä®Ë∞ÉÊï¥Á≠ñÁï•ÊòØÊúâÂèØËÉΩË¢´Êâì‰π±ÁöÑÔºåÂ¶ÇÊûúÂèëÁé∞youngÂå∫ÁªèÂ∏∏ËøõÂÖ•ÁâπÂà´Â∞è‰∏äÈôêÂØºËá¥È¢ëÁπÅGCÔºåÂèØ‰ª•Â∞ùËØïÔºö<br>1ÔºåË∞ÉÂ§ß-XX:MaxGCPauseMillis ÔºàÈªòËÆ§200Ôºâ<br>2ÔºåËÆæÁΩÆ-XX:+UnlockExperimentalVMOptions -XX:G1NewSizePercent=30ÔºåÊù•ÊääyoungÂå∫‰∏ãÈôêË∞ÉÊï¥Âà∞30ÊàñÂÖ∂‰ªñÊï∞ÂÄºÔºàÊ≥®ÊÑèÔºöÊ≠§Êó∂ÂøÖÈ°ªÂà†Êéâ-Xmn, -XX:NewRatioÁ≠âÂèÇÊï∞ÊâçÂèØ‰ª•ÁîüÊïàÔºâ„ÄÇ</p>
</blockquote>
<ul>
<li><p>ÂØπ‰∫éÂÜÖÂ≠òÂç†Áî®ÊïèÊÑüÁöÑÂ∫îÁî®ÔºåÂèØ‰ª•ËÆæÁΩÆ-XX:G1MaxNewSizePercent=<br>Â¶ÇÊûúÊòØ‰ªéCMSÂàáÊç¢ËøáÊù•ÁöÑÔºåÂèØ‰ª•Â∞ùËØïËÆæÁΩÆvalue=[CMS -Xmn]/[-Xmx] * 100% </p>
</li>
<li><p>ÊöÇÂÅúÊó∂Èó¥-XX:MaxG1PauseMillis=&lt;ÊØ´Áßí&gt;<br>Ëøô‰∏™Êï∞ÂÄºÈªòËÆ§ÊòØ200msÔºåÂ¶ÇÊûú‰∏öÂä°ÊÄßËÉΩÊåáÊ†áÊ≤°ÊúâÂá∫Áé∞ÈóÆÈ¢òÔºåÂπ∂‰∏îÂØπ‰∫éÊöÇÂÅúÊ≤°ÊúâÁâπÂà´Ë¶ÅÊ±ÇÔºå‰∏çÊé®ËçêÊâãÂä®ÊåáÂÆöËøô‰∏™ÂèÇÊï∞„ÄÇËôΩÁÑ∂ËøôÊòØ‰∏™ËΩØÊÄßÈôêÂà∂ÔºåG1Âπ∂‰∏ç‰ºö‰∏•Ê†ºÈÅµÂÆàËøô‰∏™Êó∂Èó¥ÈôêÂà∂Ôºå‰ΩÜËøô‰∏™ÂèÇÊï∞‰ºöÂΩ±ÂìçG1ÂÜÖÈÉ®ÂèÇÊï∞ÁöÑËá™Âä®Ë∞ÉÊï¥ÔºåÂ¶ÇÊûúÊåáÂÆö‰∫Ü‰∏Ä‰∏™ËæÉÂ∞èÁöÑÊöÇÂÅúÊó∂Èó¥ÔºåG1ÂõûÊî∂Âô®ÂèØËÉΩ‰ºö‰∏∫‰∫ÜÂ∞ΩÈáèÊª°Ë∂≥Ëøô‰∏™ÈôêÂà∂ËÄåÂéª‰ΩøÁî®‰∏Ä‰∫õÊØîËæÉÊøÄËøõÁöÑÂèÇÊï∞„ÄÇ </p>
</li>
<li><p>Á£ÅÁõòÊïèÊÑüÂûãÂ∫îÁî®Âª∫ËÆÆ‰ΩøÁî®GC log rotationÔºåÂèÇÊï∞‰∏∫ </p>
</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">-Xloggc:/home/admin/logs/gc.log  -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=4 -XX:GCLogFileSize=8m</span><br></pre></td></tr></tbody></table></figure>

<p>JDK8 G1ÁöÑÈªòËÆ§GCËæìÂá∫ÊØîCMSÂ§ö‰∏çÂ∞ëÂÜÖÂÆπÔºå‰ºöÊõ¥Âø´ÁöÑÊ∂àËÄóÁ£ÅÁõòÁ©∫Èó¥Ôºågc log rotation‰ºöÊåáÂÆöGC logÁöÑËæìÂá∫Âú®Âá†‰∏™GCÊó•ÂøóÊñá‰ª∂‰πãÈó¥Âæ™ÁéØÊµÅËΩ¨„ÄÇ</p>
<ul>
<li>‰∏çË¶Å‰∏∫‰∫ÜÁî®G1ËÄåÁî®G1<br>Á∫ø‰∏äÁéØÂ¢ÉÁöÑÂæàÂ§öGCÁ≠ñÁï•ÈÉΩÊòØÁªèËøáÂéãÊµãË∞ÉÊ†°ÁöÑÔºå Â¶ÇÊûúÁõÆÂâçÂ∑•‰ΩúÁöÑÂæàÂ•ΩÔºå‰∏ªË¶ÅÊòØÊöÇÂÅúÊó∂Èó¥ÔºàGC Êó•ÂøóÈáåÈù¢ÁöÑ‚Äùreal‚ÄùËÄóÊó∂Ôºâ‰∏äÊ≤°ÊúâÈóÆÈ¢òÔºå‰∏çÊé®Ëçê‰∏ìÈó®ÂàáÊç¢Âà∞G1ÁÆóÊ≥ïÔºåÁâπÂà´ÊòØÊØîËæÉÂ∞èÁöÑÂ†ÜÔºà20G‰ª•‰∏ãÁöÑÔºâ„ÄÇ</li>
</ul>
<h3 id="Â§çÊùÇÂú∫ÊôØ"><a href="#Â§çÊùÇÂú∫ÊôØ" class="headerlink" title="Â§çÊùÇÂú∫ÊôØ"></a>Â§çÊùÇÂú∫ÊôØ</h3><ul>
<li><p>-XX:G1ReservePercent=10<br> Ëøô‰∏™ÂèÇÊï∞ÊåáÂÆö‰∫ÜG1Ë¶Å‰øùÁïôÂ§öÂ∞ëÁ©∫Èó≤Á©∫Èó¥Êù•Èò≤Ê≠¢Promotion failureÔºåG1ÁöÑYGCÂ§±Ë¥•‰ºöÂØºËá¥Â§±Ë¥•ÁöÑÂπ¥ËΩª‰ª£regionÂÖ®ÈÉ®ÂèòÊàêËÄÅÂπ¥‰ª£regionÔºåÊòØ‰∏Ä‰∏™‰ª£‰ª∑ÈùûÂ∏∏Â§ßÁöÑÊìç‰Ωú„ÄÇgclog‰∏≠Â∫îËØ•Â∞ΩÈáèÈÅøÂÖçÂá∫Áé∞promotion failureÔºåÂ¶ÇÊûúÈ¢ëÁπÅÂá∫Áé∞ÂèØ‰ª•ËÄÉËôëË∞ÉÂ§ß-XX:G1ReservePercentËøô‰∏™ÂèÇÊï∞(ÈªòËÆ§10%)„ÄÇ </p>
</li>
<li><p>-XX:+G1LogLevel=fine/finer/finest<br> ÂèØ‰ª•ÊâìÂç∞‰∏çÂêåËØ¶ÁªÜÁ®ãÂ∫¶ÁöÑGC‰ø°ÊÅØ </p>
</li>
<li><p>-XX:+G1OptThruput<br> Âú®8.6.11‰ª•‰∏äÔºàÂåÖÊã¨ÔºâÁöÑÁâàÊú¨‰∏≠ÂèØ‰ª•‰ΩøÁî®ËØ•ÈÄâÈ°πÂºÄÂêØG1ÁöÑthroughputÊ®°ÂºèÔºåÈíàÂØπÁâπÂÆöÂú∫ÊôØÂèØ‰ª•Èôç‰ΩéCPU‰ΩøÁî®ÁéáÁöÑÂêåÊó∂Áª¥ÊåÅËæÉ‰ΩéÊöÇÂÅúÊó∂Èó¥„ÄÇ </p>
</li>
</ul>
<blockquote>
<p>ËØ∑Ê≥®ÊÑèÔºåËøô‰∏™ÈÄâÈ°πÈúÄË¶ÅÊµãËØïÔºåÂ¶ÇÊûúËßÇÂØüÂà∞GCÊöÇÂÅúÊó∂Èó¥ÊòéÊòæ‰∏äÊ∂®ÔºåÂàôËØ¥ÊòéÂ∫îÁî®‰∏çÈÄÇÂêàËøô‰∏™Ê®°ÂºèÔºõ‰∏ÄËà¨‰∏çÊé®ËçêË∂ÖËøá20GÁöÑÂ†Ü(‰∏ÄÊ¨°ygc‰πãÂêéÂâ©‰ΩôÂ§ßÂ∞è)‰ΩøÁî®Ëøô‰∏™ÈÄâÈ°π„ÄÇ</p>
</blockquote>
<h2 id="JDK-8-Â∫îÁî®Âü∫Á°Ä-jvm-ÂèÇÊï∞ÂèÇËÄÉ"><a href="#JDK-8-Â∫îÁî®Âü∫Á°Ä-jvm-ÂèÇÊï∞ÂèÇËÄÉ" class="headerlink" title="JDK 8 Â∫îÁî®Âü∫Á°Ä jvm ÂèÇÊï∞ÂèÇËÄÉ"></a>JDK 8 Â∫îÁî®Âü∫Á°Ä jvm ÂèÇÊï∞ÂèÇËÄÉ</h2><h3 id="ÂèÇÊï∞ÂèÇËÄÉ-ÊåâÊú∫Âûã"><a href="#ÂèÇÊï∞ÂèÇËÄÉ-ÊåâÊú∫Âûã" class="headerlink" title="ÂèÇÊï∞ÂèÇËÄÉ(ÊåâÊú∫Âûã)"></a>ÂèÇÊï∞ÂèÇËÄÉ(ÊåâÊú∫Âûã)</h3><h4 id="4C8G"><a href="#4C8G" class="headerlink" title="4C8G"></a>4C8G</h4><ul>
<li>CMS</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">-server -Xms4g -Xmx4g -Xmn2g                                                 \</span><br><span class="line">-XX:+UseConcMarkSweepGC -XX:+CMSScavengeBeforeRemark                         \</span><br><span class="line">-XX:CMSMaxAbortablePrecleanTime=5000 -XX:+CMSClassUnloadingEnabled           \</span><br><span class="line">-XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly     \</span><br><span class="line">-XX:+ExplicitGCInvokesConcurrent -XX:ParallelGCThreads=4                     \</span><br><span class="line">-Xloggc:/home/admin/logs/gc.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps   \</span><br><span class="line">-Dsun.rmi.dgc.server.gcInterval=2592000000                                   \</span><br><span class="line">-Dsun.rmi.dgc.client.gcInterval=2592000000                                   \</span><br><span class="line">-XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=256m                             \</span><br><span class="line">-XX:ReservedCodeCacheSize=256m                                               \</span><br><span class="line">-XX:MaxDirectMemorySize=512m                                                 \</span><br><span class="line">-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/admin/logs            \</span><br><span class="line">-XX:ErrorFile=/home/admin/logs/hs_err_pid%p.log                              \</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>G1</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">-server -Xms4g -Xmx4g -XX:MaxNewSize=2g                                      \</span><br><span class="line">-XX:+UseG1GC -XX:InitiatingHeapOccupancyPercent=40 -XX:G1HeapRegionSize=8m   \</span><br><span class="line">-XX:+ExplicitGCInvokesConcurrent -XX:ParallelGCThreads=4                     \</span><br><span class="line">-Xloggc:/home/admin/logs/gc.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps   \</span><br><span class="line">-Dsun.rmi.dgc.server.gcInterval=2592000000                                   \</span><br><span class="line">-Dsun.rmi.dgc.client.gcInterval=2592000000                                   \</span><br><span class="line">-XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=256m                             \</span><br><span class="line">-XX:ReservedCodeCacheSize=256m                                               \</span><br><span class="line">-XX:MaxDirectMemorySize=512m                                                 \</span><br><span class="line">-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/admin/logs            \</span><br><span class="line">-XX:ErrorFile=/home/admin/logs/hs_err_pid%p.log                              \</span><br></pre></td></tr></tbody></table></figure>

<h4 id="8C16G"><a href="#8C16G" class="headerlink" title="8C16G"></a>8C16G</h4><ul>
<li>CMS</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">-server -Xms10g -Xmx10g -Xmn5g                                               \</span><br><span class="line">-XX:+UseConcMarkSweepGC  -XX:+CMSScavengeBeforeRemark                        \</span><br><span class="line">-XX:CMSMaxAbortablePrecleanTime=5000 -XX:+CMSClassUnloadingEnabled           \</span><br><span class="line">-XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly     \</span><br><span class="line">-XX:+ExplicitGCInvokesConcurrent -XX:ParallelGCThreads=8                     \</span><br><span class="line">-Xloggc:/home/admin/logs/gc.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps   \</span><br><span class="line">-Dsun.rmi.dgc.server.gcInterval=2592000000                                   \</span><br><span class="line">-Dsun.rmi.dgc.client.gcInterval=2592000000                                   \</span><br><span class="line">-XX:MetaspaceSize=512m -XX:MaxMetaspaceSize=512m                             \</span><br><span class="line">-XX:ReservedCodeCacheSize=512m                                               \</span><br><span class="line">-XX:MaxDirectMemorySize=512m                                                 \</span><br><span class="line">-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/admin/logs            \</span><br><span class="line">-XX:ErrorFile=/home/admin/logs/hs_err_pid%p.log                              \</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>G1</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">-server -Xms10g -Xmx10g -XX:MaxNewSize=5g                                    \</span><br><span class="line">-XX:+UseG1GC -XX:InitiatingHeapOccupancyPercent=40 -XX:G1HeapRegionSize=16m  \</span><br><span class="line">-XX:+ExplicitGCInvokesConcurrent -XX:ParallelGCThreads=8                     \</span><br><span class="line">-Xloggc:/home/admin/logs/gc.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps   \</span><br><span class="line">-Dsun.rmi.dgc.server.gcInterval=2592000000                                   \</span><br><span class="line">-Dsun.rmi.dgc.client.gcInterval=2592000000                                   \</span><br><span class="line">-XX:MetaspaceSize=512m -XX:MaxMetaspaceSize=512m                             \</span><br><span class="line">-XX:ReservedCodeCacheSize=512m                                               \</span><br><span class="line">-XX:MaxDirectMemorySize=512m                                                 \</span><br><span class="line">-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/admin/logs            \</span><br><span class="line">-XX:ErrorFile=/home/admin/logs/hs_err_pid%p.log                              \</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÂÖ∂‰ªñÂª∫ËÆÆ"><a href="#ÂÖ∂‰ªñÂª∫ËÆÆ" class="headerlink" title="ÂÖ∂‰ªñÂª∫ËÆÆ"></a>ÂÖ∂‰ªñÂª∫ËÆÆ</h3><p>MaxDirectMemorySize„ÄÅMetaspaceSize„ÄÅMaxMetaspaceÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµË∞ÉÊï¥</p>
<p>ÂÖ≥Èó≠ÂÅèÂêëÈîÅ</p>
<ul>
<li>-XX:-UseBiasedLocking</li>
</ul>
<p>Âä†ÈÄüÂêØÂä® (8.4.7)</p>
<ul>
<li>-Dcom.alibaba.introspector.findCustomizerClass.skipStrategy=SKIP_ALL (ÂèÇËÄÉAJDK 8Release Note)</li>
</ul>
<p>ÂêØÂä®Êó∂ÂºÄÂêØAttachÊú∫Âà∂, ÈÅøÂÖçFGCÂØºËá¥jcmdÁ≠âÂëΩ‰ª§Êó†Ê≥ïÂìçÂ∫î</p>
<ul>
<li>-XX:+StartAttachListener</li>
</ul>
<p>Metaspace Dump (8.5.9_fp1)</p>
<ul>
<li>-XX:+MetaspaceDumpOnOutOfMemoryError -XX:MetaspaceDumpPath=/home/admin/logs</li>
</ul>
<p>ÂºÇÊ≠• GC Êó•Âøó (8.5.9)</p>
<ul>
<li>-XX:+UseAsyncGCLog</li>
</ul>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÂ†ÜÁ©∫Èó¥</title>
    <url>/p/3b62062d.html</url>
    <content><![CDATA[<html><head></head><body><p>‰∏Ä‰∏™ËøõÁ®ãÂØπÂ∫î‰∏Ä‰∏™JVMÁöÑÂÆû‰æãÔºåËøõÁ®ãÂèØ‰ª•ÁêÜËß£‰∏∫Ôºå‰∏Ä‰∏™Ê≠£Âú®ÊâßË°åÁöÑmainÊñπÊ≥ïÂ∞±ÊòØ‰∏Ä‰∏™JVMÁöÑÂÆû‰æã„ÄÇ</p>
<h2 id="Â†ÜÁöÑ‚ÄúÊ†∏ÂøÉ‚ÄùÊ¶ÇËø∞"><a href="#Â†ÜÁöÑ‚ÄúÊ†∏ÂøÉ‚ÄùÊ¶ÇËø∞" class="headerlink" title="Â†ÜÁöÑ‚ÄúÊ†∏ÂøÉ‚ÄùÊ¶ÇËø∞"></a>Â†ÜÁöÑ‚ÄúÊ†∏ÂøÉ‚ÄùÊ¶ÇËø∞</h2><ul>
<li><p>‰∏Ä‰∏™ JVM ÂÆû‰æãÂè™Â≠òÂú®‰∏Ä‰∏™Â†ÜÂÜÖÂ≠òÔºåÂ†Ü‰πüÊòØJavaÂÜÖÂ≠òÁÆ°ÁêÜÁöÑÊ†∏ÂøÉÂå∫Âüü„ÄÇ</p>
</li>
<li><p>JavaÂ†ÜÂå∫Âú®JVMÂêØÂä®ÁöÑÊó∂ÂÄôÂç≥Ë¢´ÂàõÂª∫ÔºåÂÖ∂Á©∫Èó¥Â§ßÂ∞è‰πüÂ∞±Á°ÆÂÆö‰∫Ü„ÄÇÊòØJVM ÁÆ°ÁêÜÁöÑÊúÄÂ§ß‰∏ÄÂùóÂÜÖÂ≠òÁ©∫Èó¥„ÄÇÂ†ÜÂÜÖÂ≠òÁöÑÂ§ßÂ∞èÊòØÂèØ‰ª•Ë∞ÉËäÇÁöÑ„ÄÇ</p>
</li>
<li><p>„ÄäJavaËôöÊãüÊú∫ËßÑËåÉ„ÄãËßÑÂÆöÔºåÂ†ÜÂèØ‰ª•Â§Ñ‰∫éÁâ©ÁêÜ‰∏ä‰∏çËøûÁª≠ÁöÑÂÜÖÂ≠òÁ©∫Èó¥‰∏≠Ôºå‰ΩÜÂú®ÈÄªËæë‰∏äÂÆÉÂ∫îËØ•Ë¢´ËßÜ‰∏∫ËøûÁª≠ÁöÑ„ÄÇ</p>
</li>
<li><p>ÊâÄÊúâÁöÑÁ∫øÁ®ãÂÖ±‰∫´JavaÂ†ÜÔºåÂú®ËøôÈáåËøòÂèØ‰ª•ÂàíÂàÜÁ∫øÁ®ãÁßÅÊúâÁöÑÁºìÂÜ≤Âå∫(Thread Local Allocation BufferÔºå TLAB) „ÄÇÊâÄ‰ª•ËØ¥JVMÁöÑÊï¥ÂùóÂ†ÜÁ©∫Èó¥ÈÉΩÊòØÁ∫øÁ®ãÂÖ±‰∫´ÁöÑÔºåËøôÊòØ‰∏çÊ≠£Á°ÆÁöÑ„ÄÇ</p>
</li>
<li><p>Êï∞ÁªÑÂíåÂØπË±°ÂèØËÉΩÊ∞∏Ëøú‰∏ç‰ºöÂ≠òÂÇ®Âú®Ê†à‰∏äÔºåÂõ†‰∏∫Ê†àÂ∏ß‰∏≠‰øùÂ≠òÂºïÁî®ÔºåËøô‰∏™ÂºïÁî®ÊåáÂêëÂØπË±°ÊàñËÄÖÊï∞ÁªÑÂú®Â†Ü‰∏≠ÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
</li>
<li><p>Âú®ÊñπÊ≥ïÁªìÊùüÂêéÔºåÂ†Ü‰∏≠ÁöÑÂØπË±°‰∏ç‰ºöÈ©¨‰∏äË¢´ÁßªÈô§Ôºå‰ªÖ‰ªÖÂú®ÂûÉÂúæÊî∂ÈõÜÂô®ÁöÑÊó∂ÂÄôÊâç‰ºöË¢´ÁßªÈô§„ÄÇ</p>
</li>
<li><p>Â†ÜÊòØGCÔºàGarbage CollectionÔºâÊâßË°åÂûÉÂúæÂõûÊî∂ÁöÑÈáçÁÇπÂå∫Âüü„ÄÇ</p>
</li>
</ul>
<h2 id="Â†ÜÁöÑÂÜÖÂ≠òÁªÜÂàÜ"><a href="#Â†ÜÁöÑÂÜÖÂ≠òÁªÜÂàÜ" class="headerlink" title="Â†ÜÁöÑÂÜÖÂ≠òÁªÜÂàÜ"></a>Â†ÜÁöÑÂÜÖÂ≠òÁªÜÂàÜ</h2><p>Áé∞‰ª£ÂûÉÂúæÊî∂ÈõÜÂô®Â§ßÈÉ®ÂàÜÂü∫‰∫é<strong>ÂàÜ‰ª£ÂûÉÂúæÊî∂ÈõÜÁÆóÊ≥ï</strong>„ÄÇ</p>
<p>JDK1.7 Â†Ü‰∏≠Êúâ‰∏ÄÂùóÂè´Ê∞∏‰πÖÂå∫ÔºåÂú®JDK1.8‰πãÂêéÂ∞±Êîπ‰∏∫ÂÖÉÊï∞ÊçÆÂå∫‰∫Ü„ÄÇ</p>
<p>Java 7Âèä‰πãÂâçÂ†ÜÂÜÖÂ≠òÈÄªËæë‰∏äÂàÜ‰∏∫ÔºöÊñ∞ÁîüÂå∫+ÂÖªËÄÅÂå∫+Ê∞∏‰πÖÂå∫</p>
<table>
<thead>
<tr>
<th>Ëã±ÊñáÂêç</th>
<th>‰∏≠ÊñáÂêç</th>
</tr>
</thead>
<tbody><tr>
<td>Young/New Generation Space</td>
<td>Êñ∞ÁîüÂå∫</td>
</tr>
<tr>
<td>Old/Tenure generation space</td>
<td>ÂÖªËÄÅÂå∫</td>
</tr>
<tr>
<td>Perm/Permanent Space</td>
<td>Ê∞∏‰πÖÂå∫</td>
</tr>
</tbody></table>
<p>Java 8Âèä‰πãÂêéÂ†ÜÂÜÖÂ≠òÈÄªËæëÂàÜ‰∏∫ÔºöÊñ∞ÁîüÂå∫+ÂÖªËÄÅÂå∫+ÂÖÉÊï∞ÊçÆÂå∫ÔºàÂÖÉÁ©∫Èó¥Ôºâ</p>
<table>
<thead>
<tr>
<th>Ëã±ÊñáÂêç</th>
<th>‰∏≠ÊñáÂêç</th>
</tr>
</thead>
<tbody><tr>
<td>Young/New Generation Space</td>
<td>Êñ∞ÁîüÂå∫ÔºåÁªÜÂàÜ‰∏∫EdenÂå∫ÂíåSurvivorÂå∫</td>
</tr>
<tr>
<td>Old/Tenure generation space</td>
<td>ÂÖªËÄÅÂå∫</td>
</tr>
<tr>
<td>Permanent Space</td>
<td>ÂÖÉÁ©∫Èó¥</td>
</tr>
</tbody></table>
<blockquote>
<p>Â¶Ç‰ΩïÊü•ÁúãÂàÜ‰ª£‰ø°ÊÅØ</p>
</blockquote>
<p>ÈÄöËøáÊ∑ªÂä†VMÂèÇÊï∞ <code>-XX:+PrintGCDetails</code> ÔºåÂú®Á®ãÂ∫èÊâßË°åÊó∂‰ºöÊâìÂç∞Âá∫ÂàÜ‰ª£‰ø°ÊÅØ„ÄÇ</p>
<h2 id="Â†ÜÁ©∫Èó¥ÁöÑÂ§ßÂ∞è‰∏éOOM"><a href="#Â†ÜÁ©∫Èó¥ÁöÑÂ§ßÂ∞è‰∏éOOM" class="headerlink" title="Â†ÜÁ©∫Èó¥ÁöÑÂ§ßÂ∞è‰∏éOOM"></a>Â†ÜÁ©∫Èó¥ÁöÑÂ§ßÂ∞è‰∏éOOM</h2><p>Java Â†ÜÂå∫Áî®‰∫éÂ≠òÂÇ®JavaÂØπË±°ÂÆû‰æãÔºåÈÇ£‰πàÂ†ÜÁöÑÂ§ßÂ∞èÂú®JVMÂêØÂä®Êó∂Â∞±Â∑≤ÁªèËÆæÂÆöÂ•Ω‰∫ÜÔºåÂèØÈÄöËøáÈÄâÈ°π<code>-XMx</code> Âíå <code>-Xms</code>Êù•ËÆæÁΩÆÔºö</p>
<ul>
<li><p><code>-Xms</code> Áî®‰∫éË°®Á§∫Â†ÜÁ©∫Èó¥ÔºàÂπ¥ËΩª‰ª£+ËÄÅÂπ¥‰ª£ÔºâÁöÑËµ∑ÂßãÂÜÖÂ≠òÔºåÁ≠â‰ª∑‰∫é <code>-XX:InitialHeapSize</code></p>
</li>
<li><p><code>-Xmx</code> Áî®‰∫éË°®Á§∫Â†ÜÂå∫ÁöÑÊúÄÂ§ßÂÜÖÂ≠òÔºåÁ≠â‰ª∑‰∫é <code>-XX:MaxHeapSize</code></p>
</li>
</ul>
<p>ÂêÑÂèÇÊï∞Âê´‰πâÔºå<a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html">ÁÇπÂáªÂâçÂæÄÂÆòÁΩë</a>Ôºö</p>
<ul>
<li>-XÔºöJVMÁöÑËøêË°åÂèÇÊï∞„ÄÇ</li>
<li>msÔºömemory start</li>
<li>mx: memory max</li>
</ul>
<p>Â¶Ç‰Ωï‰ΩøÁî®ÂèÇÊï∞</p>
<p><img src="/p/3b62062d/JVM-Xmxsize.png" alt="image-20211007171622965"></p>
<p>‰∏ÄÊó¶Â†ÜÂå∫‰∏≠ÁöÑÂÜÖÂ≠òÂ§ßÂ∞èË∂ÖËøá <code>-Xmx</code> ÊâÄÊåáÂÆöÁöÑÊúÄÂ§ßÂÜÖÂ≠òÊó∂ÔºåÂ∞±‰ºöÊäõÂá∫ OutOfMemoryError ÂºÇÂ∏∏ÔºàOOMÔºâ„ÄÇ</p>
<p>ÈÄöÂ∏∏‰ºöÂ∞Ü<code>-Xms</code> Âíå<code>-Xmx</code> ‰∏§‰∏™ÂèÇÊï∞ÈÖçÁΩÆÁõ∏ÂêåÁöÑÂÄºÔºåÂÖ∂<strong>ÁõÆÁöÑÊòØ‰∏∫‰∫ÜËÉΩÂ§üÂú®JavaÂûÉÂúæÂõûÊî∂Êú∫Âà∂Ê∏ÖÁêÜÂÆåÂ†ÜÂå∫Âêé‰∏çÈúÄË¶ÅÈáçÊñ∞ÂàÜÂâ≤ËÆ°ÁÆóÂ†ÜÁöÑÂ§ßÂ∞èÔºå‰ªéËÄåÊèêÂçáÊÄßËÉΩ„ÄÇ</strong></p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂàùÂßãÂÜÖÂ≠òÂ§ßÂ∞èÔºöÁâ©ÁêÜÂÜÖÂ≠òÂ§ßÂ∞è / 64ÔºåÊúÄÂ§ßÂÜÖÂ≠òÂ§ßÂ∞èÔºöÁâ©ÁêÜÁîµËÑëÂÜÖÂ≠òÂ§ßÂ∞è / 4„ÄÇ</p>
<p>ËØ∑Áúã‰∏ãÊñπÁ®ãÂ∫èÂÆû‰æãÔºåÊú¨Êú∫ÊòØ16GÁöÑËøêË°åÂÜÖÂ≠òÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeapSpaceInitial</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">//ËøîÂõûJavaËôöÊãüÊú∫‰∏≠ÁöÑÂ†ÜÂÜÖÂ≠òÊÄªÈáè</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">initialMemory</span> <span class="operator">=</span> Runtime.getRuntime().totalMemory() / <span class="number">1024</span> / <span class="number">1024</span>;</span><br><span class="line">        <span class="comment">//ËøîÂõûJavaËôöÊãüÊú∫ËØïÂõæ‰ΩøÁî®ÁöÑÊúÄÂ§ßÂ†ÜÂÜÖÂ≠òÈáè</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">maxMemory</span> <span class="operator">=</span> Runtime.getRuntime().maxMemory() / <span class="number">1024</span> / <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"-Xms : "</span> + initialMemory + <span class="string">"M"</span>);</span><br><span class="line">        System.out.println(<span class="string">"-Xmx : "</span> + maxMemory + <span class="string">"M"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"Á≥ªÁªüÂÜÖÂ≠òÂ§ßÂ∞è‰∏∫Ôºö"</span> + initialMemory * <span class="number">64.0</span> / <span class="number">1024</span> + <span class="string">"G"</span>);</span><br><span class="line">        System.out.println(<span class="string">"Á≥ªÁªüÂÜÖÂ≠òÂ§ßÂ∞è‰∏∫Ôºö"</span> + maxMemory * <span class="number">4.0</span> / <span class="number">1024</span> + <span class="string">"G"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûú</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">-Xms : 243M</span><br><span class="line">-Xmx : 3596M</span><br><span class="line">Á≥ªÁªüÂÜÖÂ≠òÂ§ßÂ∞è‰∏∫Ôºö15.1875G</span><br><span class="line">Á≥ªÁªüÂÜÖÂ≠òÂ§ßÂ∞è‰∏∫Ôºö14.046875G</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>Âú®ÂºÄÂèë‰∏≠ÔºåÂª∫ËÆÆ Xms Âíå Xmx ËÆæÁΩÆ‰∏∫Áõ∏ÂêåÁöÑÂ§ßÂ∞èÔºå‰∏∫‰ªÄ‰πàÔºü</p>
</blockquote>
<p>‰æãÂ¶ÇÔºåXmxËÆæÁΩÆ‰∏∫1GÔºåXmsËÆæÁΩÆ‰∏∫100MÔºåÂΩìÁ®ãÂ∫èËøêË°åÊó∂ÂÜÖÂ≠ò‰∏çË∂≥‰∫ÜÔºåÂ∞±‰ºö‰∏çÊñ≠ÁöÑÊâ©ÂÆπÔºõÂΩìÁî®‰∏çÂà∞Ëøô‰∫õÂÜÖÂ≠ò‰πãÂêéÔºåÂ∞±‰ºö‰∏çÊñ≠ÁöÑÈôç‰ΩéÂà∞ÂàùÂßãÂÄºÂ§ßÂ∞è„ÄÇÂú®Á®ãÂ∫èËøêË°åÊó∂Ôºå‰∏çÊñ≠ÁöÑË∞ÉËäÇÂ†ÜÂÜÖÂ≠òÁöÑÂ§ßÂ∞èÂíåGCÔºå‰ºöÁªôÊú∫Âô®Â∏¶Êù•È¢ùÂ§ñÁöÑÂéãÂäõ„ÄÇ</p>
<p>Áé∞Âú®ÁªôÁ®ãÂ∫èÂä†‰∏äÁù°Áú†ÁöÑ‰ª£Á†ÅÂπ∂ËÆæÁΩÆ‰∏äVMÂèÇÊï∞ <code>-Xms100M -Xmx100M</code></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">TimeUnit.SECONDS.sleep(<span class="number">100</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>ËøêË°åÁªìÊûúÔºö</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">-Xms : 96M</span><br><span class="line">-Xmx : 96M</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ÂÖ∂ÂÆÉÁöÑ4MÂÜÖÂ≠òÂéªÂì™‰∫ÜÔºü</strong></p>
<p>ÂÄüÂä©<code>jps</code>Êü•ÁúãJavaÁ®ãÂ∫èÁöÑËøõÁ®ãÂíå<code>jstat</code>Êü•ÁúãÂÜÖÂ≠òÁöÑ‰ΩøÁî®ÊÉÖÂÜµ</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">C:\Users\Administrator&gt;jps</span><br><span class="line">9008</span><br><span class="line">3524 Jps</span><br><span class="line">9076 RemoteMavenServer36</span><br><span class="line">8968 HeapSpaceInitial</span><br><span class="line">7356 Launcher</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÜçËæìÂÖ• <code>jstat -gc 8968</code>ÂëΩ‰ª§Ôºö</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">C:\Users\Administrator&gt;jstat -gc 8968</span><br><span class="line"> S S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT</span><br><span class="line">4044096.0 4096.0  0.0    0.0   25600.0   3603.8   68608.0      0.0     4480.0 769.7  384.0   75.8    0     0.000    0      0.000    0.000</span><br></pre></td></tr></tbody></table></figure>

<p>ËøôÈáåÁöÑ<code>OC</code>ÔºàOld CountÔºâÂíå<code>OU</code>ÔºàOld UsedÔºâÔºåÊñ∞Áîü‰ª£ÂàÜ‰∏∫‰ºäÁî∏Âõ≠Âå∫ÔºàEÔºâ„ÄÅÂπ∏Â≠òËÄÖ0Âå∫ÔºàS0ÔºâÂíåÂπ∏Â≠òËÄÖ1Âå∫ÔºàS1Ôºâ„ÄÇ</p>
<p>Â†ÜÂÜÖÂ≠ò=Êñ∞Áîü‰ª£+ËÄÅÂπ¥‰ª£ = S0C + S1C + EC + OC = 4096 + 4096 + 25600 + 68608 = 102400 / 1024 = 100 M</p>
<p>ËøôÈáåÂÆåÊï¥ÁöÑÂÜÖÂ≠òËÆ°ÁÆóÂá∫Êù•ÔºåÁ°ÆÂÆûÊòØ100MÔºåÁúüÊ≠£ÈÄ†ÊàêËøô 4M Ê≤°ÊúâÊâìÂç∞Âá∫Êù•ÁöÑÂéüÂõ†ÊòØÔºöJVMÂ≠òÊîæÂØπË±°ÁöÑËØùÔºåÂÆûÈôÖ‰∏äÊòØÂ≠òÊîæÂú®EÂå∫‰ª•ÂèäS0Âå∫<strong>Êàñ</strong>S1Âå∫ÔºàS0ÂíåS1Âè™ËÉΩ‰∫åÈÄâ‰∏ÄÁöÑÂéªÁî®Ôºå‰∏ªË¶ÅÂéüÂõ†ÂíåÂûÉÂúæÂõûÊî∂ÁöÑÁÆóÊ≥ïÊúâÂÖ≥ÔºâÔºåÊâÄ‰ª•Â∞ëÂä†‰∏ä‰∏Ä‰∏™SurviveÂå∫Â∞±ÊòØÁúüÊ≠£ÂàùÂßãÂåñÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÁöÑÂéüÂõ†„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÊï¥‰ΩìÁªìÊûÑ</title>
    <url>/p/4868cbd5.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="JavaÁ®ãÂ∫èËøêË°åÊµÅÁ®ã"><a href="#JavaÁ®ãÂ∫èËøêË°åÊµÅÁ®ã" class="headerlink" title="JavaÁ®ãÂ∫èËøêË°åÊµÅÁ®ã"></a>JavaÁ®ãÂ∫èËøêË°åÊµÅÁ®ã</h2><p>Âú®ËÆ°ÁÆóÊú∫Á≥ªÁªü‰ΩìÁ≥ª‰∏≠Âπ∂‰∏çËÆ§ËØÜÈ´òÁ∫ßËØ≠Ë®ÄÔºåÈúÄË¶ÅËΩ¨ÊàêÊ±áÁºñÔºåÂÜçÁî±ËΩ¨Êú∫Âô®Êåá‰ª§„ÄÇ</p>
<p><img src="/p/4868cbd5/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%B1%82%E9%9D%A2%E7%9A%84%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E6%89%A7%E8%A1%8C%E6%A6%82%E8%A7%88.png" alt="image-20210822134201260"></p>
<p>*.javaÊñá‰ª∂ÈÄöËøá javac ÁºñËØëÊàê *.classÊñá‰ª∂ÔºåÈÄöËøá ClassLoader Âä†ËΩΩÂà∞JVMÁªèËøáÈìæÊé•Èò∂ÊÆµÔºàÊöÇÊó∂‰∏çÊáÇÂèØÁï•ËøáÔºâÂêéÔºåÂú®ËøêË°åÊó∂ÈÄöËøáËß£ÈáäÂô®Ëß£ÈáäÊâßË°å„ÄÇ</p>
<p><img src="/p/4868cbd5/ClassLoader%E7%9A%84%E8%81%8C%E8%83%BD.png" alt="image-20210418105759073"></p>
<h2 id="Java‰ª£Á†ÅÊâßË°åÊµÅÁ®ã"><a href="#Java‰ª£Á†ÅÊâßË°åÊµÅÁ®ã" class="headerlink" title="Java‰ª£Á†ÅÊâßË°åÊµÅÁ®ã"></a>Java‰ª£Á†ÅÊâßË°åÊµÅÁ®ã</h2><p>Êàë‰ª¨ÁºñÂÜôÁöÑJavaÊ∫êÁ†ÅÈ¶ñÂÖàÁªèËøáJavaÁºñËØëÂô®Ôºà‰πüÁß∞ÂâçÁ´ØÁºñËØëÂô®ÔºâÔºåÂè™Ë¶ÅÂÖ∂‰∏≠‰∏Ä‰∏™ÁºñËØëÁöÑÁéØËäÇÂá∫Áé∞‰∫ÜÈóÆÈ¢òÈÉΩ‰∏çËÉΩÊ≠£Â∏∏ÁîüÊàêÂ≠óËäÇÁ†ÅÊñá‰ª∂„ÄÇ</p>
<p><img src="/p/4868cbd5/Java%E4%BB%A3%E7%A0%81%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.png" alt="Java‰ª£Á†ÅÁöÑÊâßË°åÊµÅÁ®ã"></p>
<p>Ëß£ÈáäÂô®ÔºàËß£ÈáäÊâßË°åÔºâÂíåJITÁºñËØëÂô®ÔºàÁºñËØëÊâßË°åÔºâÔºö</p>
<p>Ëß£ÈáäÂô®Ôºö‰øùËØÅÂìçÂ∫îÊó∂Èó¥ÔºåËøêË°åÊó∂ÂØπÂ≠óËäÇÁ†ÅÊåá‰ª§ËøõË°åÈÄêË°åËß£ÈáäÊâßË°å„ÄÇ</p>
<p>JITÁºñËØëÂô®Ôºö‰∫åÊ¨°ÁºñËØëÔºåÂ∞ÜÁÉ≠ÁÇπ‰ª£Á†ÅÁõ¥Êé•ÁºñËØëÊàêÊú∫Âô®Êåá‰ª§ÔºåÂπ∂ÊääËøô‰∫õÊú∫Âô®Êåá‰ª§ÁºìÂ≠òËµ∑Êù•„ÄÇ</p>
<h2 id="JVMÁöÑÊï¥‰ΩìÁªìÊûÑ"><a href="#JVMÁöÑÊï¥‰ΩìÁªìÊûÑ" class="headerlink" title="JVMÁöÑÊï¥‰ΩìÁªìÊûÑ"></a>JVMÁöÑÊï¥‰ΩìÁªìÊûÑ</h2><p>HotSpot VMÊòØÁõÆÂâçÂ∏ÇÈù¢‰∏äÊÄßËÉΩËôöÊãüÊú∫ÁöÑ‰ª£Ë°®‰Ωú‰πã‰∏ÄÔºå<strong>Ëß£ÈáäÂô®‰∏éÂç≥Êó∂ÁºñËØëÂô®Âπ∂Â≠ò</strong>„ÄÇ</p>
<p><img src="/p/4868cbd5/JVM%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%9E%8B.png" alt="img"></p>
<h2 id="JVMÁöÑÊû∂ÊûÑÊ®°Âûã"><a href="#JVMÁöÑÊû∂ÊûÑÊ®°Âûã" class="headerlink" title="JVMÁöÑÊû∂ÊûÑÊ®°Âûã"></a>JVMÁöÑÊû∂ÊûÑÊ®°Âûã</h2><p>javaÁºñËØëÂô®ËæìÂÖ•Êåá‰ª§ÊµÅÊòØ<strong>Âü∫‰∫éÊ†à</strong>ÁöÑÊåá‰ª§ÈõÜÊû∂ÊûÑÔºåÂè¶Â§ñ‰∏ÄÁßçÊåá‰ª§Êû∂ÊûÑ<strong>Âü∫‰∫éÂØÑÂ≠òÂô®</strong>Êåá‰ª§ÈõÜÊû∂ÊûÑ„ÄÇ</p>
<p><strong>Âü∫‰∫éÊ†àÁöÑÊåá‰ª§ÈõÜÊû∂ÊûÑÁâπÁÇπ</strong></p>
<p>„ÄÄ„ÄÄ1.ËÆæËÆ°ÂíåÂÆûÁé∞Êõ¥ÁÆÄÂçïÔºåÈÄÇÁî®‰∫éËµÑÊ∫êÂèóÈôêÁöÑÁ≥ªÁªüÔºõÔºàÊ†àÁöÑËµÑÊ∫êÊúâÈôêÔºâ</p>
<p>„ÄÄ„ÄÄ2.ÈÅøÂºÄ‰∫ÜÂØÑÂ≠òÂô®ÁöÑÂàÜÈÖçÈöæÈ¢òÔºö‰ΩøÁî®ÁöÑÊòØÈõ∂Âú∞ÂùÄÊåá‰ª§ÂàÜÈÖçÊñπÂºèÔºàÈõ∂Âú∞ÂùÄÊåá‰ª§ÔºöÂè™ÊúâÊìç‰ΩúÊï∞ÔºåÊ≤°ÊúâÂú∞ÂùÄÊåáÂêëÊìç‰ΩúÊï∞Ôºâ</p>
<p>„ÄÄ„ÄÄ3.Êåá‰ª§ÊµÅ‰∏≠Â§ßÈÉ®ÂàÜÊåá‰ª§ÊòØÈõ∂Âú∞ÂùÄÊåá‰ª§ÔºåÊâßË°åËøáÁ®ã‰æùËµñ‰∫éÊ†àÊìç‰Ωú„ÄÇ</p>
<p>„ÄÄ„ÄÄ„ÄÄ„ÄÄ‰ºòÁÇπÔºöÊåá‰ª§ÈõÜÂêàÂ∞èÔºåÁºñËØëÂô®ÂÆπÊòìÂÆûÁé∞„ÄÇ</p>
<p>„ÄÄ„ÄÄ„ÄÄ„ÄÄÁº∫ÁÇπÔºöÂÆåÊàê‰∏ÄÈ°πÊìç‰ΩúÈúÄË¶ÅÊõ¥Â§öÁöÑÊåá‰ª§ÂÆåÊàêÔºàÊ†àÁöÑÂéüÂõ†ÂØºËá¥ÔºâÔºåÊïàÁéá‰Ωé„ÄÇ</p>
<p>„ÄÄ„ÄÄ4.‰∏çÈúÄË¶ÅÁ°¨‰ª∂ÁöÑÊîØÊåÅÔºåÂèØÁßªÊ§çÊÄßÂ•ΩÔºåÂà©‰∫éË∑®Âπ≥Âè∞ÔºàÊ≤°ÊúâÂíåÁ°¨‰ª∂ÊåÇÈí©Ôºâ</p>
<p><strong>Âü∫‰∫éÂØÑÂ≠òÂô®Êåá‰ª§ÈõÜÊû∂ÊûÑÁâπÁÇπ</strong></p>
<p>„ÄÄ„ÄÄ1.ÂÖ∏ÂûãÂ∫îÁî®Ôºö‰º†Áªüpc‰ª•ÂèäandroidÁöÑDavlikËôöÊãüÊú∫</p>
<p>„ÄÄ„ÄÄ2.Êåá‰ª§ÈõÜÊû∂ÊûÑ‰æùËµñ‰∫éÁ°¨‰ª∂ÔºåÂèØÁßªÊ§çÊÄßÂ∑Æ</p>
<p>„ÄÄ„ÄÄ3.ÊÄßËÉΩ‰ºòÁßÄÔºåÊâßË°åÊïàÁéáÈ´òÔºàÂõ†‰∏∫Ëä±Ë¥πÊõ¥Â∞ëÁöÑÊåá‰ª§ÂéªÊâßË°å‰∏Ä‰∏™Êìç‰ΩúÔºâ</p>
<p>„ÄÄ„ÄÄ4.Â§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÔºåÂØÑÂ≠òÂô®Êåá‰ª§ÈõÜÂæÄÂæÄÈÉΩÊòØ‰∏ÄÂú∞ÂùÄÊåá‰ª§„ÄÅ‰∫åÂú∞ÂùÄÊåá‰ª§Âíå‰∏âÂú∞ÂùÄÊåá‰ª§‰∏∫‰∏ªÔºàÊåá‰ª§ÈõÜÂêàÂ§ßÔºâ</p>
<h2 id="JVMÁöÑÁîüÂëΩÂë®Êúü"><a href="#JVMÁöÑÁîüÂëΩÂë®Êúü" class="headerlink" title="JVMÁöÑÁîüÂëΩÂë®Êúü"></a>JVMÁöÑÁîüÂëΩÂë®Êúü</h2><p>JVMÂêØÂä® -&gt; ÊâßË°å -&gt; ÈÄÄÂá∫„ÄÇ</p>
<h3 id="ÂêØÂä®"><a href="#ÂêØÂä®" class="headerlink" title="ÂêØÂä®"></a>ÂêØÂä®</h3><p>Java ËôöÊãüÊú∫ÁöÑÂêØÂä®ÊòØÈÄöËøáÂºïÂØºÁ±ªÂä†ËΩΩÂô®ÔºàBootstrap ClassLoader ÔºâÂàõÂª∫‰∏Ä‰∏™ÂàùÂßãÁ±ªÔºàInitial ClassÔºâÊù•ÂÆåÊàêÁöÑËøô‰∏™Á±ªÊòØËôöÊãüÊú∫ÁöÑÂÖ∑‰ΩìÂÆûÁé∞Êù•ÊåáÂÆöÁöÑ„ÄÇ</p>
<h3 id="ÊâßË°å"><a href="#ÊâßË°å" class="headerlink" title="ÊâßË°å"></a>ÊâßË°å</h3><ul>
<li>‰∏Ä‰∏™ËøêË°å‰∏≠ÁöÑJavaËôöÊãüÊú∫ÊúâÁùÄ‰∏Ä‰∏™Ê∏ÖÊô∞ÁöÑ‰ªªÂä°ÔºöÊâßË°åJavaÁ®ãÂ∫è</li>
<li>Á®ãÂ∫èÂºÄÂßãÊâßË°åÊó∂ÂÆÉÊâçËøêË°åÔºåÁ®ãÂ∫èÁªìÊùüÊó∂ÂÆÉÂ∞±ÂÅúÊ≠¢„ÄÇ</li>
<li>ÊâßË°å‰∏Ä‰∏™JavaÁ®ãÂ∫èÁöÑÊó∂ÂÄôÔºåÁúüÊ≠£Âú®ÊâßË°åÁöÑÊòØ‰∏Ä‰∏™JavaËôöÊãüÊú∫ÁöÑËøõÁ®ã„ÄÇ</li>
</ul>
<h3 id="ÈÄÄÂá∫"><a href="#ÈÄÄÂá∫" class="headerlink" title="ÈÄÄÂá∫"></a>ÈÄÄÂá∫</h3><p>ÊúâÂ¶Ç‰∏ãÂá†ÁßçÊÉÖÂÜµÔºö</p>
<ul>
<li>Á®ãÂ∫èÊ≠£Â∏∏ÁªìÊùü</li>
<li>Á®ãÂ∫èÂú®ÊâßË°åËøáÁ®ã‰∏≠ÈÅáÂà∞‰∫ÜÂºÇÂ∏∏ÊàñÈîôËØØËÄåÂºÇÂ∏∏ÁªàÊ≠¢„ÄÇ</li>
<li>Áî±‰∫éÊìç‰ΩúÁ≥ªÁªüÂá∫Áé∞ÈîôËØØËÄåÂØºËá¥JavaËôöÊãüÊú∫ËøõÁ®ãÁªàÊ≠¢„ÄÇ</li>
<li>ÊüêÁ∫øÁ®ãË∞ÉÁî®RuntimeÁ±ªÊàñSystemÁ±ªÁöÑexitÊñπÊ≥ïÔºåÊàñRuntimeÁ±ªÁöÑhaltÊñπÊ≥ïÔºåÂπ∂‰∏îJavaÂÆâÂÖ®ÁÆ°ÁêÜÂô®‰πüÂÖÅËÆ∏ËøôÊ¨°exitÊàñhaltÊìç‰Ωú„ÄÇ</li>
<li>Èô§Ê≠§‰πãÂ§ñÔºåJNIÔºàJava Native InterfaceÔºâËßÑËåÉÊèèËø∞‰∫ÜÁî®JNI Invocation APIÊù•Âä†ËΩΩÊàñÂç∏ËΩΩ JavaËôöÊãüÊú∫Êó∂ÔºåJavaËôöÊãüÊú∫ÁöÑÈÄÄÂá∫„ÄÇ</li>
</ul>
<h2 id="ÊâßË°åÂºïÊìéÁªìÊûÑ"><a href="#ÊâßË°åÂºïÊìéÁªìÊûÑ" class="headerlink" title="ÊâßË°åÂºïÊìéÁªìÊûÑ"></a>ÊâßË°åÂºïÊìéÁªìÊûÑ</h2><p><img src="/p/4868cbd5/%E6%89%A7%E8%A1%8C%E5%BC%95%E6%93%8E%E7%BB%93%E6%9E%84.png" alt="img"></p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÊú¨Âú∞ÊñπÊ≥ïÊé•Âè£</title>
    <url>/p/3bd2308d.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="‰ªÄ‰πàÊòØÊú¨Âú∞ÊñπÊ≥ïÔºü"><a href="#‰ªÄ‰πàÊòØÊú¨Âú∞ÊñπÊ≥ïÔºü" class="headerlink" title="‰ªÄ‰πàÊòØÊú¨Âú∞ÊñπÊ≥ïÔºü"></a>‰ªÄ‰πàÊòØÊú¨Âú∞ÊñπÊ≥ïÔºü</h2><p>ÁÆÄÂçïÂú∞ËÆ≤Ôºå‰∏Ä‰∏™<code>Native MethodÂ∞±ÊòØ‰∏Ä‰∏™JavaË∞ÉÁî®ÈùûJava‰ª£Á†ÅÁöÑÊé•Âè£</code>„ÄÇ‰∏Ä‰∏™Native MethodÊòØËøôÊ†∑‰∏Ä‰∏™JavaÊñπÊ≥ï:ËØ•ÊñπÊ≥ïÁöÑÂÆûÁé∞Áî±ÈùûJavaËØ≠Ë®ÄÂÆûÁé∞,ÊØîÂ¶ÇC„ÄÇËøô‰∏™ÁâπÂæÅÂπ∂ÈùûJavaÊâÄÊåÅÊúâ,ÊúâÂæàÂ§öÂÖ∂ÂÆÉÁöÑÁºñÁ®ãËØ≠Ë®ÄÈÉΩÊúâËøô‰∏ÄÊú∫Âà∂,ÊØîÂ¶ÇÂú®C++‰∏≠,‰Ω†ÂèØ‰ª•Áî®extern‚ÄùC‚ÄùÂëäÁü•C++ÁºñËØëÂô®ÂéªË∞ÉÁî®‰∏Ä‰∏™CÁöÑÂáΩÊï∞„ÄÇ<br> ‚ÄúA native method is a Java method whose implementation is provided by non-java code.‚Äù<br> Âú®ÂÆö‰πâ‰∏Ä‰∏™native methodÊó∂,Âπ∂‰∏çÊèê‰æõÂÆûÁé∞‰Ωì(Êúâ‰∫õÂÉèÂÆö‰πâ‰∏Ä‰∏™Java interface),Âõ†‰∏∫ÂÖ∂ÂÆûÁé∞‰ΩìÊòØÁî±ÈùûJavaËØ≠Ë®ÄÂú®Â§ñÈù¢ÂÆûÁé∞ÁöÑ„ÄÇ<br> Êú¨Âú∞Êé•Âè£ÁöÑ‰ΩúÁî®ÊòØËûçÂêà‰∏çÂêåÁöÑÁºñÁ®ãËØ≠Ë®Ä‰∏∫JavaÊâÄÁî®,ÂÆÉÁöÑÂàùË°∑ÊòØËûçÂêàC/C++Á®ãÂ∫è„ÄÇ</p>
<h2 id="‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®-Native-Method"><a href="#‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®-Native-Method" class="headerlink" title="‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî® Native Method?"></a>‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî® Native Method?</h2><p>Java‰ΩøÁî®Ëµ∑Êù•ÈùûÂ∏∏Êñπ‰æø,ÁÑ∂ËÄåÊúâ‰∫õÂ±ÇÊ¨°ÁöÑ‰ªªÂä°Áî®JavaÂÆûÁé∞Ëµ∑Êù•‰∏çÂÆπÊòìÔºåÊàñËÄÖÊàë‰ª¨ÂØπÁ®ãÂ∫èÁöÑÊïàÁéáÂæàÂú®ÊÑèÊó∂ÔºåÈóÆÈ¢òÂ∞±Êù•‰∫Ü„ÄÇ</p>
<ul>
<li>‰∏éJavaÁéØÂ¢ÉÂ§ñ‰∫§‰∫í<br><strong>ÊúâÊó∂JavaÂ∫îÁî®ÈúÄË¶Å‰∏éJavaÂ§ñÈù¢ÁöÑÁéØÂ¢É‰∫§‰∫í,ËøôÊòØÊú¨Âú∞ÊñπÊ≥ïÂ≠òÂú®ÁöÑ‰∏ªË¶ÅÂéüÂõ†„ÄÇ</strong>‰Ω†ÂèØ‰ª•ÊÉ≥ÊÉ≥JavaÈúÄË¶Å‰∏é‰∏Ä‰∫õÂ∫ïÂ±ÇÁ≥ªÁªüÔºåÂ¶ÇÊìç‰ΩúÁ≥ªÁªüÊàñÊüê‰∫õÁ°¨‰ª∂‰∫§Êç¢‰ø°ÊÅØÊó∂ÁöÑÊÉÖÂÜµ„ÄÇÊú¨Âú∞ÊñπÊ≥ïÊ≠£ÊòØËøôÊ†∑‰∏ÄÁßç‰∫§ÊµÅÊú∫Âà∂ÔºöÂÆÉ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÊ¥ÅÁöÑÊé•Âè£ÔºåËÄå‰∏îÊàë‰ª¨Êó†ÈúÄÂéª‰∫ÜËß£JavaÂ∫îÁî®‰πãÂ§ñÁöÑÁπÅÁêêÁöÑÁªÜËäÇ„ÄÇ</li>
<li>‰∏éÊìç‰ΩúÁ≥ªÁªü‰∫§‰∫í<br>JVMÊîØÊåÅÁùÄJavaËØ≠Ë®ÄÊú¨Ë∫´ÂíåËøêË°åÊó∂Â∫ìÔºåÂÆÉÊòØJavaÁ®ãÂ∫èËµñ‰ª•ÁîüÂ≠òÁöÑÂπ≥Âè∞ÔºåÂÆÉÁî±‰∏Ä‰∏™Ëß£ÈáäÂô®(Ëß£ÈáäÂ≠óËäÇÁ†Å)Âíå‰∏Ä‰∫õËøûÊé•Âà∞Êú¨Âú∞‰ª£Á†ÅÁöÑÂ∫ìÁªÑÊàê„ÄÇÁÑ∂ËÄå‰∏çÁÆ°ÊÄéÊ†∑ÔºåÂÆÉÊØïÁ´ü‰∏çÊòØ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÁ≥ªÁªü,ÂÆÉÁªèÂ∏∏‰æùËµñ‰∫é‰∏Ä‰∫õÂ∫ïÂ±ÇÁ≥ªÁªüÁöÑÊîØÊåÅ„ÄÇËøô‰∫õÂ∫ïÂ±ÇÁ≥ªÁªüÂ∏∏Â∏∏ÊòØÂº∫Â§ßÁöÑÊìç‰ΩúÁ≥ªÁªü„ÄÇ<strong>ÈÄöËøá‰ΩøÁî®Êú¨Âú∞ÊñπÊ≥ï,Êàë‰ª¨Âæó‰ª•Áî®JavaÂÆûÁé∞‰∫ÜjreÁöÑ‰∏éÂ∫ïÂ±ÇÁ≥ªÁªüÁöÑ‰∫§‰∫í,ÁîöËá≥JVMÁöÑ‰∏Ä‰∫õÈÉ®ÂàÜÂ∞±ÊòØÁî®CÂÜôÁöÑ„ÄÇ</strong>ËøòÊúâÔºåÂ¶ÇÊûúÊàë‰ª¨Ë¶Å‰ΩøÁî®‰∏Ä‰∫õJavaËØ≠Ë®ÄÊú¨Ë∫´Ê≤°ÊúâÊèê‰æõÂ∞ÅË£ÖÁöÑÊìç‰ΩúÁ≥ªÁªüÁöÑÁâπÊÄßÊó∂ÔºåÊàë‰ª¨‰πüÈúÄË¶Å‰ΩøÁî®Êú¨Âú∞ÊñπÊ≥ï„ÄÇ</li>
<li>Sun‚Äôs Java<br><strong>SunÁöÑËß£ÈáäÂô®ÊòØÁî®cÂÆûÁé∞ÁöÑÔºåËøô‰ΩøÂæóÂÆÉËÉΩÂÉè‰∏Ä‰∫õÊôÆÈÄöÁöÑC‰∏ÄÊ†∑‰∏éÂ§ñÈÉ®‰∫§‰∫í„ÄÇ</strong>jreÂ§ßÈÉ®ÂàÜÊòØÁî®JavaÂÆûÁé∞ÁöÑÔºåÂÆÉ‰πüÈÄöËøá‰∏Ä‰∫õÊú¨Âú∞ÊñπÊ≥ï‰∏éÂ§ñÁïå‰∫§‰∫í„ÄÇ‰æãÂ¶ÇÔºöÁ±ªjava.lang.ThreadÁöÑsetPriority()ÊñπÊ≥ïÊòØÁî®JavaÂÆûÁé∞ÁöÑ,‰ΩÜÊòØÂÆÉÂÆûÁé∞Ë∞ÉÁî®ÁöÑÊòØËØ•Á±ªÈáåÁöÑÊú¨Âú∞ÊñπÊ≥ïsetPriority()„ÄÇËøô‰∏™Êú¨Âú∞ÊñπÊ≥ïÊòØÁî®CÂÆûÁé∞ÁöÑ,Âπ∂Ë¢´Ê§çÂÖ•JVMÂÜÖÈÉ®,Âú®windows 95ÁöÑÂπ≥Âè∞‰∏ä,Ëøô‰∏™Êú¨Âú∞ÊñπÊ≥ïÊúÄÁªàÂ∞ÜË∞ÉÁî®win32 SetPriority() API„ÄÇËøôÊòØ‰∏Ä‰∏™Êú¨Âú∞ÊñπÊ≥ïÁöÑÂÖ∑‰ΩìÂÆûÁé∞Áî±JVMÁõ¥Êé•Êèê‰æõ,Êõ¥Â§öÁöÑÊÉÖÂÜµÊòØÊú¨Âú∞ÊñπÊ≥ïÁî±Â§ñÈÉ®ÁöÑÂä®ÊÄÅÈìæÊé•Â∫ì(external dynamic link library)Êèê‰æõ,ÁÑ∂ÂêéË¢´JVMË∞ÉÁî®„ÄÇ</li>
</ul>
<h2 id="Êú¨Âú∞ÊñπÊ≥ïÊ†à"><a href="#Êú¨Âú∞ÊñπÊ≥ïÊ†à" class="headerlink" title="Êú¨Âú∞ÊñπÊ≥ïÊ†à"></a>Êú¨Âú∞ÊñπÊ≥ïÊ†à</h2><p><strong>‚ÄúÊ†àÁÆ°ËøêË°åÔºåÂ†ÜÁÆ°Â≠òÂÇ®‚Äù</strong></p>
<p>Java ËôöÊãüÊú∫Ê†àÁî®‰∫éÁÆ°ÁêÜJavaÊñπÊ≥ïÁöÑË∞ÉÁî®ÔºåËÄåÊú¨Âú∞ÊñπÊ≥ïÊ†àÁî®‰∫éÁÆ°ÁêÜÊú¨Âú∞ÊñπÊ≥ïÁöÑË∞ÉÁî®„ÄÇ</p>
<p>ÂÖÅËÆ∏Ë¢´ÂÆûÁé∞Âõ∫ÂÆöÊàñËÄÖÂèØÂä®ÊÄÅÊâ©Â±ïÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÔºàÂú®ÂÜÖÂ≠òÊ∫¢Âá∫ÊñπÈù¢ÊòØÁõ∏ÂêåÁöÑÔºâ„ÄÇ</p>
<ul>
<li>Â¶ÇÊûúÁ∫øÁ®ãËØ∑Ê±ÇÂàÜÈÖçÁöÑÊ†àÂÆπÈáèË∂ÖËøáÊú¨Âú∞ÊñπÊ≥ïÊ†àÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÂÆπÈáèÔºåJavaËôöÊãüÊú∫Â∞Ü‰ºöÊäõÂá∫‰∏Ä‰∏™ <code>StackOverFlowError </code> ÂºÇÂ∏∏„ÄÇ</li>
<li>Â¶ÇÊûúÊú¨Âú∞ÊñπÊ≥ïÊ†àÂèØ‰ª•Âä®ÊÄÅÊâ©Â±ïÔºåÂπ∂‰∏îÂú®Â∞ùËØïÊâ©Â±ïÁöÑÊó∂ÂÄôÊó†Ê≥ïÁî≥ËØ∑Âà∞Ë∂≥Â§üÁöÑÂÜÖÂ≠òÔºåÊàñËÄÖÂú®ÂàõÂª∫Êñ∞ÁöÑÁ∫øÁ®ãÊó∂Ê≤°ÊúâË∂≥Â§üÁöÑÂÜÖÂ≠òÂéªÂàõÂª∫ÂØπÂ∫îÁöÑÊú¨Âú∞ÊñπÊ≥ïÊ†àÔºåÈÇ£‰πàJavaËôöÊãüÊú∫Â∞Ü‰ºöÊäõÂá∫‰∏Ä‰∏™ <code>outOfMemoryError</code>ÂºÇÂ∏∏„ÄÇ</li>
</ul>
<p>Êú¨Âú∞ÊñπÊ≥ïÊòØ‰ΩøÁî®CËØ≠Ë®ÄÂÆûÁé∞ÁöÑ„ÄÇ</p>
<p>ÂÆÉÁöÑÂÖ∑‰ΩìÂÅöÊ≥ïÊòØ <code>Native Method Stack</code> ‰∏≠ÁôªËÆ∞ <code>native</code> ÊñπÊ≥ïÔºåÂú®<code>Execution Engine</code> ÊâßË°åÊó∂Âä†ËΩΩÊú¨Âú∞ÊñπÊ≥ïÂ∫ì„ÄÇ</p>
<p>ÂΩìÊüê‰∏™Á∫øÁ®ãË∞ÉÁî®‰∏Ä‰∏™Êú¨Âú∞ÊñπÊ≥ïÊó∂ÔºåÂÆÉÂ∞±ËøõÂÖ•‰∫Ü‰∏Ä‰∏™ÂÖ®Êñ∞ÁöÑÂπ∂‰∏î‰∏çÂú®ÂèóËôöÊãüÊú∫ÈôêÂà∂ÁöÑ‰∏ñÁïåÔºåÂÆÉÂíåËôöÊãüÊú∫Êã•ÊúâÂêåÊ†∑ÁöÑÊùÉÈôêÔºö</p>
<ul>
<li>Êú¨Âú∞ÊñπÊ≥ïÂèØ‰ª•ÈÄöËøáÊú¨Âú∞ÊñπÊ≥ïÊé•Âè£Êù•ËÆøÈóÆËôöÊãüÊú∫ÂÜÖÈÉ®ÁöÑËøêË°åÊó∂Êï∞ÊçÆÂå∫„ÄÇ</li>
<li>ÂÆÉÁîöËá≥ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Êú¨Âú∞Â§ÑÁêÜÂô®‰∏≠ÁöÑÂØÑÂ≠òÂô®„ÄÇ</li>
<li>Áõ¥Êé•‰ªéÊú¨Âú∞ÂÜÖÂ≠òÁöÑÂ†Ü‰∏≠ÂàÜÈÖç‰ªªÊÑèÊï∞ÈáèÁöÑÂÜÖÂ≠ò„ÄÇ</li>
</ul>
<p>Âπ∂‰∏çÊòØÊâÄÊúâÁöÑJVMÈÉΩÊîØÊåÅÊú¨Âú∞ÊñπÊ≥ï„ÄÇÂõ†‰∏∫JavaËôõÊãüÊú∫ËßÑËåÉÂπ∂Ê≤°ÊúâÊòéÁ°ÆË¶ÅÊ±ÇÊú¨Âú∞ÊñπÊ≥ïÊ†àÁöÑ‰ΩøÁî®ËØ≠Ë®Ä„ÄÅÂÖ∑‰ΩìÂÆûÁé∞ÊñπÂºè„ÄÅÊï∞ÊçÆÁªìÊûÑÁ≠â„ÄÇÂ¶ÇÊûúJVM‰∫ßÂìÅ‰∏çÊâìÁÆóÊîØÊåÅnativeÊñπÊ≥ïÔºå‰πüÂèØ‰ª•Êó†ÈúÄÂÆûÁé∞Êú¨Âú∞ÊñπÊ≥ïÊ†à„ÄÇ</p>
<p>Âú®Hotspot JVM‰∏≠Ôºå Áõ¥Êé•Â∞ÜÊú¨Âú∞ÊñπÊ≥ïÊ†àÂíåËôöÊãüÊú∫Ê†àÂêà‰∫å‰∏∫‰∏Ä„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÂØπË±°ÁöÑÂàÜÈÖçËøáÁ®ã</title>
    <url>/p/baebd9bc.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="MinorGC„ÄÅYoungGC„ÄÅMajorGC„ÄÅFullGCÁöÑÂå∫Âà´"><a href="#MinorGC„ÄÅYoungGC„ÄÅMajorGC„ÄÅFullGCÁöÑÂå∫Âà´" class="headerlink" title="MinorGC„ÄÅYoungGC„ÄÅMajorGC„ÄÅFullGCÁöÑÂå∫Âà´"></a>MinorGC„ÄÅYoungGC„ÄÅMajorGC„ÄÅFullGCÁöÑÂå∫Âà´</h2><p>ÂÆûÈôÖ‰∏äÔºåMinorGCÂèàÁß∞‰∏∫ YoungGCÔºåÂÆåÂÖ®Á≠â‰ª∑„ÄÇYoungGC ÁöÑËß¶ÂèëÊù°‰ª∂ÊòØ Eden Êª°‰∫ÜÁöÑÊó∂ÂÄôÔºå‰ºö‰∏ÄËµ∑Âõû Eden Âíå S0ÊàñS1„ÄÇÊ≥®ÊÑèÔºöÂΩìÂπ∏Â≠òËÄÖÂå∫Êª°‰∫Ü‰πãÂêéÊòØ‰∏ç‰ºöËß¶ÂèëYoungGCÁöÑ„ÄÇ</p>
<p>MajorGCÊòØÈíàÂØπËÄÅÂπ¥‰ª£ÁöÑÂûÉÂúæÂõûÊî∂„ÄÇFullGCÊòØÂ∞ÜÊñ∞Áîü‰ª£„ÄÅËÄÅÂπ¥‰ª£„ÄÅÊñπÊ≥ïÂå∫‰∏ÄËµ∑ÂõûÊî∂„ÄÇÊàë‰ª¨Â§ßÈÉ®ÂàÜÊó∂ÂÄôÂõûÊî∂ÁöÑÈÉΩÊòØÊåáÊñ∞Áîü‰ª£„ÄÇ</p>
<p>ÈíàÂØπHotspot VmÁöÑÂÆûÁé∞ÔºåÂÆÉÈáåÈù¢ÁöÑGCÊåâÁÖßÂõûÊî∂Âå∫ÂüüÂèàÂàÜ‰∏∫‰∏§Â§ßÁ±ªÔºöÈÉ®ÂàÜÊî∂ÈõÜÔºàPartial GCÔºâ„ÄÅÊï¥Â†ÜÊî∂ÈõÜÔºàFull GCÔºâ„ÄÇ</p>
<h3 id="ÈÉ®ÂàÜÊî∂ÈõÜ"><a href="#ÈÉ®ÂàÜÊî∂ÈõÜ" class="headerlink" title="ÈÉ®ÂàÜÊî∂ÈõÜ"></a>ÈÉ®ÂàÜÊî∂ÈõÜ</h3><ul>
<li>Êñ∞Áîü‰ª£Êî∂ÈõÜÔºàMinor GC / Young GCÔºâÔºöÂè™ÊòØÊñ∞Áîü‰ª£ÔºàEden \ S0,S1)ÁöÑÂûÉÂúæÊî∂ÈõÜÂô®„ÄÇ</li>
<li>ËÄÅÂπ¥‰ª£Êî∂ÈõÜÔºàMajor GC / Old GCÔºâÔºöÂè™ÊòØËÄÅÂπ¥‰ª£ÁöÑÂûÉÂúæÊî∂ÈõÜ„ÄÇÁõÆÂâçÂè™ÊúâCMS GC‰ºöÊúâÂçïÁã¨Êî∂ÈõÜËÄÅÂπ¥‰ª£ÁöÑË°å‰∏∫ÔºåÂæàÂ§öÊó∂ÂÄôMajor GC‰ºöÂíåFull GCÊ∑∑Ê∑Ü‰ΩøÁî®ÔºåÈúÄË¶ÅÂÖ∑‰ΩìÂàÜËæ®ÊòØËÄÅÂπ¥‰ª£ÂõûÊî∂ËøòÊòØÊï¥Â†ÜÂõûÊî∂„ÄÇ</li>
<li>Ê∑∑ÂêàÊî∂ÈõÜÔºàMixed GCÔºâÔºöÊî∂ÈõÜÊï¥‰∏™Êñ∞Áîü‰ª£‰ª•ÂèäÈÉ®ÂàÜËÄÅÂπ¥‰ª£ÁöÑÂûÉÂúæÊî∂ÈõÜ„ÄÇÁõÆÂâçÂè™ÊúâG1 GC‰ºöÊúâËøôÁßçË°å‰∏∫„ÄÇ</li>
</ul>
<h3 id="Êï¥Â†ÜÊî∂ÈõÜ"><a href="#Êï¥Â†ÜÊî∂ÈõÜ" class="headerlink" title="Êï¥Â†ÜÊî∂ÈõÜ"></a>Êï¥Â†ÜÊî∂ÈõÜ</h3><p>Êî∂ÈõÜÊï¥‰∏™JavaÂ†ÜÂå∫„ÄÅÊñπÊ≥ïÂå∫ÁöÑÂûÉÂúæÊî∂ÈõÜÂô®„ÄÇ</p>
<h3 id="ËÄÅÂπ¥‰ª£GC-Major-GC-Full-GC-Ëß¶ÂèëÊú∫Âà∂"><a href="#ËÄÅÂπ¥‰ª£GC-Major-GC-Full-GC-Ëß¶ÂèëÊú∫Âà∂" class="headerlink" title="ËÄÅÂπ¥‰ª£GC(Major GC/Full GC)Ëß¶ÂèëÊú∫Âà∂"></a>ËÄÅÂπ¥‰ª£GC(Major GC/Full GC)Ëß¶ÂèëÊú∫Âà∂</h3><ul>
<li>ÊåáÂèëÁîüÂú®ËÄÅÂπ¥‰ª£ÁöÑGC,ÂØπË±°‰ªéËÄÅÂπ¥‰ª£Ê∂àÂ§±Êó∂,Êàë‰ª¨ËØ¥‚ÄùMajor GC‚ÄùÊàñ‚ÄùFull GC‚ÄùÂèëÁîü‰∫Ü„ÄÇ</li>
<li>Âá∫Áé∞‰∫ÜMajor GC,ÁªèÂ∏∏‰ºö‰º¥ÈöèËá≥Â∞ë‰∏ÄÊ¨°ÁöÑMinor GC(‰ΩÜÈùûÁªùÂØπÁöÑ,Âú®Parallel ScavengeÊî∂ÈõÜÂô®ÁöÑÊî∂ÈõÜÁ≠ñÁï•ÈáåÂ∞±ÊúâÁõ¥Êé•ËøõË°åMajor GCÁöÑÁ≠ñÁï•ÈÄâÊã©ËøáÁ®ã)„ÄÇ‰πüÂ∞±ÊòØÂú®ËÄÅÂπ¥‰ª£Á©∫Èó¥‰∏çË∂≥Êó∂,‰ºöÂÖàÂ∞ùËØïËß¶ÂèëMinor GC„ÄÇÂ¶ÇÊûú‰πãÂêéÁ©∫Èó¥Ëøò‰∏çË∂≥,ÂàôËß¶ÂèëMajor GC„ÄÇ</li>
<li>Major GCÁöÑÈÄüÂ∫¶‰∏ÄËà¨‰ºöÊØîMinor GCÊÖ¢10ÂÄç‰ª•‰∏ä,STWÁöÑÊó∂Èó¥Êõ¥Èïø„ÄÇ</li>
<li>Â¶ÇÊûú Major GC ‰πãÂêéÂÜÖÂ≠òËøòÊòØ‰∏çË∂≥ÔºåÂ∞±Êä•Âá∫OOMÁöÑÈîôËØØ‰∫Ü„ÄÇ</li>
</ul>
<h2 id="ÂØπË±°ÂàÜÈÖçËøáÁ®ãÊ¶ÇËø∞"><a href="#ÂØπË±°ÂàÜÈÖçËøáÁ®ãÊ¶ÇËø∞" class="headerlink" title="ÂØπË±°ÂàÜÈÖçËøáÁ®ãÊ¶ÇËø∞"></a>ÂØπË±°ÂàÜÈÖçËøáÁ®ãÊ¶ÇËø∞</h2><p>‰∏∫Êñ∞ÂØπË±°ÂàÜÈÖçÂÜÖÂ≠òÊòØ‰∏Ä‰ª∂ÈùûÂ∏∏‰∏•Ë∞®ÂíåÂ§çÊùÇÁöÑ‰ªªÂä°ÔºåJVMÁöÑËÆæËÆ°ËÄÖ‰ª¨‰∏ç‰ªÖÈúÄË¶ÅËÄÉËôëÂÜÖÂ≠òÂ¶Ç‰ΩïÂàÜÈÖç„ÄÅÂú®Âì™ÈáåÂàÜÈÖçÁ≠âÈóÆÈ¢òÔºåÂπ∂‰∏îÁî±‰∫éÂÜÖÂ≠òÂàÜÈÖçÁÆóÊ≥ï‰∏éÂÜÖÂ≠òÂõûÊî∂ÁÆóÊ≥ïÂØÜÂàáÁõ∏ÂÖ≥ÔºåÊâÄ‰ª•ËøòÈúÄË¶ÅËÄÉËôëGCÊâßË°åÂÆåÂÜÖÂ≠òÂõûÊî∂ÂêéÊòØÂê¶‰ºöÂú®ÂÜÖÂ≠òÁ©∫Èó¥‰∏≠‰∫ßÁîüÂÜÖÂ≠òÁ¢éÁâá„ÄÇ</p>
<p>New ÁöÑÂØπË±°ÂÖàÊîæÂú®‰ºäÁî∏Âõ≠Âå∫ÔºåÂΩì‰ºäÁî∏Âõ≠Âå∫ÁöÑÁ©∫Èó¥Â°´Êª°Êó∂ÔºåÁ®ãÂ∫èÂèàÈúÄË¶ÅÂàõÂª∫ÂØπË±°ÔºåJVMÁöÑÂûÉÂúæÂõûÊî∂ÊúüÂ∞ÜÂØπ‰ºäÁî∏Âõ≠Âå∫ËøõË°åÂûÉÂúæÂõûÊî∂ÔºàMinor GCÔºâÔºåÂ∞Ü‰ºäÁî∏Âõ≠Âå∫‰∏≠ÁöÑ‰∏çÂú®Ë¢´ÂÖ∂‰ªñÂØπË±°ÊâÄÂºïÁî®ÁöÑÂØπË±°ËøõË°åÈîÄÊØÅÔºåÂÜçÂä†ËΩΩÊñ∞ÁöÑÂØπË±°Âà∞‰ºäÁî∏Âõ≠Âå∫ÔºåÁÑ∂ÂêéÂ∞Ü‰ºäÁî∏Âõ≠Âå∫‰∏≠ÁöÑÂâ©‰ΩôÂØπË±°ÁßªÂä®Âà∞Âπ∏Â≠òËÄÖ0Âå∫ÔºàS0ÔºâÔºåÂ¶ÇÊûúÂÜçÊ¨°Ëß¶ÂèëÂûÉÂúæÂõûÊî∂ÔºåÊ≠§Êó∂‰∏äÊ¨°Âπ∏Â≠ò‰∏ãÊù•ÁöÑÊîæÂà∞Âπ∏Â≠òËÄÖ0Âå∫ÔºåÂ¶ÇÊûúÊ≤°ÊúâÂõûÊî∂ÔºåÂ∞±‰ºöÊîæÂà∞Âπ∏Â≠òËÄÖ1Âå∫ÔºàS1Ôºâ„ÄÇÂ¶ÇÊûúÂÜçÊ¨°ÁªèÂéÜÂûÉÂúæÂõûÊî∂ÔºåÊ≠§Êó∂‰ºöÈáçÊñ∞ÊîæÂà∞S0Âå∫ÔºåÊé•ÁùÄÂÜçÂéªS1ÔºåÂ¶ÇÊûúÂÜçÊ¨°ÁªèÂéÜÂûÉÂúæÂõûÊî∂ÔºåÊ≠§Êó∂‰ºöÈáçÊñ∞ÊîæÂõûS0ÔºåÊé•ÁùÄÂÜçÂéªS1ÔºåÂ¶ÇÊ≠§Âæ™ÁéØÁõ¥Âà∞Á¨¨15Ê¨°ÔºàÈªòËÆ§ÔºåÂèØ‰ª•ÈÄöËøá<code>-XX:MaxTenuringThreshold=N</code>ËÆæÁΩÆÔºâËΩ¨ÂéªËÄÅÂπ¥‰ª£„ÄÇ</p>
<h2 id="GCËøáÁ®ã"><a href="#GCËøáÁ®ã" class="headerlink" title="GCËøáÁ®ã"></a>GCËøáÁ®ã</h2><h3 id="Á¨¨‰∏ÄÊ¨°GC"><a href="#Á¨¨‰∏ÄÊ¨°GC" class="headerlink" title="Á¨¨‰∏ÄÊ¨°GC"></a>Á¨¨‰∏ÄÊ¨°GC</h3><p>ÂΩì‰ºäÁî∏Âõ≠Âå∫ÁöÑÁ©∫Èó¥Êª°‰∫ÜÔºåÂπ∂‰∏îÁ®ãÂ∫èÂèàÈúÄË¶ÅÂàõÂª∫Êñ∞ÁöÑÂØπË±°Êó∂ÔºåJVMÂûÉÂúæÂõûÊî∂Âô®Â∞Ü‰ºäÁî∏Âõ≠Âå∫ËøõË°åÂûÉÂúæÂõûÊî∂ÔºåÂ∞Ü‰ºäÁî∏Âõ≠Âå∫ÁöÑ‰∏çÂÜçË¢´ÂºïÁî®ÁöÑÂØπË±°ËøõË°åÈîÄÊØÅÔºåÂÜçÂú®‰ºäÁî∏Âõ≠Âå∫ÂàõÂª∫Êñ∞ÁöÑÂØπË±°„ÄÇ</p>
<p>ÁÑ∂ÂêéÂ∞Ü‰ºäÁî∏Âõ≠Âå∫Ââ©‰ΩôÁöÑÂØπË±°ÁßªÂä®Âà∞S0ÔºåÊØè‰∏™ÂØπË±°Ë¢´ÂàÜÈÖç‰∫Ü‰∏Ä‰∏™Âπ¥ÈæÑËÆ°Êï∞Âô®ÔºàageÔºâÔºåÊØèËøõË°å‰∏ÄÊ¨°GCÔºåÂπ∏Â≠ò‰∏ãÊù•ÁöÑÂØπË±°ageÁ¥ØÂä†Ôºå‰∏äÈù¢ÁöÑ‰∏§‰∏™Âπ∏Â≠òÂØπË±°ageË¢´ËµãÂÄº‰∏∫1„ÄÇ</p>
<p>Ê≠§Ê¨°GCÂÆåÊàêÂêéÔºå‰ºäÁî∏Âõ≠Âå∫ÊòØÁ©∫ÁöÑ„ÄÇ</p>
<p><img src="/p/baebd9bc/JVM-%E7%AC%AC%E4%B8%80%E6%AC%A1GC%E8%BF%87%E7%A8%8B.png" alt="image-20211018225038962"></p>
<p>S0Âå∫ÂíåS1Âå∫Ôºå‰πüË¢´Âè´ÂÅöFromÂå∫ÂíåToÂå∫ÔºåÂà§Êñ≠‰∫åËÄÖÂæàÁÆÄÂçïÔºåË∞ÅÊòØÁ©∫ÁöÑË∞ÅÊòØToÂå∫ÔºåÂàôÂè¶Â§ñ‰∏Ä‰∏™Â∞±ÊòØFromÂå∫Ôºõ</p>
<h3 id="Á¨¨‰∫åÊ¨°GC"><a href="#Á¨¨‰∫åÊ¨°GC" class="headerlink" title="Á¨¨‰∫åÊ¨°GC"></a>Á¨¨‰∫åÊ¨°GC</h3><p>ÂΩì‰ºäÁî∏Âõ≠Âå∫Á©∫Èó¥ÂèàÊª°‰∫ÜÊó∂ÔºåËøõË°åÁ¨¨‰∫åÊ¨°GCÔºåÂ∞Ü‰ºäÁî∏Âõ≠Âå∫Âπ∏Â≠òÁöÑÂØπË±°ÊîæÂÖ•S1Âå∫ÔºåageÊ≠§Êó∂‰∏∫1Ôºõ</p>
<p>ÂêåÊó∂ÂØπS0Âå∫ÁöÑÂØπË±°ËøõË°åÂà§Êñ≠ÊòØÂê¶ËøòË¢´‰ΩøÁî®ÔºåÂ¶ÇÊûúË¢´‰ΩøÁî®ÁöÑËØùÔºåÂ∞±Â∞ÜÂÖ∂ÊîæÂÖ•S1Âå∫ÔºåageÁ¥ØÂä†Ê≠§Êó∂‰∏∫2Ôºõ</p>
<p>Á¨¨‰∫åÊ¨°GCÂÆåÊàêÂêéÔºåS0Âå∫‰∏∫Á©∫‰∫ÜÔºåÊ≠§Êó∂S0Âå∫‰∏∫ToÂå∫ÔºåS1Âå∫‰∏∫FromÂå∫Ôºõ</p>
<p><img src="/p/baebd9bc/JVM-%E7%AC%AC%E4%BA%8C%E6%AC%A1GC%E8%BF%87%E7%A8%8B.png" alt="image-20211018225544620"></p>
<h3 id="Á¨¨NÊ¨°GC"><a href="#Á¨¨NÊ¨°GC" class="headerlink" title="Á¨¨NÊ¨°GC"></a>Á¨¨NÊ¨°GC</h3><p>Á¨¨NÊ¨°GCÊó∂ÔºåÊàë‰ª¨ÂèëÁé∞S1Âå∫ÁöÑÊúâ‰∏§‰∏™ÂØπË±°ÁöÑageÂ∑≤ÁªèÊòØ15‰∫ÜÔºåÂ¶ÇÊûúÊ≠§Êó∂Ëøô‰∏§‰∏™ÂØπË±°ËøòÊòØË¢´ÂºïÁî®ÁöÑÔºåÂàôÂ∞ÜÂÖ∂ÊôãÂçáÂà∞OldÂå∫Ôºõ</p>
<p>ÂÖ∂‰∏≠15‰∏∫ÈªòËÆ§ÈòàÂÄºÔºåËøô‰∏™ÈòàÂÄºÊòØÂèØ‰ª•Ëá™Â∑±ËÆæÁΩÆÔºö<code>-XX:MaxTenuringThreshold=N</code></p>
<p><img src="/p/baebd9bc/JVM-%E7%AC%ACN%E6%AC%A1GC%E8%BF%87%E7%A8%8B.png" alt="image-20211018225827055"></p>
<h2 id="ÂØπË±°ÂàÜÈÖçÁöÑÁâπÊÆäÊÉÖÂÜµ"><a href="#ÂØπË±°ÂàÜÈÖçÁöÑÁâπÊÆäÊÉÖÂÜµ" class="headerlink" title="ÂØπË±°ÂàÜÈÖçÁöÑÁâπÊÆäÊÉÖÂÜµ"></a>ÂØπË±°ÂàÜÈÖçÁöÑÁâπÊÆäÊÉÖÂÜµ</h2><p>ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±°Êó∂ÔºåÈ¶ñÂÖàÂà§Êñ≠EdenÂå∫ÊòØÂê¶ÊîæÂæó‰∏ãÔºåÂ¶ÇÊûúÊîæÂæó‰∏ãÔºåÂ∞±‰∏∫ÂÖ∂ÂàÜÈÖçÂÜÖÂ≠òÔºåÊîæ‰∏ç‰∏ãÁöÑËØùÔºåÂ∞±ËøõË°åYGCÔºõ</p>
<p>ÁÑ∂ÂêéÂÜçÂà§Êñ≠EdenÂå∫ÊòØÂê¶ÊîæÂæó‰∏ãÔºåÂ¶ÇÊûúÊ≠§Êó∂ÊîæÂæó‰∏ãÁöÑËØùÔºåÂ∞±‰∏∫ÂÖ∂ÂàÜÈÖçÂÜÖÂ≠òÔºõ</p>
<p>Â¶ÇÊûúËøòÊòØÊîæ‰∏ç‰∏ãÔºåËØ¥ÊòéËøô‰∏™ÂØπË±°ÊØî‰ºäÁî∏Âõ≠Âå∫ÁöÑÁ©∫Èó¥ËøòË¶ÅÂ§ßÔºåËøô‰∏™ÂØπË±°ÊòØ‰∏™Ë∂ÖÂ§ßÂØπË±°ÔºåÊ≠§Êó∂Â∞ÜÂÖ∂ÊîæÂÖ•OldÂå∫Ôºõ</p>
<p>Â¶ÇÊûúOldÂå∫‰πüÊîæ‰∏ç‰∏ãÔºåÂ∞±ËøõË°åFGCÔºåÁÑ∂ÂêéÂÜçÂà§Êñ≠OldÂå∫ËÉΩ‰∏çËÉΩÊîæ‰∏ãÔºåÊîæÂæó‰∏ãÂ∞±Â≠òÂú®OldÂå∫ÔºåÂ¶ÇÊûúËøòÊòØÊîæ‰∏ç‰∏ãÔºåÂ∞±‰ºöÂá∫Áé∞OOMÂºÇÂ∏∏Ôºõ</p>
<p>Âú®ËøõË°åYGCÁöÑÊó∂ÂÄôÔºåÂπ∏Â≠òÁöÑÂØπË±°‰ºöÊîæÂÖ•Âπ∏Â≠òÂå∫ÔºåÊ≠§Êó∂Âà§Êñ≠ÊòØÂê¶ËÉΩÊîæ‰∏ãÔºåÂ¶ÇÊûúÂπ∏Â≠òÂå∫Êîæ‰∏ç‰∏ãÔºåÂ∞±‰ºöÁõ¥Êé•ÊîæÂÖ•OldÂå∫„ÄÇ</p>
<p><img src="/p/baebd9bc/JVM-%E7%89%B9%E6%AE%8A%E7%9A%84GC%E8%BF%87%E7%A8%8B.png" alt="image-20211018230016194"></p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÂØπ‰ª£Á†ÅÁöÑ‰ºòÂåñ</title>
    <url>/p/c69e3549.html</url>
    <content><![CDATA[<html><head></head><body><p>JVMÔºàHotSpotÔºâÂú®Âì™‰∫õÈò∂ÊÆµËÉΩÂØπÂºÄÂèëËÄÖÂÜôÁöÑ‰ª£Á†ÅËøõË°å‰ºòÂåñÔºüÂú®Java‰∏≠ÁöÑ‰∏âÁßçÁºñËØëÊñπÂºè‰∏≠ÔºöÂâçÁ´ØÁºñËØëÔºàJavacÔºâ„ÄÅÂç≥Êó∂ÁºñËØëÔºàJust In TimeÔºâ„ÄÅÊèêÂâçÁºñËØëÔºàAhead Of TimeÔºâ„ÄÇ</p>
<p>JavaÁöÑÊâßË°åËøáÁ®ãÊï¥‰ΩìÂèØ‰ª•ÂàÜ‰∏∫‰∏§‰∏™ÈÉ®ÂàÜÔºåÂú®Á¨¨‰∏ÄÊ≠•Ê≠•‰∏≠Áî±javacÂ∞ÜÊ∫êÁ†ÅÁºñËØëÊàêÂ≠óËäÇÁ†ÅÔºåÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠‰ºöËøõË°åËØçÊ≥ïÂàÜÊûê„ÄÅËØ≠Ê≥ïÂàÜÊûê„ÄÅËØ≠‰πâÂàÜÊûêÔºåÁºñËØëÂéüÁêÜ‰∏≠ËøôÈÉ®ÂàÜÁöÑÁºñËØëÁß∞‰∏∫ÂâçÁ´ØÁºñËØë„ÄÇÂç≥.javaÊàêÂäüÁºñËØë‰∏∫.classÁöÑËøáÁ®ã„ÄÇ</p>
<h2 id="ÂâçÁ´ØÁºñËØë"><a href="#ÂâçÁ´ØÁºñËØë" class="headerlink" title="ÂâçÁ´ØÁºñËØë"></a>ÂâçÁ´ØÁºñËØë</h2><p>ÂâçÁ´ØÁºñËØëÂô® JavacÔºàÊòØJavaËØ≠Ë®ÄÂÜôÁöÑÔºâ ÔºåÁºñËØëËøáÁ®ãÂ¶Ç‰∏ãÂõæ„ÄÇÂâçÊúüÁºñËØë‰ºòÂåñ‰ª£Á†Å‰∏ªË¶ÅÂàÜ‰∏∫<strong>ÁºñËØëËøáÁ®ã</strong>Âíå<strong>ËØ≠Ê≥ïÁ≥ñ</strong>ÁöÑ‰ºòÂåñ„ÄÇ</p>
<p><img src="/p/c69e3549/JVM-Javac%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B.png" alt="JavacÁöÑÁºñËØëËøáÁ®ã"></p>
<h3 id="Ëß£Êûê‰∏éÂ°´ÂÖÖÁ¨¶Âè∑Ë°®"><a href="#Ëß£Êûê‰∏éÂ°´ÂÖÖÁ¨¶Âè∑Ë°®" class="headerlink" title="Ëß£Êûê‰∏éÂ°´ÂÖÖÁ¨¶Âè∑Ë°®"></a>Ëß£Êûê‰∏éÂ°´ÂÖÖÁ¨¶Âè∑Ë°®</h3><ul>
<li>ËØçÊ≥ïËØ≠Ê≥ïÂàÜÊûêÔºöÊ∫ê‰ª£Á†ÅÁöÑÂ≠óÁ¨¶ÊµÅ ==&gt; Ê†áËÆ∞tokenÈõÜÂêà<ul>
<li>Â¶Ç int a = b + 2;  ‚áí  int , a , = , b , + , 2</li>
</ul>
</li>
<li>Ê†πÊçÆtokenÂ∫èÂàóÊûÑÈÄ†<strong>ÊäΩË±°ËØ≠Ê≥ïÊ†ë</strong></li>
<li>Ê≠§ÂêéÔºåÁºñËØëÂô®Âü∫Êú¨‰∏ä‰∏ç‰ºöÂÜçÊìç‰ΩúÊ∫ê‰ª£Á†ÅÔºåËÄåÊòØÊìç‰ΩúÊäΩË±°ËØ≠Ê≥ïÊ†ë</li>
<li>Â°´ÂÖÖÁ¨¶Âè∑Ë°®ÔºöÁî±‰∏ÄÁªÑÁ¨¶Âè∑Âú∞ÂùÄÂíåÁ¨¶Âè∑‰ø°ÊÅØÊûÑÊàê</li>
</ul>
<h3 id="Ê≥®Ëß£Â§ÑÁêÜ"><a href="#Ê≥®Ëß£Â§ÑÁêÜ" class="headerlink" title="Ê≥®Ëß£Â§ÑÁêÜ"></a>Ê≥®Ëß£Â§ÑÁêÜ</h3><p>JDK1.5ÂêéJavaÂºÄÂßãÊîØÊåÅÊ≥®Ëß£ÔºåJDK1.6‰∏≠Êèê‰æõ‰∫Ü‰∏ÄÁªÑ<strong>Êèí‰ª∂ÂºèÊ≥®Ëß£Â§ÑÁêÜÂô®</strong>ÁöÑÊ†áÂáÜAPIÔºåÂèØ‰ª•Ëá™ÂÆö‰πâÊ≥®Ëß£Â§ÑÁêÜÂô®Êù•Âπ≤È¢ÑÁºñËØëÂô®ÁöÑË°å‰∏∫„ÄÇÂéüÁêÜÊòØÂπ≤È¢ÑÁîüÊàêÁöÑÂ≠óËäÇÁ†ÅÁöÑÊñá‰ª∂„ÄÇ</p>
<p>ÂèØ‰ª•ÊääÊ≥®Ëß£Â§ÑÁêÜÂô®Áúã‰ΩúÊòØÁºñËØëÂô®ÁöÑÊèí‰ª∂ÔºåÂú®ÁºñËØëÊúüÈó¥ÂØπÊ≥®Ëß£ËøõË°åÂ§ÑÁêÜÔºåÂèØ‰ª•ÂØπËØ≠Ê≥ïÊ†ëËøõË°åËØªÂèñ„ÄÅ‰øÆÊîπ„ÄÅÊ∑ªÂä†‰ªªÊÑèÂÖÉÁ¥†Ôºõ‰ΩÜÂ¶ÇÊûúÊúâÊ≥®Ëß£Â§ÑÁêÜÂô®‰øÆÊîπ‰∫ÜËØ≠Ê≥ïÊ†ëÔºàASTÔºâÔºåÁºñËØëÂô®Â∞ÜËøîÂõûËß£ÊûêÂèäÂ°´ÂÖÖÁ¨¶Âè∑Ë°®ÁöÑËøáÁ®ãÔºåÈáçÊñ∞Â§ÑÁêÜÔºåÁõ¥Âà∞Ê≤°ÊúâÊ≥®Ëß£Â§ÑÁêÜÂô®‰øÆÊîπ‰∏∫Ê≠¢ÔºåÊØè‰∏ÄÊ¨°ÈáçÊñ∞Â§ÑÁêÜÂæ™ÁéØÁß∞‰∏∫‰∏Ä‰∏™Round„ÄÇ</p>
<h3 id="ËØ≠Ê≥ïÂàÜÊûê‰∏éÂ≠óËäÇÁ†ÅÁîüÊàê"><a href="#ËØ≠Ê≥ïÂàÜÊûê‰∏éÂ≠óËäÇÁ†ÅÁîüÊàê" class="headerlink" title="ËØ≠Ê≥ïÂàÜÊûê‰∏éÂ≠óËäÇÁ†ÅÁîüÊàê"></a>ËØ≠Ê≥ïÂàÜÊûê‰∏éÂ≠óËäÇÁ†ÅÁîüÊàê</h3><p>ÂØπÁªìÊûÑ‰∏äÊ≠£Á°ÆÁöÑ‰ª£Á†ÅËøõË°åÊ£ÄÊü•ÔºöÁ±ªÂûãÊ£ÄÊü•„ÄÅ‰ª£Á†ÅÈÄªËæëÊ£ÄÊü•„ÄÇ</p>
<p>Ëß£ÊûêËØ≠Ê≥ïÁ≥ñÔºöËØ≠Ê≥ïÁ≥ñÊòØÊåáÂú®ËÆ°ÁÆóÊú∫ËØ≠Ë®Ä‰∏≠Ê∑ªÂä†ÁöÑÊüêÁßçËØ≠Ê≥ïÔºåËøôÁßçËØ≠Ê≥ïÂØπËØ≠Ë®ÄÁöÑÂäüËÉΩÊ≤°ÊúâÂΩ±ÂìçÔºå‰ΩÜÊòØÊõ¥Êñπ‰æøÁ®ãÂ∫èÂëòÁöÑ‰ΩøÁî®„ÄÇJVMÊòØ‰∏çÊîØÊåÅËØ≠Ê≥ïÁ≥ñÁöÑËØ≠Ê≥ïÁöÑÔºåÊâÄ‰ª•ÈúÄË¶ÅÂâçÁ´ØÁºñËØëÂô®Â∞ÜÂÖ∂ËøòÂéü‰∏∫ÁÆÄÂçïÁöÑÂü∫Á°ÄËØ≠Ê≥ïÁªìÊûÑ„ÄÇÂ∏∏ËßÅÁöÑÊúâÂ¶Ç‰∏ãËß£ÊûêÔºà‰ª•‰∏ãËØÅÊòéÂèØÈÄöËøáÂ≠óËäÇÁ†ÅÂèçÁºñËØëËøáÊù•Êü•ÁúãÔºâÔºö</p>
<h4 id="Ê≥õÂûã‰∏éÁ±ªÂûãÊì¶Èô§"><a href="#Ê≥õÂûã‰∏éÁ±ªÂûãÊì¶Èô§" class="headerlink" title="Ê≥õÂûã‰∏éÁ±ªÂûãÊì¶Èô§"></a>Ê≥õÂûã‰∏éÁ±ªÂûãÊì¶Èô§</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); </span><br><span class="line"><span class="comment">//Êì¶Èô§Âêé</span></span><br><span class="line"><span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br></pre></td></tr></tbody></table></figure>

<p>Â¶ÇÊûúÊúâÁ±ª‰∏≠Êúâ‰ª•‰∏ãÊ≥õÂûãÈáçËΩΩÁöÑ‰∏§‰∏™ÊñπÊ≥ïÔºåÁ±ªÂûãÊì¶Èô§ÂêéËøòËÉΩÁºñËØëÈÄöËøáÂêóÔºü</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericType</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(List&lt;String&gt; list)</span>{</span><br><span class="line">        System.out.print(<span class="string">"invoke method(List&lt;String&gt; list)"</span>);</span><br><span class="line">    } </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(List&lt;Integer&gt; list)</span>{</span><br><span class="line">        System.out.print(<span class="string">"invoke method(List&lt;Integer&gt; list)"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÁºñËØë‰∏çÈÄöËøáÔºå‰∏çÂÖÅËÆ∏Ê≥õÂûãÈáçËΩΩ„ÄÇ</p>
<h4 id="Ëá™Âä®ÊãÜË£ÖÁÆ±"><a href="#Ëá™Âä®ÊãÜË£ÖÁÆ±" class="headerlink" title="Ëá™Âä®ÊãÜË£ÖÁÆ±"></a>Ëá™Âä®ÊãÜË£ÖÁÆ±</h4><p>Ë£ÖÁÆ±ÔºöÂü∫Êú¨Á±ªÂûãÂèò‰∏∫ÂåÖË£ÖÁ±ªÂûã„ÄÇ‰æãÂ¶ÇÔºöInteger n = 1;</p>
<p>ÊãÜÁÆ±ÔºöÂåÖË£ÖÁ±ªÂûãÂèò‰∏∫Âü∫Êú¨Á±ªÂûã„ÄÇ‰æãÂ¶ÇÔºöint i = n;</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">// JDK1.7 ÁºñËØëÂêé</span></span><br><span class="line">List&lt;Integer&gt; list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment">// JDK1.8 ÁºñËØëÂêé</span></span><br><span class="line">List&lt;Integer&gt; list = Arrays.asList(<span class="keyword">new</span> <span class="title class_">Integer</span>[] {</span><br><span class="line">    Integer.valueOf(<span class="number">1</span>),Integer.valueOf(<span class="number">2</span>),Integer.valueOf(<span class="number">3</span>)</span><br><span class="line">}); </span><br></pre></td></tr></tbody></table></figure>

<h4 id="ÈÅçÂéÜÂæ™ÁéØËΩ¨Ëø≠‰ª£Âô®"><a href="#ÈÅçÂéÜÂæ™ÁéØËΩ¨Ëø≠‰ª£Âô®" class="headerlink" title="ÈÅçÂéÜÂæ™ÁéØËΩ¨Ëø≠‰ª£Âô®"></a>ÈÅçÂéÜÂæ™ÁéØËΩ¨Ëø≠‰ª£Âô®</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (Integer i : list) {</span><br><span class="line">    sum += i;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// ÁºñËØëÂêé</span></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">Iterator</span> <span class="variable">localIterator</span> <span class="operator">=</span> list.iterator();localIterator.hasNext();){</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> ((Integer) localIterator.next()).intValue();</span><br><span class="line">    sum += i;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="Êù°‰ª∂ÁºñËØëÊì¶Èô§‰∏çÊàêÁ´ãÁöÑÂàÜÊîØ"><a href="#Êù°‰ª∂ÁºñËØëÊì¶Èô§‰∏çÊàêÁ´ãÁöÑÂàÜÊîØ" class="headerlink" title="Êù°‰ª∂ÁºñËØëÊì¶Èô§‰∏çÊàêÁ´ãÁöÑÂàÜÊîØ"></a>Êù°‰ª∂ÁºñËØëÊì¶Èô§‰∏çÊàêÁ´ãÁöÑÂàÜÊîØ</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) {</span><br><span class="line">    System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    System.out.println(<span class="string">"mrdjun"</span>);</span><br><span class="line">}</span><br><span class="line"><span class="comment">// ÁºñËØëÂêé</span></span><br><span class="line">System.out.println(<span class="string">"hello"</span>);</span><br></pre></td></tr></tbody></table></figure>

<h4 id="ÂèØÂèòÈïøÂèÇÊï∞Â∞ÅË£ÖÊàêÊï∞ÁªÑÂèÇÊï∞"><a href="#ÂèØÂèòÈïøÂèÇÊï∞Â∞ÅË£ÖÊàêÊï∞ÁªÑÂèÇÊï∞" class="headerlink" title="ÂèØÂèòÈïøÂèÇÊï∞Â∞ÅË£ÖÊàêÊï∞ÁªÑÂèÇÊï∞"></a>ÂèØÂèòÈïøÂèÇÊï∞Â∞ÅË£ÖÊàêÊï∞ÁªÑÂèÇÊï∞</h4><p>JDK1.5Êñ∞ÁâπÊÄß„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span>... args)</span> {</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i : args) {</span><br><span class="line">        a += i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// ÁºñËØëÂêé</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span>... args)</span> {</span><br><span class="line">    <span class="type">int</span>[] var2 = args;</span><br><span class="line">    <span class="type">int</span> <span class="variable">var3</span> <span class="operator">=</span> args.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">var4</span> <span class="operator">=</span> <span class="number">0</span>; var4 &lt; var3; ++var4) {</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> var2[var4];</span><br><span class="line">        a += i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Â≠óËäÇÁ†ÅÁîüÊàêÔºöÂ≠óËäÇÁ†ÅÊòØIRÁ†ÅÔºåIRÁ†ÅÂ§ßËá¥ÂèØ‰ª•ÁêÜËß£‰∏∫ÈúÄË¶ÅÂÜçËΩ¨‰∏ÄÊ¨°ÊâçËÉΩËÆ©Êú∫Âô®ËØÜÂà´„ÄÇ</p>
<h2 id="Âç≥Êó∂ÁºñËØë"><a href="#Âç≥Êó∂ÁºñËØë" class="headerlink" title="Âç≥Êó∂ÁºñËØë"></a>Âç≥Êó∂ÁºñËØë</h2><p>ËøêË°åÊúüÁºñËØëÂô®ÔºàJITÔºâÁöÑ‰ª£Á†Å‰ºòÂåñÔºåÁÆÄÂçïÊù•ËØ¥Â∞±ÊòØ‰∏ÄÂè•ËØùÔºöÂ∞ÜÁÉ≠ÁÇπ‰ª£Á†ÅÁõ¥Êé•ÁºñËØëÊàêÊú∫Âô®Á†ÅËøõË°åÊâßË°åÂíåÈÄÉÈÄ∏ÂàÜÊûê„ÄÇ</p>
<p>JVM‰∏≠ÈõÜÊàê‰∫Ü‰∏§ÁßçÁºñËØëÂô®ÔºöClient Compiler„ÄÅServer CompilerÔºåÈÄöÂ∏∏Â∞ÜÂâçËÄÖÁß∞‰∏∫C1ÁºñËØëÂô®ÔºåÂêéËÄÖÁß∞‰∏∫C2ÁºñËØëÂô®„ÄÇClient CompilerÊ≥®ÈáçÂêØÂä®ÈÄüÂ∫¶ÂíåÂ±ÄÈÉ®ÁöÑ‰ºòÂåñÔºåServer CompilerÂàôÊõ¥Âä†ÂÖ≥Ê≥®ÂÖ®Â±ÄÁöÑ‰ºòÂåñÔºåÊÄßËÉΩ‰ºöÊõ¥Â•ΩÔºå‰ΩÜÁî±‰∫é‰ºöËøõË°åÊõ¥Â§öÁöÑÂÖ®Â±ÄÂàÜÊûêÔºåÊâÄ‰ª•ÂêØÂä®ÈÄüÂ∫¶‰ºöÂèòÊÖ¢„ÄÇ‰∏§ÁßçÁºñËØëÂô®ÊúâÁùÄ‰∏çÂêåÁöÑÂ∫îÁî®Âú∫ÊôØÔºåÂú®ËôöÊãüÊú∫‰∏≠ÂêåÊó∂ÂèëÊå•‰ΩúÁî®„ÄÇ</p>
<h3 id="‚ÄúÂ∞ÜÁÉ≠ÁÇπ‰ª£Á†ÅÁõ¥Êé•ÁºñËØëÊàêÊú∫Âô®Á†ÅËøõË°åÊâßË°å‚ÄùÊòØ‰ªÄ‰πàÊÑèÊÄùÔºü"><a href="#‚ÄúÂ∞ÜÁÉ≠ÁÇπ‰ª£Á†ÅÁõ¥Êé•ÁºñËØëÊàêÊú∫Âô®Á†ÅËøõË°åÊâßË°å‚ÄùÊòØ‰ªÄ‰πàÊÑèÊÄùÔºü" class="headerlink" title="‚ÄúÂ∞ÜÁÉ≠ÁÇπ‰ª£Á†ÅÁõ¥Êé•ÁºñËØëÊàêÊú∫Âô®Á†ÅËøõË°åÊâßË°å‚ÄùÊòØ‰ªÄ‰πàÊÑèÊÄùÔºü"></a>‚ÄúÂ∞ÜÁÉ≠ÁÇπ‰ª£Á†ÅÁõ¥Êé•ÁºñËØëÊàêÊú∫Âô®Á†ÅËøõË°åÊâßË°å‚ÄùÊòØ‰ªÄ‰πàÊÑèÊÄùÔºü</h3><p>Â∏∏ËßÅÁöÑÁºñËØëÂûãËØ≠Ë®ÄÂ¶ÇC++ÔºåÈÄöÂ∏∏‰ºöÊää‰ª£Á†ÅÁõ¥Êé•ÁºñËØëÊàêCPUÊâÄËÉΩÁêÜËß£ÁöÑÊú∫Âô®Á†ÅÊù•ËøêË°å„ÄÇËÄåJava‰∏∫‰∫ÜÂÆûÁé∞‚Äú‰∏ÄÊ¨°ÁºñËØëÔºåÂ§ÑÂ§ÑËøêË°å‚ÄùÁöÑÁâπÊÄßÔºåÊääÁºñËØëÁöÑËøáÁ®ãÂàÜÊàê‰∏§ÈÉ®ÂàÜÔºåÈ¶ñÂÖàÂÆÉ‰ºöÂÖàÁî±javacÁºñËØëÊàêÈÄöÁî®ÁöÑ‰∏≠Èó¥ÂΩ¢Âºè‚Äî‚ÄîÂ≠óËäÇÁ†ÅÔºàIRÁ†ÅÔºâÔºåÁÑ∂ÂêéÂÜçÁî±Ëß£ÈáäÂô®ÈÄêÊù°Â∞ÜÂ≠óËäÇÁ†ÅËß£Èáä‰∏∫Êú∫Âô®Á†ÅÊù•ÊâßË°å„ÄÇÊâÄ‰ª•Âú®ÊÄßËÉΩ‰∏äÔºåJavaÈÄöÂ∏∏‰∏çÂ¶ÇC++ËøôÁ±ªÁºñËØëÂûãËØ≠Ë®Ä„ÄÇ</p>
<p>‰∏∫‰∫Ü‰ºòÂåñJavaÁöÑÊÄßËÉΩ ÔºåJVMÂú®Ëß£ÈáäÂô®‰πãÂ§ñÂºïÂÖ•‰∫ÜÂç≥Êó∂ÔºàJust In TimeÔºâÁºñËØëÂô®ÔºöÂΩìÁ®ãÂ∫èËøêË°åÊó∂ÔºåËß£ÈáäÂô®È¶ñÂÖàÂèëÊå•‰ΩúÁî®Ôºå‰ª£Á†ÅÂèØ‰ª•Áõ¥Êé•ÊâßË°å„ÄÇÈöèÁùÄÊó∂Èó¥Êé®ÁßªÔºåÂç≥Êó∂ÁºñËØëÂô®ÈÄêÊ∏êÂèëÊå•‰ΩúÁî®ÔºåÊääË∂äÊù•Ë∂äÂ§öÁöÑ‰ª£Á†ÅÁºñËØë‰ºòÂåñÊàêÊú¨Âú∞‰ª£Á†ÅÔºåÊù•Ëé∑ÂèñÊõ¥È´òÁöÑÊâßË°åÊïàÁéá„ÄÇËß£ÈáäÂô®ËøôÊó∂ÂèØ‰ª•‰Ωú‰∏∫ÁºñËØëËøêË°åÁöÑÈôçÁ∫ßÊâãÊÆµÔºåÂú®‰∏Ä‰∫õ‰∏çÂèØÈù†ÁöÑÁºñËØë‰ºòÂåñÂá∫Áé∞ÈóÆÈ¢òÊó∂ÔºåÂÜçÂàáÊç¢ÂõûËß£ÈáäÊâßË°åÔºå‰øùËØÅÁ®ãÂ∫èÂèØ‰ª•Ê≠£Â∏∏ËøêË°å„ÄÇ</p>
<p>Âç≥Êó∂ÁºñËØëÂô®ÔºàJITÔºâÊûÅÂ§ßÂú∞ÊèêÈ´ò‰∫ÜJavaÁ®ãÂ∫èÁöÑËøêË°åÈÄüÂ∫¶ÔºåËÄå‰∏îË∑üÈùôÊÄÅÁºñËØëÁõ∏ÊØîÔºåÂç≥Êó∂ÁºñËØëÂô®ÂèØ‰ª•ÈÄâÊã©ÊÄßÂú∞ÁºñËØëÁÉ≠ÁÇπ‰ª£Á†ÅÔºåÁúÅÂéª‰∫ÜÂæàÂ§öÁºñËØëÊó∂Èó¥Ôºå‰πüËäÇÁúÅÂæàÂ§öÁöÑÁ©∫Èó¥„ÄÇÁõÆÂâçÔºåÂç≥Êó∂ÁºñËØëÂô®Â∑≤ÁªèÈùûÂ∏∏ÊàêÁÜü‰∫ÜÔºåÂú®ÊÄßËÉΩÂ±ÇÈù¢ÁîöËá≥ÂèØ‰ª•ÂíåÁºñËØëÂûãËØ≠Ë®ÄÁõ∏ÊØî„ÄÇ‰∏çËøáÂú®Ëøô‰∏™È¢ÜÂüüÔºåÂ§ßÂÆ∂‰æùÁÑ∂Âú®‰∏çÊñ≠Êé¢Á¥¢Â¶Ç‰ΩïÁªìÂêà‰∏çÂêåÁöÑÁºñËØëÊñπÂºèÔºå‰ΩøÁî®Êõ¥Âä†Êô∫ËÉΩÁöÑÊâãÊÆµÊù•ÊèêÂçáÁ®ãÂ∫èÁöÑËøêË°åÈÄüÂ∫¶„ÄÇ</p>
<h3 id="ÊÄé‰πàÊ†∑Êâç‰ºöË¢´ËÆ§‰∏∫ÊòØÁÉ≠ÁÇπ‰ª£Á†ÅÂë¢Ôºü"><a href="#ÊÄé‰πàÊ†∑Êâç‰ºöË¢´ËÆ§‰∏∫ÊòØÁÉ≠ÁÇπ‰ª£Á†ÅÂë¢Ôºü" class="headerlink" title="ÊÄé‰πàÊ†∑Êâç‰ºöË¢´ËÆ§‰∏∫ÊòØÁÉ≠ÁÇπ‰ª£Á†ÅÂë¢Ôºü"></a>ÊÄé‰πàÊ†∑Êâç‰ºöË¢´ËÆ§‰∏∫ÊòØÁÉ≠ÁÇπ‰ª£Á†ÅÂë¢Ôºü</h3><p>JVM‰∏≠‰ºöËÆæÁΩÆ‰∏Ä‰∏™ÈòàÂÄºÔºåÂΩìÊñπÊ≥ïÊàñËÄÖ‰ª£Á†ÅÂùóÁöÑÂú®‰∏ÄÂÆöÊó∂Èó¥ÂÜÖÁöÑË∞ÉÁî®Ê¨°Êï∞Ë∂ÖËøáËøô‰∏™ÈòàÂÄºÊó∂Â∞±‰ºöË¢´ÁºñËØëÔºåÂ≠òÂÖ•codeCache‰∏≠„ÄÇÂΩì‰∏ãÊ¨°ÊâßË°åÊó∂ÔºåÂÜçÈÅáÂà∞ËøôÊÆµ‰ª£Á†ÅÔºåÂ∞±‰ºö‰ªécodeCache‰∏≠ËØªÂèñÊú∫Âô®Á†ÅÔºåÁõ¥Êé•ÊâßË°åÔºå‰ª•Ê≠§Êù•ÊèêÂçáÁ®ãÂ∫èËøêË°åÁöÑÊÄßËÉΩ„ÄÇÊï¥‰ΩìÁöÑÊâßË°åËøáÁ®ãÂ§ßËá¥Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="/p/c69e3549/JVM-%E7%83%AD%E7%82%B9%E4%BB%A3%E7%A0%81%E7%9A%84%E5%88%A4%E5%AE%9A%E8%BF%87%E7%A8%8B.png" alt="img"></p>
<h3 id="ÈÄÉÈÄ∏ÂàÜÊûê"><a href="#ÈÄÉÈÄ∏ÂàÜÊûê" class="headerlink" title="ÈÄÉÈÄ∏ÂàÜÊûê"></a>ÈÄÉÈÄ∏ÂàÜÊûê</h3><p>ÂÖàËß£Èáä‰∏Ä‰∏ã‰ªÄ‰πàÊòØÈÄÉÈÄ∏ÂàÜÊûê„ÄÇÂÅáÂ¶Ç‰Ω†Ë¶ÅË∑ëÔºåÊàëË¶ÅÂàÜÊûê‰Ω†‰∏∫‰ªÄ‰πàË¶ÅË∑ëÔºåË¶ÅË∑ëÂà∞Âì™ÈáåÂéª„ÄÇËøô‰∏™ÂàÜÊûêÁöÑËøáÁ®ãÂ∞±Âè´ÈÄÉÈÄ∏ÂàÜÊûê„ÄÇ</p>
<p>ÈÄÉÈÄ∏ÂàÜÊûêÁöÑÁõÆÁöÑ‰πüÂæàÊòéÁ°ÆÔºöÂà§Êñ≠ÂØπË±°ÁöÑ‰ΩúÁî®ÂüüÊòØÂê¶Ë∂ÖÂá∫ÂáΩÊï∞‰ΩìÔºåÂç≥Âà§Êñ≠ÊòØÂê¶ÈÄÉÈÄ∏Âá∫ÂáΩÊï∞‰Ωì„ÄÇ</p>
<p><code>-XX:+DoEscapeAnalysis</code> ÂêØÁî®ÈÄÉÈÄ∏ÂàÜÊûêÔºàJDK1.8ÈªòËÆ§ÂºÄÂêØÔºâ„ÄÇ</p>
<h4 id="Ê†à‰∏äÂàÜÈÖç"><a href="#Ê†à‰∏äÂàÜÈÖç" class="headerlink" title="Ê†à‰∏äÂàÜÈÖç"></a>Ê†à‰∏äÂàÜÈÖç</h4><p>ÂØπÈÇ£‰∫õ‰ΩúÁî®‰∫é‰∏ç‰ºöÈÄÉÈÄ∏Âá∫ÊñπÊ≥ïÁöÑÂØπË±°ÔºåÂú®ÂàÜÈÖçÂÜÖÂ≠òÊó∂Ôºå‰∏çÂú®Â∞ÜÂØπË±°ÂàÜÈÖçÂú®Â†ÜÂÜÖÂ≠ò‰∏≠ÔºåËÄåÊòØÂ∞ÜÂØπË±°Â±ûÊÄßÊâìÊï£ÂêéÂàÜÈÖçÂú®Á∫øÁ®ãÁßÅÊúâÊ†àÂÜÖÂ≠ò‰∏äÔºåËøôÊ†∑ÈöèÁùÄÊñπÊ≥ïË∞ÉÁî®ÁªìÊùüÔºåÊ†à‰∏äÂàÜÈÖçÊâìÊï£ÁöÑÂØπË±°‰πüË¢´ÂõûÊî∂ÊéâÔºå‰∏çÂú®Â¢ûÂä† GC È¢ùÂ§ñÂéãÂäõ„ÄÇ</p>
<p>Ê†à‰∏äÂàÜÈÖçÈÄüÂ∫¶Âø´Ôºå‰ΩÜÊ†àÁ©∫Èó¥Â∞èÔºåÂ§ßÂØπË±°Êó†Ê≥ïÂÆûÁé∞Ê†à‰∏äÂàÜÈÖç„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// Ê†à‰∏äÂàÜÈÖçÁ§∫‰æã</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">build</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    u.setAge(<span class="number">25</span>);</span><br><span class="line">    u.setName(<span class="string">"mrdjun"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÈÇ£‰πàÁé∞Âú®Â∞±ÂèØ‰ª•ÂõûÁ≠î‰∏Ä‰∏™ÈóÆÈ¢ò‰∫ÜÔºöÂú®Java‰∏≠ÂàõÂª∫ÁöÑÂØπË±°‰∏ÄÂÆöÂú®Â†Ü‰∏≠ÂêóÔºü</p>
<p>ÂØπË±°ÂàÜÈÖçÊµÅÁ®ãÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="/p/c69e3549/JVM-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%86%E9%85%8D%E6%B5%81%E7%A8%8B.png" alt="img"></p>
<h4 id="Ê†áÈáèÊõøÊç¢"><a href="#Ê†áÈáèÊõøÊç¢" class="headerlink" title="Ê†áÈáèÊõøÊç¢"></a>Ê†áÈáèÊõøÊç¢</h4><p>ÂΩì‰∏Ä‰∏™ÊñπÊ≥ï‰∏≠ÁöÑÂØπË±°Êú™ÂèëÁîüÈÄÉÈÄ∏Êó∂Ôºå‰ºöÂ∞ÜËøô‰∏™ÂØπË±°ÁöÑÂ±ûÊÄßÊãÜÂàÜ‰∏∫Â§ö‰∏™ÂèòÈáè„ÄÇ‰æãÂ¶Ç‰∏ãÈù¢ÊúâËøôÊ†∑‰∏Ä‰∏™ÂØπË±°Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Point</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®ÊñπÊ≥ï‰∏≠‰ΩøÁî®</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">Point</span> <span class="variable">point</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    System.out.println(point.getX() + <span class="string">","</span> + point.getY());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂΩì point ÂØπË±°Âú®ÂêéÈù¢ÁöÑÊâßË°åËøáÁ®ã‰∏≠Êú™Áî®Âà∞Êó∂ÔºåÁªèËøáÁºñËØëÂêéÔºå‰ª£Á†Å‰ºöÂèòÊàê‰∏ãÈù¢Ëøô‰∏™ÁªìÊûÑÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    System.out.println(x + <span class="string">","</span> + y);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÁÆÄÂçïÂú∞ËØ¥ÔºåÂ∞±ÊòØÁî®Ê†áÈáèÊõøÊç¢ËÅöÂêàÈáè„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÂ¶ÇÊûúÂàõÂª∫ÁöÑÂØπË±°Âπ∂Êú™Áî®Âà∞ÂÖ∂‰∏≠ÁöÑÂÖ®ÈÉ®ÂèòÈáèÔºåÂàôÂèØ‰ª•ËäÇÁúÅ‰∏ÄÂÆöÁöÑÂÜÖÂ≠ò„ÄÇÂØπ‰∫é‰ª£Á†ÅÊâßË°åËÄåË®ÄÔºåÊó†ÈúÄÂéªÊâæÂØπË±°ÁöÑÂºïÁî®Ôºå‰πü‰ºöÊõ¥Âø´„ÄÇ</p>
<ul>
<li><p>Ê†áÈáèÊòØÊåá‰∏çÂèØÂàÜÂâ≤ÁöÑÈáèÔºåÂ¶Çjava‰∏≠Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂíåreferenceÁ±ªÂûãÔºåÁõ∏ÂØπÁöÑ‰∏Ä‰∏™Êï∞ÊçÆÂèØ‰ª•ÁªßÁª≠ÂàÜËß£ÔºåÁß∞‰∏∫ËÅöÂêàÈáèÔºõ</p>
</li>
<li><p>Â¶ÇÊûúÊää‰∏Ä‰∏™ÂØπË±°ÊãÜÊï£ÔºåÂ∞ÜÂÖ∂ÊàêÂëòÂèòÈáèÊÅ¢Â§çÂà∞Âü∫Êú¨Á±ªÂûãÊù•ËÆøÈóÆÂ∞±Âè´ÂÅöÊ†áÈáèÊõøÊç¢Ôºõ</p>
</li>
<li><p>Â¶ÇÊûúÈÄÉÈÄ∏ÂàÜÊûêÂèëÁé∞‰∏Ä‰∏™ÂØπË±°‰∏ç‰ºöË¢´Â§ñÈÉ®ËÆøÈóÆÔºåÂπ∂‰∏îËØ•ÂØπË±°ÂèØ‰ª•Ë¢´ÊãÜÊï£ÔºåÈÇ£‰πàÁªèËøá‰ºòÂåñ‰πãÂêéÔºåÂπ∂‰∏çÁõ¥Êé•ÁîüÊàêËØ•ÂØπË±°ÔºåËÄåÊòØÂú®Ê†à‰∏äÂàõÂª∫Ëã•Âπ≤‰∏™ÊàêÂëòÂèòÈáèÔºõ</p>
</li>
</ul>
<p><code>-XX:+EliminateAllocations</code> ÂêØÁî®Ê†áÈáèÊõøÊç¢ÔºàJDK1.8ÈªòËÆ§ÂºÄÂêØÔºâ„ÄÇ</p>
<p><code>-XX:+PrintEliminateAllocations</code> Êü•ÁúãÊ†áÈáèÊõøÊç¢ÁöÑÊÉÖÂÜµ„ÄÇ</p>
<h4 id="ÂêåÊ≠•ÁúÅÁï•"><a href="#ÂêåÊ≠•ÁúÅÁï•" class="headerlink" title="ÂêåÊ≠•ÁúÅÁï•"></a>ÂêåÊ≠•ÁúÅÁï•</h4><p>‰πüÂ∞±ÊòØ‚ÄúÈîÅÊ∂àÈô§‚Äù„ÄÇÂú®ÈÄÉÈÄ∏ÂàÜÊûêËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûú‰∏Ä‰∏™ÂØπË±°Ë¢´ÂèëÁé∞Âè™ËÉΩ‰ªé‰∏Ä‰∏™Á∫øÁ®ãË¢´ËÆøÈóÆÂà∞ÔºåÈÇ£‰πàÂØπ‰∫éËøô‰∏™ÂØπË±°ÁöÑÊìç‰ΩúÊó†ÈúÄËÄÉËôëÂêåÊ≠•„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">f</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">Object</span> <span class="variable">mrjdun</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">synchronized</span>(mrjdun) {</span><br><span class="line">        System.out.println(mrjdun);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰ª£Á†Å‰∏≠ÂØπ<code>mrjdun</code>Ëøô‰∏™ÂØπË±°ËøõË°åÂä†ÈîÅÔºå‰ΩÜÊòØ<code>mrjdun</code>ÂØπË±°ÁöÑÁîüÂëΩÂë®ÊúüÂè™Âú®f()ÊñπÊ≥ï‰∏≠ÔºåÂπ∂‰∏ç‰ºöË¢´ÂÖ∂‰ªñÁ∫øÁ®ãÊâÄËÆøÈóÆÁöÑÊÉÖÂÜµÔºåJITÁºñËØëÈò∂ÊÆµÂ∞±‰ºö‰ºòÂåñÊàê‰ª•‰∏ã‰ª£Á†ÅÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">f</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">Object</span> <span class="variable">mrjdun</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    System.out.println(mrjdun);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÊèêÂâçÁºñËØë"><a href="#ÊèêÂâçÁºñËØë" class="headerlink" title="ÊèêÂâçÁºñËØë"></a>ÊèêÂâçÁºñËØë</h2><p>ÈùôÊÄÅÊèêÂâçÁºñËØëÂô®ÔºàAOTÔºâÔºöÁõ¥Êé•ÊääÁ®ãÂ∫èÁºñËØëÊàê‰∏éÁõÆÊ†áÊú∫Âô®Êåá‰ª§ÈõÜÁõ∏ÂÖ≥ÁöÑ‰∫åËøõÂà∂‰ª£Á†ÅÁöÑËøáÁ®ã„ÄÇ</p>
<p>ÁõÆÂâçÊúâ‰∏§Áßç‰∏ªË¶ÅÁöÑÂÆûÁé∞ÊñπÂºèÔºö</p>
<p>‰∏é‰º†ÁªüC„ÄÅC++ÁºñËØëÂô®Á±ª‰ººÔºåÂú®Á®ãÂ∫èËøêË°å‰πãÂâçÊääÁ®ãÂ∫è‰ª£Á†ÅÁºñËØëÊàêÊú∫Âô®Á†ÅÁöÑÈùôÊÄÅÁøªËØëÂ∑•‰Ωú<br>ÊääÂéüÊú¨Âç≥Êó∂ÁºñËØëÂô®Âú®ËøêË°åÊó∂Ë¶ÅÂÅöÁöÑÁºñËØëÂ∑•‰ΩúÊèêÂâçÂÅöÂ•ΩÂπ∂‰øùÂ≠ò‰∏ãÊù•Ôºå‰∏ãÊ¨°ËøêË°åÂà∞Ëøô‰∫õ‰ª£Á†ÅÔºàË≠¨Â¶ÇÂÖ¨ÂÖ±Â∫ì‰ª£Á†ÅÂú®Ë¢´Âêå‰∏ÄÂè∞Êú∫Âô®ÂÖ∂‰ªñJavaËøõÁ®ã‰ΩøÁî®ÔºâÊó∂Áõ¥Êé•ÊääÂÆÉÂä†ËΩΩËøõÊù•‰ΩøÁî®<br>Á¨¨‰∏ÄÁßçÂÆûÁé∞ÊñπÂºèÂú®Java‰∏≠ÁöÑÂ≠òÂú®‰ª∑ÂÄºÁõ¥ÊåáÂç≥Êó∂ÁºñËØëÁöÑÊúÄÂ§ßÂº±ÁÇπÔºöÂç≥Êó∂ÁºñËØëË¶ÅÂç†Áî®Á®ãÂ∫èËøêË°åÊó∂Èó¥ÂíåËøêÁÆóËµÑÊ∫ê„ÄÇ‰æãÂ¶ÇÊúÄËÄóÊó∂ÁöÑ‰ºòÂåñÊé™ÊñΩ‰πã‰∏ÄÔºöËøáÁ®ãËßÅÂàÜÊûêÔºåÂøÖÈ°ªÂú®ÂÖ®Á®ãÂ∫èËåÉÂõ¥ÂÜÖÂÅöÂ§ßÈáèËÄóÊó∂ÁöÑËÆ°ÁÆóÂ∑•‰ΩúÔºåÂ¶ÇÊûúÊòØÂú®Á®ãÂ∫èËøêË°å‰πãÂâçËøõË°åÁöÑÈùôÊÄÅÁºñËØëÔºåËøô‰∫õËÄóÊó∂Êìç‰ΩúÂ∞±ÂèØ‰ª•Â§ßËÉÜÁöÑËøõË°å„ÄÇ</p>
<p>ÂØπ‰∫éÁ¨¨‰∫åÁßçÊñπÂºèÔºåÊú¨Ë¥®‰∏äÊòØÁªôÂç≥Êó∂ÁºñËØëÂô®ÂÅöÁºìÂ≠òÂä†ÈÄüÔºåÂéªÊîπÂñÑJavaÁ®ãÂ∫èÁöÑÂêØÂä®Êó∂Èó¥Ôºå‰ª•ÂèäÈúÄË¶Å‰∏ÄÊÆµÊó∂Èó¥È¢ÑÁÉ≠‰πãÂêéÊâçËÉΩËææÂà∞ÊúÄÈ´òÊÄßËÉΩÁöÑÈóÆÈ¢ò„ÄÇËøôÁßçÊèêÂâçÁºñËØëË¢´Áß∞‰∏∫Âä®ÊÄÅÊèêÂâçÁºñËØëÊàñËÄÖÁõ¥Êé•Âè´Âç≥Êó∂ÁºñËØëÁºìÂ≠ò„ÄÇHotSpotËøêË°åÊó∂ÂèØ‰ª•Áõ¥Êé•Âä†ËΩΩËøô‰∫õÁºñËØëÁªìÊûúÔºåÂÆûÁé∞Âø´ÈÄüÁ®ãÂ∫èÂêØÂä®ÈÄüÂ∫¶ÔºåÂáèÂ∞ëÁ®ãÂ∫èËææÂà∞ÂÖ®ÈÄüËøêË°åÁä∂ÊÄÅÊâÄÈúÄË¶ÅÁöÑÊó∂Èó¥„ÄÇ</p>
<p>‰ΩÜÊòØÂç≥Êó∂ÁºñËØëÁõ∏ÊØî‰∫éÊèêÂâçÁºñËØë‰πüÊúâÂæàÂ§ö‰ºòÁÇπÔºö</p>
<p>ÊÄßËÉΩÂàÜÊûêÂà∂ÂØº‰ºòÂåñ„ÄÇËß£ÈáäÂô®ÂíåÂÆ¢Êà∑Á´ØÁºñËØëÂô®Âú®ËøêË°åÊúüÈó¥‰ºö‰∏çÊñ≠Êî∂ÈõÜÊÄßËÉΩÁõëÊéß‰ø°ÊÅØÔºåËøô‰∫õ‰ø°ÊÅØ‰∏ÄËà¨Êó†Ê≥ïÂú®ÈùôÊÄÅÂàÜÊûêÊòØËé∑ÂæóÔºåÊàñËÄÖ‰∏ç‰∏ÄÂÆöÂ≠òÂú®ÂîØ‰∏ÄÁöÑËß£Ôºå‰ΩÜÂú®Âä®ÊÄÅËøêË°åÊó∂ÂæàÂÆπÊòìÂæóÂà∞<br>Âü∫ÈáëÈ¢ÑÊµãÊÄß‰ºòÂåñ„ÄÇÈùôÊÄÅ‰ºòÂåñÊó†ËÆ∫‰ΩïÊó∂ÈÉΩÂøÖÈ°ª‰øùËØÅ‰ºòÂåñÂêéÁöÑÊâÄÊúâÁ®ãÂ∫èÂ§ñÈÉ®ÂèØËßÅÂΩ±ÂìçÔºà‰∏ç‰ªÖ‰ªÖÊòØÊâßË°åÁªìÊûúÔºâ‰∏é‰ºòÂåñÂâçÂøÖÈ°ªÊòØ‰∏ÄËá¥ÁöÑ„ÄÇÂç≥Êó∂ÁºñËØëÁöÑÁ≠ñÁï•Â∞±ÂèØ‰ª•‰∏çÂøÖÈÇ£‰πà‰øùÂÆàÔºåÂ¶ÇÊûúÊÄßËÉΩÁõëÊéß‰ø°ÊÅØËÉΩÂ§üÊîØÊåÅÂÆÉÂÅöÂá∫‰∏Ä‰∫õÊ≠£Á°ÆÁöÑÂèØËÉΩÂæàÂ§ß‰ΩÜÊòØÊó†Ê≥ï‰øùËØÅÁªùÂØπÊ≠£Á°ÆÁöÑÈ¢ÑÊµãÂà§Êñ≠ÔºåÂ∞±ÂèØ‰ª•ËøõË°åÂ§ßËÉÜÁöÑ‰ºòÂåñÔºåÂ§ß‰∏ç‰∫ÜÈÄÄÂõûÂà∞‰ΩéÁ∫ßiÊåâ‰∏ÄËµ∑ÁîöËá≥Ëß£ÈáäÂô®‰∏äËøêË°å„ÄÇËÄåËøôÊ†∑ÁöÑ‰ºòÂåñÂæÄÂæÄËÉΩÂ§üÂ§ßÂπÖÂ∫¶Èôç‰ΩéÁõÆÊ†áÁ®ãÂ∫èÁöÑÂ§çÊùÇÂ∫¶ÔºåËæìÂá∫ËøêË°åÈÄüÂ∫¶ÈùûÂ∏∏È´òÁöÑ‰ª£Á†Å<br>ÈìæÊé•Êó∂‰ºòÂåñ„ÄÇÁî±‰∫éJavaÂ§©ÁîüÊòØÂä®ÊÄÅËøûÊé•ÁöÑÔºåÊâÄ‰ª•ÊèêÂâçÁºñËØëÊó†Ê≥ïÂÅöÂà∞ÈìæÊé•ÂêéÁöÑ‰ºòÂåñ„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÂèå‰∫≤ÂßîÊ¥æÊ®°Âûã</title>
    <url>/p/2a88658c.html</url>
    <content><![CDATA[<html><head></head><body><p>JavaËôöÊãüÊú∫ÂØπclassÊñá‰ª∂ÈááÁî®ÁöÑÊòØ<strong>ÊåâÈúÄÂä†ËΩΩ</strong>ÁöÑÊñπÂºèÔºå‰πüÂ∞±ÊòØËØ¥ÂΩìÈúÄË¶Å‰ΩøÁî®ËØ•Á±ªÊó∂Êâç‰ºöÂ∞ÜÂÆÉÁöÑclassÊñá‰ª∂Âä†ËΩΩÂà∞ÂÜÖÂ≠òÁîüÊàêclassÂØπË±°„ÄÇËÄå‰∏îÂä†ËΩΩÊüê‰∏™Á±ªÁöÑclassÊñá‰ª∂Êó∂ÔºåJavaËôöÊãüÊú∫ÈááÁî®ÁöÑÊòØ<strong>Âèå‰∫≤ÂßîÊ¥æÊ®°Âºè</strong>ÔºåÂç≥ÊääËØ∑Ê±Ç‰∫§Áî±Áà∂Á±ªÂ§ÑÁêÜÔºåÂÆÉÊòØ‰∏ÄÁßç‰ªªÂä°ÂßîÊ¥æÊ®°Âºè„ÄÇ</p>
<blockquote>
<p>TipsÔºöÂ¶ÇÊûúÂú®Â∑•Á®ãÁõÆÂΩïÁöÑsrc‰∏ãÊñ∞Âª∫‰∏Ä‰∏™Âêç‰∏∫ java.lang ÁöÑÂåÖÔºåÂú®ÂÖ∂‰∏≠Êñ∞Âª∫‰∏Ä‰∏™Á±ªÂêçStringÁöÑÁ±ªÔºåËøô‰∏™Á±ªËÉΩÂ§üÊ≠£Â∏∏ËøêË°åÂêóÔºü</p>
</blockquote>
<p>Á®ãÂ∫è‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> java.lang;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">String</span> {</span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        System.out.println(<span class="string">"ËÉΩÂ§üÂàùÂßãÂåñÊàëÂêóÔºü"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        java.lang.<span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">java</span>.lang.String();</span><br><span class="line">        System.out.println(<span class="string">"hello,world"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûúÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">hello,world</span><br></pre></td></tr></tbody></table></figure>

<p>ËØ¥ÊòéÂπ∂Êú™ÂàùÂßãÂåñÂú®java.langÂåÖ‰∏ãËá™ÂÆö‰πâÁöÑStringÁ±ª„ÄÇËøôÊòØÂèå‰∫≤ÂßîÊ¥æÊú∫Âà∂‰øùÊä§‰∫ÜÊàë‰ª¨Á≥ªÁªüÊ†∏ÂøÉAPI‰∏çÂÆπÊòìË¢´Á†¥Âùè„ÄÇ</p>
<h2 id="ÂéüÁêÜ"><a href="#ÂéüÁêÜ" class="headerlink" title="ÂéüÁêÜ"></a>ÂéüÁêÜ</h2><p>1„ÄÅÂ¶ÇÊûú‰∏Ä‰∏™Á±ªÂä†ËΩΩÂô®Êî∂Âà∞‰∫ÜÁ±ªÂä†ËΩΩËØ∑Ê±ÇÔºåÂÆÉÂπ∂‰∏ç‰ºöËá™Â∑±ÂÖàÂéªÂä†ËΩΩÔºåËÄåÊòØÊääËøô‰∏™ËØ∑Ê±ÇÂßîÊâòÁªôÁà∂Á±ªÁöÑÂä†ËΩΩÂô®ÂéªÊâßË°å„ÄÇ</p>
<p>2„ÄÅÂ¶ÇÊûúÁà∂Á±ªÂä†ËΩΩÂô®ËøòÂ≠òÂú®ÂÖ∂Áà∂Á±ªÂä†ËΩΩÂô®ÔºåÂàôËøõ‰∏ÄÊ≠•Âêë‰∏äÂßîÊâòÔºå‰æùÊ¨°ÈÄíÂΩíËØ∑Ê±ÇÊúÄÁªàÂ∞ÜÂà∞ËææÈ°∂Â±ÇÁöÑÂêØÂä®Á±ªÂä†ËΩΩÂô®„ÄÇ</p>
<p>3„ÄÅÂ¶ÇÊûúÁà∂Á±ªÂä†ËΩΩÂô®ÂèØ‰ª•ÂÆåÊàêÁ±ªÂä†ËΩΩ‰ªªÂä°ÔºåÂ∞±ÊàêÂäüËøîÂõûÔºåÂÄòËã•Áà∂Á±ªÂä†ËΩΩÂô®Êó†Ê≥ïÂÆåÊàêÊ≠§Âä†ËΩΩ‰ªªÂä°ÔºåÂ≠êÂä†ËΩΩÂô®Êâç‰ºöÂ∞ùËØïËá™Â∑±ÂéªÂä†ËΩΩÔºåËøôÂ∞±ÊòØÂèå‰∫≤ÂßîÊ¥æÊ®°Âºè„ÄÇ</p>
<p><img src="/p/2a88658c/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.png" alt="image-20210830234508802"></p>
<p>Âú® java.lang ÂåÖ‰∏ãÁöÑ ClassLoader Á±ª‰∏≠ÁöÑ loadClass ÊñπÊ≥ïÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Class&lt;?&gt; loadClass(String name) <span class="keyword">throws</span> ClassNotFoundException {</span><br><span class="line">    <span class="keyword">return</span> loadClass(name, <span class="literal">false</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="type">boolean</span> resolve)</span><br><span class="line">    <span class="keyword">throws</span> ClassNotFoundException {</span><br><span class="line">    <span class="comment">// È¶ñÂÖàÔºåÊ£ÄÊü•ÊòØÂê¶Â∑≤ÁªèË¢´Á±ªÂä†ËΩΩÂô®Âä†ËΩΩËøá</span></span><br><span class="line">    Class&lt;?&gt; c = findLoadedClass(name);</span><br><span class="line">    <span class="keyword">if</span> (c == <span class="literal">null</span>) {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// Â≠òÂú®Áà∂Âä†ËΩΩÂô®ÔºåÈÄíÂΩíÁöÑ‰∫§Áî±Áà∂Âä†ËΩΩÂô®</span></span><br><span class="line">            <span class="keyword">if</span> (parent != <span class="literal">null</span>) {</span><br><span class="line">                c = parent.loadClass(name, <span class="literal">false</span>);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="comment">// Áõ¥Âà∞ÊúÄ‰∏äÈù¢ÁöÑBootstrapÁ±ªÂä†ËΩΩÂô®</span></span><br><span class="line">                c = findBootstrapClassOrNull(name);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException e) {</span><br><span class="line">            <span class="comment">// ClassNotFoundException thrown if class not found</span></span><br><span class="line">            <span class="comment">// from the non-null parent class loader</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (c == <span class="literal">null</span>) {</span><br><span class="line">            <span class="comment">// If still not found, then invoke findClass in order</span></span><br><span class="line">            <span class="comment">// to find the class.</span></span><br><span class="line">            c = findClass(name);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÖ∂ÂÆûËøôÊÆµ‰ª£Á†ÅÂ∑≤ÁªèÂæàÂ•ΩÁöÑËß£Èáä‰∫ÜÂèå‰∫≤ÂßîÊ¥æÊú∫Âà∂ÔºåÂú®ÁªìÂêà‰∏ãÂõæÂä†Ê∑±ÁêÜËß£</p>
<p><img src="/p/2a88658c/JVM-ClassLoader-Step.png" alt="JVM-ClassLoader-Step"></p>
<h2 id="‰∏∫‰ªÄ‰πàË¶ÅËÆæËÆ°ËøôÁßçÊú∫Âà∂"><a href="#‰∏∫‰ªÄ‰πàË¶ÅËÆæËÆ°ËøôÁßçÊú∫Âà∂" class="headerlink" title="‰∏∫‰ªÄ‰πàË¶ÅËÆæËÆ°ËøôÁßçÊú∫Âà∂"></a>‰∏∫‰ªÄ‰πàË¶ÅËÆæËÆ°ËøôÁßçÊú∫Âà∂</h2><p>1„ÄÅ‰øùÊä§Á®ãÂ∫èÂÆâÂÖ®ÔºåÈò≤Ê≠¢Ê†∏ÂøÉAPIË¢´ÈöèÊÑèÁØ°Êîπ„ÄÇÂú®java.langÂåÖ‰∏ãÔºåÂºÄÂèëËÄÖËá™ÂÆö‰πâÁöÑÁ±ª‰∏≠ÁöÑmainÊñπÊ≥ï‰∏çÂÖÅËÆ∏ÊâßË°åÔºåÈò≤Ê≠¢ÊÅ∂ÊÑè‰ª£Á†ÅÂØπÁ®ãÂ∫è‰∫ßÁîüÁ†¥Âùè„ÄÇ</p>
<p>2„ÄÅÈÅøÂÖçÁ±ªÁöÑÈáçÂ§çÂä†ËΩΩ„ÄÇ‰∏Ä‰∏™Á±ªÂè™‰ºöË¢´Âä†ËΩΩ‰∏ÄÊ¨°„ÄÇ</p>
<h2 id="Ê≤ôÁÆ±ÂÆâÂÖ®Êú∫Âà∂"><a href="#Ê≤ôÁÆ±ÂÆâÂÖ®Êú∫Âà∂" class="headerlink" title="Ê≤ôÁÆ±ÂÆâÂÖ®Êú∫Âà∂"></a>Ê≤ôÁÆ±ÂÆâÂÖ®Êú∫Âà∂</h2><p>Ëá™ÂÆö‰πâstringÁ±ªÔºå‰ΩÜÊòØÂú®Âä†ËΩΩËá™ÂÆö‰πâStringÁ±ªÁöÑÊó∂ÂÄô‰ºöÁéáÂÖà‰ΩøÁî®ÂºïÂØºÁ±ªÂä†ËΩΩÂô®Âä†ËΩΩÔºåËÄåÂºïÂØºÁ±ªÂä†ËΩΩÂô®Âú®Âä†ËΩΩÁöÑËøáÁ®ã‰∏≠‰ºöÂÖàÂä†ËΩΩjdkËá™Â∏¶ÁöÑÊñá‰ª∂(rt. jarÂåÖ‰∏≠java\lang\String.class)ÔºåÊä•Èîô‰ø°ÊÅØËØ¥Ê≤°ÊúâmainÊñπÊ≥ïÔºåÂ∞±ÊòØÂõ†‰∏∫Âä†ËΩΩÁöÑÊòØrt. jarÂåÖ‰∏≠ÁöÑStringÁ±ª„ÄÇËøôÊ†∑ÂèØ‰ª•‰øùËØÅÂØπjavaÊ†∏ÂøÉÊ∫ê‰ª£Á†ÅÁöÑ‰øùÊä§ÔºåËøôÂ∞±ÊòØ<strong>Ê≤ôÁÆ±ÂÆâÂÖ®Êú∫Âà∂</strong>„ÄÇ</p>
<h2 id="Ë°•ÂÖÖÂÜÖÂÆπ"><a href="#Ë°•ÂÖÖÂÜÖÂÆπ" class="headerlink" title="Ë°•ÂÖÖÂÜÖÂÆπ"></a>Ë°•ÂÖÖÂÜÖÂÆπ</h2><blockquote>
<p>Âú®JVM‰∏≠Ë°®Á§∫‰∏§‰∏™classÂØπË±°ÊòØÂê¶ÊòØÂêå‰∏Ä‰∏™Á±ªÁöÑ‰∏§‰∏™ÂøÖË¶ÅÊù°‰ª∂</p>
</blockquote>
<p>1„ÄÅÁ±ªÁöÑÂÆåÊï¥Ë∑ØÂæÑ‰∏ÄÁõ¥ÔºàÂåÖÂêç+Á±ªÂêçÔºâ„ÄÇ</p>
<p>2„ÄÅÂä†ËΩΩËøô‰∏™Á±ªÁöÑClassLoaderÂøÖÈ°ªÁõ∏Âêå„ÄÇ</p>
<p>Êç¢Âè•ËØùËØ¥ÔºåÂú®JVM‰∏≠Ôºå Âç≥‰ΩøËøô‰∏§‰∏™Á±ªÂØπË±°(classÂØπË±°)Êù•Ê∫êÂêå‰∏Ä‰∏™ClassÊñá‰ª∂ÔºåË¢´Âêå‰∏Ä‰∏™ËôöÊãüÊú∫ÊâÄÂä†ËΩΩÔºå‰ΩÜÂè™Ë¶ÅÂä†ËΩΩÂÆÉ‰ª¨ÁöÑClassLoaderÂÆû‰æãÂØπË±°‰∏çÂêåÔºåÈÇ£‰πàËøô‰∏§‰∏™Á±ªÂØπË±°‰πüÊòØ‰∏çÁõ∏Á≠âÁöÑ„ÄÇ</p>
<blockquote>
<p>ÂØπÁ±ªÂä†ËΩΩÂô®ÁöÑÂºïÁî®</p>
</blockquote>
<p>JVMÂøÖÈ°ªÁü•ÈÅì‚Äì‰∏™Á±ªÂûãÊòØÁî±ÂêØÂä®Âä†ËΩΩÂô®Âä†ËΩΩÁöÑËøòÊòØÁî±Áî®Êà∑Á±ªÂä†ËΩΩ<br>Âô®Âä†ËΩΩÁöÑ„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Á±ªÂûãÊòØÁî±Áî®Êà∑Á±ªÂä†ËΩΩÂô®Âä†ËΩΩÁöÑÔºåÈÇ£‰πàJVM‰ºöÂ∞ÜËøô‰∏™Á±ªÂä†ËΩΩÂô®ÁöÑ‰∏Ä‰∏™ÂºïÁî®‰Ωú‰∏∫Á±ªÂûã‰ø°ÊÅØÁöÑ‰∏ÄÈÉ®ÂàÜ‰øùÂ≠òÂú®ÊñπÊ≥ïÂå∫‰∏≠„ÄÇÂΩìËß£Êûê‰∏Ä‰∏™Á±ªÂûãÂà∞Âè¶‰∏Ä‰∏™Á±ªÂûãÁöÑÂºïÁî®ÁöÑÊó∂ÂÄôÔºåJVMÈúÄË¶Å‰øùËØÅËøô‰∏§‰∏™Á±ªÂûãÁöÑÁ±ªÂä†ËΩΩÂô®ÊòØÁõ∏ÂêåÁöÑ„ÄÇ</p>
<blockquote>
<p>JavaÁ®ãÂ∫èÂØπÁ±ªÁöÑ‰ΩøÁî®ÊñπÂºèÂàÜ‰∏∫Ôºö‰∏ªÂä®‰ΩøÁî®„ÄÅË¢´Âä®‰ΩøÁî®‰∏§ÁßçÊñπÂºè</p>
</blockquote>
<p> ‰∏ªÂä®‰ΩøÁî®ÔºåÂèàÂàÜ‰∏∫‰∏ÉÁßçÊÉÖÂÜµ:</p>
<p>1„ÄÅÂàõÂª∫Á±ªÁöÑÂÆû‰æã</p>
<p>2„ÄÅËÆøÈóÆÊüê‰∏™Á±ªÊàñËÄÖÊé•Âè£ÁöÑÈùôÊÄÅÂèòÈáè,ÊàñËÄÖÂØπËØ•ÈùôÊÄÅÂèòÈáèËµãÂÄº</p>
<p>3„ÄÅÂèçÂ∞Ñ( ÊØîÂ¶Ç:Class.forName(‚Äújava.lang.String)))</p>
<p>4„ÄÅÂàùÂßãÂåñ‰∏Ä‰∏™Á±ªÁöÑÂ≠êÁ±ª</p>
<p>5„ÄÅjavaËôöÊãüÊú∫ÂêØÂä®Êó∂Ë¢´Ê†áÊòé‰∏∫ÂêØÂä®Á±ªÁöÑÁ±ª</p>
<p>6„ÄÅjava 7ÂºÄÂßãÊèê‰æõÁöÑÂä®ÊÄÅËØ≠Ë®ÄÊîØÊåÅ</p>
<p>Èô§‰∫Ü‰ª•‰∏ä‰∏ÉÁßçÊÉÖÂÜµ,ÂÖ∂‰ªñ‰ΩøÁî®JavaÁ±ªÁöÑÊñπÂºèÈÉΩË¢´Áúã‰ΩúÊòØÂØπÁ±ªÁöÑË¢´Âä®‰ΩøÁî®ÈÉΩ‰∏ç‰ºöÂØºËá¥Á±ªÁöÑÂàùÂßãÂåñ„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÁ®ãÂ∫èËÆ°Êï∞Âô®</title>
    <url>/p/1e963439.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="ËøêË°åÊó∂Êï∞ÊçÆÂå∫"><a href="#ËøêË°åÊó∂Êï∞ÊçÆÂå∫" class="headerlink" title="ËøêË°åÊó∂Êï∞ÊçÆÂå∫"></a>ËøêË°åÊó∂Êï∞ÊçÆÂå∫</h2><p><img src="/p/1e963439/JVM-%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA.png" alt="image-20210906231826602"></p>
<p>JavaËôöÊãüÊú∫ÂÆö‰πâ‰∫Ü‰∏ÄÁ≥ªÂàóÈÄªËæëÊï∞ÊçÆÂå∫ÂüüÔºåÊúâ‰∫õÊòØÈöèÁùÄËôöÊãüÊú∫ÁöÑÂêØÂä®ËÄåÂàõÂª∫ÔºåËôöÊãüÊú∫ÁöÑÂÖ≥Èó≠ËÄåÈîÄÊØÅ„ÄÇËøòÊúâ‰∏ÄÈÉ®ÂàÜÊòØÈöèÁùÄÁ∫øÁ®ãÁîüÂëΩÂë®ÊúüÂàõÂª∫ÈîÄÊØÅÁöÑ„ÄÇ</p>
<p>Êàë‰ª¨ÊúâÂøÖË¶ÅÊ∑±ÂÖ•‰∫ÜËß£ËøôÂùóÁöÑÂÜÖÂÆπÔºåÂõ†‰∏∫ÂÆÉÂ∞ÜÂÜ≥ÂÆöÊúçÂä°Âô®ÊÄßËÉΩÔºåÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÂØπÊï¥‰∏™ËøêË°åÊó∂Âå∫ÂüüÁî±Êï¥‰ΩìÁöÑËÆ§ËØÜÂπ∂‰∏î‰∫ÜËß£‰∫ÜÊØè‰∏™Âå∫ÂüüÁöÑÁîüÂëΩÂë®Êúü‰ª•Âèä‰ΩúÁî®‰πãÂêéÊâçËÉΩÈÄöËøáÁõ∏Â∫îÁöÑË∞ÉÂèÇÊù•ÊèêÂçáÁ≥ªÁªüÊÄßËÉΩ„ÄÇÈô§Ê≠§‰πãÂ§ñËøòÊúâÂä©‰∫éÂø´ÈÄüÂÆö‰ΩçËôöÊãüÊú∫ÁöÑÁõ∏ÂÖ≥Error.</p>
<h2 id="Á®ãÂ∫èËÆ°Êï∞Âô®ÔºàPCÂØÑÂ≠òÂô®Ôºâ"><a href="#Á®ãÂ∫èËÆ°Êï∞Âô®ÔºàPCÂØÑÂ≠òÂô®Ôºâ" class="headerlink" title="Á®ãÂ∫èËÆ°Êï∞Âô®ÔºàPCÂØÑÂ≠òÂô®Ôºâ"></a>Á®ãÂ∫èËÆ°Êï∞Âô®ÔºàPCÂØÑÂ≠òÂô®Ôºâ</h2><p><img src="/p/1e963439/JVM-PC%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="image-20210907233021888"></p>
<p>JVM‰∏≠ÁöÑÁ®ãÂ∫èËÆ°Êï∞ÂØÑÂ≠òÂô®(Program Counter Register) ‰∏≠ÔºåRegister ÁöÑÂëΩÂêçÊ∫ê‰∫éCPUÁöÑÂØÑÂ≠òÂô®ÔºåÂØÑÂ≠òÂô®Â≠òÂÇ®Êåá‰ª§Áõ∏ÂÖ≥ÁöÑÁé∞Âú∫‰ø°ÊÅØ„ÄÇCPUÂè™ ÊúâÊääÊï∞ÊçÆË£ÖËΩΩÂà∞ÂØÑÂ≠òÂô®ÊâçËÉΩÂ§üËøêË°å„ÄÇ</p>
<p>ËøôÈáåÔºåÂπ∂ÈùûÊòØÂπø‰πâ‰∏äÊâÄÊåáÁöÑÁâ©ÁêÜÂØÑÂ≠òÂô®ÔºåÊàñËÆ∏Â∞ÜÂÖ∂ÁøªËØë‰∏∫PCËÆ°Êï∞Âô®(ÊàñÊåá‰ª§ËÆ°Êï∞Âô®)‰ºöÊõ¥Âä†Ë¥¥Âàá(‰πüÁß∞‰∏∫Á®ãÂ∫èÈí©Â≠ê)ÔºåÂπ∂‰∏î‰πü‰∏çÂÆπÊòìÂºïËµ∑- -‰∫õ‰∏çÂøÖË¶ÅÁöÑËØØ‰ºö„ÄÇJVM‰∏≠ÁöÑPCÂØÑÂ≠òÂô®ÊòØÂØπÁâ©ÁêÜPCÂØÑÂ≠òÂô®ÁöÑ‰∏Ä-ÁßçÊäΩË±°Ê®°Êãü„ÄÇ</p>
<ul>
<li>Á®ãÂ∫èËÆ°Êï∞Âô®ÊòØ‰∏ÄÂùóÂæàÂ∞èÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂá†‰πéÂèØ‰ª•ÂøΩÁï•‰∏çËÆ°Ôºå‰πüÊòØÈÄüÂ∫¶ÊúÄÂø´ÁöÑÂ≠òÂÇ®Âå∫Âüü</li>
<li>Âú®JVMËßÑËåÉ‰∏≠ÔºåÊØè‰∏™Á∫øÁ®ãÈÉΩÊúâ‰ªñËá™Â∑±ÁöÑÁ®ãÂ∫èËÆ°Êï∞Âô®ÔºåÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑÔºåÁîüÂëΩÂë®Êúü‰∏éÁ∫øÁ®ãÁöÑÁîüÂëΩÂë®Êúü‰øùÊåÅ‰∏ÄËá¥</li>
<li>‰ªª‰ΩïÊó∂ÂÄô‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÂè™Êúâ‰∏Ä‰∏™ÊñπÊ≥ïÂú®ÊâßË°åÔºå‰πüÂ∞±ÊòØÊâÄË∞ìÁöÑÂΩìÂâçÊñπÊ≥ï„ÄÇÁ®ãÂ∫èËÆ°Êï∞Âô®‰ºöÂ≠òÂÇ®ÂΩìÂâçÁ∫øÁ®ãÊ≠£Âú®ÊâßË°åÁöÑJavaÊñπÊ≥ïÁöÑJVMÊåá‰ª§ÁöÑÂú∞ÂùÄÔºõÊàñËÄÖÂ¶ÇÊûúÂú®ÊâßË°åÁöÑÊòØnativeÊñπÊ≥ïÔºåÂàôÊòØÊú™ÊåáÂÆöÂÄºÔºàundefindÔºâ</li>
<li>‰ªñÊòØÁ®ãÂ∫èÊéßÂà∂ÊµÅÁöÑÊåáÁ§∫Âô®ÔºåÂàÜÊîØÔºåÂæ™ÁéØÔºåË∑≥ËΩ¨ÔºåÂºÇÂ∏∏Â§ÑÁêÜÔºåÁ∫øÁ®ãÊÅ¢Â§çÁ≠âÂü∫Á°ÄÂäüËÉΩÈÉΩÊòØÈúÄË¶Å‰æùËµñËøô‰∏™ËÆ°Êï∞Âô®Êù•ÂÆåÊàê„ÄÇ</li>
<li>Â≠óËäÇÁ†ÅËß£ÈáäÂô®Â∑•‰ΩúÊó∂Â∞±ÊòØÈÄöËøáÊîπÂèòËøô‰∏™ËÆ°Êï∞Âô®ÁöÑÂÄºÊù•ÈÄâÂèñ‰∏ã‰∏ÄÊù°ÈúÄË¶ÅÊâßË°åÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§</li>
<li>ÂîØ‰∏Ä‰∏Ä‰∏™Âú®JavaËôöÊãüÊú∫ËßÑËåÉ‰∏≠Ê≤°ÊúâËßÑÂÆö‰ªª‰ΩïOutMemoryErrorÊÉÖÂÜµÁöÑÂå∫Âüü</li>
</ul>
<blockquote>
<p>‰ΩøÁî®PCÂØÑÂ≠òÂô®Â≠òÂÇ®Â≠óËäÇÁ†ÅÊåá‰ª§Âú∞ÂùÄÊúâ‰ªÄ‰πàÁî®Ôºü</p>
</blockquote>
<p>Âõ†‰∏∫CPUÈúÄË¶Å‰∏çÂÅúÁöÑÂàáÊç¢ÂêÑ‰∏™Á∫øÁ®ãÔºåËøôÊó∂ÂÄôÂàáÊç¢ÂõûÊù•‰ª•ÂêéÔºåÂ∞±ÂæóÁü•ÈÅìÊé•ÁùÄ‰ªéÂì™ÈáåÂºÄÂßãÁªßÁª≠ÊâßË°å</p>
<blockquote>
<p>‰∏∫‰ªÄ‰πà‰ΩøÁî®PCÂØÑÂ≠òÂô®ËÆ∞ÂΩïÂΩìÂâçÁ∫øÁ®ãÁöÑÊâßË°åÂú∞ÂùÄÔºü</p>
</blockquote>
<p>JVMÁöÑÂ≠óËäÇÁ†ÅËß£ÈáäÂô®Â∞±ÈúÄË¶ÅÈÄöËøáÊîπÂèòPCÂØÑÂ≠òÂô®ÁöÑÂÄºÊù•ÊòéÁ°Æ‰∏ã‰∏ÄÊù°Â∫îËØ•ÊâßË°å‰ªÄ‰πàÊ†∑ÁöÑÂ≠óËäÇÁ†Å„ÄÇ</p>
<blockquote>
<p>PCÂØÑÂ≠òÂô®‰∏∫‰ªÄ‰πà‰ºöË¢´ËÆæÂÆö‰∏∫Á∫øÁ®ãÁßÅÊúâÁöÑÔºü</p>
</blockquote>
<p>‰∏∫‰∫ÜËÉΩÂ§üÂáÜÁ°ÆÂú∞ËÆ∞ÂΩïÂêÑ‰∏™Á∫øÁ®ãÊ≠£Âú®ÊâßË°åÁöÑÂΩìÂâçÂ≠óËäÇÁ†ÅÊåá‰ª§Âú∞ÂùÄÔºåÊúÄÂ•ΩÁöÑÂäûÊ≥ïËá™ÁÑ∂ÊòØ‰∏∫ÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÂàÜÈÖç‰∏Ä‰∏™PCÂØÑÂ≠òÂô®</p>
<p>Áî±‰∫éCPUÊó∂Èó¥ÁâáËΩÆÊµÅÈôêÂà∂Ôºå‰ºóÂ§öÁ∫øÁ®ãÂú®Âπ∂ÂèëÊâßË°åËøáÁ®ã‰∏≠Ôºå‰ªª‰Ωï‰∏Ä‰∏™Á°ÆÂÆöÁöÑÊó∂ÂàªÔºå‰∏Ä‰∏™Â§ÑÁêÜÂô®ÊàñËÄÖÂ§öÊ†∏Â§ÑÁêÜÂô®‰∏≠ÁöÑ‰∏Ä‰∏™ÂÜÖÊ†∏ÔºåÂè™‰ºöÊâßË°åÊüê‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ÁöÑ‰∏ÄÊù°Êåá‰ª§ÔºåËøôÊ†∑ÂøÖÁÑ∂ÂØºËá¥ÁªèÂ∏∏‰∏≠Êñ≠ÊàñÊÅ¢Â§çÔºåÂ¶Ç‰Ωï‰øùËØÅÂàÜÊØ´‰∏çÂ∑ÆÂë¢ÔºüÊØè‰∏™Á∫øÁ®ãÂú®ÂàõÂª∫ÂêéÔºåÈÉΩ‰ºö‰∫ßÁîüËá™Â∑±ÁöÑÁ®ãÂ∫èËÆ°Êï∞Âô®ÂíåÊ†àÂ∏ßÔºåÁ®ãÂ∫èËÆ°Êï∞Âô®Âú®ÂêÑ‰∏™Á∫øÁ®ã‰πãÈó¥‰∫í‰∏çÂΩ±Âìç„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÊ†àÂèäÊ†àÂ∏ß</title>
    <url>/p/79c43ec4.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Âü∫Á°ÄÊ¶ÇÂøµ"><a href="#Âü∫Á°ÄÊ¶ÇÂøµ" class="headerlink" title="Âü∫Á°ÄÊ¶ÇÂøµ"></a>Âü∫Á°ÄÊ¶ÇÂøµ</h2><h3 id="ÊòØ‰ªÄ‰πàÔºü"><a href="#ÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="ÊòØ‰ªÄ‰πàÔºü"></a>ÊòØ‰ªÄ‰πàÔºü</h3><p>JavaËôöÊãüÊú∫Ê†à(Java virtual Machine stack) ÔºåÊó©Êúü‰πüÂè´JavaÊ†à„ÄÇÊØè‰∏™Á∫øÁ®ãÂú®ÂàõÂª∫Êó∂ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™ËôöÊãüÊú∫Ê†à,ÂÖ∂ÂÜÖÈÉ®‰øùÂ≠ò‰∏Ä‰∏™‰∏™ÁöÑÊ†àÂ∏ß(stack Frame) ,ÂØπÂ∫îÁùÄ‰∏ÄÊ¨°Ê¨°ÁöÑJavaÊñπÊ≥ïË∞ÉÁî®ÔºåÊØè‰∏™ÊñπÊ≥ïË¢´Ë∞ÉÁî®ÊâßË°åÁöÑÊó∂ÂÄôÔºåJavaËôöÊãüÊú∫ÈÉΩ‰ºöÂêåÊ≠•ÂàõÂª∫‰∏Ä‰∏™Ê†àÂ∏ßÔºàStack FrameÔºâ„ÄÇ</p>
<h3 id="ÁîüÂëΩÂë®Êúü"><a href="#ÁîüÂëΩÂë®Êúü" class="headerlink" title="ÁîüÂëΩÂë®Êúü"></a>ÁîüÂëΩÂë®Êúü</h3><p>ÂõûÈ°æ‰∏Ä‰∏ãÔºöÊñπÊ≥ïÂå∫Ôºà‰øùÂ≠òÁ±ª‰ø°ÊÅØ„ÄÅÂ∏∏Èáè„ÄÅÈùôÊÄÅÂèòÈáèÁ≠âÔºâÂíåÂ†ÜÂÜÖÂ≠òÔºà‰øùÂ≠òÂØπË±°ÁöÑÂÆû‰æãÁ≠âÔºâÊòØÁ∫øÁ®ãÂÖ±‰∫´ÁöÑ„ÄÇÊ†à„ÄÅÁ®ãÂ∫èËÆ°Êï∞Âô®„ÄÅÊú¨Âú∞ÊñπÊ≥ïÊ†àÊòØÁ∫øÁ®ãÁã¨‰∫´ÁöÑ„ÄÇÊâÄ‰ª•ËØ¥ËôöÊãüÊú∫Ê†àÂÆÉÁöÑÁîüÂëΩÂë®Êúü‰∏éÁ∫øÁ®ãÁõ∏Âêå„ÄÇ</p>
<h3 id="‰ΩúÁî®"><a href="#‰ΩúÁî®" class="headerlink" title="‰ΩúÁî®"></a>‰ΩúÁî®</h3><p>‰∏ªÁÆ°JavaÁ®ãÂ∫èÁöÑËøêË°åÔºåÂÆÉ‰øùÂ≠òÊñπÊ≥ïÁöÑÂ±ÄÈÉ®ÂèòÈáèÔºà8‰∏≠Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºâ„ÄÅÈÉ®ÂàÜÁªìÊûúÔºåÂπ∂ÂèÇ‰∏éÊñπÊ≥ïÁöÑË∞ÉÁî®ÂíåËøîÂõû„ÄÇ</p>
<h3 id="‰ºòÁÇπ"><a href="#‰ºòÁÇπ" class="headerlink" title="‰ºòÁÇπ"></a>‰ºòÁÇπ</h3><ul>
<li>Ê†àÊòØ‰∏ÄÁßçÂø´ÈÄüÊúâÊïàÁöÑÈ¢ùÂàÜÈÖçÂ≠òÂÇ®ÊñπÂºèÔºåËÆøÈóÆÈÄüÂ∫¶‰ªÖÊ¨°‰∫éÁ®ãÂ∫èËÆ°Êï∞Âô®</li>
<li>JVM Áõ¥Êé•ÂØπ Java Ê†àÁöÑÊìç‰ΩúÂè™Êúâ‰∏§‰∏™<ul>
<li>ÊØè‰∏™ÊñπÊ≥ïÊâßË°åÔºå‰º¥ÈöèÁùÄËøõÊ†àÔºàÂÖ•Ê†à„ÄÅÂéãÊ†àÔºâ</li>
<li>ÊâßË°åÁªìÊùüÂêéÁöÑÂá∫Ê†àÂ∑•‰Ωú</li>
</ul>
</li>
<li>ÂØπÊ†àÊù•ËØ¥‰∏çÂ≠òÂú®ÂûÉÂúæÂõûÊî∂ÈóÆÈ¢òÔºàÂèØËÉΩ‰ºöÊ∫¢Âá∫Ôºâ</li>
</ul>
<h3 id="Ê†à‰∏≠ÂèØËÉΩÁöÑÂºÇÂ∏∏"><a href="#Ê†à‰∏≠ÂèØËÉΩÁöÑÂºÇÂ∏∏" class="headerlink" title="Ê†à‰∏≠ÂèØËÉΩÁöÑÂºÇÂ∏∏"></a>Ê†à‰∏≠ÂèØËÉΩÁöÑÂºÇÂ∏∏</h3><p>Java ËôöÊãüÊú∫ËßÑËåÉÂÖÅËÆ∏ Java Ê†àÁöÑÂ§ßÂ∞èÊòØÂä®ÊÄÅÁöÑÊàñËÄÖÊòØÂõ∫ÂÆö‰∏çÂèòÁöÑ„ÄÇ</p>
<ul>
<li>Â¶ÇÊûúÈááÁî®Âõ∫ÂÆöÂ§ßÂ∞èÁöÑ Java ËôöÊãüÊú∫Ê†àÔºåÈÇ£ÊØè‰∏Ä‰∏™Á∫øÁ®ãÁöÑ Java ËôöÊãüÊú∫Ê†àÂÆπÈáèÂèØ‰ª•Âú®Á∫øÁ®ãÂàõÂª∫ÁöÑÊó∂ÂÄôÁã¨Á´ãÈÄâÂÆö„ÄÇÂ¶ÇÊûúÁ∫øÁ®ãËØ∑Ê±ÇÂàÜÈÖçÁöÑÊ†àÂÆπÈáèË∂ÖËøá JavaËôöÊãüÊú∫Ê†àÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÂÆπÈáèÔºåJava ËôöÊãüÊú∫Â∞Ü‰ºöÊäõÂá∫‰∏Ä‰∏™ <code>StackOverflowError</code> ÂºÇÂ∏∏„ÄÇ</li>
<li>Â¶ÇÊûú Java ËôöÊãüÊú∫Ê†àÂèØ‰ª•Âä®ÊÄÅÊâ©Â±ïÔºåÂπ∂‰∏îÂú®Â∞ùËØïÊâ©Â±ïÁöÑÊó∂ÂÄôÊó†Ê≥ïÁî≥ËØ∑Âà∞Ë∂≥Â§üÁöÑÂÜÖÂ≠òÔºåÊàñËÄÖÂú®ÂàõÂª∫Êñ∞ÁöÑÁ∫øÁ®ãÊó∂Ê≤°ÊúâË∂≥Â§üÁöÑÂÜÖÂ≠òÂéªÂàõÂª∫ÂØπÂ∫îÁöÑËôöÊãüÊú∫Ê†àÔºåÈÇ£ Java ËôöÊãüÊú∫‰ºöÊäõÂá∫‰∏Ä‰∏™ <code>OutOfMemoryError</code> ÂºÇÂ∏∏„ÄÇ</li>
</ul>
<h3 id="ËÆæÁΩÆÁ®ãÂ∫èËøêË°åÊó∂Ê†àÂÜÖÂ≠òÂ§ßÂ∞è"><a href="#ËÆæÁΩÆÁ®ãÂ∫èËøêË°åÊó∂Ê†àÂÜÖÂ≠òÂ§ßÂ∞è" class="headerlink" title="ËÆæÁΩÆÁ®ãÂ∫èËøêË°åÊó∂Ê†àÂÜÖÂ≠òÂ§ßÂ∞è"></a>ËÆæÁΩÆÁ®ãÂ∫èËøêË°åÊó∂Ê†àÂÜÖÂ≠òÂ§ßÂ∞è</h3><p>ÂÆòÊñπÊñáÊ°£Âú∞ÂùÄÔºö<a href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BGBCIEFC">https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BGBCIEFC</a></p>
<p>‰ΩøÁî®ÂèÇÊï∞ -Xss ËÆæÁΩÆÁ∫øÁ®ãÁöÑÊúÄÂ§ßÊ†àÁ©∫Èó¥ÔºåÊ†àÁöÑÂ§ßÂ∞èÁõ¥Êé•ÂÜ≥ÂÆö‰∫ÜÂáΩÊï∞Ë∞ÉÁî®ÁöÑÊúÄÂ§ßÂèØËææÊ∑±Â∫¶„ÄÇ</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">-Xss1m</span><br><span class="line">-Xss1024k</span><br><span class="line">-Xss1048576</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Ê†àËøêË°åÂéüÁêÜ"><a href="#Ê†àËøêË°åÂéüÁêÜ" class="headerlink" title="Ê†àËøêË°åÂéüÁêÜ"></a>Ê†àËøêË°åÂéüÁêÜ</h3><ul>
<li>JVM Áõ¥Êé•ÂØπ Java Ê†àÁöÑÊìç‰ΩúÂè™Êúâ‰∏§‰∏™ÔºåÂ∞±ÊòØÂØπÊ†àÂ∏ßÁöÑÂéãÊ†àÂíåÂá∫Ê†àÔºåÈÅµÂæ™‚ÄúÂÖàËøõÂÖàÂá∫‚ÄùÊàñ‚ÄúÂêéËøõÂÖàÂá∫‚ÄùÁöÑÂéüÂàô</li>
<li>Âú®‰∏ÄÊù°Ê¥ªÂä®Á∫øÁ®ã‰∏≠Ôºå‰∏Ä‰∏™Êó∂Èó¥ÁÇπ‰∏äÔºåÂè™‰ºöÊúâ‰∏Ä‰∏™Ê¥ªÂä®ÁöÑÊ†àÂ∏ß„ÄÇÂç≥Âè™ÊúâÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑÊñπÊ≥ïÁöÑÊ†àÂ∏ßÔºàÊ†àÈ°∂Ê†àÂ∏ßÔºâÊòØÊúâÊïàÁöÑÔºåËøô‰∏™Ê†àÂ∏ßË¢´Áß∞‰∏∫ÂΩìÂâçÊ†àÂ∏ßÔºàCurrent FrameÔºâÔºå‰∏éÂΩìÂâçÊ†àÂ∏ßÁõ∏ÂØπÂ∫îÁöÑÊñπÊ≥ïÂ∞±ÊòØÂΩìÂâçÊñπÊ≥ïÔºàCurrent MethodÔºâÔºåÂÆö‰πâËøô‰∏™ÊñπÊ≥ïÁöÑÁ±ªÂ∞±ÊòØÂΩìÂâçÁ±ªÔºàCurrent ClassÔºâ</li>
<li>ÊâßË°åÂºïÊìéËøêË°åÁöÑÊâÄÊúâÂ≠óËäÇÁ†ÅÊåá‰ª§Âè™ÈíàÂØπÂΩìÂâçÊ†àÂ∏ßËøõË°åÊìç‰Ωú</li>
<li>Â¶ÇÊûúÂú®ËØ•ÊñπÊ≥ï‰∏≠Ë∞ÉÁî®‰∫ÜÂÖ∂‰ªñÊñπÊ≥ïÔºåÂØπÂ∫îÁöÑÊñ∞ÁöÑÊ†àÂ∏ß‰ºöË¢´ÂàõÂª∫Âá∫Êù•ÔºåÊîæÂú®Ê†àÁöÑÈ°∂Á´ØÔºåÁß∞‰∏∫Êñ∞ÁöÑÂΩìÂâçÂ∏ß</li>
<li>‰∏çÂêåÁ∫øÁ®ã‰∏≠ÊâÄÂåÖÂê´ÁöÑÊ†àÂ∏ßÊòØ‰∏çÂÖÅËÆ∏Áõ∏‰∫íÂºïÁî®ÁöÑÔºåÂç≥‰∏çÂèØËÉΩÂú®‰∏Ä‰∏™Ê†àÂ∏ß‰πã‰∏≠ÂºïÁî®Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÁöÑÊ†àÂ∏ß</li>
<li>Â¶ÇÊûúÂΩìÂâçÊñπÊ≥ïË∞ÉÁî®‰∫ÜÂÖ∂‰ªñÊñπÊ≥ïÔºåÊñπÊ≥ïËøîÂõû‰πãÈôÖÔºåÂΩìÂâçÊ†àÂ∏ß‰ºö‰º†ÂõûÊ≠§ÊñπÊ≥ïÁöÑÊâßË°åÁªìÊûúÁªôÂâç‰∏Ä‰∏™Ê†àÂ∏ßÔºåÊé•ÁùÄÔºåËôöÊãüÊú∫‰ºö‰∏¢ÂºÉÂΩìÂâçÊ†àÂ∏ßÔºå‰ΩøÂæóÂâç‰∏Ä‰∏™Ê†àÂ∏ßÈáçÊñ∞Áß∞‰∏∫ÂΩìÂâçÊ†àÂ∏ß</li>
<li>Java ÊñπÊ≥ïÊúâ‰∏§ÁßçËøîÂõûÂáΩÊï∞ÁöÑÊñπÂºèÔºå‰∏ÄÁßçÊòØÊ≠£Â∏∏ÁöÑÂáΩÊï∞ËøîÂõûÔºå‰ΩøÁî® returnÔºåÂè¶‰∏ÄÁßçÊòØÊäõÂá∫ÂºÇÂ∏∏Ôºå‰∏çÁÆ°‰ΩøÁî®Âì™ÁßçÔºåÈÉΩ‰ºöÂØºËá¥Ê†àÂ∏ßË¢´ÂºπÂá∫„ÄÇ</li>
</ul>
<h2 id="Ê†àÂ∏ßÁöÑÂÜÖÈÉ®ÁªìÊûÑ"><a href="#Ê†àÂ∏ßÁöÑÂÜÖÈÉ®ÁªìÊûÑ" class="headerlink" title="Ê†àÂ∏ßÁöÑÂÜÖÈÉ®ÁªìÊûÑ"></a>Ê†àÂ∏ßÁöÑÂÜÖÈÉ®ÁªìÊûÑ</h2><p>ÊØè‰∏™Ê†àÂ∏ßÂåÖÂê´5‰∏™ÁªÑÊàêÈÉ®ÂàÜÔºöÂ±ÄÈÉ®ÂèòÈáèË°®ÔºàLocal VariablesÔºâ„ÄÅÊìç‰ΩúÊï∞Ê†àÔºàOperand StackÔºâ„ÄÅÂä®ÊÄÅÈìæÊé•ÔºàDynamic LinkingÔºâ„ÄÅÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÔºàReturn AddressÔºâÂíå‰∏Ä‰∫õÈôÑÂä†‰ø°ÊÅØ„ÄÇ</p>
<p><img src="/p/79c43ec4/JVM-%E6%A0%88%E5%B8%A7%E7%9A%84%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84.png" alt="img"></p>
<h3 id="Â±ÄÈÉ®ÂèòÈáèË°®ÔºàLocal-VariablesÔºâ"><a href="#Â±ÄÈÉ®ÂèòÈáèË°®ÔºàLocal-VariablesÔºâ" class="headerlink" title="Â±ÄÈÉ®ÂèòÈáèË°®ÔºàLocal VariablesÔºâ"></a>Â±ÄÈÉ®ÂèòÈáèË°®ÔºàLocal VariablesÔºâ</h3><ul>
<li>Â±ÄÈÉ®ÂèòÈáèË°®‰πüË¢´Áß∞‰∏∫Â±ÄÈÉ®ÂèòÈáèÊï∞ÁªÑÊàñÊú¨Âú∞ÂèòÈáèË°®„ÄÇ</li>
<li>ÂÆö‰πâ‰∏∫‰∏Ä‰∏™Êï∞Â≠óÊï∞ÁªÑÔºå‰∏ªË¶ÅÁî®‰∫éÂ≠òÂÇ®ÊñπÊ≥ïÂèÇÊï∞ÂíåÂÆö‰πâÂú®ÊñπÊ≥ï‰ΩìÂÜÖÁöÑÂ±ÄÈÉ®ÂèòÈáèÔºåËøô‰∫õÊï∞ÊçÆÁ±ªÂûãÂåÖÊã¨ÂêÑÁ±ªÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûã„ÄÅÂØπË±°ÂºïÁî®ÔºàreferenceÔºâÔºå‰ª•ÂèäreturnAddress Á±ªÂûã</li>
<li>Áî±‰∫éÂ±ÄÈÉ®ÂèòÈáèË°®ÊòØÂª∫Á´ãÂú®Á∫øÁ®ãÁöÑÊ†à‰∏äÔºåÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑÊï∞ÊçÆÔºåÂõ†Ê≠§‰∏çÂ≠òÂú®Êï∞ÊçÆÂÆâÂÖ®ÈóÆÈ¢ò</li>
<li>Â±ÄÈÉ®ÂèòÈáèË°®ÊâÄÈúÄÁöÑÂÆπÈáèÂ§ßÂ∞èÊòØÂú®ÁºñËØëÊúüÁ°ÆÂÆöÁöÑÔºåÂπ∂‰øùÂ≠òÂú®ÊñπÊ≥ïÁöÑCode Â±ûÊÄßÁöÑ maximum local variables Êï∞ÊçÆÈ°π‰∏≠„ÄÇÂú®ÊñπÊ≥ïËøêË°åÊúüÈó¥ÊòØ‰∏ç‰ºöÊîπÂèòÂ±ÄÈÉ®ÂèòÈáèË°®ÁöÑÂ§ßÂ∞èÁöÑ</li>
<li><strong>ÊñπÊ≥ïÂµåÂ•óË∞ÉÁî®ÁöÑÊ¨°Êï∞Áî±Ê†àÁöÑÂ§ßÂ∞èÊù•ÂÜ≥ÂÆöÔºå‰∏ÄËà¨Êù•ËØ¥Ê†àË∂äÂ§ßÔºåÊñπÊ≥ïÂµåÂ•óË∞ÉÁî®Ê¨°Êï∞Ë∂äÂ§ö„ÄÇ</strong>ÂØπ‰∏Ä‰∏™ÂáΩÊï∞ËÄåË®ÄÔºåÂÆÉÁöÑÂèÇÊï∞ÂíåÂ±ÄÈÉ®ÂèòÈáèË∂äÂ§öÔºå‰ΩøÂæóÂ±ÄÈÉ®ÂèòÈáèË°®ËÜ®ËÉÄÔºåÂÆÉÁöÑÊ†àÂ∏ßÂ∞±Ë∂äÂ§ßÔºå‰ª•Êª°Ë∂≥ÊñπÊ≥ïË∞ÉÁî®ÊâÄÈúÄ‰º†ÈÄíÁöÑ‰ø°ÊÅØÂ¢ûÂ§ßÁöÑÈúÄÊ±Ç„ÄÇËøõËÄåÂáΩÊï∞Ë∞ÉÁî®Â∞±‰ºöÂç†Áî®Êõ¥Â§öÁöÑÊ†àÁ©∫Èó¥ÔºåÂØºËá¥ÂÖ∂ÂµåÂ•óË∞ÉÁî®ÁöÑÊ¨°Êï∞Â∞±‰ºöÂáèÂ∞ë„ÄÇ</li>
<li><strong>Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠ÁöÑÂèòÈáèÂè™Âú®ÂΩìÂâçÊñπÊ≥ïË∞ÉÁî®‰∏≠ÊúâÊïà„ÄÇ</strong>Âú®ÊñπÊ≥ïÊâßË°åÊó∂ÔºåËôöÊãüÊú∫ÈÄöËøá‰ΩøÁî®Â±ÄÈÉ®ÂèòÈáèË°®ÂÆåÊàêÂèÇÊï∞ÂÄºÂà∞ÂèÇÊï∞ÂèòÈáèÂàóË°®ÁöÑ‰º†ÈÄíËøáÁ®ã„ÄÇ<strong>ÂΩìÊñπÊ≥ïË∞ÉÁî®ÁªìÊùüÂêéÔºåÈöèÁùÄÊñπÊ≥ïÊ†àÂ∏ßÁöÑÈîÄÊØÅÔºåÂ±ÄÈÉ®ÂèòÈáèË°®‰πü‰ºöÈöè‰πãÈîÄÊØÅ„ÄÇ</strong></li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LocalVariablesTest</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span>  <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">LocalVariablesTest</span> <span class="variable">localVariablesTest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LocalVariablesTest</span>();</span><br><span class="line">        localVariablesTest.test1();</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/p/79c43ec4/JClassLib-%E6%9F%A5%E7%9C%8B%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6.png" alt="image-20210912140552384"></p>
<blockquote>
<h4 id="ÂÖ≥‰∫éSlotÁöÑÁêÜËß£"><a href="#ÂÖ≥‰∫éSlotÁöÑÁêÜËß£" class="headerlink" title="ÂÖ≥‰∫éSlotÁöÑÁêÜËß£"></a>ÂÖ≥‰∫éSlotÁöÑÁêÜËß£</h4></blockquote>
<ul>
<li><p>ÂèÇÊï∞ÂÄºÁöÑÂ≠òÊîæÊÄªÊòØÂú®Â±ÄÈÉ®ÂèòÈáèÊï∞ÁªÑÁöÑindex0ÂºÄÂßãÔºåÂà∞Êï∞ÁªÑÈïøÂ∫¶-1ÁöÑÁ¥¢ÂºïÁªìÊùü„ÄÇ</p>
</li>
<li><p>Â±ÄÈÉ®ÂèòÈáèË°®Ôºå<strong>ÊúÄÂü∫Êú¨ÁöÑÂ≠òÂÇ®ÂçïÂÖÉÊòØslotÔºàÂèòÈáèÊßΩÔºâ„ÄÇ</strong></p>
</li>
<li><p>Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠Â≠òÊîæÁºñËØëÊúüÂèØÁü•ÁöÑÂêÑÁßçÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûã(8Áßç)ÔºåÂºïÁî®Á±ªÂûã(reference)ÔºåreturnAddressÁ±ªÂûãÁöÑÂèòÈáè„ÄÇ</p>
</li>
<li><p>Âú®Â±ÄÈÉ®ÂèòÈáèË°®ÈáåÔºå<strong>32‰Ωç‰ª•ÂÜÖÁöÑÁ±ªÂûãÂè™Âç†Áî®‰∏Ä‰∏™slotÔºàÂåÖÊã¨returnAddressÁ±ªÂûãÔºâÔºå64‰ΩçÁöÑÁ±ªÂûãÔºàlongÂíådouble)Âç†Áî®‰∏§‰∏™slot„ÄÇ</strong></p>
<ul>
<li>byte „ÄÅ short „ÄÅ charÂú®Â≠òÂÇ®ÂâçË¢´ËΩ¨Êç¢‰∏∫intÔºåboolean‰πüË¢´ËΩ¨Êç¢‰∏∫intÔºå0Ë°®Á§∫false ÔºåÈùû0Ë°®Á§∫true„ÄÇ</li>
<li>longÂíådoubleÂàôÂç†ÊçÆ‰∏§‰∏™slot„ÄÇ</li>
</ul>
<p><img src="/p/79c43ec4/JVM-%E9%99%A4double%E5%92%8Clong%E5%A4%96%E5%85%B6%E5%AE%83%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B%E5%8D%A01%E4%B8%AAslot.png" alt="image-20210912154134474"></p>
</li>
</ul>
<p><img src="/p/79c43ec4/JVM-double%E5%92%8Clong%E4%BC%9A%E5%8D%A0%E6%8D%AE%E4%B8%A4%E4%B8%AAslot.png" alt="image-20210912153951967"></p>
<ul>
<li><p>JVM‰ºö‰∏∫Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠ÁöÑÊØè‰∏Ä‰∏™SlotÈÉΩÂàÜÈÖç‰∏Ä‰∏™ËÆøÈóÆÁ¥¢ÂºïÔºåÈÄöËøáËøô‰∏™Á¥¢ÂºïÂç≥ÂèØÊàêÂäüËÆøÈóÆÂà∞Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠ÊåáÂÆöÁöÑÂ±ÄÈÉ®ÂèòÈáèÂÄº„ÄÇ</p>
</li>
<li><p>ÂΩì‰∏Ä‰∏™ÂÆû‰æãÊñπÊ≥ïË¢´Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºåÂÆÉÁöÑÊñπÊ≥ïÂèÇÊï∞ÂíåÊñπÊ≥ï‰ΩìÂÜÖÈÉ®ÂÆö‰πâÁöÑÂ±ÄÈÉ®ÂèòÈáèÂ∞Ü‰ºöÊåâÁÖßÈ°∫Â∫èË¢´Â§çÂà∂Âà∞Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠ÁöÑÊØè‰∏Ä‰∏™slot‰∏ä„ÄÇ</p>
</li>
<li><p>Â¶ÇÊûúÈúÄË¶ÅËÆøÈóÆÂ±ÄÈÉ®ÂèòÈáèË°®‰∏≠‰∏Ä‰∏™64bitÁöÑÂ±ÄÈÉ®ÂèòÈáèÂÄºÊó∂ÔºåÂè™ÈúÄË¶Å‰ΩøÁî®Ââç‰∏Ä‰∏™Á¥¢ÂºïÂç≥ÂèØ„ÄÇÔºàÊØîÂ¶Ç:ËÆøÈóÆlongÊàñdoubleÁ±ªÂûãÂèòÈáèÔºâ</p>
</li>
<li><p>Â¶ÇÊûúÂΩìÂâçÂ∏ßÊòØÁî±ÊûÑÈÄ†ÊñπÊ≥ïÊàñËÄÖÂÆû‰æãÊñπÊ≥ïÂàõÂª∫ÁöÑÔºåÈÇ£‰πàËØ•ÂØπË±°ÂºïÁî®<strong>this</strong> Â∞Ü‰ºöÂ≠òÊîæÂú®index‰∏∫0ÁöÑslotÂ§ÑÔºåÂÖ∂‰ΩôÁöÑÂèÇÊï∞ÊåâÁÖßÂèÇÊï∞Ë°®È°∫Â∫èÁªßÁª≠ÊéíÂàó„ÄÇ</p>
</li>
</ul>
<p><img src="/p/79c43ec4/JVM-%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E4%B8%8D%E5%AD%98%E5%9C%A8this.png" alt="image-20210912152018987"></p>
<p><img src="/p/79c43ec4/JVM-%E9%9D%9E%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AAslot%E4%B8%BAthis.png" alt="image-20210912152337316"></p>
<blockquote>
<h4 id="TipsÔºöSlotÁöÑÈáçÂ§çÂà©Áî®"><a href="#TipsÔºöSlotÁöÑÈáçÂ§çÂà©Áî®" class="headerlink" title="TipsÔºöSlotÁöÑÈáçÂ§çÂà©Áî®"></a>TipsÔºöSlotÁöÑÈáçÂ§çÂà©Áî®</h4></blockquote>
<p>Ê†àÂ∏ß‰∏≠ÁöÑÂ±ÄÈÉ®ÂèòÈáèË°®‰∏≠ÁöÑSlotÔºàÊßΩ‰ΩçÔºâÊòØÂèØ‰ª•Â§çÁî®ÁöÑÔºåÂ¶ÇÊûú‰∏Ä‰∏™Â±ÄÈÉ®ÂèòÈáèËøá‰∫ÜÂÖ∂‰ΩúÁî®ÂüüÔºåÈÇ£‰πàÂú®ÂÖ∂‰ΩúÁî®Âüü‰πãÂêéÁî≥ÊòéÁöÑÊñ∞ÁöÑÂ±ÄÈÉ®ÂèòÈáèÂ∞±ÂæàÊúâÂèØËÉΩ‰ºöÂ§çÁî®ËøáÊúüÂ±ÄÈÉ®ÂèòÈáèÁöÑÊßΩ‰ΩçÔºå‰ªéËÄåËææÂà∞ËäÇÁúÅËµÑÊ∫êÁöÑÁõÆÁöÑ„ÄÇ</p>
<p>‰∏ãÈù¢Áúã‰∏Ä‰∏™Ê°à‰æãÔºå‰∏ãÈù¢Ëøô‰∏™ÊñπÊ≥ïÁöÑÂ±ÄÈÉ®ÂèòÈáèË°®ÁöÑÈïøÂ∫¶Â§ßÂ∞è‰∏çÈöæÁúãÂá∫ÊòØ4„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    b = a + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a + <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏ãÈù¢Ëøô‰∏™Ê°à‰æãÂë¢ÔºüÂÆûÈôÖ‰∏äÊòØÈïøÂ∫¶ÊòØ3„ÄÇËøôÈáåÂ∞±Â≠òÂú®‰∏Ä‰∏™slotÂ§çÁî®ÁöÑÊ¶ÇÂøµ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    {</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        b = a + <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a + <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/p/79c43ec4/JVM-slot%E7%9A%84%E5%A4%8D%E7%94%A8.png" alt="image-20210912155238955"></p>
<blockquote>
<h4 id="TipsÔºöÈùôÊÄÅÂèòÈáè‰∏éÂ±ÄÈÉ®ÂèòÈáèÁöÑÂØπÊØî"><a href="#TipsÔºöÈùôÊÄÅÂèòÈáè‰∏éÂ±ÄÈÉ®ÂèòÈáèÁöÑÂØπÊØî" class="headerlink" title="TipsÔºöÈùôÊÄÅÂèòÈáè‰∏éÂ±ÄÈÉ®ÂèòÈáèÁöÑÂØπÊØî"></a>TipsÔºöÈùôÊÄÅÂèòÈáè‰∏éÂ±ÄÈÉ®ÂèòÈáèÁöÑÂØπÊØî</h4></blockquote>
<p>ÊåâÁÖßÊï∞ÊçÆÁ±ªÂûãÂàÜÔºö‚ë† Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûã ‚ë° ÂºïÁî®Êï∞ÊçÆÁ±ªÂûã</p>
<p>ÊåâÁÖßÂú®Á±ª‰∏≠Â£∞ÊòéÁöÑ‰ΩçÁΩÆÂàÜÔºö</p>
<p> ‚ë† ÊàêÂëòÂèòÈáèÔºöÂú®‰ΩøÁî®ÂâçÔºåÈÉΩÁªèÂéÜËøáÈªòËÆ§ÂàùÂßãÂåñËµãÂÄº„ÄÇ</p>
<ul>
<li>Á±ªÂèòÈáèÔºàÈùôÊÄÅÁöÑÊàêÂëòÂèòÈáèÔºâ</li>
</ul>
<p>Linking ÁöÑ prepare Èò∂ÊÆµÔºöÁªôÁ±ªÂèòÈáèÈªòËÆ§ËµãÂÄº„ÄÇ</p>
<p>initialÈò∂ÊÆµÔºöÁªôÁ±ªÂèòÈáèÊòæÂºèËµãÂÄºÂç≥ÈùôÊÄÅ‰ª£Á†ÅÂùóËµãÂÄº„ÄÇ</p>
<ul>
<li>ÂÆû‰æãÂèòÈáèÔºàÈùûÈùôÊÄÅÁöÑÊàêÂëòÂèòÈáèÔºâÔºöÈöèÁùÄÂØπË±°ÁöÑÂàõÂª∫Ôºå‰ºöÂú®Â†ÜÁ©∫Èó¥‰∏≠ÂàÜÈÖçÂÆû‰æãÂèòÈáèÁ©∫Èó¥ÔºåÂπ∂ËøõË°åÈªòËÆ§ËµãÂÄº</li>
</ul>
<p>‚ë° Â±ÄÈÉ®ÂèòÈáèÔºöÂú®‰ΩøÁî®ÂâçÔºåÂøÖÈ°ªË¶ÅËøõË°åÊòæÂºèËµãÂÄºÁöÑÔºÅÂê¶ÂàôÔºåÁºñËØë‰∏çÈÄöËøá„ÄÇ</p>
<p>Âú®Ê†àÂ∏ß‰∏≠Ôºå‰∏éÊÄßËÉΩË∞É‰ºòÂÖ≥Á≥ªÊúÄ‰∏∫ÂØÜÂàáÁöÑÈÉ®ÂàÜÂ∞±ÊòØÂâçÈù¢ÊèêÂà∞ÁöÑÂ±ÄÈÉ®ÂèòÈáèË°®„ÄÇÂú®ÊñπÊ≥ïÊâßË°åÊó∂ÔºåËôöÊãüÊú∫‰ΩøÁî®Â±ÄÈÉ®ÂèòÈáèË°®ÂÆåÊàêÊñπÊ≥ïÁöÑ‰º†ÈÄí„ÄÇ</p>
<p>Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠ÁöÑÂèòÈáè‰πüÊòØÈáçË¶ÅÁöÑÂûÉÂúæÂõûÊî∂Ê†πËäÇÁÇπÔºåÂè™Ë¶ÅË¢´Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠Áõ¥Êé•ÊàñÈó¥Êé•ÂºïÁî®ÁöÑÂØπË±°ÈÉΩ‰∏ç‰ºöË¢´ÂõûÊî∂„ÄÇ</p>
<h3 id="Êìç‰ΩúÊï∞Ê†àÔºàOperand-StackÔºâ"><a href="#Êìç‰ΩúÊï∞Ê†àÔºàOperand-StackÔºâ" class="headerlink" title="Êìç‰ΩúÊï∞Ê†àÔºàOperand StackÔºâ"></a>Êìç‰ΩúÊï∞Ê†àÔºàOperand StackÔºâ</h3><p>ÊØè‰∏Ä‰∏™Áã¨Á´ãÁöÑÊ†àÂ∏ß‰∏≠Èô§‰∫ÜÂåÖÂê´Â±ÄÈÉ®ÂèòÈáèË°®‰ª•Â§ñÔºåËøòÂåÖÂê´‰∏Ä‰∏™ÂêéËøõÂÖàÂá∫ÔºàLast-In-First-OutÔºâÁöÑÊìç‰ΩúÊï∞Ê†àÔºå‰πüÂèØ‰ª•Áß∞‰∏∫Ë°®ËææÂºèÊ†àÔºàExpression StackÔºâ</p>
<p>Êìç‰ΩúÊï∞Ê†àÔºåÂú®ÊñπÊ≥ïÊâßË°åËøáÁ®ã‰∏≠ÔºåÊ†πÊçÆÂ≠óËäÇÁ†ÅÊåá‰ª§ÔºåÂæÄÊ†à‰∏≠ÂÜôÂÖ•Êï∞ÊçÆÊàñÊèêÂèñÊï∞ÊçÆÂç≥ÂÖ•Ê†àÔºàpushÔºâÂá∫Ê†àÔºàpopÔºâ</p>
<ul>
<li>Êüê‰∫õÂ≠óËäÇÁ†ÅÊåá‰ª§Â∞ÜÂÄºÂéãÂÖ•Êìç‰ΩúÊï∞Ê†àÔºåÂÖ∂‰ΩôÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§Â∞ÜÊìç‰ΩúÊï∞ÂèñÂá∫Ê†à„ÄÇ‰ΩøÁî®ÂÆÉ‰ª¨ÂêéÂÜçÊääÁªìÊûúÂéãÂÖ•Ê†à„ÄÇ</li>
<li>ÊØîÂ¶ÇÔºöÊâßË°åËµãÂÄº„ÄÅ‰∫§Êç¢„ÄÅÊ±ÇÂíåÁ≠âÊìç‰Ωú„ÄÇ</li>
</ul>
<p>Â¶ÇÊûúË¢´Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÂ∏¶ÊúâËøîÂõûÂÄºÁöÑËØùÔºåÂÖ∂ËøîÂõûÂÄºÂ∞Ü‰ºöË¢´ÂéãÂÖ•ÂΩìÂâçÊ†àÂ∏ßÁöÑÊìç‰ΩúÊï∞Ê†à‰∏≠ÔºåÂπ∂Êõ¥Êñ∞ PC ÂØÑÂ≠òÂô®‰∏≠‰∏ã‰∏ÄÊù°ÈúÄË¶ÅÊâßË°åÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§„ÄÇ</p>
<p>Êìç‰ΩúÊï∞Ê†à‰∏≠ÂÖÉÁ¥†ÁöÑÊï∞ÊçÆÁ±ªÂûãÂøÖÈ°ª‰∏éÂ≠óËäÇÁ†ÅÊåá‰ª§ÁöÑÂ∫èÂàó‰∏•Ê†ºÂåπÈÖçÔºåËøôÁî±ÁºñËØëÂô®Âú®ÁºñËØëÊúüÈó¥ËøõË°åÈ™åËØÅÔºåÂêåÊó∂Âú®Á±ªÂä†ËΩΩÁöÑËøáÁ®ã‰∏≠ÁöÑÁ±ªÊ£ÄÈ™åÈò∂ÊÆµÁöÑÊï∞ÊçÆÊµÅÂàÜÊûêÈò∂ÊÆµË¶ÅÂÜçÊ¨°È™åËØÅ</p>
<p>Âè¶Â§ñÔºåJava ËôöÊãüÊú∫ÁöÑËß£ÈáäÂºïÊìéÊòØÂü∫‰∫éÊ†àÁöÑÊâßË°åÂºïÊìéÔºåÂÖ∂‰∏≠ÁöÑÊ†àÊåáÁöÑÊòØÊìç‰ΩúÊï∞Ê†à„ÄÇ</p>
<p>Êìç‰ΩúÊï∞Ê†àÔºå‰∏ªË¶ÅÁî®‰∫é‰øùÂ≠òËÆ°ÁÆóËøáÁ®ã‰∏≠ÁöÑ‰∏≠Èó¥ÁªìÊûúÔºåÂêåÊó∂‰Ωú‰∏∫ËÆ°ÁÆóËøáÁ®ã‰∏≠ÂèòÈáè‰∏¥Êó∂ÁöÑÂ≠òÂÇ®Á©∫Èó¥„ÄÇ</p>
<p>Êìç‰ΩúÊï∞Ê†àÂ∞±ÊòØ JVM ÊâßË°åÂºïÊìéÁöÑ‰∏Ä‰∏™Â∑•‰ΩúÂå∫ÔºåÂΩì‰∏Ä‰∏™ÊñπÊ≥ïÂàöÂºÄÂßãÊâßË°åÁöÑÊó∂ÂÄôÔºå‰∏Ä‰∏™Êñ∞ÁöÑÊ†àÂ∏ß‰πü‰ºöÈöè‰πãË¢´ÂàõÂª∫Âá∫Êù•ÔºåËøô‰∏™ÊñπÊ≥ïÁöÑÊìç‰ΩúÊï∞Ê†àÊòØÁ©∫ÁöÑ„ÄÇ</p>
<p>ÊØè‰∏Ä‰∏™Êìç‰ΩúÊï∞Ê†àÈÉΩ‰ºöÊã•Êúâ‰∏Ä‰∏™ÊòéÁ°ÆÁöÑÊ†àÊ∑±Â∫¶Áî®‰∫éÂ≠òÂÇ®Êï∞ÂÄºÔºåÂÖ∂ÊâÄÈúÄË¶ÅÁöÑÊúÄÂ§ßÊ∑±Â∫¶Âú®ÁºñËØëÂô®Â∞±ÂÆö‰πâÂ•Ω‰∫ÜÔºå‰øùÂ≠òÂú®ÊñπÊ≥ïÁöÑ code Â±ûÊÄßÈáåÔºåÊòØ max_stack ÁöÑÂÄº</p>
<p>Ê†à‰∏≠ÁöÑ‰ªª‰Ωï‰∏Ä‰∏™ÂÖÉÁ¥†ÈÉΩÊòØÂèØ‰ª•‰ªªÊÑèÁöÑ Java Êï∞ÊçÆÁ±ªÂûã</p>
<ul>
<li>32 bit ÁöÑÁ±ªÂûãÂç†Áî®‰∏Ä‰∏™Ê†àÂçï‰ΩçÊ∑±Â∫¶</li>
<li>64 bit ÁöÑÁ±ªÂûãÂç†Áî®‰∏§‰∏™Ê†àÂçï‰ΩçÊ∑±Â∫¶</li>
</ul>
<p>Êìç‰ΩúÊï∞Ê†àÂπ∂ÈùûÈááÁî®ËÆøÈóÆÁ¥¢ÂºïÁöÑÊñπÂºèÊù•ËøõË°åÊï∞ÊçÆËÆøÈóÆÁöÑÔºåËÄåÊòØÂè™ËÉΩÈÄöËøáÊ†áÂáÜÁöÑÂÖ•Ê†àÔºàpushÔºâÂíåÂá∫Ê†àÔºàpopÔºâÊìç‰ΩúÊù•ÂÆåÊàê‰∏ÄÊ¨°Êï∞ÊçÆËÆøÈóÆ„ÄÇ</p>
<blockquote>
<p><strong>Ê†àÈ°∂ÁºìÂ≠òÊäÄÊúØ</strong></p>
</blockquote>
<p>Âü∫‰∫éÊ†àÂºèÊû∂ÊûÑÁöÑËôöÊãüÊú∫ÊâÄ‰ΩøÁî®ÁöÑÈõ∂Âú∞ÂùÄÊåá‰ª§Êõ¥Âä†Á¥ßÂáëÔºå‰ΩÜÂÆåÊàê‰∏ÄÈ°πÊìç‰ΩúÁöÑÊó∂ÂÄôÂøÖÁÑ∂ÈúÄË¶ÅÊõ¥Â§öÁöÑÂÖ•Ê†àÂíåÂá∫Ê†àÊåá‰ª§ÔºåËøôÂêåÊó∂‰πüÂ∞±ÊÑèÂë≥ÁùÄÈúÄË¶Å‰ΩøÁî®Êõ¥Â§öÂàÜÊ¥æÊåá‰ª§Ôºàinstruction dispatchÔºâÊ¨°Êï∞ÂíåÂÜÖÂ≠òËØªÂÜôÊ¨°Êï∞„ÄÇ</p>
<p>Áî±‰∫éÊìç‰ΩúÊï∞ÊòØÂ≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠ÁöÑÔºåÂõ†Ê≠§È¢ëÁπÅÊâßË°åÂÜÖÂ≠òËØªÂÜôÊìç‰ΩúÂøÖÁÑ∂‰ºöÂΩ±ÂìçÊâßË°åÈÄüÂ∫¶„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåHotSpot JVM ÁöÑËÆæËÆ°ËÄÖÊèêÂá∫‰∫ÜÊ†àÈ°∂ÁºìÂ≠òÔºàToSÔºåTop-of-Stack CashingÔºâÊäÄÊúØÔºåÂ∞ÜÊ†àÈ°∂ÂÖÉÁ¥†ÂÖ®ÈÉ®ÁºìÂ≠òÂú®Áâ©ÁêÜ CPU ÁöÑÂØÑÂ≠òÂô®‰∏≠ÔºåÊù•Èôç‰ΩéÂÜÖÂ≠òÁöÑËØªÂÜôÊ¨°Êï∞ÔºåÊèêÂçáÊâßË°åÂºïÊìéÁöÑÊïàÁéá„ÄÇ</p>
<h3 id="Âä®ÊÄÅÈìæÊé•ÔºàDynamic-LinkingÔºâ"><a href="#Âä®ÊÄÅÈìæÊé•ÔºàDynamic-LinkingÔºâ" class="headerlink" title="Âä®ÊÄÅÈìæÊé•ÔºàDynamic LinkingÔºâ"></a>Âä®ÊÄÅÈìæÊé•ÔºàDynamic LinkingÔºâ</h3><p>ÊØè‰∏Ä‰∏™Ê†àÂ∏ßÂÜÖÈÉ®ÈÉΩÂåÖÂê´‰∏Ä‰∏™ÊåáÂêëËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠<strong>ËØ•Ê†àÂ∏ßÊâÄÂ±ûÊñπÊ≥ïÁöÑÂºïÁî®</strong>„ÄÇÂåÖÂê´Ëøô‰∏™ ÂºïÁî®ÁöÑÁõÆÁöÑÂ∞±ÊòØ‰∏∫‰∫ÜÊîØÊåÅÂΩìÂâçÊñπÊ≥ïÁöÑ‰ª£Á†ÅËÉΩÂ§üÂÆûÁé∞Âä®ÊÄÅÈìæÊé•„ÄÇÊØîÂ¶ÇÔºöinvokedynamicÊåá‰ª§„ÄÇ</p>
<p>Âú® Java Ê∫êÊñá‰ª∂Ë¢´ÁºñËØëÂà∞Â≠óËäÇÁ†ÅÊñá‰ª∂‰∏≠Êó∂ÔºåÊâÄÊúâÁöÑÂèòÈáèÂíåÊñπÊ≥ïÂºïÁî®ÈÉΩ‰Ωú‰∏∫Á¨¶Âè∑ÂºïÁî®ÔºàSymbolic ReferenceÔºâ‰øùÂ≠òÂú® class Êñá‰ª∂ÁöÑÂ∏∏ÈáèÊ±†Èáå„ÄÇÊØîÂ¶ÇÔºöÊèèËø∞‰∏Ä‰∏™ÊñπÊ≥ïË∞ÉÁî®‰∫ÜÂÖ∂‰ªñÊñπÊ≥ïÊó∂ÔºåÂ∞±ÊòØÈÄöËøáÂ∏∏ÈáèÊ±†‰∏≠ÊåáÂêëÊñπÊ≥ïÁöÑÁ¨¶Âè∑ÂºïÁî®Êù•Ë°®Á§∫ÁöÑÔºåÈÇ£‰πàÂä®ÊÄÅÈìæÊé•ÁöÑ‰ΩúÁî®Â∞±ÊòØ‰∏∫‰∫ÜÂ∞ÜËøô‰∫õÁ¨¶Âè∑ÂºïÁî®ËΩ¨Êç¢‰∏∫Ë∞ÉÁî®ÊñπÊ≥ïÁöÑÁõ¥Êé•ÂºïÁî®„ÄÇ</p>
<blockquote>
<h4 id="‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂ∏∏ÈáèÊ±†Ôºü"><a href="#‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂ∏∏ÈáèÊ±†Ôºü" class="headerlink" title="‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂ∏∏ÈáèÊ±†Ôºü"></a>‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂ∏∏ÈáèÊ±†Ôºü</h4></blockquote>
<p>Â∏∏ÈáèÊ±†ÁöÑ‰ΩúÁî®Ôºö‰∏∫‰∫ÜÊèê‰æõ‰∏Ä‰∫õÁ¨¶Âè∑ÂíåÂ∏∏ÈáèÔºå‰æø‰∫éÊåá‰ª§ÁöÑËØÜÂà´„ÄÇ</p>
<blockquote>
<h4 id="ÊñπÊ≥ïÁöÑË∞ÉÁî®ÔºàÂä®ÊÄÅÂàÜÊ¥æÂíåÈùôÊÄÅÂàÜÊ¥æÔºâ"><a href="#ÊñπÊ≥ïÁöÑË∞ÉÁî®ÔºàÂä®ÊÄÅÂàÜÊ¥æÂíåÈùôÊÄÅÂàÜÊ¥æÔºâ" class="headerlink" title="ÊñπÊ≥ïÁöÑË∞ÉÁî®ÔºàÂä®ÊÄÅÂàÜÊ¥æÂíåÈùôÊÄÅÂàÜÊ¥æÔºâ"></a>ÊñπÊ≥ïÁöÑË∞ÉÁî®ÔºàÂä®ÊÄÅÂàÜÊ¥æÂíåÈùôÊÄÅÂàÜÊ¥æÔºâ</h4></blockquote>
<p>Âú® JVM ‰∏≠ÔºåÂ∞ÜÁ¨¶Âè∑ÂºïÁî®ËΩ¨Êç¢‰∏∫Ë∞ÉÁî®ÊñπÊ≥ïÁöÑÁõ¥Êé•ÂºïÁî®‰∏éÊñπÊ≥ïÁöÑÁªëÂÆöÊú∫Âà∂Áõ∏ÂÖ≥„ÄÇ</p>
<p><strong>ÈùôÊÄÅÈìæÊé•</strong></p>
<p>ÂΩì‰∏Ä‰∏™Â≠óËäÇÁ†ÅÊñá‰ª∂Ë¢´Ë£ÖËΩΩËøõ JVM ÂÜÖÈÉ®Êó∂ÔºåÂ¶ÇÊûúË¢´Ë∞ÉÁî®ÁöÑ<strong>ÁõÆÊ†áÊñπÊ≥ïÂú®ÁºñËØëÂô®ÂèØÁü•</strong>Ôºå‰∏îËøêË°åÊúü‰øùÊåÅ‰∏çÂèòÊó∂ÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÂ∞ÜË∞ÉÁî®ÊñπÊ≥ïÁöÑÁ¨¶Âè∑ÂºïÁî®ËΩ¨Êç¢‰∏∫Áõ¥Êé•ÂºïÁî®ÁöÑËøáÁ®ãÁß∞‰∏∫ÈùôÊÄÅÈìæÊé•„ÄÇ</p>
<p><strong>Âä®ÊÄÅÈìæÊé•</strong></p>
<p>Â¶ÇÊûúË¢´Ë∞ÉÁî®ÊñπÊ≥ïÂú®ÁºñËØëÂô®Êó†Ê≥ïË¢´Á°ÆÂÆö‰∏ãÊù•Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÂè™ËÉΩÂ§üÂú®Á®ãÂ∫èËøêË°åÊúüÂ∞ÜË∞ÉÁî®ÊñπÊ≥ïÁöÑÁ¨¶Âè∑ÂºïÁî®ËΩ¨Êç¢‰∏∫Áõ¥Êé•ÂºïÁî®ÔºåÁî±‰∫éËøôÁßçÂºïÁî®ËΩ¨Êç¢ËøáÁ®ã‰∏≠ÂÖ∑Â§áÂä®ÊÄÅÊÄßÔºåÂõ†Ê≠§‰πüÂ∞±Ë¢´Áß∞‰∏∫Âä®ÊÄÅÈìæÊé•„ÄÇ</p>
<blockquote>
<h4 id="ÊñπÊ≥ïÁöÑÁªëÂÆöÊú∫Âà∂"><a href="#ÊñπÊ≥ïÁöÑÁªëÂÆöÊú∫Âà∂" class="headerlink" title="ÊñπÊ≥ïÁöÑÁªëÂÆöÊú∫Âà∂"></a>ÊñπÊ≥ïÁöÑÁªëÂÆöÊú∫Âà∂</h4></blockquote>
<p>ÂØπÂ∫îÁöÑÊñπÊ≥ïÁöÑÁªëÂÆöÊú∫Âà∂‰∏∫ÔºöÊó©Ëµ∑ÁªëÂÆöÔºàEarly BindingÔºâÂíåÊôöÊúüÁªëÂÆöÔºàLate BindingÔºâ„ÄÇÁªëÂÆöÊòØ‰∏Ä‰∏™Â≠óÊÆµ„ÄÅÊñπÊ≥ïÊàñËÄÖÁ±ªÂú®Á¨¶Âè∑ÂºïÁî®Ë¢´ÊõøÊç¢‰∏∫Áõ¥Êé•ÂºïÁî®ÁöÑËøáÁ®ãÔºåËøô‰ªÖ‰ªÖÂèëÁîü‰∏ÄÊ¨°„ÄÇ</p>
<p><strong>Êó©ÊúüÁªëÂÆö</strong></p>
<p>ÂíåÈùôÊÄÅÈìæÊé•ÂØπÂ∫î„ÄÇ</p>
<p>Êó©Ëµ∑ÁªëÂÆöÂ∞±ÊòØÊåáË¢´Ë∞ÉÁî®ÁöÑÁõÆÊ†áÊñπÊ≥ïÂ¶ÇÊûúÂú®ÁºñËØëÊúüÂèØÁü•Ôºå‰∏îËøêË°åÊúü‰øùÊåÅ‰∏çÂèòÊó∂ÔºåÂç≥ÂèØÂ∞ÜËøô‰∏™ÊñπÊ≥ï‰∏éÊâÄÂ±ûÁöÑÁ±ªÂûãËøõË°åÁªëÂÆöÔºåËøôÊ†∑‰∏ÄÊù•ÔºåÁî±‰∫éÊòéÁ°Æ‰∫ÜË¢´Ë∞ÉÁî®ÁöÑÁõÆÊ†áÊñπÊ≥ïÁ©∂Á´üÊòØÂì™‰∏Ä‰∏™ÔºåÂõ†Ê≠§‰πüÂ∞±ÂèØ‰ª•‰ΩøÁî®ÈùôÊÄÅÈìæÊé•ÁöÑÊñπÂºèÂ∞ÜÁ¨¶Âè∑ÂºïÁî®ËΩ¨Êç¢‰∏∫Áõ¥Êé•ÂºïÁî®„ÄÇ</p>
<p><strong>ÊôöÊúüÁªëÂÆö</strong></p>
<p>ÂíåÂä®ÊÄÅÈìæÊé•ÂØπÂ∫î„ÄÇ</p>
<p>Â¶ÇÊûúË¢´Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÂú®ÁºñËØëÂô®Êó†Ê≥ïË¢´Á°ÆÂÆö‰∏ãÊù•ÔºåÂè™ËÉΩÂ§üÂú®Á®ãÂ∫èËøêË°åÊúüÊ†πÊçÆÂÆûÈôÖÁöÑÁ±ªÂûãÁªëÂÆöÁõ∏ÂÖ≥ÁöÑÊñπÊ≥ïÔºåËøôÁßçÁªëÂÆöÊñπÂºè‰πüÂ∞±Ë¢´Áß∞‰πã‰∏∫ÊôöÊúüÁªëÂÆö„ÄÇ‰æãÂ¶ÇÂ§öÊÄÅ„ÄÇ</p>
<blockquote>
<h4 id="ËôöÊñπÊ≥ïÂíåÈùûËôöÊñπÊ≥ï"><a href="#ËôöÊñπÊ≥ïÂíåÈùûËôöÊñπÊ≥ï" class="headerlink" title="ËôöÊñπÊ≥ïÂíåÈùûËôöÊñπÊ≥ï"></a>ËôöÊñπÊ≥ïÂíåÈùûËôöÊñπÊ≥ï</h4></blockquote>
<p>Â¶ÇÊûúÊñπÊ≥ïÂú®ÁºñËØëÊúüÂ∞±Á°ÆÂÆö‰∫ÜÂÖ∑‰ΩìÁöÑË∞ÉÁî®ÁâàÊú¨ÔºåËøô‰∏™ÁâàÊú¨Âú®ËøêË°åÊó∂ÊòØ‰∏çÂèØÂèòÁöÑ„ÄÇËøôÊ†∑ÁöÑÊñπÊ≥ïÁß∞‰∏∫ÈùûËôöÊñπÊ≥ï„ÄÇ</p>
<p>ÈùôÊÄÅÊñπÊ≥ï„ÄÅÁßÅÊúâÊñπÊ≥ï„ÄÅfinalÊñπÊ≥ï„ÄÅÂÆû‰æãÊûÑÈÄ†Âô®„ÄÅÁà∂Á±ªÊñπÊ≥ïÈÉΩÊòØÈùûËôöÊñπÊ≥ïÔºåÂÖ∂‰ªñÊñπÊ≥ïÁß∞‰∏∫ËôöÊñπÊ≥ï„ÄÇ</p>
<p>Â≠êÁ±ªÂØπË±°ÁöÑÂ§öÊÄÅÁöÑ‰ΩøÁî®ÂâçÊèêÔºö</p>
<ul>
<li>Á±ªÁöÑÁªßÊâøÂÖ≥Á≥ª</li>
<li>ÊñπÊ≥ïÁöÑÈáçÂÜô</li>
</ul>
<p>ËôöÊãüÊú∫‰∏≠Êèê‰æõ‰∫Ü‰ª•‰∏ãÂá†Êù°ÊñπÊ≥ïË∞ÉÁî®Êåá‰ª§Ôºö</p>
<p>1„ÄÅÊôÆÈÄöË∞ÉÁî®Êåá‰ª§</p>
<ul>
<li><p>invokestaticÔºöË∞ÉÁî®ÈùôÊÄÅÊñπÊ≥ïÔºåËß£ÊûêÈò∂ÊÆµÁ°ÆÂÆöÂîØ‰∏ÄÊñπÊ≥ïÁâàÊú¨„ÄÇÂÆÉÂØπÂ∫îÁöÑÊòØÈùûËôöÊñπÊ≥ï„ÄÇ</p>
</li>
<li><p>invokespecialÔºöË∞ÉÁî®&lt;init&gt;ÊñπÊ≥ï„ÄÅÁßÅÊúâÂèäÁà∂Á±ªÊñπÊ≥ïÔºåËß£ÊûêÈò∂ÊÆµÁ°ÆÂÆöÂîØ‰∏ÄÊñπÊ≥ïÁâàÊú¨„ÄÇÂÆÉÂØπÂ∫îÁöÑÊòØÈùûËôöÊñπÊ≥ï„ÄÇ</p>
</li>
<li><p>invokevirtualÔºöË∞ÉÁî®ÊâÄÊúâËôöÊñπÊ≥ï„ÄÇfinal ‰øÆÈ•∞ÁöÑÊñπÊ≥ïÊòØÈùûËôöÊñπÊ≥ï„ÄÇfinal ‰øÆÈ•∞Èô§Â§ñÁöÑÊñπÊ≥ïÊòØËôöÊñπÊ≥ï„ÄÇ</p>
</li>
<li><p>invokeinterfaceÔºöË∞ÉÁî®Êé•Âè£ÊñπÊ≥ï„ÄÇÂÆÉÂØπÂ∫îÁöÑÊòØËôöÊñπÊ≥ï„ÄÇ</p>
</li>
</ul>
<p>2„ÄÅÂä®ÊÄÅË∞ÉÁî®Êåá‰ª§</p>
<ul>
<li><p>invokedynamicÔºöÂä®ÊÄÅËß£ÊûêÂá∫ÈúÄË¶ÅË∞ÉÁî®ÁöÑÊñπÊ≥ïÔºåÁÑ∂ÂêéÊâßË°å„ÄÇ</p>
</li>
<li><p>ÂâçÂõõÊù°Êåá‰ª§Âõ∫ÂåñÂú®ËôöÊãüÊú∫ÂÜÖÈÉ®ÔºåÊñπÊ≥ïÁöÑË∞ÉÁî®ÊâßË°å‰∏çÂèØ‰∫∫‰∏∫Âπ≤È¢ÑÔºåËÄå invokedynamic Êåá‰ª§ÂàôÊîØÊåÅÁî±Áî®Êà∑Á°ÆÂÆöÊñπÊ≥ïÁâàÊú¨„ÄÇÂÖ∂‰∏≠ invokestatic Êåá‰ª§ Âíåinvokespecial Êåá‰ª§Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÁß∞‰∏∫ÈùûËôöÊñπÊ≥ïÔºåÂÖ∂‰ΩôÁöÑÔºàfinal‰øÆÈ•∞ÁöÑÈô§Â§ñÔºâÁß∞‰∏∫ËôöÊñπÊ≥ï„ÄÇ</p>
</li>
</ul>
<blockquote>
<h4 id="Âä®ÊÄÅÁ±ªÂûãËØ≠Ë®ÄÂíåÈùôÊÄÅÁ±ªÂûãËØ≠Ë®Ä"><a href="#Âä®ÊÄÅÁ±ªÂûãËØ≠Ë®ÄÂíåÈùôÊÄÅÁ±ªÂûãËØ≠Ë®Ä" class="headerlink" title="Âä®ÊÄÅÁ±ªÂûãËØ≠Ë®ÄÂíåÈùôÊÄÅÁ±ªÂûãËØ≠Ë®Ä"></a>Âä®ÊÄÅÁ±ªÂûãËØ≠Ë®ÄÂíåÈùôÊÄÅÁ±ªÂûãËØ≠Ë®Ä</h4></blockquote>
<p>Âä®ÊÄÅÁ±ªÂûãËØ≠Ë®ÄÂíåÈùôÊÄÅÁ±ªÂûãËØ≠Ë®Ä‰∏§ËÄÖÁöÑÂå∫Âà´Âú®‰∫éÂØπÁ±ªÂûãÁöÑÊ£ÄÊü•ÊòØÂú®ÁºñËØëÊúüËøòÊòØÂú®ËøêË°åÊúü„ÄÇ</p>
<ul>
<li>ÈùôÊÄÅÁ±ªÂûãËØ≠Ë®ÄÊª°Ë∂≥ÂâçËÄÖ</li>
<li>Âä®ÊÄÅÁ±ªÂûãËØ≠Ë®ÄÊª°Ë∂≥ÂêéËÄÖ</li>
</ul>
<p>‰æãÂ¶ÇÂú®Java‰∏≠ÔºåString info = ‚Äúhello,world‚Äù;Ê≠£Â∏∏ËøêË°åÔºå‰ΩÜÊòØ‰ΩøÁî® String info  = 10;Â∞±‰ºöÊä•ÈîôÔºåËØ¥ÊòéJavaÊòØÂú®ÁºñËØëÊúüÊ£ÄÊü•ÁöÑ„ÄÇ</p>
<p>Âú®Python ‰∏≠, info = 100; Âú®ËøêË°åÊó∂ÊâçËÉΩÂà§Êñ≠infoÊòØ‰∏Ä‰∏™Êï∞ÂÄºÁ±ªÂûã„ÄÇ</p>
<blockquote>
<h4 id="ÂÖ≥‰∫é-invokeDynamic-Êåá‰ª§"><a href="#ÂÖ≥‰∫é-invokeDynamic-Êåá‰ª§" class="headerlink" title="ÂÖ≥‰∫é invokeDynamic Êåá‰ª§"></a>ÂÖ≥‰∫é <code>invokeDynamic</code> Êåá‰ª§</h4></blockquote>
<p>‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÊîØÊåÅÂä®ÊÄÅÁ±ªÂûãËØ≠Ë®ÄÔºåJava7ÈÄöËøáJSR292ÁªôJVMÂ¢ûÂä†‰∫Ü‰∏ÄÊù°Êñ∞ÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§Ôºöinvokedynamic„ÄÇ‰πãÂêéÔºåJVM‰∏äÈù¢ÁöÑ‰∏Ä‰∫õÂä®ÊÄÅÁ±ªÂûãËØ≠Ë®ÄÔºåÊØîÂ¶ÇGroovyÔºà2.0+ÔºâÂíåJRubyÔºà1.7.0+ÔºâÈÉΩÂºÄÂßãÊîØÊåÅinvokedynamic„ÄÇ‰∏∫Âä®ÊÄÅËØ≠Ë®ÄÈáèË∫´ÂÆöÂà∂ÁöÑinvokedynamicÊåá‰ª§Ôºå‰πüË¢´Áî®Âà∞‰∫ÜJava8ÁöÑLambdaË°®ËææÂºèÔºàJSR335ÔºâÂÆûÁé∞‰∏ä„ÄÇ</p>
<p>‰∏ãÈù¢Ëøô‰∏™ÊñπÊ≥ïÔºåÁºñËØëÂêéÊâìÂºÄÂ≠óËäÇÁ†ÅÊñá‰ª∂ÂèØ‰ª•ÁúãÂà∞ <code>invokeDynamic</code> Êåá‰ª§„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InvokeDynamicTest</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">x</span> <span class="operator">=</span> () -&gt; {</span><br><span class="line">            <span class="comment">//System.out.println("Hello, World!"); </span></span><br><span class="line">        };</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<h4 id="ÊñπÊ≥ïÈáçÂÜôÁöÑÊú¨Ë¥®"><a href="#ÊñπÊ≥ïÈáçÂÜôÁöÑÊú¨Ë¥®" class="headerlink" title="ÊñπÊ≥ïÈáçÂÜôÁöÑÊú¨Ë¥®"></a>ÊñπÊ≥ïÈáçÂÜôÁöÑÊú¨Ë¥®</h4></blockquote>
<ul>
<li><p>ÊâæÂà∞Êìç‰ΩúÊï∞Ê†àÈ°∂ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊâÄÊâßË°åÁöÑÂØπË±°ÁöÑÂÆûÈôÖÁ±ªÂûãËÆ∞‰ΩúC„ÄÇ</p>
</li>
<li><p>Â¶ÇÊûúÂú®Á±ªÂûãC‰∏≠ÊâæÂà∞‰∏éÂ∏∏Èáè‰∏≠ÁöÑÊèèËø∞Á¨¶Âè∑ÁÆÄÂçïÂêçÁß∞ÈÉΩÁõ∏Á¨¶ÁöÑÊñπÊ≥ïÔºåÂàôËøõË°åËÆøÈóÆÊùÉÈôêÊ†°È™åÔºåÂ¶ÇÊûúÊ†°È™åÈÄöËøáÔºåÂàôËøîÂõûËøô‰∏™ÊñπÊ≥ïÁöÑÁõ¥Êé•ÂºïÁî®ÔºåÊü•ÊâæËøáÁ®ãÁªìÊùüÔºõÂ¶ÇÊûú‰∏çÈÄöËøáÔºåÂàôËøîÂõû <code>java.lang.IllegalAccessError</code> ÂºÇÂ∏∏„ÄÇ</p>
</li>
<li><p>Âê¶ÂàôÔºåÊåâÁÖßÁªßÊâøÂÖ≥Á≥ª‰ªé‰∏ãÂæÄ‰∏ä‰æùÊ¨°ÂØπCÁöÑÂêÑ‰∏™Áà∂Á±ªËøõË°åÁ¨¨2Ê≠•ÁöÑÊêúÁ¥¢ÂíåÈ™åËØÅËøáÁ®ã„ÄÇ</p>
</li>
<li><p>Â¶ÇÊûúÂßãÁªàÊ≤°ÊúâÊâæÂà∞ÂêàÈÄÇÁöÑÊñπÊ≥ïÔºåÂàôÊäõÂá∫ <code>java.lang.AbstractMethodError</code> ÂºÇÂ∏∏„ÄÇ<code>IllegalAccessError</code>Ôºö</p>
<p>Á®ãÂ∫èËØïÂõæËÆøÈóÆÊàñ‰øÆÊîπ‰∏Ä‰∏™Â±ûÊÄßÊàñË∞ÉÁî®‰∏Ä‰∏™ÊñπÊ≥ïÔºåËøô‰∏™Â±ûÊÄßÊàñÊñπÊ≥ïÔºå‰Ω†Ê≤°ÊúâÊùÉÈôêËÆøÈóÆ„ÄÇ‰∏ÄËà¨ÁöÑËøô‰∏™‰ºöÂºïÊìéÁºñËØëÂô®ÂºÇÂ∏∏ÔºåËøô‰∏™ÈîôËØØÂ¶ÇÊûúÂèëÁîüÂú®ËøêË°åÊó∂ÔºåÂ∞±ËØ¥Êòé‰∏Ä‰∏™Á±ªÂèëÁîü‰∫Ü‰∏çÂÖºÂÆπÁöÑÊîπÂèò„ÄÇ</p>
</li>
</ul>
<blockquote>
<h4 id="ËôöÊñπÊ≥ïË°®"><a href="#ËôöÊñπÊ≥ïË°®" class="headerlink" title="ËôöÊñπÊ≥ïË°®"></a>ËôöÊñπÊ≥ïË°®</h4></blockquote>
<ul>
<li><p>Âú®Èù¢ÂêëÂØπË±°ÁöÑÁºñÁ®ã‰∏≠Ôºå‰ºöÂæàÈ¢ëÁπÅÁöÑ‰ΩøÁî®Âà∞Âä®ÊÄÅÂàÜÊ¥æÔºåÂ¶ÇÊûúÂú®ÊØèÊ¨°Âä®ÊÄÅÂàÜÊ¥æÁöÑËøáÁ®ã‰∏≠ÈÉΩË¶ÅÈáçÊñ∞Âú®Á±ªÁöÑÊñπÊ≥ïÂÖÉÊï∞ÊçÆ‰∏≠ÊêúÁ¥¢ÂêàÈÄÇÁöÑÁõÆÊ†áÁöÑËØùÂ∞±ÂèØËÉΩÂΩ±ÂìçÂà∞ÊâßË°åÊïàÁéá„ÄÇÂõ†Ê≠§Ôºå‰∏∫‰∫ÜÊèêÈ´òÊÄßËÉΩÔºåJVMÈááÁî®Âú®Á±ªÁöÑÊñπÊ≥ïÂå∫Âª∫Á´ã‰∏Ä‰∏™ËôöÊñπÊ≥ïË°®(virtual method table) (ÈùûËôöÊñπÊ≥ï‰∏ç‰ºöÂá∫Áé∞Âú®Ë°®‰∏≠)Êù•ÂÆûÁé∞„ÄÇ‰ΩøÁî®Á¥¢ÂºïË°®Êù•‰ª£ÊõøÊü•Êâæ„ÄÇ</p>
</li>
<li><p>ÊØè‰∏™Á±ª‰∏≠ÈÉΩÊúâ‰∏Ä‰∏™ËôöÊñπÊ≥ïË°®ÔºåË°®‰∏≠Â≠òÊîæÁùÄÂêÑ‰∏™ÊñπÊ≥ïÁöÑÂÆûÈôÖÂÖ•Âè£„ÄÇ</p>
</li>
<li><p>ÈÇ£‰πàËôöÊñπÊ≥ïË°®‰ªÄ‰πàÊó∂ÂÄôË¢´ÂàõÂª∫Ôºü</p>
</li>
</ul>
<p>ËôöÊñπÊ≥ïË°®‰ºöÂú®Á±ªÂä†ËΩΩÁöÑÈìæÊé•Èò∂ÊÆµË¢´ÂàõÂª∫ÂíåÂºÄÂßãÂàùÂßãÂåñÔºåÁ±ªÁöÑÂèòÈáèÂàùÂßãÂÄºÂáÜÂ§áÂÆåÊàê‰ª•ÂêéÔºåJVM‰ºöÊääÁ±ªÁöÑÊñπÊ≥ïË°®‰πüÂàùÂßãÂåñÂÆåÊØï„ÄÇ</p>
<p>ÂõûÈ°æ‰∏Ä‰∏ãÈìæÊé•Èò∂ÊÆµÔºöÈìæÊé•Èò∂ÊÆµÂàÜ‰∏∫È™åËØÅ„ÄÅÂáÜÂ§á„ÄÅËß£Êûê‰∏â‰∏™Èò∂ÊÆµÔºåÂú®Ëß£ÊûêÈò∂ÊÆµÊó∂Ôºå‰ºöÂ∞ÜÂ∏∏ÈáèÊ±†ÂÜÖÁöÑÁ¨¶Âè∑ÂºïÁî®ËΩ¨Êç¢‰∏∫Áõ¥Êé•ÂºïÁî®ÁöÑËøáÁ®ã„ÄÇ</p>
<h3 id="ÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÔºàReturn-AddressÔºâ"><a href="#ÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÔºàReturn-AddressÔºâ" class="headerlink" title="ÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÔºàReturn AddressÔºâ"></a>ÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÔºà<code>Return Address</code>Ôºâ</h3><p>ÊñπÊ≥ïËøîÂõûÂú∞ÂùÄ„ÄÅÂä®ÊÄÅÈìæÊé•„ÄÅ‰∏Ä‰∫õÈôÑÂä†‰ø°ÊÅØÁªüÁß∞‰∏∫Â∏ßÊï∞ÊçÆÂå∫„ÄÇ</p>
<ul>
<li>Â≠òÊîæË∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑ pc ÂØÑÂ≠òÂô®ÁöÑÂÄºÔºàPCÂØÑÂ≠òÂô®Â≠òÊîæÁöÑÊòØ‰∏ã‰∏ÄÊù°Ë¶ÅÊâßË°åÁöÑÂÄºÔºâ</li>
<li>‰∏Ä‰∏™ÊñπÊ≥ïÁöÑÁªìÊùüÔºåÊúâ‰∏§ÁßçÊñπÂºèÔºö<ul>
<li>Ê≠£Â∏∏ÊâßË°åÂÆåÊàê</li>
<li>Âá∫Áé∞Êú™Â§ÑÁêÜÁöÑÂºÇÂ∏∏ÔºåÈùûÊ≠£Â∏∏ÈÄÄÂá∫</li>
</ul>
</li>
<li>Êó†ËÆ∫ÈÄöËøáÂì™ÁßçÊñπÂºèÈÄÄÂá∫ÔºåÂú®ÊñπÊ≥ïÈÄÄÂá∫ÂêéÈÉΩËøîÂõûÂà∞ËØ•ÊñπÊ≥ïË¢´Ë∞ÉÁî®ÁöÑ‰ΩçÁΩÆ„ÄÇÊñπÊ≥ïÊ≠£Â∏∏ÈÄÄÂá∫Êó∂ÔºåË∞ÉÁî®ËÄÖÁöÑ pc ËÆ°Êï∞Âô®ÁöÑÂÄº‰Ωú‰∏∫ËøîÂõûÂú∞ÂùÄÔºåÂç≥Ë∞ÉÁî®ËØ•ÊñπÊ≥ïÁöÑÊåá‰ª§ÁöÑ‰∏ã‰∏ÄÊù°Êåá‰ª§ÁöÑÂú∞ÂùÄ„ÄÇËÄåÈÄöËøáÂºÇÂ∏∏ÈÄÄÂá∫ÁöÑÔºåËøîÂõûÂú∞ÂùÄÊòØË¶ÅÈÄöËøáÂºÇÂ∏∏Ë°®Êù•Á°ÆÂÆöÔºåÊ†àÂ∏ß‰∏≠‰∏ÄËà¨‰∏ç‰ºö‰øùÂ≠òËøôÈÉ®ÂàÜ‰ø°ÊÅØ„ÄÇ</li>
<li>Êú¨Ë¥®‰∏äÔºåÊñπÊ≥ïÁöÑÈÄÄÂá∫Â∞±ÊòØÂΩìÂâçÊ†àÂ∏ßÂá∫Ê†àÁöÑËøáÁ®ã„ÄÇÊ≠§Êó∂ÔºåÈúÄË¶ÅÊÅ¢Â§ç‰∏äÂ±ÇÊñπÊ≥ïÁöÑÂ±ÄÈÉ®ÂèòÈáèË°®„ÄÅÊìç‰ΩúÊï∞Ê†à„ÄÅÂ∞ÜËøîÂõûÂÄºÂéãÂÖ•Ë∞ÉÁî®ËÄÖÊ†àÂ∏ßÁöÑÊìç‰ΩúÊï∞Ê†à„ÄÅËÆæÁΩÆ PC ÂØÑÂ≠òÂô®ÂÄºÁ≠âÔºåËÆ©Ë∞ÉÁî®ËÄÖÊñπÊ≥ïÁªßÁª≠ÊâßË°å‰∏ãÂéª„ÄÇ</li>
<li>Ê≠£Â∏∏ÂÆåÊàêÈÄÄÂá∫ÂíåÂºÇÂ∏∏ÈÄÄÂá∫ÁöÑÂå∫Âà´Âú®‰∫éÔºöÈÄöËøáÂºÇÂ∏∏ÂÆåÊàêÂá∫Âè£ÈÄÄÂá∫ÁöÑ‰∏ç‰ºöÁªô‰ªñÁöÑ‰∏äÂ±ÇË∞ÉÁî®ËÄÖ‰∫ßÁîü‰ªª‰ΩïÁöÑËøîÂõûÂÄº</li>
</ul>
<h3 id="‰∏Ä‰∫õÈôÑÂä†‰ø°ÊÅØÔºàÂèØÈÄâÔºâ"><a href="#‰∏Ä‰∫õÈôÑÂä†‰ø°ÊÅØÔºàÂèØÈÄâÔºâ" class="headerlink" title="‰∏Ä‰∫õÈôÑÂä†‰ø°ÊÅØÔºàÂèØÈÄâÔºâ"></a>‰∏Ä‰∫õÈôÑÂä†‰ø°ÊÅØÔºàÂèØÈÄâÔºâ</h3><p>Ê†àÂ∏ß‰∏≠ËøòÂÖÅËÆ∏Êê∫Â∏¶‰∏éJVMÂÆûÁé∞Áõ∏ÂÖ≥ÁöÑ‰∏Ä‰∫õÈôÑÂä†‰ø°ÊÅØÔºå‰æãÂ¶ÇÂØπÁ®ãÂ∫èË∞ÉËØïÊîØÊåÅÁöÑ‰ø°ÊÅØ„ÄÇ</p>
<h2 id="Ê†àÁöÑÁõ∏ÂÖ≥Èù¢ËØïÈ¢ò"><a href="#Ê†àÁöÑÁõ∏ÂÖ≥Èù¢ËØïÈ¢ò" class="headerlink" title="Ê†àÁöÑÁõ∏ÂÖ≥Èù¢ËØïÈ¢ò"></a>Ê†àÁöÑÁõ∏ÂÖ≥Èù¢ËØïÈ¢ò</h2><h3 id="‰∏æ‰æãÊ†àÊ∫¢Âá∫ÁöÑÊÉÖÂÜµÔºàStackOverflowErrorÔºâ"><a href="#‰∏æ‰æãÊ†àÊ∫¢Âá∫ÁöÑÊÉÖÂÜµÔºàStackOverflowErrorÔºâ" class="headerlink" title="‰∏æ‰æãÊ†àÊ∫¢Âá∫ÁöÑÊÉÖÂÜµÔºàStackOverflowErrorÔºâ"></a>‰∏æ‰æãÊ†àÊ∫¢Âá∫ÁöÑÊÉÖÂÜµÔºàStackOverflowErrorÔºâ</h3><p>ÈÄöËøá -Xss ËÆæÁΩÆÊ†àÁöÑÂ§ßÂ∞èÂêéÔºå‰æãÂ¶Ç‰∏Ä‰∏™ÊñπÊ≥ïÈÄíÂΩíË∞ÉÁî®ÔºåËÉΩË∞ÉÂ§öÂ∞ëÊ¨°Â∞±ÂèñÂÜ≥‰∫éÊ†àÁöÑÂ§ßÂ∞è„ÄÇÊ†àÁ©∫Èó¥‰∏çË∂≥Êó∂ÔºåÂ∞±‰ºöÂá∫Áé∞OOM„ÄÇË∞ÉÊï¥Ê†àÂ§ßÂ∞èÔºåÂ∞±ËÉΩ‰øùËØÅ‰∏çÂá∫Áé∞Ê∫¢Âá∫Âêó„ÄÇ</p>
<h3 id="Ë∞ÉÊï¥Ê†àÂ§ßÂ∞èÔºåÂ∞±ËÉΩ‰øùËØÅ‰∏çÂá∫Áé∞Ê∫¢Âá∫Âêó"><a href="#Ë∞ÉÊï¥Ê†àÂ§ßÂ∞èÔºåÂ∞±ËÉΩ‰øùËØÅ‰∏çÂá∫Áé∞Ê∫¢Âá∫Âêó" class="headerlink" title="Ë∞ÉÊï¥Ê†àÂ§ßÂ∞èÔºåÂ∞±ËÉΩ‰øùËØÅ‰∏çÂá∫Áé∞Ê∫¢Âá∫Âêó"></a>Ë∞ÉÊï¥Ê†àÂ§ßÂ∞èÔºåÂ∞±ËÉΩ‰øùËØÅ‰∏çÂá∫Áé∞Ê∫¢Âá∫Âêó</h3><p>‰∏çËÉΩ„ÄÇÂ¶ÇÊûúÊòØÊ≠ªÂæ™ÁéØÔºå‰∏çÁÆ°Ê†àÁöÑÂ§ßÂ∞èÊòØÂ§öÂ∞ëÈÉΩ‰ºöÂá∫Áé∞Ê∫¢Âá∫„ÄÇ</p>
<h3 id="ÂàÜÈÖçÁöÑÊ†àÂÜÖÂ≠òË∂äÂ§ßË∂äÂ•ΩÂêó"><a href="#ÂàÜÈÖçÁöÑÊ†àÂÜÖÂ≠òË∂äÂ§ßË∂äÂ•ΩÂêó" class="headerlink" title="ÂàÜÈÖçÁöÑÊ†àÂÜÖÂ≠òË∂äÂ§ßË∂äÂ•ΩÂêó"></a>ÂàÜÈÖçÁöÑÊ†àÂÜÖÂ≠òË∂äÂ§ßË∂äÂ•ΩÂêó</h3><p>‰∏çÊòØ„ÄÇÊï¥‰∏™ËôöÊãüÊú∫ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÊòØÊúâÈôêÁöÑÔºåÊ†àÂèòÂ§ß‰∫ÜÔºåÂÜÖÂ≠ò‰∏≠ÁöÑÂâ©‰ΩôÁ©∫Èó¥‰ºöÂèòÂ∞èÔºåÁîöËá≥Âá∫Áé∞OOM„ÄÇ</p>
<h3 id="ÂûÉÂúæÂõûÊî∂ÊòØÂê¶‰ºöÊ∂âÂèäÂà∞ËôöÊãüÊú∫Ê†à"><a href="#ÂûÉÂúæÂõûÊî∂ÊòØÂê¶‰ºöÊ∂âÂèäÂà∞ËôöÊãüÊú∫Ê†à" class="headerlink" title="ÂûÉÂúæÂõûÊî∂ÊòØÂê¶‰ºöÊ∂âÂèäÂà∞ËôöÊãüÊú∫Ê†à"></a>ÂûÉÂúæÂõûÊî∂ÊòØÂê¶‰ºöÊ∂âÂèäÂà∞ËôöÊãüÊú∫Ê†à</h3><p>‰∏ç‰ºö„ÄÇËôöÊãüÊú∫Ê†àÊòØ‰∏™Ê†àÁªìÊûÑÔºåÂè™Â≠òÂú®ËøõÊ†àÂíåÂá∫Ê†à‰∏§‰∏™Êìç‰Ωú„ÄÇ</p>
<table>
<thead>
<tr>
<th>ÁªìÊûÑÂêçÁß∞</th>
<th>ÂèØËÉΩError</th>
<th>ÂèØËÉΩGC</th>
</tr>
</thead>
<tbody><tr>
<td>Á®ãÂ∫èËÆ°Êï∞Âô®</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td>Êú¨Âú∞ÊñπÊ≥ïÊ†à</td>
<td>x</td>
<td>‚àö</td>
</tr>
<tr>
<td>ËôöÊãüÊú∫Ê†à</td>
<td>‚àö</td>
<td>x</td>
</tr>
</tbody></table>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>TLAB(Thread Local Allocation Buffer)</title>
    <url>/p/5bb29d6f.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Âü∫Êú¨Ê¶ÇÂøµ"><a href="#Âü∫Êú¨Ê¶ÇÂøµ" class="headerlink" title="Âü∫Êú¨Ê¶ÇÂøµ"></a>Âü∫Êú¨Ê¶ÇÂøµ</h2><p>Â†ÜÂå∫ÊòØ‰∏ÄÂùóÁ∫øÁ®ãÂÖ±‰∫´Âå∫ÂüüÔºåÈùûÁ∫øÁ®ãÂÆâÂÖ®„ÄÇÂ¶ÇÊûúÈúÄË¶Å‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÔºåÈúÄË¶ÅÂÄüÂä©ÈîÅÔºå‰ΩÜ‰ºöÂΩ±ÂìçÂÜÖÂ≠òÁöÑÂàÜÈÖçÈÄüÂ∫¶„ÄÇ</p>
<p>Â§öÁ∫øÁ®ãÂêåÊó∂ÂàÜÈÖçÂÜÖÂ≠òÊó∂Ôºå‰ΩøÁî® TLAB ÂèØ‰ª•ÈÅøÂÖç‰∏ÄÁ≥ªÂàóÁöÑÈùûÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÔºåÂêåÊó∂ËøòËÉΩÊèêÂçáÂÜÖÂ≠òÂàÜÈÖçÁöÑÂêûÂêêÈáèÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Â∞ÜËøôÁßçÂÜÖÂ≠òÂàÜÈÖçÊñπÂºèÁß∞‰πã‰∏∫<strong>Âø´ÈÄüÂàÜÈÖçÁ≠ñÁï•</strong>„ÄÇ</p>
<h2 id="‰ªÄ‰πàÊòØTLABÔºü"><a href="#‰ªÄ‰πàÊòØTLABÔºü" class="headerlink" title="‰ªÄ‰πàÊòØTLABÔºü"></a>‰ªÄ‰πàÊòØTLABÔºü</h2><p>‰ªéÂÜÖÂ≠òÊ®°ÂûãÁöÑËßíÂ∫¶ÔºåÂú®EdenÂå∫‰∏≠ÂàíÂàÜÁöÑ‰∏Ä‰∏™Âå∫ÂüüÂè´ÂÅöTLABÔºàTLAB ÂÖ®Áß∞ Thread Local Allocation BufferÔºâÔºåÊú¨Âú∞ÂàÜÈÖçÁºìÂ≠òÂå∫ÔºåÊòØJVM‰∏∫ÊØè‰∏™Á∫øÁ®ãÂàÜÈÖç‰∫Ü‰∏Ä‰∏™ÁßÅÊúâÁöÑÁºìÂ≠òÂå∫ÂüüÔºåÂç†Áî®ÂÜÖÂ≠òÊòØÊï¥‰∏™EdenÁöÑ1%ÔºåÂç†Áî®Á©∫Èó¥ÈùûÂ∏∏Â∞è„ÄÇ</p>
<h2 id="ÂÆûÈôÖÂ∫îÁî®TLAB"><a href="#ÂÆûÈôÖÂ∫îÁî®TLAB" class="headerlink" title="ÂÆûÈôÖÂ∫îÁî®TLAB"></a>ÂÆûÈôÖÂ∫îÁî®TLAB</h2><p>Â∞ΩÁÆ°‰∏çÊòØÊâÄÊúâÂØπË±°ÂÆû‰æãÈÉΩËÉΩÂ§üÂú®TLAB‰∏≠ÊàêÂäüÂàÜÈÖçÂÜÖÂ≠òÔºàÂõ†‰∏∫TLABÂÜÖÂ≠òÂæàÂ∞èÔºâÔºå‰ΩÜJVMÁ°ÆÂÆûÊòØÂ∞ÜTLAB‰Ωú‰∏∫ÂÜÖÂ≠òÂàÜÈÖçÁöÑÈ¶ñÈÄâ„ÄÇ</p>
<p>ÂΩìÁÑ∂Ôºå‰πüÂèØ‰ª•ÈÄöËøáÂèÇÊï∞ <code>-XX:TLABWasteTargetPercent</code>Êù•ËÆæÁΩÆTLABÁ©∫Èó¥ÊâÄÂç†Áî® Eden Á©∫Èó¥ÁöÑÁôæÂàÜÊØîÂ§ßÂ∞è„ÄÇ</p>
<p>‰∏ÄÊó¶ÂØπË±°Âú®TLABÁ©∫Èó¥ÂàÜÈÖçÂ§±Ë¥•Êó∂Ôºà‰æãÂ¶ÇÁ©∫Èó¥‰∏çË∂≥ÔºâÔºåJVMÂ∞±‰ºöÂ∞ùËØïÈÄöËøá‰ΩøÁî®Âä†ÈîÅÊú∫Âà∂Êù•Á°Æ‰øùÊï∞ÊçÆÊìç‰ΩúÁöÑÂéüÂ≠êÊÄßÔºå‰ªéËÄåÁõ¥Êé•Âú®EdenÁ©∫Èó¥‰∏≠ÂàÜÈÖçÂÜÖÂ≠ò„ÄÇ</p>
<p><img src="/p/5bb29d6f/JVM-TLAB.png" alt="JVM-TLAB"></p>
<p>Áé∞Âú®new‰∏Ä‰∏™ÂØπË±°ÔºåÁÑ∂ÂêéTLABÂàÜÈÖçÔºåÂ¶ÇÊûúTLABÁ©∫Èó¥Â§üÁî®ÔºåÈÇ£‰πàÂ∞±ÂØπË±°ÂÆû‰æãÂåñÔºåÂ¶ÇÊûú‰∏çÂ§üÁî®Â∞±Âè™ËÉΩÁî®EdenÂÖ¨ÂÖ±ÁöÑÈÉ®ÂàÜÔºåÂ¶ÇÊûúËøò‰∏çÂ§üÁî®ÔºåÈÇ£‰πàÂ∞±‰ºöËß¶ÂèëGC„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMÂπ¥ËΩª‰ª£‰∏éËÄÅÂπ¥‰ª£</title>
    <url>/p/5ecdfc3e.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Â†ÜÂå∫ÂàíÂàÜ"><a href="#Â†ÜÂå∫ÂàíÂàÜ" class="headerlink" title="Â†ÜÂå∫ÂàíÂàÜ"></a>Â†ÜÂå∫ÂàíÂàÜ</h2><p>JavaÂ†ÜÂå∫ÂàÜ‰∏∫Âπ¥ËΩª‰ª£ÔºàYoung GenÔºâ‰∏éËÄÅÂπ¥‰ª£ÔºàOld GenÔºâ„ÄÇÂ≠òÂÇ®Âú®JVM‰∏≠ÁöÑJavaÂØπË±°ÂèØ‰ª•Ë¢´ÂàÜ‰∏∫‰∏§Á±ªÔºö</p>
<p>1„ÄÅÁîüÂëΩÂë®ÊúüËæÉÁü≠ÁöÑÁû¨Êó∂ÂØπË±°ÔºåËøôÁ±ªÂØπË±°ÁöÑÂàõÂª∫ÂíåÊ∂à‰∫°ÈÉΩÈùûÂ∏∏ËøÖÈÄüÔºàÂ¶ÇËΩØÂºïÁî®ÂØπË±°Ôºå‰∏ÄÊó¶GCÂ∞±‰ºöË¢´ÂõûÊî∂Ôºâ„ÄÇ</p>
<p>2„ÄÅÁîüÂëΩÂë®ÊúüËæÉÈïøÔºåÂú®Êüê‰∫õÊûÅÁ´ØÁöÑÊÉÖÂÜµ‰∏ãËøòËÉΩÂ§ü‰∏éJVMÁöÑÁîüÂëΩÂë®Êúü‰øùÊåÅ‰∏ÄÁõ¥„ÄÇ</p>
<p>ÂÖ∂‰∏≠Âπ¥ËΩª‰ª£ÂèàÂèØ‰ª•ÂàíÂàÜ‰∏∫EdenÂå∫„ÄÅSurvivor0Âå∫ÔºàfromÂå∫Ôºâ„ÄÅSurvivor1Âå∫ÔºàtoÂå∫Ôºâ„ÄÇ</p>
<p><img src="/p/5ecdfc3e/JVM-%E5%B9%B4%E8%BD%BB%E4%BB%A3%E4%B8%8E%E8%80%81%E5%B9%B4%E4%BB%A3.png" alt="image-20211008224055196"></p>
<h2 id="ÂèÇÊï∞Ë∞ÉÈÖç"><a href="#ÂèÇÊï∞Ë∞ÉÈÖç" class="headerlink" title="ÂèÇÊï∞Ë∞ÉÈÖç"></a>ÂèÇÊï∞Ë∞ÉÈÖç</h2><p><img src="/p/5ecdfc3e/JVM-%E5%A0%86%E5%8C%BA%E5%8F%82%E6%95%B0%E8%B0%83%E9%85%8D.png" alt="img"></p>
<p>ÈÖçÁΩÆÊñ∞Áîü‰ª£‰∏éËÄÅÂπ¥‰ª£Âú®Â†ÜÁªìÊûÑÁöÑÂç†ÊØîÔºö</p>
<p>1„ÄÅÈªòËÆ§ <code>-XX:NewRatio=2</code>ÔºåË°®Á§∫Êñ∞Áîü‰ª£Âç† 1ÔºåËÄÅÂπ¥‰ª£Âç† 2ÔºåÊñ∞Áîü‰ª£Âç†Êï¥‰∏™Â†ÜÁöÑ 1/2„ÄÇ</p>
<p>Â¶Ç‰ΩïÁü•ÈÅìÈªòËÆ§ÊòØ1:2 ÁöÑÂë¢ÔºåÂèØ‰ª•ÈÄöËøáJVMÂÆòÁΩëÊü•Ëøô‰∏™Êåá‰ª§Ôºå‰πüÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§Êù•Êü•ÁúãÔºö</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">jps</span><br><span class="line">jinfo -flag NewRatio [ËøõÁ®ãID]</span><br></pre></td></tr></tbody></table></figure>

<p>2„ÄÅÂèØ‰ª•‰øÆÊîπ <code>-XX:NewRatio=4</code>ÔºåË°®Á§∫Êñ∞Áîü‰ª£Âç†1ÔºåËÄÅÂπ¥‰ª£Âç†4ÔºåÊñ∞Áîü‰ª£Âç†Êï¥‰∏™Â†ÜÁöÑ 1/5„ÄÇ</p>
<blockquote>
<p>‰∏ÄËà¨Êù•ËØ¥ÔºåÊòØ‰∏ç‰ºöË∞ÉÂä®Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÁöÑÊØî‰æãÔºåÈÇ£‰πà‰ªÄ‰πàÊó∂ÂÄô‰ºöË∞ÉËøô‰∏™ÊØî‰æãÂë¢Ôºü</p>
</blockquote>
<p>ÊòéÁ°ÆÁü•ÈÅìÂ§ßÂ§öÊï∞ÂØπË±°ÁöÑÁîüÂëΩÂë®ÊúüÊØîËæÉÈïøÊó∂ÔºåÂ∞±Âª∫ËÆÆÂ∞ÜËÄÅÂπ¥‰ª£Ë∞ÉÂ§ß‰∏Ä‰∫õÔºåÂèØ‰ª•Â§öÂ≠òÂÇ®‰∏Ä‰∫õÂØπË±°„ÄÇ</p>
<h2 id="ÂÖ≥‰∫éEden„ÄÅS0‰∏éS1ÁöÑÁ©∫Èó¥ÊØî‰æãÈóÆÈ¢ò"><a href="#ÂÖ≥‰∫éEden„ÄÅS0‰∏éS1ÁöÑÁ©∫Èó¥ÊØî‰æãÈóÆÈ¢ò" class="headerlink" title="ÂÖ≥‰∫éEden„ÄÅS0‰∏éS1ÁöÑÁ©∫Èó¥ÊØî‰æãÈóÆÈ¢ò"></a>ÂÖ≥‰∫éEden„ÄÅS0‰∏éS1ÁöÑÁ©∫Èó¥ÊØî‰æãÈóÆÈ¢ò</h2><p>1„ÄÅÂú® HotSpot ‰∏≠ÔºåEdenÁ©∫Èó¥ÂíåÂè¶Â§ñ‰∏§‰∏™ Survivor Á©∫Èó¥Áº∫ÁúÅÊâÄÂç†ÁöÑÊØî‰æãÊòØ 8:1:1„ÄÇ</p>
<blockquote>
<p>Âú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Ôºå<code>Eden:S0:S1=8:1:1</code>ÊòØÁúüÁöÑÂêóÔºü</p>
</blockquote>
<p>Êü•ÁúãÈªòËÆ§ÁöÑÊØî‰æãÔºö</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">jps</span><br><span class="line">jinfo -flag SurvivorRatio [ËøõÁ®ãID]</span><br><span class="line"><span class="comment"># Êü•ËØ¢ÁªìÊûú‰∏∫ -XX:SurvivorRatio=8</span></span><br></pre></td></tr></tbody></table></figure>

<p>Êü•ËØ¢ÁªìÊûúÁ°ÆÂÆûÊòØ8:1:1Ôºå‰ΩÜÈÄöËøá <code>jvisualvm</code> Êü•ÁúãÂà∞ÁöÑÂÆûÈôÖÊÉÖÂÜµÂç¥ÊòØ 6:1:1 ÔºåÂéüÂõ†ÊòØÂõ†‰∏∫JVMÊúâËá™ÈÄÇÂ∫îÁöÑÂÜÖÂ≠òÂàÜÈÖçÁ≠ñÁï•ÔºåÈÄöËøáËÆæÁΩÆÂèÇÊï∞ <code>-XX:-UseAdaptiveSizePolicy -XX:SurvivorRatio=8</code> Êù•ÂÖ≥Èó≠Ëá™ÈÄÇÂ∫îÁ≠ñÁï•ÔºåÂπ∂Ë∞ÉÊï¥Á©∫Èó¥ÊØî‰æã‰∏∫8:1:1„ÄÇ</p>
<p>2„ÄÅÂá†‰πéÊâÄÊúâÁöÑJavaÂØπË±°ÈÉΩÊòØÂú®EdenÂå∫Ë¢´newÂá∫Êù•ÁöÑÔºåÂ¶ÇÊûúÂØπË±°ÈùûÂ∏∏Â§ßÔºå‰ª•Ëá≥‰∫éEdenË£Ö‰∏ç‰∏ãÔºåÂ∞±‰ºöÂú®ËÄÅÂπ¥‰ª£newÂá∫Êù•„ÄÇ</p>
<p>3„ÄÅÁªùÂ§ßÈÉ®ÂàÜÁöÑJavaÂØπË±°ÁöÑÈîÄÊØÅÈÉΩÊòØÂú®EdenÂå∫ÔºàÊñ∞Áîü‰ª£ÔºâËøõË°åÔºåIBMÂÖ¨Âè∏ÁöÑ‰∏ìÈó®Á†îÁ©∂Ë°®ÊòéÔºåÊñ∞Áîü‰ª£‰∏≠80%ÁöÑÂØπË±°ÈÉΩÊòØ‚ÄúÊúùÁîüÂ§ïÊ≠ª‚ÄùÁöÑ„ÄÇ</p>
<p>4„ÄÅÂèØ‰ª•‰ΩøÁî®ÈÄâÈ°π‚Äú-Xmn‚Äù ËÆæÁΩÆEdenÂå∫ÔºàÊñ∞Áîü‰ª£ÔºâÁöÑÊúÄÂ§ßÂÜÖÂ≠òÂ§ßÂ∞èÔºåËøô‰∏™ÂèÇÊï∞‰∏ÄËà¨‰ΩøÁî®ÈªòËÆ§ÂÄºÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>Â∏∏ËßÅMQ</title>
    <url>/p/3a45e88c.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="ActiveMQ"><a href="#ActiveMQ" class="headerlink" title="ActiveMQ"></a>ActiveMQ</h2><p>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Êé•ÂèóÂπ∂ËΩ¨ÂèëÊ∂àÊÅØ„ÄÇ‰Ω†ÂèØ‰ª•ÊääÂÆÉÂΩìÂÅö‰∏Ä‰∏™Âø´ÈÄíÁ´ôÁÇπÔºåÂΩì‰Ω†Ë¶ÅÂèëÈÄÅ‰∏Ä‰∏™ÂåÖË£πÊó∂Ôºå‰Ω†Êää‰Ω†ÁöÑÂåÖË£πÊîæÂà∞Âø´ÈÄíÁ´ôÔºåÂø´ÈÄíÂëòÊúÄÁªà‰ºöÊää‰Ω†ÁöÑÂø´ÈÄíÈÄÅÂà∞Êî∂‰ª∂‰∫∫ÈÇ£ÈáåÔºåÊåâÁÖßËøôÁßçÈÄªËæëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Â∞±ÊòØ‰∏Ä‰∏™Âø´ÈÄíÁ´ôÔºå‰∏Ä‰∏™Âø´ÈÄíÂëòÂ∏Æ‰Ω†‰º†ÈÄíÂø´‰ª∂„ÄÇÂÆÉ‰∏éÂø´ÈÄíÁ´ôÁöÑ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÔºåÂÆÉ‰∏çÂ§ÑÁêÜÂø´‰ª∂ËÄåÊòØÊé•Êî∂ÔºåÂ≠òÂÇ®ÂíåËΩ¨ÂèëÊ∂àÊÅØÊï∞ÊçÆ„ÄÇ</p>
<p><strong>‰ºòÁÇπ</strong></p>
<p>ÂçïÊú∫ÂêûÂêêÈáè‰∏áÁ∫ßÔºåÊó∂ÊïàÊÄßmsÁ∫ßÔºåÂèØÁî®ÊÄßÈ´òÔºåÂü∫‰∫é‰∏ª‰ªéÊû∂ÊûÑÂÆûÁé∞È´òÂèØÁî®ÊÄßÔºåÊ∂àÊÅØÂèØÈù†ÊÄßËæÉ‰ΩéÁöÑÊ¶ÇÁéá‰∏¢Â§±Êï∞ÊçÆ„ÄÇ</p>
<p><strong>Áº∫ÁÇπ</strong></p>
<p>ÂÆòÊñπÁ§æÂå∫Áé∞Âú®ÂØπActiveMQ 5.xÁª¥Êä§Ë∂äÊù•Ë∂äÂ∞ëÔºåÈ´òÂêûÂêêÈáèÂú∫ÊôØËæÉÂ∞ë‰ΩøÁî®„ÄÇ</p>
<h2 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h2><p>Â§ßÊï∞ÊçÆÁöÑÊùÄÊâãÈîèÔºåË∞àÂà∞Â§ßÊï∞ÊçÆÈ¢ÜÂüüÂÜÖÁöÑÊ∂àÊÅØ‰º†ËæìÔºåÂàôÁªï‰∏çÂºÄKafkaÔºåËøôÊ¨æ‰∏∫Â§ßÊï∞ÊçÆËÄåÁîüÁöÑÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Ôºå‰ª•ÂÖ∂Áôæ‰∏áÁ∫ßTPSÁöÑÂêûÂêêÈáèÂêçÂ£∞Â§ßÂô™ÔºåËøÖÈÄüÊàê‰∏∫Â§ßÊï∞ÊçÆÈ¢ÜÂüüÁöÑÂÆ†ÂÑøÔºåÂú®Êï∞ÊçÆÈááÈõÜ„ÄÅ‰º†Ëæì„ÄÅÂ≠òÂÇ®ÁöÑËøáÁ®ã‰∏≠ÂèëÊå•ÁùÄ‰∏æË∂≥ËΩªÈáçÁöÑ‰ΩúÁî®„ÄÇÁõÆÂâçÂ∑≤ÁªèË¢´LinkedInÔºåUber, Twitter, NetflixÁ≠âÂ§ßÂÖ¨Âè∏ÊâÄÈááÁ∫≥„ÄÇ</p>
<p><strong>‰ºòÁÇπ</strong></p>
<p>ÊÄßËÉΩÂçìË∂äÔºåÂçïÊú∫ÂÜôÂÖ•TPSÁ∫¶Âú®Áôæ‰∏áÊù°/ÁßíÔºåÊúÄÂ§ßÁöÑ‰ºòÁÇπÔºåÂ∞±ÊòØÂêûÂêêÈáèÈ´ò„ÄÇÊó∂ÊïàÊÄßmsÁ∫ßÂèØÁî®ÊÄßÈùûÂ∏∏È´òÔºåkafkaÊòØÂàÜÂ∏ÉÂºèÁöÑÔºå‰∏Ä‰∏™Êï∞ÊçÆÂ§ö‰∏™ÂâØÊú¨ÔºåÂ∞ëÊï∞Êú∫Âô®ÂÆïÊú∫Ôºå‰∏ç‰ºö‰∏¢Â§±Êï∞ÊçÆÔºå‰∏ç‰ºöÂØºËá¥‰∏çÂèØÁî®,Ê∂àË¥πËÄÖÈááÁî®PullÊñπÂºèËé∑ÂèñÊ∂àÊÅØ, Ê∂àÊÅØÊúâÂ∫è, ÈÄöËøáÊéßÂà∂ËÉΩÂ§ü‰øùËØÅÊâÄÊúâÊ∂àÊÅØË¢´Ê∂àË¥π‰∏î‰ªÖË¢´Ê∂àË¥π‰∏ÄÊ¨°;Êúâ‰ºòÁßÄÁöÑÁ¨¨‰∏âÊñπKafka WebÁÆ°ÁêÜÁïåÈù¢Kafka-ManagerÔºõÂú®Êó•ÂøóÈ¢ÜÂüüÊØîËæÉÊàêÁÜüÔºåË¢´Â§öÂÆ∂ÂÖ¨Âè∏ÂíåÂ§ö‰∏™ÂºÄÊ∫êÈ°πÁõÆ‰ΩøÁî®ÔºõÂäüËÉΩÊîØÊåÅÔºöÂäüËÉΩËæÉ‰∏∫ÁÆÄÂçïÔºå‰∏ªË¶ÅÊîØÊåÅÁÆÄÂçïÁöÑMQÂäüËÉΩÔºåÂú®Â§ßÊï∞ÊçÆÈ¢ÜÂüüÁöÑÂÆûÊó∂ËÆ°ÁÆó‰ª•ÂèäÊó•ÂøóÈááÈõÜË¢´Â§ßËßÑÊ®°‰ΩøÁî®„ÄÇ</p>
<p><strong>Áº∫ÁÇπ</strong></p>
<p>KafkaÂçïÊú∫Ë∂ÖËøá64‰∏™ÈòüÂàó/ÂàÜÂå∫ÔºåLoad‰ºöÂèëÁîüÊòéÊòæÁöÑÈ£ôÈ´òÁé∞Ë±°ÔºåÈòüÂàóË∂äÂ§öÔºåloadË∂äÈ´òÔºåÂèëÈÄÅÊ∂àÊÅØÂìçÂ∫îÊó∂Èó¥ÂèòÈïøÔºå‰ΩøÁî®Áü≠ËΩÆËØ¢ÊñπÂºèÔºåÂÆûÊó∂ÊÄßÂèñÂÜ≥‰∫éËΩÆËØ¢Èó¥ÈöîÊó∂Èó¥ÔºåÊ∂àË¥πÂ§±Ë¥•‰∏çÊîØÊåÅÈáçËØïÔºõÊîØÊåÅÊ∂àÊÅØÈ°∫Â∫èÔºå‰ΩÜÊòØ‰∏ÄÂè∞‰ª£ÁêÜÂÆïÊú∫ÂêéÔºåÂ∞±‰ºö‰∫ßÁîüÊ∂àÊÅØ‰π±Â∫èÔºåÁ§æÂå∫Êõ¥Êñ∞ËæÉÊÖ¢Ôºõ</p>
<h2 id="RocketMQ"><a href="#RocketMQ" class="headerlink" title="RocketMQ"></a>RocketMQ</h2><p>RocketMQ Âá∫Ëá™ÈòøÈáåÂ∑¥Â∑¥ÁöÑÂºÄÊ∫ê‰∫ßÂìÅÔºåÁî®JavaËØ≠Ë®ÄÂÆûÁé∞ÔºåÂú®ËÆæËÆ°Êó∂ÂèÇËÄÉ‰∫ÜKafkaÔºåÂπ∂ÂÅöÂá∫‰∫ÜËá™Â∑±ÁöÑ‰∏Ä‰∫õÊîπËøõ„ÄÇË¢´ÈòøÈáåÂ∑¥Â∑¥ÂπøÊ≥õÂ∫îÁî®Âú®ËÆ¢ÂçïÔºå‰∫§ÊòìÔºåÂÖÖÂÄºÔºåÊµÅËÆ°ÁÆóÔºåÊ∂àÊÅØÊé®ÈÄÅÔºåÊó•ÂøóÊµÅÂºèÂ§ÑÁêÜÔºåbinglogÂàÜÂèëÁ≠âÂú∫ÊôØ„ÄÇ</p>
<p><strong>‰ºòÁÇπ</strong></p>
<p>ÂçïÊú∫ÂêûÂêêÈáèÂçÅ‰∏áÁ∫ß,ÂèØÁî®ÊÄßÈùûÂ∏∏È´òÔºåÂàÜÂ∏ÉÂºèÊû∂ÊûÑÔºåÊ∂àÊÅØÂèØ‰ª•ÂÅöÂà∞0‰∏¢Â§±ÔºåMQ ÂäüËÉΩËæÉ‰∏∫ÂÆåÂñÑÔºåËøòÊòØÂàÜÂ∏ÉÂºèÁöÑÔºåÊâ©Â±ïÊÄßÂ•ΩÔºåÊîØÊåÅ10‰∫øÁ∫ßÂà´ÁöÑÊ∂àÊÅØÂ†ÜÁßØÔºå‰∏ç‰ºöÂõ†‰∏∫Â†ÜÁßØÂØºËá¥ÊÄßËÉΩ‰∏ãÈôç,Ê∫êÁ†ÅÊòØ Java Êàë‰ª¨ÂèØ‰ª•Ëá™Â∑±ÈòÖËØªÊ∫êÁ†ÅÔºåÂÆöÂà∂Ëá™Â∑±ÂÖ¨Âè∏ÁöÑ MQ„ÄÇ</p>
<p><strong>Áº∫ÁÇπ</strong></p>
<p>ÊîØÊåÅÁöÑÂÆ¢Êà∑Á´ØËØ≠Ë®Ä‰∏çÂ§öÔºåÁõÆÂâçÊòØJavaÂèäc++ÔºåÂÖ∂‰∏≠c++‰∏çÊàêÁÜüÔºõÁ§æÂå∫Ê¥ªË∑ÉÂ∫¶‰∏ÄËà¨ÔºåÊ≤°ÊúâÂú®MQÊ†∏ÂøÉ‰∏≠ÂéªÂÆûÁé∞JMSÁ≠âÊé•Âè£ÔºåÊúâ‰∫õÁ≥ªÁªüË¶ÅËøÅÁßªÈúÄË¶Å‰øÆÊîπÂ§ßÈáè‰ª£Á†Å„ÄÇ</p>
<h2 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h2><p>2007Âπ¥ÂèëÂ∏ÉÔºåÊòØ‰∏Ä‰∏™Âú®AMQP(È´òÁ∫ßÊ∂àÊÅØÈòüÂàóÂçèËÆÆ)Âü∫Á°Ä‰∏äÂÆåÊàêÁöÑÔºåÂèØÂ§çÁî®ÁöÑ‰ºÅ‰∏öÊ∂àÊÅØÁ≥ªÁªüÔºåÊòØÂΩìÂâçÊúÄ‰∏ªÊµÅÁöÑÊ∂àÊÅØ‰∏≠Èó¥‰ª∂‰πã‰∏Ä„ÄÇ</p>
<p><strong>‰ºòÁÇπ</strong></p>
<p>Áî±‰∫éerlangËØ≠Ë®ÄÁöÑÈ´òÂπ∂ÂèëÁâπÊÄßÔºåÊÄßËÉΩËæÉÂ•ΩÔºõÂêûÂêêÈáèÂà∞‰∏áÁ∫ßÔºåMQÂäüËÉΩÊØîËæÉÂÆåÂ§á,ÂÅ•Â£Æ„ÄÅÁ®≥ÂÆö„ÄÅÊòìÁî®„ÄÅË∑®Âπ≥Âè∞„ÄÅÊîØÊåÅÂ§öÁßçËØ≠Ë®ÄÂ¶ÇÔºöPython„ÄÅRuby„ÄÅ.NET„ÄÅJava„ÄÅJMS„ÄÅC„ÄÅPHP„ÄÅActionScript„ÄÅXMPP„ÄÅSTOMP Á≠âÔºåÊîØÊåÅAJAXÊñáÊ°£ÈΩêÂÖ®ÔºõÂºÄÊ∫êÊèê‰æõÁöÑÁÆ°ÁêÜÁïåÈù¢ÈùûÂ∏∏Ê£íÔºåÁî®Ëµ∑Êù•ÂæàÂ•ΩÁî®,Á§æÂå∫Ê¥ªË∑ÉÂ∫¶È´òÔºõÊõ¥Êñ∞È¢ëÁéáÁõ∏ÂΩìÈ´ò„ÄÇ</p>
<p><strong>Áº∫ÁÇπ</strong></p>
<p>ÊÄßËÉΩÊØîKafkaÂ∑ÆËøú‰∫Ü„ÄÇerlang ËØ≠Ë®Ä„ÄÇ</p>
<h2 id="Â¶Ç‰ΩïÊ≠£Á°ÆÈÄâÊã©‰ΩøÁî®Âì™‰∏™MQÔºü"><a href="#Â¶Ç‰ΩïÊ≠£Á°ÆÈÄâÊã©‰ΩøÁî®Âì™‰∏™MQÔºü" class="headerlink" title="Â¶Ç‰ΩïÊ≠£Á°ÆÈÄâÊã©‰ΩøÁî®Âì™‰∏™MQÔºü"></a>Â¶Ç‰ΩïÊ≠£Á°ÆÈÄâÊã©‰ΩøÁî®Âì™‰∏™MQÔºü</h2><p><strong>Kafka</strong></p>
<p>Kafka‰∏ªË¶ÅÁâπÁÇπÊòØÂü∫‰∫éPullÁöÑÊ®°ÂºèÊù•Â§ÑÁêÜÊ∂àÊÅØÊ∂àË¥πÔºåËøΩÊ±ÇÈ´òÂêûÂêêÈáèÔºå‰∏ÄÂºÄÂßãÁöÑÁõÆÁöÑÂ∞±ÊòØÁî®‰∫éÊó•ÂøóÊî∂ÈõÜÂíå‰º†ËæìÔºåÈÄÇÂêà‰∫ßÁîü<strong>Â§ßÈáèÊï∞ÊçÆ</strong>ÁöÑ‰∫íËÅîÁΩëÊúçÂä°ÁöÑÊï∞ÊçÆÊî∂ÈõÜ‰∏öÂä°„ÄÇ<strong>Â§ßÂûãÂÖ¨Âè∏</strong>Âª∫ËÆÆÂèØ‰ª•ÈÄâÁî®ÔºåÂ¶ÇÊûúÊúâ<strong>Êó•ÂøóÈááÈõÜ</strong>ÂäüËÉΩÔºåËÇØÂÆöÊòØÈ¶ñÈÄâ kafka‰∫Ü„ÄÇ</p>
<p><strong>RocketMQ</strong></p>
<p>Â§©Áîü‰∏∫<strong>ÈáëËûç‰∫íËÅîÁΩë</strong>È¢ÜÂüüËÄåÁîüÔºåÂØπ‰∫éÂèØÈù†ÊÄßË¶ÅÊ±ÇÂæàÈ´òÁöÑÂú∫ÊôØÔºåÂ∞§ÂÖ∂ÊòØÁîµÂïÜÈáåÈù¢ÁöÑËÆ¢ÂçïÊâ£Ê¨æÔºå‰ª•Âèä‰∏öÂä°ÂâäÂ≥∞ÔºåÂú®Â§ßÈáè‰∫§ÊòìÊ∂åÂÖ•Êó∂ÔºåÂêéÁ´ØÂèØËÉΩÊó†Ê≥ïÂèäÊó∂Â§ÑÁêÜÁöÑÊÉÖÂÜµ„ÄÇRoketMQÂú®Á®≥ÂÆöÊÄß‰∏äÂèØËÉΩÊõ¥ÂÄºÂæó‰ø°ËµñÔºåËøô‰∫õ‰∏öÂä°Âú∫ÊôØÂú®ÈòøÈáåÂèå11Â∑≤ÁªèÁªèÂéÜ‰∫ÜÂ§öÊ¨°ËÄÉÈ™åÔºåÂ¶ÇÊûú‰Ω†ÁöÑ‰∏öÂä°Êúâ‰∏äËø∞Âπ∂ÂèëÂú∫ÊôØÔºåÂª∫ËÆÆÂèØ‰ª•ÈÄâÊã©RocketMQ„ÄÇ</p>
<p><strong>RabbitMQ</strong></p>
<p>ÁªìÂêàerlangËØ≠Ë®ÄÊú¨Ë∫´ÁöÑÂπ∂Âèë‰ºòÂäøÔºåÊÄßËÉΩÂ•Ω<strong>Êó∂ÊïàÊÄßÂæÆÁßíÁ∫ß</strong>ÔºåÁ§æÂå∫Ê¥ªË∑ÉÂ∫¶‰πüÊØîËæÉÈ´òÔºåÁÆ°ÁêÜÁïåÈù¢Áî®Ëµ∑Êù•ÂçÅÂàÜÊñπ‰æøÔºåÂ¶ÇÊûú‰Ω†ÁöÑ<strong>Êï∞ÊçÆÈáèÊ≤°ÊúâÈÇ£‰πàÂ§ß</strong>Ôºå‰∏≠Â∞èÂûãÂÖ¨Âè∏‰ºòÂÖàÈÄâÊã©ÂäüËÉΩÊØîËæÉÂÆåÂ§áÁöÑRabbitMQ„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
      </tags>
  </entry>
  <entry>
    <title>MQÁöÑÁõ∏ÂÖ≥Ê¶ÇÂøµ</title>
    <url>/p/e13d4c3.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="‰ªÄ‰πàÊòØMQÔºü"><a href="#‰ªÄ‰πàÊòØMQÔºü" class="headerlink" title="‰ªÄ‰πàÊòØMQÔºü"></a>‰ªÄ‰πàÊòØMQÔºü</h2><p>MQ(messagequeue)Ôºå‰ªéÂ≠óÈù¢ÊÑèÊÄù‰∏äÁúãÔºåÊú¨Ë¥®ÊòØ‰∏™ÈòüÂàóÔºåFIFOÂÖàÂÖ•ÂÖàÂá∫ÔºåÂè™‰∏çËøáÈòüÂàó‰∏≠Â≠òÊîæÁöÑÂÜÖÂÆπÊòØmessageËÄåÂ∑≤ÔºåËøòÊòØ‰∏ÄÁßçË∑®ËøõÁ®ãÁöÑÈÄö‰ø°Êú∫Âà∂ÔºåÁî®‰∫é‰∏ä‰∏ãÊ∏∏‰º†ÈÄíÊ∂àÊÅØ„ÄÇÂú®‰∫íËÅîÁΩëÊû∂ÊûÑ‰∏≠ÔºåMQÊòØ‰∏ÄÁßçÈùûÂ∏∏Â∏∏ËßÅÁöÑ‰∏ä‰∏ãÊ∏∏‚ÄúÈÄªËæëËß£ËÄ¶+Áâ©ÁêÜËß£ËÄ¶‚ÄùÁöÑÊ∂àÊÅØÈÄö‰ø°ÊúçÂä°„ÄÇ‰ΩøÁî®‰∫ÜMQ‰πãÂêéÔºåÊ∂àÊÅØÂèëÈÄÅ‰∏äÊ∏∏Âè™ÈúÄË¶Å‰æùËµñMQÔºå‰∏çÁî®‰æùËµñÂÖ∂‰ªñÊúçÂä°„ÄÇ</p>
<p>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Êé•ÂèóÂπ∂ËΩ¨ÂèëÊ∂àÊÅØ„ÄÇ‰Ω†ÂèØ‰ª•ÊääÂÆÉÂΩìÂÅö‰∏Ä‰∏™Âø´ÈÄíÁ´ôÁÇπÔºåÂΩì‰Ω†Ë¶ÅÂèëÈÄÅ‰∏Ä‰∏™ÂåÖË£πÊó∂Ôºå‰Ω†Êää‰Ω†ÁöÑÂåÖË£πÊîæÂà∞Âø´ÈÄíÁ´ôÔºåÂø´ÈÄíÂëòÊúÄÁªà‰ºöÊää‰Ω†ÁöÑÂø´ÈÄíÈÄÅÂà∞Êî∂‰ª∂‰∫∫ÈÇ£ÈáåÔºåÊåâÁÖßËøôÁßçÈÄªËæëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Â∞±ÊòØ‰∏Ä‰∏™Âø´ÈÄíÁ´ôÔºå‰∏Ä‰∏™Âø´ÈÄíÂëòÂ∏Æ‰Ω†‰º†ÈÄíÂø´‰ª∂„ÄÇÂÆÉ‰∏éÂø´ÈÄíÁ´ôÁöÑ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÔºåÂÆÉ‰∏çÂ§ÑÁêÜÂø´‰ª∂ËÄåÊòØÊé•Êî∂ÔºåÂ≠òÂÇ®ÂíåËΩ¨ÂèëÊ∂àÊÅØÊï∞ÊçÆ„ÄÇ</p>
<h2 id="Â∫îÁî®Âú∫ÊôØ"><a href="#Â∫îÁî®Âú∫ÊôØ" class="headerlink" title="Â∫îÁî®Âú∫ÊôØ"></a>Â∫îÁî®Âú∫ÊôØ</h2><p>1„ÄÅÁî®Êà∑Ê≥®ÂÜåÁöÑÊ°à‰æã„ÄÇÁî®Êà∑Ê≥®ÂÜå -&gt; Ê≥®ÂÜå‰ø°ÊÅØÂÜôÂÖ•Êï∞ÊçÆÂ∫ìÊàêÂäü(ÈúÄ50ms) -&gt; ÂèëÈÄÅÈÇÆ‰ª∂(ÈúÄ50ms) -&gt; ÂèëÈÄÅÁü≠‰ø°(ÈúÄ50ms) ÔºåËøôÊï¥‰∏™Êìç‰ΩúÂêåÊ≠•ÊâßË°åÁöÑËØùÔºåÈÇ£‰πàÂìçÂ∫îÈúÄË¶Å150msÔºõÂ¶ÇÊûúÊîπ‰∏∫ÂºÇÊ≠•ÊâßË°åÔºåÂèëÈÄÅÈÇÆ‰ª∂ÂíåÁü≠‰ø°Â§öÁ∫øÁ®ãÂéªÊâßË°åÔºåÂºÄÂêØÁ∫øÁ®ãÁöÑÊó∂Èó¥ÈúÄË¶Å50msÔºåÈÇ£‰πàÂìçÂ∫îÊó∂Èó¥Â∞±ÈúÄË¶Å100msÔºå‰∏îÂèëÈÄÅÊòØÂê¶ÊàêÂäüÊòØ‰∏çÂ•ΩÂéªÁõ¥Êé•Âà§Êñ≠ÁöÑÔºõÂ¶ÇÊûú‰ΩøÁî®Ê∂àÊÅØÈòüÂàóÔºåÁî®Êà∑Ê≥®ÂÜå -&gt; Ê≥®ÂÜå‰ø°ÊÅØÂÜôÂÖ•Êï∞ÊçÆÂ∫ìÊàêÂäü(ÈúÄ50ms)  -&gt; ÂÜôÂÖ•Ê∂àÊÅØÈòüÂàó(5ms) -&gt; ÂºÇÊ≠•ÂèëÈÄÅÈÇÆ‰ª∂ÂíåÁü≠‰ø°ÔºåÊï¥‰∏™ÂìçÂ∫îÊó∂Èó¥Âè™ÈúÄË¶Å55msÔºåÂÖ∂‰ªñÊúçÂä°Âú®‰ªéÊ∂àÊÅØÈòüÂàóÊãøÂà∞Áî®Êà∑Ê≥®ÂÜåÊàêÂäüÁöÑÊ∂àÊÅØÔºåÈöèÂêéÂèëÈÄÅÈÇÆ‰ª∂ÂíåÁü≠‰ø°„ÄÇ</p>
<p>2„ÄÅÂ∫îÁî®Ëß£ËÄ¶„ÄÇ‰ª•‰∏ãËÆ¢Âçï‰∏∫‰æãÔºåÁî®Êà∑‰∏ã‰∫Ü‰∏Ä‰∏™ËÆ¢ÂçïÂêéÔºåËÆ¢ÂçïÁ≥ªÁªü‰ºöË∞ÉÁî®Â∫ìÂ≠òÁ≥ªÁªüËøõË°åÂáèÂ∫ìÂ≠òÔºå‰∏ãËÆ¢ÂçïÊó∂‰º†‰∫Ü3‰∏™ÂèÇÊï∞ÔºåË∞ÉÁî®Â∫ìÂ≠òÁ≥ªÁªüAPIÊó∂‰º†‰∫Ü5‰∏™ÂèÇÊï∞ÔºåËøô‰∏™ÂèÇÊï∞‰∏çÂèòËøòÂ•ΩÔºå‰ΩÜÊòØËÆ¢ÂçïÁ≥ªÁªüÂíåÂ∫ìÂ≠òÁ≥ªÁªüÁªèÂ∏∏‰ºöÂçáÁ∫ßÔºåÂáèÂ∫ìÂ≠òÁöÑÊé•Âè£‰ºöÁªèÂ∏∏ÂèëÁîüÂèòÂåñÔºåÈÇ£‰πàËÆ¢ÂçïÁ≥ªÁªüÂ∞±ÂøÖÈ°ªÊù•‰øÆÊîπÂØπÂ∫îË∞ÉÁî®‰ª£Á†ÅÂπ∂ËøõË°åÈáçÊñ∞ÈÉ®ÁΩ≤„ÄÇËøôÊ†∑‰ºöÈùûÂ∏∏ÁöÑÈ∫ªÁÉ¶ÔºåÂºïÂÖ•Ê∂àÊÅØÈòü‰πãÂêéÔºåËÆ¢ÂçïÁ≥ªÁªüÂè™ÈúÄË¶ÅÊääÂê´Êúâ‚ÄùË∞Å‰π∞‰∫ÜÂ§öÂ∞ë‰∏™‰ªÄ‰πàÂïÜÂìÅ‚ÄùÂÜôÂÖ•Ê∂àÊÅØÈòüÂàóÂç≥ÂèØÔºå‰∏çÁî®ÂÖ≥ÂøÉÂ∫ìÂ≠òÁ≥ªÁªüÁöÑÊé•Âè£ÔºåÂ∫ìÂ≠òÁ≥ªÁªüÂÆûÊó∂ËÆ¢ÈòÖÊ∂àÊÅØÈòüÂàóÔºåÂè™Ë¶ÅÊúâÊ∂àÊÅØÔºåÂ∫ìÂ≠òÁ≥ªÁªüÂ∞±‰ºöÊî∂Âà∞Ëøô‰∏™Ê∂àÊÅØÔºåÂÆåÊàê‰∏öÂä°ÈÄªËæë„ÄÇ</p>
<p>3„ÄÅÊµÅÈáèÊéßÂà∂ÔºàÂâäÂ≥∞Ôºâ„ÄÇ‰ª•ÁßíÊùÄÂïÜÂìÅ‰∏∫‰æãÔºåÂú®ÂºÄÂêØÁßíÊùÄÁöÑ‰∏ÄÁû¨Èó¥ÂÅáËÆæÊúâ100‰∏á‰∏™ËØ∑Ê±ÇÔºåÂ∞±ÁÆóÊúçÂä°Âô®ËÉΩÂ§üÊé•Êî∂Ëøô‰πàÂ§öËØ∑Ê±ÇÔºåË¶ÅÊâßË°å‰∏ãËÆ¢ÂçïÁ≠â‰∏ÄÁ≥ªÂàó‰∏öÂä°‰ª£Á†ÅÔºåÂêéÂè∞Â∞±‰ºöÈùûÂ∏∏ÊÖ¢ÔºåÂØºËá¥ËØ∑Ê±Ç‰∏ÄÁõ¥ÈòªÂ°ûÁõ¥Âà∞ÊúçÂä°Âô®ÂÆïÊú∫„ÄÇ‰ΩøÁî®Ê∂àÊÅØÈòüÂàó‰πãÂêéÔºåÂ§ßÈáèËØ∑Ê±ÇËøõÊù•ÂêéÔºåÂÖ®ÈÉ®ÂÜôÂÖ•Ê∂àÊÅØÈòüÂàóÔºåÂÜôÂÖ•ÊàêÂäü‰πãÂêéÁõ¥Êé•ÂìçÂ∫îÁî®Êà∑ÔºåÂÖ∂ÂÆÉÊúçÂä°ÂÜçÊå®‰∏™Êå®‰∏™ÁöÑ‰ªéÊ∂àÊÅØÈòüÂàó‰∏≠ÂèñÂá∫Ê∂àÊÅØÂêéÊâßË°å‰∏öÂä°‰ª£Á†ÅÔºåÂ∞±ÁÆóÂêéÂè∞Â§ÑÁêÜËÉΩÂäõÂè™Êúâ1sÂ§ÑÁêÜ‰∏Ä‰∏™ÔºåÂ§ß‰∏ç‰∫ÜËä±Ë¥π100‰∏áÁßíÂ∞±Ë°å‰∫ÜÔºåÊ∞∏Ëøú‰∏ç‰ºöËÆ©Êú∫Âô®ÂÆïÊú∫„ÄÇ</p>
<p>4„ÄÅÂºÇÊ≠•Â§ÑÁêÜ„ÄÇÊúâ‰∫õÊúçÂä°Èó¥Ë∞ÉÁî®ÊòØÂºÇÊ≠•ÁöÑÔºå‰æãÂ¶ÇAË∞ÉÁî®BÔºåBÈúÄË¶ÅËä±Ë¥πÂæàÈïøÊó∂Èó¥ÊâßË°åÔºå‰ΩÜÊòØAÈúÄË¶ÅÁü•ÈÅìB‰ªÄ‰πàÊó∂ÂÄôÂèØ‰ª•ÊâßË°åÂÆåÔºå‰ª•Ââç‰∏ÄËà¨Êúâ‰∏§ÁßçÊñπÂºèÔºåAËøá‰∏ÄÊÆµÊó∂Èó¥ÂéªË∞ÉÁî®BÁöÑÊü•ËØ¢apiÊü•ËØ¢„ÄÇÊàñËÄÖAÊèê‰æõ‰∏Ä‰∏™callback apiÔºåBÊâßË°åÂÆå‰πãÂêéË∞ÉÁî®apiÈÄöÁü•AÊúçÂä°„ÄÇËøô‰∏§ÁßçÊñπÂºèÈÉΩ‰∏çÊòØÂæà‰ºòÈõÖÔºå‰ΩøÁî®Ê∂àÊÅØÊÄªÁ∫øÔºåÂèØ‰ª•ÂæàÊñπ‰æøËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåAË∞ÉÁî®BÊúçÂä°ÂêéÔºåÂè™ÈúÄË¶ÅÁõëÂê¨BÂ§ÑÁêÜÂÆåÊàêÁöÑÊ∂àÊÅØÔºåÂΩìBÂ§ÑÁêÜÂÆåÊàêÂêéÔºå‰ºöÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØÁªôMQÔºåMQ‰ºöÂ∞ÜÊ≠§Ê∂àÊÅØËΩ¨ÂèëÁªôAÊúçÂä°„ÄÇËøôÊ†∑AÊúçÂä°Êó¢‰∏çÁî®Âæ™ÁéØË∞ÉÁî®BÁöÑÊü•ËØ¢apiÔºå‰πü‰∏çÁî®Êèê‰æõcallback api„ÄÇÂêåÊ†∑BÊúçÂä°‰πü‰∏çÁî®ÂÅöËøô‰∫õÊìç‰Ωú„ÄÇAÊúçÂä°ËøòËÉΩÂèäÊó∂ÁöÑÂæóÂà∞ÂºÇÊ≠•Â§ÑÁêÜÊàêÂäüÁöÑÊ∂àÊÅØ„ÄÇ</p>
<p><img src="/p/e13d4c3/MQ-%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86%E5%AE%8C%E6%88%90%E9%80%9A%E7%9F%A5%E6%B5%81%E7%A8%8B.png" alt="image-20210619134102517"></p>
<h2 id="MQÊòØÊ∂àÊÅØÈÄö‰ø°ÁöÑÊ®°Âûã"><a href="#MQÊòØÊ∂àÊÅØÈÄö‰ø°ÁöÑÊ®°Âûã" class="headerlink" title="MQÊòØÊ∂àÊÅØÈÄö‰ø°ÁöÑÊ®°Âûã"></a>MQÊòØÊ∂àÊÅØÈÄö‰ø°ÁöÑÊ®°Âûã</h2><p>ÂÆûÁé∞MQÁöÑÂ§ßËá¥Êúâ‰∏§Áßç‰∏ªÊµÅÊñπÂºèÔºöAMQP„ÄÅJMS„ÄÇ</p>
<h2 id="AMQP"><a href="#AMQP" class="headerlink" title="AMQP"></a>AMQP</h2><p>AMQPÈ´òÁ∫ßÊ∂àÊÅØÈòüÂàóÂçèËÆÆÔºåÊòØ‰∏Ä‰∏™<strong>ËøõÁ®ãÈó¥‰º†ÈÄíÂºÇÊ≠•Ê∂àÊÅØÁöÑÁΩëÁªúÂçèËÆÆ</strong>ÔºåÊõ¥ÂáÜÁ°ÆÁöÑËØ¥ÊòØ‰∏ÄÁßçbinary wire-level protocolÔºàÈìæÊé•ÂçèËÆÆÔºâ„ÄÇËøôÊòØÂÖ∂ÂíåJMSÁöÑÊú¨Ë¥®Â∑ÆÂà´ÔºåAMQP‰∏ç‰ªéAPIÂ±ÇËøõË°åÈôêÂÆöÔºåËÄåÊòØÁõ¥Êé•ÂÆö‰πâÁΩëÁªú‰∫§Êç¢ÁöÑÊï∞ÊçÆÊ†ºÂºè„ÄÇ</p>
<h2 id="JMS"><a href="#JMS" class="headerlink" title="JMS"></a>JMS</h2><p>JMSÂç≥JavaÊ∂àÊÅØÊúçÂä°ÔºàJavaMessage ServiceÔºâÂ∫îÁî®Á®ãÂ∫èÊé•Âè£ÔºåÊòØ‰∏Ä‰∏™JavaÂπ≥Âè∞‰∏≠ÂÖ≥‰∫éÈù¢ÂêëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÔºàMOMÔºâÁöÑAPIÔºåÁî®‰∫éÂú®‰∏§‰∏™Â∫îÁî®Á®ãÂ∫è‰πãÈó¥ÔºåÊàñÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ÂèëÈÄÅÊ∂àÊÅØÔºåËøõË°åÂºÇÊ≠•ÈÄö‰ø°„ÄÇ</p>
<h2 id="AMQP-‰∏é-JMS-Âå∫Âà´"><a href="#AMQP-‰∏é-JMS-Âå∫Âà´" class="headerlink" title="AMQP ‰∏é JMS Âå∫Âà´"></a>AMQP ‰∏é JMS Âå∫Âà´</h2><p>JMSÊòØÂÆö‰πâ‰∫ÜÁªü‰∏ÄÁöÑÊé•Âè£ÔºåÊù•ÂØπÊ∂àÊÅØÊìç‰ΩúËøõË°åÁªü‰∏ÄÔºõAMQPÊòØÈÄöËøáËßÑÂÆöÂçèËÆÆÊù•Áªü‰∏ÄÊï∞ÊçÆ‰∫§‰∫íÁöÑÊ†ºÂºè„ÄÇ</p>
<p>JMSÈôêÂÆö‰∫ÜÂøÖÈ°ª‰ΩøÁî®JavaËØ≠Ë®ÄÔºõAMQPÂè™ÊòØÂçèËÆÆÔºå‰∏çËßÑÂÆöÂÆûÁé∞ÊñπÂºèÔºåÂõ†Ê≠§ÊòØË∑®ËØ≠Ë®ÄÁöÑ„ÄÇ</p>
<p>JMSËßÑÂÆö‰∫Ü‰∏§ÁßçÊ∂àÊÅØÊ®°ÂºèÔºõËÄåAMQPÁöÑÊ∂àÊÅØÊ®°ÂºèÊõ¥Âä†‰∏∞ÂØå„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÂ§á‰ªΩ‰∫§Êç¢Êú∫</title>
    <url>/p/ad15fb59.html</url>
    <content><![CDATA[<html><head></head><body><p>‚Äã        ÈÄöËøáÊ∂àÊÅØÂõûÈÄÄÊú∫Âà∂ÂíåmandatoryÂèÇÊï∞ÔºåÂèØ‰ª•Â§ÑÁêÜ‰∫§Êç¢Êú∫ÊäïÈÄíÂ§±Ë¥•ÁöÑÊ∂àÊÅØ„ÄÇ</p>
<p>‚Äã        Ê∂àÊÅØÂõûÈÄÄÂà∞Áîü‰∫ßËÄÖÂêéÔºåÊúâÊó∂ÂÄôÂπ∂‰∏çÁü•ÈÅìËØ•Â¶Ç‰ΩïÂ§ÑÁêÜËøô‰∫õÊó†Ê≥ïË∑ØÁî±ÁöÑÊ∂àÊÅØÔºåÊúÄÂ§öÂ∞±ÊòØÊâì‰∏™Êó•ÂøóÔºåÂ≠òÂà∞ÁºìÂ≠òÂÆöÊó∂ÊäïÈÄíÔºåË∂ÖÂá∫ÊäïÈÄíÂ§±Ë¥•Ê¨°Êï∞ËøõË°åÊä•Ë≠¶ÔºåÂÜçÊâãÂä®Â§ÑÁêÜÔºåÊâãÂä®ÁöÑÈÄöÁóÖÂ∞±ÊòØÈ∫ªÁÉ¶ÊòìÂá∫Èîô„ÄÇÊ≠§Â§ñÔºåÁîü‰∫ßËÄÖ‰∏çÊ≠¢‰∏ÄÂè∞Êú∫Âô®ÔºåÈÇ£‰πàÊØèÂè∞ÈÉΩÈúÄË¶ÅÂÜôÂ§ÑÁêÜËøô‰∫õÂõûÈÄÄÊ∂àÊÅØÁöÑÈÄªËæë‰ª£Á†ÅÔºåÂèçËÄåÂ¢ûÂä†‰∫ÜÁîü‰∫ßËÄÖÁöÑÂ§çÊùÇÊÄß„ÄÇ</p>
<blockquote>
<p><strong>ÈÇ£‰πàÊó¢‰∏ç‰∏¢Â§±Ê∂àÊÅØÔºåÂèà‰∏çÂ¢ûÂä†Áîü‰∫ßËÄÖÁöÑÂ§çÊùÇÊÄßÔºåËØ•ÊÄé‰πàÂÅöÔºü</strong></p>
</blockquote>
<p>‚Äã        ÂèØ‰ª•‰∏∫ÈòüÂàóËÆæÁΩÆÊ≠ª‰ø°‰∫§Êç¢Êú∫Êù•Â≠òÂÇ®ÊäïÈÄíÂ§±Ë¥•ÁöÑÊ∂àÊÅØÔºåÂèØÊòØËøô‰∫õ‰∏çÂèØË∑ØÁî±Ê∂àÊÅØÊ†πÊú¨Ê≤°ÊúâÊú∫‰ºöËøõÂÖ•Âà∞ÈòüÂàóÔºåÂõ†Ê≠§Êó†Ê≥ï‰ΩøÁî®Ê≠ª‰ø°ÈòüÂàóÊù•‰øùÂ≠òÊ∂àÊÅØ„ÄÇÂú® RabbitMQ ‰∏≠ÔºåÊúâ‰∏ÄÁßçÂ§á‰ªΩ‰∫§Êç¢Êú∫ÁöÑÊú∫Âà∂Â≠òÂú®ÔºåÂèØ‰ª•ÂæàÂ•ΩÁöÑÂ∫îÂØπËøô‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<h2 id="Â§á‰ªΩ‰∫§Êç¢Êú∫"><a href="#Â§á‰ªΩ‰∫§Êç¢Êú∫" class="headerlink" title="Â§á‰ªΩ‰∫§Êç¢Êú∫"></a>Â§á‰ªΩ‰∫§Êç¢Êú∫</h2><p>‚Äã        Â§á‰ªΩ‰∫§Êç¢Êú∫ÂèØ‰ª•ÁêÜËß£‰∏∫ RabbitMQ ‰∏≠‰∫§Êç¢Êú∫ÁöÑ‚ÄúÂ§áËÉé‚ÄùÔºåÂΩìÊàë‰ª¨‰∏∫Êüê‰∏Ä‰∏™‰∫§Êç¢Êú∫Â£∞Êòé‰∏Ä‰∏™ÂØπÂ∫îÁöÑÂ§á‰ªΩ‰∫§Êç¢Êú∫Êó∂ÔºåÂ∞±ÊòØ‰∏∫ÂÆÉÂàõÂª∫‰∏Ä‰∏™Â§áËÉéÔºåÂΩì‰∫§Êç¢Êú∫Êé•Êî∂Âà∞‰∏ÄÊù°‰∏çÂèØË∑ØÁî±Ê∂àÊÅØÊó∂ÔºåÂ∞Ü‰ºöÊääËøôÊù°Ê∂àÊÅØËΩ¨ÂèëÂà∞Â§á‰ªΩ‰∫§Êç¢Êú∫‰∏≠ÔºåÁî±Â§á‰ªΩ‰∫§Êç¢Êú∫Êù•ËøõË°åËΩ¨ÂèëÂíåÂ§ÑÁêÜÔºåÈÄöÂ∏∏Â§á‰ªΩ‰∫§Êç¢Êú∫ÁöÑÁ±ªÂûã‰∏∫ Fanout ÔºåËøôÊ†∑Â∞±ËÉΩÊääÊâÄÊúâÊ∂àÊÅØÈÉΩÊäïÈÄíÂà∞‰∏éÂÖ∂ÁªëÂÆöÁöÑÈòüÂàó‰∏≠ÔºåÁÑ∂ÂêéÊàë‰ª¨Âú®Â§á‰ªΩ‰∫§Êç¢Êú∫‰∏ãÁªëÂÆö‰∏Ä‰∏™ÈòüÂàóÔºåËøôÊ†∑ÊâÄÊúâÈÇ£‰∫õÂéü‰∫§Êç¢Êú∫Êó†Ê≥ïË¢´Ë∑ØÁî±ÁöÑÊ∂àÊÅØÔºåÂ∞±‰ºöÈÉΩËøõÂÖ•Ëøô‰∏™ÈòüÂàó‰∫Ü„ÄÇ ÂΩìÁÑ∂ÔºåËøòÂèØ‰ª•Âª∫Á´ã‰∏Ä‰∏™Êä•Ë≠¶ÈòüÂàóÔºåÁî®Áã¨Á´ãÁöÑÊ∂àË¥πËÄÖÊù•ËøõË°åÁõëÊµãÂíåÊä•Ë≠¶„ÄÇ</p>
<h2 id="‰ª£Á†ÅÂÆûÁé∞"><a href="#‰ª£Á†ÅÂÆûÁé∞" class="headerlink" title="‰ª£Á†ÅÂÆûÁé∞"></a>‰ª£Á†ÅÂÆûÁé∞</h2><p>‚Äã        Êñ∞Â¢û‰∏Ä‰∏™Â§á‰ªΩ‰∫§Êç¢Êú∫ÔºåÁªëÂÆöÂú® confirm.exchange ‰∏äÔºåÂΩì confirm.exchange ÊäïÈÄíÊ∂àÊÅØÂà∞ÈòüÂàóÂ§±Ë¥•ÂêéÔºåÂ∞Ü‰∫§ÁªôÂ§á‰ªΩ‰∫§Êç¢Êú∫Êù•ÊäïÈÄíÊ∂àÊÅØÔºåËÆæÁΩÆ‰∫§Êç¢Êú∫Á±ªÂûã‰∏∫ fanoutÔºåÊúâ‰∏§‰∏™ÈòüÂàó backup.queueÔºåËøòÊúâ‰∏Ä‰∏™Êä•Ë≠¶ÈòüÂàóÁî®Êù•ÂëäÁü•Êàë‰ª¨Â≠òÂú®ÂºÇÂ∏∏ÊÉÖÂÜµ„ÄÇ</p>
<p><img src="/p/ad15fb59/RabbitMQ-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%A4%87%E4%BB%BD%E6%96%B9%E6%A1%88.png" alt="image-20210626155027879"></p>
<p>ConfirmConfig Êñ∞Â¢ûÈÖçÁΩÆ</p>
<p>‰øÆÊîπ confirm.exchange ÁöÑ‰ª£Á†ÅÔºåÁªëÂÆö‰∏äÂ§á‰ªΩ‰∫§Êç¢Êú∫ÔºåÂ£∞ÊòéÂÖ∂ÂÆÉÁªÑ‰ª∂„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÂèëÂ∏ÉÁ°ÆËÆ§Êú∫Âà∂-Á§∫‰æã‰ΩøÁî®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CONFIRM_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"confirm.queue"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CONFIRM_EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">"confirm.exchange"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ROUTING_KEY_CONFIRM</span> <span class="operator">=</span> <span class="string">"confirm.routing"</span>;</span><br><span class="line"><span class="comment">/** Â§á‰ªΩ‰∫§Êç¢Êú∫Â∏∏Èáè */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">CONFIRM_BACKUP_EXCHANGE</span> <span class="operator">=</span> <span class="string">"backup.exchange"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">CONFIRM_BACKUP_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"backup.queue"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">CONFIRM_WARNING_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"warning.queue"</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean(CONFIRM_EXCHANGE_NAME)</span></span><br><span class="line"><span class="keyword">public</span> DirectExchange <span class="title function_">confirmExchange</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">return</span> ExchangeBuilder.directExchange(CONFIRM_EXCHANGE_NAME)</span><br><span class="line">        .durable(<span class="literal">true</span>)</span><br><span class="line">        <span class="comment">// ËÆæÁΩÆÂ§á‰ªΩ‰∫§Êç¢Êú∫</span></span><br><span class="line">        .alternate(CONFIRM_BACKUP_EXCHANGE)</span><br><span class="line">        .build();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Â§á‰ªΩ‰∫§Êç¢Êú∫</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean(CONFIRM_BACKUP_EXCHANGE)</span></span><br><span class="line"><span class="keyword">public</span> FanoutExchange <span class="title function_">backupExchange</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FanoutExchange</span>(CONFIRM_BACKUP_EXCHANGE);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Â£∞ÊòéÂ§á‰ªΩÈòüÂàó</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean(CONFIRM_BACKUP_QUEUE_NAME)</span></span><br><span class="line"><span class="keyword">public</span> Queue <span class="title function_">backupQueue</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">return</span> QueueBuilder.durable(CONFIRM_BACKUP_QUEUE_NAME).build();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Â£∞ÊòéË≠¶ÂëäÈòüÂàó</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean(CONFIRM_WARNING_QUEUE_NAME)</span></span><br><span class="line"><span class="keyword">public</span> Queue <span class="title function_">warnQueue</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">return</span> QueueBuilder.durable(CONFIRM_WARNING_QUEUE_NAME).build();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Â§á‰ªΩÈòüÂàóÁªëÂÆöÂ§á‰ªΩ‰∫§Êç¢Êú∫</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Binding <span class="title function_">backupQueueBindingExchange</span><span class="params">(<span class="meta">@Qualifier(CONFIRM_BACKUP_QUEUE_NAME)</span> Queue queue,</span></span><br><span class="line"><span class="params">                                          <span class="meta">@Qualifier(CONFIRM_BACKUP_EXCHANGE)</span> FanoutExchange exchange)</span> {</span><br><span class="line">    <span class="keyword">return</span> BindingBuilder.bind(queue).to(exchange);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Êä•Ë≠¶ÈòüÂàóÁªëÂÆöÂ§á‰ªΩ‰∫§Êç¢Êú∫</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Binding <span class="title function_">warnQueueBindingExchange</span><span class="params">(<span class="meta">@Qualifier(CONFIRM_WARNING_QUEUE_NAME)</span> Queue queue,</span></span><br><span class="line"><span class="params">                                        <span class="meta">@Qualifier(CONFIRM_BACKUP_EXCHANGE)</span> FanoutExchange exchange)</span> {</span><br><span class="line">    <span class="keyword">return</span> BindingBuilder.bind(queue).to(exchange);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Áîü‰∫ßËÄÖÊñ∞Â¢ûÊµãËØïÊñπÊ≥ï</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ÂèëÈÄÅÊ∂àÊÅØÂà∞‰∫§Êç¢Êú∫Â§±Ë¥•ÔºåÁî±Â§á‰ªΩ‰∫§Êç¢Êú∫ÊäïÈÄíÊ∂àÊÅØ.</span></span><br><span class="line"><span class="comment"> * NoSuchRoutingKey ÊòØ‰∏Ä‰∏™‰∏çÂ≠òÂú®ÁöÑË∑ØÁî±ÈîÆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping("/sendFailMsg/{msg}")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendFailMsg</span><span class="params">(<span class="meta">@PathVariable("msg")</span> String msg)</span> {</span><br><span class="line">    <span class="type">CorrelationData</span> <span class="variable">correlationData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorrelationData</span>(UUID.randomUUID().toString());</span><br><span class="line">    rabbitTemplate.convertAndSend(MqConstant.CONFIRM_EXCHANGE_NAME, <span class="string">"NoSuchRoutingKey"</span>, msg, correlationData);</span><br><span class="line">    log.info(<span class="string">"ÂèëÈÄÅÊ∂àÊÅØÊàêÂäüÔºåÊ∂àÊÅØÂÜÖÂÆπÔºö{}"</span>, msg);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ê∂àË¥πËÄÖÔºåÊ∂àË¥πÂ§á‰ªΩÈòüÂàóÁöÑÊ∂àÊÅØ„ÄÅÊ∂àË¥πË≠¶ÂëäÈòüÂàóÁöÑÊ∂àÊÅØ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(queues = {CONFIRM_BACKUP_QUEUE_NAME})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveBackupMessage</span><span class="params">(Message message, Channel channel)</span>{</span><br><span class="line">    log.info(<span class="string">"Êé•Êî∂Âà∞Êó†Ê≥ïÊäïÈÄíÁöÑÊ∂àÊÅØ‰∏∫Ôºö{}"</span>, <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody()));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener(queues = {CONFIRM_WARNING_QUEUE_NAME})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveWarnMessage</span><span class="params">(Message message, Channel channel)</span>{</span><br><span class="line">    log.warn(<span class="string">"Êé•Êî∂Âà∞Êó†Ê≥ïÊäïÈÄíÁöÑÊ∂àÊÅØ‰∏∫Ôºö{}"</span>, <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody()));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûú</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">----------------------------- Áîü‰∫ßËÄÖÊó•Âøó --------------------------------</span><br><span class="line">2021-06-26 17:31:30.126  INFO 156 --- [nio-8005-exec-1] c.f.t.r.p.boot.ConfirmMessageProducer    : ÂèëÈÄÅÊ∂àÊÅØÊàêÂäüÔºåÊ∂àÊÅØÂÜÖÂÆπÔºöhello</span><br><span class="line">2021-06-26 17:31:30.131  INFO 156 --- [nectionFactory1] c.f.t.r.p.boot.ConfirmMessageCallback    : ‰∫§Êç¢Êú∫Â∑≤Êî∂Âà∞ id=1ef4f524-81e2-4f43-a8e1-d2b0969da0c1 ÁöÑÊ∂àÊÅØ</span><br><span class="line">----------------------------- Ê∂àË¥πËÄÖÊó•Âøó ------------------------------</span><br><span class="line">2021-06-26 17:31:30.132  WARN 21284 --- [ntContainer] c.f.t.r.c.boot.ConfirmMessageConsumer    : Êé•Êî∂Âà∞Êó†Ê≥ïÊäïÈÄíÁöÑÊ∂àÊÅØ‰∏∫Ôºöhello</span><br><span class="line">2021-06-26 17:31:30.132  INFO 21284 --- [ntContainer] c.f.t.r.c.boot.ConfirmMessageConsumer    : Êé•Êî∂Âà∞Êó†Ê≥ïÊäïÈÄíÁöÑÊ∂àÊÅØ‰∏∫Ôºöhello</span><br></pre></td></tr></tbody></table></figure>

<p><strong>Êó•Âøó‰∏≠Áº∫Â∞ë‰∫ÜÂõûÈÄÄÊñπÊ≥ï‰∏≠ÁöÑÊó•ÂøóÊâìÂç∞Ôºå‰∏∫‰ªÄ‰πà‰πãÂâçÈÖçÁΩÆÁöÑÂõûÈÄÄÊñπÊ≥ïÊ≤°ÊúâÂõûË∞ÉÔºü</strong></p>
<p>mandatory ÂèÇÊï∞‰∏éÂ§á‰ªΩ‰∫§Êç¢Êú∫ÂèØ‰ª•‰∏ÄËµ∑‰ΩøÁî®ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûú‰∏§ËÄÖÂêåÊó∂ÂºÄÂêØÔºåÂ§á‰ªΩ‰∫§Êç¢Êú∫ÁöÑ‰ºòÂÖàÁ∫ßÊõ¥È´ò„ÄÇ  </p>
</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>MQ-RabbitMQÊ≠ª‰ø°ÈòüÂàó</title>
    <url>/p/c4df0303.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Ê≠ª‰ø°ÁöÑÊ¶ÇÂøµ"><a href="#Ê≠ª‰ø°ÁöÑÊ¶ÇÂøµ" class="headerlink" title="Ê≠ª‰ø°ÁöÑÊ¶ÇÂøµ"></a>Ê≠ª‰ø°ÁöÑÊ¶ÇÂøµ</h2><p>Ê≠ª‰ø°ÔºåÈ°æÂêçÊÄù‰πâÂ∞±ÊòØÊó†Ê≥ïË¢´Ê∂àË¥πÁöÑÊ∂àÊÅØÔºåÂ≠óÈù¢ÊÑèÊÄùÂèØ‰ª•ËøôÊ†∑ÁêÜËß£Ôºå‰∏ÄËà¨Êù•ËØ¥Ôºåproducer Â∞ÜÊ∂àÊÅØÊäïÈÄíÂà∞ broker ÊàñËÄÖÁõ¥Êé•Âà∞ queue Èáå‰∫ÜÔºåconsumer ‰ªé queue ÂèñÂá∫Ê∂àÊÅØËøõË°åÊ∂àË¥πÔºå‰ΩÜÊüê‰∫õÊó∂ÂÄôÁî±‰∫éÁâπÂÆöÁöÑ<strong>ÂéüÂõ†ÂØºËá¥</strong> <strong>queue</strong> <strong>‰∏≠ÁöÑÊüê‰∫õÊ∂àÊÅØÊó†Ê≥ïË¢´Ê∂àË¥π</strong>ÔºåËøôÊ†∑ÁöÑÊ∂àÊÅØÂ¶ÇÊûúÊ≤°ÊúâÂêéÁª≠ÁöÑÂ§ÑÁêÜÔºåÂ∞±ÂèòÊàê‰∫ÜÊ≠ª‰ø°ÔºåÊúâÊ≠ª‰ø°Ëá™ÁÑ∂Â∞±Êúâ‰∫ÜÊ≠ª‰ø°ÈòüÂàó„ÄÇ</p>
<p>‚Äã        Â∫îÁî®Âú∫ÊôØÔºö‰∏∫‰∫Ü‰øùËØÅËÆ¢Âçï‰∏öÂä°ÁöÑÊ∂àÊÅØÊï∞ÊçÆ‰∏ç‰∏¢Â§±ÔºåÈúÄË¶Å‰ΩøÁî®Âà∞ RabbitMQ ÁöÑÊ≠ª‰ø°ÈòüÂàóÊú∫Âà∂ÔºåÂΩìÊ∂àÊÅØÊ∂àË¥πÂèëÁîüÂºÇÂ∏∏Êó∂ÔºåÂ∞ÜÊ∂àÊÅØÊäïÂÖ•Ê≠ª‰ø°ÈòüÂàó‰∏≠„ÄÇËøòÊúâÊØîÂ¶ÇËØ¥ÔºöÁî®Êà∑Âú®ÂïÜÂüé‰∏ãÂçïÊàêÂäüÂπ∂ÁÇπÂáªÂéªÊîØ‰ªòÂêéÂú®ÊåáÂÆöÊó∂Èó¥Êú™ÊîØ‰ªòÊó∂Ëá™Âä®Â§±Êïà„ÄÇ</p>
<h2 id="Ê≠ª‰ø°ÁöÑÊù•Ê∫ê"><a href="#Ê≠ª‰ø°ÁöÑÊù•Ê∫ê" class="headerlink" title="Ê≠ª‰ø°ÁöÑÊù•Ê∫ê"></a>Ê≠ª‰ø°ÁöÑÊù•Ê∫ê</h2><p>1„ÄÅÊ∂àÊÅØ TTL ËøáÊúü„ÄÇ</p>
<p>2„ÄÅÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶(ÈòüÂàóÊª°‰∫ÜÔºåÊó†Ê≥ïÂÜçÊ∑ªÂä†Êï∞ÊçÆÂà∞ mq ‰∏≠)„ÄÇ</p>
<p>3„ÄÅÊ∂àÊÅØË¢´ÊãíÁªù(basic.reject Êàñ basic.nack)Âπ∂‰∏î Ê∂àÊÅØ‰∏çÈáçÊñ∞ÊîæÂõûÂØπÂûíÔºàrequeue=falseÔºâ„ÄÇ</p>
<h2 id="‰ª£Á†ÅÁ§∫‰æã"><a href="#‰ª£Á†ÅÁ§∫‰æã" class="headerlink" title="‰ª£Á†ÅÁ§∫‰æã"></a>‰ª£Á†ÅÁ§∫‰æã</h2><p>‚Äã        Áîü‰∫ßËÄÖÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ normal_Exchange‰∫§Êç¢Êú∫Ôºå‰∫§Êç¢Êú∫Ê†πÊçÆ normalRoutingKey Ë∑ØÁî±ÈîÆÂèëÈÄÅÂà∞ normalQueue ÈòüÂàóÔºåÂΩìÊ∂àÊÅØÂú®ÈòüÂàó‰∏≠ ttl Ë∂ÖËøá10sÂêéÔºåÊ∂àÊÅØÁß∞‰∏∫Ê≠ª‰ø°ÔºåËΩ¨ÂèëÂà∞dead-exchange ‰∫§Êç¢Êú∫Ôºå‰∫§Êç¢Êú∫Ê†πÊçÆ deadRoutingKey Ë∑ØÁî±ÈîÆÂèëÈÄÅÂà∞ deadQueue ÈòüÂàó„ÄÇ</p>
<p>‚Äã        Ê∂àË¥πËÄÖ1Ë¥üË¥£Ê∂àË¥πÊ∂àÊÅØÊ≠£Â∏∏ÁöÑÈòüÂàóÔºåÈ¶ñÂÖàÂºÄÂêØÂàõÂª∫Âá∫‰∫§Êç¢Êú∫„ÄÅÈòüÂàó‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºå‰πãÂêéÂÖ≥Èó≠ËØ•Ê∂àË¥πËÄÖÔºåÈöèÂêéËøêË°åÁîü‰∫ßËÄÖÔºåËßÇÂØüRabbitMQÂõæÂΩ¢ÂåñÁïåÈù¢Ê≠£Â∏∏ÁöÑÊ∂àÊÅØ ttl ËøáÊúüÂêéËøõÂÖ•Ê≠ª‰ø°ÈòüÂàó„ÄÇ</p>
<p>‚Äã        Ê∂àË¥πËÄÖ2Âè™Ë¥üË¥£Ê∂àË¥πÊ≠ª‰ø°ÈòüÂàó„ÄÇ</p>
<p><img src="/p/c4df0303/RabbitMQ-%E6%B6%88%E6%81%AF%E8%BD%AC%E4%B8%BA%E6%AD%BB%E4%BF%A1%E6%B5%81%E7%A8%8B.png" alt="image-20210621230631642"></p>
<h3 id="ÊÉÖÂÜµ1ÔºöÊ∂àÊÅØTTLËøáÊúü"><a href="#ÊÉÖÂÜµ1ÔºöÊ∂àÊÅØTTLËøáÊúü" class="headerlink" title="ÊÉÖÂÜµ1ÔºöÊ∂àÊÅØTTLËøáÊúü"></a>ÊÉÖÂÜµ1ÔºöÊ∂àÊÅØTTLËøáÊúü</h3><p>Â∫îÁî®Âú∫ÊôØÂ¶ÇËÆ¢ÂçïËøáÊúüÔºåËÆ¢ÂçïÂú®10ÂàÜÈíüÂÜÖÊú™ÊîØ‰ªòÂêéÂèñÊ∂àËÆ¢Âçï„ÄÇ10ÂàÜÈíüttlËøáÊúüÁöÑÊ∂àÊÅØËΩ¨‰∏∫Ê≠ª‰ø°ÔºåËÆ©‰∏ìÈó®Ê∂àË¥πÊ≠ª‰ø°ÈòüÂàóÁöÑÊ∂àË¥πËÄÖÂéªÂ§ÑÁêÜËøô‰∫õËøáÊúüÁöÑËÆ¢Âçï„ÄÇ</p>
<p><strong>Ê∂àË¥πËÄÖ1</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageDeadConsumer1</span> {</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NORMAL_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"normal"</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NORMAL_EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">"normalExchange"</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ROUTING_KEY_NORMAL</span> <span class="operator">=</span> <span class="string">"normalRouting"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEAD_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"dead"</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEAD_EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">"deadExchange"</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">ROUTING_KEY_DEAD</span> <span class="operator">=</span> <span class="string">"deadRouting"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">// ÁªëÂÆö‰∫§Êç¢Êú∫</span></span><br><span class="line">        channel.exchangeDeclare(NORMAL_EXCHANGE_NAME, BuiltinExchangeType.DIRECT);</span><br><span class="line">        channel.exchangeDeclare(DEAD_EXCHANGE_NAME, BuiltinExchangeType.DIRECT);</span><br><span class="line">        <span class="comment">// Ê∑ªÂä†Ê≠ª‰ø°ÈòüÂàóÂèÇÊï∞</span></span><br><span class="line">        Map&lt;String, Object&gt; arguments = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">4</span>);</span><br><span class="line">        arguments.put(<span class="string">"x-dead-letter-exchange"</span>, DEAD_EXCHANGE_NAME);</span><br><span class="line">        arguments.put(<span class="string">"x-dead-letter-routing-key"</span>, ROUTING_KEY_DEAD);</span><br><span class="line">        <span class="comment">// ÁªëÂÆöÈòüÂàó</span></span><br><span class="line">        channel.queueDeclare(DEAD_QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// Ê≠£Â∏∏ÈòüÂàóÂ∞ÜÂºÇÂ∏∏Ê∂àÊÅØÔºàttlÂ§±Êïà„ÄÅÊ∂àÊÅØË¢´ÊãíÁªù„ÄÅÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶ÔºâËΩ¨Âà∞Ê≠ª‰ø°ÈòüÂàó</span></span><br><span class="line">        channel.queueDeclare(NORMAL_QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, arguments);</span><br><span class="line">        <span class="comment">// ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫ÂíåË∑ØÁî±ÈîÆ</span></span><br><span class="line">        channel.queueBind(DEAD_QUEUE_NAME, DEAD_EXCHANGE_NAME, ROUTING_KEY_DEAD);</span><br><span class="line">        channel.queueBind(NORMAL_QUEUE_NAME, NORMAL_EXCHANGE_NAME, ROUTING_KEY_NORMAL);</span><br><span class="line">        System.out.println(<span class="string">"Á≠âÂæÖÊé•Êî∂Ê∂àÊÅØ..."</span>);</span><br><span class="line">        <span class="comment">// Êé•Êî∂Âà∞Ê∂àÊÅØÂêéËß¶ÂèëÂõûË∞É</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; {</span><br><span class="line">            <span class="type">byte</span>[] msgBytes = delivery.getBody();</span><br><span class="line">            System.out.println(<span class="string">"Êé•Êî∂Âà∞Ê∂àÊÅØÔºöÊ∂àÊÅØID="</span> + consumerTag + <span class="string">"===&gt;"</span> + <span class="keyword">new</span> <span class="title class_">String</span>(msgBytes));</span><br><span class="line">        };</span><br><span class="line">        <span class="comment">// Ê∂àÊÅØÊ∂àË¥πË¢´‰∏≠Êñ≠ÔºàÂèñÊ∂àÔºâ</span></span><br><span class="line">        <span class="type">CancelCallback</span> <span class="variable">cancelCallback</span> <span class="operator">=</span> consumerTag -&gt; {</span><br><span class="line">            System.out.println(<span class="string">"Ê∂àÊÅØË¢´‰∏≠Êñ≠ÔºöÊ∂àÊÅØID="</span> + consumerTag);</span><br><span class="line">        };</span><br><span class="line">        channel.basicConsume(NORMAL_QUEUE_NAME, <span class="literal">true</span>, deliverCallback, cancelCallback);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>Áîü‰∫ßËÄÖ</strong></p>
<p>Áîü‰∫ßËÄÖÂÜ≥ÂÆöÊ∂àÊÅØ‰∏ÄÂèëÂá∫ÂéªÂ§ö‰πÖËΩ¨‰∏∫Ê≠ª‰ø°„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageDeadProducer</span> {</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NORMAL_EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">"normalExchange"</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ROUTING_KEY_NORMAL</span> <span class="operator">=</span> <span class="string">"normalRouting"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Â¶ÇÊûúÂú®10sÂÜÖÔºåÊ∂àË¥πËÄÖ‰∏çÊé•Êî∂ÂàôËΩ¨ÂèëÂà∞Ê≠ª‰ø°ÈòüÂàó‰∏≠</span></span><br><span class="line">        AMQP.<span class="type">BasicProperties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AMQP</span>.BasicProperties()</span><br><span class="line">            .builder()</span><br><span class="line">            <span class="comment">// Âçï‰Ωçms</span></span><br><span class="line">            .expiration(<span class="string">"10000"</span>)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">            channel.basicPublish(NORMAL_EXCHANGE_NAME, ROUTING_KEY_NORMAL, properties, (msg).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">            System.out.println(<span class="string">"Ê∂àÊÅØ["</span> + msg + <span class="string">"]ÂèëÈÄÅÂÆåÊàê"</span>);</span><br><span class="line">        }</span><br><span class="line">        channel.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>Ê∂àË¥πËÄÖ2</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageDeadConsumer2</span> {</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> DEAD_QUEUE_NAME;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        channel.basicConsume(QUEUE_NAME, <span class="literal">true</span>, (consumerTag, delivery) -&gt; {</span><br><span class="line">            <span class="type">byte</span>[] msgBytes = delivery.getBody();</span><br><span class="line">            System.out.println(<span class="string">"Êé•Êî∂Âà∞Ê∂àÊÅØÔºöÊ∂àÊÅØID="</span> + consumerTag + <span class="string">"===&gt;"</span> + <span class="keyword">new</span> <span class="title class_">String</span>(msgBytes));</span><br><span class="line">        }, consumerTag -&gt; {</span><br><span class="line">            System.out.println(<span class="string">"Ê∂àÊÅØË¢´‰∏≠Êñ≠ÔºöÊ∂àÊÅØID="</span> + consumerTag);</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÊÉÖÂÜµ2ÔºöÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶"><a href="#ÊÉÖÂÜµ2ÔºöÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶" class="headerlink" title="ÊÉÖÂÜµ2ÔºöÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶"></a>ÊÉÖÂÜµ2ÔºöÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶</h3><p>Ê∂àË¥πËÄÖ1‰ª£Á†Å‰øÆÊîπÊñ∞Â¢ûÂèÇÊï∞Êé•Êî∂ÊúÄÂ§ßÈòüÂàóÁöÑÂèÇÊï∞ÂÄº‰∏∫5ÔºåÊ≥®ÊÑèÊ≠§Êó∂ÈúÄË¶ÅÊääÂéüÂÖàÈòüÂàóÂà†Èô§ÔºåÂõ†‰∏∫ÂèÇÊï∞ÊîπÂèò‰∫Ü„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ‰øÆÊîπÊ∂àË¥πËÄÖ1ÁöÑÂèÇÊï∞‰ª£Á†Å</span></span><br><span class="line">Map&lt;String, Object&gt; arguments = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">4</span>);</span><br><span class="line">arguments.put(<span class="string">"x-dead-letter-exchange"</span>, DEAD_EXCHANGE_NAME);</span><br><span class="line">arguments.put(<span class="string">"x-dead-letter-routing-key"</span>, ROUTING_KEY_DEAD);</span><br><span class="line"><span class="comment">// ÊÉÖÂÜµ2ÔºöÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶(ÈòüÂàóÊª°‰∫ÜÔºåÊó†Ê≥ïÂÜçÊ∑ªÂä†Êï∞ÊçÆÂà∞ mq ‰∏≠)</span></span><br><span class="line"><span class="comment">// ËÆæÁΩÆÊúÄÂ§ßÈïøÂ∫¶‰∏∫6ÔºåÊ≥®ÊÑèÊ≠§Êó∂ÈúÄË¶ÅÊääÂéüÂÖàÈòüÂàóÂà†Èô§ÔºåÂõ†‰∏∫ÂèÇÊï∞ÊîπÂèò‰∫Ü„ÄÇ</span></span><br><span class="line">arguments.put(<span class="string">"x-max-length"</span>, <span class="number">5</span>);</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÊÉÖÂÜµ3ÔºöÊ∂àÊÅØË¢´ÊãíÁªù"><a href="#ÊÉÖÂÜµ3ÔºöÊ∂àÊÅØË¢´ÊãíÁªù" class="headerlink" title="ÊÉÖÂÜµ3ÔºöÊ∂àÊÅØË¢´ÊãíÁªù"></a>ÊÉÖÂÜµ3ÔºöÊ∂àÊÅØË¢´ÊãíÁªù</h3><p>Âú®Ê∂àË¥πËÄÖ1‰∏≠Ë∞ÉÁî® channel.basicReject() ÊñπÊ≥ïÊãíÁªùÊ∂àÊÅØ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">    connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);	</span><br><span class="line">    connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">    connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">    connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">    <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">    <span class="comment">// ÁªëÂÆö‰∫§Êç¢Êú∫</span></span><br><span class="line">    channel.exchangeDeclare(NORMAL_EXCHANGE_NAME, BuiltinExchangeType.DIRECT);</span><br><span class="line">    channel.exchangeDeclare(DEAD_EXCHANGE_NAME, BuiltinExchangeType.DIRECT);</span><br><span class="line">    <span class="comment">// Ê∑ªÂä†Ê≠ª‰ø°ÈòüÂàóÂèÇÊï∞</span></span><br><span class="line">    Map&lt;String, Object&gt; arguments = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">4</span>);</span><br><span class="line">    arguments.put(<span class="string">"x-dead-letter-exchange"</span>, DEAD_EXCHANGE_NAME);</span><br><span class="line">    arguments.put(<span class="string">"x-dead-letter-routing-key"</span>, ROUTING_KEY_DEAD);</span><br><span class="line">    <span class="comment">// ÊÉÖÂÜµ2ÔºöÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶(ÈòüÂàóÊª°‰∫ÜÔºåÊó†Ê≥ïÂÜçÊ∑ªÂä†Êï∞ÊçÆÂà∞ mq ‰∏≠)</span></span><br><span class="line">    <span class="comment">// ËÆæÁΩÆÊúÄÂ§ßÈïøÂ∫¶‰∏∫6ÔºåÊ≥®ÊÑèÊ≠§Êó∂ÈúÄË¶ÅÊääÂéüÂÖàÈòüÂàóÂà†Èô§ÔºåÂõ†‰∏∫ÂèÇÊï∞ÊîπÂèò‰∫Ü„ÄÇ</span></span><br><span class="line">    <span class="comment">// arguments.put("x-max-length", 5);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÁªëÂÆöÈòüÂàó</span></span><br><span class="line">    channel.queueDeclare(DEAD_QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// Ê≠£Â∏∏ÈòüÂàóÂ∞ÜÂºÇÂ∏∏Ê∂àÊÅØÔºàttlÂ§±Êïà„ÄÅÊ∂àÊÅØË¢´ÊãíÁªù„ÄÅÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶ÔºâËΩ¨Âà∞Ê≠ª‰ø°ÈòüÂàó</span></span><br><span class="line">    channel.queueDeclare(NORMAL_QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, arguments);</span><br><span class="line">    <span class="comment">// ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫ÂíåË∑ØÁî±ÈîÆ</span></span><br><span class="line">    channel.queueBind(DEAD_QUEUE_NAME, DEAD_EXCHANGE_NAME, ROUTING_KEY_DEAD);</span><br><span class="line">    channel.queueBind(NORMAL_QUEUE_NAME, NORMAL_EXCHANGE_NAME, ROUTING_KEY_NORMAL);</span><br><span class="line">    System.out.println(<span class="string">"Á≠âÂæÖÊé•Êî∂Ê∂àÊÅØ..."</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Êé•Êî∂Âà∞Ê∂àÊÅØÂêéËß¶ÂèëÂõûË∞É</span></span><br><span class="line">    <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; {</span><br><span class="line">        <span class="type">byte</span>[] msgBytes = delivery.getBody();</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(msgBytes);</span><br><span class="line">        <span class="type">long</span> <span class="variable">deliveryTag</span> <span class="operator">=</span> delivery.getEnvelope().getDeliveryTag();</span><br><span class="line">        <span class="comment">// ÊÉÖÂÜµ3ÔºöÊãíÁªùÊ∂àÊÅØ</span></span><br><span class="line">        <span class="keyword">if</span> (msg.equals(<span class="string">"message_5"</span>)) {</span><br><span class="line">            <span class="comment">// ÊòØÂê¶ÈáçÊñ∞ÊîæÂõûÈòüÂàó</span></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">requeue</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">            channel.basicReject(deliveryTag, requeue);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            System.out.println(<span class="string">"Êé•Êî∂Âà∞Ê∂àÊÅØÔºöÊ∂àÊÅØID="</span> + consumerTag + <span class="string">"===&gt;"</span> + msg);</span><br><span class="line">            channel.basicAck(deliveryTag, <span class="literal">false</span>);</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÊÉÖÂÜµ3ÔºöÂºÄÂêØÊâãÂä®Â∫îÁ≠î</span></span><br><span class="line">    channel.basicConsume(NORMAL_QUEUE_NAME, <span class="literal">false</span>, deliverCallback, consumerTag -&gt; {</span><br><span class="line">        System.out.println(<span class="string">"Ê∂àÊÅØË¢´‰∏≠Êñ≠ÔºöÊ∂àÊÅØID="</span> + consumerTag);</span><br><span class="line">    });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÂª∂Êó∂ÈòüÂàó</title>
    <url>/p/a4765550.html</url>
    <content><![CDATA[<html><head></head><body></body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÁöÑÂõõÂ§ßÊ†∏ÂøÉÊ¶ÇÂøµ</title>
    <url>/p/9a89eebd.html</url>
    <content><![CDATA[<html><head></head><body><p><strong>Áîü‰∫ßËÄÖÔºå‰∫§Êç¢Êú∫ÔºåÈòüÂàóÔºåÊ∂àË¥πËÄÖ</strong>„ÄÇÂõõÂ§ßÊ†∏ÂøÉÁ±ª‰ºº‰∫é‰ª•‰∏ãÁöÑÂçèÂêåÂÖ≥Á≥ª„ÄÇ</p>
<p><img src="/p/9a89eebd/RabbitMQ-%E5%9B%9B%E5%A4%A7%E6%A0%B8%E5%BF%83%E7%A4%BA%E4%BE%8B.png" alt="image-20210619160155955"></p>
<p>ÂõõÂ§ßÊ†∏ÂøÉÁöÑÁõ∏‰∫íÂÖ≥ËÅî„ÄÇ</p>
<p><img src="/p/9a89eebd/RabbitMQ-%E5%9B%9B%E5%A4%A7%E6%A0%B8%E5%BF%83%E5%85%B3%E7%B3%BB.png" alt="image-20210619160347762"></p>
<p><strong>Áîü‰∫ßËÄÖ</strong></p>
<p>‰∫ßÁîüÊï∞ÊçÆÂèëÈÄÅÊ∂àÊÅØÁöÑÁ®ãÂ∫èÊòØÁîü‰∫ßËÄÖ</p>
<p><strong>‰∫§Êç¢Êú∫</strong></p>
<p>‰∫§Êç¢Êú∫ÊòØ RabbitMQ ÈùûÂ∏∏ÈáçË¶ÅÁöÑ‰∏Ä‰∏™ÈÉ®‰ª∂Ôºå‰∏ÄÊñπÈù¢ÂÆÉÊé•Êî∂Êù•Ëá™Áîü‰∫ßËÄÖÁöÑÊ∂àÊÅØÔºåÂè¶‰∏ÄÊñπÈù¢ÂÆÉÂ∞ÜÊ∂àÊÅØÊé®ÈÄÅÂà∞ÈòüÂàó‰∏≠„ÄÇ‰∫§Êç¢Êú∫ÂøÖÈ°ªÁ°ÆÂàáÁü•ÈÅìÂ¶Ç‰ΩïÂ§ÑÁêÜÂÆÉÊé•Êî∂Âà∞ÁöÑÊ∂àÊÅØÔºåÊòØÂ∞ÜËøô‰∫õÊ∂àÊÅØÊé®ÈÄÅÂà∞ÁâπÂÆöÈòüÂàóËøòÊòØÊé®ÈÄÅÂà∞Â§ö‰∏™ÈòüÂàóÔºå‰∫¶ÊàñËÄÖÊòØÊääÊ∂àÊÅØ‰∏¢ÂºÉÔºåËøô‰∏™ÂæóÊúâ‰∫§Êç¢Êú∫Á±ªÂûãÂÜ≥ÂÆö„ÄÇ</p>
<p><strong>ÈòüÂàó</strong></p>
<p>ÈòüÂàóÊòØ RabbitMQ ÂÜÖÈÉ®‰ΩøÁî®ÁöÑ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåÂ∞ΩÁÆ°Ê∂àÊÅØÊµÅÁªè RabbitMQ ÂíåÂ∫îÁî®Á®ãÂ∫èÔºå‰ΩÜÂÆÉ‰ª¨Âè™ËÉΩÂ≠òÂÇ®Âú®ÈòüÂàó‰∏≠„ÄÇÈòüÂàó‰ªÖÂèó‰∏ªÊú∫ÁöÑÂÜÖÂ≠òÂíåÁ£ÅÁõòÈôêÂà∂ÁöÑÁ∫¶ÊùüÔºåÊú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™Â§ßÁöÑÊ∂àÊÅØÁºìÂÜ≤Âå∫„ÄÇËÆ∏Â§öÁîü‰∫ßËÄÖÂèØ‰ª•Â∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞‰∏Ä‰∏™ÈòüÂàóÔºåËÆ∏Â§öÊ∂àË¥πËÄÖÂèØ‰ª•Â∞ùËØï‰ªé‰∏Ä‰∏™ÈòüÂàóÊé•Êî∂Êï∞ÊçÆ„ÄÇËøôÂ∞±ÊòØÊàë‰ª¨‰ΩøÁî®ÈòüÂàóÁöÑÊñπÂºè„ÄÇ</p>
<p><strong>Ê∂àË¥πËÄÖ</strong></p>
<p>Ê∂àË¥π‰∏éÊé•Êî∂ÂÖ∑ÊúâÁõ∏‰ººÁöÑÂê´‰πâ„ÄÇÊ∂àË¥πËÄÖÂ§ßÂ§öÊó∂ÂÄôÊòØ‰∏Ä‰∏™Á≠âÂæÖÊé•Êî∂Ê∂àÊÅØÁöÑÁ®ãÂ∫è„ÄÇËØ∑Ê≥®ÊÑèÁîü‰∫ßËÄÖÔºåÊ∂àË¥πËÄÖÂíåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂæàÂ§öÊó∂ÂÄôÂπ∂‰∏çÂú®Âêå‰∏ÄÊú∫Âô®‰∏ä„ÄÇÂêå‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÊó¢ÂèØ‰ª•ÊòØÁîü‰∫ßËÄÖÂèàÊòØÂèØ‰ª•ÊòØÊ∂àË¥πËÄÖ„ÄÇ</p>
<p><strong>ÂêÑ‰∏™ÂêçËØç‰ªãÁªç</strong></p>
<p><img src="/p/9a89eebd/RabbitMQ-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt="image-20210619161230922"></p>
<p><strong>Broker</strong></p>
<p>Êé•Êî∂ÂíåÂàÜÂèëÊ∂àÊÅØÁöÑÂ∫îÁî®ÔºåRabbitMQ ServerÂ∞±ÊòØMessage Broker </p>
<p><strong>Virtual host</strong></p>
<p>Âá∫‰∫éÂ§öÁßüÊà∑ÂíåÂÆâÂÖ®Âõ†Á¥†ËÆæËÆ°ÁöÑÔºåÊääAMQP ÁöÑÂü∫Êú¨ÁªÑ‰ª∂ÂàíÂàÜÂà∞‰∏Ä‰∏™ËôöÊãüÁöÑÂàÜÁªÑ‰∏≠ÔºåÁ±ª‰ºº‰∫éÁΩëÁªú‰∏≠ÁöÑnamespaceÊ¶ÇÂøµ„ÄÇÂΩìÂ§ö‰∏™‰∏çÂêåÁöÑÁî®Êà∑‰ΩøÁî®Âêå‰∏Ä‰∏™RabbitMQserverÊèê‰æõÁöÑÊúçÂä°Êó∂ÔºåÂèØ‰ª•ÂàíÂàÜÂá∫Â§ö‰∏™vhostÔºåÊØè‰∏™Áî®Êà∑Âú®Ëá™Â∑±ÁöÑvhost ÂàõÂª∫exchangeÔºèqueue Á≠â„ÄÇ</p>
<p><strong>Connection</strong></p>
<p>publisherÔºèconsumerÂíåbroker‰πãÈó¥ÁöÑTCPËøûÊé• </p>
<p><strong>Channel</strong></p>
<p>Â¶ÇÊûúÊØè‰∏ÄÊ¨°ËÆøÈóÆ RabbitMQ ÈÉΩÂª∫Á´ã‰∏Ä‰∏™ConnectionÔºåÂú®Ê∂àÊÅØÈáèÂ§ßÁöÑÊó∂ÂÄôÂª∫Á´ãTCP  ConnectionÁöÑÂºÄÈîÄÂ∞ÜÊòØÂ∑®Â§ßÁöÑÔºåÊïàÁéá‰πüËæÉ‰Ωé„ÄÇChannelÊòØÂú®connectionÂÜÖÈÉ®Âª∫Á´ãÁöÑÈÄªËæëËøûÊé•ÔºåÂ¶ÇÊûúÂ∫îÁî®Á®ãÂ∫èÊîØÊåÅÂ§öÁ∫øÁ®ãÔºåÈÄöÂ∏∏ÊØè‰∏™threadÂàõÂª∫ÂçïÁã¨ÁöÑchannelËøõË°åÈÄöËÆØÔºåAMQP methodÂåÖÂê´‰∫Üchannel id Â∏ÆÂä©ÂÆ¢Êà∑Á´ØÂíå message broker ËØÜÂà´channelÔºåÊâÄ‰ª•channel‰πãÈó¥ÊòØÂÆåÂÖ®ÈöîÁ¶ªÁöÑ„ÄÇChannel‰Ωú‰∏∫ËΩªÈáèÁ∫ßÁöÑConnectionÊûÅÂ§ßÂáèÂ∞ë‰∫ÜÊìç‰ΩúÁ≥ªÁªüÂª∫Á´ãTCP connectionÁöÑÂºÄÈîÄ„ÄÇ</p>
<p><strong>Exchange</strong></p>
<p>message Âà∞Ëææbroker ÁöÑÁ¨¨‰∏ÄÁ´ôÔºåÊ†πÊçÆÂàÜÂèëËßÑÂàôÔºåÂåπÈÖçÊü•ËØ¢Ë°®‰∏≠ÁöÑrouting keyÔºåÂàÜÂèëÊ∂àÊÅØÂà∞queue ‰∏≠Âéª„ÄÇÂ∏∏Áî®ÁöÑÁ±ªÂûãÊúâÔºödirect (point-to-point), topic (publish-subscribe) and fanout  (multicast)„ÄÇ</p>
<p>Âç≥‰Ωø‰ΩøÁî®ÁöÑÊòØÁÆÄÂçïÊ®°ÂºèÔºåÁîü‰∫ßËÄÖÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÁªôRabbitMQÈªòËÆ§ÁöÑ‰∫§Êç¢Êú∫„ÄÇ</p>
<p><strong>Queue</strong></p>
<p>Ê∂àÊÅØÊúÄÁªàË¢´ÈÄÅÂà∞ËøôÈáåÁ≠âÂæÖconsumerÂèñËµ∞„ÄÇ</p>
<p><strong>Binding</strong></p>
<p>exchangeÂíåqueue‰πãÈó¥ÁöÑËôöÊãüËøûÊé•Ôºåbinding‰∏≠ÂèØ‰ª•ÂåÖÂê´routing keyÔºåBinding‰ø°ÊÅØË¢´‰øùÂ≠òÂà∞exchange‰∏≠ÁöÑÊü•ËØ¢Ë°®‰∏≠ÔºåÁî®‰∫émessageÁöÑÂàÜÂèë‰æùÊçÆ„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÁöÑÂÆâË£Ö</title>
    <url>/p/984e2ca0.html</url>
    <content><![CDATA[<html><head></head><body><p><a href="https://www.rabbitmq.com/">RabbitMQÂÆòÁΩë</a></p>
<h2 id="ÂÆâË£ÖRabbitMQ"><a href="#ÂÆâË£ÖRabbitMQ" class="headerlink" title="ÂÆâË£ÖRabbitMQ"></a>ÂÆâË£ÖRabbitMQ</h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">docker run -d --restart=always -p 5672:5672 -p 15672:15672 --name rabbitmq -v ${RABBITMQ_DIR}/data:/mydata/rabbitmq  -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=admin rabbitmq:management</span><br></pre></td></tr></tbody></table></figure>

<p>ËÆøÈóÆ ip:15672ÔºàÂ¶Ç 127.0.0.1:15672Ôºâ</p>
<p><img src="/p/984e2ca0/RabbitMQ-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86.png" alt="image-20210619153907851"></p>
<h3 id="Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò-administrator"><a href="#Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò-administrator" class="headerlink" title="Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò(administrator)"></a>Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò(administrator)</h3><p>ÂèØÁôªÈôÜÁÆ°ÁêÜÊéßÂà∂Âè∞ÔºåÂèØÊü•ÁúãÊâÄÊúâÁöÑ‰ø°ÊÅØÔºåÂπ∂‰∏îÂèØ‰ª•ÂØπÁî®Êà∑ÔºåÁ≠ñÁï•(policy)ËøõË°åÊìç‰Ωú„ÄÇ</p>
<h3 id="ÁõëÊéßËÄÖ-monitoring"><a href="#ÁõëÊéßËÄÖ-monitoring" class="headerlink" title="ÁõëÊéßËÄÖ(monitoring)"></a>ÁõëÊéßËÄÖ(monitoring)</h3><p>ÂèØÁôªÈôÜÁÆ°ÁêÜÊéßÂà∂Âè∞ÔºåÂêåÊó∂ÂèØ‰ª•Êü•ÁúãrabbitmqËäÇÁÇπÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ(ËøõÁ®ãÊï∞ÔºåÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµÔºåÁ£ÅÁõò‰ΩøÁî®ÊÉÖÂÜµÁ≠â)</p>
<h3 id="Á≠ñÁï•Âà∂ÂÆöËÄÖ-policymaker"><a href="#Á≠ñÁï•Âà∂ÂÆöËÄÖ-policymaker" class="headerlink" title="Á≠ñÁï•Âà∂ÂÆöËÄÖ(policymaker)"></a>Á≠ñÁï•Âà∂ÂÆöËÄÖ(policymaker)</h3><p>ÂèØÁôªÈôÜÁÆ°ÁêÜÊéßÂà∂Âè∞, ÂêåÊó∂ÂèØ‰ª•ÂØπpolicyËøõË°åÁÆ°ÁêÜ„ÄÇ‰ΩÜÊó†Ê≥ïÊü•ÁúãËäÇÁÇπÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ(‰∏äÂõæÁ∫¢Ê°ÜÊ†áËØÜÁöÑÈÉ®ÂàÜ)„ÄÇ</p>
<h3 id="ÊôÆÈÄöÁÆ°ÁêÜËÄÖ-management"><a href="#ÊôÆÈÄöÁÆ°ÁêÜËÄÖ-management" class="headerlink" title="ÊôÆÈÄöÁÆ°ÁêÜËÄÖ(management)"></a>ÊôÆÈÄöÁÆ°ÁêÜËÄÖ(management)</h3><p>‰ªÖÂèØÁôªÈôÜÁÆ°ÁêÜÊéßÂà∂Âè∞ÔºåÊó†Ê≥ïÁúãÂà∞ËäÇÁÇπ‰ø°ÊÅØÔºå‰πüÊó†Ê≥ïÂØπÁ≠ñÁï•ËøõË°åÁÆ°ÁêÜ„ÄÇ</p>
<h3 id="ÂÖ∂‰ªñ"><a href="#ÂÖ∂‰ªñ" class="headerlink" title="ÂÖ∂‰ªñ"></a>ÂÖ∂‰ªñ</h3><p>Êó†Ê≥ïÁôªÈôÜÁÆ°ÁêÜÊéßÂà∂Âè∞ÔºåÈÄöÂ∏∏Â∞±ÊòØÊôÆÈÄöÁöÑÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖ„ÄÇ</p>
<h2 id="Virtual-HostsÈÖçÁΩÆ"><a href="#Virtual-HostsÈÖçÁΩÆ" class="headerlink" title="Virtual HostsÈÖçÁΩÆ"></a>Virtual HostsÈÖçÁΩÆ</h2><p>ÂÉèmysqlÊã•ÊúâÊï∞ÊçÆÂ∫ìÁöÑÊ¶ÇÂøµÂπ∂‰∏îÂèØ‰ª•ÊåáÂÆöÁî®Êà∑ÂØπÂ∫ìÂíåË°®Á≠âÊìç‰ΩúÁöÑÊùÉÈôê„ÄÇRabbitMQ‰πüÊúâÁ±ª‰ººÁöÑÊùÉÈôêÁÆ°ÁêÜÔºõÂú®RabbitMQ‰∏≠ÂèØ‰ª•ËôöÊãüÊ∂àÊÅØÊúçÂä°Âô®Virtual HostÔºåÊØè‰∏™Virtual HostsÁõ∏ÂΩì‰∫é‰∏Ä‰∏™Áõ∏ÂØπÁã¨Á´ãÁöÑRabbitMQÊúçÂä°Âô®ÔºåÊØè‰∏™VirtualHost‰πãÈó¥ÊòØÁõ∏‰∫íÈöîÁ¶ªÁöÑ„ÄÇexchange„ÄÅqueue„ÄÅmessage‰∏çËÉΩ‰∫íÈÄö„ÄÇ Áõ∏ÂΩì‰∫émysqlÁöÑdb„ÄÇVirtual Name‰∏ÄËà¨‰ª•/ÂºÄÂ§¥„ÄÇ</p>
<h3 id="ÂàõÂª∫Virtual-Hosts"><a href="#ÂàõÂª∫Virtual-Hosts" class="headerlink" title="ÂàõÂª∫Virtual Hosts"></a>ÂàõÂª∫Virtual Hosts</h3><p><img src="/p/984e2ca0/RabbitMQ-%E5%88%9B%E5%BB%BAVirtualHosts.png" alt="image-20210619154832923"></p>
<h3 id="ËÆæÁΩÆVirtual-HostsÊùÉÈôê"><a href="#ËÆæÁΩÆVirtual-HostsÊùÉÈôê" class="headerlink" title="ËÆæÁΩÆVirtual HostsÊùÉÈôê"></a>ËÆæÁΩÆVirtual HostsÊùÉÈôê</h3><p><img src="/p/984e2ca0/RabbitMQ-%E8%AE%BE%E7%BD%AEVirtualHosts%E6%9D%83%E9%99%90.png" alt="image-20210619154957203"></p>
<p>![image-20210619155027666](MQ-RabbitMQ-Install/RabbitMQ - ËÆæÁΩÆVirtual HostsÊùÉÈôê.png)</p>
<p>userÔºöÁî®Êà∑Âêç</p>
<p>configure Ôºö‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÔºåÁî®Êà∑ÂØπÁ¨¶ÂêàËØ•Ê≠£ÂàôË°®ËææÂºèÁöÑÊâÄÊúâËµÑÊ∫êÊã•Êúâ configure Êìç‰ΩúÁöÑÊùÉÈôê</p>
<p>writeÔºö‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÔºåÁî®Êà∑ÂØπÁ¨¶ÂêàËØ•Ê≠£ÂàôË°®ËææÂºèÁöÑÊâÄÊúâËµÑÊ∫êÊã•Êúâ write Êìç‰ΩúÁöÑÊùÉÈôê</p>
<p>readÔºö‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÔºåÁî®Êà∑ÂØπÁ¨¶ÂêàËØ•Ê≠£ÂàôË°®ËææÂºèÁöÑÊâÄÊúâËµÑÊ∫êÊã•Êúâ read Êìç‰ΩúÁöÑÊùÉÈôê</p>
</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÊÉ∞ÊÄßÈòüÂàó</title>
    <url>/p/b8aa99c2.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="‰ªÄ‰πàÊòØÊÉ∞ÊÄßÈòüÂàó"><a href="#‰ªÄ‰πàÊòØÊÉ∞ÊÄßÈòüÂàó" class="headerlink" title="‰ªÄ‰πàÊòØÊÉ∞ÊÄßÈòüÂàó"></a>‰ªÄ‰πàÊòØÊÉ∞ÊÄßÈòüÂàó</h2><p>‚Äã        ÊÉ∞ÊÄßÈòüÂàó‰ºöÂ∞ΩÂèØËÉΩÁöÑÂ∞Ü‰ªª‰ΩïÊ∂àÊÅØÂ≠òÂÖ•Á£ÅÁõòÔºåËøôÊ†∑ÂèØ‰ª•ÂáèÂ∞ë‰∫ÜÂÜÖÂ≠òÁöÑÊ∂àËÄóÔºåÂΩìÊ∂àË¥πËÄÖÊ∂àË¥πÂà∞Áõ∏Â∫îÁöÑÊ∂àÊÅØÊó∂Êâç‰ºöË¢´Âä†ËΩΩÂà∞ÂÜÖÂ≠òÔºå‰ºöÂ¢ûÂä†I/OÁöÑ‰ΩøÁî®„ÄÇ</p>
<p>‰∏ãÈù¢Áúã‰∏ÄÁªÑ100‰∏áÊï∞ÊçÆÁöÑÂÜÖÂ≠òÂºÄÈîÄÔºö</p>
<p><img src="/p/b8aa99c2/RabbitMQ-%E6%83%B0%E6%80%A7%E9%98%9F%E5%88%97%E4%B8%8E%E6%99%AE%E9%80%9A%E9%98%9F%E5%88%97%E6%AF%94%E8%BE%83%E5%86%85%E5%AD%98%E5%BC%80%E9%94%80.png" alt="image-20210626204816045"></p>
<p>‚Äã        Âú®ÂèëÈÄÅ 1 Áôæ‰∏áÊù°Ê∂àÊÅØÔºåÊØèÊù°Ê∂àÊÅØÂ§ßÊ¶ÇÂç† 1KB ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊôÆÈÄöÈòüÂàóÂç†Áî®ÂÜÖÂ≠òÊòØ 1.2GBÔºåËÄåÊÉ∞ÊÄßÈòüÂàó‰ªÖ‰ªÖÂç†Áî® 1.5MB „ÄÇ</p>
<h2 id="Â∫îÁî®Âú∫ÊôØ"><a href="#Â∫îÁî®Âú∫ÊôØ" class="headerlink" title="Â∫îÁî®Âú∫ÊôØ"></a>Â∫îÁî®Âú∫ÊôØ</h2><p>Ôºà1ÔºâÊîØÊåÅÂ≠òÂÇ®Â§ßÈáèÊ∂àÊÅØÁöÑÈïøÈòüÂàó„ÄÇ  </p>
<p>Ôºà2ÔºâÊ∂àÊÅØÂ§ßÈáèÁßØÂéãÁöÑÊó∂ÂÄôÔºåÊ∂àË¥πÈÄüÂ∫¶Â§™ÊÖ¢ÔºåÂà∞‰∫ÜÊ∂àÊÅØÂ§ßÁàÜÂèëÁöÑÊó∂ÂÄôÔºåMQÊúçÂä°Âô®‰ºöÊíë‰∏ç‰ΩèÔºåÊú∫‰ºöÂΩ±ÂìçÂÖ∂ÂÆÉÈòüÂàóÁöÑÊ∂àÊÅØÊî∂Âèë„ÄÇÈÇ£‰πàÊ∂àÊÅØÂ∞±ÂèØ‰ª•ÂÜôÂÖ•Á£ÅÁõòÔºåÈúÄË¶ÅÁöÑÊó∂ÂÄôÂÜçÂä†ËΩΩÂà∞ÂÜÖÂ≠ò„ÄÇ</p>
<p>Ôºà3ÔºâÂΩìÊ∂àË¥πËÄÖÁî±‰∫éÂêÑÁßçÂêÑÊ†∑ÁöÑÂéüÂõ†ÔºàÊØîÂ¶ÇÊ∂àË¥πËÄÖ‰∏ãÁ∫ø„ÄÅÂÆïÊú∫‰∫¶ÊàñËÄÖÊòØÁî±‰∫éÁª¥Êä§ËÄåÂÖ≥Èó≠Á≠âÔºâËÄåËá¥‰ΩøÈïøÊó∂Èó¥ÂÜÖ‰∏çËÉΩÊ∂àË¥πÊ∂àÊÅØÈÄ†ÊàêÂ†ÜÁßØÊó∂ÔºåÊÉ∞ÊÄßÈòüÂàóÂ∞±ÂæàÊúâÂøÖË¶Å‰∫Ü„ÄÇ</p>
<h2 id="ÊÉ∞ÊÄßÈòüÂàó"><a href="#ÊÉ∞ÊÄßÈòüÂàó" class="headerlink" title="ÊÉ∞ÊÄßÈòüÂàó"></a>ÊÉ∞ÊÄßÈòüÂàó</h2><p>‚Äã        ÊÉ∞ÊÄßÈòüÂàóÊúâ‰∏§ÁßçÊ®°ÂºèÔºödefaultÂíålazy„ÄÇÈªòËÆ§defaultÊ®°ÂºèÔºåÂú®3.6.0‰πãÂâçÁöÑÁâàÊú¨Êó†ÈúÄÂÅö‰ªª‰ΩïÂèòÊõ¥„ÄÇlazyÊòØÊÉ∞ÊÄßÈòüÂàóÁöÑÊ®°ÂºèÔºåÂèØ‰ª•ÈÄöËøáË∞ÉÁî®channel.queueDeclareÊñπÊ≥ïÁöÑÊó∂ÂÄôÂú®ÂèÇÊï∞‰∏≠ËÆæÁΩÆÔºå‰πüÂèØ‰ª•ÈÄöËøáPolicyÁöÑÊñπÂºèËÆæÁΩÆÔºåÂ¶ÇÊûú‰∏Ä‰∏™ÈòüÂàóÂêåÊó∂‰ΩøÁî®Ëøô‰∏§ÁßçÊñπÂºèËÆæÁΩÆÁöÑËØùÔºåÈÇ£‰πàPolicyÁöÑÊñπÂºèÂÖ∑Â§áÊõ¥È´òÁöÑ‰ºòÂÖàÁ∫ß„ÄÇÂ¶ÇÊûúË¶ÅÈÄöËøáÂ£∞ÊòéÁöÑÊñπÂºèÊîπÂèòÂ∑≤ÊúâÈòüÂàóÁöÑÊ®°ÂºèÁöÑËØùÔºåÈÇ£‰πàÂè™ËÉΩÂÖàÂà†Èô§ÈòüÂàóÔºåÁÑ∂ÂêéÂÜçÈáçÊñ∞Â£∞Êòé‰∏Ä‰∏™Êñ∞ÁöÑ„ÄÇ</p>
<p>Âú®ÈòüÂàóÂ£∞ÊòéÁöÑÊó∂ÂÄôÂèØ‰ª•ÈÄöËøá‚Äúx-queue-mode‚ÄùÂèÇÊï∞Êù•ËÆæÁΩÆÈòüÂàóÁöÑÊ®°ÂºèÔºåÂèñÂÄº‰∏∫‚Äúdefault‚ÄùÂíå‚Äúlazy‚Äù„ÄÇ‰∏ãÈù¢Á§∫‰æã‰∏≠ÊºîÁ§∫‰∫Ü‰∏Ä‰∏™ÊÉ∞ÊÄßÈòüÂàóÁöÑÂ£∞ÊòéÁªÜËäÇÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Map&lt;String, Object&gt; args = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">args.put(<span class="string">"x-queue-mode"</span>, <span class="string">"lazy"</span>);</span><br><span class="line"><span class="comment">// Ê∂àÊÅØÂà∞Â∫ïÈúÄ‰∏çÈúÄË¶ÅÊåÅ‰πÖÂåñÔºü</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">durable</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">channel.queueDeclare(<span class="string">"myqueue"</span>, durable, <span class="literal">false</span>, <span class="literal">false</span>, args);  </span><br></pre></td></tr></tbody></table></figure>

<p>lazy queue Ê∂àÊÅØ‰∏çÊåÅ‰πÖÂåñ Ôºå ‰ΩÜÊòØËøôÁßçÊ®°ÂºèËøòÊòØ‰ºöÊääÊ∂àÊÅØÊîæÂà∞Á°¨ÁõòÈáåÔºåRAMÁöÑ‰ΩøÁî®Áéá‰ºö‰∏ÄÁõ¥ÂæàÁ®≥ÂÆöÔºå‰ΩÜÊòØÈáçÂêØÂêé‰∏ÄÊ†∑‰ºö‰∏¢Â§±Ê∂àÊÅØ</p>
<p>lazy queue Ê∂àÊÅØÊåÅ‰πÖÂåñÔºåËøôÁßçÊñπÂºèÊó†ÁñëÊòØÊúÄ‰Ω≥Êê≠ÈÖçÔºåÊ∂àÊÅØÊîæÂà∞Á°¨ÁõòÂπ∂‰∏î‰∏ç‰ºöÂõ†‰∏∫ÊúçÂä°Âô®ÈáçÂêØËÄå‰∏¢Â§±ÔºåÈù¢ÂØπÈ´òÂπ∂Âèë‰πüÊòØ‰ªéÂÆπ‰∏çÂ∑≤„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÊ∂àÊÅØÂ∫îÁ≠î(ACK)</title>
    <url>/p/d8b7ee3.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Âú∫ÊôØ"><a href="#Âú∫ÊôØ" class="headerlink" title="Âú∫ÊôØ"></a>Âú∫ÊôØ</h2><p>Ê∂àË¥πËÄÖÂÆåÊàê‰∏Ä‰∏™‰ªªÂä°ÂèØËÉΩÈúÄË¶Å‰∏ÄÊÆµÊó∂Èó¥ÔºåÂ¶ÇÊûúÂÖ∂‰∏≠‰∏Ä‰∏™Ê∂àË¥πËÄÖÂ§ÑÁêÜ‰∏Ä‰∏™ÈïøÁöÑ‰ªªÂä°Âπ∂‰ªÖÂè™ÂÆåÊàê‰∫ÜÈÉ®ÂàÜÁ™ÅÁÑ∂ÂÆÉÊåÇÊéâ‰∫ÜÔºå‰ºöÂèëÁîü‰ªÄ‰πàÊÉÖÂÜµÔºüRabbitMQ ‰∏ÄÊó¶ÂêëÊ∂àË¥πËÄÖ‰º†ÈÄí‰∫Ü‰∏ÄÊù°Ê∂àÊÅØÔºå‰æøÁ´ãÂç≥Â∞ÜËØ•Ê∂àÊÅØÊ†áËÆ∞‰∏∫Âà†Èô§„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÁ™ÅÁÑ∂Êúâ‰∏™Ê∂àË¥πËÄÖÊåÇÊéâ‰∫ÜÔºåÊàë‰ª¨Â∞Ü‰∏¢Â§±Ê≠£Âú®Â§ÑÁêÜÁöÑÊ∂àÊÅØ„ÄÇ‰ª•ÂèäÂêéÁª≠ÂèëÈÄÅÁªôËØ•Ê∂àË¥πËøôÁöÑÊ∂àÊÅØÔºåÂõ†‰∏∫ÂÆÉÊó†Ê≥ïÊé•Êî∂Âà∞„ÄÇ</p>
<p>‰∏∫‰∫Ü‰øùËØÅÊ∂àÊÅØÂú®ÂèëÈÄÅËøáÁ®ã‰∏≠‰∏ç‰∏¢Â§±Ôºårabbitmq ÂºïÂÖ•Ê∂àÊÅØÂ∫îÁ≠îÊú∫Âà∂ÔºåÊ∂àÊÅØÂ∫îÁ≠îÂ∞±ÊòØÔºö<strong>Ê∂àË¥πËÄÖÂú®Êé•Êî∂Âà∞Ê∂àÊÅØÂπ∂‰∏îÂ§ÑÁêÜËØ•Ê∂àÊÅØ‰πãÂêéÔºåÂëäËØâ rabbitmq ÂÆÉÂ∑≤ÁªèÂ§ÑÁêÜ‰∫ÜÔºårabbitmq ÂèØ‰ª•ÊääËØ•Ê∂àÊÅØÂà†Èô§‰∫Ü„ÄÇ</strong></p>
<p><img src="/p/d8b7ee3/image-20220505233249302.png" alt="image-20220505233249302"></p>
<h2 id="Ëá™Âä®Â∫îÁ≠î"><a href="#Ëá™Âä®Â∫îÁ≠î" class="headerlink" title="Ëá™Âä®Â∫îÁ≠î"></a>Ëá™Âä®Â∫îÁ≠î</h2><p>Ê∂àË¥πËÄÖÊé•Êî∂Âà∞Áîü‰∫ßËÄÖÂèëÈÄÅÁöÑÊ∂àÊÅØÂêéÔºåÂ∞±‰ºöËøõË°åTCPÂçèËÆÆÁöÑACKÂ∫îÁ≠îÔºåË°®Á§∫Â∑≤Áªè‰º†ÈÄÅÊàêÂäüÔºåËøôÁßçÊ®°ÂºèÈúÄË¶ÅÂú®<strong>È´òÂêûÂêêÈáèÂíåÊï∞ÊçÆ‰º†ËæìÂÆâÂÖ®ÊÄßÊñπÈù¢ÂÅöÊùÉË°°</strong>ÔºåÂõ†‰∏∫ËøôÁßçÊ®°ÂºèÂ¶ÇÊûúÊ∂àÊÅØÂú®Êé•Êî∂Âà∞‰πãÂâçÔºåÊ∂àË¥πËÄÖÈÇ£ËæπÂá∫Áé∞ËøûÊé•ÊàñËÄÖ channel ÂÖ≥Èó≠ÔºåÈÇ£‰πàÊ∂àÊÅØÂ∞±‰∏¢Â§±‰∫Ü„ÄÇ</p>
<p>Âè¶‰∏ÄÊñπÈù¢ËøôÁßçÊ®°ÂºèÊ∂àË¥πËÄÖÈÇ£ËæπÂèØ‰ª•‰º†ÈÄíËøáËΩΩÁöÑÊ∂àÊÅØÔºå<strong>Ê≤°ÊúâÂØπ‰º†ÈÄíÁöÑÊ∂àÊÅØÊï∞ÈáèËøõË°åÈôêÂà∂</strong>ÔºåÂΩìÁÑ∂ËøôÊ†∑ÊúâÂèØËÉΩ‰ΩøÂæóÊ∂àË¥πËÄÖËøôËæπÁî±‰∫éÊé•Êî∂Â§™Â§öËøòÊù•‰∏çÂèäÂ§ÑÁêÜÁöÑÊ∂àÊÅØÔºåÂØºËá¥Ëøô‰∫õÊ∂àÊÅØÁöÑÁßØÂéãÔºåÊúÄÁªà‰ΩøÂæóÂÜÖÂ≠òËÄóÂ∞ΩÔºåÊúÄÁªàËøô‰∫õÊ∂àË¥πËÄÖÁ∫øÁ®ãË¢´Êìç‰ΩúÁ≥ªÁªüÊùÄÊ≠ªÔºå<strong>ÊâÄ‰ª•ËøôÁßçÊ®°Âºè‰ªÖÈÄÇÁî®Âú®Ê∂àË¥πËÄÖÂèØ‰ª•È´òÊïàÂπ∂‰ª•ÊüêÁßçÈÄüÁéáËÉΩÂ§üÂ§ÑÁêÜËøô‰∫õÊ∂àÊÅØÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®</strong>„ÄÇ</p>
<h2 id="Ê∂àÊÅØÂ∫îÁ≠îÁöÑÊñπÊ≥ï"><a href="#Ê∂àÊÅØÂ∫îÁ≠îÁöÑÊñπÊ≥ï" class="headerlink" title="Ê∂àÊÅØÂ∫îÁ≠îÁöÑÊñπÊ≥ï"></a>Ê∂àÊÅØÂ∫îÁ≠îÁöÑÊñπÊ≥ï</h2><ul>
<li>Channel.basicAck(Áî®‰∫éËÇØÂÆöÁ°ÆËÆ§)ÔºåRabbitMQ Â∑≤Áü•ÈÅìËØ•Ê∂àÊÅØÂπ∂‰∏îÊàêÂäüÁöÑÂ§ÑÁêÜÊ∂àÊÅØÔºåÂèØ‰ª•Â∞ÜÂÖ∂‰∏¢ÂºÉ‰∫Ü„ÄÇ</li>
<li>Channel.basicNack(Áî®‰∫éÂê¶ÂÆöÁ°ÆËÆ§) </li>
<li>Channel.basicReject(Áî®‰∫éÂê¶ÂÆöÁ°ÆËÆ§) ‰∏é Channel.basicNack() Áõ∏ÊØîÂ∞ë‰∏Ä‰∏™ÂèÇÊï∞Ôºå‰∏çÂ§ÑÁêÜËØ•Ê∂àÊÅØ‰∫ÜÁõ¥Êé•ÊãíÁªùÔºåÂèØ‰ª•Â∞ÜÂÖ∂‰∏¢ÂºÉ‰∫Ü</li>
</ul>
<h2 id="Multiple-ÊâπÈáè"><a href="#Multiple-ÊâπÈáè" class="headerlink" title="Multiple(ÊâπÈáè)"></a>Multiple(ÊâπÈáè)</h2><p>ÊâãÂä®Â∫îÁ≠îÁöÑÂ•ΩÂ§ÑÊòØÂèØ‰ª•ÊâπÈáèÂ∫îÁ≠îÂπ∂‰∏îÂáèÂ∞ëÁΩëÁªúÊã•Â†µ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> multiple true to acknowledge all messages up to and</span></span><br><span class="line"><span class="comment"> * including the supplied delivery tag; false to acknowledge just </span></span><br><span class="line"><span class="comment"> * the supplied delivery tag.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">basicAck</span><span class="params">(<span class="type">long</span> deliveryTag, <span class="type">boolean</span> multiple)</span> <span class="keyword">throws</span> IOException;</span><br></pre></td></tr></tbody></table></figure>

<p>multiple ÁöÑ true Âíå false ‰ª£Ë°®‰∏çÂêåÊÑèÊÄùÔºö</p>
<ul>
<li><p>true ‰ª£Ë°®ÊâπÈáèÂ∫îÁ≠î channel ‰∏äÊú™Â∫îÁ≠îÁöÑÊ∂àÊÅØÔºåÊØîÂ¶ÇËØ¥ channel ‰∏äÊúâ‰º†ÈÄÅ tag ÁöÑÊ∂àÊÅØ 5,6,7,8 ÂΩìÂâç tag ÊòØ 8 ÈÇ£‰πàÊ≠§Êó∂ 5-8 ÁöÑËøô‰∫õËøòÊú™Â∫îÁ≠îÁöÑÊ∂àÊÅØÈÉΩ‰ºöË¢´Á°ÆËÆ§Êî∂Âà∞Ê∂àÊÅØÂ∫îÁ≠î„ÄÇ</p>
</li>
<li><p>false Âêå‰∏äÈù¢Áõ∏ÊØîÂè™‰ºöÂ∫îÁ≠î tag=8 ÁöÑÊ∂àÊÅØ 5,6,7 Ëøô‰∏â‰∏™Ê∂àÊÅØ‰æùÁÑ∂‰∏ç‰ºöË¢´Á°ÆËÆ§Êî∂Âà∞Ê∂àÊÅØÂ∫îÁ≠î„ÄÇ</p>
</li>
</ul>
<p>Âª∫ËÆÆÊ≤°ÊúâÁâπÊÆäË¶ÅÊ±ÇÈÉΩËÆæÁΩÆ‰∏∫ false„ÄÇ</p>
<h2 id="Â¶Ç‰ΩïÈÅøÂÖçÂÜÖÂ≠òËÄóÂ∞ΩÔºü"><a href="#Â¶Ç‰ΩïÈÅøÂÖçÂÜÖÂ≠òËÄóÂ∞ΩÔºü" class="headerlink" title="Â¶Ç‰ΩïÈÅøÂÖçÂÜÖÂ≠òËÄóÂ∞ΩÔºü"></a>Â¶Ç‰ΩïÈÅøÂÖçÂÜÖÂ≠òËÄóÂ∞ΩÔºü</h2><p>ÈÄöËøáËÆæÁΩÆChannelÁöÑQOSÊù•ÈôêÂà∂ÂÆ¢Êà∑Á´ØÊé•ÂèóÊ∂àÊÅØÊúÄÂ§ßÊï∞Èáè„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">channel.BasicQos(<span class="number">0</span>,<span class="number">1</span>,<span class="literal">false</span>);</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Ê∂àÊÅØËá™Âä®ÈáçÊñ∞ÂÖ•Èòü"><a href="#Ê∂àÊÅØËá™Âä®ÈáçÊñ∞ÂÖ•Èòü" class="headerlink" title="Ê∂àÊÅØËá™Âä®ÈáçÊñ∞ÂÖ•Èòü"></a>Ê∂àÊÅØËá™Âä®ÈáçÊñ∞ÂÖ•Èòü</h2><p>Â¶ÇÊûúÊ∂àË¥πËÄÖÁî±‰∫éÊüê‰∫õÂéüÂõ†Â§±ÂéªËøûÊé•(ÂÖ∂ÈÄöÈÅìÂ∑≤ÂÖ≥Èó≠ÔºåËøûÊé•Â∑≤ÂÖ≥Èó≠Êàñ TCP ËøûÊé•‰∏¢Â§±)ÔºåÂØºËá¥Ê∂àÊÅØÊú™ÂèëÈÄÅ ACK Á°ÆËÆ§ÔºåRabbitMQ Â∞Ü‰∫ÜËß£Âà∞Ê∂àÊÅØÊú™ÂÆåÂÖ®Â§ÑÁêÜÔºåÂπ∂Â∞ÜÂØπÂÖ∂ÈáçÊñ∞ÊéíÈòü„ÄÇÂ¶ÇÊûúÊ≠§Êó∂ÂÖ∂‰ªñÊ∂àË¥πËÄÖÂèØ‰ª•Â§ÑÁêÜÔºåÂÆÉÂ∞ÜÂæàÂø´Â∞ÜÂÖ∂ÈáçÊñ∞ÂàÜÂèëÁªôÂè¶‰∏Ä‰∏™Ê∂àË¥πËÄÖ„ÄÇËøôÊ†∑ÔºåÂç≥‰ΩøÊüê‰∏™Ê∂àË¥πËÄÖÂÅ∂Â∞îÊ≠ª‰∫°Ôºå‰πüÂèØ‰ª•Á°Æ‰øù‰∏ç‰ºö‰∏¢Â§±‰ªª‰ΩïÊ∂àÊÅØ„ÄÇ</p>
<p><img src="/p/d8b7ee3/RabbitMQ-%E6%B6%88%E6%81%AF%E8%87%AA%E5%8A%A8%E9%87%8D%E6%96%B0%E5%85%A5%E9%98%9F%E6%9C%BA%E5%88%B6.png" alt="image-20210619230427516"></p>
<h2 id="Ê∂àÊÅØÊâãÂä®Â∫îÁ≠îÊ≥®ÊÑè‰∫ãÈ°π"><a href="#Ê∂àÊÅØÊâãÂä®Â∫îÁ≠îÊ≥®ÊÑè‰∫ãÈ°π" class="headerlink" title="Ê∂àÊÅØÊâãÂä®Â∫îÁ≠îÊ≥®ÊÑè‰∫ãÈ°π"></a>Ê∂àÊÅØÊâãÂä®Â∫îÁ≠îÊ≥®ÊÑè‰∫ãÈ°π</h2><p>ÊâãÂä®Â∫îÁ≠îÂ∞±ÊòØÊâãÂä®ÊéßÂà∂‰ªÄ‰πàÊó∂ÂÄôËøõË°åACKÂ∫îÁ≠î„ÄÇÈªòËÆ§Ê∂àÊÅØÈááÁî®ÁöÑÊòØËá™Âä®Â∫îÁ≠îÔºåÊâÄ‰ª•Ë¶ÅÊÉ≥ÂÆûÁé∞Ê∂àÊÅØÊ∂àË¥πËøáÁ®ã‰∏≠‰∏ç‰∏¢Â§±ÔºåÈúÄË¶ÅÊääËá™Âä®Â∫îÁ≠î‰øÆÊîπ‰∏∫ÊâãÂä®Â∫îÁ≠î„ÄÇ</p>
<p><strong>‰ª£Á†ÅÁ§∫‰æã</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageConfirmProducer</span> {</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> ACK_QUEUE_NAME;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="comment">// Âª∫Á´ãËøûÊé•</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="comment">// ÂàõÂª∫‰∏Ä‰∏™ËøûÊé•‰∏≠ÁöÑchannel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">            channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, <span class="literal">null</span>, (msg).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">            System.out.println(<span class="string">"Ê∂àÊÅØ["</span> + msg + <span class="string">"]ÂèëÈÄÅÂÆåÊàê"</span>);</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        channel.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ê∂àË¥πËÄÖ1„ÄÅ2„ÄÅ3‰ª£Á†Å</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageConfirmConsumer1</span> {</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> ACK_QUEUE_NAME;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">// Â£∞ÊòéÈòüÂàó-channel.queueDeclare(ÂêçÁß∞ÔºåÊòØÂê¶ÊåÅ‰πÖÂåñÔºåÊòØÂê¶Áã¨Âç†Êú¨ËøûÊé•,ÊòØÂê¶Ëá™Âä®Âà†Èô§,ÈôÑÂä†ÂèÇÊï∞)</span></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Consumer</span> <span class="variable">callback</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel) {</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> consumerTag Ê∂àË¥πËÄÖÊ†áÁ≠æÔºåÂú®channel.basicConsumeÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆö</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> envelope Ê∂àÊÅØÂåÖÁöÑÂÜÖÂÆπÔºåÂèØ‰ªé‰∏≠Ëé∑ÂèñÊ∂àÊÅØidÔºåÊ∂àÊÅØroutingkeyÔºå‰∫§Êç¢Êú∫ÔºåÊ∂àÊÅØÂíåÈáç‰º†Ê†áÂøó(Êî∂Âà∞Ê∂àÊÅØÂ§±Ë¥•ÂêéÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ)</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> properties  Â±ûÊÄß‰ø°ÊÅØ(Áîü‰∫ßËÄÖÁöÑÂèëÈÄÅÊó∂ÊåáÂÆö)</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> body Ê∂àÊÅØÂÜÖÂÆπ</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@throws</span> IOException e</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">                <span class="comment">//Ë∑ØÁî±ÁöÑkey</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">routingKey</span> <span class="operator">=</span> envelope.getRoutingKey();</span><br><span class="line">                <span class="comment">//Ëé∑Âèñ‰∫§Êç¢Êú∫‰ø°ÊÅØ</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">exchange</span> <span class="operator">=</span> envelope.getExchange();</span><br><span class="line">                <span class="comment">//Ëé∑ÂèñÊ∂àÊÅØID</span></span><br><span class="line">                <span class="type">long</span> <span class="variable">deliveryTag</span> <span class="operator">=</span> envelope.getDeliveryTag();</span><br><span class="line">                <span class="comment">//Ëé∑ÂèñÊ∂àÊÅØ‰ø°ÊÅØ</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(body, StandardCharsets.UTF_8);</span><br><span class="line">                System.out.println(<span class="string">"routingKey:"</span> + routingKey +</span><br><span class="line">                        <span class="string">",exchange:"</span> + exchange +</span><br><span class="line">                        <span class="string">",deliveryTag:"</span> + deliveryTag +</span><br><span class="line">                        <span class="string">",message:"</span> + message);</span><br><span class="line">                <span class="comment">// ËÆæÁΩÆ‰∏∫‰∏çÊâπÈáèÂ∫îÁ≠î</span></span><br><span class="line">                <span class="type">boolean</span> <span class="variable">multiple</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">                <span class="comment">// deliveryTagÊòØÊ∂àÊÅØÊ†áËÆ∞tag</span></span><br><span class="line">                channel.basicAck(deliveryTag, multiple);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ‰ΩøÁî®ÊâãÂä®Â∫îÁ≠î</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">autoAck</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        channel.basicConsume(QUEUE_NAME, autoAck, callback);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÊ∂àÊÅØÁöÑÂèëÂ∏ÉÁ°ÆËÆ§(‰∏ä)</title>
    <url>/p/607540b1.html</url>
    <content><![CDATA[<html><head></head><body><p>Âú∫ÊôØÊèèËø∞ÔºöÊ∂àÊÅØÊåÅ‰πÖÂåñÊòØÊåáÊ∂àÊÅØ‰øùÂ≠òÂú®Á£ÅÁõò‰∏äÔºåÂ¶ÇÊûúÊ∂àÊÅØËøòÊ≤°Êù•ÂæóÂèäÂÜôÂÖ•Á£ÅÁõòÂ∞±ÂèëÁîüÂÆïÊú∫ÔºåÈÇ£‰πàÊ∂àÊÅØ‰∏ÄÊ†∑‰ºöÂèëÁîü‰∏¢Â§±„ÄÇ</p>
<p>Ëß£ÂÜ≥ÊñπÊ°àÔºöÁîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÁöÑÂà∞‰∫ÜÊâÄÊúâÂåπÈÖçÁöÑÈòüÂàó‰πãÂêéÔºåÈòüÂàóÂÜôÂÖ•Á£ÅÁõòÊàêÂäüÂêéÂÜçÂõûÂ§çÁîü‰∫ßËÄÖ„ÄÇ</p>
<blockquote>
<p><strong>Â¶Ç‰Ωï100%Á°Æ‰øùÊ∂àÊÅØ‰∏ç‰∏¢Â§±Ôºü</strong></p>
</blockquote>
<p>ÂÅöÂ•ΩËøô‰∏âÊ≠•ÔºåÊ∂àÊÅØÊâçËÉΩÁªùÂØπ‰∏ç‰∏¢Â§±Ôºö</p>
<p>‚ë†ÈòüÂàóÊåÅ‰πÖÂåñ</p>
<p>‚ë°ÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØÊåÅ‰πÖÂåñ</p>
<p>‚ë¢ÂèëÂ∏ÉÁ°ÆËÆ§</p>
<h2 id="ÂèëÂ∏ÉÁ°ÆËÆ§ÂéüÁêÜ"><a href="#ÂèëÂ∏ÉÁ°ÆËÆ§ÂéüÁêÜ" class="headerlink" title="ÂèëÂ∏ÉÁ°ÆËÆ§ÂéüÁêÜ"></a>ÂèëÂ∏ÉÁ°ÆËÆ§ÂéüÁêÜ</h2><p>‚Äã        Áîü‰∫ßËÄÖÂ∞Ü‰ø°ÈÅìËÆæÁΩÆÊàê confirm Ê®°ÂºèÔºå‰∏ÄÊó¶‰ø°ÈÅìËøõÂÖ• confirm Ê®°ÂºèÔºå<strong>ÊâÄÊúâÂú®ËØ•‰ø°ÈÅì‰∏äÈù¢ÂèëÂ∏ÉÁöÑÊ∂àÊÅØÈÉΩÂ∞Ü‰ºöË¢´ÊåáÊ¥æ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ ID</strong>(‰ªé 1 ÂºÄÂßã)Ôºå‰∏ÄÊó¶Ê∂àÊÅØË¢´ÊäïÈÄíÂà∞ÊâÄÊúâÂåπÈÖçÁöÑÈòüÂàó‰πãÂêéÔºåbrokerÂ∞±‰ºöÂèëÈÄÅ‰∏Ä‰∏™Á°ÆËÆ§ÁªôÁîü‰∫ßËÄÖ(ÂåÖÂê´Ê∂àÊÅØÁöÑÂîØ‰∏Ä ID)ÔºåËøôÂ∞±‰ΩøÂæóÁîü‰∫ßËÄÖÁü•ÈÅìÊ∂àÊÅØÂ∑≤ÁªèÊ≠£Á°ÆÂà∞ËææÁõÆÁöÑÈòüÂàó‰∫ÜÔºåÂ¶ÇÊûúÊ∂àÊÅØÂíåÈòüÂàóÊòØÂèØÊåÅ‰πÖÂåñÁöÑÔºåÈÇ£‰πàÁ°ÆËÆ§Ê∂àÊÅØ‰ºöÂú®Â∞ÜÊ∂àÊÅØÂÜôÂÖ•Á£ÅÁõò‰πãÂêéÂèëÂá∫Ôºåbroker Âõû‰º†ÁªôÁîü‰∫ßËÄÖÁöÑÁ°ÆËÆ§Ê∂àÊÅØ‰∏≠ delivery-tag ÂüüÂåÖÂê´‰∫ÜÁ°ÆËÆ§Ê∂àÊÅØÁöÑÂ∫èÂàóÂè∑ÔºåÊ≠§Â§ñ broker ‰πüÂèØ‰ª•ËÆæÁΩÆbasic.ack ÁöÑ multiple ÂüüÔºåË°®Á§∫Âà∞Ëøô‰∏™Â∫èÂàóÂè∑‰πãÂâçÁöÑÊâÄÊúâÊ∂àÊÅØÈÉΩÂ∑≤ÁªèÂæóÂà∞‰∫ÜÂ§ÑÁêÜ„ÄÇ</p>
<p>‚Äã        confirm Ê®°ÂºèÊúÄÂ§ßÁöÑÂ•ΩÂ§ÑÂú®‰∫é‰ªñÊòØÂºÇÊ≠•ÁöÑÔºå‰∏ÄÊó¶ÂèëÂ∏É‰∏ÄÊù°Ê∂àÊÅØÔºåÁîü‰∫ßËÄÖÂ∫îÁî®Á®ãÂ∫èÂ∞±ÂèØ‰ª•Âú®Á≠â‰ø°ÈÅìËøîÂõûÁ°ÆËÆ§ÁöÑÂêåÊó∂ÁªßÁª≠ÂèëÈÄÅ‰∏ã‰∏ÄÊù°Ê∂àÊÅØÔºåÂΩìÊ∂àÊÅØÊúÄÁªàÂæóÂà∞Á°ÆËÆ§‰πãÂêéÔºåÁîü‰∫ßËÄÖÂ∫îÁî®‰æøÂèØ‰ª•ÈÄöËøáÂõûË∞ÉÊñπÊ≥ïÊù•Â§ÑÁêÜËØ•Á°ÆËÆ§Ê∂àÊÅØÔºåÂ¶ÇÊûú RabbitMQ Âõ†‰∏∫Ëá™Ë∫´ÂÜÖÈÉ®ÈîôËØØÂØºËá¥Ê∂àÊÅØ‰∏¢Â§±ÔºåÂ∞±‰ºöÂèëÈÄÅ‰∏ÄÊù° nack Ê∂àÊÅØÔºåÁîü‰∫ßËÄÖÂ∫îÁî®Á®ãÂ∫èÂêåÊ†∑ÂèØ‰ª•Âú®ÂõûË∞ÉÊñπÊ≥ï‰∏≠Â§ÑÁêÜËØ• nack Ê∂àÊÅØ„ÄÇ</p>
<h2 id="ÂèëÂ∏ÉÁ°ÆËÆ§Á≠ñÁï•"><a href="#ÂèëÂ∏ÉÁ°ÆËÆ§Á≠ñÁï•" class="headerlink" title="ÂèëÂ∏ÉÁ°ÆËÆ§Á≠ñÁï•"></a>ÂèëÂ∏ÉÁ°ÆËÆ§Á≠ñÁï•</h2><p>ÂèëÂ∏ÉÁ°ÆËÆ§ÈªòËÆ§ÊòØÊ≤°ÊúâÂºÄÂêØÁöÑÔºåÂ¶ÇÊûúË¶ÅÂºÄÂêØÈúÄË¶ÅË∞ÉÁî®ÊñπÊ≥ï confirmSelect„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">channel.confirmSelect();</span><br></pre></td></tr></tbody></table></figure>

<p>ÂèëÂ∏É‰∏ÄÊù°Ê∂àÊÅØÁ°ÆËÆ§‰∏ÄÊ¨°ÔºåËøòÊòØÂèëÂ∏É‰∏ÄÊâπÊ∂àÊÅØÁ°ÆËÆ§‰∏ÄÊ¨°Âë¢ÔºüRabbitMQÊèê‰æõ‰∫Ü‰ª•‰∏ãÂá†ÁßçÁ≠ñÁï•Ôºö</p>
<h3 id="Âçï‰∏™ÂèëÂ∏ÉÁ°ÆËÆ§"><a href="#Âçï‰∏™ÂèëÂ∏ÉÁ°ÆËÆ§" class="headerlink" title="Âçï‰∏™ÂèëÂ∏ÉÁ°ÆËÆ§"></a>Âçï‰∏™ÂèëÂ∏ÉÁ°ÆËÆ§</h3><p>‚Äã        Âèë‰∏ÄÊù°Á°ÆËÆ§‰∏ÄÊù°ÔºåÁ°ÆËÆ§ÂêéÊâçËÉΩÁªßÁª≠ÂèëÈÄÅ‰∏ã‰∏ÄÊù°„ÄÇËøôÊòØ‰∏ÄÁßçÁÆÄÂçïÁöÑÁ°ÆËÆ§ÊñπÂºèÔºåÂÆÉÊòØ‰∏ÄÁßç<strong>ÂêåÊ≠•Á°ÆËÆ§ÂèëÂ∏É</strong>ÁöÑÊñπÂºè„ÄÇwaitForConfirmsOrDie(long)Ëøô‰∏™ÊñπÊ≥ïÂè™ÊúâÂú®Ê∂àÊÅØË¢´Á°ÆËÆ§ÁöÑÊó∂ÂÄôÊâçËøîÂõûÔºåÂ¶ÇÊûúÂú®ÊåáÂÆöÊó∂Èó¥ËåÉÂõ¥ÂÜÖËøô‰∏™Ê∂àÊÅØÊ≤°ÊúâË¢´Á°ÆËÆ§ÈÇ£‰πàÂÆÉÂ∞ÜÊäõÂá∫ÂºÇÂ∏∏„ÄÇ</p>
<p>‚Äã        ËøôÁßçÁ°ÆËÆ§ÊñπÂºèÊúâ‰∏Ä‰∏™ÊúÄÂ§ßÁöÑÁº∫ÁÇπÂ∞±ÊòØÔºö<strong>ÂèëÂ∏ÉÈÄüÂ∫¶ÁâπÂà´ÊÖ¢Ôºå</strong>Âõ†‰∏∫Â¶ÇÊûúÊ≤°ÊúâÁ°ÆËÆ§ÂèëÂ∏ÉÁöÑÊ∂àÊÅØÂ∞±‰ºöÈòªÂ°ûÊâÄÊúâÂêéÁª≠Ê∂àÊÅØÁöÑÂèëÂ∏ÉÔºåËøôÁßçÊñπÂºèÊúÄÂ§öÊèê‰æõÊØèÁßí‰∏çË∂ÖËøáÊï∞ÁôæÊù°ÂèëÂ∏ÉÊ∂àÊÅØÁöÑÂêûÂêêÈáè„ÄÇÂΩìÁÑ∂ÂØπ‰∫éÊüê‰∫õÂ∫îÁî®Á®ãÂ∫èÊù•ËØ¥ËøôÂèØËÉΩÂ∑≤ÁªèË∂≥Â§ü‰∫Ü„ÄÇ</p>
<p><strong>‰ª£Á†ÅÂÆûÁé∞</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"confirm"</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">singleConfirm</span><span class="params">()</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">    <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> getChannel();</span><br><span class="line">    <span class="comment">// ÁªëÂÆöÈòüÂàó</span></span><br><span class="line">    channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§Êú∫Âà∂</span></span><br><span class="line">    channel.confirmSelect();</span><br><span class="line">    <span class="comment">// Áî®‰∫éÁªüËÆ°ÂèëÈÄÅ1000Êù°Ê∂àÊÅØËä±Ë¥πÁöÑÊó∂Èó¥</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">1000</span>; i++) {</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">        channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, <span class="literal">null</span>, (msg).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> channel.waitForConfirms();</span><br><span class="line">        <span class="keyword">if</span> (flag) {</span><br><span class="line">            System.out.println(<span class="string">"Ê∂àÊÅØ["</span> + msg + <span class="string">"]ÂèëÈÄÅÂÆåÊàê"</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            System.err.println(<span class="string">"Ê∂àÊÅØ["</span> + msg + <span class="string">"]ÂèëÈÄÅÂ§±Ë¥•"</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"ÂèëÈÄÅÊ∂àÊÅØÂÆåÊàêÔºåËÄóÊó∂Ôºö"</span> + (end - start) + <span class="string">"ms"</span>);</span><br><span class="line">}</span><br><span class="line"><span class="comment">// ÊäΩÂèñÊñπÊ≥ï</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Channel <span class="title function_">getChannel</span><span class="params">()</span> <span class="keyword">throws</span> IOException, TimeoutException {</span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">    connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">    connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">    connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">    connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">    <span class="keyword">return</span> connection.createChannel();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûú</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">ÂèëÈÄÅÊ∂àÊÅØÂÆåÊàêÔºåËÄóÊó∂Ôºö686ms</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÊâπÈáèÁ°ÆËÆ§ÂèëÂ∏É"><a href="#ÊâπÈáèÁ°ÆËÆ§ÂèëÂ∏É" class="headerlink" title="ÊâπÈáèÁ°ÆËÆ§ÂèëÂ∏É"></a>ÊâπÈáèÁ°ÆËÆ§ÂèëÂ∏É</h3><p>Âçï‰∏™ÂèëÂ∏ÉÁ°ÆËÆ§ÁöÑÊñπÂºèÈùûÂ∏∏ÊÖ¢ÔºåÊâπÈáèÂèëÂ∏É‰∏é‰πãÁõ∏ÊØîÔºåÂÖàÂèëÂ∏É‰∏ÄÊâπÊ∂àÊÅØÁÑ∂Âêé‰∏ÄËµ∑Á°ÆËÆ§ÂèØ‰ª•ÊûÅÂ§ßÂú∞ÊèêÈ´òÂêûÂêêÈáèÔºåÂΩìÁÑ∂ËøôÁßçÊñπÂºèÁöÑÁº∫ÁÇπÂ∞±ÊòØÔºöÂΩìÂèëÁîüÊïÖÈöúÂØºËá¥ÂèëÂ∏ÉÂá∫Áé∞ÈóÆÈ¢òÊó∂Ôºå‰∏çÁü•ÈÅìÊòØÂì™‰∏™Ê∂àÊÅØÂá∫Áé∞ÈóÆÈ¢ò‰∫ÜÔºåÊàë‰ª¨ÂøÖÈ°ªÂ∞ÜÊï¥‰∏™ÊâπÂ§ÑÁêÜ‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠Ôºå‰ª•ËÆ∞ÂΩïÈáçË¶ÅÁöÑ‰ø°ÊÅØËÄåÂêéÈáçÊñ∞ÂèëÂ∏ÉÊ∂àÊÅØ„ÄÇÂΩìÁÑ∂ËøôÁßçÊñπÊ°à‰ªçÁÑ∂ÊòØÂêåÊ≠•ÁöÑÔºå‰πü‰∏ÄÊ†∑ÈòªÂ°ûÊ∂àÊÅØÁöÑÂèëÂ∏É„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">multipleConfirm</span><span class="params">()</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">    <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> getChannel();</span><br><span class="line">    <span class="comment">// ÁªëÂÆöÈòüÂàó</span></span><br><span class="line">    channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§Êú∫Âà∂</span></span><br><span class="line">    channel.confirmSelect();</span><br><span class="line">    <span class="comment">// Áî®‰∫éÁªüËÆ°ÂèëÈÄÅ1000Êù°Ê∂àÊÅØËä±Ë¥πÁöÑÊó∂Èó¥</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="comment">// ÊâπÈáèÁ°ÆËÆ§Ê∂àÊÅØÂ§ßÂ∞è</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">batchSize</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">1000</span>; i++) {</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">        channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, <span class="literal">null</span>, (msg).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        <span class="comment">// ÊØèÂèëÂ∏É200Êù°Ê∂àÊÅØÁ°ÆËÆ§‰∏ÄÊ¨°</span></span><br><span class="line">        <span class="keyword">if</span> (i % batchSize == <span class="number">0</span>) {</span><br><span class="line">            channel.waitForConfirms();</span><br><span class="line">        }</span><br><span class="line">        System.out.println(<span class="string">"Ê∂àÊÅØ["</span> + msg + <span class="string">"]ÂèëÈÄÅÂÆåÊàê"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"ÂèëÈÄÅÊ∂àÊÅØÂÆåÊàêÔºåËÄóÊó∂Ôºö"</span> + (end - start) + <span class="string">"ms"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûú</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">ÂèëÈÄÅÊ∂àÊÅØÂÆåÊàêÔºåËÄóÊó∂Ôºö109ms</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâπÈáè‰∏éÂçï‰∏™ÂèëÂ∏ÉÁ°ÆËÆ§Áõ∏ÊØîÔºåÊâπÈáèÈ´òÊïà‰∫ÜËÆ∏Â§öÔºå‰ΩÜÊòØÂèØÈù†ÊÄßÊ¨†Áº∫„ÄÇËøòÊúâ‰∏ÄÁßçÂèëÂ∏ÉÁ°ÆËÆ§ÁöÑÁ≠ñÁï•Âç≥È´òÊïàÂèàÂèØÈù†„ÄÇ</p>
<h3 id="ÂºÇÊ≠•Á°ÆËÆ§ÂèëÂ∏É"><a href="#ÂºÇÊ≠•Á°ÆËÆ§ÂèëÂ∏É" class="headerlink" title="ÂºÇÊ≠•Á°ÆËÆ§ÂèëÂ∏É"></a>ÂºÇÊ≠•Á°ÆËÆ§ÂèëÂ∏É</h3><p>‚Äã        ÂºÇÊ≠•Á°ÆËÆ§ËôΩÁÑ∂ÁºñÁ®ãÈÄªËæëÊØî‰∏ä‰∏§‰∏™Ë¶ÅÂ§çÊùÇÔºå‰ΩÜÊòØÊÄß‰ª∑ÊØîÊúÄÈ´òÔºåÊó†ËÆ∫ÊòØÂèØÈù†ÊÄßËøòÊòØÊïàÁéáÈÉΩÊ≤°ÂæóËØ¥Ôºå‰ªñÊòØÂà©Áî®ÂõûË∞ÉÂáΩÊï∞Êù•ËææÂà∞Ê∂àÊÅØÂèØÈù†ÊÄß‰º†ÈÄíÁöÑÔºåËøô‰∏™‰∏≠Èó¥‰ª∂‰πüÊòØÈÄöËøáÂáΩÊï∞ÂõûË∞ÉÊù•‰øùËØÅÊòØÂê¶ÊäïÈÄíÊàêÂäüÔºå‰∏ãÈù¢Â∞±ËÆ©Êàë‰ª¨Êù•ËØ¶ÁªÜËÆ≤Ëß£ÂºÇÊ≠•Á°ÆËÆ§ÊòØÊÄé‰πàÂÆûÁé∞ÁöÑ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">asyncConfirm</span><span class="params">()</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">    <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> getChannel();</span><br><span class="line">    <span class="comment">// ÁªëÂÆöÈòüÂàó</span></span><br><span class="line">    channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§Êú∫Âà∂</span></span><br><span class="line">    channel.confirmSelect();</span><br><span class="line">    <span class="comment">// ackÊàêÂäüÁöÑÊ∂àÊÅØÂõûË∞É</span></span><br><span class="line">    <span class="type">ConfirmCallback</span> <span class="variable">ackCallback</span> <span class="operator">=</span> (deliveryTag, multiple) -&gt; {</span><br><span class="line">        System.out.println(<span class="string">"Ê∂àÊÅØ["</span> + deliveryTag + <span class="string">"]ÂèëÈÄÅÂÆåÊàê"</span>);</span><br><span class="line">    };</span><br><span class="line">    <span class="comment">// ackÂ§±Ë¥•ÁöÑÊ∂àÊÅØÂõûË∞É - ÊöÇ‰∏çÂ§ÑÁêÜ</span></span><br><span class="line">    <span class="type">ConfirmCallback</span> <span class="variable">nackCallback</span> <span class="operator">=</span> (deliveryTag, multiple) -&gt; {</span><br><span class="line">        System.out.println(<span class="string">"Ê∂àÊÅØ["</span> + deliveryTag + <span class="string">"]ÂèëÈÄÅÂ§±Ë¥•"</span>);</span><br><span class="line">    };</span><br><span class="line">    <span class="comment">// ËÆæÁΩÆÁõëÂê¨Âô® - ÂºÇÊ≠•ÈÄöÁü•</span></span><br><span class="line">    channel.addConfirmListener(ackCallback, nackCallback);</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) {</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">        channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, <span class="literal">null</span>, (msg).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"ÂèëÈÄÅÊ∂àÊÅØÂÆåÊàêÔºåËÄóÊó∂Ôºö"</span> + (end - start) + <span class="string">"ms"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÁªìÊûú</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">ÂèëÈÄÅÊ∂àÊÅØÂÆåÊàêÔºåËÄóÊó∂Ôºö53ms</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><strong>Â¶Ç‰ΩïÂ§ÑÁêÜackÂ§±Ë¥•ÁöÑÊ∂àÊÅØÔºü</strong></p>
</blockquote>
<p>Â∞ÜÊ∂àÊÅØÊîæÂõûÈòüÂàóÁªßÁª≠ÂèëÈÄÅÂç≥ÂèØÔºåÁõ¥Âà∞ËØ•Ê∂àÊÅØÂèëÈÄÅÊàêÂäü„ÄÇ</p>
<p>‰ª£Á†ÅÂÆûÁé∞ÊÄùË∑ØÔºö‰ΩøÁî®‰∏Ä‰∏™ÂÆπÂô®ÔºàCollectionÊàñMapÂÆπÂô®ÔºâË£Ö‰∏ãÂèëÈÄÅÁöÑÂÖ®ÈÉ®Ê∂àÊÅØÔºåÂú®ACKÊàêÂäüÁöÑÂõûË∞ÉÊñπÊ≥ï‰∏≠ÁßªÈô§ËØ•ÂÖÉÁ¥†ÔºåÂâ©‰∏ãÁöÑÂ∞±ÊòØACKÂ§±Ë¥•ÁöÑÊ∂àÊÅØ„ÄÇ</p>
<p>ÈúÄË¶Å‰øùÂ≠òÊ∂àÊÅØID‰ª•ÂèäÂØπÂ∫îÁöÑÊ∂àÊÅØÂÜÖÂÆπÔºåÂà†Èô§ÁöÑÊó∂ÂÄôÈúÄË¶ÅÊ†πÊçÆIDÊù•Âà†ÔºåÊâÄ‰ª•ÂÆπÂô®ÈÄâÁî®MapÔºåMap‰∏≠Âπ∂ÂèëÁéØÂ¢É‰∏ãÁöÑÊúÄÂ•ΩÁöÑÈÄâÊã©ÊòØConcurrentHashMapÂíåConcurrentSkipListMapÔºåConcurrentHashMap‰∏çËÉΩ‰øùËØÅÂÖÉÁ¥†ÁöÑÊúâÂ∫èÊÄßÔºåÊâÄ‰ª•‰ΩøÁî®Ë∑≥Ë°®ConcurrentSkipListMapÔºåÂÖ∂Â∫ïÂ±ÇÊòØÂèåÂêëÈìæË°®ÁöÑÊï∞ÊçÆÁªìÊûÑÂπ∂‰∏îÂè¶Â§ñÁª¥Êä§‰∫Ü‰∏Ä‰∏™Â§öÂ±ÇÁ∫ßÁ¥¢ÂºïÈìæË°®ÔºåÁâπÊÄßÊòØÂ¢ûÂà†Âø´ÊúâÂ∫èÔºàÈìæË°®ÁâπÊÄßÔºâ„ÄÅÊü•ËØ¢ÈÄüÂ∫¶Âø´ÔºàÂèØ‰ª•‰ª£ÊõøÂπ≥Ë°°Ê†ëÁöÑÊï∞ÊçÆÁªìÊûÑÔºâ„ÄÇ</p>
<p><strong>‰ª£Á†ÅÂÆûÁé∞</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> ConcurrentSkipListMap&lt;Long, String&gt; messages = <span class="keyword">new</span> <span class="title class_">ConcurrentSkipListMap</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">asyncConfirm</span><span class="params">()</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">    <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> getChannel();</span><br><span class="line">    <span class="comment">// ÁªëÂÆöÈòüÂàó</span></span><br><span class="line">    channel.queueDeclare(QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§Êú∫Âà∂</span></span><br><span class="line">    channel.confirmSelect();</span><br><span class="line">    <span class="comment">// ackÊàêÂäüÁöÑÊ∂àÊÅØÂõûË∞É</span></span><br><span class="line">    <span class="type">ConfirmCallback</span> <span class="variable">ackCallback</span> <span class="operator">=</span> (deliveryTag, multiple) -&gt; {</span><br><span class="line">        <span class="keyword">if</span> (multiple) {</span><br><span class="line">            ConcurrentNavigableMap&lt;Long, String&gt; confirmed = messages.headMap(deliveryTag);</span><br><span class="line">            confirmed.clear();</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            messages.remove(deliveryTag);</span><br><span class="line">        }</span><br><span class="line">        System.out.println(<span class="string">"Ê∂àÊÅØtag["</span> + deliveryTag + <span class="string">"]Â∑≤Á°ÆËÆ§"</span>);</span><br><span class="line">    };</span><br><span class="line">    <span class="comment">// ackÂ§±Ë¥•ÁöÑÊ∂àÊÅØÂõûË∞É</span></span><br><span class="line">    <span class="type">ConfirmCallback</span> <span class="variable">nackCallback</span> <span class="operator">=</span> (deliveryTag, multiple) -&gt; {</span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> messages.get(deliveryTag);</span><br><span class="line">        <span class="comment">// ÈáçÊñ∞ÂèëÈÄÅ</span></span><br><span class="line">        channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, <span class="literal">null</span>, (message).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        System.out.println(<span class="string">"Ê∂àÊÅØtag["</span> + deliveryTag + <span class="string">"]Ê∂àÊÅØÂÜÖÂÆπ["</span> + message + <span class="string">"]Êú™Á°ÆËÆ§"</span>);</span><br><span class="line">    };</span><br><span class="line">    <span class="comment">// ËÆæÁΩÆÁõëÂê¨Âô® - ÂºÇÊ≠•ÈÄöÁü•</span></span><br><span class="line">    channel.addConfirmListener(ackCallback, nackCallback);</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) {</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">        channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, <span class="literal">null</span>, (msg).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        <span class="comment">// k‰∏∫Ê∂àÊÅØÂ∫èÂè∑Ôºåv‰∏∫Ê∂àÊÅØÂÜÖÂÆπÂ≠òÂÖ•Map</span></span><br><span class="line">        messages.put(channel.getNextPublishSeqNo(), msg);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"ÂèëÈÄÅÊ∂àÊÅØÂÆåÊàêÔºåËÄóÊó∂Ôºö"</span> + (end - start) + <span class="string">"ms"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÊ∂àÊÅØÁöÑÂèëÂ∏ÉÁ°ÆËÆ§(‰∏ã)</title>
    <url>/p/796e71f0.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Á°ÆËÆ§Êú∫Âà∂ÊñπÊ°à"><a href="#Á°ÆËÆ§Êú∫Âà∂ÊñπÊ°à" class="headerlink" title="Á°ÆËÆ§Êú∫Âà∂ÊñπÊ°à"></a>Á°ÆËÆ§Êú∫Âà∂ÊñπÊ°à</h2><p>‚Äã        Âú®Áîü‰∫ßÁéØÂ¢É‰∏≠Áî±‰∫é‰∏Ä‰∫õ‰∏çÊòéÂéüÂõ†ÔºåÂØºËá¥rabbitmqÈáçÂêØÔºåÂú®RabbitMQÈáçÂêØÊúüÈó¥Áîü‰∫ßËÄÖÊ∂àÊÅØÊäïÈÄíÂ§±Ë¥•ÔºåÂØºËá¥Ê∂àÊÅØ‰∏¢Â§±ÔºåÈúÄË¶ÅÊâãÂä®Â§ÑÁêÜÂíåÊÅ¢Â§ç„ÄÇ‰∫éÊòØÔºåÊàë‰ª¨ÂºÄÂßãÊÄùËÄÉÔºåÂ¶Ç‰ΩïÊâçËÉΩËøõË°åRabbitMQÁöÑÊ∂àÊÅØÂèØÈù†ÊäïÈÄíÂë¢ÔºüÁâπÂà´ÊòØÂú®ËøôÊ†∑ÊØîËæÉÊûÅÁ´ØÁöÑÊÉÖÂÜµÔºåRabbitMQÈõÜÁæ§‰∏çÂèØÁî®ÁöÑÊó∂ÂÄôÔºåÊó†Ê≥ïÊäïÈÄíÁöÑÊ∂àÊÅØËØ•Â¶Ç‰ΩïÂ§ÑÁêÜÂë¢Ôºü</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">Â∫îÁî®[xxx]Âú®[08-1516:36:04]ÂèëÁîü[ÈîôËØØÊó•ÂøóÂºÇÂ∏∏]ÔºåalertId=[xxx]„ÄÇÁî±[org.springframework.amqp.rabbit.listener.BlockingQueueConsumer:start:620]Ëß¶Âèë„ÄÇ</span><br><span class="line">Â∫îÁî®xxxÂèØËÉΩÂéüÂõ†Â¶Ç‰∏ã</span><br><span class="line">ÊúçÂä°Âêç‰∏∫Ôºöxxx</span><br><span class="line">ÂºÇÂ∏∏‰∏∫Ôºöorg.springframework.amqp.rabbit.listener.BlockingQueueConsumer:start:620,</span><br><span class="line">‰∫ßÁîüÂéüÂõ†Â¶Ç‰∏ã:1.org.springframework.amqp.rabbit.listener.QueuesNotAvailableException:</span><br><span class="line">Cannotpreparequeueforlistener.Eitherthequeuedoesn'texistorthebrokerwillnot</span><br><span class="line">allowustouseit.||Consumerreceivedfatal=falseexceptiononstartup:</span><br></pre></td></tr></tbody></table></figure>

<p>ÁªìÂêà‰∏ãÈù¢ÁöÑ‰∏ÄÁßçÁ°ÆËÆ§Êú∫Âà∂ÊñπÊ°àÂÜç‰∏ÄËµ∑ÂàÜÊûê‰∏Ä‰∏ãÊ∂àÊÅØ‰∏¢Â§±Â∫îËØ•Â¶Ç‰ΩïÂ§ÑÁêÜÔºö</p>
<p><img src="/p/796e71f0/RabbitMQ-%E5%8F%91%E5%B8%83%E7%A1%AE%E8%AE%A4%E6%9C%BA%E5%88%B6%E6%96%B9%E6%A1%88-%E9%AB%98%E7%BA%A7%E7%AF%87.png" alt="image-20210625201209218"></p>
<p>‚Äã        ÈÄöËøá‰∏§‰∏™ÂºÇÂ∏∏Êù•ÁúãËÉΩÂ§üÁ°ÆÂÆö RabbitMQ ÊúçÂä°Âô®Â∑≤ÁªèÂÆïÊú∫‰∫Ü„ÄÇÁîü‰∫ßËÄÖÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞RabbitMQ ‰∏≠ÁöÑ‰∫§Êç¢Êú∫XÔºåÈöèÂêéËΩ¨ÂèëÁªôÁªëÂÆö‰∫ÜËØ•Ë∑ØÁî±ÈîÆÁöÑÈòüÂàóÔºåÊ≠§Êó∂ÂΩìRabbitMQÂÆïÊú∫‰∫ÜÔºåÊó†ËÆ∫Ê≠§Êó∂ÁöÑ‰∫§Êç¢Êú∫ÊòØÂê¶Â≠òÂú®ÔºåÈÇ£‰πàÊ∂àÊÅØÈÉΩÂ∞ÜÁõ¥Êé•‰∏¢Â§±‰∫Ü„ÄÇÊó†ËÆ∫‰∫§Êç¢Êú∫ÊòØÂê¶Â≠òÂú®ÔºåÂè™Ë¶ÅÊ∂àÊÅØÊ≤°ÂèëÂá∫ÂéªÔºåÂ∞±ÂèØ‰ª•Â≠òÊîæÂú®ÁºìÂ≠ò‰∏≠Ôºå‰ΩÜÊòØÂ≠òÂú®‰∏Ä‰∏™ÈóÆÈ¢òÔºåÁîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÂà∞‰∫§Êç¢Êú∫ÊàñËÄÖ‰∫§Êç¢Êú∫ÊäïÈÄíÊ∂àÊÅØÂà∞ÈòüÂàóÔºåÈÉΩÊòØ‰∏çÁü•ÈÅìÊ∂àÊÅØÊúâÊ≤°ÊúâÂèëÈÄÅÊàêÂäüÁöÑÔºå‰∫§Êç¢Êú∫ÊäïÈÄíÂ§±Ë¥•ÁöÑÊ∂àÊÅØÊòØ‰∏çËÉΩÁ°ÆÂÆöÁöÑÔºåÊâÄ‰ª•Êó†Ê≥ï‰ΩøÁî®ÁºìÂ≠òÔºå‰ΩÜÁîü‰∫ßËÄÖÊúâÂèëÂ∏ÉÁ°ÆËÆ§ÁöÑÊú∫Âà∂„ÄÇ</p>
<p>‚Äã        ÂØπ‰∫éÁîü‰∫ßËÄÖÊäïÈÄíÂ§±Ë¥•ÁöÑÊ∂àÊÅØÂ§ÑÁêÜÊñπÊ°àÊòØÂºÄÂêØÁ°ÆËÆ§Êú∫Âà∂ÔºåÁîü‰∫ßËÄÖÂ∞ÜÊ≤°ÊúâÂèëÈÄÅÊàêÂäüÁöÑÊ∂àÊÅØ‰øùÂ≠òÂà∞ÁºìÂ≠òÔºåÂú®ÂÜô‰∏™ÂÆöÊó∂‰ªªÂä°ÈáçÂèëÁºìÂ≠ò‰∏≠ÁöÑÊ∂àÊÅØ„ÄÇÈÇ£‰πà‰∫§Êç¢Êú∫ÊäïÈÄíÂ§±Ë¥•ÁöÑÊ∂àÊÅØÂ∫îËØ•Â¶Ç‰ΩïÂ§ÑÁêÜÔºü</p>
<p>ÂÖàÂÜô‰∏Ä‰∏™ÁÆÄÂçïÂÆûÁé∞‰∏ãÈù¢Ëøô‰∏™Á°ÆËÆ§ÂèëÂ∏ÉÁöÑÂú∫ÊôØÔºö</p>
<p><img src="/p/796e71f0/RabbitMQ-%E5%8F%91%E5%B8%83%E7%A1%AE%E8%AE%A4%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E9%80%BB%E8%BE%91-%E9%AB%98%E7%BA%A7%E7%AF%87.png" alt="image-20210625220807639"></p>
<p>ÁªìÂêàSpringBootÂØπËøô‰∫õÁªÑ‰ª∂ËøõË°åÊ≥®ÂÜåÂíåÁªëÂÆöÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfirmConfig</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(CONFIRM_EXCHANGE_NAME)</span></span><br><span class="line">    <span class="keyword">public</span> DirectExchange <span class="title function_">confirmExchange</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DirectExchange</span>(CONFIRM_EXCHANGE_NAME);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(CONFIRM_QUEUE_NAME)</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">confirmQueue</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> QueueBuilder.durable(CONFIRM_QUEUE_NAME).build();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">confirmQueueBinDingExchange</span><span class="params">(<span class="meta">@Qualifier(CONFIRM_QUEUE_NAME)</span> Queue queue,</span></span><br><span class="line"><span class="params">                                  <span class="meta">@Qualifier(CONFIRM_EXCHANGE_NAME)</span> DirectExchange exchange)</span>{</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(queue).to(exchange).with(ROUTING_KEY_CONFIRM);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Áîü‰∫ßËÄÖ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/confirm")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfirmMessageProducer</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Ê≠£Â∏∏Êé•Êî∂Ê∂àÊÅØÁöÑÊÉÖÂÜµ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping("/sendMsg/{msg}")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">confirm</span><span class="params">(<span class="meta">@PathVariable("msg")</span> String msg)</span> {</span><br><span class="line">        rabbitTemplate.convertAndSend(MqConstant.CONFIRM_EXCHANGE_NAME, MqConstant.ROUTING_KEY_CONFIRM, msg);</span><br><span class="line">        log.info(<span class="string">"ÂèëÈÄÅÊ∂àÊÅØÊàêÂäüÔºåÊ∂àÊÅØÂÜÖÂÆπÔºö{}"</span>, msg);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ê∂àË¥πËÄÖ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfirmMessageConsumer</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Ê≠£Â∏∏ÂèëÈÄÅÊ∂àÊÅØÁöÑÊÉÖÂÜµ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RabbitListener(queues = {CONFIRM_QUEUE_NAME})</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveConfirmMessage</span><span class="params">(Message message, Channel channel)</span> {</span><br><span class="line">        log.info(<span class="string">"Êé•Êî∂Âà∞ÈòüÂàóÔºö{}ÁöÑÊ∂àÊÅØ‰∏∫Ôºö{}"</span>, CONFIRM_QUEUE_NAME, <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody()));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‚Äã        ‰∏äÈù¢ÊòØÊ≠£Â∏∏Êî∂ÂèëÊ∂àÊÅØÁöÑÊÉÖÂÜµ„ÄÇÈÇ£‰πàÂΩìÊ∂àË¥πËÄÖÁªô‰∫§Êç¢Êú∫ÂèëÈÄÅÊ∂àÊÅØÊó∂ÔºåÊ≠§Êó∂‰∫§Êç¢Êú∫Ê≠£Â§Ñ‰∫éÂºÇÂ∏∏Áä∂ÊÄÅÔºàÈáçÂêØ„ÄÅÊñ≠ÁΩëÁ≠âÂêÑÁßçÊÉÖÂÜµÔºâÔºåÂ∫îËØ•Â¶Ç‰ΩïÂ§ÑÁêÜÔºüÂà©Áî®RabbitMQÊèê‰æõÁöÑÂõûË∞ÉÊé•Âè£Êù•Â§ÑÁêÜÂºÇÂ∏∏ÊÉÖÂÜµ„ÄÇ</p>
<h2 id="ÂõûË∞ÉÊ∂àÊÅØ"><a href="#ÂõûË∞ÉÊ∂àÊÅØ" class="headerlink" title="ÂõûË∞ÉÊ∂àÊÅØ"></a>ÂõûË∞ÉÊ∂àÊÅØ</h2><h3 id="publisher-confirm-type"><a href="#publisher-confirm-type" class="headerlink" title="publisher-confirm-type"></a>publisher-confirm-type</h3><p>‚Äã        È¶ñÂÖàÈúÄË¶ÅÂú® properties.yml ‰∏≠ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§Ê®°ÂºèÁöÑÈÖçÁΩÆÔºö</p>
<figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">publisher-confirm-type:</span> <span class="string">correlated</span></span><br></pre></td></tr></tbody></table></figure>

<p>publisher-confirm-typeÂ±ûÊÄßÊúâ‰∏â‰∏™ÂèØÈÄâÂÄºÔºö</p>
<ul>
<li>noneÔºàÈªòËÆ§ÔºâÔºöÂÖ≥Èó≠ÂèëÂ∏ÉÁ°ÆËÆ§Ê®°Âºè„ÄÇ</li>
<li>correlatedÔºöÊ∂àÊÅØ‰ªéÁîü‰∫ßËÄÖÂèëÈÄÅÂà∞‰∫§Êç¢Êú∫ÂêéËß¶ÂèëÂõûË∞ÉÊñπÊ≥ï„ÄÇ</li>
<li>simpleÔºö‰ºöËß¶ÂèëÂõûË∞ÉÊñπÊ≥ïÔºåÁõ∏ÂΩì‰∫éÂçï‰∏™Á°ÆËÆ§ÔºàÂèë‰∏ÄÊù°Á°ÆËÆ§‰∏ÄÊù°Ôºâ„ÄÇÂú®ÂèëÂ∏ÉÊ∂àÊÅØÊàêÂäüÂêé‰ΩøÁî®rabbitTemplateË∞ÉÁî®waitForConfirmsÊàñwaitForConfirmsOrDieÊñπÊ≥ïÁ≠âÂæÖbrokerËäÇÁÇπËøîÂõûÂèëÈÄÅÁªìÊûúÔºåÊ†πÊçÆËøîÂõûÁªìÊûúÊù•Âà§ÂÆö‰∏ã‰∏ÄÊ≠•ÁöÑÈÄªËæëÔºåË¶ÅÊ≥®ÊÑèÁöÑÁÇπÊòØ waitForConfirmsOrDieÊñπÊ≥ïÂ¶ÇÊûúËøîÂõûfalseÂàô‰ºöÂÖ≥Èó≠channelÔºåÂàôÊé•‰∏ãÊù•Êó†Ê≥ïÂèëÈÄÅÊ∂àÊÅØÂà∞broker„ÄÇ</li>
</ul>
<h3 id="‰ª£Á†ÅÂÆûÁé∞"><a href="#‰ª£Á†ÅÂÆûÁé∞" class="headerlink" title="‰ª£Á†ÅÂÆûÁé∞"></a>‰ª£Á†ÅÂÆûÁé∞</h3><p>‚Äã        ÂÆûÁé∞ RabbitMQTemplate.ConfirmCallBack Êé•Âè£ÔºåÂÆûÁé∞Êé•Âè£‰∏≠ÁöÑ confirm ÊñπÊ≥ïÔºåÂç≥ÂèØËé∑ÂæóÊ∂àÊÅØÂèëÈÄÅÊàêÂäüËøòÊòØÂèëÈÄÅÂ§±Ë¥•ÁöÑÁä∂ÊÄÅ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfirmMessageCallback</span> <span class="keyword">implements</span> <span class="title class_">RabbitTemplate</span>.ConfirmCallback {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ‰∫§Êç¢Êú∫Êó†ËÆ∫ÊòØÂê¶Êî∂Âà∞Ê∂àÊÅØÁöÑÂõûË∞ÉÊñπÊ≥ï</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> correlationData Ê∂àÊÅØÁõ∏ÂÖ≥Êï∞ÊçÆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ack             ‰∫§Êç¢Êú∫ÊòØÂê¶Êî∂Âà∞Ê∂àÊÅØ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cause           ÂéüÂõ†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">confirm</span><span class="params">(<span class="meta">@Nullable</span> CorrelationData correlationData, <span class="type">boolean</span> ack, <span class="meta">@Nullable</span> String cause)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> correlationData != <span class="literal">null</span> ? correlationData.getId() : <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (ack) {</span><br><span class="line">            log.info(<span class="string">"‰∫§Êç¢Êú∫Â∑≤Êî∂Âà∞ id={} ÁöÑÊ∂àÊÅØ"</span>, id);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            log.info(<span class="string">"‰∫§Êç¢Êú∫Êú™Êî∂Âà∞ id={} ÁöÑÊ∂àÊÅØÔºåÂéüÂõ†:{}"</span>, id, cause);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú® ConfirmConfig ‰∏≠Âä†ÂÖ•ÈÖçÁΩÆÔºåÁªô RabbitMQTemplate ÈÖçÁΩÆÂÖ∂ÂÜÖÈÉ®Â±ûÊÄß ConfirmCallback„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setConfirmCallback</span><span class="params">(RabbitTemplate rabbitTemplate)</span>{</span><br><span class="line">    rabbitTemplate.setConfirmCallback(<span class="keyword">new</span> <span class="title class_">ConfirmMessageCallback</span>());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Áîü‰∫ßËÄÖÊñ∞Â¢ûÊµãËØïÊé•Âè£ÔºåË∞ÉÁî®Âè¶Â§ñ‰∏Ä‰∏™ÂèëÈÄÅÊ∂àÊÅØÁöÑÊñπÊ≥ï„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping("/sendMsgCallback/{msg}")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">confirmed</span><span class="params">(<span class="meta">@PathVariable("msg")</span> String msg)</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line">    <span class="comment">// ËØ•ÂØπË±°Â∞ÜÂú®ÂõûË∞ÉÊó∂Êê∫Â∏¶Âà∞ÂõûË∞ÉÊñπÊ≥ï‰∏≠</span></span><br><span class="line">    <span class="type">CorrelationData</span> <span class="variable">correlationData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorrelationData</span>(id);</span><br><span class="line"></span><br><span class="line">    rabbitTemplate.convertAndSend(MqConstant.CONFIRM_EXCHANGE_NAME,</span><br><span class="line">                                  MqConstant.ROUTING_KEY_CONFIRM, msg, correlationData);</span><br><span class="line">    log.info(<span class="string">"ÂèëÈÄÅÊ∂àÊÅØÊàêÂäüÔºåÊ∂àÊÅØid={}ÔºåÂÜÖÂÆπÔºö{}"</span>, id, msg);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‚Äã        Áé∞Âú®Ëß£ÂÜ≥‰∫ÜÊ∂àË¥πËÄÖÁªô‰∫§Êç¢Êú∫ÂèëÈÄÅÊ∂àÊÅØÊó∂Ôºå‰∫§Êç¢Êú∫Ê≠£Â§Ñ‰∫éÂºÇÂ∏∏Áä∂ÊÄÅÁöÑÊÉÖÂÜµÔºå‰ΩÜÊòØÂΩì‰∫§Êç¢Êú∫ÂèØÁî®ÔºåËÄåÈòüÂàó‰∏¢Â§±ËÄåÊî∂‰∏çÂà∞Ê∂àÊÅØÁöÑÊÉÖÂÜµÂ∫îËØ•Â¶Ç‰ΩïÂ§ÑÁêÜÔºüËøõË°åÊ∂àÊÅØÂõûÈÄÄ„ÄÇ</p>
<h2 id="ÂõûÈÄÄÊ∂àÊÅØ"><a href="#ÂõûÈÄÄÊ∂àÊÅØ" class="headerlink" title="ÂõûÈÄÄÊ∂àÊÅØ"></a>ÂõûÈÄÄÊ∂àÊÅØ</h2><p>‚Äã        Âú®Áîü‰∫ßËÄÖÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§Êú∫Âà∂ÂêéÔºåËÉΩÂ§üÁ°Æ‰øùÊ∂àÊÅØ‰ªéÁîü‰∫ßËÄÖÂà∞Ëææ‰∫§Êç¢Êú∫Ôºå‰ΩÜÊòØÊó†Ê≥ïÁ°Æ‰øù‰∫§Êç¢Êú∫Â∞ÜÊ∂àÊÅØÂèëÈÄÅÁªôÈòüÂàó‰∏ç‰∏¢Â§±„ÄÇËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºöÂú®Áîü‰∫ßËÄÖÂºÄÂêØÊ∂àÊÅØÂõûÈÄÄÁöÑÈÖçÁΩÆÂêéÔºåÂΩì‰∫§Êç¢Êú∫Êó†Ê≥ïÊ≠£Â∏∏ÊäïÈÄíÊó∂Ôºå‰ºöËß¶ÂèëÊ∂àÊÅØÂõûÈÄÄÁöÑÂõûË∞ÉÊñπÊ≥ïÔºåËÆ©Áîü‰∫ßËÄÖËÉΩÂ§üÁü•ÈÅìÂì™‰∫õÊ∂àÊÅØÂõûÈÄÄÂêéÂéªÈáçÊñ∞Â§ÑÁêÜËøô‰∫õÊ∂àÊÅØ„ÄÇ</p>
<p>ÂºÄÂêØÂõûÈÄÄÊ∂àÊÅØÁöÑÈÖçÁΩÆ</p>
<figure class="highlight yml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">publisher-confirm-type:</span> <span class="string">correlated</span></span><br><span class="line">    <span class="attr">publisher-returns:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">template:</span></span><br><span class="line">      <span class="comment"># trueÔºö‰∫§Êç¢Êú∫Êó†Ê≥ïÂ∞ÜÊ∂àÊÅØËøõË°åË∑ØÁî±Êó∂Ôºå‰ºöÂ∞ÜËØ•Ê∂àÊÅØËøîÂõûÁªôÁîü‰∫ßËÄÖÔºàÂõûË∞ÉÊ∂àÊÅØÂõûÈÄÄÊé•Âè£Ôºâ</span></span><br><span class="line">      <span class="comment"># falseÔºöÂ¶ÇÊûúÂèëÁé∞Ê∂àÊÅØÊó†Ê≥ïËøõË°åË∑ØÁî±ÔºåÂàôÁõ¥Êé•‰∏¢ÂºÉ</span></span><br><span class="line">      <span class="attr">mandatory:</span> <span class="literal">true</span>  </span><br></pre></td></tr></tbody></table></figure>

<p>ÂÆûÁé∞ RabbitTemplate ÂÜÖÈÉ®ÁöÑ ReturnsCallback Êé•Âè£</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfirmMessageReturnCallback</span> <span class="keyword">implements</span> <span class="title class_">RabbitTemplate</span>.ReturnsCallback {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">returnedMessage</span><span class="params">(<span class="meta">@NonNull</span> ReturnedMessage message)</span> {</span><br><span class="line">        log.info(<span class="string">"Ê∂àÊÅØ {} ÈÄÄÂõûÔºåÈÄÄÂõûÂéüÂõ†{},‰∫§Êç¢Êú∫{},Ë∑ØÁî±ÈîÆ{}"</span>, <span class="keyword">new</span> <span class="title class_">String</span>(message.getMessage().getBody()),</span><br><span class="line">                 message.getReplyText(), message.getExchange(), message.getRoutingKey());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®ConfirmConfig‰∏≠Â∞ÜÂõûÈÄÄÊé•Âè£ÈÖçÁΩÆÂà∞ RabbitMQTemplate</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setConfirmCallback</span><span class="params">(RabbitTemplate rabbitTemplate)</span>{</span><br><span class="line">    </span><br><span class="line">    rabbitTemplate.setConfirmCallback(<span class="keyword">new</span> <span class="title class_">ConfirmMessageCallback</span>());</span><br><span class="line">    rabbitTemplate.setReturnsCallback(<span class="keyword">new</span> <span class="title class_">ConfirmMessageReturnCallback</span>());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Áîü‰∫ßËÄÖÊñ∞Â¢ûÊé•Âè£</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Âà©Áî®‰∫§Êç¢Êú∫ÊäïÈÄíÊ∂àÊÅØÂ§±Ë¥•ÁöÑÂõûË∞ÉÊñπÊ≥ïÔºåÊù•Â§ÑÁêÜÊ∂àÊÅØÊäïÈÄíÂ§±Ë¥•ÁöÑÊÉÖÂÜµ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping("/sendMsgReturnBack/{msg}")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMsgReturnBack</span><span class="params">(<span class="meta">@PathVariable("msg")</span> String msg)</span>{</span><br><span class="line">    <span class="comment">// ÊäïÈÄíÂà∞‰∏Ä‰∏™‰∏çÂ≠òÂú®ÁöÑÈòüÂàóÔºåÊµãËØïÊ∂àÊÅØÊòØÂê¶ÂõûË∞ÉÊàêÂäü</span></span><br><span class="line">    <span class="type">CorrelationData</span> <span class="variable">correlationData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorrelationData</span>(UUID.randomUUID().toString());</span><br><span class="line">    rabbitTemplate.convertAndSend(MqConstant.CONFIRM_EXCHANGE_NAME, <span class="string">"NoSuchRoutingKey"</span>, msg, correlationData);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><p>Á°Æ‰øùÊ∂àÊÅØÂèëÈÄÅÊàêÂäüÔºö</p>
<p>1„ÄÅÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§Êú∫Âà∂Âπ∂‰∏îÂÆûÁé∞ÂèëÈÄÅÊ∂àÊÅØÁöÑÂõûË∞ÉÊé•Âè£Êù•Á°Æ‰øùÁîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÂà∞RabbitMQÊàêÂäü„ÄÇ</p>
<p>2„ÄÅÂºÄÂêØÊ∂àÊÅØÂõûÈÄÄÊú∫Âà∂ÂíåmandatoryÂèÇÊï∞ÔºåËÆ©Êó†Ê≥ïË∑ØÁî±ÁöÑÊ∂àÊÅØËøõË°åÂõûË∞ÉÔºåÂπ∂‰∏îÂÆûÁé∞ÂõûÈÄÄÊé•Âè£Êù•Á°Æ‰øùÁîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÂà∞‰∫§Êç¢Êú∫ÂêéÔºå‰∫§Êç¢Êú∫ÊäïÈÄíÊ∂àÊÅØÂ§±Ë¥•ÁöÑÊé•Âè£„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÊ∂àÊÅØÊåÅ‰πÖÂåñ</title>
    <url>/p/b760ec60.html</url>
    <content><![CDATA[<html><head></head><body><p>ÊâãÂä®ACKÂ∫îÁ≠îÂèØ‰ª•Â§ÑÁêÜ‰ªªÂä°‰∏ç‰∏¢Â§±ÁöÑÊÉÖÂÜµÔºå‰ΩÜÊòØÂ¶Ç‰Ωï‰øùÈöúÂΩì RabbitMQ ÊúçÂä°ÂÅúÊéâ‰ª•ÂêéÊ∂àÊÅØÁîü‰∫ßËÄÖÂèëÈÄÅËøáÊù•ÁöÑÊ∂àÊÅØ‰∏ç‰∏¢Â§±Ôºü</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã RabbitMQ ÈÄÄÂá∫ÊàñÁî±‰∫éÊüêÁßçÂéüÂõ†Â¥©Ê∫ÉÊó∂ÔºåÂÆÉÂøΩËßÜÈòüÂàóÂíåÊ∂àÊÅØÔºåÈô§ÈùûÂëäÁü•ÂÆÉ‰∏çË¶ÅËøôÊ†∑ÂÅö„ÄÇÁ°Æ‰øùÊ∂àÊÅØ‰∏ç‰ºö‰∏¢Â§±ÈúÄË¶ÅÂÅö‰∏§‰ª∂‰∫ãÔºö<strong>ÈúÄË¶ÅÂ∞ÜÈòüÂàóÂíåÊ∂àÊÅØÈÉΩÊ†áËÆ∞‰∏∫ÊåÅ‰πÖÂåñ</strong>„ÄÇ</p>
<p>Êú¨Á´†ËäÇÂÆûÁé∞ÁÆÄÂçïÁöÑÈòüÂàóÂíåÊ∂àÊÅØÁöÑÊåÅ‰πÖÂåñÂäüËÉΩÔºåÊõ¥Âä†Âº∫ÊúâÂäõÁöÑÊåÅ‰πÖÂåñÁ≠ñÁï•ÔºåÂú®ÂêéÈù¢ÂèëÂ∏ÉÁ°ÆËÆ§Á´†ËäÇÂÜçËØ¶Ëø∞„ÄÇ</p>
<h2 id="ÈòüÂàóÊåÅ‰πÖÂåñ"><a href="#ÈòüÂàóÊåÅ‰πÖÂåñ" class="headerlink" title="ÈòüÂàóÊåÅ‰πÖÂåñ"></a>ÈòüÂàóÊåÅ‰πÖÂåñ</h2><p>Áîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÁöÑ‰ø°ÈÅìÈÉΩÈúÄË¶ÅÂ∞Ü‰∏ãÈù¢ÁöÑ queueDeclare() ÊñπÊ≥ïÁöÑ durable Â±ûÊÄßËÆæÁΩÆÂÄº‰∏∫ true„ÄÇ</p>
<p>Âú®com.rabbitmq.client.ChannelÁ±ª‰∏≠ÔºåÊúâ‰ª•‰∏ãÊñπÊ≥ïÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Declare a queue</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queue the name of the queue</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> durable ÊòØÂê¶ÊåÅ‰πÖÂåñÂà∞Á£ÅÁõò true if we are declaring a durable queue (the queue will survive a server restart)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exclusive true if we are declaring an exclusive queue (restricted to this connection)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> autoDelete true if we are declaring an autodelete queue (server will delete it when no longer in use)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arguments other properties (construction arguments) for the queue</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a declaration-confirm method to indicate the queue was successfully declared</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">Queue.DeclareOk <span class="title function_">queueDeclare</span><span class="params">(String queue, <span class="type">boolean</span> durable, <span class="type">boolean</span> exclusive, <span class="type">boolean</span> autoDelete,</span></span><br><span class="line"><span class="params">                             Map&lt;String, Object&gt; arguments)</span> <span class="keyword">throws</span> IOException;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Ê∂àÊÅØÊåÅ‰πÖÂåñ"><a href="#Ê∂àÊÅØÊåÅ‰πÖÂåñ" class="headerlink" title="Ê∂àÊÅØÊåÅ‰πÖÂåñ"></a>Ê∂àÊÅØÊåÅ‰πÖÂåñ</h2><p>Áîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÁöÑ‰ø°ÈÅìËÆæÁΩÆ‰∏äÂèÇÊï∞ MessageProperties.PERSISTENT_TEXT_PLAINÔºåË°®Á§∫Ê∂àÊÅØÊåÅ‰πÖÂåñÂà∞Á£ÅÁõò‰∏ä„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, MessageProperties.PERSISTENT_TEXT_PLAIN, (msg).getBytes(StandardCharsets.UTF_8));</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÊ∂àÊÅØÁöÑ‰∏çÂÖ¨Âπ≥ÂàÜÂèë</title>
    <url>/p/3700606c.html</url>
    <content><![CDATA[<html><head></head><body><p>Âú®ÊúÄÂºÄÂßãÁöÑÊó∂ÂÄôÊàë‰ª¨Â≠¶‰π†Âà∞ RabbitMQ ÂàÜÂèëÊ∂àÊÅØÈááÁî®ÁöÑËΩÆËØ¢ÂàÜÂèëÔºå‰ΩÜÊòØÂú®ÊüêÁßçÂú∫ÊôØ‰∏ãËøôÁßçÁ≠ñÁï•Âπ∂‰∏çÊòØÂæàÂ•ΩÔºåÊØîÊñπËØ¥Êúâ‰∏§‰∏™Ê∂àË¥πËÄÖÂú®Â§ÑÁêÜ‰ªªÂä°ÔºåÂÖ∂‰∏≠Êúâ‰∏™Ê∂àË¥πËÄÖ 1 Â§ÑÁêÜ‰ªªÂä°ÁöÑÈÄüÂ∫¶ÈùûÂ∏∏Âø´ÔºåËÄåÂè¶Â§ñ‰∏Ä‰∏™Ê∂àË¥πËÄÖ 2 Â§ÑÁêÜÈÄüÂ∫¶Âç¥ÂæàÊÖ¢ÔºåËøô‰∏™Êó∂ÂÄôÊàë‰ª¨ËøòÊòØÈááÁî®ËΩÆËÆ≠ÂàÜÂèëÁöÑÂåñÂ∞±‰ºöÂà∞ËøôÂ§ÑÁêÜÈÄüÂ∫¶Âø´ÁöÑËøô‰∏™Ê∂àË¥πËÄÖÂæàÂ§ß‰∏ÄÈÉ®ÂàÜÊó∂Èó¥Â§Ñ‰∫éÁ©∫Èó≤Áä∂ÊÄÅÔºåËÄåÂ§ÑÁêÜÊÖ¢ÁöÑÈÇ£‰∏™Ê∂àË¥πËÄÖ‰∏ÄÁõ¥Âú®Âπ≤Ê¥ªÔºåËøôÁßçÂàÜÈÖçÊñπÂºèÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÂÖ∂ÂÆûÂ∞±‰∏çÂ§™Â•ΩÔºå‰ΩÜÊòØRabbitMQ Âπ∂‰∏çÁü•ÈÅìËøôÁßçÊÉÖÂÜµÂÆÉ‰æùÁÑ∂ÂæàÂÖ¨Âπ≥ÁöÑËøõË°åÂàÜÂèë„ÄÇ</p>
<p>‰∏∫‰∫ÜÈÅøÂÖç‰∏äËø∞ÊÉÖÂÜµÔºåÂº∫ÁÉàÂª∫ËÆÆ‰ΩøÁî®‰∏çÂÖ¨Âπ≥ÂàÜÂèëÔºàËÉΩËÄÖÂ§öÂä≥ÔºâÔºåÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÈÉΩÈúÄË¶ÅËÆæÁΩÆÂèÇÊï∞ channel.basicQos(1);</p>
<p><img src="/p/3700606c/RabbitMQ-%E6%B6%88%E6%81%AF%E7%9A%84%E4%B8%8D%E5%85%AC%E5%B9%B3%E5%88%86%E5%8F%91.png" alt="image-20210620163005387"></p>
<p>ÊÑèÊÄùÂ∞±ÊòØÂ¶ÇÊûúËøô‰∏™‰ªªÂä°ÊàëËøòÊ≤°ÊúâÂ§ÑÁêÜÂÆåÊàñËÄÖÊàëËøòÊ≤°ÊúâÂ∫îÁ≠î‰Ω†Ôºå‰Ω†ÂÖàÂà´ÂàÜÈÖçÁªôÊàëÔºåÊàëÁõÆÂâçÂè™ËÉΩÂ§ÑÁêÜ‰∏Ä‰∏™‰ªªÂä°ÔºåÁÑ∂ÂêérabbitmqÂ∞±‰ºöÊääËØ•‰ªªÂä°ÂàÜÈÖçÁªôÊ≤°ÊúâÈÇ£‰πàÂøôÁöÑÈÇ£‰∏™Á©∫Èó≤Ê∂àË¥πËÄÖÔºåÂΩìÁÑ∂Â¶ÇÊûúÊâÄÊúâÁöÑÊ∂àË¥πËÄÖÈÉΩÊ≤°ÊúâÂÆåÊàêÊâã‰∏ä‰ªªÂä°ÔºåÈòüÂàóËøòÂú®‰∏çÂÅúÁöÑÊ∑ªÂä†Êñ∞‰ªªÂä°ÔºåÈòüÂàóÊúâÂèØËÉΩÂ∞±‰ºöÈÅáÂà∞ÈòüÂàóË¢´ÊíëÊª°ÁöÑÊÉÖÂÜµÔºåËøô‰∏™Êó∂ÂÄôÂ∞±Âè™ËÉΩÊ∑ªÂä†Êñ∞ÁöÑworkerÊàñËÄÖÊîπÂèòÂÖ∂‰ªñÂ≠òÂÇ®‰ªªÂä°ÁöÑÁ≠ñÁï•„ÄÇ</p>
<p><strong>Á§∫‰æã‰ª£Á†Å</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageQosProducer</span> {</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> QOS_QUEUE_NAME;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">// ËÆæÁΩÆ‰∏∫‰∏çÂÖ¨Âπ≥ÂàÜÂèë</span></span><br><span class="line">        channel.basicQos(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// ÈòüÂàóÊåÅ‰πÖÂåñ</span></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">            <span class="comment">// Ê∂àÊÅØÊåÅ‰πÖÂåñ</span></span><br><span class="line">            channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, MessageProperties.PERSISTENT_TEXT_PLAIN, (msg).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">            System.out.println(<span class="string">"Ê∂àÊÅØ["</span> + msg + <span class="string">"]ÂèëÈÄÅÂÆåÊàê"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        channel.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p> Ê∂àË¥πËÄÖ1Â§ÑÁêÜ‰ªªÂä°Êó∂Èó¥‰∏∫5sÔºåÊ∂àË¥πËÄÖ2Â§ÑÁêÜ‰ªªÂä°Êó∂Èó¥‰∏∫1sÔºåÊâÄ‰ª•2Â§ÑÁêÜÁöÑ‰ªªÂä°ÊØî1Êõ¥Â§ö„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageQosConsumer1</span> {</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> QOS_QUEUE_NAME;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">// ËÆæÁΩÆÊåÅ‰πÖÂåñ</span></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">        channel.basicQos(<span class="number">1</span>);</span><br><span class="line">        <span class="type">Consumer</span> <span class="variable">callback</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel) {</span><br><span class="line">            <span class="meta">@SneakyThrows</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">                <span class="comment">//Ë∑ØÁî±ÁöÑkey</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">routingKey</span> <span class="operator">=</span> envelope.getRoutingKey();</span><br><span class="line">                <span class="comment">//Ëé∑Âèñ‰∫§Êç¢Êú∫‰ø°ÊÅØ</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">exchange</span> <span class="operator">=</span> envelope.getExchange();</span><br><span class="line">                <span class="comment">//Ëé∑ÂèñÊ∂àÊÅØID</span></span><br><span class="line">                <span class="type">long</span> <span class="variable">deliveryTag</span> <span class="operator">=</span> envelope.getDeliveryTag();</span><br><span class="line">                <span class="comment">//Ëé∑ÂèñÊ∂àÊÅØ‰ø°ÊÅØ</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(body, StandardCharsets.UTF_8);</span><br><span class="line">                System.out.println(<span class="string">"routingKey:"</span> + routingKey +</span><br><span class="line">                        <span class="string">",exchange:"</span> + exchange +</span><br><span class="line">                        <span class="string">",deliveryTag:"</span> + deliveryTag +</span><br><span class="line">                        <span class="string">",message:"</span> + message);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Ê®°ÊãüÂ§ÑÁêÜ‰ªªÂä°ÁöÑÊó∂Èó¥</span></span><br><span class="line">                <span class="comment">// Ê∂àË¥πËÄÖ1ËÆæÁΩÆ‰∏∫5sÔºåÊ∂àË¥πËÄÖ2ËÆæÁΩÆ‰∏∫1s</span></span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// deliveryTagÊòØÊ∂àÊÅØÊ†áËÆ∞tag ,ËÆæÁΩÆ‰∏∫‰∏çÊâπÈáèÂ∫îÁ≠î</span></span><br><span class="line">                channel.basicAck(deliveryTag, <span class="literal">false</span>);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ‰ΩøÁî®ÊâãÂä®Â∫îÁ≠î</span></span><br><span class="line">        channel.basicConsume(QUEUE_NAME, <span class="literal">false</span>, callback);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="È¢ÑÂèñÂÄºÔºàprefetchCountÔºâ"><a href="#È¢ÑÂèñÂÄºÔºàprefetchCountÔºâ" class="headerlink" title="È¢ÑÂèñÂÄºÔºàprefetchCountÔºâ"></a>È¢ÑÂèñÂÄºÔºàprefetchCountÔºâ</h2><p>Âú®‰∏äÈù¢Ê°à‰æã‰∏≠ÈÄöËøáËÆæÁΩÆÁîü‰∫ßËÄÖÂíåÊ∂àË¥πËÄÖÁöÑ channel.basicQos(1) Êù•ÂÆûÁé∞Ê∂àÊÅØÁöÑ‰∏çÂÖ¨Âπ≥ÂàÜÂèë„ÄÇÈÇ£‰πàËøô‰∏™1ÊòØ‰ªÄ‰πàÂê´‰πâÂë¢ÔºüËøô‰∏™Â∞±ÊòØÂΩìÂâçÊ∂àË¥πËÄÖÁêÜËÆ∫‰∏äËé∑ÂèñÁöÑÊ∂àÊÅØÊù°Êï∞„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Request a specific prefetchCount "quality of service" settings</span></span><br><span class="line"><span class="comment"> * for this channel.</span></span><br><span class="line"><span class="comment"> * Note the prefetch count must be between 0 and 65535 (unsigned short in AMQP 0-9-1).</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> prefetchCount maximum number of messages that the server</span></span><br><span class="line"><span class="comment"> *                      will deliver, 0 if unlimited</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> java.io.IOException if an error is encountered</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> #basicQos(int, int, boolean)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">basicQos</span><span class="params">(<span class="type">int</span> prefetchCount)</span> <span class="keyword">throws</span> IOException;</span><br></pre></td></tr></tbody></table></figure>

<p>Êú¨Ë∫´Ê∂àÊÅØÁöÑÂèëÈÄÅÂ∞±ÊòØÂºÇÊ≠•ÂèëÈÄÅÁöÑÔºåÊâÄ‰ª•Âú®‰ªª‰ΩïÊó∂ÂÄôÔºåchannel ‰∏äËÇØÂÆö‰∏çÊ≠¢Âè™Êúâ‰∏Ä‰∏™Ê∂àÊÅØÂè¶Â§ñÊù•Ëá™Ê∂àË¥πËÄÖÁöÑÊâãÂä®Á°ÆËÆ§Êú¨Ë¥®‰∏ä‰πüÊòØÂºÇÊ≠•ÁöÑ„ÄÇÂõ†Ê≠§ËøôÈáåÂ∞±Â≠òÂú®‰∏Ä‰∏™Êú™Á°ÆËÆ§ÁöÑÊ∂àÊÅØÁºìÂÜ≤Âå∫ÔºåÂõ†Ê≠§Â∏åÊúõÂºÄÂèë‰∫∫ÂëòËÉΩ<strong>ÈôêÂà∂Ê≠§ÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞èÔºå‰ª•ÈÅøÂÖçÁºìÂÜ≤Âå∫ÈáåÈù¢Êó†ÈôêÂà∂ÁöÑÊú™Á°ÆËÆ§Ê∂àÊÅØÈóÆÈ¢ò</strong>„ÄÇËøô‰∏™Êó∂ÂÄôÂ∞±ÂèØ‰ª•ÈÄöËøá‰ΩøÁî® basic.qos ÊñπÊ≥ïËÆæÁΩÆ‚ÄúÈ¢ÑÂèñËÆ°Êï∞‚ÄùÂÄºÊù•ÂÆåÊàêÁöÑ„ÄÇ<strong>ËØ•ÂÄºÂÆö‰πâÈÄöÈÅì‰∏äÂÖÅËÆ∏ÁöÑÊú™Á°ÆËÆ§Ê∂àÊÅØÁöÑÊúÄÂ§ßÊï∞Èáè</strong>„ÄÇ‰∏ÄÊó¶Êï∞ÈáèËææÂà∞ÈÖçÁΩÆÁöÑÊï∞ÈáèÔºåRabbitMQ Â∞ÜÂÅúÊ≠¢Âú®ÈÄöÈÅì‰∏ä‰º†ÈÄíÊõ¥Â§öÊ∂àÊÅØÔºåÈô§ÈùûËá≥Â∞ëÊúâ‰∏Ä‰∏™Êú™Â§ÑÁêÜÁöÑÊ∂àÊÅØË¢´Á°ÆËÆ§Ôºå‰æãÂ¶ÇÔºåÂÅáËÆæÂú®ÈÄöÈÅì‰∏äÊúâÊú™Á°ÆËÆ§ÁöÑÊ∂àÊÅØ 5„ÄÅ6„ÄÅ7Ôºå8ÔºåÂπ∂‰∏îÈÄöÈÅìÁöÑÈ¢ÑÂèñËÆ°Êï∞ËÆæÁΩÆ‰∏∫ 4ÔºåÊ≠§Êó∂ RabbitMQ Â∞Ü‰∏ç‰ºöÂú®ËØ•ÈÄöÈÅì‰∏äÂÜç‰º†ÈÄí‰ªª‰ΩïÊ∂àÊÅØÔºåÈô§ÈùûËá≥Â∞ëÊúâ‰∏Ä‰∏™Êú™Â∫îÁ≠îÁöÑÊ∂àÊÅØË¢´ ack„ÄÇÊØîÊñπËØ¥ tag=6 Ëøô‰∏™Ê∂àÊÅØÂàöÂàöË¢´Á°ÆËÆ§ ACKÔºåRabbitMQ Â∞Ü‰ºöÊÑüÁü•Ëøô‰∏™ÊÉÖÂÜµÂà∞Âπ∂ÂÜçÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØ„ÄÇÊ∂àÊÅØÂ∫îÁ≠îÂíå QoS È¢ÑÂèñÂÄºÂØπÁî®Êà∑ÂêûÂêêÈáèÊúâÈáçÂ§ßÂΩ±Âìç„ÄÇÈÄöÂ∏∏ÔºåÂ¢ûÂä†È¢ÑÂèñÂ∞ÜÊèêÈ´òÂêëÊ∂àË¥πËÄÖ‰º†ÈÄíÊ∂àÊÅØÁöÑÈÄüÂ∫¶„ÄÇ<strong>ËôΩÁÑ∂Ëá™Âä®Â∫îÁ≠î‰º†ËæìÊ∂àÊÅØÈÄüÁéáÊòØÊúÄ‰Ω≥ÁöÑÔºå‰ΩÜÊòØÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÂ∑≤‰º†ÈÄí‰ΩÜÂ∞öÊú™Â§ÑÁêÜÁöÑÊ∂àÊÅØÁöÑÊï∞Èáè‰πü‰ºöÂ¢ûÂä†Ôºå‰ªéËÄåÂ¢ûÂä†‰∫ÜÊ∂àË¥πËÄÖÁöÑRAM</strong> <strong>Ê∂àËÄó</strong>(ÈöèÊú∫Â≠òÂèñÂ≠òÂÇ®Âô®)Â∫îËØ•Â∞èÂøÉ‰ΩøÁî®ÂÖ∑ÊúâÊó†ÈôêÈ¢ÑÂ§ÑÁêÜÁöÑËá™Âä®Á°ÆËÆ§Ê®°ÂºèÊàñÊâãÂä®Á°ÆËÆ§Ê®°ÂºèÔºåÊ∂àË¥πËÄÖÊ∂àË¥π‰∫ÜÂ§ßÈáèÁöÑÊ∂àÊÅØÂ¶ÇÊûúÊ≤°ÊúâÁ°ÆËÆ§ÁöÑËØùÔºå‰ºöÂØºËá¥Ê∂àË¥πËÄÖËøûÊé•ËäÇÁÇπÁöÑÂÜÖÂ≠òÊ∂àËÄóÂèòÂ§ßÔºåÊâÄ‰ª•ÊâæÂà∞ÂêàÈÄÇÁöÑÈ¢ÑÂèñÂÄºÊòØ‰∏Ä‰∏™ÂèçÂ§çËØïÈ™åÁöÑËøáÁ®ãÔºå‰∏çÂêåÁöÑË¥üËΩΩËØ•ÂÄºÂèñÂÄº‰πü‰∏çÂêå 100 Âà∞ 300 ËåÉÂõ¥ÂÜÖÁöÑÂÄºÈÄöÂ∏∏ÂèØÊèê‰æõÊúÄ‰Ω≥ÁöÑÂêûÂêêÈáèÔºåÂπ∂‰∏î‰∏ç‰ºöÁªôÊ∂àË¥πËÄÖÂ∏¶Êù•Â§™Â§ßÁöÑÈ£éÈô©„ÄÇÈ¢ÑÂèñÂÄº‰∏∫ 1 ÊòØÊúÄ‰øùÂÆàÁöÑ„ÄÇÂΩìÁÑ∂ËøôÂ∞Ü‰ΩøÂêûÂêêÈáèÂèòÂæóÂæà‰ΩéÔºåÁâπÂà´ÊòØÊ∂àË¥πËÄÖËøûÊé•Âª∂ËøüÂæà‰∏•ÈáçÁöÑÊÉÖÂÜµ‰∏ãÔºåÁâπÂà´ÊòØÂú®Ê∂àË¥πËÄÖËøûÊé•Á≠âÂæÖÊó∂Èó¥ËæÉÈïøÁöÑÁéØÂ¢É‰∏≠„ÄÇÂØπ‰∫éÂ§ßÂ§öÊï∞Â∫îÁî®Êù•ËØ¥ÔºåÁ®çÂæÆÈ´ò‰∏ÄÁÇπÁöÑÂÄºÂ∞ÜÊòØÊúÄ‰Ω≥ÁöÑ„ÄÇ</p>
<p><img src="/p/3700606c/RabbitMQ-%E9%A2%84%E5%8F%96%E5%80%BC.png" alt="image-20210620164043190"></p>
</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQ‰ºòÂÖàÁ∫ßÈòüÂàó</title>
    <url>/p/87548d77.html</url>
    <content><![CDATA[<html><head></head><body><p>Âú®‰ºòÂÖàÁ∫ßÈòüÂàó‰∏≠ÔºåÈíàÂØπÁîü‰∫ßËÄÖÁªôÊ∂àÊÅØËÆæÁΩÆÁöÑ‰ºòÂÖàÁ∫ßËøõË°åÊéíÂ∫èÔºå‰ºòÂÖàÁ∫ßË∂äÂ§ßÁöÑË∂äÂÖàË¢´Ê∂àË¥πËÄÖÊ∂àË¥π„ÄÇÂ¶ÇÊûúÂú®Ê∂àË¥πËÄÖÁöÑÊ∂àË¥πÈÄüÂ∫¶Â§ß‰∫éÁîü‰∫ßËÄÖÁöÑÈÄüÂ∫¶Ôºå‰∏îBroker‰∏≠Ê≤°ÊúâÊ∂àÊÅØÂ†ÜÁßØÁöÑÊÉÖÂÜµ‰∏ãÔºåÂØπÂèëÈÄÅÁöÑÊ∂àÊÅØËÆæÁΩÆ‰ºòÂÖàÁ∫ßÊ≤°ÊúâÊÑè‰πâ„ÄÇ</p>
<p>Âú®Áîü‰∫ßËÄÖÔºåÊåâÂ¶Ç‰∏ãÊñπÂºèÁªôÊ∂àÊÅØËÆæÁΩÆ priority Â±ûÊÄß</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">AMQP.<span class="type">BasicProperties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AMQP</span>.BasicProperties().builder()</span><br><span class="line">    			<span class="comment">// ËÆæÁΩÆÂΩìÂâçÊ∂àÊÅØÁöÑ‰ºòÂÖàÁ∫ß</span></span><br><span class="line">                .priority(<span class="number">5</span>).build();</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®Ê∂àË¥πËÄÖÔºåÊåâÂ¶Ç‰∏ãÊñπÂºèÂ£∞Êòé‰ºòÂÖàÁ∫ßÈòüÂàóÔºå‰ºòÂÖàÁ∫ßÁöÑÂèñÂÄºËåÉÂõ¥ÊòØ0-255ÔºåÊé®Ëçê‰ΩøÁî® 10„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">Map&lt;String,Object&gt; arguments = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">1</span>);</span><br><span class="line">arguments.put(<span class="string">"x-max-priority"</span>,<span class="number">10</span>);</span><br><span class="line">channel.queueDeclare(<span class="string">"queue_name"</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, arguments);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>Âú®RabbitMQÁöÑÊéßÂà∂Âè∞Ê∑ªÂä†‰ºòÂÖàÁ∫ßÈòüÂàó</strong></p>
<p><img src="/p/87548d77/RabbitMQ-%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%96%B0%E5%A2%9E%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97.png" alt="image-20210626201354937"></p>
<p><strong>‰ª£Á†ÅÁ§∫‰æã</strong></p>
<p>Áîü‰∫ßËÄÖ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessagePriorityProducer</span> {</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"priority"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ËÆæÁΩÆÂΩìÂâçÊ∂àÊÅØÁöÑ‰ºòÂÖàÁ∫ß</span></span><br><span class="line">        AMQP.<span class="type">BasicProperties</span> <span class="variable">properties1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AMQP</span>.BasicProperties()</span><br><span class="line">            .builder()</span><br><span class="line">            .priority(<span class="number">5</span>)</span><br><span class="line">            .build();</span><br><span class="line">        <span class="comment">// ËØÅÊòéÊòØ‰ºòÂÖàÁ∫ßË∂äÂ§ßË∂äÂÖàË¢´Ê∂àË¥π</span></span><br><span class="line">        AMQP.<span class="type">BasicProperties</span> <span class="variable">properties2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AMQP</span>.BasicProperties()</span><br><span class="line">            .builder()</span><br><span class="line">            .priority(<span class="number">3</span>)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) {</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">            <span class="comment">// i=5ÁöÑÊ∂àÊÅØ‰ºòÂÖàÂ§ÑÁêÜ</span></span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">5</span>) {</span><br><span class="line">                channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, properties1, message.getBytes());</span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="number">7</span>) {</span><br><span class="line">                channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, properties2, message.getBytes());</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                channel.basicPublish(<span class="string">""</span>, QUEUE_NAME, <span class="literal">null</span>, message.getBytes());</span><br><span class="line">            }</span><br><span class="line">            System.out.println(<span class="string">"ÂèëÈÄÅÊ∂àÊÅØÂÆåÊàê:"</span> + message);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ê∂àË¥πËÄÖ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessagePriorityConsumer</span> {</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"priority"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ËÆæÁΩÆ‰ºòÂÖàÁ∫ßÊúÄÂ§ßÂÄºÔºåÂèñÂÄºËåÉÂõ¥‰∏∫0-255</span></span><br><span class="line">        Map&lt;String,Object&gt; arguments = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">1</span>);</span><br><span class="line">        arguments.put(<span class="string">"x-max-priority"</span>,<span class="number">10</span>);</span><br><span class="line">        <span class="comment">// Â£∞Êòé‰ºòÂÖàÁ∫ßÈòüÂàó</span></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, arguments);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"Á≠âÂæÖÊé•Êî∂Ê∂àÊÅØ..."</span>);</span><br><span class="line">        channel.basicConsume(QUEUE_NAME, <span class="literal">true</span>, (consumerTag, delivery) -&gt; {</span><br><span class="line">            <span class="type">byte</span>[] msgBytes = delivery.getBody();</span><br><span class="line">            System.out.println(<span class="string">"Êé•Êî∂Âà∞Ê∂àÊÅØÔºöÊ∂àÊÅØID="</span> + consumerTag + <span class="string">"===&gt;"</span> + <span class="keyword">new</span> <span class="title class_">String</span>(msgBytes));</span><br><span class="line">        }, consumerTag -&gt; {</span><br><span class="line">            System.out.println(<span class="string">"Ê∂àÊÅØË¢´‰∏≠Êñ≠ÔºöÊ∂àÊÅØID="</span> + consumerTag);</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQÁöÑÂÖ≠ÁßçÊ®°Âºè</title>
    <url>/p/40f0af9d.html</url>
    <content><![CDATA[<html><head></head><body><p><a href="https://www.rabbitmq.com/getstarted.html">ÂÆòÁΩëÈìæÊé•</a></p>
<p>ÁÆÄÂçïÊ®°ÂºèÔºåworkÊ®°ÂºèÔºåPublish/SubscribeÂèëÂ∏É‰∏éËÆ¢ÈòÖÊ®°ÂºèÔºåRoutingË∑ØÁî±Ê®°ÂºèÔºåTopics‰∏ªÈ¢òÊ®°ÂºèÔºåRPCËøúÁ®ãË∞ÉÁî®Ê®°ÂºèÔºàËøúÁ®ãË∞ÉÁî®Ôºå‰∏çÂ§™ÁÆóMQÔºõ‰∏ç‰Ωú‰ªãÁªçÔºâÔºõ</p>
<p><img src="/p/40f0af9d/RabbitMQ-%E5%85%AD%E7%A7%8D%E6%A8%A1%E5%BC%8F.png" alt="image-20210619144630056"></p>
<h2 id="ÁÆÄÂçïÊ®°ÂºèÔºàSimpleÔºâ"><a href="#ÁÆÄÂçïÊ®°ÂºèÔºàSimpleÔºâ" class="headerlink" title="ÁÆÄÂçïÊ®°ÂºèÔºàSimpleÔºâ"></a>ÁÆÄÂçïÊ®°ÂºèÔºàSimpleÔºâ</h2><p><img src="/p/40f0af9d/RabbitMQ-%E7%AE%80%E6%98%93%E6%A8%A1%E5%BC%8F.png" alt="image-20210619172049952"></p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleProducer</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">SIMPLE_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"hello"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="comment">// Âª∫Á´ãËøûÊé•</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="comment">// ÂàõÂª∫‰∏Ä‰∏™ËøûÊé•‰∏≠ÁöÑchannel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Declare a queue</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@see</span> com.rabbitmq.client.AMQP.Queue.Declare</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@see</span> com.rabbitmq.client.AMQP.Queue.DeclareOk</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> queue the name of the queue</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> durable true if we are declaring a durable queue (the queue will survive a server restart)</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> exclusive ËØ•ÈòüÂàóÊòØÂê¶Âè™‰æõ‰∏Ä‰∏™Ê∂àË¥πËÄÖËøõË°åÊ∂àË¥πÔºåÊòØÂê¶ËøõË°åÊ∂àÊÅØÂÖ±‰∫´Ôºåtrue-Â§ö‰∏™Ê∂àË¥πËÄÖÊ∂àË¥πÔºåfalse - Âè™ËÉΩ‰∏Ä‰∏™Ê∂àË¥πËÄÖÊ∂àË¥π</span></span><br><span class="line"><span class="comment">         *                  true if we are declaring an exclusive queue (restricted to this connection)</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> autoDelete ÊúÄÂêé‰∏Ä‰∏™Ê∂àË¥πËÄÖÊñ≠ÂºÄËøûÊé•‰ª•ÂêéÔºåËØ•ÈòüÂàóÊòØÂê¶Ëá™Âä®Âà†Èô§</span></span><br><span class="line"><span class="comment">         *                  true if we are declaring an autodelete queue (server will delete it when no longer in use)</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> arguments other properties (construction arguments) for the queue</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> a declaration-confirm method to indicate the queue was successfully declared</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@throws</span> java.io.IOException if an error is encountered</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * queueDeclare(String queue, boolean durable, boolean exclusive, boolean autoDelete,Map&lt;String, Object&gt; arguments)</span></span><br><span class="line"><span class="comment">         **/</span></span><br><span class="line">        channel.queueDeclare(SIMPLE_QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Publish a message.</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * Publishing to a non-existent exchange will result in a channel-level</span></span><br><span class="line"><span class="comment">         * protocol exception, which closes the channel.</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * Invocations of &lt;code&gt;Channel#basicPublish&lt;/code&gt; will eventually block if a</span></span><br><span class="line"><span class="comment">         * &lt;a href="https://www.rabbitmq.com/alarms.html"&gt;resource-driven alarm&lt;/a&gt; is in effect.</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@see</span> com.rabbitmq.client.AMQP.Basic.Publish</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@see</span> &lt;a href="https://www.rabbitmq.com/alarms.html"&gt;Resource-driven alarms&lt;/a&gt;</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> exchange the exchange to publish the message to</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> routingKey the routing key</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> props other properties for the message - routing headers etc</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> body the message body</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@throws</span> java.io.IOException if an error is encountered</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.basicPublish(<span class="string">""</span>, SIMPLE_QUEUE_NAME, <span class="literal">null</span>, <span class="string">"hello,world!"</span>.getBytes(StandardCharsets.UTF_8));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"Ê∂àÊÅØÂèëÈÄÅÂÆåÊàê"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleConsumer</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">SIMPLE_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"hello"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Start a non-nolocal, non-exclusive consumer, with</span></span><br><span class="line"><span class="comment">         * a server-generated consumerTag.</span></span><br><span class="line"><span class="comment">         * Provide access only to &lt;code&gt;basic.deliver&lt;/code&gt; and</span></span><br><span class="line"><span class="comment">         * &lt;code&gt;basic.cancel&lt;/code&gt; AMQP methods (which is sufficient</span></span><br><span class="line"><span class="comment">         * for most cases). See methods with a {<span class="doctag">@link</span> Consumer} argument</span></span><br><span class="line"><span class="comment">         * to have access to all the application callbacks.</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> queue the name of the queue</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> autoAck Ëá™Âä®Â∫îÁ≠îÔºåÊé•Êî∂Âà∞Ê∂àÊÅØÂ∞±ÂõûÂ§çÊúçÂä°Á´Ø true if the server should consider messages</span></span><br><span class="line"><span class="comment">         * acknowledged once delivered; false if the server should expect</span></span><br><span class="line"><span class="comment">         * explicit acknowledgements</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> deliverCallback callback when a message is delivered</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> cancelCallback callback when the consumer is cancelled</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> the consumerTag generated by the server</span></span><br><span class="line"><span class="comment">         * String basicConsume(String queue, boolean autoAck, DeliverCallback deliverCallback, CancelCallback cancelCallback)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.basicConsume(SIMPLE_QUEUE_NAME, <span class="literal">true</span>,</span><br><span class="line">                <span class="comment">// Ê∂àÊÅØ‰º†ÈÄíÁõëÂê¨ÔºåÊé•Êî∂Âà∞Ê∂àÊÅØÊó∂Ëß¶Âèë</span></span><br><span class="line">                (consumerTag, message) -&gt; {</span><br><span class="line">                    <span class="type">byte</span>[] msgBytes = message.getBody();</span><br><span class="line">                    System.out.println(<span class="string">"Êé•Êî∂Âà∞Ê∂àÊÅØÔºö"</span> + <span class="keyword">new</span> <span class="title class_">String</span>(msgBytes));</span><br><span class="line">                },</span><br><span class="line">                <span class="comment">// ÂèñÊ∂àÊ∂àÊÅØÊó∂ÁöÑÂõûË∞É</span></span><br><span class="line">                consumerTag -&gt; {</span><br><span class="line">                    System.out.println(<span class="string">"Ê∂àÊÅØÊ∂àË¥πË¢´‰∏≠Êñ≠"</span>);</span><br><span class="line">                });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Â∑•‰ΩúÈòüÂàóÊ®°ÂºèÔºàWork-QueuesÔºâ"><a href="#Â∑•‰ΩúÈòüÂàóÊ®°ÂºèÔºàWork-QueuesÔºâ" class="headerlink" title="Â∑•‰ΩúÈòüÂàóÊ®°ÂºèÔºàWork QueuesÔºâ"></a>Â∑•‰ΩúÈòüÂàóÊ®°ÂºèÔºàWork QueuesÔºâ</h2><p><img src="/p/40f0af9d/RabbitMQ-%E5%B7%A5%E4%BD%9C%E9%98%9F%E5%88%97%E6%A8%A1%E5%BC%8F.png" alt="image-20210619172222080"></p>
<p>Â∑•‰ΩúÈòüÂàóÔºàWork QueuesÔºâ‰∏éÂÖ•Èó®Á®ãÂ∫èÁöÑÁÆÄÂçïÊ®°ÂºèÁõ∏ÊØîÔºåÂ§ö‰∫Ü‰∏Ä‰∏™Êàñ‰∏Ä‰∫õÊ∂àË¥πÁ´ØÔºåÂ§ö‰∏™Ê∂àË¥πÁ´ØÂÖ±ÂêåÊ∂àË¥πÂêå‰∏Ä‰∏™ÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØ„ÄÇÂ∑•‰ΩúÈòüÂàóÔºàÂèàÁß∞‰∏∫‰ªªÂä°ÈòüÂàóÔºâÁöÑ‰∏ªË¶ÅÊÄùÊÉ≥ÊòØÈÅøÂÖçÁ´ãÂç≥ÊâßË°åËµÑÊ∫êÂØÜÈõÜÂûã‰ªªÂä°ÔºåËÄå‰∏çÂæó‰∏çÁ≠âÂæÖÂÆÉÂÆåÊàê„ÄÇÁõ∏ÂèçÊàë‰ª¨ÂÆâÊéí‰ªªÂä°Âú®‰πãÂêéÊâßË°å„ÄÇÊàë‰ª¨Êää‰ªªÂä°Â∞ÅË£Ö‰∏∫Ê∂àÊÅØÂπ∂Â∞ÜÂÖ∂ÂèëÈÄÅÂà∞ÈòüÂàó„ÄÇÂú®ÂêéÂè∞ËøêË°åÁöÑÂ∑•‰ΩúËøõÁ®ãÂ∞ÜÂºπÂá∫‰ªªÂä°Âπ∂ÊúÄÁªàÊâßË°å‰Ωú‰∏ö„ÄÇÂΩìÊúâÂ§ö‰∏™Â∑•‰ΩúÁ∫øÁ®ãÊó∂ÔºåËøô‰∫õÂ∑•‰ΩúÁ∫øÁ®ãÂ∞Ü‰∏ÄËµ∑Â§ÑÁêÜËøô‰∫õ‰ªªÂä°„ÄÇ</p>
<p><strong>Â∫îÁî®Âú∫ÊôØ</strong>ÔºöÂØπ‰∫é‰ªªÂä°ËøáÈáçÊàñ‰ªªÂä°ËæÉÂ§öÊÉÖÂÜµÔºàÊ∂àÊÅØÁßØÂéãÔºâÔºå‰ΩøÁî®Â∑•‰ΩúÈòüÂàóÊ®°Âºè‰ΩøÁî®Â§ö‰∏™Ê∂àË¥πËÄÖÂèØ‰ª•ÊèêÈ´ò‰ªªÂä°Â§ÑÁêÜÁöÑÈÄüÂ∫¶„ÄÇ</p>
<h3 id="ËΩÆËØ¢ÂàÜÂèëÊ∂àÊÅØ"><a href="#ËΩÆËØ¢ÂàÜÂèëÊ∂àÊÅØ" class="headerlink" title="ËΩÆËØ¢ÂàÜÂèëÊ∂àÊÅØ"></a><strong>ËΩÆËØ¢ÂàÜÂèëÊ∂àÊÅØ</strong></h3><p>‰∏Ä‰∏™Ê∂àÊÅØÂè™ËÉΩË¢´Â§ÑÁêÜ‰∏ÄÊ¨°Ôºå‰∏çÂèØ‰ª•Ë¢´Â§ÑÁêÜÂ§öÊ¨°„ÄÇ</p>
<p><img src="/p/40f0af9d/RabbitMQ-%E5%B7%A5%E4%BD%9C%E9%98%9F%E5%88%97%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%B6%88%E6%81%AF%E5%88%86%E5%8F%91.png" alt="image-20210619173847176"></p>
<p>ÂàõÂª∫‰∏Ä‰∏™Áîü‰∫ßËÄÖÔºåÊØè‰∏ÄÁßíÂèëÈÄÅ‰∏ÄÊ¨°Ê∂àÊÅØ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WorkQueueProducer</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="comment">// Âª∫Á´ãËøûÊé•</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="comment">// ÂàõÂª∫‰∏Ä‰∏™ËøûÊé•‰∏≠ÁöÑchannel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        channel.queueDeclare(WORK_QUEUE_NAME, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) {</span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">            channel.basicPublish(<span class="string">""</span>, WORK_QUEUE_NAME, <span class="literal">null</span>, (msg).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">            System.out.println(<span class="string">"Ê∂àÊÅØ["</span> + msg + <span class="string">"]ÂèëÈÄÅÂÆåÊàê"</span>);</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ê∂àË¥πËÄÖ1„ÄÅÊ∂àË¥πËÄÖ2„ÄÅÊ∂àË¥πËÄÖ3ÁöÑ‰ª£Á†Å‰∏ÄÊ†∑„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WorkQueueConsumer1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        channel.basicConsume(WORK_QUEUE_NAME, <span class="literal">true</span>,</span><br><span class="line">                <span class="comment">// Ê∂àÊÅØ‰º†ÈÄíÈÄöÁü•</span></span><br><span class="line">                (consumerTag, message) -&gt; {</span><br><span class="line">                    <span class="type">byte</span>[] msgBytes = message.getBody();</span><br><span class="line">                    System.out.println(<span class="string">"Êé•Êî∂Âà∞Ê∂àÊÅØÔºö"</span> + <span class="keyword">new</span> <span class="title class_">String</span>(msgBytes));</span><br><span class="line">                },</span><br><span class="line">                <span class="comment">// ÂèñÊ∂àÊ∂àÊÅØÊó∂ÁöÑÂõûË∞É</span></span><br><span class="line">                consumerTag -&gt; {</span><br><span class="line">                    System.out.println(<span class="string">"Ê∂àÊÅØÊ∂àË¥πË¢´‰∏≠Êñ≠"</span>);</span><br><span class="line">                });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°ÂºèÔºàPublish-subscribeÔºâ"><a href="#ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°ÂºèÔºàPublish-subscribeÔºâ" class="headerlink" title="ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°ÂºèÔºàPublish subscribeÔºâ"></a>ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°ÂºèÔºàPublish subscribeÔºâ</h2><p><img src="/p/40f0af9d/RabbitMQ-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F.png" alt="image-20210619175938554"></p>
<p>Âú®ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âûã‰∏≠ÔºåÂ§ö‰∫Ü‰∏Ä‰∏™x(exchange)ËßíËâ≤ÔºåËÄå‰∏îËøáÁ®ãÁï•ÊúâÂèòÂåñ„ÄÇ</p>
<p><strong>P</strong>ÔºöÁîü‰∫ßËÄÖÔºå‰πüÂ∞±ÊòØË¶ÅÂèëÈÄÅÊ∂àÊÅØÁöÑÁ®ãÂ∫èÔºå‰ΩÜÊòØ‰∏çÂÜçÂèëÈÄÅÂà∞ÈòüÂàó‰∏≠ÔºåËÄåÊòØÂèëÁªôXÔºà‰∫§Êç¢Êú∫Ôºâ</p>
<p><strong>C</strong>ÔºöÊ∂àË¥πËÄÖÔºåÊ∂àÊÅØÁöÑÊé•ÂèóËÄÖÔºå‰ºö‰∏ÄÁõ¥ÁõëÂê¨Ê∂àÊÅØÂà∞Êù•„ÄÇ</p>
<p><strong>Queue</strong>ÔºöÊ∂àÊÅØÈòüÂàóÔºåÊé•Êî∂Ê∂àÊÅØ„ÄÅÁºìÂ≠òÊ∂àÊÅØ„ÄÇ</p>
<p><strong>Exchange</strong>Ôºö‰∫§Êç¢Êú∫ÔºåÂõæ‰∏≠ÁöÑX„ÄÇ‰∏ÄÊñπÈù¢ÔºåÊé•Êî∂Áîü‰∫ßËÄÖÂèëÈÄÅÁöÑÊ∂àÊÅØ„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåÁü•ÈÅìÂ¶Ç‰ΩïÂ§ÑÁêÜÊ∂àÊÅØÔºå‰æãÂ¶ÇÈÄí‰∫§ÁªôÊüê‰∏™ÁâπÂà´ÈòüÂàó„ÄÅÈÄí‰∫§ÁªôÊâÄÊúâÈòüÂàó„ÄÅÊàñÊòØÂ∞ÜÊ∂àÊÅØ‰∏¢ÂºÉ„ÄÇÂà∞Â∫ïÂ¶Ç‰ΩïÊìç‰ΩúÔºåÂèñÂÜ≥‰∫éExchangeÁöÑÁ±ªÂûã„ÄÇExchangeÊúâÂ∏∏ËßÅ‰ª•‰∏ã3ÁßçÁ±ªÂûãÔºö</p>
<ul>
<li><p>FanoutÔºöÂπøÊí≠ÔºåÂ∞ÜÊ∂àÊÅØ‰∫§ÁªôÊâÄÊúâÁªëÂÆöÂà∞‰∫§Êç¢Êú∫ÁöÑÈòüÂàó</p>
</li>
<li><p>DirectÔºöÂÆöÂêëÔºåÊääÊ∂àÊÅØ‰∫§ÁªôÁ¨¶ÂêàÊåáÂÆörouting key ÁöÑÈòüÂàó</p>
</li>
<li><p>TopicÔºöÈÄöÈÖçÁ¨¶ÔºåÊääÊ∂àÊÅØ‰∫§ÁªôÁ¨¶Âêàrouting patternÔºàË∑ØÁî±Ê®°ÂºèÔºâ ÁöÑÈòüÂàó</p>
</li>
</ul>
<p><strong>ExchangeÔºà‰∫§Êç¢Êú∫ÔºâÂè™Ë¥üË¥£ËΩ¨ÂèëÊ∂àÊÅØÔºå‰∏çÂÖ∑Â§áÂ≠òÂÇ®Ê∂àÊÅØÁöÑËÉΩÂäõ</strong>ÔºåÂõ†Ê≠§Â¶ÇÊûúÊ≤°Êúâ‰ªª‰ΩïÈòüÂàó‰∏éExchange<strong>ÁªëÂÆö</strong>ÔºåÊàñËÄÖÊ≤°ÊúâÁ¨¶ÂêàË∑ØÁî±ËßÑÂàôÁöÑÈòüÂàóÔºåÈÇ£‰πàÊ∂àÊÅØ‰ºö‰∏¢Â§±ÔºÅ</p>
<p><img src="/p/40f0af9d/RabbitMQ-Exchange%E4%BA%A4%E6%8D%A2%E6%9C%BA.png" alt="image-20210619185256018"></p>
<h3 id="‰ª£Á†ÅÂÆûÁé∞"><a href="#‰ª£Á†ÅÂÆûÁé∞" class="headerlink" title="‰ª£Á†ÅÂÆûÁé∞"></a><strong>‰ª£Á†ÅÂÆûÁé∞</strong></h3><p>Áîü‰∫ßËÄÖÂ∞ÜÊ∂àÊÅØÂèëÁªô‰∫§Êç¢Êú∫</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FanoutProducer</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">FANOUT_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"fanout"</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">FANOUT_EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">"fanoutExchange"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="comment">// Âª∫Á´ãËøûÊé•</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="comment">// ÂàõÂª∫‰∏Ä‰∏™ËøûÊé•‰∏≠ÁöÑchannel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">// Â£∞Êòé‰∫§Êç¢Êú∫ - channel.exchangeDeclare(‰∫§Êç¢Êú∫ÂêçÂ≠ó,‰∫§Êç¢Êú∫Á±ªÂûã)</span></span><br><span class="line">        channel.exchangeDeclare(FANOUT_EXCHANGE_NAME, BuiltinExchangeType.FANOUT);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">            <span class="comment">// Ê∂àÊÅØÂèëÈÄÅ-channel.basicPublish(‰∫§Êç¢Êú∫[ÈªòËÆ§Default Exchage],Ë∑ØÁî±key[ÁÆÄÂçïÊ®°ÂºèÂèØ‰ª•‰º†ÈÄíÈòüÂàóÂêçÁß∞],Ê∂àÊÅØÂÖ∂ÂÆÉÂ±ûÊÄß,Ê∂àÊÅØÂÜÖÂÆπ)</span></span><br><span class="line">            channel.basicPublish(FANOUT_EXCHANGE_NAME, <span class="string">""</span>, <span class="literal">null</span>, (msg).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">            System.out.println(<span class="string">"Ê∂àÊÅØ["</span> + msg + <span class="string">"]ÂèëÈÄÅÂÆåÊàê"</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// ÂÖ≥Èó≠ËµÑÊ∫ê-channel.close();connection.close()</span></span><br><span class="line">        channel.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ê∂àË¥πËÄÖ1„ÄÅÊ∂àË¥πËÄÖ2„ÄÅÊ∂àË¥πËÄÖ3‰ª£Á†ÅÂùá‰∏ÄËá¥„ÄÇÊ∂àË¥πËÄÖÈúÄË¶ÅÁªëÂÆöÈòüÂàóÔºåÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FanoutConsumer1</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">FANOUT_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"fanout"</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">FANOUT_EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">"fanoutExchange"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">// Â£∞ÊòéÈòüÂàó-channel.queueDeclare(ÂêçÁß∞ÔºåÊòØÂê¶ÊåÅ‰πÖÂåñÔºåÊòØÂê¶Áã¨Âç†Êú¨ËøûÊé•,ÊòØÂê¶Ëá™Âä®Âà†Èô§,ÈôÑÂä†ÂèÇÊï∞)</span></span><br><span class="line">        channel.queueDeclare(FANOUT_QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫-channel.queueBind(ÈòüÂàóÂêç, ‰∫§Êç¢Êú∫Âêç, Ë∑ØÁî±key[ÂπøÊí≠Ê∂àÊÅØËÆæÁΩÆ‰∏∫Á©∫‰∏≤])</span></span><br><span class="line">        channel.queueBind(FANOUT_QUEUE_NAME, FANOUT_EXCHANGE_NAME, <span class="string">""</span>);</span><br><span class="line">        channel.basicConsume(FANOUT_QUEUE_NAME, <span class="literal">true</span>,</span><br><span class="line">                (consumerTag, message) -&gt; {</span><br><span class="line">                    <span class="type">byte</span>[] msgBytes = message.getBody();</span><br><span class="line">                    System.out.println(<span class="string">"Êé•Êî∂Âà∞Ê∂àÊÅØÔºö"</span> + <span class="keyword">new</span> <span class="title class_">String</span>(msgBytes));</span><br><span class="line">                },</span><br><span class="line">                consumerTag -&gt; {</span><br><span class="line">                    System.out.println(<span class="string">"Ê∂àÊÅØÊ∂àË¥πË¢´‰∏≠Êñ≠"</span>);</span><br><span class="line">                });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Ë∑ØÁî±Ê®°ÂºèÔºàRoutingÔºâ"><a href="#Ë∑ØÁî±Ê®°ÂºèÔºàRoutingÔºâ" class="headerlink" title="Ë∑ØÁî±Ê®°ÂºèÔºàRoutingÔºâ"></a>Ë∑ØÁî±Ê®°ÂºèÔºàRoutingÔºâ</h2><p>1.ÈòüÂàó‰∏é‰∫§Êç¢Êú∫ÁöÑÁªëÂÆöÔºå‰∏çËÉΩÊòØ‰ªªÊÑèÁªëÂÆö‰∫ÜÔºåËÄåÊòØË¶ÅÊåáÂÆö‰∏Ä‰∏™RoutingKeyÔºàË∑ØÁî±keyÔºâ„ÄÇ</p>
<p>2.Ê∂àÊÅØÁöÑÂèëÈÄÅÊîæÂú®Âêë ExchangeÂèëÈÄÅÊ∂àÊÅØÊó∂Ôºå‰πüÂøÖÈ°ªÊåáÂÆöÊ∂àÊÅØÁöÑ RoutingKey„ÄÇ</p>
<p>3.Exchange‰∏çÂÜçÊääÊ∂àÊÅØ‰∫§ÁªôÊØè‰∏Ä‰∏™ÁªëÂÆöÁöÑÈòüÂàóÔºåËÄåÊòØÊ†πÊçÆÊ∂àÊÅØÁöÑRouting KeyËøõË°åÂà§Êñ≠ÔºåÂè™ÊúâÈòüÂàóÁöÑRoutingkey‰∏éÊ∂àÊÅØÁöÑ Routing keyÂÆåÂÖ®‰∏ÄËá¥ÔºåÊâç‰ºöÊé•Êî∂Âà∞Ê∂àÊÅØ„ÄÇ</p>
<p><img src="/p/40f0af9d/RabbitMQ-%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F.png" alt="image-20210619201413347"></p>
<p>PÔºöÁîü‰∫ßËÄÖÔºåÂêëExchangeÂèëÈÄÅÊ∂àÊÅØÔºåÂèëÈÄÅÊ∂àÊÅØÊó∂Ôºå‰ºöÊåáÂÆö‰∏Ä‰∏™routing key„ÄÇ</p>
<p>XÔºöExchangeÔºà‰∫§Êç¢Êú∫ÔºâÔºåÊé•Êî∂Áîü‰∫ßËÄÖÁöÑÊ∂àÊÅØÔºåÁÑ∂ÂêéÊääÊ∂àÊÅØÈÄí‰∫§Áªô ‰∏érouting keyÂÆåÂÖ®ÂåπÈÖçÁöÑÈòüÂàó„ÄÇ</p>
<p>C1ÔºöÊ∂àË¥πËÄÖÔºåÂÖ∂ÊâÄÂú®ÈòüÂàóÊåáÂÆö‰∫ÜÈúÄË¶Årouting key ‰∏∫ error ÁöÑÊ∂àÊÅØ</p>
<p>C2ÔºöÊ∂àË¥πËÄÖÔºåÂÖ∂ÊâÄÂú®ÈòüÂàóÊåáÂÆö‰∫ÜÈúÄË¶Årouting key ‰∏∫ info„ÄÅerror„ÄÅwarning ÁöÑÊ∂àÊÅØ</p>
<h3 id="‰ª£Á†ÅÂÆûÁé∞-1"><a href="#‰ª£Á†ÅÂÆûÁé∞-1" class="headerlink" title="‰ª£Á†ÅÂÆûÁé∞"></a>‰ª£Á†ÅÂÆûÁé∞</h3><p>Áîü‰∫ßËÄÖÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÁªô‰∫§Êç¢Êú∫‰πãÂâçÔºåÈúÄË¶ÅÁªôÊ∂àÊÅØËÆæÁΩÆ‰∏äË∑ØÁî±ÈîÆÔºå‰∫§Êç¢Êú∫‰ºöÊ†πÊçÆË∑ØÁî±ÈîÆÂèëÈÄÅÁªôÊåáÂÆöÈòüÂàóÔºåÊ∂àË¥πËÄÖÊ†πÊçÆËá™Â∑±ÁöÑË∑ØÁî±ÈîÆËé∑ÂèñÊåáÂÆöÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØ„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RoutingProducer</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">ROUTING_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">"routing"</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">ROUTING_EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">"routingExchange"</span>;</span><br><span class="line">    <span class="comment">/**  Ë∑ØÁî±ÈîÆ1 */</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">ROUTING_KEY_ERROR</span> <span class="operator">=</span> <span class="string">"log.error"</span>;</span><br><span class="line">    <span class="comment">/** Ë∑ØÁî±ÈîÆ2 */</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">ROUTING_KEY_INFO</span> <span class="operator">=</span> <span class="string">"log.info"</span>;</span><br><span class="line">    <span class="comment">/** Ë∑ØÁî±ÈîÆ3 */</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">ROUTING_KEY_WARNING</span> <span class="operator">=</span> <span class="string">"log.warning"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="comment">// Âª∫Á´ãËøûÊé•</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="comment">// ÂàõÂª∫‰∏Ä‰∏™ËøûÊé•‰∏≠ÁöÑchannel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">// Â£∞Êòé‰∫§Êç¢Êú∫ - channel.exchangeDeclare(‰∫§Êç¢Êú∫ÂêçÂ≠ó,‰∫§Êç¢Êú∫Á±ªÂûã)</span></span><br><span class="line">        channel.exchangeDeclare(ROUTING_EXCHANGE_NAME, BuiltinExchangeType.DIRECT);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span><br><span class="line">            <span class="comment">// ÂèëÈÄÅÊ∂àÊÅØÁöÑÊó∂ÂÄôÊ†πÊçÆÁõ∏ÂÖ≥ÈÄªËæëÊåáÂÆöÁõ∏Â∫îÁöÑrouting key„ÄÇ</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">routingKey</span> <span class="operator">=</span> <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">switch</span> (i / <span class="number">3</span>) {</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">//ÂÅáËÆæi=0Ôºå‰∏∫errorÊ∂àÊÅØ</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                    routingKey = ROUTING_KEY_ERROR;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">//ÂÅáËÆæi=1Ôºå‰∏∫infoÊ∂àÊÅØ</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    routingKey = ROUTING_KEY_INFO;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">//ÂÅáËÆæi=2Ôºå‰∏∫warningÊ∂àÊÅØ</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    routingKey = ROUTING_KEY_WARNING;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">"message_"</span> + i;</span><br><span class="line">            <span class="comment">// Ê∂àÊÅØÂèëÈÄÅ-channel.basicPublish(‰∫§Êç¢Êú∫[ÈªòËÆ§Default Exchage],Ë∑ØÁî±key[ÁÆÄÂçïÊ®°ÂºèÂèØ‰ª•‰º†ÈÄíÈòüÂàóÂêçÁß∞],Ê∂àÊÅØÂÖ∂ÂÆÉÂ±ûÊÄß,Ê∂àÊÅØÂÜÖÂÆπ)</span></span><br><span class="line">            channel.basicPublish(ROUTING_EXCHANGE_NAME, routingKey, <span class="literal">null</span>, (msg).getBytes(StandardCharsets.UTF_8));</span><br><span class="line">            System.out.println(<span class="string">"Ê∂àÊÅØ["</span> + msg + <span class="string">"]ÂèëÈÄÅÂÆåÊàê"</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ÂÖ≥Èó≠ËµÑÊ∫ê-channel.close();connection.close()</span></span><br><span class="line">        channel.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ê∂àË¥πËÄÖ1„ÄÅ2„ÄÅ3‰ª£Á†ÅÂùá‰∏ÄËá¥„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RoutingConsumer1</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">"192.168.19.128"</span>);</span><br><span class="line">        connectionFactory.setPort(<span class="number">5672</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">"admin"</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">"admin"</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="comment">// Â£∞ÊòéÈòüÂàó-channel.queueDeclare(ÂêçÁß∞ÔºåÊòØÂê¶ÊåÅ‰πÖÂåñÔºåÊòØÂê¶Áã¨Âç†Êú¨ËøûÊé•,ÊòØÂê¶Ëá™Âä®Âà†Èô§,ÈôÑÂä†ÂèÇÊï∞)</span></span><br><span class="line">        channel.queueDeclare(ROUTING_QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫-channel.queueBind(ÈòüÂàóÂêç, ‰∫§Êç¢Êú∫Âêç, Ë∑ØÁî±key[ÂπøÊí≠Ê∂àÊÅØËÆæÁΩÆ‰∏∫Á©∫‰∏≤])</span></span><br><span class="line">        channel.queueBind(ROUTING_QUEUE_NAME, ROUTING_EXCHANGE_NAME, ROUTING_KEY_ERROR);</span><br><span class="line">        <span class="comment">// autoAck ÊòØÂê¶Ëá™Âä®Â∫îÁ≠îÔºåtrue‰∏∫Ëá™Âä®Â∫îÁ≠î[mqÊé•Êî∂Âà∞ÂõûÂ§ç‰ºöÂà†Èô§Ê∂àÊÅØ]</span></span><br><span class="line">        channel.basicConsume(ROUTING_QUEUE_NAME, <span class="literal">true</span>,</span><br><span class="line">                (consumerTag, message) -&gt; {</span><br><span class="line">                    <span class="type">byte</span>[] msgBytes = message.getBody();</span><br><span class="line">                    System.out.println(<span class="string">"Êé•Êî∂Âà∞Ê∂àÊÅØÔºöÊ∂àÊÅØID="</span> + consumerTag + <span class="string">"===&gt;"</span> + <span class="keyword">new</span> <span class="title class_">String</span>(msgBytes));</span><br><span class="line">                },</span><br><span class="line">                consumerTag -&gt; {</span><br><span class="line">                    System.out.println(<span class="string">"Ê∂àÊÅØÊ∂àË¥πË¢´‰∏≠Êñ≠"</span>);</span><br><span class="line">                });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Topic-ÈÄöÈÖçÁ¨¶Ê®°Âºè"><a href="#Topic-ÈÄöÈÖçÁ¨¶Ê®°Âºè" class="headerlink" title="Topic ÈÄöÈÖçÁ¨¶Ê®°Âºè"></a>Topic ÈÄöÈÖçÁ¨¶Ê®°Âºè</h2><p>TopicÁ±ªÂûã‰∏éDirectÁõ∏ÊØîÔºåÈÉΩÊòØÂèØ‰ª•Ê†πÊçÆRoutingKeyÊääÊ∂àÊÅØË∑ØÁî±Âà∞‰∏çÂêåÁöÑÈòüÂàó„ÄÇÂè™‰∏çËøáTopicÁ±ªÂûãExchangeÂèØ‰ª•ËÆ©ÈòüÂàóÂú®ÁªëÂÆöRouting keyÁöÑÊó∂ÂÄô‰ΩøÁî®ÈÄöÈÖçÁ¨¶„ÄÇ</p>
<p><img src="/p/40f0af9d/RabbitMQ-Topics%E9%80%9A%E9%85%8D%E7%AC%A6%E6%A8%A1%E5%BC%8F.png" alt="image-20210619214503441"></p>
<p>Routingkey ‰∏ÄËà¨ÈÉΩÊòØÊúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂçïËØçÁªÑÊàêÔºåÂ§ö‰∏™ÂçïËØç‰πãÈó¥‰ª•‚Äú . ‚ÄùÂàÜÂâ≤Ôºå‰æãÂ¶ÇÔºö item.insert„ÄÅitem.insert.abc„ÄÇ</p>
<p>ÈÄöÈÖçÁ¨¶ËßÑÂàôÔºö</p>
<ul>
<li><p>#ÔºöÂåπÈÖç‰∏Ä‰∏™ÊàñÂ§ö‰∏™ËØç</p>
</li>
<li><p>*ÔºöÂè™ÂåπÈÖç1‰∏™ËØç</p>
</li>
</ul>
<p>‰∏æ‰æãÔºö</p>
<p>item.#ÔºöËÉΩÂ§üÂåπÈÖç item.insert.abc ÊàñËÄÖ item.insert</p>
<p>item.*ÔºöÂè™ËÉΩÂåπÈÖç item.insert</p>
<img src="/p/40f0af9d/_posts/MQ-RabbitMQ-Six-Mode/RabbitMQ-TopicExchangeË∑ØÁî±ÈîÆÂåπÈÖçËßÑÂàô.png" alt="image-20210619215508877" style="zoom:150%;">

<p>Á∫¢Ëâ≤QueueÔºöÁªëÂÆöÁöÑÊòØusa.# ÔºåÂõ†Ê≠§Âá°ÊòØ‰ª• usa.ÂºÄÂ§¥ÁöÑrouting key ÈÉΩ‰ºöË¢´ÂåπÈÖçÂà∞„ÄÇ</p>
<p>ÈªÑËâ≤QueueÔºöÁªëÂÆöÁöÑÊòØ#.news ÔºåÂõ†Ê≠§Âá°ÊòØ‰ª• .newsÁªìÂ∞æÁöÑ routing key ÈÉΩ‰ºöË¢´ÂåπÈÖç„ÄÇ</p>
<p>ËøòÊúâ‰∏ÄÁßçRPCÁöÑÊ®°ÂºèÔºå‰∏çÂ∏∏Áî®ÔºåÊ≠§Â§ÑÁúÅÁï•„ÄÇ</p>
<h2 id="RabbitMQÂ∑•‰ΩúÊ®°ÂºèÊÄªÁªì"><a href="#RabbitMQÂ∑•‰ΩúÊ®°ÂºèÊÄªÁªì" class="headerlink" title="RabbitMQÂ∑•‰ΩúÊ®°ÂºèÊÄªÁªì"></a>RabbitMQÂ∑•‰ΩúÊ®°ÂºèÊÄªÁªì</h2><h3 id="ÁÆÄÂçïÊ®°Âºè-HelloWorld"><a href="#ÁÆÄÂçïÊ®°Âºè-HelloWorld" class="headerlink" title="ÁÆÄÂçïÊ®°Âºè HelloWorld"></a>ÁÆÄÂçïÊ®°Âºè HelloWorld</h3><p>‰∏Ä‰∏™Áîü‰∫ßËÄÖ„ÄÅ‰∏Ä‰∏™Ê∂àË¥πËÄÖÔºå‰∏çÈúÄË¶ÅËÆæÁΩÆ‰∫§Êç¢Êú∫Ôºà‰ΩøÁî®ÈªòËÆ§ÁöÑ‰∫§Êç¢Êú∫Ôºâ</p>
<h3 id="Â∑•‰ΩúÈòüÂàóÊ®°Âºè-Work-Queue"><a href="#Â∑•‰ΩúÈòüÂàóÊ®°Âºè-Work-Queue" class="headerlink" title="Â∑•‰ΩúÈòüÂàóÊ®°Âºè Work Queue"></a>Â∑•‰ΩúÈòüÂàóÊ®°Âºè Work Queue</h3><p>‰∏Ä‰∏™Áîü‰∫ßËÄÖ„ÄÅÂ§ö‰∏™Ê∂àË¥πËÄÖÔºàÁ´û‰∫âÂÖ≥Á≥ªÔºâÔºå‰∏çÈúÄË¶ÅËÆæÁΩÆ‰∫§Êç¢Êú∫Ôºà‰ΩøÁî®ÈªòËÆ§ÁöÑ‰∫§Êç¢Êú∫Ôºâ</p>
<h3 id="ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè-Publish-subscribe"><a href="#ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè-Publish-subscribe" class="headerlink" title="ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè Publish/subscribe"></a>ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè Publish/subscribe</h3><p>ÈúÄË¶ÅËÆæÁΩÆÁ±ªÂûã‰∏∫fanoutÁöÑ‰∫§Êç¢Êú∫ÔºåÂπ∂‰∏î‰∫§Êç¢Êú∫ÂíåÈòüÂàóËøõË°åÁªëÂÆöÔºåÂΩìÂèëÈÄÅÊ∂àÊÅØÂà∞‰∫§Êç¢Êú∫ÂêéÔºå‰∫§Êç¢Êú∫‰ºöÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÁªëÂÆöÁöÑÈòüÂàó</p>
<h3 id="Ë∑ØÁî±Ê®°Âºè-Routing"><a href="#Ë∑ØÁî±Ê®°Âºè-Routing" class="headerlink" title="Ë∑ØÁî±Ê®°Âºè Routing"></a>Ë∑ØÁî±Ê®°Âºè Routing</h3><p>ÈúÄË¶ÅËÆæÁΩÆÁ±ªÂûã‰∏∫directÁöÑ‰∫§Êç¢Êú∫Ôºå‰∫§Êç¢Êú∫ÂíåÈòüÂàóËøõË°åÁªëÂÆöÔºåÂπ∂‰∏îÊåáÂÆörouting keyÔºåÂΩìÂèëÈÄÅÊ∂àÊÅØÂà∞‰∫§Êç¢Êú∫ÂêéÔºå‰∫§Êç¢Êú∫‰ºöÊ†πÊçÆrouting keyÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÂØπÂ∫îÁöÑÈòüÂàó</p>
<h3 id="ÈÄöÈÖçÁ¨¶Ê®°Âºè-Topic"><a href="#ÈÄöÈÖçÁ¨¶Ê®°Âºè-Topic" class="headerlink" title="ÈÄöÈÖçÁ¨¶Ê®°Âºè Topic"></a>ÈÄöÈÖçÁ¨¶Ê®°Âºè Topic</h3><p>ÈúÄË¶ÅËÆæÁΩÆÁ±ªÂûã‰∏∫topicÁöÑ‰∫§Êç¢Êú∫Ôºå‰∫§Êç¢Êú∫ÂíåÈòüÂàóËøõË°åÁªëÂÆöÔºåÂπ∂‰∏îÊåáÂÆöÈÄöÈÖçÁ¨¶ÊñπÂºèÁöÑrouting keyÔºåÂΩìÂèëÈÄÅÊ∂àÊÅØÂà∞‰∫§Êç¢Êú∫ÂêéÔºå‰∫§Êç¢Êú∫‰ºöÊ†πÊçÆrouting keyÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÂØπÂ∫îÁöÑÈòüÂàó</p>
</body></html>]]></content>
      <tags>
        <tag>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>MYSQLÂÖ´ËÇ°Êñá</title>
    <url>/p/ca035920.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="‰ªÄ‰πàÊòØMySQLÔºü"><a href="#‰ªÄ‰πàÊòØMySQLÔºü" class="headerlink" title="‰ªÄ‰πàÊòØMySQLÔºü"></a>‰ªÄ‰πàÊòØMySQLÔºü</h2><p>ÁôæÂ∫¶ÁôæÁßë‰∏äÁöÑËß£ÈáäÔºöMySQLÊòØ‰∏ÄÁßçÂºÄÊîæÊ∫ê‰ª£Á†ÅÁöÑÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªüÔºàRDBMSÔºâÔºå‰ΩøÁî®ÊúÄÂ∏∏Áî®ÁöÑÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜËØ≠Ë®Ä‚ÄìÁªìÊûÑÂåñÊü•ËØ¢ËØ≠Ë®ÄÔºàSQLÔºâËøõË°åÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜ„ÄÇMySQLÊòØÂºÄÊîæÊ∫ê‰ª£Á†ÅÁöÑÔºåÂõ†Ê≠§‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•Âú®General Public LicenseÁöÑËÆ∏ÂèØ‰∏ã‰∏ãËΩΩÂπ∂Ê†πÊçÆ‰∏™ÊÄßÂåñÁöÑÈúÄË¶ÅÂØπÂÖ∂ËøõË°å‰øÆÊîπ„ÄÇ</p>
<h2 id="MySQLÂ∏∏Áî®ÁöÑÂ≠òÂÇ®ÂºïÊìéÊúâ‰ªÄ‰πàÔºüÂÆÉ‰ª¨Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#MySQLÂ∏∏Áî®ÁöÑÂ≠òÂÇ®ÂºïÊìéÊúâ‰ªÄ‰πàÔºüÂÆÉ‰ª¨Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="MySQLÂ∏∏Áî®ÁöÑÂ≠òÂÇ®ÂºïÊìéÊúâ‰ªÄ‰πàÔºüÂÆÉ‰ª¨Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>MySQLÂ∏∏Áî®ÁöÑÂ≠òÂÇ®ÂºïÊìéÊúâ‰ªÄ‰πàÔºüÂÆÉ‰ª¨Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h2><ul>
<li><p>InnoDB</p>
<p>InnoDBÊòØMySQLÁöÑÈªòËÆ§Â≠òÂÇ®ÂºïÊìéÔºåÊîØÊåÅ‰∫ãÂä°„ÄÅË°åÈîÅÂíåÂ§ñÈîÆÁ≠âÊìç‰Ωú„ÄÇ</p>
</li>
<li><p>MyISAM</p>
<p>MyISAMÊòØMySQL5.1ÁâàÊú¨ÂâçÁöÑÈªòËÆ§Â≠òÂÇ®ÂºïÊìéÔºåMyISAMÁöÑÂπ∂ÂèëÊÄßÊØîËæÉÂ∑ÆÔºå‰∏çÊîØÊåÅ‰∫ãÂä°ÂíåÂ§ñÈîÆÁ≠âÊìç‰ΩúÔºåÈªòËÆ§ÁöÑÈîÅÁöÑÁ≤íÂ∫¶‰∏∫Ë°®Á∫ßÈîÅ„ÄÇ</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">InnoDB</th>
<th align="center">MyISAM</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Â§ñÈîÆ</td>
<td align="center">ÊîØÊåÅ</td>
<td align="center">‰∏çÊîØÊåÅ</td>
</tr>
<tr>
<td align="center">‰∫ãÂä°</td>
<td align="center">ÊîØÊåÅ</td>
<td align="center">‰∏çÊîØÊåÅ</td>
</tr>
<tr>
<td align="center">ÈîÅ</td>
<td align="center">ÊîØÊåÅË°®ÈîÅÂíåË°åÈîÅ</td>
<td align="center">ÊîØÊåÅË°®ÈîÅ</td>
</tr>
<tr>
<td align="center">ÂèØÊÅ¢Â§çÊÄß</td>
<td align="center">Ê†πÊçÆ‰∫ãÂä°Êó•ÂøóËøõË°åÊÅ¢Â§ç</td>
<td align="center">Êó†‰∫ãÂä°Êó•Âøó</td>
</tr>
<tr>
<td align="center">Ë°®ÁªìÊûÑ</td>
<td align="center">Êï∞ÊçÆÂíåÁ¥¢ÂºïÊòØÈõÜ‰∏≠Â≠òÂÇ®ÁöÑÔºå.ibdÂíå.frm</td>
<td align="center">Êï∞ÊçÆÂíåÁ¥¢ÂºïÊòØÂàÜÂºÄÂ≠òÂÇ®ÁöÑÔºåÊï∞ÊçÆ<code>.MYD</code>ÔºåÁ¥¢Âºï<code>.MYI</code></td>
</tr>
<tr>
<td align="center">Êü•ËØ¢ÊÄßËÉΩ</td>
<td align="center">‰∏ÄËà¨ÊÉÖÂÜµÁõ∏ÊØî‰∫éMyISAMËæÉÂ∑Æ</td>
<td align="center">‰∏ÄËà¨ÊÉÖÂÜµÁõ∏ÊØî‰∫éInnoDBËæÉÂ∑Æ</td>
</tr>
<tr>
<td align="center">Á¥¢Âºï</td>
<td align="center">ËÅöÁ∞áÁ¥¢Âºï</td>
<td align="center">ÈùûËÅöÁ∞áÁ¥¢Âºï</td>
</tr>
</tbody></table>
<h2 id="Êï∞ÊçÆÂ∫ìÁöÑ‰∏âÂ§ßËåÉÂºè"><a href="#Êï∞ÊçÆÂ∫ìÁöÑ‰∏âÂ§ßËåÉÂºè" class="headerlink" title="Êï∞ÊçÆÂ∫ìÁöÑ‰∏âÂ§ßËåÉÂºè"></a>Êï∞ÊçÆÂ∫ìÁöÑ‰∏âÂ§ßËåÉÂºè</h2><ul>
<li>Á¨¨‰∏ÄËåÉÂºèÔºöÁ°Æ‰øùÊØèÂàó‰øùÊåÅÂéüÂ≠êÊÄßÔºåÊï∞ÊçÆË°®‰∏≠ÁöÑÊâÄÊúâÂ≠óÊÆµÂÄºÈÉΩÊòØ‰∏çÂèØÂàÜËß£ÁöÑÂéüÂ≠êÂÄº„ÄÇ</li>
<li>Á¨¨‰∫åËåÉÂºèÔºöÁ°Æ‰øùË°®‰∏≠ÁöÑÊØèÂàóÈÉΩÂíå‰∏ªÈîÆÁõ∏ÂÖ≥</li>
<li>Á¨¨‰∏âËåÉÂºèÔºöÁ°Æ‰øùÊØèÂàóÈÉΩÂíå‰∏ªÈîÆÂàóÁõ¥Êé•Áõ∏ÂÖ≥ËÄå‰∏çÊòØÈó¥Êé•Áõ∏ÂÖ≥</li>
</ul>
<h2 id="MySQLÁöÑÊï∞ÊçÆÁ±ªÂûãÊúâÂì™‰∫õ"><a href="#MySQLÁöÑÊï∞ÊçÆÁ±ªÂûãÊúâÂì™‰∫õ" class="headerlink" title="MySQLÁöÑÊï∞ÊçÆÁ±ªÂûãÊúâÂì™‰∫õ"></a>MySQLÁöÑÊï∞ÊçÆÁ±ªÂûãÊúâÂì™‰∫õ</h2><ul>
<li><p>Êï¥Êï∞</p>
<p>TINYINT„ÄÅSMALLINT„ÄÅMEDIUMINT„ÄÅINT„ÄÅBIGINTÂàÜÂà´Âç†Áî®8„ÄÅ16„ÄÅ24„ÄÅ32„ÄÅ64‰ΩçÂ≠òÂÇ®Á©∫Èó¥„ÄÇÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåINT(10)‰∏≠ÁöÑ10Âè™ÊòØË°®Á§∫ÊòæÁ§∫Â≠óÁ¨¶ÁöÑ‰∏™Êï∞ÔºåÂπ∂Êó†ÂÆûÈôÖÊÑè‰πâ„ÄÇ‰∏ÄËà¨ÂíåUNSIGNED ZEROFILLÈÖçÂêà‰ΩøÁî®ÊâçÊúâÂÆûÈôÖÊÑè‰πâÔºå‰æãÂ¶ÇÔºåÊï∞ÊçÆÁ±ªÂûãINT(3)ÔºåÂ±ûÊÄß‰∏∫UNSIGNED ZEROFILLÔºåÂ¶ÇÊûúÊèíÂÖ•ÁöÑÊï∞ÊçÆ‰∏∫3ÁöÑËØùÔºåÂÆûÈôÖÂ≠òÂÇ®ÁöÑÊï∞ÊçÆ‰∏∫003„ÄÇ</p>
</li>
<li><p>ÊµÆÁÇπÊï∞</p>
<p>FLOAT„ÄÅDOUBLEÂèäDECIMAL‰∏∫ÊµÆÁÇπÊï∞Á±ªÂûãÔºåDECIMALÊòØÂà©Áî®Â≠óÁ¨¶‰∏≤ËøõË°åÂ§ÑÁêÜÁöÑÔºåËÉΩÂ≠òÂÇ®Á≤æÁ°ÆÁöÑÂ∞èÊï∞„ÄÇÁõ∏ÊØî‰∫éFLOATÂíåDOUBLEÔºåDECIMALÁöÑÊïàÁéáÊõ¥‰Ωé‰∫õ„ÄÇFLOAT„ÄÅDOUBLEÂèäDECIMALÈÉΩÂèØ‰ª•ÊåáÂÆöÂàóÂÆΩÔºå‰æãÂ¶ÇFLOAT(5,2)Ë°®Á§∫‰∏ÄÂÖ±5‰ΩçÔºå‰∏§‰ΩçÂ≠òÂÇ®Â∞èÊï∞ÈÉ®ÂàÜÔºå‰∏â‰ΩçÂ≠òÂÇ®Êï¥Êï∞ÈÉ®ÂàÜ„ÄÇ</p>
</li>
<li><p>Â≠óÁ¨¶‰∏≤</p>
<p>Â≠óÁ¨¶‰∏≤Â∏∏Áî®ÁöÑ‰∏ªË¶ÅÊúâCHARÂíåVARCHARÔºåVARCHAR‰∏ªË¶ÅÁî®‰∫éÂ≠òÂÇ®ÂèØÂèòÈïøÂ≠óÁ¨¶‰∏≤ÔºåÁõ∏ÊØî‰∫éÂÆöÈïøÁöÑCHARÊõ¥ËäÇÁúÅÁ©∫Èó¥„ÄÇCHARÊòØÂÆöÈïøÁöÑÔºåÊ†πÊçÆÂÆö‰πâÁöÑÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ÂàÜÈÖçÁ©∫Èó¥„ÄÇ</p>
<p>Â∫îÁî®Âú∫ÊôØÔºöÂØπ‰∫éÁªèÂ∏∏ÂèòÊõ¥ÁöÑÊï∞ÊçÆ‰ΩøÁî®CHARÊõ¥Â•ΩÔºåCHAR‰∏çÂÆπÊòì‰∫ßÁîüÁ¢éÁâá„ÄÇÂØπ‰∫éÈùûÂ∏∏Áü≠ÁöÑÂàó‰πüÊòØ‰ΩøÁî®CHARÊõ¥Â•Ω‰∫õÔºåCHARÁõ∏ÊØî‰∫éVARCHARÂú®ÊïàÁéá‰∏äÊõ¥È´ò‰∫õ„ÄÇ‰∏ÄËà¨ÈÅøÂÖç‰ΩøÁî®TEXT/BLOBÁ≠âÁ±ªÂûãÔºåÂõ†‰∏∫Êü•ËØ¢Êó∂‰ºö‰ΩøÁî®‰∏¥Êó∂Ë°®ÔºåÈÄ†Êàê‰∏•ÈáçÁöÑÊÄßËÉΩÂºÄÈîÄ„ÄÇ</p>
</li>
<li><p>Êó•Êúü</p>
<p>ÊØîËæÉÂ∏∏Áî®ÁöÑÊúâyear„ÄÅtime„ÄÅdate„ÄÅdatetime„ÄÅtimestampÁ≠âÔºådatetime‰øùÂ≠ò‰ªé1000Âπ¥Âà∞9999Âπ¥ÁöÑÊó∂Èó¥ÔºåÁ≤æÂ∫¶Âà∞ÁßíÔºå‰ΩøÁî®8Â≠óËäÇÁöÑÂ≠òÂÇ®Á©∫Èó¥Ôºå‰∏éÊó∂Âå∫Êó†ÂÖ≥„ÄÇtimestampÂíåUNIXÁöÑÊó∂Èó¥Êà≥Áõ∏ÂêåÔºå‰øùÂ≠ò‰ªé1970Âπ¥1Êúà1Êó•ÂçàÂ§úÂà∞2038Âπ¥ÁöÑÊó∂Èó¥ÔºåÁ≤æÂ∫¶Âà∞ÁßíÔºå‰ΩøÁî®Âõõ‰∏™Â≠óËäÇÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåÂπ∂‰∏î‰∏éÊó∂Âå∫Áõ∏ÂÖ≥„ÄÇ</p>
<p>Â∫îÁî®Âú∫ÊôØÔºöÂ∞ΩÈáè‰ΩøÁî®timestampÔºåÁõ∏ÊØî‰∫édatetimeÂÆÉÊúâÁùÄÊõ¥È´òÁöÑÁ©∫Èó¥ÊïàÁéá„ÄÇ</p>
</li>
</ul>
<h2 id="Á¥¢Âºï"><a href="#Á¥¢Âºï" class="headerlink" title="Á¥¢Âºï"></a>Á¥¢Âºï</h2><h3 id="‰ªÄ‰πàÊòØÁ¥¢ÂºïÔºü"><a href="#‰ªÄ‰πàÊòØÁ¥¢ÂºïÔºü" class="headerlink" title="‰ªÄ‰πàÊòØÁ¥¢ÂºïÔºü"></a>‰ªÄ‰πàÊòØÁ¥¢ÂºïÔºü</h3><p>ÁôæÂ∫¶ÁôæÁßëÁöÑËß£ÈáäÔºöÁ¥¢ÂºïÊòØÂØπÊï∞ÊçÆÂ∫ìË°®ÁöÑ‰∏ÄÂàóÊàñËÄÖÂ§öÂàóÁöÑÂÄºËøõË°åÊéíÂ∫è‰∏ÄÁßçÁªìÊûÑÔºå‰ΩøÁî®Á¥¢ÂºïÂèØ‰ª•Âø´ÈÄüËÆøÈóÆÊï∞ÊçÆË°®‰∏≠ÁöÑÁâπÂÆö‰ø°ÊÅØ„ÄÇ</p>
<h3 id="Á¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπÔºü"><a href="#Á¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπÔºü" class="headerlink" title="Á¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπÔºü"></a>Á¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπÔºü</h3><p>‰ºòÁÇπÔºö</p>
<ul>
<li>Â§ßÂ§ßÂä†Âø´Êï∞ÊçÆÊ£ÄÁ¥¢ÁöÑÈÄüÂ∫¶„ÄÇ</li>
<li>Â∞ÜÈöèÊú∫I/OÂèòÊàêÈ°∫Â∫èI/O(Âõ†‰∏∫B+Ê†ëÁöÑÂè∂Â≠êËäÇÁÇπÊòØËøûÊé•Âú®‰∏ÄËµ∑ÁöÑ)</li>
<li>Âä†ÈÄüË°®‰∏éË°®‰πãÈó¥ÁöÑËøûÊé•</li>
</ul>
<p>Áº∫ÁÇπÔºö</p>
<ul>
<li>‰ªéÁ©∫Èó¥ËßíÂ∫¶ËÄÉËôëÔºåÂª∫Á´ãÁ¥¢ÂºïÈúÄË¶ÅÂç†Áî®Áâ©ÁêÜÁ©∫Èó¥</li>
<li>‰ªéÊó∂Èó¥ËßíÂ∫¶ ËÄÉËôëÔºåÂàõÂª∫ÂíåÁª¥Êä§Á¥¢ÂºïÈÉΩÈúÄË¶ÅËä±Ë¥πÊó∂Èó¥Ôºå‰æãÂ¶ÇÂØπÊï∞ÊçÆËøõË°åÂ¢ûÂà†ÊîπÁöÑÊó∂ÂÄôÈÉΩÈúÄË¶ÅÁª¥Êä§Á¥¢Âºï„ÄÇ</li>
</ul>
<h3 id="Á¥¢ÂºïÁöÑÊï∞ÊçÆÁªìÊûÑÔºü"><a href="#Á¥¢ÂºïÁöÑÊï∞ÊçÆÁªìÊûÑÔºü" class="headerlink" title="Á¥¢ÂºïÁöÑÊï∞ÊçÆÁªìÊûÑÔºü"></a>Á¥¢ÂºïÁöÑÊï∞ÊçÆÁªìÊûÑÔºü</h3><p>Á¥¢ÂºïÁöÑÊï∞ÊçÆÁªìÊûÑ‰∏ªË¶ÅÊúâB+Ê†ëÂíåÂìàÂ∏åË°®ÔºåÂØπÂ∫îÁöÑÁ¥¢ÂºïÂàÜÂà´‰∏∫B+Ê†ëÁ¥¢ÂºïÂíåÂìàÂ∏åÁ¥¢Âºï„ÄÇInnoDBÂºïÊìéÁöÑÁ¥¢ÂºïÁ±ªÂûãÊúâB+Ê†ëÁ¥¢ÂºïÂíåÂìàÂ∏åÁ¥¢ÂºïÔºåÈªòËÆ§ÁöÑÁ¥¢ÂºïÁ±ªÂûã‰∏∫B+Ê†ëÁ¥¢Âºï„ÄÇ</p>
<ul>
<li><p>B+Ê†ëÁ¥¢Âºï</p>
<p>ÁÜüÊÇâÊï∞ÊçÆÁªìÊûÑÁöÑÂêåÂ≠¶ÈÉΩÁü•ÈÅìÔºåB+Ê†ë„ÄÅÂπ≥Ë°°‰∫åÂèâÊ†ë„ÄÅÁ∫¢ÈªëÊ†ëÈÉΩÊòØÁªèÂÖ∏ÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÂú®B+Ê†ë‰∏≠ÔºåÊâÄÊúâÁöÑËÆ∞ÂΩïËäÇÁÇπÈÉΩÊòØÊåâÁÖßÈîÆÂÄºÂ§ßÂ∞èÁöÑÈ°∫Â∫èÊîæÂú®Âè∂Â≠êËäÇÁÇπ‰∏äÔºåÂ¶Ç‰∏ãÂõæ„ÄÇ</p>
</li>
</ul>
<p><img src="/p/ca035920/MySQL-BTree.png" alt="ÂõæÁâá"></p>
<p>‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ ÔºåÂõ†‰∏∫B+Ê†ëÂÖ∑ÊúâÊúâÂ∫èÊÄßÔºåÂπ∂‰∏îÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩÂ≠òÊîæÂú®Âè∂Â≠êËäÇÁÇπÔºåÊâÄ‰ª•Êü•ÊâæÁöÑÊïàÁéáÈùûÂ∏∏È´òÔºåÂπ∂‰∏îÊîØÊåÅÊéíÂ∫èÂíåËåÉÂõ¥Êü•Êâæ„ÄÇ</p>
<p>B+Ê†ëÁöÑÁ¥¢ÂºïÂèàÂèØ‰ª•ÂàÜ‰∏∫‰∏ªÁ¥¢ÂºïÂíåËæÖÂä©Á¥¢Âºï„ÄÇÂÖ∂‰∏≠‰∏ªÁ¥¢Âºï‰∏∫ËÅöÁ∞áÁ¥¢ÂºïÔºåËæÖÂä©Á¥¢Âºï‰∏∫ÈùûËÅöÁ∞áÁ¥¢Âºï„ÄÇËÅöÁ∞áÁ¥¢ÂºïÊòØ‰ª•‰∏ªÈîÆ‰Ωú‰∏∫B+ Ê†ëÁ¥¢ÂºïÁöÑÈîÆÂÄºÊâÄÊûÑÊàêÁöÑB+Ê†ëÁ¥¢ÂºïÔºåËÅöÁ∞áÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπÂ≠òÂÇ®ÁùÄÂÆåÊï¥ÁöÑÊï∞ÊçÆËÆ∞ÂΩïÔºõÈùûËÅöÁ∞áÁ¥¢ÂºïÊòØ‰ª•Èùû‰∏ªÈîÆÁöÑÂàó‰Ωú‰∏∫B+Ê†ëÁ¥¢ÂºïÁöÑÈîÆÂÄºÊâÄÊûÑÊàêÁöÑB+Ê†ëÁ¥¢ÂºïÔºåÈùûËÅöÁ∞áÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπÂ≠òÂÇ®ÁùÄ‰∏ªÈîÆÂÄº„ÄÇÊâÄ‰ª•‰ΩøÁî®ÈùûËÅöÁ∞áÁ¥¢ÂºïËøõË°åÊü•ËØ¢Êó∂Ôºå‰ºöÂÖàÊâæÂà∞‰∏ªÈîÆÂÄºÔºåÁÑ∂ÂêéÂà∞Ê†πÊçÆËÅöÁ∞áÁ¥¢ÂºïÊâæÂà∞‰∏ªÈîÆÂØπÂ∫îÁöÑÊï∞ÊçÆÂüü„ÄÇ‰∏äÂõæ‰∏≠Âè∂Â≠êËäÇÁÇπÂ≠òÂÇ®ÁöÑÊòØÊï∞ÊçÆËÆ∞ÂΩïÔºå‰∏∫ËÅöÁ∞áÁ¥¢ÂºïÁöÑÁªìÊûÑÂõæÔºåÈùûËÅöÁ∞áÁ¥¢ÂºïÁöÑÁªìÊûÑÂõæÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/ca035920/MySQL-BTree%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E5%92%8C%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95.png" alt="ÂõæÁâá"></p>
<p>‰∏äÂõæ‰∏≠ÁöÑÂ≠óÊØç‰∏∫Êï∞ÊçÆÁöÑÈùû‰∏ªÈîÆÁöÑÂàóÂÄºÔºåÂÅáËÆæË¶ÅÊü•ËØ¢ËØ•ÂàóÂÄº‰∏∫BÁöÑ‰ø°ÊÅØÔºåÂàôÈúÄÂÖàÊâæÂà∞‰∏ªÈîÆ7ÔºåÂú®Âà∞ËÅöÁ∞áÁ¥¢Âºï‰∏≠Êü•ËØ¢‰∏ªÈîÆ7ÊâÄÂØπÂ∫îÁöÑÊï∞ÊçÆÂüü„ÄÇ</p>
<ul>
<li><p>ÂìàÂ∏åÁ¥¢Âºï</p>
<p>ÂìàÂ∏åÁ¥¢ÂºïÊòØÂü∫‰∫éÂìàÂ∏åË°®ÂÆûÁé∞ÁöÑÔºåÂØπ‰∫éÊØè‰∏ÄË°åÊï∞ÊçÆÔºåÂ≠òÂÇ®ÂºïÊìé‰ºöÂØπÁ¥¢ÂºïÂàóÈÄöËøáÂìàÂ∏åÁÆóÊ≥ïËøõË°åÂìàÂ∏åËÆ°ÁÆóÂæóÂà∞ÂìàÂ∏åÁ†ÅÔºåÂπ∂‰∏îÂìàÂ∏åÁÆóÊ≥ïË¶ÅÂ∞ΩÈáè‰øùËØÅ‰∏çÂêåÁöÑÂàóÂÄºËÆ°ÁÆóÂá∫ÁöÑÂìàÂ∏åÁ†ÅÂÄºÊòØ‰∏çÂêåÁöÑÔºåÂ∞ÜÂìàÂ∏åÁ†ÅÁöÑÂÄº‰Ωú‰∏∫ÂìàÂ∏åË°®ÁöÑkeyÂÄºÔºåÂ∞ÜÊåáÂêëÊï∞ÊçÆË°åÁöÑÊåáÈíà‰Ωú‰∏∫ÂìàÂ∏åË°®ÁöÑvalueÂÄº„ÄÇËøôÊ†∑Êü•Êâæ‰∏Ä‰∏™Êï∞ÊçÆÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Â∞±ÊòØo(1)Ôºå‰∏ÄËà¨Â§öÁî®‰∫éÁ≤æÁ°ÆÊü•Êâæ„ÄÇ</p>
</li>
</ul>
<h3 id="HashÁ¥¢ÂºïÂíåB-Ê†ëÁöÑÂå∫Âà´Ôºü"><a href="#HashÁ¥¢ÂºïÂíåB-Ê†ëÁöÑÂå∫Âà´Ôºü" class="headerlink" title="HashÁ¥¢ÂºïÂíåB+Ê†ëÁöÑÂå∫Âà´Ôºü"></a>HashÁ¥¢ÂºïÂíåB+Ê†ëÁöÑÂå∫Âà´Ôºü</h3><p>Âõ†‰∏∫‰∏§ËÄÖÊï∞ÊçÆÁªìÊûÑ‰∏äÁöÑÂ∑ÆÂºÇÂØºËá¥ÂÆÉ‰ª¨ÁöÑ‰ΩøÁî®Âú∫ÊôØ‰πü‰∏çÂêåÔºåÂìàÂ∏åÁ¥¢Âºï‰∏ÄËà¨Â§öÁî®‰∫éÁ≤æÁ°ÆÁöÑÁ≠âÂÄºÊü•ÊâæÔºåB+Á¥¢ÂºïÂàôÂ§öÁî®‰∫éÈô§‰∫ÜÁ≤æÁ°ÆÁöÑÁ≠âÂÄºÊü•ÊâæÂ§ñÁöÑÂÖ∂‰ªñÊü•Êâæ„ÄÇÂú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºå‰ºöÈÄâÊã©‰ΩøÁî®B+Ê†ëÁ¥¢Âºï„ÄÇ</p>
<ul>
<li>ÂìàÂ∏åÁ¥¢Âºï‰∏çÊîØÊåÅÊéíÂ∫èÔºåÂõ†‰∏∫ÂìàÂ∏åË°®ÊòØÊó†Â∫èÁöÑ„ÄÇ</li>
<li>ÂìàÂ∏åÁ¥¢Âºï‰∏çÊîØÊåÅËåÉÂõ¥Êü•Êâæ„ÄÇ</li>
<li>ÂìàÂ∏åÁ¥¢Âºï‰∏çÊîØÊåÅÊ®°Á≥äÊü•ËØ¢ÂèäÂ§öÂàóÁ¥¢ÂºïÁöÑÊúÄÂ∑¶ÂâçÁºÄÂåπÈÖç„ÄÇ</li>
<li>Âõ†‰∏∫ÂìàÂ∏åË°®‰∏≠‰ºöÂ≠òÂú®ÂìàÂ∏åÂÜ≤Á™ÅÔºåÊâÄ‰ª•ÂìàÂ∏åÁ¥¢ÂºïÁöÑÊÄßËÉΩÊòØ‰∏çÁ®≥ÂÆöÁöÑÔºåËÄåB+Ê†ëÁ¥¢ÂºïÁöÑÊÄßËÉΩÊòØÁõ∏ÂØπÁ®≥ÂÆöÁöÑÔºåÊØèÊ¨°Êü•ËØ¢ÈÉΩÊòØ‰ªéÊ†πËäÇÁÇπÂà∞Âè∂Â≠êËäÇÁÇπ</li>
</ul>
<h3 id="Á¥¢ÂºïÁöÑÁ±ªÂûãÊúâÂì™‰∫õ"><a href="#Á¥¢ÂºïÁöÑÁ±ªÂûãÊúâÂì™‰∫õ" class="headerlink" title="Á¥¢ÂºïÁöÑÁ±ªÂûãÊúâÂì™‰∫õ?"></a>Á¥¢ÂºïÁöÑÁ±ªÂûãÊúâÂì™‰∫õ?</h3><p>MySQL‰∏ªË¶ÅÁöÑÁ¥¢ÂºïÁ±ªÂûã‰∏ªË¶ÅÊúâFULLTEXTÔºåHASHÔºåBTREEÔºåRTREE„ÄÇ</p>
<ul>
<li><p>FULLTEXT</p>
<p>FULLTEXTÂç≥ÂÖ®ÊñáÁ¥¢ÂºïÔºåMyISAMÂ≠òÂÇ®ÂºïÊìéÂíåInnoDBÂ≠òÂÇ®ÂºïÊìéÂú®MySQL5.6.4‰ª•‰∏äÁâàÊú¨ÊîØÊåÅÂÖ®ÊñáÁ¥¢ÂºïÔºå‰∏ÄËà¨Áî®‰∫éÊü•ÊâæÊñáÊú¨‰∏≠ÁöÑÂÖ≥ÈîÆÂ≠óÔºåËÄå‰∏çÊòØÁõ¥Êé•ÊØîËæÉÊòØÂê¶Áõ∏Á≠âÔºåÂ§öÂú®CHARÔºåVARCHARÔºåTAXTÁ≠âÊï∞ÊçÆÁ±ªÂûã‰∏äÂàõÂª∫ÂÖ®ÊñáÁ¥¢Âºï„ÄÇÂÖ®ÊñáÁ¥¢Âºï‰∏ªË¶ÅÊòØÁî®Êù•Ëß£ÂÜ≥WHERE name LIKE ‚Äú%zhang%‚ÄùÁ≠âÈíàÂØπÊñáÊú¨ÁöÑÊ®°Á≥äÊü•ËØ¢ÊïàÁéá‰ΩéÁöÑÈóÆÈ¢ò„ÄÇ</p>
</li>
<li><p>HASH</p>
<p>HASHÂç≥ÂìàÂ∏åÁ¥¢ÂºïÔºåÂìàÂ∏åÁ¥¢ÂºïÂ§öÁî®‰∫éÁ≠âÂÄºÊü•ËØ¢ÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶o(1)ÔºåÊïàÁéáÈùûÂ∏∏È´òÔºå‰ΩÜ‰∏çÊîØÊåÅÊéíÂ∫è„ÄÅËåÉÂõ¥Êü•ËØ¢ÂèäÊ®°Á≥äÊü•ËØ¢Á≠â„ÄÇ</p>
</li>
<li><p>BTREE</p>
<p>BTREEÂç≥B+Ê†ëÁ¥¢ÂºïÔºåInnoDBÂ≠òÂÇ®ÂºïÊìéÈªòËÆ§ÁöÑÁ¥¢ÂºïÔºåÊîØÊåÅÊéíÂ∫è„ÄÅÂàÜÁªÑ„ÄÅËåÉÂõ¥Êü•ËØ¢„ÄÅÊ®°Á≥äÊü•ËØ¢Á≠âÔºåÂπ∂‰∏îÊÄßËÉΩÁ®≥ÂÆö„ÄÇ</p>
</li>
<li><p>RTREE</p>
<p>RTREEÂç≥Á©∫Èó¥Êï∞ÊçÆÁ¥¢ÂºïÔºåÂ§öÁî®‰∫éÂú∞ÁêÜÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÔºåÁõ∏ÊØî‰∫éÂÖ∂‰ªñÁ¥¢ÂºïÔºåÁ©∫Èó¥Êï∞ÊçÆÁ¥¢ÂºïÁöÑ‰ºòÂäøÂú®‰∫éËåÉÂõ¥Êü•Êâæ</p>
</li>
</ul>
<h3 id="Á¥¢ÂºïÁöÑÁßçÁ±ªÊúâÂì™‰∫õÔºü"><a href="#Á¥¢ÂºïÁöÑÁßçÁ±ªÊúâÂì™‰∫õÔºü" class="headerlink" title="Á¥¢ÂºïÁöÑÁßçÁ±ªÊúâÂì™‰∫õÔºü"></a>Á¥¢ÂºïÁöÑÁßçÁ±ªÊúâÂì™‰∫õÔºü</h3><ul>
<li>‰∏ªÈîÆÁ¥¢ÂºïÔºöÊï∞ÊçÆÂàó‰∏çÂÖÅËÆ∏ÈáçÂ§çÔºå‰∏çËÉΩ‰∏∫NULLÔºå‰∏Ä‰∏™Ë°®Âè™ËÉΩÊúâ‰∏Ä‰∏™‰∏ªÈîÆÁ¥¢Âºï</li>
<li>ÁªÑÂêàÁ¥¢ÂºïÔºöÁî±Â§ö‰∏™ÂàóÂÄºÁªÑÊàêÁöÑÁ¥¢Âºï„ÄÇ</li>
<li>ÂîØ‰∏ÄÁ¥¢ÂºïÔºöÊï∞ÊçÆÂàó‰∏çÂÖÅËÆ∏ÈáçÂ§çÔºåÂèØ‰ª•‰∏∫NULLÔºåÁ¥¢ÂºïÂàóÁöÑÂÄºÂøÖÈ°ªÂîØ‰∏ÄÁöÑÔºåÂ¶ÇÊûúÊòØÁªÑÂêàÁ¥¢ÂºïÔºåÂàôÂàóÂÄºÁöÑÁªÑÂêàÂøÖÈ°ªÂîØ‰∏Ä„ÄÇ</li>
<li>ÂÖ®ÊñáÁ¥¢ÂºïÔºöÂØπÊñáÊú¨ÁöÑÂÜÖÂÆπËøõË°åÊêúÁ¥¢„ÄÇ</li>
<li>ÊôÆÈÄöÁ¥¢ÂºïÔºöÂü∫Êú¨ÁöÑÁ¥¢ÂºïÁ±ªÂûãÔºåÂèØ‰ª•‰∏∫NULL</li>
</ul>
<h3 id="BÊ†ëÂíåB-Ê†ëÁöÑÂå∫Âà´Ôºü"><a href="#BÊ†ëÂíåB-Ê†ëÁöÑÂå∫Âà´Ôºü" class="headerlink" title="BÊ†ëÂíåB+Ê†ëÁöÑÂå∫Âà´Ôºü"></a>BÊ†ëÂíåB+Ê†ëÁöÑÂå∫Âà´Ôºü</h3><p>BÊ†ëÂíåB+Ê†ëÊúÄ‰∏ªË¶ÅÁöÑÂå∫Âà´‰∏ªË¶ÅÊúâ‰∏§ÁÇπÔºö</p>
<ul>
<li><p>BÊ†ë‰∏≠ÁöÑÂÜÖÈÉ®ËäÇÁÇπÂíåÂè∂Â≠êËäÇÁÇπÂùáÂ≠òÊîæÈîÆÂíåÂÄºÔºåËÄåB+Ê†ëÁöÑÂÜÖÈÉ®ËäÇÁÇπÂè™ÊúâÈîÆÊ≤°ÊúâÂÄºÔºåÂè∂Â≠êËäÇÁÇπÂ≠òÊîæÊâÄÊúâÁöÑÈîÆÂíåÂÄº„ÄÇ</p>
</li>
<li><p>BÔºãÊ†ëÁöÑÂè∂Â≠êËäÇÁÇπÊòØÈÄöËøáÁõ∏ËøûÂú®‰∏ÄËµ∑ÁöÑÔºåÊñπ‰æøÈ°∫Â∫èÊ£ÄÁ¥¢„ÄÇ</p>
<p>‰∏§ËÄÖÁöÑÁªìÊûÑÂõæÂ¶Ç‰∏ã„ÄÇ</p>
</li>
</ul>
<p><img src="/p/ca035920/MySQL-B%E6%A0%91.png" alt="ÂõæÁâá"></p>
<p><img src="/p/ca035920/MySQL-B+%E6%A0%91.png" alt="ÂõæÁâá"></p>
<h3 id="Êï∞ÊçÆÂ∫ì‰∏∫‰ªÄ‰πà‰ΩøÁî®B-Ê†ëËÄå‰∏çÊòØBÊ†ëÔºü"><a href="#Êï∞ÊçÆÂ∫ì‰∏∫‰ªÄ‰πà‰ΩøÁî®B-Ê†ëËÄå‰∏çÊòØBÊ†ëÔºü" class="headerlink" title="Êï∞ÊçÆÂ∫ì‰∏∫‰ªÄ‰πà‰ΩøÁî®B+Ê†ëËÄå‰∏çÊòØBÊ†ëÔºü"></a>Êï∞ÊçÆÂ∫ì‰∏∫‰ªÄ‰πà‰ΩøÁî®B+Ê†ëËÄå‰∏çÊòØBÊ†ëÔºü</h3><ul>
<li>BÊ†ëÈÄÇÁî®‰∫éÈöèÊú∫Ê£ÄÁ¥¢ÔºåËÄåB+Ê†ëÈÄÇÁî®‰∫éÈöèÊú∫Ê£ÄÁ¥¢ÂíåÈ°∫Â∫èÊ£ÄÁ¥¢</li>
<li>B+Ê†ëÁöÑÁ©∫Èó¥Âà©Áî®ÁéáÊõ¥È´òÔºåÂõ†‰∏∫BÊ†ëÊØè‰∏™ËäÇÁÇπË¶ÅÂ≠òÂÇ®ÈîÆÂíåÂÄºÔºåËÄåB+Ê†ëÁöÑÂÜÖÈÉ®ËäÇÁÇπÂè™Â≠òÂÇ®ÈîÆÔºåËøôÊ†∑B+Ê†ëÁöÑ‰∏Ä‰∏™ËäÇÁÇπÂ∞±ÂèØ‰ª•Â≠òÂÇ®Êõ¥Â§öÁöÑÁ¥¢ÂºïÔºå‰ªéËÄå‰ΩøÊ†ëÁöÑÈ´òÂ∫¶Âèò‰ΩéÔºåÂáèÂ∞ë‰∫ÜI/OÊ¨°Êï∞Ôºå‰ΩøÂæóÊï∞ÊçÆÊ£ÄÁ¥¢ÈÄüÂ∫¶Êõ¥Âø´„ÄÇ</li>
<li>B+Ê†ëÁöÑÂè∂Â≠êËäÇÁÇπÈÉΩÊòØËøûÊé•Âú®‰∏ÄËµ∑ÁöÑÔºåÊâÄ‰ª•ËåÉÂõ¥Êü•ÊâæÔºåÈ°∫Â∫èÊü•ÊâæÊõ¥Âä†Êñπ‰æø</li>
<li>B+Ê†ëÁöÑÊÄßËÉΩÊõ¥Âä†Á®≥ÂÆöÔºåÂõ†‰∏∫Âú®B+Ê†ë‰∏≠ÔºåÊØèÊ¨°Êü•ËØ¢ÈÉΩÊòØ‰ªéÊ†πËäÇÁÇπÂà∞Âè∂Â≠êËäÇÁÇπÔºåËÄåÂú®BÊ†ë‰∏≠ÔºåË¶ÅÊü•ËØ¢ÁöÑÂÄºÂèØËÉΩ‰∏çÂú®Âè∂Â≠êËäÇÁÇπÔºåÂú®ÂÜÖÈÉ®ËäÇÁÇπÂ∞±Â∑≤ÁªèÊâæÂà∞„ÄÇ</li>
</ul>
<p>ÈÇ£Âú®‰ªÄ‰πàÊÉÖÂÜµÈÄÇÂêà‰ΩøÁî®BÊ†ëÂë¢ÔºåÂõ†‰∏∫BÊ†ëÁöÑÂÜÖÈÉ®ËäÇÁÇπ‰πüÂèØ‰ª•Â≠òÂÇ®ÂÄºÔºåÊâÄ‰ª•ÂèØ‰ª•Êää‰∏Ä‰∫õÈ¢ëÁπÅËÆøÈóÆÁöÑÂÄºÊîæÂú®Ë∑ùÁ¶ªÊ†πËäÇÁÇπÊØîËæÉËøëÁöÑÂú∞ÊñπÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊèêÈ´òÊü•ËØ¢ÊïàÁéá„ÄÇÁªº‰∏äÊâÄËø∞ÔºåB+Ê†ëÁöÑÊÄßËÉΩÊõ¥Âä†ÈÄÇÂêà‰Ωú‰∏∫Êï∞ÊçÆÂ∫ìÁöÑÁ¥¢Âºï„ÄÇ</p>
<h3 id="‰ªÄ‰πàÊòØËÅöÁ∞áÁ¥¢ÂºïÔºå‰ªÄ‰πàÊòØÈùûËÅöÁ∞áÁ¥¢ÂºïÔºü"><a href="#‰ªÄ‰πàÊòØËÅöÁ∞áÁ¥¢ÂºïÔºå‰ªÄ‰πàÊòØÈùûËÅöÁ∞áÁ¥¢ÂºïÔºü" class="headerlink" title="‰ªÄ‰πàÊòØËÅöÁ∞áÁ¥¢ÂºïÔºå‰ªÄ‰πàÊòØÈùûËÅöÁ∞áÁ¥¢ÂºïÔºü"></a>‰ªÄ‰πàÊòØËÅöÁ∞áÁ¥¢ÂºïÔºå‰ªÄ‰πàÊòØÈùûËÅöÁ∞áÁ¥¢ÂºïÔºü</h3><p>ËÅöÁ∞áÁ¥¢ÂºïÂíåÈùûËÅöÁ∞áÁ¥¢ÂºïÊúÄ‰∏ªË¶ÅÁöÑÂå∫Âà´ÊòØ<strong>Êï∞ÊçÆÂíåÁ¥¢ÂºïÊòØÂê¶ÂàÜÂºÄÂ≠òÂÇ®</strong>„ÄÇ</p>
<ul>
<li>ËÅöÁ∞áÁ¥¢ÂºïÔºöÂ∞ÜÊï∞ÊçÆÂíåÁ¥¢ÂºïÊîæÂà∞‰∏ÄËµ∑Â≠òÂÇ®ÔºåÁ¥¢ÂºïÁªìÊûÑÁöÑÂè∂Â≠êËäÇÁÇπ‰øùÁïô‰∫ÜÊï∞ÊçÆË°å„ÄÇ</li>
<li>ÈùûËÅöÁ∞áÁ¥¢ÂºïÔºöÂ∞ÜÊï∞ÊçÆËøõÂíåÁ¥¢ÂºïÂàÜÂºÄÂ≠òÂÇ®ÔºåÁ¥¢ÂºïÂè∂Â≠êËäÇÁÇπÂ≠òÂÇ®ÁöÑÊòØÊåáÂêëÊï∞ÊçÆË°åÁöÑÂú∞ÂùÄ„ÄÇ</li>
</ul>
<p>Âú®InnoDBÂ≠òÂÇ®ÂºïÊìé‰∏≠ÔºåÈªòËÆ§ÁöÑÁ¥¢Âºï‰∏∫B+Ê†ëÁ¥¢ÂºïÔºåÂà©Áî®‰∏ªÈîÆÂàõÂª∫ÁöÑÁ¥¢Âºï‰∏∫‰∏ªÁ¥¢ÂºïÔºå‰πüÊòØËÅöÁ∞áÁ¥¢ÂºïÔºåÂú®‰∏ªÁ¥¢Âºï‰πã‰∏äÂàõÂª∫ÁöÑÁ¥¢Âºï‰∏∫ËæÖÂä©Á¥¢ÂºïÔºå‰πüÊòØÈùûËÅöÁ∞áÁ¥¢Âºï„ÄÇ‰∏∫‰ªÄ‰πàËØ¥ËæÖÂä©Á¥¢ÂºïÊòØÂú®‰∏ªÁ¥¢Âºï‰πã‰∏äÂàõÂª∫ÁöÑÂë¢ÔºåÂõ†‰∏∫ËæÖÂä©Á¥¢Âºï‰∏≠ÁöÑÂè∂Â≠êËäÇÁÇπÂ≠òÂÇ®ÁöÑÊòØ‰∏ªÈîÆ„ÄÇ</p>
<p>Âú®MyISAMÂ≠òÂÇ®ÂºïÊìé‰∏≠ÔºåÈªòËÆ§ÁöÑÁ¥¢Âºï‰πüÊòØB+Ê†ëÁ¥¢ÂºïÔºå‰ΩÜ‰∏ªÁ¥¢ÂºïÂíåËæÖÂä©Á¥¢ÂºïÈÉΩÊòØÈùûËÅöÁ∞áÁ¥¢ÂºïÔºå‰πüÂ∞±ÊòØËØ¥Á¥¢ÂºïÁªìÊûÑÁöÑÂè∂Â≠êËäÇÁÇπÂ≠òÂÇ®ÁöÑÈÉΩÊòØ‰∏Ä‰∏™ÊåáÂêëÊï∞ÊçÆË°åÁöÑÂú∞ÂùÄ„ÄÇÂπ∂‰∏î‰ΩøÁî®ËæÖÂä©Á¥¢ÂºïÊ£ÄÁ¥¢Êó†ÈúÄËÆøÈóÆ‰∏ªÈîÆÁöÑÁ¥¢Âºï„ÄÇ</p>
<p>ÂèØ‰ª•‰ªéÈùûÂ∏∏ÁªèÂÖ∏ÁöÑ‰∏§Âº†ÂõæÁúãÁúãÂÆÉ‰ª¨ÁöÑÂå∫Âà´(ÂõæÁâáÊù•Ê∫ê‰∫éÁΩëÁªú)Ôºö</p>
<p><img src="/p/ca035920/MySQL-MyISAM%E7%B4%A2%E5%BC%95.png" alt="ÂõæÁâá"></p>
<p><img src="/p/ca035920/MySQL-MyISAM%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95.png" alt="ÂõæÁâá"></p>
<h3 id="ÈùûËÅöÁ∞áÁ¥¢Âºï‰∏ÄÂÆö‰ºöËøõË°åÂõûË°®Êü•ËØ¢ÂêóÔºü"><a href="#ÈùûËÅöÁ∞áÁ¥¢Âºï‰∏ÄÂÆö‰ºöËøõË°åÂõûË°®Êü•ËØ¢ÂêóÔºü" class="headerlink" title="ÈùûËÅöÁ∞áÁ¥¢Âºï‰∏ÄÂÆö‰ºöËøõË°åÂõûË°®Êü•ËØ¢ÂêóÔºü"></a>ÈùûËÅöÁ∞áÁ¥¢Âºï‰∏ÄÂÆö‰ºöËøõË°åÂõûË°®Êü•ËØ¢ÂêóÔºü</h3><p>‰∏äÈù¢ÊòØËØ¥‰∫ÜÈùûËÅöÁ∞áÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπÂ≠òÂÇ®ÁöÑÊòØ‰∏ªÈîÆÔºå‰πüÂ∞±ÊòØËØ¥Ë¶ÅÂÖàÈÄöËøáÈùûËÅöÁ∞áÁ¥¢ÂºïÊâæÂà∞‰∏ªÈîÆÔºåÂÜçÈÄöËøáËÅöÁ∞áÁ¥¢ÂºïÊâæÂà∞‰∏ªÈîÆÊâÄÂØπÂ∫îÁöÑÊï∞ÊçÆÔºåÂêéÈù¢Ëøô‰∏™ÂÜçÈÄöËøáËÅöÁ∞áÁ¥¢ÂºïÊâæÂà∞‰∏ªÈîÆÂØπÂ∫îÁöÑÊï∞ÊçÆÁöÑËøáÁ®ãÂ∞±ÊòØÂõûË°®Êü•ËØ¢ÔºåÈÇ£‰πàÈùûËÅöÁ∞áÁ¥¢ÂºïÂ∞±‰∏ÄÂÆö‰ºöËøõË°åÂõûË°®Êü•ËØ¢ÂêóÔºü</p>
<p>Á≠îÊ°àÊòØ‰∏ç‰∏ÄÂÆöÁöÑÔºåËøôÈáåÊ∂âÂèäÂà∞‰∏Ä‰∏™Á¥¢ÂºïË¶ÜÁõñÁöÑÈóÆÈ¢òÔºåÂ¶ÇÊûúÊü•ËØ¢ÁöÑÊï∞ÊçÆÂú®ËæÖÂä©Á¥¢Âºï‰∏äÂÆåÂÖ®ËÉΩËé∑ÂèñÂà∞‰æø‰∏çÈúÄË¶ÅÂõûË°®Êü•ËØ¢„ÄÇ‰æãÂ¶ÇÊúâ‰∏ÄÂº†Ë°®Â≠òÂÇ®ÁùÄ‰∏™‰∫∫‰ø°ÊÅØÂåÖÊã¨id„ÄÅname„ÄÅageÁ≠âÂ≠óÊÆµ„ÄÇÂÅáËÆæËÅöÁ∞áÁ¥¢ÂºïÊòØ‰ª•ID‰∏∫ÈîÆÂÄºÊûÑÂª∫ÁöÑÁ¥¢ÂºïÔºåÈùûËÅöÁ∞áÁ¥¢ÂºïÊòØ‰ª•name‰∏∫ÈîÆÂÄºÊûÑÂª∫ÁöÑÁ¥¢ÂºïÔºå<code>select id,name from user where name = 'zhangsan';</code>Ëøô‰∏™Êü•ËØ¢‰æø‰∏çÈúÄË¶ÅËøõË°åÂõûË°®Êü•ËØ¢Âõ†‰∏∫ÔºåÈÄöËøáÈùûËÅöÁ∞áÁ¥¢ÂºïÂ∑≤ÁªèËÉΩÂÖ®ÈÉ®Ê£ÄÁ¥¢Âá∫Êï∞ÊçÆÔºåËøôÂ∞±ÊòØÁ¥¢ÂºïË¶ÜÁõñÁöÑÊÉÖÂÜµ„ÄÇÂ¶ÇÊûúÊü•ËØ¢ËØ≠Âè•ÊòØËøôÊ†∑Ôºå<code>select id,name,age from user where name = 'zhangsan';</code>ÂàôÈúÄË¶ÅËøõË°åÂõûË°®Êü•ËØ¢ÔºåÂõ†‰∏∫ÈÄöËøáÈùûËÅöÁ∞áÁ¥¢Âºï‰∏çËÉΩÊ£ÄÁ¥¢Âá∫ageÁöÑÂÄº„ÄÇÈÇ£Â∫îËØ•Â¶Ç‰ΩïËß£ÂÜ≥ÈÇ£Âë¢ÔºüÂè™ÈúÄË¶ÅÂ∞ÜÁ¥¢ÂºïË¶ÜÁõñÂç≥ÂèØÔºåÂª∫Á´ãageÂíånameÁöÑËÅîÂêàÁ¥¢ÂºïÂÜç‰ΩøÁî®<code>select id,name,age from user where name = 'zhangsan';</code>ËøõË°åÊü•ËØ¢Âç≥ÂèØ„ÄÇ</p>
<p>ÊâÄ‰ª•ÈÄöËøáÁ¥¢ÂºïË¶ÜÁõñËÉΩËß£ÂÜ≥ÈùûËÅöÁ∞áÁ¥¢ÂºïÂõûË°®Êü•ËØ¢ÁöÑÈóÆÈ¢ò„ÄÇ</p>
<h3 id="Á¥¢ÂºïÁöÑ‰ΩøÁî®Âú∫ÊôØÊúâÂì™‰∫õÔºü"><a href="#Á¥¢ÂºïÁöÑ‰ΩøÁî®Âú∫ÊôØÊúâÂì™‰∫õÔºü" class="headerlink" title="Á¥¢ÂºïÁöÑ‰ΩøÁî®Âú∫ÊôØÊúâÂì™‰∫õÔºü"></a>Á¥¢ÂºïÁöÑ‰ΩøÁî®Âú∫ÊôØÊúâÂì™‰∫õÔºü</h3><ul>
<li>ÂØπ‰∫é‰∏≠Â§ßÂûãË°®Âª∫Á´ãÁ¥¢ÂºïÈùûÂ∏∏ÊúâÊïàÔºåÂØπ‰∫éÈùûÂ∏∏Â∞èÁöÑË°®Ôºå‰∏ÄËà¨ÂÖ®ÈÉ®Ë°®Êâ´ÊèèÈÄüÂ∫¶Êõ¥Âø´‰∫õ„ÄÇ</li>
<li>ÂØπ‰∫éË∂ÖÂ§ßÂûãÁöÑË°®ÔºåÂª∫Á´ãÂíåÁª¥Êä§Á¥¢ÂºïÁöÑ‰ª£‰ª∑‰πü‰ºöÂèòÈ´òÔºåËøôÊó∂ÂèØ‰ª•ËÄÉËôëÂàÜÂå∫ÊäÄÊúØ„ÄÇ</li>
<li>Â¶Ç‰ΩïË°®ÁöÑÂ¢ûÂà†ÊîπÈùûÂ∏∏Â§öÔºåËÄåÊü•ËØ¢ÈúÄÊ±ÇÈùûÂ∏∏Â∞ëÁöÑËØùÔºåÈÇ£Â∞±Ê≤°ÊúâÂøÖË¶ÅÂª∫Á´ãÁ¥¢Âºï‰∫ÜÔºåÂõ†‰∏∫Áª¥Êä§Á¥¢Âºï‰πüÊòØÈúÄË¶Å‰ª£‰ª∑ÁöÑ„ÄÇ</li>
<li>‰∏ÄËà¨‰∏ç‰ºöÂá∫Áé∞Âú®whereÊù°‰ª∂‰∏≠ÁöÑÂ≠óÊÆµÂ∞±Ê≤°ÊúâÂøÖË¶ÅÂª∫Á´ãÁ¥¢Âºï‰∫Ü„ÄÇ</li>
<li>Â§ö‰∏™Â≠óÊÆµÁªèÂ∏∏Ë¢´Êü•ËØ¢ÁöÑËØùÂèØ‰ª•ËÄÉËôëËÅîÂêàÁ¥¢Âºï„ÄÇ</li>
<li>Â≠óÊÆµÂ§ö‰∏îÂ≠óÊÆµÂÄºÊ≤°ÊúâÈáçÂ§çÁöÑÊó∂ÂÄôËÄÉËôëÂîØ‰∏ÄÁ¥¢Âºï„ÄÇ</li>
<li>Â≠óÊÆµÂ§ö‰∏îÊúâÈáçÂ§çÁöÑÊó∂ÂÄôËÄÉËôëÊôÆÈÄöÁ¥¢Âºï„ÄÇ</li>
</ul>
<h3 id="Á¥¢ÂºïÁöÑËÆæËÆ°ÂéüÂàôÔºü"><a href="#Á¥¢ÂºïÁöÑËÆæËÆ°ÂéüÂàôÔºü" class="headerlink" title="Á¥¢ÂºïÁöÑËÆæËÆ°ÂéüÂàôÔºü"></a>Á¥¢ÂºïÁöÑËÆæËÆ°ÂéüÂàôÔºü</h3><ul>
<li>ÊúÄÈÄÇÂêàÁ¥¢ÂºïÁöÑÂàóÊòØÂú®whereÂêéÈù¢Âá∫Áé∞ÁöÑÂàóÊàñËÄÖËøûÊé•Âè•Â≠ê‰∏≠ÊåáÂÆöÁöÑÂàóÔºåËÄå‰∏çÊòØÂá∫Áé∞Âú®SELECTÂÖ≥ÈîÆÂ≠óÂêéÈù¢ÁöÑÈÄâÊã©ÂàóË°®‰∏≠ÁöÑÂàó„ÄÇ</li>
<li>Á¥¢ÂºïÂàóÁöÑÂü∫Êï∞Ë∂äÂ§ßÔºåÁ¥¢ÂºïÁöÑÊïàÊûúË∂äÂ•ΩÔºåÊç¢Âè•ËØùËØ¥Â∞±ÊòØÁ¥¢ÂºïÂàóÁöÑÂå∫ÂàÜÂ∫¶Ë∂äÈ´òÔºåÁ¥¢ÂºïÁöÑÊïàÊûúË∂äÂ•Ω„ÄÇÊØîÂ¶Ç‰ΩøÁî®ÊÄßÂà´ËøôÁßçÂå∫ÂàÜÂ∫¶Âæà‰ΩéÁöÑÂàó‰Ωú‰∏∫Á¥¢ÂºïÔºåÊïàÊûúÂ∞±‰ºöÂæàÂ∑ÆÔºåÂõ†‰∏∫ÂàóÁöÑÂü∫Êï∞ÊúÄÂ§ö‰πüÂ∞±ÊòØ‰∏âÁßçÔºåÂ§ßÂ§ö‰∏çÊòØÁî∑ÊÄßÂ∞±ÊòØÂ•≥ÊÄß„ÄÇ</li>
<li>Â∞ΩÈáè‰ΩøÁî®Áü≠Á¥¢ÂºïÔºåÂØπ‰∫éËæÉÈïøÁöÑÂ≠óÁ¨¶‰∏≤ËøõË°åÁ¥¢ÂºïÊó∂Â∫îËØ•ÊåáÂÆö‰∏Ä‰∏™ËæÉÁü≠ÁöÑÂâçÁºÄÈïøÂ∫¶ÔºåÂõ†‰∏∫ËæÉÂ∞èÁöÑÁ¥¢ÂºïÊ∂âÂèäÂà∞ÁöÑÁ£ÅÁõòI/OËæÉÂ∞ëÔºåÂπ∂‰∏îÁ¥¢ÂºïÈ´òÈÄüÁºìÂ≠ò‰∏≠ÁöÑÂùóÂèØ‰ª•ÂÆπÁ∫≥Êõ¥Â§öÁöÑÈîÆÂÄºÔºå‰ºö‰ΩøÂæóÊü•ËØ¢ÈÄüÂ∫¶Êõ¥Âø´„ÄÇ</li>
<li>Â∞ΩÈáèÂà©Áî®ÊúÄÂ∑¶ÂâçÁºÄ„ÄÇ</li>
<li>‰∏çË¶ÅËøáÂ∫¶Á¥¢ÂºïÔºåÊØè‰∏™Á¥¢ÂºïÈÉΩÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÁâ©ÁêÜÁ©∫Èó¥ÔºåÁª¥Êä§‰πüÈúÄË¶ÅËä±Ë¥πÊó∂Èó¥ÔºåÊâÄ‰ª•Á¥¢Âºï‰∏çÊòØË∂äÂ§öË∂äÂ•Ω„ÄÇ</li>
</ul>
<h3 id="Â¶Ç‰ΩïÂØπÁ¥¢ÂºïËøõË°å‰ºòÂåñÔºü"><a href="#Â¶Ç‰ΩïÂØπÁ¥¢ÂºïËøõË°å‰ºòÂåñÔºü" class="headerlink" title="Â¶Ç‰ΩïÂØπÁ¥¢ÂºïËøõË°å‰ºòÂåñÔºü"></a>Â¶Ç‰ΩïÂØπÁ¥¢ÂºïËøõË°å‰ºòÂåñÔºü</h3><p>ÂØπÁ¥¢ÂºïÁöÑ‰ºòÂåñÂÖ∂ÂÆûÊúÄÂÖ≥ÈîÆÁöÑÂ∞±ÊòØË¶ÅÁ¨¶ÂêàÁ¥¢ÂºïÁöÑËÆæËÆ°ÂéüÂàôÂíåÂ∫îÁî®Âú∫ÊôØÔºåÂ∞Ü‰∏çÁ¨¶ÂêàË¶ÅÊ±ÇÁöÑÁ¥¢Âºï‰ºòÂåñÊàêÁ¨¶ÂêàÁ¥¢ÂºïËÆæËÆ°ÂéüÂàôÂíåÂ∫îÁî®Âú∫ÊôØÁöÑÁ¥¢Âºï„ÄÇ</p>
<p>Èô§‰∫ÜÁ¥¢ÂºïÁöÑËÆæËÆ°ÂéüÂàôÂíåÂ∫îÁî®Âú∫ÊôØÈÇ£Âá†ÁÇπÂ§ñÔºåËøòÂèØ‰ª•‰ªé‰ª•‰∏ã‰∏§ÊñπÈù¢ËÄÉËôë„ÄÇ</p>
<ul>
<li>Âú®ËøõË°åÊü•ËØ¢Êó∂ÔºåÁ¥¢ÂºïÂàó‰∏çËÉΩÊòØË°®ËææÂºèÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰πü‰∏çËÉΩÊòØÂáΩÊï∞ÁöÑÂèÇÊï∞ÔºåÂõ†‰∏∫ËøôÊ†∑Êó†Ê≥ï‰ΩøÁî®Á¥¢Âºï„ÄÇ‰æãÂ¶Ç<code>select * from table_name where a + 1 = 2</code></li>
<li>Â∞ÜÂå∫ÂàÜÂ∫¶ÊúÄÈ´òÁöÑÁ¥¢ÂºïÊîæÂú®ÂâçÈù¢</li>
<li>Â∞ΩÈáèÂ∞ë‰ΩøÁî®select*</li>
</ul>
<p>Á¥¢ÂºïÁöÑ‰ΩøÁî®Âú∫ÊôØ„ÄÅÁ¥¢ÂºïÁöÑËÆæËÆ°ÂéüÂàôÂíåÂ¶Ç‰ΩïÂØπÁ¥¢ÂºïËøõË°å‰ºòÂåñÂèØ‰ª•ÁúãÊàê‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<h3 id="Â¶Ç‰ΩïÂàõÂª∫-Âà†Èô§Á¥¢ÂºïÔºü"><a href="#Â¶Ç‰ΩïÂàõÂª∫-Âà†Èô§Á¥¢ÂºïÔºü" class="headerlink" title="Â¶Ç‰ΩïÂàõÂª∫/Âà†Èô§Á¥¢ÂºïÔºü"></a>Â¶Ç‰ΩïÂàõÂª∫/Âà†Èô§Á¥¢ÂºïÔºü</h3><p>ÂàõÂª∫Á¥¢ÂºïÔºö</p>
<ul>
<li><p>‰ΩøÁî®CREATE INDEX ËØ≠Âè•</p>
<p><code>CREATE INDEX index_name ON table_name (column_list);</code></p>
</li>
<li><p>Âú®CREATE TABLEÊó∂ÂàõÂª∫</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span>(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	information text,</span><br><span class="line">	FULLTEXT KEY (information)</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>‰ΩøÁî®ALTER TABLEÂàõÂª∫Á¥¢Âºï</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ADD</span> INDEX index_name (column_list);</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<p>Âà†Èô§Á¥¢ÂºïÔºö</p>
<ul>
<li><p>Âà†Èô§‰∏ªÈîÆÁ¥¢Âºï</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> Ë°®Âêç <span class="keyword">drop</span> <span class="keyword">primary</span> key</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>Âà†Èô§ÂÖ∂‰ªñÁ¥¢Âºï</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> Ë°®Âêç <span class="keyword">drop</span> key Á¥¢ÂºïÂêç</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h3 id="‰ΩøÁî®Á¥¢ÂºïÊü•ËØ¢Êó∂ÊÄßËÉΩ‰∏ÄÂÆö‰ºöÊèêÂçáÂêóÔºü"><a href="#‰ΩøÁî®Á¥¢ÂºïÊü•ËØ¢Êó∂ÊÄßËÉΩ‰∏ÄÂÆö‰ºöÊèêÂçáÂêóÔºü" class="headerlink" title="‰ΩøÁî®Á¥¢ÂºïÊü•ËØ¢Êó∂ÊÄßËÉΩ‰∏ÄÂÆö‰ºöÊèêÂçáÂêóÔºü"></a>‰ΩøÁî®Á¥¢ÂºïÊü•ËØ¢Êó∂ÊÄßËÉΩ‰∏ÄÂÆö‰ºöÊèêÂçáÂêóÔºü</h3><p>‰∏ç‰∏ÄÂÆöÔºåÂâçÈù¢Âú®Á¥¢ÂºïÁöÑ‰ΩøÁî®Âú∫ÊôØÂíåÁ¥¢ÂºïÁöÑËÆæËÆ°ÂéüÂàô‰∏≠Â∑≤ÁªèÊèêÂà∞‰∫ÜÂ¶Ç‰ΩïÂêàÁêÜÂú∞‰ΩøÁî®Á¥¢ÂºïÔºåÂõ†‰∏∫ÂàõÂª∫ÂíåÁª¥Êä§Á¥¢ÂºïÈúÄË¶ÅËä±Ë¥πÁ©∫Èó¥ÂíåÊó∂Èó¥‰∏äÁöÑ‰ª£‰ª∑ÔºåÂ¶ÇÊûú‰∏çÂêàÁêÜÂú∞‰ΩøÁî®Á¥¢ÂºïÂèçËÄå‰ºö‰ΩøÊü•ËØ¢ÊÄßËÉΩ‰∏ãÈôç„ÄÇ</p>
<h3 id="‰ªÄ‰πàÊòØÂâçÁºÄÁ¥¢ÂºïÔºü"><a href="#‰ªÄ‰πàÊòØÂâçÁºÄÁ¥¢ÂºïÔºü" class="headerlink" title="‰ªÄ‰πàÊòØÂâçÁºÄÁ¥¢ÂºïÔºü"></a>‰ªÄ‰πàÊòØÂâçÁºÄÁ¥¢ÂºïÔºü</h3><p>ÂâçÁºÄÁ¥¢ÂºïÊòØÊåáÂØπÊñáÊú¨ÊàñËÄÖÂ≠óÁ¨¶‰∏≤ÁöÑÂâçÂá†‰∏™Â≠óÁ¨¶Âª∫Á´ãÁ¥¢ÂºïÔºåËøôÊ†∑Á¥¢ÂºïÁöÑÈïøÂ∫¶Êõ¥Áü≠ÔºåÊü•ËØ¢ÈÄüÂ∫¶Êõ¥Âø´„ÄÇ</p>
<p>‰ΩøÁî®Âú∫ÊôØÔºöÂâçÁºÄÁöÑÂå∫ÂàÜÂ∫¶ÊØîËæÉÈ´òÁöÑÊÉÖÂÜµ‰∏ã„ÄÇ</p>
<p>Âª∫Á´ãÂâçÁºÄÁ¥¢ÂºïÁöÑÊñπÂºè</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ALTER TABLE table_name ADD KEY(column_name(prefix_length));</span><br></pre></td></tr></tbody></table></figure>

<p>ËøôÈáåÈù¢Êúâ‰∏™prefix_lengthÂèÇÊï∞ÂæàÈöæÁ°ÆÂÆöÔºåËøô‰∏™ÂèÇÊï∞Â∞±ÊòØÂâçÁºÄÈïøÂ∫¶ÁöÑÊÑèÊÄù„ÄÇÈÄöÂ∏∏ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÊñπÊ≥ïËøõË°åÁ°ÆÂÆöÔºåÂÖàËÆ°ÁÆóÂÖ®ÂàóÁöÑÂå∫ÂàÜÂ∫¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">SELECT COUNT(DISTINCT column_name) / COUNT(*) FROM table_name;</span><br></pre></td></tr></tbody></table></figure>

<p>ÁÑ∂ÂêéÂú®ËÆ°ÁÆóÂâçÁºÄÈïøÂ∫¶‰∏∫Â§öÂ∞ëÊó∂ÂíåÂÖ®ÂàóÁöÑÂå∫ÂàÜÂ∫¶ÊúÄÁõ∏‰ºº„ÄÇ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">SELECT COUNT(DISTINCT LEFT(column_name, prefix_length)) / COUNT(*) FROM table_name;</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏çÊñ≠Âú∞Ë∞ÉÊï¥prefix_lengthÁöÑÂÄºÔºåÁõ¥Âà∞ÂíåÂÖ®ÂàóËÆ°ÁÆóÂá∫Âå∫ÂàÜÂ∫¶Áõ∏Ëøë„ÄÇ</p>
<h3 id="‰ªÄ‰πàÊòØÊúÄÂ∑¶ÂåπÈÖçÂéüÂàôÔºü"><a href="#‰ªÄ‰πàÊòØÊúÄÂ∑¶ÂåπÈÖçÂéüÂàôÔºü" class="headerlink" title="‰ªÄ‰πàÊòØÊúÄÂ∑¶ÂåπÈÖçÂéüÂàôÔºü"></a>‰ªÄ‰πàÊòØÊúÄÂ∑¶ÂåπÈÖçÂéüÂàôÔºü</h3><p>ÊúÄÂ∑¶ÂåπÈÖçÂéüÂàôÔºö‰ªéÊúÄÂ∑¶Ëæπ‰∏∫Ëµ∑ÁÇπÂºÄÂßãËøûÁª≠ÂåπÈÖçÔºåÈÅáÂà∞ËåÉÂõ¥Êü•ËØ¢Ôºà&lt;„ÄÅ&gt;„ÄÅbetween„ÄÅlikeÔºâ‰ºöÂÅúÊ≠¢ÂåπÈÖç„ÄÇ</p>
<p>‰æãÂ¶ÇÂª∫Á´ãÁ¥¢Âºï(a,b,c)ÔºåÂ§ßÂÆ∂ÂèØ‰ª•ÁåúÊµã‰ª•‰∏ãÂá†ÁßçÊÉÖÂÜµÊòØÂê¶Áî®Âà∞‰∫ÜÁ¥¢Âºï„ÄÇ</p>
<ul>
<li><p>Á¨¨‰∏ÄÁßç</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> b <span class="operator">=</span> <span class="number">2</span> <span class="keyword">and</span> c <span class="operator">=</span> <span class="number">3</span> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span> b <span class="operator">=</span> <span class="number">2</span> <span class="keyword">and</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> c <span class="operator">=</span> <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>

<p>‰∏äÈù¢‰∏§Ê¨°Êü•ËØ¢ËøáÁ®ã‰∏≠ÊâÄÊúâÂÄºÈÉΩÁî®Âà∞‰∫ÜÁ¥¢ÂºïÔºåwhereÂêéÈù¢Â≠óÊÆµË∞ÉÊç¢‰∏ç‰ºöÂΩ±ÂìçÊü•ËØ¢ÁªìÊûúÔºåÂõ†‰∏∫MySQL‰∏≠ÁöÑ‰ºòÂåñÂô®‰ºöËá™Âä®‰ºòÂåñÊü•ËØ¢È°∫Â∫è„ÄÇ</p>
</li>
<li><p>Á¨¨‰∫åÁßç</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span> a <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> b <span class="operator">=</span> <span class="number">2</span>  </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> b <span class="operator">=</span> <span class="number">2</span> <span class="keyword">and</span> c <span class="operator">=</span> <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>

<p>Á≠îÊ°àÊòØ‰∏â‰∏™Êü•ËØ¢ËØ≠Âè•ÈÉΩÁî®Âà∞‰∫ÜÁ¥¢ÂºïÔºåÂõ†‰∏∫‰∏â‰∏™ËØ≠Âè•ÈÉΩÊòØ‰ªéÊúÄÂ∑¶ÂºÄÂßãÂåπÈÖçÁöÑ„ÄÇ</p>
</li>
<li><p>Á¨¨‰∏âÁßç</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span>  b <span class="operator">=</span> <span class="number">1</span> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span>  b <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> c <span class="operator">=</span> <span class="number">2</span> </span><br></pre></td></tr></tbody></table></figure>

<p>Á≠îÊ°àÊòØËøô‰∏§‰∏™Êü•ËØ¢ËØ≠Âè•ÈÉΩÊ≤°ÊúâÁî®Âà∞Á¥¢ÂºïÔºåÂõ†‰∏∫‰∏çÊòØ‰ªéÊúÄÂ∑¶ËæπÂºÄÂßãÂåπÈÖçÁöÑ</p>
</li>
<li><p>Á¨¨ÂõõÁßç</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> c <span class="operator">=</span> <span class="number">2</span> </span><br></pre></td></tr></tbody></table></figure>

<p>Ëøô‰∏™Êü•ËØ¢ËØ≠Âè•Âè™ÊúâaÂàóÁî®Âà∞‰∫ÜÁ¥¢ÂºïÔºåcÂàóÊ≤°ÊúâÁî®Âà∞Á¥¢ÂºïÔºåÂõ†‰∏∫‰∏≠Èó¥Ë∑≥Ëøá‰∫ÜbÂàóÔºå‰∏çÊòØ‰ªéÊúÄÂ∑¶ÂºÄÂßãËøûÁª≠ÂåπÈÖçÁöÑ„ÄÇ</p>
</li>
<li><p>Á¨¨‰∫îÁßç</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span>  a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">and</span> b <span class="operator">&lt;</span> <span class="number">3</span> <span class="keyword">and</span> c <span class="operator">&lt;</span> <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>

<p>Ëøô‰∏™Êü•ËØ¢‰∏≠Âè™ÊúâaÂàóÂíåbÂàó‰ΩøÁî®Âà∞‰∫ÜÁ¥¢ÂºïÔºåËÄåcÂàóÊ≤°Êúâ‰ΩøÁî®Á¥¢ÂºïÔºåÂõ†‰∏∫Ê†πÊçÆÊúÄÂ∑¶ÂåπÈÖçÊü•ËØ¢ÂéüÂàôÔºåÈÅáÂà∞ËåÉÂõ¥Êü•ËØ¢‰ºöÂÅúÊ≠¢„ÄÇ</p>
</li>
<li><p>Á¨¨ÂÖ≠Áßç</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span> a <span class="keyword">like</span> <span class="string">'ab%'</span>; </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span>  a <span class="keyword">like</span> <span class="string">'%ab'</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> table_name <span class="keyword">where</span>  a <span class="keyword">like</span> <span class="string">'%ab%'</span></span><br></pre></td></tr></tbody></table></figure>

<p>ÂØπ‰∫éÂàó‰∏∫Â≠óÁ¨¶‰∏≤ÁöÑÊÉÖÂÜµÔºåÂè™ÊúâÂâçÁºÄÂåπÈÖçÂèØ‰ª•‰ΩøÁî®Á¥¢ÂºïÔºå‰∏≠ÁºÄÂåπÈÖçÂíåÂêéÁºÄÂåπÈÖçÂè™ËÉΩËøõË°åÂÖ®Ë°®Êâ´Êèè„ÄÇ</p>
</li>
</ul>
<h3 id="Á¥¢ÂºïÂú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ã‰ºöÂ§±ÊïàÔºü"><a href="#Á¥¢ÂºïÂú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ã‰ºöÂ§±ÊïàÔºü" class="headerlink" title="Á¥¢ÂºïÂú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ã‰ºöÂ§±ÊïàÔºü"></a>Á¥¢ÂºïÂú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ã‰ºöÂ§±ÊïàÔºü</h3><p>Âú®‰∏äÈù¢‰ªãÁªç‰∫ÜÂá†Áßç‰∏çÁ¨¶ÂêàÊúÄÂ∑¶ÂåπÈÖçÂéüÂàôÁöÑÊÉÖÂÜµ‰ºöÂØºËá¥Á¥¢ÂºïÂ§±ÊïàÔºåÈô§Ê≠§‰πãÂ§ñÔºå‰ª•‰∏ãËøôÂá†ÁßçÊÉÖÂÜµ‰πü‰ºöÂØºËá¥Á¥¢ÂºïÂ§±Êïà„ÄÇ</p>
<ul>
<li>Êù°‰ª∂‰∏≠ÊúâorÔºå‰æãÂ¶Ç<code>select * from table_name where a = 1 or b = 3</code></li>
<li>Âú®Á¥¢Âºï‰∏äËøõË°åËÆ°ÁÆó‰ºöÂØºËá¥Á¥¢ÂºïÂ§±ÊïàÔºå‰æãÂ¶Ç<code>select * from table_name where a + 1 = 2</code></li>
<li>Âú®Á¥¢ÂºïÁöÑÁ±ªÂûã‰∏äËøõË°åÊï∞ÊçÆÁ±ªÂûãÁöÑÈöêÂΩ¢ËΩ¨Êç¢Ôºå‰ºöÂØºËá¥Á¥¢ÂºïÂ§±ÊïàÔºå‰æãÂ¶ÇÂ≠óÁ¨¶‰∏≤‰∏ÄÂÆöË¶ÅÂä†ÂºïÂè∑ÔºåÂÅáËÆæ <code>select * from table_name where a = '1'</code>‰ºö‰ΩøÁî®Âà∞Á¥¢ÂºïÔºåÂ¶ÇÊûúÂÜôÊàê<code>select * from table_name where a = 1</code>Âàô‰ºöÂØºËá¥Á¥¢ÂºïÂ§±Êïà„ÄÇ</li>
<li>Âú®Á¥¢Âºï‰∏≠‰ΩøÁî®ÂáΩÊï∞‰ºöÂØºËá¥Á¥¢ÂºïÂ§±ÊïàÔºå‰æãÂ¶Ç<code>select * from table_name where abs(a) = 1</code></li>
<li>Âú®‰ΩøÁî®likeÊü•ËØ¢Êó∂‰ª•%ÂºÄÂ§¥‰ºöÂØºËá¥Á¥¢ÂºïÂ§±Êïà</li>
<li>Á¥¢Âºï‰∏ä‰ΩøÁî®ÔºÅ„ÄÅ=„ÄÅ&lt;&gt;ËøõË°åÂà§Êñ≠Êó∂‰ºöÂØºËá¥Á¥¢ÂºïÂ§±ÊïàÔºå‰æãÂ¶Ç<code>select * from table_name where a != 1</code></li>
<li>Á¥¢ÂºïÂ≠óÊÆµ‰∏ä‰ΩøÁî® is null/is not nullÂà§Êñ≠Êó∂‰ºöÂØºËá¥Á¥¢ÂºïÂ§±ÊïàÔºå‰æãÂ¶Ç<code>select * from table_name where a is null</code></li>
</ul>
<h2 id="Êï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°"><a href="#Êï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°" class="headerlink" title="Êï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°"></a>Êï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°</h2><h3 id="‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°Ôºü"><a href="#‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°Ôºü" class="headerlink" title="‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°Ôºü"></a>‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑ‰∫ãÂä°Ôºü</h3><p>ÁôæÂ∫¶ÁôæÁßëÁöÑËß£ÈáäÔºöÊï∞ÊçÆÂ∫ì‰∫ãÂä°( transaction)ÊòØËÆøÈóÆÂπ∂ÂèØËÉΩÊìç‰ΩúÂêÑÁßçÊï∞ÊçÆÈ°πÁöÑ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÊìç‰ΩúÂ∫èÂàóÔºåËøô‰∫õÊìç‰ΩúË¶Å‰πàÂÖ®ÈÉ®ÊâßË°å,Ë¶Å‰πàÂÖ®ÈÉ®‰∏çÊâßË°åÔºåÊòØ‰∏Ä‰∏™‰∏çÂèØÂàÜÂâ≤ÁöÑÂ∑•‰ΩúÂçï‰Ωç„ÄÇ‰∫ãÂä°Áî±‰∫ãÂä°ÂºÄÂßã‰∏é‰∫ãÂä°ÁªìÊùü‰πãÈó¥ÊâßË°åÁöÑÂÖ®ÈÉ®Êï∞ÊçÆÂ∫ìÊìç‰ΩúÁªÑÊàê„ÄÇ</p>
<h3 id="‰∫ãÂä°ÁöÑÂõõÂ§ßÁâπÊÄßÊòØ‰ªÄ‰πàÔºü"><a href="#‰∫ãÂä°ÁöÑÂõõÂ§ßÁâπÊÄßÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="‰∫ãÂä°ÁöÑÂõõÂ§ßÁâπÊÄßÊòØ‰ªÄ‰πàÔºü"></a>‰∫ãÂä°ÁöÑÂõõÂ§ßÁâπÊÄßÊòØ‰ªÄ‰πàÔºü</h3><ul>
<li>ÂéüÂ≠êÊÄßÔºöÂéüÂ≠êÊÄßÊòØÊåáÂåÖÂê´‰∫ãÂä°ÁöÑÊìç‰ΩúË¶Å‰πàÂÖ®ÈÉ®ÊâßË°åÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®Â§±Ë¥•ÂõûÊªö„ÄÇ</li>
<li>‰∏ÄËá¥ÊÄßÔºö‰∏ÄËá¥ÊÄßÊåá‰∫ãÂä°Âú®ÊâßË°åÂâçÂêéÁä∂ÊÄÅÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ</li>
<li>ÈöîÁ¶ªÊÄßÔºö‰∏Ä‰∏™‰∫ãÂä°ÊâÄËøõË°åÁöÑ‰øÆÊîπÂú®ÊúÄÁªàÊèê‰∫§‰πãÂâçÔºåÂØπÂÖ∂‰ªñ‰∫ãÂä°ÊòØ‰∏çÂèØËßÅÁöÑ„ÄÇ</li>
<li>ÊåÅ‰πÖÊÄßÔºöÊï∞ÊçÆ‰∏ÄÊó¶Êèê‰∫§ÔºåÂÖ∂ÊâÄ‰ΩúÁöÑ‰øÆÊîπÂ∞ÜÊ∞∏‰πÖÂú∞‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠„ÄÇ</li>
</ul>
<h3 id="Êï∞ÊçÆÂ∫ìÁöÑÂπ∂Âèë‰∏ÄËá¥ÊÄßÈóÆÈ¢ò"><a href="#Êï∞ÊçÆÂ∫ìÁöÑÂπ∂Âèë‰∏ÄËá¥ÊÄßÈóÆÈ¢ò" class="headerlink" title="Êï∞ÊçÆÂ∫ìÁöÑÂπ∂Âèë‰∏ÄËá¥ÊÄßÈóÆÈ¢ò"></a>Êï∞ÊçÆÂ∫ìÁöÑÂπ∂Âèë‰∏ÄËá¥ÊÄßÈóÆÈ¢ò</h3><p>ÂΩìÂ§ö‰∏™‰∫ãÂä°Âπ∂ÂèëÊâßË°åÊó∂ÔºåÂèØËÉΩ‰ºöÂá∫Áé∞‰ª•‰∏ãÈóÆÈ¢òÔºö</p>
<ul>
<li>ËÑèËØªÔºö‰∫ãÂä°AÊõ¥Êñ∞‰∫ÜÊï∞ÊçÆÔºå‰ΩÜËøòÊ≤°ÊúâÊèê‰∫§ÔºåËøôÊó∂‰∫ãÂä°BËØªÂèñÂà∞‰∫ãÂä°AÊõ¥Êñ∞ÂêéÁöÑÊï∞ÊçÆÔºåÁÑ∂Âêé‰∫ãÂä°AÂõûÊªö‰∫ÜÔºå‰∫ãÂä°BËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÂ∞±Êàê‰∏∫ËÑèÊï∞ÊçÆ‰∫Ü„ÄÇ</li>
<li>‰∏çÂèØÈáçÂ§çËØªÔºö‰∫ãÂä°AÂØπÊï∞ÊçÆËøõË°åÂ§öÊ¨°ËØªÂèñÔºå‰∫ãÂä°BÂú®‰∫ãÂä°AÂ§öÊ¨°ËØªÂèñÁöÑËøáÁ®ã‰∏≠ÊâßË°å‰∫ÜÊõ¥Êñ∞Êìç‰ΩúÂπ∂Êèê‰∫§‰∫ÜÔºåÂØºËá¥‰∫ãÂä°AÂ§öÊ¨°ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÂπ∂‰∏ç‰∏ÄËá¥„ÄÇ</li>
<li>ÂπªËØªÔºö‰∫ãÂä°AÂú®ËØªÂèñÊï∞ÊçÆÂêéÔºå‰∫ãÂä°BÂêë‰∫ãÂä°AËØªÂèñÁöÑÊï∞ÊçÆ‰∏≠ÊèíÂÖ•‰∫ÜÂá†Êù°Êï∞ÊçÆÔºå‰∫ãÂä°AÂÜçÊ¨°ËØªÂèñÊï∞ÊçÆÊó∂ÂèëÁé∞Â§ö‰∫ÜÂá†Êù°Êï∞ÊçÆÔºåÂíå‰πãÂâçËØªÂèñÁöÑÊï∞ÊçÆ‰∏ç‰∏ÄËá¥„ÄÇ</li>
<li>‰∏¢Â§±‰øÆÊîπÔºö‰∫ãÂä°AÂíå‰∫ãÂä°BÈÉΩÂØπÂêå‰∏Ä‰∏™Êï∞ÊçÆËøõË°å‰øÆÊîπÔºå‰∫ãÂä°AÂÖà‰øÆÊîπÔºå‰∫ãÂä°BÈöèÂêé‰øÆÊîπÔºå‰∫ãÂä°BÁöÑ‰øÆÊîπË¶ÜÁõñ‰∫Ü‰∫ãÂä°AÁöÑ‰øÆÊîπ„ÄÇ</li>
</ul>
<p>‰∏çÂèØÈáçÂ§çÂ∫¶ÂíåÂπªËØªÁúãËµ∑Êù•ÊØîËæÉÂÉèÔºåÂÆÉ‰ª¨‰∏ªË¶ÅÁöÑÂå∫Âà´ÊòØÔºöÂú®‰∏çÂèØÈáçÂ§çËØª‰∏≠ÔºåÂèëÁé∞Êï∞ÊçÆ‰∏ç‰∏ÄËá¥‰∏ªË¶ÅÊòØÊï∞ÊçÆË¢´Êõ¥Êñ∞‰∫Ü„ÄÇÂú®ÂπªËØª‰∏≠ÔºåÂèëÁé∞Êï∞ÊçÆ‰∏ç‰∏ÄËá¥‰∏ªË¶ÅÊòØÊï∞ÊçÆÂ¢ûÂ§öÊàñËÄÖÂáèÂ∞ë‰∫Ü„ÄÇ</p>
<h3 id="Êï∞ÊçÆÂ∫ìÁöÑÈöîÁ¶ªÁ∫ßÂà´ÊúâÂì™‰∫õÔºü"><a href="#Êï∞ÊçÆÂ∫ìÁöÑÈöîÁ¶ªÁ∫ßÂà´ÊúâÂì™‰∫õÔºü" class="headerlink" title="Êï∞ÊçÆÂ∫ìÁöÑÈöîÁ¶ªÁ∫ßÂà´ÊúâÂì™‰∫õÔºü"></a>Êï∞ÊçÆÂ∫ìÁöÑÈöîÁ¶ªÁ∫ßÂà´ÊúâÂì™‰∫õÔºü</h3><ul>
<li>Êú™Êèê‰∫§ËØªÔºö‰∏Ä‰∏™‰∫ãÂä°Âú®Êèê‰∫§ÂâçÔºåÂÆÉÁöÑ‰øÆÊîπÂØπÂÖ∂‰ªñ‰∫ãÂä°‰πüÊòØÂèØËßÅÁöÑ„ÄÇ</li>
<li>Êèê‰∫§ËØªÔºö‰∏Ä‰∏™‰∫ãÂä°Êèê‰∫§‰πãÂêéÔºåÂÆÉÁöÑ‰øÆÊîπÊâçËÉΩË¢´ÂÖ∂‰ªñ‰∫ãÂä°ÁúãÂà∞„ÄÇ</li>
<li>ÂèØÈáçÂ§çËØªÔºöÂú®Âêå‰∏Ä‰∏™‰∫ãÂä°‰∏≠Â§öÊ¨°ËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ</li>
<li>‰∏≤Ë°åÂåñÔºöÈúÄË¶ÅÂä†ÈîÅÂÆûÁé∞Ôºå‰ºöÂº∫Âà∂‰∫ãÂä°‰∏≤Ë°åÊâßË°å„ÄÇ</li>
</ul>
<p>Êï∞ÊçÆÂ∫ìÁöÑÈöîÁ¶ªÁ∫ßÂà´ÂàÜÂà´ÂèØ‰ª•Ëß£ÂÜ≥Êï∞ÊçÆÂ∫ìÁöÑËÑèËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØªÁ≠âÈóÆÈ¢ò„ÄÇ</p>
<table>
<thead>
<tr>
<th align="center">ÈöîÁ¶ªÁ∫ßÂà´</th>
<th align="center">ËÑèËØª</th>
<th align="center">‰∏çÂèØÈáçÂ§çËØª</th>
<th align="center">ÂπªËØª</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Êú™Êèê‰∫§ËØª</td>
<td align="center">ÂÖÅËÆ∏</td>
<td align="center">ÂÖÅËÆ∏</td>
<td align="center">ÂÖÅËÆ∏</td>
</tr>
<tr>
<td align="center">Êèê‰∫§ËØª</td>
<td align="center">‰∏çÂÖÅËÆ∏</td>
<td align="center">ÂÖÅËÆ∏</td>
<td align="center">ÂÖÅËÆ∏</td>
</tr>
<tr>
<td align="center">ÂèØÈáçÂ§çËØª</td>
<td align="center">‰∏çÂÖÅËÆ∏</td>
<td align="center">‰∏çÂÖÅËÆ∏</td>
<td align="center">ÂÖÅËÆ∏</td>
</tr>
<tr>
<td align="center">‰∏≤Ë°åÂåñ</td>
<td align="center">‰∏çÂÖÅËÆ∏</td>
<td align="center">‰∏çÂÖÅËÆ∏</td>
<td align="center">‰∏çÂÖÅËÆ∏</td>
</tr>
</tbody></table>
<p><strong>MySQLÁöÑÈªòËÆ§ÈöîÁ¶ªÁ∫ßÂà´ÊòØÂèØÈáçÂ§çËØª„ÄÇ</strong></p>
<h3 id="ÈöîÁ¶ªÁ∫ßÂà´ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"><a href="#ÈöîÁ¶ªÁ∫ßÂà´ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü" class="headerlink" title="ÈöîÁ¶ªÁ∫ßÂà´ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"></a>ÈöîÁ¶ªÁ∫ßÂà´ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü</h3><p>‰∫ãÂä°ÁöÑÈöîÁ¶ªÊú∫Âà∂‰∏ªË¶ÅÊòØ‰æùÈù†ÈîÅÊú∫Âà∂ÂíåMVCC(Â§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂)ÂÆûÁé∞ÁöÑÔºåÊèê‰∫§ËØªÂíåÂèØÈáçÂ§çËØªÂèØ‰ª•ÈÄöËøáMVCCÂÆûÁé∞Ôºå‰∏≤Ë°åÂåñÂèØ‰ª•ÈÄöËøáÈîÅÊú∫Âà∂ÂÆûÁé∞„ÄÇ</p>
<h3 id="‰ªÄ‰πàÊòØMVCCÔºü"><a href="#‰ªÄ‰πàÊòØMVCCÔºü" class="headerlink" title="‰ªÄ‰πàÊòØMVCCÔºü"></a>‰ªÄ‰πàÊòØMVCCÔºü</h3><p>MVCC(multiple version concurrent control)ÊòØ‰∏ÄÁßçÊéßÂà∂Âπ∂ÂèëÁöÑÊñπÊ≥ïÔºå‰∏ªË¶ÅÁî®Êù•ÊèêÈ´òÊï∞ÊçÆÂ∫ìÁöÑÂπ∂ÂèëÊÄßËÉΩ„ÄÇ</p>
<p>Âú®‰∫ÜËß£MVCCÊó∂Â∫îËØ•ÂÖà‰∫ÜËß£ÂΩìÂâçËØªÂíåÂø´ÁÖßËØª„ÄÇ</p>
<ul>
<li>ÂΩìÂâçËØªÔºöËØªÂèñÁöÑÊòØÊï∞ÊçÆÂ∫ìÁöÑÊúÄÊñ∞ÁâàÊú¨ÔºåÂπ∂‰∏îÂú®ËØªÂèñÊó∂Ë¶Å‰øùËØÅÂÖ∂‰ªñ‰∫ãÂä°‰∏ç‰ºö‰øÆÊîπÂΩìÂâçËÆ∞ÂΩïÔºåÊâÄ‰ª•‰ºöÂØπËØªÂèñÁöÑËÆ∞ÂΩïÂä†ÈîÅ„ÄÇ</li>
<li>Âø´ÁÖßËØªÔºö‰∏çÂä†ÈîÅËØªÂèñÊìç‰ΩúÂç≥‰∏∫Âø´ÁÖßËØªÔºå‰ΩøÁî®MVCCÊù•ËØªÂèñÂø´ÁÖß‰∏≠ÁöÑÊï∞ÊçÆÔºåÈÅøÂÖçÂä†ÈîÅÂ∏¶Êù•ÁöÑÊÄßËÉΩÊçüËÄó„ÄÇ</li>
</ul>
<p>ÂèØ‰ª•ÁúãÂà∞MVCCÁöÑ‰ΩúÁî®Â∞±ÊòØÂú®‰∏çÂä†ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÔºåËß£ÂÜ≥Êï∞ÊçÆÂ∫ìËØªÂÜôÂÜ≤Á™ÅÈóÆÈ¢òÔºåÂπ∂‰∏îËß£ÂÜ≥ËÑèËØª„ÄÅÂπªËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØªÁ≠âÈóÆÈ¢òÔºå‰ΩÜÊòØ‰∏çËÉΩËß£ÂÜ≥‰∏¢Â§±‰øÆÊîπÈóÆÈ¢ò„ÄÇ</p>
<p>MVCCÁöÑÂÆûÁé∞ÂéüÁêÜÔºö</p>
<ul>
<li><p>ÁâàÊú¨Âè∑</p>
<p>Á≥ªÁªüÁâàÊú¨Âè∑ÔºöÊòØ‰∏Ä‰∏™Ëá™Â¢ûÁöÑIDÔºåÊØèÂºÄÂêØ‰∏Ä‰∏™‰∫ãÂä°ÔºåÁ≥ªÁªüÁâàÊú¨Âè∑ÈÉΩ‰ºöÈÄíÂ¢û„ÄÇ</p>
<p>‰∫ãÂä°ÁâàÊú¨Âè∑Ôºö‰∫ãÂä°ÁâàÊú¨Âè∑Â∞±ÊòØ‰∫ãÂä°ÂºÄÂßãÊó∂ÁöÑÁ≥ªÁªüÁâàÊú¨Âè∑ÔºåÂèØ‰ª•ÈÄöËøá‰∫ãÂä°ÁâàÊú¨Âè∑ÁöÑÂ§ßÂ∞èÂà§Êñ≠‰∫ãÂä°ÁöÑÊó∂Èó¥È°∫Â∫è„ÄÇ</p>
</li>
<li><p>Ë°åËÆ∞ÂΩïÈöêËóèÁöÑÂàó</p>
<p>DB_ROW_IDÔºöÊâÄÈúÄÁ©∫Èó¥6byteÔºåÈöêÂê´ÁöÑËá™Â¢ûIDÔºåÁî®Êù•ÁîüÊàêËÅöÁ∞áÁ¥¢ÂºïÔºåÂ¶ÇÊûúÊï∞ÊçÆË°®Ê≤°ÊúâÊåáÂÆöËÅöÁ∞áÁ¥¢ÂºïÔºåInnoDB‰ºöÂà©Áî®Ëøô‰∏™ÈöêËóèIDÂàõÂª∫ËÅöÁ∞áÁ¥¢Âºï„ÄÇ</p>
<p>DB_TRX_IDÔºöÊâÄÈúÄÁ©∫Èó¥6byteÔºåÊúÄËøë‰øÆÊîπÁöÑ‰∫ãÂä°IDÔºåËÆ∞ÂΩïÂàõÂª∫ËøôÊù°ËÆ∞ÂΩïÊàñÊúÄÂêé‰∏ÄÊ¨°‰øÆÊîπËøôÊù°ËÆ∞ÂΩïÁöÑ‰∫ãÂä°ID„ÄÇ</p>
<p>DB_ROLL_PTRÔºöÊâÄÈúÄÁ©∫Èó¥7byteÔºåÂõûÊªöÊåáÈíàÔºåÊåáÂêëËøôÊù°ËÆ∞ÂΩïÁöÑ‰∏ä‰∏Ä‰∏™ÁâàÊú¨„ÄÇ</p>
<p>ÂÆÉ‰ª¨Â§ßËá¥ÈïøËøôÊ†∑ÔºåÁúÅÁï•‰∫ÜÂÖ∑‰ΩìÂ≠óÊÆµÁöÑÂÄº„ÄÇ</p>
</li>
</ul>
<p><img src="/p/ca035920/MySQL-MVCC(1).png" alt="ÂõæÁâá"></p>
<ul>
<li>undoÊó•Âøó</li>
</ul>
<p>MVCCÂÅö‰ΩøÁî®Âà∞ÁöÑÂø´ÁÖß‰ºöÂ≠òÂÇ®Âú®UndoÊó•Âøó‰∏≠ÔºåËØ•Êó•ÂøóÈÄöËøáÂõûÊªöÊåáÈíàÂ∞Ü‰∏Ä‰∏™‰∏Ä‰∏™Êï∞ÊçÆË°åÁöÑÊâÄÊúâÂø´ÁÖßËøûÊé•Ëµ∑Êù•„ÄÇÂÆÉ‰ª¨Â§ßËá¥ÈïøËøôÊ†∑„ÄÇ</p>
<p><img src="/p/ca035920/MySQL-MVCC(2).png" alt="ÂõæÁâá"></p>
<p>‰∏æ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êËØ¥Êòé‰∏ãÔºåÊØîÂ¶ÇÊúÄÂºÄÂßãÁöÑÊüêÊù°ËÆ∞ÂΩïÈïøËøôÊ†∑</p>
<p><img src="/p/ca035920/MySQL-MVCC(3).png" alt="ÂõæÁâá"></p>
<p>Áé∞Âú®Êù•‰∫Ü‰∏Ä‰∏™‰∫ãÂä°ÂØπ‰ªñÁöÑÂπ¥ÈæÑÂ≠óÊÆµËøõË°å‰∫Ü‰øÆÊîπÔºåÂèòÊàê‰∫ÜËøôÊ†∑</p>
<p><img src="/p/ca035920/MySQL-MVCC(4).png" alt="ÂõæÁâá"></p>
<p>Áé∞Âú®ÂèàÊù•‰∫Ü‰∏Ä‰∏™‰∫ãÂä°2ÂØπÂÆÉÁöÑÊÄßÂà´ËøõË°å‰∫Ü‰øÆÊîπÔºåÂÆÉÂèàÂèòÊàê‰∫ÜËøôÊ†∑</p>
<p><img src="/p/ca035920/MySQL-MVCC(5).png" alt="ÂõæÁâá"></p>
<p>‰ªé‰∏äÈù¢ÁöÑÂàÜÊûêÂèØ‰ª•ÁúãÂá∫Ôºå‰∫ãÂä°ÂØπÂêå‰∏ÄËÆ∞ÂΩïÁöÑ‰øÆÊîπÔºåËÆ∞ÂΩïÁöÑÂêÑ‰∏™‰ºöÂú®UndoÊó•Âøó‰∏≠ËøûÊé•Êàê‰∏Ä‰∏™Á∫øÊÄßË°®ÔºåÂú®Ë°®Â§¥ÁöÑÂ∞±ÊòØÊúÄÊñ∞ÁöÑÊóßÁ∫™ÂΩï„ÄÇ</p>
<p>Âú®ÈáçÂ§çËØªÁöÑÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåInnoDBÁöÑÂ∑•‰ΩúÊµÅÁ®ãÔºö</p>
<ul>
<li><p>SELECT</p>
<p>‰Ωú‰∏∫Êü•ËØ¢ÁöÑÁªìÊûúË¶ÅÊª°Ë∂≥‰∏§‰∏™Êù°‰ª∂Ôºö</p>
</li>
<li><ol>
<li>ÂΩìÂâç‰∫ãÂä°ÊâÄË¶ÅÊü•ËØ¢ÁöÑÊï∞ÊçÆË°åÂø´ÁÖßÁöÑÂàõÂª∫ÁâàÊú¨Âè∑ÂøÖÈ°ªÂ∞è‰∫éÂΩìÂâç‰∫ãÂä°ÁöÑÁâàÊú¨Âè∑ÔºåËøôÊ†∑ÂÅöÁöÑÁõÆÁöÑÊòØ‰øùËØÅÂΩìÂâç‰∫ãÂä°ËØªÂèñÁöÑÊï∞ÊçÆË°åÁöÑÂø´ÁÖßË¶Å‰πàÊòØÂú®ÂΩìÂâç‰∫ãÂä°ÂºÄÂßãÂâçÂ∞±Â∑≤ÁªèÂ≠òÂú®ÁöÑÔºåË¶Å‰πàÂ∞±ÊòØÂΩìÂâç‰∫ãÂä°Ëá™Ë∫´ÊèíÂÖ•ÊàñËÄÖ‰øÆÊîπËøáÁöÑ„ÄÇ</li>
<li>ÂΩìÂâç‰∫ãÂä°ÊâÄË¶ÅËØªÂèñÁöÑÊï∞ÊçÆË°åÂø´ÁÖßÁöÑÂà†Èô§ÁâàÊú¨Âè∑ÂøÖÈ°ªÊòØÂ§ß‰∫éÂΩìÂâç‰∫ãÂä°ÁöÑÁâàÊú¨Âè∑ÔºåÂ¶ÇÊûúÊòØÂ∞è‰∫éÁ≠â‰∫éÁöÑËØùÔºåË°®Á§∫ËØ•Êï∞ÊçÆË°åÂø´ÁÖßÂ∑≤ÁªèË¢´Âà†Èô§Ôºå‰∏çËÉΩËØªÂèñ„ÄÇ</li>
</ol>
</li>
<li><p>INSERT</p>
<p>Â∞ÜÂΩìÂâçÁ≥ªÁªüÁâàÊú¨Âè∑‰Ωú‰∏∫Êï∞ÊçÆË°åÂø´ÁÖßÁöÑÂàõÂª∫ÁâàÊú¨Âè∑„ÄÇ</p>
</li>
<li><p>DELETE</p>
<p>Â∞ÜÂΩìÂâçÁ≥ªÁªüÁâàÊú¨Âè∑‰Ωú‰∏∫Êï∞ÊçÆË°åÂø´ÁÖßÁöÑÂà†Èô§ÁâàÊú¨Âè∑„ÄÇ</p>
</li>
<li><p>UPDATE</p>
<p>‰øùÂ≠òÂΩìÂâçÁ≥ªÁªüÁâàÊú¨Âè∑‰∏∫Êõ¥Êñ∞ÂâçÁöÑÊï∞ÊçÆË°åÂø´ÁÖßÂàõÂª∫Ë°åÁâàÊú¨Âè∑ÔºåÂπ∂‰øùÂ≠òÂΩìÂâçÁ≥ªÁªüÁâàÊú¨Âè∑‰∏∫Êõ¥Êñ∞ÂêéÁöÑÊï∞ÊçÆË°åÂø´ÁÖßÁöÑÂà†Èô§ÁâàÊú¨Âè∑ÔºåÂÖ∂ÂÆûÂ∞±ÊòØÔºåÂÖàÂà†Èô§Âú®ÊèíÂÖ•Âç≥‰∏∫Êõ¥Êñ∞„ÄÇ</p>
</li>
</ul>
<p>ÊÄªÁªì‰∏Ä‰∏ãÔºåMVCCÁöÑ‰ΩúÁî®Â∞±ÊòØÂú®ÈÅøÂÖçÂä†ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÊúÄÂ§ßÈôêÂ∫¶Ëß£ÂÜ≥ËØªÂÜôÂπ∂ÂèëÂÜ≤Á™ÅÁöÑÈóÆÈ¢òÔºåÂÆÉÂèØ‰ª•ÂÆûÁé∞Êèê‰∫§ËØªÂíåÂèØÈáçÂ§çÂ∫¶‰∏§‰∏™ÈöîÁ¶ªÁ∫ß„ÄÇ</p>
<h2 id="Êï∞ÊçÆÂ∫ìÁöÑÈîÅ"><a href="#Êï∞ÊçÆÂ∫ìÁöÑÈîÅ" class="headerlink" title="Êï∞ÊçÆÂ∫ìÁöÑÈîÅ"></a>Êï∞ÊçÆÂ∫ìÁöÑÈîÅ</h2><h3 id="‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑÈîÅÔºü"><a href="#‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑÈîÅÔºü" class="headerlink" title="‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑÈîÅÔºü"></a>‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑÈîÅÔºü</h3><p>ÂΩìÊï∞ÊçÆÂ∫ìÊúâÂπ∂Âèë‰∫ãÂä°ÁöÑÊó∂ÂÄôÔºå‰øùËØÅÊï∞ÊçÆËÆøÈóÆÈ°∫Â∫èÁöÑÊú∫Âà∂Áß∞‰∏∫ÈîÅÊú∫Âà∂„ÄÇ</p>
<h3 id="Êï∞ÊçÆÂ∫ìÁöÑÈîÅ‰∏éÈöîÁ¶ªÁ∫ßÂà´ÁöÑÂÖ≥Á≥ªÔºü"><a href="#Êï∞ÊçÆÂ∫ìÁöÑÈîÅ‰∏éÈöîÁ¶ªÁ∫ßÂà´ÁöÑÂÖ≥Á≥ªÔºü" class="headerlink" title="Êï∞ÊçÆÂ∫ìÁöÑÈîÅ‰∏éÈöîÁ¶ªÁ∫ßÂà´ÁöÑÂÖ≥Á≥ªÔºü"></a>Êï∞ÊçÆÂ∫ìÁöÑÈîÅ‰∏éÈöîÁ¶ªÁ∫ßÂà´ÁöÑÂÖ≥Á≥ªÔºü</h3><table>
<thead>
<tr>
<th align="center">ÈöîÁ¶ªÁ∫ßÂà´</th>
<th align="center">ÂÆûÁé∞ÊñπÂºè</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Êú™Êèê‰∫§ËØª</td>
<td align="center">ÊÄªÊòØËØªÂèñÊúÄÊñ∞ÁöÑÊï∞ÊçÆÔºåÊó†ÈúÄÂä†ÈîÅ</td>
</tr>
<tr>
<td align="center">Êèê‰∫§ËØª</td>
<td align="center">ËØªÂèñÊï∞ÊçÆÊó∂Âä†ÂÖ±‰∫´ÈîÅÔºåËØªÂèñÊï∞ÊçÆÂêéÈáäÊîæÂÖ±‰∫´ÈîÅ</td>
</tr>
<tr>
<td align="center">ÂèØÈáçÂ§çËØª</td>
<td align="center">ËØªÂèñÊï∞ÊçÆÊó∂Âä†ÂÖ±‰∫´ÈîÅÔºå‰∫ãÂä°ÁªìÊùüÂêéÈáäÊîæÂÖ±‰∫´ÈîÅ</td>
</tr>
<tr>
<td align="center">‰∏≤Ë°åÂåñ</td>
<td align="center">ÈîÅÂÆöÊï¥‰∏™ËåÉÂõ¥ÁöÑÈîÆÔºå‰∏ÄÁõ¥ÊåÅÊúâÈîÅÁõ¥Âà∞‰∫ãÂä°ÁªìÊùü</td>
</tr>
</tbody></table>
<h3 id="Êï∞ÊçÆÂ∫ìÈîÅÁöÑÁ±ªÂûãÊúâÂì™‰∫õÔºü"><a href="#Êï∞ÊçÆÂ∫ìÈîÅÁöÑÁ±ªÂûãÊúâÂì™‰∫õÔºü" class="headerlink" title="Êï∞ÊçÆÂ∫ìÈîÅÁöÑÁ±ªÂûãÊúâÂì™‰∫õÔºü"></a>Êï∞ÊçÆÂ∫ìÈîÅÁöÑÁ±ªÂûãÊúâÂì™‰∫õÔºü</h3><p>ÊåâÁÖßÈîÅÁöÑÁ≤íÂ∫¶ÂèØ‰ª•Â∞ÜMySQLÈîÅÂàÜ‰∏∫‰∏âÁßçÔºö</p>
<table>
<thead>
<tr>
<th align="center">MySQLÈîÅÁ±ªÂà´</th>
<th align="center">ËµÑÊ∫êÂºÄÈîÄ</th>
<th align="center">Âä†ÈîÅÈÄüÂ∫¶</th>
<th align="center">ÊòØÂê¶‰ºöÂá∫Áé∞Ê≠ªÈîÅ</th>
<th align="center">ÈîÅÁöÑÁ≤íÂ∫¶</th>
<th align="center">Âπ∂ÂèëÂ∫¶</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Ë°®Á∫ßÈîÅ</td>
<td align="center">Â∞è</td>
<td align="center">Âø´</td>
<td align="center">‰∏ç‰ºö</td>
<td align="center">Â§ß</td>
<td align="center">‰Ωé</td>
</tr>
<tr>
<td align="center">Ë°åÁ∫ßÈîÅ</td>
<td align="center">Â§ß</td>
<td align="center">ÊÖ¢</td>
<td align="center">‰ºö</td>
<td align="center">Â∞è</td>
<td align="center">È´ò</td>
</tr>
<tr>
<td align="center">È°µÈù¢ÈîÅ</td>
<td align="center">‰∏ÄËà¨</td>
<td align="center">‰∏ÄËà¨</td>
<td align="center">‰∏ç‰ºö</td>
<td align="center">‰∏ÄËà¨</td>
<td align="center">‰∏ÄËà¨</td>
</tr>
</tbody></table>
<p>MyISAMÈªòËÆ§ÈááÁî®Ë°®Á∫ßÈîÅÔºåInnoDBÈªòËÆ§ÈááÁî®Ë°åÁ∫ßÈîÅ„ÄÇ</p>
<p>‰ªéÈîÅÁöÑÁ±ªÂà´‰∏äÂå∫Âà´ÂèØ‰ª•ÂàÜ‰∏∫ÂÖ±‰∫´ÈîÅÂíåÊéí‰ªñÈîÅ</p>
<ul>
<li>ÂÖ±‰∫´ÈîÅÔºöÂÖ±‰∫´ÈîÅÂèàÁß∞ËØªÈîÅÔºåÁÆÄÂÜô‰∏∫SÈîÅÔºå‰∏Ä‰∏™‰∫ãÂä°ÂØπ‰∏Ä‰∏™Êï∞ÊçÆÂØπË±°Âä†‰∫ÜSÈîÅÔºåÂèØ‰ª•ÂØπËøô‰∏™Êï∞ÊçÆÂØπË±°ËøõË°åËØªÂèñÊìç‰ΩúÔºå‰ΩÜ‰∏çËÉΩËøõË°åÊõ¥Êñ∞Êìç‰Ωú„ÄÇÂπ∂‰∏îÂú®Âä†ÈîÅÊúüÈó¥ÂÖ∂‰ªñ‰∫ãÂä°Âè™ËÉΩÂØπËøô‰∏™Êï∞ÊçÆÂØπË±°Âä†SÈîÅÔºå‰∏çËÉΩÂä†XÈîÅ„ÄÇ</li>
<li>Êéí‰ªñÈîÅÔºöÊéí‰ªñÈîÅÂèàÁß∞‰∏∫ÂÜôÈîÅÔºåÁÆÄÂÜô‰∏∫XÈîÅÔºå‰∏Ä‰∏™‰∫ãÂä°ÂØπ‰∏Ä‰∏™Êï∞ÊçÆÂØπË±°Âä†‰∫ÜXÈîÅÔºåÂèØ‰ª•ÂØπËøô‰∏™ÂØπË±°ËøõË°åËØªÂèñÂíåÊõ¥Êñ∞Êìç‰ΩúÔºåÂä†ÈîÅÊúüÈó¥ÔºåÂÖ∂‰ªñ‰∫ãÂä°‰∏çËÉΩÂØπËØ•Êï∞ÊçÆÂØπË±°ËøõË°åÂä†XÈîÅÊàñSÈîÅ„ÄÇ</li>
</ul>
<p>ÂÆÉ‰ª¨ÁöÑÂÖºÂÆπÊÉÖÂÜµÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/ca035920/MySQL-MVCC(6).png" alt="ÂõæÁâá"></p>
<h3 id="MySQL‰∏≠InnoDBÂºïÊìéÁöÑË°åÈîÅÊ®°ÂºèÂèäÂÖ∂ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"><a href="#MySQL‰∏≠InnoDBÂºïÊìéÁöÑË°åÈîÅÊ®°ÂºèÂèäÂÖ∂ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü" class="headerlink" title="MySQL‰∏≠InnoDBÂºïÊìéÁöÑË°åÈîÅÊ®°ÂºèÂèäÂÖ∂ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"></a>MySQL‰∏≠InnoDBÂºïÊìéÁöÑË°åÈîÅÊ®°ÂºèÂèäÂÖ∂ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü</h3><p><strong>Ë°åÈîÅÊ®°Âºè</strong></p>
<p>Âú®Â≠òÂú®Ë°åÈîÅÂíåË°®ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∏Ä‰∏™‰∫ãÂä°ÊÉ≥ÂØπÊüê‰∏™Ë°®Âä†XÈîÅÊó∂ÔºåÈúÄË¶ÅÂÖàÊ£ÄÊü•ÊòØÂê¶ÊúâÂÖ∂‰ªñ‰∫ãÂä°ÂØπËøô‰∏™Ë°®Âä†‰∫ÜÈîÅÊàñÂØπËøô‰∏™Ë°®ÁöÑÊüê‰∏ÄË°åÂä†‰∫ÜÈîÅÔºåÂØπË°®ÁöÑÊØè‰∏ÄË°åÈÉΩËøõË°åÊ£ÄÊµã‰∏ÄÊ¨°ËøôÊòØÈùûÂ∏∏‰ΩéÊïàÁéáÁöÑÔºå‰∏∫‰∫ÜËß£ÂÜ≥ËøôÁßçÈóÆÈ¢òÔºåÂÆûÁé∞Â§öÁ≤íÂ∫¶ÈîÅÊú∫Âà∂ÔºåInnoDBËøòÊúâ‰∏§ÁßçÂÜÖÈÉ®‰ΩøÁî®ÁöÑÊÑèÂêëÈîÅÔºå‰∏§ÁßçÊÑèÂêëÈîÅÈÉΩÊòØË°®ÈîÅ„ÄÇ</p>
<ul>
<li>ÊÑèÂêëÂÖ±‰∫´ÈîÅÔºöÁÆÄÁß∞ISÈîÅÔºå‰∏Ä‰∏™‰∫ãÂä°ÊâìÁÆóÁªôÊï∞ÊçÆË°åÂä†ÂÖ±‰∫´ÈîÅÂâçÂøÖÈ°ªÂÖàËé∑ÂæóËØ•Ë°®ÁöÑISÈîÅ„ÄÇ</li>
<li>ÊÑèÂêëÊéí‰ªñÈîÅÔºöÁÆÄÁß∞IXÈîÅÔºå‰∏Ä‰∏™‰∫ãÂä°ÊâìÁÆóÁªôÊï∞ÊçÆË°åÂä†Êéí‰ªñÈîÅÂâçÂøÖÈ°ªÂÖàËé∑ÂæóËØ•Ë°®ÁöÑIXÈîÅ„ÄÇ</li>
</ul>
<p>Êúâ‰∫ÜÊÑèÂêëÈîÅÔºå‰∏Ä‰∏™‰∫ãÂä°ÊÉ≥ÂØπÊüê‰∏™Ë°®Âä†XÈîÅÔºåÂè™ÈúÄË¶ÅÊ£ÄÊü•ÊòØÂê¶ÊúâÂÖ∂‰ªñ‰∫ãÂä°ÂØπËøô‰∏™Ë°®Âä†‰∫ÜX/IX/S/ISÈîÅÂç≥ÂèØ„ÄÇ</p>
<p>ÈîÅÁöÑÂÖºÂÆπÊÄßÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/ca035920/MySQL-%E9%94%81.png" alt="ÂõæÁâá"></p>
<p>Ë°åÈîÅÂÆûÁé∞ÊñπÂºèÔºöINnoDBÁöÑË°åÈîÅÊòØÈÄöËøáÁªôÁ¥¢Âºï‰∏äÁöÑÁ¥¢ÂºïÈ°πÂä†ÈîÅÂÆûÁé∞ÁöÑÔºåÂ¶ÇÊûúÊ≤°ÊúâÁ¥¢ÂºïÔºåInnoDBÂ∞ÜÈÄöËøáÈöêËóèÁöÑËÅöÁ∞áÁ¥¢ÂºïÊù•ÂØπËÆ∞ÂΩïËøõË°åÂä†ÈîÅ„ÄÇ</p>
<p>InnoDBË°åÈîÅ‰∏ªË¶ÅÂàÜ‰∏âÁßçÊÉÖÂÜµÔºö</p>
<ul>
<li>Record lockÔºöÂØπÁ¥¢ÂºïÈ°πÂä†ÈîÅ</li>
<li>Grap lockÔºöÂØπÁ¥¢Âºï‰πãÈó¥ÁöÑ‚ÄúÈó¥Èöô‚Äù„ÄÅÁ¨¨‰∏ÄÊù°ËÆ∞ÂΩïÂâçÁöÑ‚ÄúÈó¥Èöô‚ÄùÊàñÊúÄÂêé‰∏ÄÊù°ÂêéÁöÑÈó¥ÈöôÂä†ÈîÅ„ÄÇ</li>
<li>Next-key lockÔºöÂâç‰∏§ÁßçÊîæÂÖ•ÁªÑÂêàÔºåÂØπËÆ∞ÂΩïÂèäÂâçÈù¢ÁöÑÈó¥ÈöôÂä†ÈîÅ„ÄÇ</li>
</ul>
<p>InnoDBË°åÈîÅÁöÑÁâπÊÄßÔºöÂ¶ÇÊûú‰∏çÈÄöËøáÁ¥¢ÂºïÊù°‰ª∂Ê£ÄÁ¥¢Êï∞ÊçÆÔºåÈÇ£‰πàInnoDBÂ∞ÜÂØπË°®‰∏≠ÊâÄÊúâËÆ∞ÂΩïÂä†ÈîÅÔºåÂÆûÈôÖ‰∫ßÁîüÁöÑÊïàÊûúÂíåË°®ÈîÅÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ</p>
<p>MVCC‰∏çËÉΩËß£ÂÜ≥ÂπªËØªÈóÆÈ¢òÔºåÂú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºå‰ΩøÁî®MVCC+Next-Key LocksÂèØ‰ª•Ëß£ÂÜ≥ÂπªËØªÈóÆÈ¢ò„ÄÇ</p>
<h3 id="‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑ‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÔºåÂ¶Ç‰ΩïÂÆûÁé∞Ôºü"><a href="#‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑ‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÔºåÂ¶Ç‰ΩïÂÆûÁé∞Ôºü" class="headerlink" title="‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑ‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÔºåÂ¶Ç‰ΩïÂÆûÁé∞Ôºü"></a>‰ªÄ‰πàÊòØÊï∞ÊçÆÂ∫ìÁöÑ‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÔºåÂ¶Ç‰ΩïÂÆûÁé∞Ôºü</h3><p>‰πêËßÇÈîÅÔºöÁ≥ªÁªüÂÅáËÆæÊï∞ÊçÆÁöÑÊõ¥Êñ∞Âú®Â§ßÂ§öÊï∞Êó∂ÂÄôÊòØ‰∏ç‰ºö‰∫ßÁîüÂÜ≤Á™ÅÁöÑÔºåÊâÄ‰ª•Êï∞ÊçÆÂ∫ìÂè™Âú®Êõ¥Êñ∞Êìç‰ΩúÊèê‰∫§ÁöÑÊó∂ÂÄôÂØπÊï∞ÊçÆÊ£ÄÊµãÂÜ≤Á™ÅÔºåÂ¶ÇÊûúÂ≠òÂú®ÂÜ≤Á™ÅÔºåÂàôÊï∞ÊçÆÊõ¥Êñ∞Â§±Ë¥•„ÄÇ</p>
<p>‰πêËßÇÈîÅÂÆûÁé∞ÊñπÂºèÔºö‰∏ÄËà¨ÈÄöËøáÁâàÊú¨Âè∑ÂíåCASÁÆóÊ≥ïÂÆûÁé∞„ÄÇ</p>
<p>ÊÇ≤ËßÇÈîÅÔºöÂÅáÂÆö‰ºöÂèëÁîüÂπ∂ÂèëÂÜ≤Á™ÅÔºåÂ±èËîΩ‰∏ÄÂàáÂèØËÉΩËøùÂèçÊï∞ÊçÆÂÆåÊï¥ÊÄßÁöÑÊìç‰Ωú„ÄÇÈÄö‰øóËÆ≤Â∞±ÊòØÊØèÊ¨°ÂéªÊãøÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩËÆ§‰∏∫Âà´‰∫∫‰ºö‰øÆÊîπÔºåÊâÄ‰ª•ÊØèÊ¨°Âú®ÊãøÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩ‰ºö‰∏äÈîÅ„ÄÇ</p>
<p>ÊÇ≤ËßÇÈîÅÁöÑÂÆûÁé∞ÊñπÂºèÔºöÈÄöËøáÊï∞ÊçÆÂ∫ìÁöÑÈîÅÊú∫Âà∂ÂÆûÁé∞ÔºåÂØπÊü•ËØ¢ËØ≠Âè•Ê∑ªÂä†for updata„ÄÇ</p>
<h3 id="‰ªÄ‰πàÊòØÊ≠ªÈîÅÔºüÂ¶Ç‰ΩïÈÅøÂÖçÔºü"><a href="#‰ªÄ‰πàÊòØÊ≠ªÈîÅÔºüÂ¶Ç‰ΩïÈÅøÂÖçÔºü" class="headerlink" title="‰ªÄ‰πàÊòØÊ≠ªÈîÅÔºüÂ¶Ç‰ΩïÈÅøÂÖçÔºü"></a>‰ªÄ‰πàÊòØÊ≠ªÈîÅÔºüÂ¶Ç‰ΩïÈÅøÂÖçÔºü</h3><p>Ê≠ªÈîÅÊòØÊåá‰∏§‰∏™ÊàñËÄÖ‰∏§‰∏™‰ª•‰∏äËøõÁ®ãÂú®ÊâßË°åËøáÁ®ã‰∏≠ÔºåÁî±‰∫éÁ´û‰∫âËµÑÊ∫êÊàñËÄÖÁî±‰∫éÂΩºÊ≠§ÈÄö‰ø°ËÄåÈÄ†ÊàêÁöÑ‰∏ÄÁßçÈòªÂ°ûÁöÑÁé∞Ë±°„ÄÇÂú®MySQL‰∏≠ÔºåMyISAMÊòØ‰∏ÄÊ¨°Ëé∑ÂæóÊâÄÈúÄÁöÑÂÖ®ÈÉ®ÈîÅÔºåË¶Å‰πàÂÖ®ÈÉ®Êª°Ë∂≥ÔºåË¶Å‰πàÁ≠âÂæÖÔºåÊâÄ‰ª•‰∏ç‰ºöÂá∫Áé∞Ê≠ªÈîÅ„ÄÇÂú®InnoDBÂ≠òÂÇ®ÂºïÊìé‰∏≠ÔºåÈô§‰∫ÜÂçï‰∏™SQLÁªÑÊàêÁöÑ‰∫ãÂä°Â§ñÔºåÈîÅÈÉΩÊòØÈÄêÊ≠•Ëé∑ÂæóÁöÑÔºåÊâÄ‰ª•Â≠òÂú®Ê≠ªÈîÅÈóÆÈ¢ò„ÄÇ</p>
<p>Â¶Ç‰ΩïÈÅøÂÖçMySQLÂèëÁîüÊ≠ªÈîÅÊàñÈîÅÂÜ≤Á™ÅÔºö</p>
<ul>
<li>Â¶ÇÊûú‰∏çÂêåÁöÑÁ®ãÂ∫èÂπ∂ÂèëÂ≠òÂèñÂ§ö‰∏™Ë°®ÔºåÂ∞ΩÈáè‰ª•Áõ∏ÂêåÁöÑÈ°∫Â∫èËÆøÈóÆË°®„ÄÇ</li>
<li>Âú®Á®ãÂ∫è‰ª•ÊâπÈáèÊñπÂºèÂ§ÑÁêÜÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÂ∑≤ÁªèÂØπÊï∞ÊçÆÊéíÂ∫èÔºåÂ∞ΩÈáè‰øùËØÅÊØè‰∏™Á∫øÁ®ãÊåâÁÖßÂõ∫ÂÆöÁöÑÈ°∫Â∫èÊù•Â§ÑÁêÜËÆ∞ÂΩï„ÄÇ</li>
<li>Âú®‰∫ãÂä°‰∏≠ÔºåÂ¶ÇÊûúÈúÄË¶ÅÊõ¥Êñ∞ËÆ∞ÂΩïÔºåÂ∫îÁõ¥Êé•Áî≥ËØ∑Ë∂≥Â§üÁ∫ßÂà´ÁöÑÊéí‰ªñÈîÅÔºåËÄå‰∏çÂ∫îËØ•ÂÖàÁî≥ËØ∑ÂÖ±‰∫´ÈîÅÔºåÊõ¥Êñ∞Êó∂Âú®Áî≥ËØ∑Êéí‰ªñÈîÅÔºåÂõ†‰∏∫Âú®ÂΩìÂâçÁî®Êà∑Áî≥ËØ∑Êéí‰ªñÈîÅÊó∂ÔºåÂÖ∂‰ªñ‰∫ãÂä°ÂèØËÉΩÂ∑≤ÁªèËé∑Âæó‰∫ÜÁõ∏ÂêåËÆ∞ÂΩïÁöÑÂÖ±‰∫´ÈîÅÔºå‰ªéËÄåÈÄ†ÊàêÈîÅÂÜ≤Á™ÅÊàñËÄÖÊ≠ªÈîÅ„ÄÇ</li>
<li>Â∞ΩÈáè‰ΩøÁî®ËæÉ‰ΩéÁöÑÈöîÁ¶ªÁ∫ßÂà´</li>
<li>Â∞ΩÈáè‰ΩøÁî®Á¥¢ÂºïËÆøÈóÆÊï∞ÊçÆÔºå‰ΩøÂä†ÈîÅÊõ¥Âä†ÂáÜÁ°ÆÔºå‰ªéËÄåÂáèÂ∞ëÈîÅÂÜ≤Á™ÅÁöÑÊú∫‰ºö</li>
<li>ÂêàÁêÜÈÄâÊã©‰∫ãÂä°ÁöÑÂ§ßÂ∞èÔºåÂ∞è‰∫ãÂä°ÂèëÁîüÈîÅÂÜ≤Á™ÅÁöÑÊ¶ÇÁéáÊõ¥‰Ωé</li>
<li>Â∞ΩÈáèÁî®Áõ∏Á≠âÁöÑÊù°‰ª∂ËÆøÈóÆÊï∞ÊçÆÔºåÂèØ‰ª•ÈÅøÂÖçNext-KeyÈîÅÂØπÂπ∂ÂèëÊèíÂÖ•ÁöÑÂΩ±Âìç„ÄÇ</li>
<li>‰∏çË¶ÅÁî≥ËØ∑Ë∂ÖËøáÂÆûÈôÖÈúÄË¶ÅÁöÑÈîÅÁ∫ßÂà´ÔºåÊü•ËØ¢Êó∂Â∞ΩÈáè‰∏çË¶ÅÊòæÁ§∫Âä†ÈîÅ</li>
<li>ÂØπ‰∫é‰∏Ä‰∫õÁâπÂÆöÁöÑ‰∫ãÂä°ÔºåÂèØ‰ª•Ë°®ÈîÅÊù•ÊèêÈ´òÂ§ÑÁêÜÈÄüÂ∫¶ÊàñÂáèÂ∞ëÊ≠ªÈîÅÁöÑÊ¶ÇÁéá„ÄÇ</li>
</ul>
<h2 id="SQLËØ≠Âè•Âü∫Á°ÄÁü•ËØÜ"><a href="#SQLËØ≠Âè•Âü∫Á°ÄÁü•ËØÜ" class="headerlink" title="SQLËØ≠Âè•Âü∫Á°ÄÁü•ËØÜ"></a>SQLËØ≠Âè•Âü∫Á°ÄÁü•ËØÜ</h2><h3 id="SQLËØ≠Âè•‰∏ªË¶ÅÂàÜ‰∏∫Âì™Âá†Á±ª"><a href="#SQLËØ≠Âè•‰∏ªË¶ÅÂàÜ‰∏∫Âì™Âá†Á±ª" class="headerlink" title="SQLËØ≠Âè•‰∏ªË¶ÅÂàÜ‰∏∫Âì™Âá†Á±ª"></a>SQLËØ≠Âè•‰∏ªË¶ÅÂàÜ‰∏∫Âì™Âá†Á±ª</h3><ul>
<li>Êï∞ÊçÆÊçÆÂÆö‰πâËØ≠Ë®ÄDDLÔºàData Definition LanguageÔºâÔºö‰∏ªË¶ÅÊúâCREATEÔºåDROPÔºåALTERÁ≠âÂØπÈÄªËæëÁªìÊûÑÊúâÊìç‰ΩúÁöÑÔºåÂåÖÊã¨Ë°®ÁªìÊûÑ„ÄÅËßÜÂõæÂíåÁ¥¢Âºï„ÄÇ</li>
<li>Êï∞ÊçÆÂ∫ìÊü•ËØ¢ËØ≠Ë®ÄDQLÔºàData Query LanguageÔºâÔºö‰∏ªË¶Å‰ª•SELECT‰∏∫‰∏ª</li>
<li>Êï∞ÊçÆÊìçÁ∫µËØ≠Ë®ÄDMLÔºàData Manipulation LanguageÔºâÔºö‰∏ªË¶ÅÂåÖÊã¨INSERTÔºåUPDATEÔºåDELETE</li>
<li>Êï∞ÊçÆÊéßÂà∂ÂäüËÉΩDCLÔºàData Control LanguageÔºâÔºö‰∏ªË¶ÅÊòØÊùÉÈôêÊéßÂà∂ËÉΩÊìç‰ΩúÔºåÂåÖÊã¨GRANTÔºåREVOKEÔºåCOMMITÔºåROLLBACKÁ≠â„ÄÇ</li>
</ul>
<h3 id="SQLÁ∫¶ÊùüÊúâÂì™‰∫õÔºü"><a href="#SQLÁ∫¶ÊùüÊúâÂì™‰∫õÔºü" class="headerlink" title="SQLÁ∫¶ÊùüÊúâÂì™‰∫õÔºü"></a>SQLÁ∫¶ÊùüÊúâÂì™‰∫õÔºü</h3><ul>
<li>‰∏ªÈîÆÁ∫¶ÊùüÔºö‰∏ªÈîÆ‰∏∫Âú®Ë°®‰∏≠Â≠òÂú®‰∏ÄÂàóÊàñËÄÖÂ§öÂàóÁöÑÁªÑÂêàÔºåËÉΩÂîØ‰∏ÄÊ†áËØÜË°®‰∏≠ÁöÑÊØè‰∏ÄË°å„ÄÇ‰∏Ä‰∏™Ë°®Âè™Êúâ‰∏Ä‰∏™‰∏ªÈîÆÔºåÂπ∂‰∏î‰∏ªÈîÆÁ∫¶ÊùüÁöÑÂàó‰∏çËÉΩ‰∏∫Á©∫„ÄÇ</li>
<li>Â§ñÈîÆÁ∫¶ÊùüÔºöÂ§ñÈîÆÁ∫¶ÊùüÊòØÊåáÁî®‰∫éÂú®‰∏§‰∏™Ë°®‰πãÈó¥Âª∫Á´ãÂÖ≥Á≥ªÔºåÈúÄË¶ÅÊåáÂÆöÂºïÁî®‰∏ªË°®ÁöÑÂì™‰∏ÄÂàó„ÄÇÂè™Êúâ‰∏ªË°®ÁöÑ‰∏ªÈîÆÂèØ‰ª•Ë¢´‰ªéË°®Áî®‰ΩúÂ§ñÈîÆÔºåË¢´Á∫¶ÊùüÁöÑ‰ªéË°®ÁöÑÂàóÂèØ‰ª•‰∏çÊòØ‰∏ªÈîÆÔºåÊâÄ‰ª•ÂàõÂª∫Â§ñÈîÆÁ∫¶ÊùüÈúÄË¶ÅÂÖàÂÆö‰πâ‰∏ªË°®ÁöÑ‰∏ªÈîÆÔºåÁÑ∂ÂêéÂÆö‰πâ‰ªéË°®ÁöÑÂ§ñÈîÆ„ÄÇ</li>
<li>ÂîØ‰∏ÄÁ∫¶ÊùüÔºöÁ°Æ‰øùË°®‰∏≠ÁöÑ‰∏ÄÂàóÊï∞ÊçÆÊ≤°ÊúâÁõ∏ÂêåÁöÑÂÄºÔºå‰∏Ä‰∏™Ë°®ÂèØ‰ª•ÂÆö‰πâÂ§ö‰∏™ÂîØ‰∏ÄÁ∫¶Êùü„ÄÇ</li>
<li>ÈªòËÆ§Á∫¶ÊùüÔºöÂú®ÊèíÂÖ•Êñ∞Êï∞ÊçÆÊó∂ÔºåÂ¶ÇÊûúËØ•Ë°åÊ≤°ÊúâÊåáÂÆöÊï∞ÊçÆÔºåÁ≥ªÁªüÂ∞ÜÈªòËÆ§ÂÄºËµãÁªôËØ•Ë°åÔºåÂ¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆÊ≤°ÈªòËÆ§ÂÄºÔºåÂàô‰∏∫NULL„ÄÇ</li>
<li>CheckÁ∫¶ÊùüÔºöCheck‰ºöÈÄöËøáÈÄªËæëË°®ËææÂºèÊù•Âà§Êñ≠Êï∞ÊçÆÁöÑÊúâÊïàÊÄßÔºåÁî®Êù•ÈôêÂà∂ËæìÂÖ•‰∏ÄÂàóÊàñËÄÖÂ§öÂàóÁöÑÂÄºÁöÑËåÉÂõ¥„ÄÇÂú®ÂàóÊõ¥Êñ∞Êï∞ÊçÆÊó∂ÔºåËæìÂÖ•ÁöÑÂÜÖÂÆπÂøÖÈ°ªÊª°Ë∂≥CheckÁ∫¶ÊùüÁöÑÊù°‰ª∂„ÄÇ</li>
</ul>
<h3 id="‰ªÄ‰πàÊòØÂ≠êÊü•ËØ¢Ôºü"><a href="#‰ªÄ‰πàÊòØÂ≠êÊü•ËØ¢Ôºü" class="headerlink" title="‰ªÄ‰πàÊòØÂ≠êÊü•ËØ¢Ôºü"></a>‰ªÄ‰πàÊòØÂ≠êÊü•ËØ¢Ôºü</h3><p>Â≠êÊü•ËØ¢ÔºöÊää‰∏Ä‰∏™Êü•ËØ¢ÁöÑÁªìÊûúÂú®Âè¶‰∏Ä‰∏™Êü•ËØ¢‰∏≠‰ΩøÁî®</p>
<p>Â≠êÊü•ËØ¢ÂèØ‰ª•ÂàÜ‰∏∫‰ª•‰∏ãÂá†Á±ªÔºö</p>
<ul>
<li><p>Ê†áÈáèÂ≠êÊü•ËØ¢ÔºöÊåáÂ≠êÊü•ËØ¢ËøîÂõûÁöÑÊòØ‰∏Ä‰∏™ÂÄºÔºåÂèØ‰ª•‰ΩøÁî® =,&gt;,&lt;,&gt;=,&lt;=,&lt;&gt;Á≠âÊìç‰ΩúÁ¨¶ÂØπÂ≠êÊü•ËØ¢Ê†áÈáèÁªìÊûúËøõË°åÊØîËæÉÔºå‰∏ÄËà¨Â≠êÊü•ËØ¢‰ºöÊîæÂú®ÊØîËæÉÂºèÁöÑÂè≥‰æß„ÄÇ</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> age <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">max</span>(age) <span class="keyword">from</span> <span class="keyword">user</span>)  <span class="operator">/</span><span class="operator">/</span>Êü•ËØ¢Âπ¥Á∫™ÊúÄÂ§ßÁöÑ‰∫∫</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ÂàóÂ≠êÊü•ËØ¢ÔºöÊåáÂ≠êÊü•ËØ¢ÁöÑÁªìÊûúÊòØnË°å‰∏ÄÂàóÔºå‰∏ÄËà¨Â∫îÁî®‰∫éÂØπË°®ÁöÑÊüê‰∏™Â≠óÊÆµËøõË°åÊü•ËØ¢ËøîÂõû„ÄÇÂèØ‰ª•‰ΩøÁî®IN„ÄÅANY„ÄÅSOMEÂíåALLÁ≠âÊìç‰ΩúÁ¨¶Ôºå‰∏çËÉΩÁõ¥Êé•‰ΩøÁî®</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> num1 <span class="keyword">FROM</span> table1 <span class="keyword">WHERE</span> num1 <span class="operator">&gt;</span> <span class="keyword">ANY</span> (<span class="keyword">SELECT</span> num2 <span class="keyword">FROM</span> table2)</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>Ë°åÂ≠êÊü•ËØ¢ÔºöÊåáÂ≠êÊü•ËØ¢ËøîÂõûÁöÑÁªìÊûú‰∏ÄË°ånÂàó</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> (age,sex) <span class="operator">=</span> (<span class="keyword">SELECT</span> age,sex <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> name<span class="operator">=</span>"zhangsan")</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>Ë°®Â≠êÊü•ËØ¢ÔºöÊåáÂ≠êÊü•ËØ¢ÊòØnË°ånÂàóÁöÑ‰∏Ä‰∏™Êï∞ÊçÆË°®</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> (name,age,sex) <span class="keyword">IN</span> (<span class="keyword">SELECT</span> name,age,sex <span class="keyword">FROM</span> class1) <span class="operator">/</span><span class="operator">/</span>Âú®Â≠¶ÁîüË°®‰∏≠ÊâæÂà∞Áè≠Á∫ßÂú®<span class="number">1</span>Áè≠ÁöÑÂ≠¶Áîü</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h3 id="‰∫ÜËß£MySQLÁöÑÂá†ÁßçËøûÊé•Êü•ËØ¢ÂêóÔºü"><a href="#‰∫ÜËß£MySQLÁöÑÂá†ÁßçËøûÊé•Êü•ËØ¢ÂêóÔºü" class="headerlink" title="‰∫ÜËß£MySQLÁöÑÂá†ÁßçËøûÊé•Êü•ËØ¢ÂêóÔºü"></a>‰∫ÜËß£MySQLÁöÑÂá†ÁßçËøûÊé•Êü•ËØ¢ÂêóÔºü</h3><p>MySQlÁöÑËøûÊé•Êü•ËØ¢‰∏ªË¶ÅÂèØ‰ª•ÂàÜ‰∏∫Â§ñËøûÊé•ÔºåÂÜÖËøûÊé•Ôºå‰∫§ÂèâËøûÊé•</p>
<ul>
<li><p>Â§ñËøûÊé•</p>
<p>Â§ñËøûÊé•‰∏ªË¶ÅÂàÜ‰∏∫Â∑¶Â§ñËøûÊé•(LEFT JOIN)„ÄÅÂè≥Â§ñËøûÊé•(RIGHT JOIN)„ÄÅÂÖ®Â§ñËøûÊé•„ÄÇ</p>
<p>Â∑¶Â§ñËøûÊé•ÔºöÊòæÁ§∫Â∑¶Ë°®‰∏≠ÊâÄÊúâÁöÑÊï∞ÊçÆÂèäÂè≥Ë°®‰∏≠Á¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆÔºåÂè≥Ë°®‰∏≠‰∏çÁ¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆ‰∏∫null„ÄÇ</p>
</li>
</ul>
<p><img src="/p/ca035920/MySQL-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2(1).png" alt="ÂõæÁâá"></p>
<ul>
<li>Âè≥Â§ñËøûÊé•ÔºöÊòæÁ§∫Â∑¶Ë°®‰∏≠ÊâÄÊúâÁöÑÊï∞ÊçÆÂèäÂè≥Ë°®‰∏≠Á¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆÔºåÂè≥Ë°®‰∏≠‰∏çÁ¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆ‰∏∫null„ÄÇ</li>
</ul>
<p><img src="/p/ca035920/MySQL-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2(2).png" alt="ÂõæÁâá"></p>
<p>MySQL‰∏≠‰∏çÊîØÊåÅÂÖ®Â§ñËøûÊé•„ÄÇ</p>
<ul>
<li>ÂÜÖËøûÊé•ÔºöÂè™ÊòæÁ§∫Á¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆ</li>
</ul>
<p><img src="/p/ca035920/MySQL-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2(3).png" alt="ÂõæÁâá"></p>
<ul>
<li>‰∫§ÂèâËøûÊé•Ôºö‰ΩøÁî®Á¨õÂç°Â∞îÁßØÁöÑ‰∏ÄÁßçËøûÊé•„ÄÇ</li>
</ul>
<p>Á¨õÂç°Â∞îÁßØÔºåÁôæÂ∫¶ÁôæÁßëÁöÑËß£ÈáäÔºö‰∏§‰∏™ÈõÜÂêà<em>X</em>Âíå<em>Y</em>ÁöÑÁ¨õÂç°Â∞îÁßØË°®Á§∫‰∏∫<em>X</em> √ó <em>Y</em>ÔºåÁ¨¨‰∏Ä‰∏™ÂØπË±°ÊòØ<em>X</em>ÁöÑÊàêÂëòËÄåÁ¨¨‰∫å‰∏™ÂØπË±°ÊòØ<em>Y</em>ÁöÑÊâÄÊúâÂèØËÉΩÊúâÂ∫èÂØπÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™ÊàêÂëò „ÄÇ‰æãÂ¶ÇÔºöA={a,b}ÔºåB={0,1,2}ÔºåA √ó B = {(a,0)Ôºå(a,1)Ôºå(a,2)Ôºå(b,0)Ôºå(b,1)Ôºå(b,2)}</p>
<p>‰∏æ‰æãÂ¶Ç‰∏ãÔºöÊúâ‰∏§Âº†Ë°®ÂàÜ‰∏∫LË°®ÂíåRË°®„ÄÇ</p>
<p>LË°®</p>
<table>
<thead>
<tr>
<th align="center">A</th>
<th align="center">B</th>
</tr>
</thead>
<tbody><tr>
<td align="center">a1</td>
<td align="center">b1</td>
</tr>
<tr>
<td align="center">a2</td>
<td align="center">b2</td>
</tr>
<tr>
<td align="center">a3</td>
<td align="center">b3</td>
</tr>
</tbody></table>
<p>RË°®</p>
<table>
<thead>
<tr>
<th align="center">B</th>
<th align="center">C</th>
</tr>
</thead>
<tbody><tr>
<td align="center">b1</td>
<td align="center">c1</td>
</tr>
<tr>
<td align="center">b2</td>
<td align="center">c2</td>
</tr>
<tr>
<td align="center">b4</td>
<td align="center">c3</td>
</tr>
</tbody></table>
<ul>
<li><p>Â∑¶Â§ñËøûÊé• Ôºö<code>select L.</code><em><code>,R.</code></em><code> from L left join R on L.b=R.b</code></p>
<table>
<thead>
<tr>
<th align="center">A</th>
<th align="center">B</th>
<th align="center">B</th>
<th align="center">C</th>
</tr>
</thead>
<tbody><tr>
<td align="center">a1</td>
<td align="center">b1</td>
<td align="center">b1</td>
<td align="center">c1</td>
</tr>
<tr>
<td align="center">a2</td>
<td align="center">b2</td>
<td align="center">b2</td>
<td align="center">c2</td>
</tr>
<tr>
<td align="center">a3</td>
<td align="center">b3</td>
<td align="center">null</td>
<td align="center">null</td>
</tr>
</tbody></table>
</li>
<li><p>Âè≥Â§ñËøûÊé•Ôºö<code>select L.</code><em><code>,R.</code></em><code> from L right join R on L.b=R.b</code></p>
<table>
<thead>
<tr>
<th align="center">B</th>
<th align="center">C</th>
<th align="center">A</th>
<th align="center">B</th>
</tr>
</thead>
<tbody><tr>
<td align="center">b1</td>
<td align="center">c1</td>
<td align="center">a1</td>
<td align="center">b1</td>
</tr>
<tr>
<td align="center">b2</td>
<td align="center">c2</td>
<td align="center">a2</td>
<td align="center">b2</td>
</tr>
<tr>
<td align="center">b4</td>
<td align="center">c3</td>
<td align="center">null</td>
<td align="center">null</td>
</tr>
</tbody></table>
</li>
<li><p>ÂÜÖËøûÊé•Ôºö<code>select L.</code><em><code>,R.</code></em><code> from L inner join R on L.b=R.b</code></p>
<table>
<thead>
<tr>
<th align="center">A</th>
<th align="center">B</th>
<th align="center">B</th>
<th align="center">C</th>
</tr>
</thead>
<tbody><tr>
<td align="center">a1</td>
<td align="center">b1</td>
<td align="center">b1</td>
<td align="center">c1</td>
</tr>
<tr>
<td align="center">a2</td>
<td align="center">b2</td>
<td align="center">b2</td>
<td align="center">c2</td>
</tr>
</tbody></table>
</li>
<li><p>‰∫§ÂèâËøûÊé•Ôºö<code>select L.</code><em><code>,R.</code></em><code> from L,R</code></p>
<table>
<thead>
<tr>
<th align="center">A</th>
<th align="center">B</th>
<th align="center">B</th>
<th align="center">C</th>
</tr>
</thead>
<tbody><tr>
<td align="center">a1</td>
<td align="center">b1</td>
<td align="center">b1</td>
<td align="center">c1</td>
</tr>
<tr>
<td align="center">a1</td>
<td align="center">b1</td>
<td align="center">b2</td>
<td align="center">c2</td>
</tr>
<tr>
<td align="center">a1</td>
<td align="center">b1</td>
<td align="center">b4</td>
<td align="center">c3</td>
</tr>
<tr>
<td align="center">a2</td>
<td align="center">b2</td>
<td align="center">b1</td>
<td align="center">c1</td>
</tr>
<tr>
<td align="center">a2</td>
<td align="center">b2</td>
<td align="center">b2</td>
<td align="center">c2</td>
</tr>
<tr>
<td align="center">a2</td>
<td align="center">b2</td>
<td align="center">b4</td>
<td align="center">c3</td>
</tr>
<tr>
<td align="center">a3</td>
<td align="center">b3</td>
<td align="center">b1</td>
<td align="center">c1</td>
</tr>
<tr>
<td align="center">a3</td>
<td align="center">b3</td>
<td align="center">b2</td>
<td align="center">c2</td>
</tr>
<tr>
<td align="center">a3</td>
<td align="center">b3</td>
<td align="center">b4</td>
<td align="center">c3</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="mysql‰∏≠inÂíåexistsÁöÑÂå∫Âà´Ôºü"><a href="#mysql‰∏≠inÂíåexistsÁöÑÂå∫Âà´Ôºü" class="headerlink" title="mysql‰∏≠inÂíåexistsÁöÑÂå∫Âà´Ôºü"></a>mysql‰∏≠inÂíåexistsÁöÑÂå∫Âà´Ôºü</h3><p>inÂíåexists‰∏ÄËà¨Áî®‰∫éÂ≠êÊü•ËØ¢„ÄÇ</p>
<ul>
<li>‰ΩøÁî®existsÊó∂‰ºöÂÖàËøõË°åÂ§ñË°®Êü•ËØ¢ÔºåÂ∞ÜÊü•ËØ¢Âà∞ÁöÑÊØèË°åÊï∞ÊçÆÂ∏¶ÂÖ•Âà∞ÂÜÖË°®Êü•ËØ¢‰∏≠ÁúãÊòØÂê¶Êª°Ë∂≥Êù°‰ª∂Ôºõ‰ΩøÁî®in‰∏ÄËà¨‰ºöÂÖàËøõË°åÂÜÖË°®Êü•ËØ¢Ëé∑ÂèñÁªìÊûúÈõÜÔºåÁÑ∂ÂêéÂØπÂ§ñË°®Êü•ËØ¢ÂåπÈÖçÁªìÊûúÈõÜÔºåËøîÂõûÊï∞ÊçÆ„ÄÇ</li>
<li>inÂú®ÂÜÖË°®Êü•ËØ¢ÊàñËÄÖÂ§ñË°®Êü•ËØ¢ËøáÁ®ã‰∏≠ÈÉΩ‰ºöÁî®Âà∞Á¥¢Âºï„ÄÇ</li>
<li>exists‰ªÖÂú®ÂÜÖË°®Êü•ËØ¢Êó∂‰ºöÁî®Âà∞Á¥¢Âºï</li>
<li>‰∏ÄËà¨Êù•ËØ¥ÔºåÂΩìÂ≠êÊü•ËØ¢ÁöÑÁªìÊûúÈõÜÊØîËæÉÂ§ßÔºåÂ§ñË°®ËæÉÂ∞è‰ΩøÁî®existÊïàÁéáÊõ¥È´òÔºõÂΩìÂ≠êÊü•ËØ¢ÂØªÂæóÁªìÊûúÈõÜËæÉÂ∞èÔºåÂ§ñË°®ËæÉÂ§ßÊó∂Ôºå‰ΩøÁî®inÊïàÁéáÊõ¥È´ò„ÄÇ</li>
<li>ÂØπ‰∫énot inÂíånot existsÔºånot existsÊïàÁéáÊØînot inÁöÑÊïàÁéáÈ´òÔºå‰∏éÂ≠êÊü•ËØ¢ÁöÑÁªìÊûúÈõÜÊó†ÂÖ≥ÔºåÂõ†‰∏∫not inÂØπ‰∫éÂÜÖÂ§ñË°®ÈÉΩËøõË°å‰∫ÜÂÖ®Ë°®Êâ´ÊèèÔºåÊ≤°Êúâ‰ΩøÁî®Âà∞Á¥¢Âºï„ÄÇnot existsÁöÑÂ≠êÊü•ËØ¢‰∏≠ÂèØ‰ª•Áî®Âà∞Ë°®‰∏äÁöÑÁ¥¢Âºï„ÄÇ</li>
</ul>
<h3 id="varcharÂíåcharÁöÑÂå∫Âà´Ôºü"><a href="#varcharÂíåcharÁöÑÂå∫Âà´Ôºü" class="headerlink" title="varcharÂíåcharÁöÑÂå∫Âà´Ôºü"></a>varcharÂíåcharÁöÑÂå∫Âà´Ôºü</h3><ul>
<li>varcharË°®Á§∫ÂèòÈïøÔºåcharË°®Á§∫ÈïøÂ∫¶Âõ∫ÂÆö„ÄÇÂΩìÊâÄÊèíÂÖ•ÁöÑÂ≠óÁ¨¶Ë∂ÖËøá‰ªñ‰ª¨ÁöÑÈïøÂ∫¶Êó∂ÔºåÂú®‰∏•Ê†ºÊ®°Âºè‰∏ãÔºå‰ºöÊãíÁªùÊèíÂÖ•Âπ∂ÊèêÁ§∫ÈîôËØØ‰ø°ÊÅØÔºåÂú®‰∏ÄËà¨Ê®°Âºè‰∏ãÔºå‰ºöÊà™ÂèñÂêéÊèíÂÖ•„ÄÇÂ¶Çchar(5)ÔºåÊó†ËÆ∫ÊèíÂÖ•ÁöÑÂ≠óÁ¨¶ÈïøÂ∫¶ÊòØÂ§öÂ∞ëÔºåÈïøÂ∫¶ÈÉΩÊòØ5ÔºåÊèíÂÖ•Â≠óÁ¨¶ÈïøÂ∫¶Â∞è‰∫é5ÔºåÂàôÁî®Á©∫Ê†ºË°•ÂÖÖ„ÄÇÂØπ‰∫évarchar(5)ÔºåÂ¶ÇÊûúÊèíÂÖ•ÁöÑÂ≠óÁ¨¶ÈïøÂ∫¶Â∞è‰∫é5ÔºåÂàôÂ≠òÂÇ®ÁöÑÂ≠óÁ¨¶ÈïøÂ∫¶Â∞±ÊòØÊèíÂÖ•Â≠óÁ¨¶ÁöÑÈïøÂ∫¶Ôºå‰∏ç‰ºöÂ°´ÂÖÖ„ÄÇ</li>
<li>Â≠òÂÇ®ÂÆπÈáè‰∏çÂêåÔºåÂØπ‰∫écharÊù•ËØ¥ÔºåÊúÄÂ§öËÉΩÂ≠òÊîæÁöÑÂ≠óÁ¨¶‰∏™Êï∞‰∏∫255„ÄÇÂØπ‰∫évarcharÔºåÊúÄÂ§öËÉΩÂ≠òÊîæÁöÑÂ≠óÁ¨¶‰∏™Êï∞ÊòØ65532„ÄÇ</li>
<li>Â≠òÂÇ®ÈÄüÂ∫¶‰∏çÂêåÔºåcharÈïøÂ∫¶Âõ∫ÂÆöÔºåÂ≠òÂÇ®ÈÄüÂ∫¶‰ºöÊØîvarcharÂø´‰∏Ä‰∫õÔºå‰ΩÜÂú®Á©∫Èó¥‰∏ä‰ºöÂç†Áî®È¢ùÂ§ñÁöÑÁ©∫Èó¥ÔºåÂ±û‰∫é‰∏ÄÁßçÁ©∫Èó¥Êç¢Êó∂Èó¥ÁöÑÁ≠ñÁï•„ÄÇËÄåvarcharÁ©∫Èó¥Âà©Áî®Áéá‰ºöÈ´ò‰∫õÔºå‰ΩÜÂ≠òÂÇ®ÈÄüÂ∫¶ÊÖ¢ÔºåÂ±û‰∫é‰∏ÄÁßçÊó∂Èó¥Êç¢Á©∫Èó¥ÁöÑÁ≠ñÁï•„ÄÇ</li>
</ul>
<h3 id="MySQL‰∏≠int-10-Âíåchar-10-Âíåvarchar-10-ÁöÑÂå∫Âà´Ôºü"><a href="#MySQL‰∏≠int-10-Âíåchar-10-Âíåvarchar-10-ÁöÑÂå∫Âà´Ôºü" class="headerlink" title="MySQL‰∏≠int(10)Âíåchar(10)Âíåvarchar(10)ÁöÑÂå∫Âà´Ôºü"></a>MySQL‰∏≠int(10)Âíåchar(10)Âíåvarchar(10)ÁöÑÂå∫Âà´Ôºü</h3><p>int(10)‰∏≠ÁöÑ10Ë°®Á§∫ÁöÑÊòØÊòæÁ§∫Êï∞ÊçÆÁöÑÈïøÂ∫¶ÔºåËÄåchar(10)Âíåvarchar(10)Ë°®Á§∫ÁöÑÊòØÂ≠òÂÇ®Êï∞ÊçÆÁöÑÂ§ßÂ∞è„ÄÇ</p>
<h3 id="drop„ÄÅdeleteÂíåtruncateÁöÑÂå∫Âà´Ôºü"><a href="#drop„ÄÅdeleteÂíåtruncateÁöÑÂå∫Âà´Ôºü" class="headerlink" title="drop„ÄÅdeleteÂíåtruncateÁöÑÂå∫Âà´Ôºü"></a>drop„ÄÅdeleteÂíåtruncateÁöÑÂå∫Âà´Ôºü</h3><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">drop</th>
<th align="center">delete</th>
<th align="center">truncate</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ÈÄüÂ∫¶</td>
<td align="center">Âø´</td>
<td align="center">ÈÄêË°åÂà†Èô§ÔºåÊÖ¢</td>
<td align="center">ËæÉÂø´</td>
</tr>
<tr>
<td align="center">Á±ªÂûã</td>
<td align="center">DDL</td>
<td align="center">DML</td>
<td align="center">DDL</td>
</tr>
<tr>
<td align="center">ÂõûÊªö</td>
<td align="center">‰∏çÂèØÂõûÊªö</td>
<td align="center">ÂèØÂõûÊªö</td>
<td align="center">‰∏çÂèØÂõûÊªö</td>
</tr>
<tr>
<td align="center">Âà†Èô§ÂÜÖÂÆπ</td>
<td align="center">Âà†Èô§Êï¥‰∏™Ë°®ÔºåÊï∞ÊçÆË°å„ÄÅÁ¥¢ÂºïÈÉΩ‰ºöË¢´Âà†Èô§</td>
<td align="center">Ë°®ÁªìÊûÑËøòÂú®ÔºåÂà†Èô§Ë°®ÁöÑ‰∏ÄÈÉ®ÂàÜÊàñÂÖ®ÈÉ®Êï∞ÊçÆ</td>
<td align="center">Ë°®ÁªìÊûÑËøòÂú®ÔºåÂà†Èô§Ë°®ÁöÑÂÖ®ÈÉ®Êï∞ÊçÆ</td>
</tr>
</tbody></table>
<p>‰∏ÄËà¨Êù•ËÆ≤ÔºåÂà†Èô§Êï¥‰∏™Ë°®Ôºå‰ΩøÁî®dropÔºåÂà†Èô§Ë°®ÁöÑÈÉ®ÂàÜÊï∞ÊçÆ‰ΩøÁî®deleteÔºå‰øùÁïôË°®ÁªìÊûÑÂà†Èô§Ë°®ÁöÑÂÖ®ÈÉ®Êï∞ÊçÆ‰ΩøÁî®truncate„ÄÇ</p>
<h3 id="UNIONÂíåUNION-ALLÁöÑÂå∫Âà´Ôºü"><a href="#UNIONÂíåUNION-ALLÁöÑÂå∫Âà´Ôºü" class="headerlink" title="UNIONÂíåUNION ALLÁöÑÂå∫Âà´Ôºü"></a>UNIONÂíåUNION ALLÁöÑÂå∫Âà´Ôºü</h3><p>unionÂíåunion allÁöÑ‰ΩúÁî®ÈÉΩÊòØÂ∞Ü‰∏§‰∏™ÁªìÊûúÈõÜÂêàÂπ∂Âà∞‰∏ÄËµ∑„ÄÇ</p>
<ul>
<li>union‰ºöÂØπÁªìÊûúÂéªÈáçÂπ∂ÊéíÂ∫èÔºåunion allÁõ¥Êé•Áõ¥Êé•ËøîÂõûÂêàÂπ∂ÂêéÁöÑÁªìÊûúÔºå‰∏çÂéªÈáç‰πü‰∏çËøõË°åÊéíÂ∫è„ÄÇ</li>
<li>union allÁöÑÊÄßËÉΩÊØîunionÊÄßËÉΩÂ•Ω„ÄÇ</li>
</ul>
<h3 id="‰ªÄ‰πàÊòØ‰∏¥Êó∂Ë°®Ôºå‰ªÄ‰πàÊó∂ÂÄô‰ºö‰ΩøÁî®Âà∞‰∏¥Êó∂Ë°®Ôºå‰ªÄ‰πàÊó∂ÂÄôÂà†Èô§‰∏¥Êó∂Ë°®Ôºü"><a href="#‰ªÄ‰πàÊòØ‰∏¥Êó∂Ë°®Ôºå‰ªÄ‰πàÊó∂ÂÄô‰ºö‰ΩøÁî®Âà∞‰∏¥Êó∂Ë°®Ôºå‰ªÄ‰πàÊó∂ÂÄôÂà†Èô§‰∏¥Êó∂Ë°®Ôºü" class="headerlink" title="‰ªÄ‰πàÊòØ‰∏¥Êó∂Ë°®Ôºå‰ªÄ‰πàÊó∂ÂÄô‰ºö‰ΩøÁî®Âà∞‰∏¥Êó∂Ë°®Ôºå‰ªÄ‰πàÊó∂ÂÄôÂà†Èô§‰∏¥Êó∂Ë°®Ôºü"></a>‰ªÄ‰πàÊòØ‰∏¥Êó∂Ë°®Ôºå‰ªÄ‰πàÊó∂ÂÄô‰ºö‰ΩøÁî®Âà∞‰∏¥Êó∂Ë°®Ôºå‰ªÄ‰πàÊó∂ÂÄôÂà†Èô§‰∏¥Êó∂Ë°®Ôºü</h3><p>MySQLÂú®ÊâßË°åSQLËØ≠Âè•ÁöÑÊó∂ÂÄô‰ºö‰∏¥Êó∂ÂàõÂª∫‰∏Ä‰∫õÂ≠òÂÇ®‰∏≠Èó¥ÁªìÊûúÈõÜÁöÑË°®ÔºåËøôÁßçË°®Ë¢´Áß∞‰∏∫‰∏¥Êó∂Ë°®Ôºå‰∏¥Êó∂Ë°®Âè™ÂØπÂΩìÂâçËøûÊé•ÂèØËßÅÔºåÂú®ËøûÊé•ÂÖ≥Èó≠ÂêéÔºå‰∏¥Êó∂Ë°®‰ºöË¢´Âà†Èô§Âπ∂ÈáäÊîæÁ©∫Èó¥„ÄÇ</p>
<p>‰∏¥Êó∂Ë°®‰∏ªË¶ÅÂàÜ‰∏∫ÂÜÖÂ≠ò‰∏¥Êó∂Ë°®ÂíåÁ£ÅÁõò‰∏¥Êó∂Ë°®‰∏§Áßç„ÄÇÂÜÖÂ≠ò‰∏¥Êó∂Ë°®‰ΩøÁî®ÁöÑÊòØMEMORYÂ≠òÂÇ®ÂºïÊìéÔºåÁ£ÅÁõò‰∏¥Êó∂Ë°®‰ΩøÁî®ÁöÑÊòØMyISAMÂ≠òÂÇ®ÂºïÊìé„ÄÇ</p>
<p>‰∏ÄËà¨Âú®‰ª•‰∏ãÂá†ÁßçÊÉÖÂÜµ‰∏≠‰ºö‰ΩøÁî®Âà∞‰∏¥Êó∂Ë°®Ôºö</p>
<ul>
<li>FROM‰∏≠ÁöÑÂ≠êÊü•ËØ¢</li>
<li>DISTINCTÊü•ËØ¢Âπ∂Âä†‰∏äORDER BY</li>
<li>ORDER BYÂíåGROUP BYÁöÑÂ≠êÂè•‰∏ç‰∏ÄÊ†∑Êó∂‰ºö‰∫ßÁîü‰∏¥Êó∂Ë°®</li>
<li>‰ΩøÁî®UNIONÊü•ËØ¢‰ºö‰∫ßÁîü‰∏¥Êó∂Ë°®</li>
</ul>
<h3 id="Â§ßË°®Êï∞ÊçÆÊü•ËØ¢Â¶Ç‰ΩïËøõË°å‰ºòÂåñÔºü"><a href="#Â§ßË°®Êï∞ÊçÆÊü•ËØ¢Â¶Ç‰ΩïËøõË°å‰ºòÂåñÔºü" class="headerlink" title="Â§ßË°®Êï∞ÊçÆÊü•ËØ¢Â¶Ç‰ΩïËøõË°å‰ºòÂåñÔºü"></a>Â§ßË°®Êï∞ÊçÆÊü•ËØ¢Â¶Ç‰ΩïËøõË°å‰ºòÂåñÔºü</h3><ul>
<li>Á¥¢Âºï‰ºòÂåñ</li>
<li>SQLËØ≠Âè•‰ºòÂåñ</li>
<li>Ê∞¥Âπ≥ÊãÜÂàÜ</li>
<li>ÂûÇÁõ¥ÊãÜÂàÜ</li>
<li>Âª∫Á´ã‰∏≠Èó¥Ë°®</li>
<li>‰ΩøÁî®ÁºìÂ≠òÊäÄÊúØ</li>
<li>Âõ∫ÂÆöÈïøÂ∫¶ÁöÑË°®ËÆøÈóÆËµ∑Êù•Êõ¥Âø´</li>
<li>Ë∂äÂ∞èÁöÑÂàóËÆøÈóÆË∂äÂø´</li>
</ul>
<h3 id="‰∫ÜËß£ÊÖ¢Êó•ÂøóÊü•ËØ¢ÂêóÔºüÁªüËÆ°ËøáÊÖ¢Êü•ËØ¢ÂêóÔºüÂØπÊÖ¢Êü•ËØ¢Â¶Ç‰Ωï‰ºòÂåñÔºü"><a href="#‰∫ÜËß£ÊÖ¢Êó•ÂøóÊü•ËØ¢ÂêóÔºüÁªüËÆ°ËøáÊÖ¢Êü•ËØ¢ÂêóÔºüÂØπÊÖ¢Êü•ËØ¢Â¶Ç‰Ωï‰ºòÂåñÔºü" class="headerlink" title="‰∫ÜËß£ÊÖ¢Êó•ÂøóÊü•ËØ¢ÂêóÔºüÁªüËÆ°ËøáÊÖ¢Êü•ËØ¢ÂêóÔºüÂØπÊÖ¢Êü•ËØ¢Â¶Ç‰Ωï‰ºòÂåñÔºü"></a>‰∫ÜËß£ÊÖ¢Êó•ÂøóÊü•ËØ¢ÂêóÔºüÁªüËÆ°ËøáÊÖ¢Êü•ËØ¢ÂêóÔºüÂØπÊÖ¢Êü•ËØ¢Â¶Ç‰Ωï‰ºòÂåñÔºü</h3><p>ÊÖ¢Êü•ËØ¢‰∏ÄËà¨Áî®‰∫éËÆ∞ÂΩïÊâßË°åÊó∂Èó¥Ë∂ÖËøáÊüê‰∏™‰∏¥ÁïåÂÄºÁöÑSQLËØ≠Âè•ÁöÑÊó•Âøó„ÄÇ</p>
<p>Áõ∏ÂÖ≥ÂèÇÊï∞Ôºö</p>
<ul>
<li><p>slow_query_logÔºöÊòØÂê¶ÂºÄÂêØÊÖ¢Êó•ÂøóÊü•ËØ¢Ôºå1Ë°®Á§∫ÂºÄÂêØÔºå0Ë°®Á§∫ÂÖ≥Èó≠„ÄÇ</p>
</li>
<li><p>slow_query_log_fileÔºöMySQLÊï∞ÊçÆÂ∫ìÊÖ¢Êü•ËØ¢Êó•ÂøóÂ≠òÂÇ®Ë∑ØÂæÑ„ÄÇ</p>
</li>
<li><p>long_query_timeÔºöÊÖ¢Êü•ËØ¢ÈòàÂÄºÔºåÂΩìSQLËØ≠Âè•Êü•ËØ¢Êó∂Èó¥Â§ß‰∫éÈòàÂÄºÔºå‰ºöË¢´ËÆ∞ÂΩïÂú®Êó•Âøó‰∏ä„ÄÇ</p>
</li>
<li><p>log_queries_not_using_indexesÔºöÊú™‰ΩøÁî®Á¥¢ÂºïÁöÑÊü•ËØ¢‰ºöË¢´ËÆ∞ÂΩïÂà∞ÊÖ¢Êü•ËØ¢Êó•Âøó‰∏≠„ÄÇ</p>
</li>
<li><p>log_outputÔºöÊó•ÂøóÂ≠òÂÇ®ÊñπÂºè„ÄÇ‚ÄúFILE‚ÄùË°®Á§∫Â∞ÜÊó•ÂøóÂ≠òÂÖ•Êñá‰ª∂„ÄÇ‚ÄúTABLE‚ÄùË°®Á§∫Â∞ÜÊó•ÂøóÂ≠òÂÖ•Êï∞ÊçÆÂ∫ì„ÄÇ</p>
</li>
<li><p>slow_query_logÔºöÊòØÂê¶ÂºÄÂêØÊÖ¢Êó•ÂøóÊü•ËØ¢Ôºå1Ë°®Á§∫ÂºÄÂêØÔºå0Ë°®Á§∫ÂÖ≥Èó≠„ÄÇ</p>
</li>
<li><p>slow_query_log_fileÔºöMySQLÊï∞ÊçÆÂ∫ìÊÖ¢Êü•ËØ¢Êó•ÂøóÂ≠òÂÇ®Ë∑ØÂæÑ„ÄÇ</p>
</li>
<li><p>long_query_timeÔºöÊÖ¢Êü•ËØ¢ÈòàÂÄºÔºåÂΩìSQLËØ≠Âè•Êü•ËØ¢Êó∂Èó¥Â§ß‰∫éÈòàÂÄºÔºå‰ºöË¢´ËÆ∞ÂΩïÂú®Êó•Âøó‰∏ä„ÄÇ</p>
</li>
<li><p>log_queries_not_using_indexesÔºöÊú™‰ΩøÁî®Á¥¢ÂºïÁöÑÊü•ËØ¢‰ºöË¢´ËÆ∞ÂΩïÂà∞ÊÖ¢Êü•ËØ¢Êó•Âøó‰∏≠„ÄÇ</p>
</li>
<li><p>log_outputÔºöÊó•ÂøóÂ≠òÂÇ®ÊñπÂºè„ÄÇ‚ÄúFILE‚ÄùË°®Á§∫Â∞ÜÊó•ÂøóÂ≠òÂÖ•Êñá‰ª∂„ÄÇ‚ÄúTABLE‚ÄùË°®Á§∫Â∞ÜÊó•ÂøóÂ≠òÂÖ•Êï∞ÊçÆÂ∫ì„ÄÇ</p>
</li>
</ul>
<p>Â¶Ç‰ΩïÂØπÊÖ¢Êü•ËØ¢ËøõË°å‰ºòÂåñÔºü</p>
<ul>
<li>ÂàÜÊûêËØ≠Âè•ÁöÑÊâßË°åËÆ°ÂàíÔºåÊü•ÁúãSQLËØ≠Âè•ÁöÑÁ¥¢ÂºïÊòØÂê¶ÂëΩ‰∏≠</li>
<li>‰ºòÂåñÊï∞ÊçÆÂ∫ìÁöÑÁªìÊûÑÔºåÂ∞ÜÂ≠óÊÆµÂæàÂ§öÁöÑË°®ÂàÜËß£ÊàêÂ§ö‰∏™Ë°®ÔºåÊàñËÄÖËÄÉËôëÂª∫Á´ã‰∏≠Èó¥Ë°®„ÄÇ</li>
<li>‰ºòÂåñLIMITÂàÜÈ°µ„ÄÇ</li>
</ul>
<h3 id="‰∏∫‰ªÄ‰πàË¶ÅËÆæÁΩÆ‰∏ªÈîÆÔºü"><a href="#‰∏∫‰ªÄ‰πàË¶ÅËÆæÁΩÆ‰∏ªÈîÆÔºü" class="headerlink" title="‰∏∫‰ªÄ‰πàË¶ÅËÆæÁΩÆ‰∏ªÈîÆÔºü"></a>‰∏∫‰ªÄ‰πàË¶ÅËÆæÁΩÆ‰∏ªÈîÆÔºü</h3><p>‰∏ªÈîÆÊòØÂîØ‰∏ÄÂå∫ÂàÜË°®‰∏≠ÊØè‰∏ÄË°åÁöÑÂîØ‰∏ÄÊ†áËØÜÔºåÂ¶ÇÊûúÊ≤°Êúâ‰∏ªÈîÆÔºåÊõ¥Êñ∞ÊàñËÄÖÂà†Èô§Ë°®‰∏≠ÁâπÂÆöÁöÑË°å‰ºöÂæàÂõ∞ÈöæÔºåÂõ†‰∏∫‰∏çËÉΩÂîØ‰∏ÄÂáÜÁ°ÆÂú∞Ê†áËØÜÊüê‰∏ÄË°å„ÄÇ</p>
<h3 id="‰∏ªÈîÆ‰∏ÄËà¨Áî®Ëá™Â¢ûIDËøòÊòØUUIDÔºü"><a href="#‰∏ªÈîÆ‰∏ÄËà¨Áî®Ëá™Â¢ûIDËøòÊòØUUIDÔºü" class="headerlink" title="‰∏ªÈîÆ‰∏ÄËà¨Áî®Ëá™Â¢ûIDËøòÊòØUUIDÔºü"></a>‰∏ªÈîÆ‰∏ÄËà¨Áî®Ëá™Â¢ûIDËøòÊòØUUIDÔºü</h3><p>‰ΩøÁî®Ëá™Â¢ûIDÁöÑÂ•ΩÂ§ÑÔºö</p>
<ul>
<li>Â≠óÊÆµÈïøÂ∫¶ËæÉuuid‰ºöÂ∞èÂæàÂ§ö„ÄÇ</li>
<li>Êï∞ÊçÆÂ∫ìËá™Âä®ÁºñÂè∑ÔºåÊåâÈ°∫Â∫èÂ≠òÊîæÔºåÂà©‰∫éÊ£ÄÁ¥¢</li>
<li>Êó†ÈúÄÊãÖÂøÉ‰∏ªÈîÆÈáçÂ§çÈóÆÈ¢ò</li>
</ul>
<p>‰ΩøÁî®Ëá™Â¢ûIDÁöÑÁº∫ÁÇπÔºö</p>
<ul>
<li>Âõ†‰∏∫ÊòØËá™Â¢ûÔºåÂú®Êüê‰∫õ‰∏öÂä°Âú∫ÊôØ‰∏ãÔºåÂÆπÊòìË¢´ÂÖ∂‰ªñ‰∫∫Êü•Âà∞‰∏öÂä°Èáè„ÄÇ</li>
<li>ÂèëÁîüÊï∞ÊçÆËøÅÁßªÊó∂ÔºåÊàñËÄÖË°®ÂêàÂπ∂Êó∂‰ºöÈùûÂ∏∏È∫ªÁÉ¶</li>
<li>Âú®È´òÂπ∂ÂèëÁöÑÂú∫ÊôØ‰∏ãÔºåÁ´û‰∫âËá™Â¢ûÈîÅ‰ºöÈôç‰ΩéÊï∞ÊçÆÂ∫ìÁöÑÂêûÂêêËÉΩÂäõ</li>
</ul>
<p>UUIDÔºöÈÄöÁî®ÂîØ‰∏ÄÊ†áËØÜÁ†ÅÔºåUUIDÊòØÂü∫‰∫éÂΩìÂâçÊó∂Èó¥„ÄÅËÆ°Êï∞Âô®ÂíåÁ°¨‰ª∂Ê†áËØÜÁ≠âÊï∞ÊçÆËÆ°ÁÆóÁîüÊàêÁöÑ„ÄÇ</p>
<p>‰ΩøÁî®UUIDÁöÑ‰ºòÁÇπÔºö</p>
<ul>
<li>ÂîØ‰∏ÄÊ†áËØÜÔºå‰∏ç‰ºöËÄÉËôëÈáçÂ§çÈóÆÈ¢òÔºåÂú®Êï∞ÊçÆÊãÜÂàÜ„ÄÅÂêàÂπ∂Êó∂‰πüËÉΩËææÂà∞ÂÖ®Â±ÄÁöÑÂîØ‰∏ÄÊÄß„ÄÇ</li>
<li>ÂèØ‰ª•Âú®Â∫îÁî®Â±ÇÁîüÊàêÔºåÊèêÈ´òÊï∞ÊçÆÂ∫ìÁöÑÂêûÂêêËÉΩÂäõ„ÄÇ</li>
<li>Êó†ÈúÄÊãÖÂøÉ‰∏öÂä°ÈáèÊ≥ÑÈú≤ÁöÑÈóÆÈ¢ò„ÄÇ</li>
</ul>
<p>‰ΩøÁî®UUIDÁöÑÁº∫ÁÇπÔºö</p>
<ul>
<li>Âõ†‰∏∫UUIDÊòØÈöèÊú∫ÁîüÊàêÁöÑÔºåÊâÄ‰ª•‰ºöÂèëÁîüÈöèÊú∫IOÔºåÂΩ±ÂìçÊèíÂÖ•ÈÄüÂ∫¶ÔºåÂπ∂‰∏î‰ºöÈÄ†ÊàêÁ°¨ÁõòÁöÑ‰ΩøÁî®ÁéáËæÉ‰Ωé„ÄÇ</li>
<li>UUIDÂç†Áî®Á©∫Èó¥ËæÉÂ§ßÔºåÂª∫Á´ãÁöÑÁ¥¢ÂºïË∂äÂ§öÔºåÈÄ†ÊàêÁöÑÂΩ±ÂìçË∂äÂ§ß„ÄÇ</li>
<li>UUID‰πãÈó¥ÊØîËæÉÂ§ßÂ∞èËæÉËá™Â¢ûIDÊÖ¢‰∏çÂ∞ëÔºåÂΩ±ÂìçÊü•ËØ¢ÈÄüÂ∫¶„ÄÇ</li>
</ul>
<p>ÊúÄÂêéËØ¥‰∏ãÁªìËÆ∫Ôºå‰∏ÄËà¨ÊÉÖÂÜµMySQLÊé®Ëçê‰ΩøÁî®Ëá™Â¢ûID„ÄÇÂõ†‰∏∫Âú®MySQLÁöÑInnoDBÂ≠òÂÇ®ÂºïÊìé‰∏≠Ôºå‰∏ªÈîÆÁ¥¢ÂºïÊòØ‰∏ÄÁßçËÅöÁ∞áÁ¥¢ÂºïÔºå‰∏ªÈîÆÁ¥¢ÂºïÁöÑB+Ê†ëÁöÑÂè∂Â≠êËäÇÁÇπÊåâÁÖßÈ°∫Â∫èÂ≠òÂÇ®‰∫Ü‰∏ªÈîÆÂÄºÂèäÊï∞ÊçÆÔºåÂ¶ÇÊûú‰∏ªÈîÆÁ¥¢ÂºïÊòØËá™Â¢ûIDÔºåÂè™ÈúÄË¶ÅÊåâÈ°∫Â∫èÂæÄÂêéÊéíÂàóÂç≥ÂèØÔºåÂ¶ÇÊûúÊòØUUIDÔºåIDÊòØÈöèÊú∫ÁîüÊàêÁöÑÔºåÂú®Êï∞ÊçÆÊèíÂÖ•Êó∂‰ºöÈÄ†ÊàêÂ§ßÈáèÁöÑÊï∞ÊçÆÁßªÂä®Ôºå‰∫ßÁîüÂ§ßÈáèÁöÑÂÜÖÂ≠òÁ¢éÁâáÔºåÈÄ†ÊàêÊèíÂÖ•ÊÄßËÉΩÁöÑ‰∏ãÈôç„ÄÇ</p>
<h3 id="Â≠óÊÆµ‰∏∫‰ªÄ‰πàË¶ÅËÆæÁΩÆÊàênot-null"><a href="#Â≠óÊÆµ‰∏∫‰ªÄ‰πàË¶ÅËÆæÁΩÆÊàênot-null" class="headerlink" title="Â≠óÊÆµ‰∏∫‰ªÄ‰πàË¶ÅËÆæÁΩÆÊàênot null?"></a>Â≠óÊÆµ‰∏∫‰ªÄ‰πàË¶ÅËÆæÁΩÆÊàênot null?</h3><p>È¶ñÂÖàËØ¥‰∏ÄÁÇπÔºåNULLÂíåÁ©∫ÂÄºÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºåÁ©∫ÂÄºÊòØ‰∏çÂç†Áî®Á©∫Èó¥ÁöÑÔºåËÄåNULLÊòØÂç†Áî®Á©∫Èó¥ÁöÑÔºåÊâÄ‰ª•Â≠óÊÆµËÆæ‰∏∫NOT NULLÂêé‰ªçÁÑ∂ÂèØ‰ª•ÊèíÂÖ•Á©∫ÂÄº„ÄÇ</p>
<p>Â≠óÊÆµËÆæÁΩÆÊàênot null‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂá†ÁÇπÂéüÂõ†Ôºö</p>
<ul>
<li><p>NULLÂÄº‰ºöÂΩ±Âìç‰∏Ä‰∫õÂáΩÊï∞ÁöÑÁªüËÆ°ÔºåÂ¶ÇcountÔºåÈÅáÂà∞NULLÂÄºÔºåËøôÊù°ËÆ∞ÂΩï‰∏ç‰ºöÁªüËÆ°Âú®ÂÜÖ„ÄÇ</p>
</li>
<li><p>BÊ†ë‰∏çÂ≠òÂÇ®NULLÔºåÊâÄ‰ª•Á¥¢ÂºïÁî®‰∏çÂà∞NULLÔºå‰ºöÈÄ†ÊàêÁ¨¨‰∏ÄÁÇπ‰∏≠ËØ¥ÁöÑÁªüËÆ°‰∏çÂà∞ÁöÑÈóÆÈ¢ò„ÄÇ</p>
</li>
<li><p>NOT INÂ≠êÊü•ËØ¢Âú®ÊúâNULLÂÄºÁöÑÊÉÖÂÜµ‰∏ãËøîÂõûÁöÑÁªìÊûúÈÉΩÊòØÁ©∫ÂÄº„ÄÇ</p>
<p>‰æãÂ¶ÇuserË°®Â¶Ç‰∏ã</p>
<table>
<thead>
<tr>
<th align="center">id</th>
<th align="center">username</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">zhangsan</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">lisi</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">null</td>
</tr>
</tbody></table>
<p><code>select * from </code>user<code>where username NOT IN (select username from</code>user<code> where id != 0)</code>ÔºåËøôÊù°Êü•ËØ¢ËØ≠Âè•Â∫îËØ•Êü•Âà∞zhangsanËøôÊù°Êï∞ÊçÆÔºå‰ΩÜÊòØÁªìÊûúÊòæÁ§∫‰∏∫null„ÄÇ</p>
</li>
<li><p>MySQLÂú®ËøõË°åÊØîËæÉÁöÑÊó∂ÂÄôÔºåNULL‰ºöÂèÇ‰∏éÂ≠óÊÆµÁöÑÊØîËæÉÔºåÂõ†‰∏∫NULLÊòØ‰∏ÄÁßçÊØîËæÉÁâπÊÆäÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÊï∞ÊçÆÂ∫ìÂú®Â§ÑÁêÜÊó∂ÈúÄË¶ÅËøõË°åÁâπÊÆäÂ§ÑÁêÜÔºåÂ¢ûÂä†‰∫ÜÊï∞ÊçÆÂ∫ìÂ§ÑÁêÜËÆ∞ÂΩïÁöÑÂ§çÊùÇÊÄß„ÄÇ</p>
</li>
</ul>
<h3 id="Â¶Ç‰Ωï‰ºòÂåñÊü•ËØ¢ËøáÁ®ã‰∏≠ÁöÑÊï∞ÊçÆËÆøÈóÆÔºü"><a href="#Â¶Ç‰Ωï‰ºòÂåñÊü•ËØ¢ËøáÁ®ã‰∏≠ÁöÑÊï∞ÊçÆËÆøÈóÆÔºü" class="headerlink" title="Â¶Ç‰Ωï‰ºòÂåñÊü•ËØ¢ËøáÁ®ã‰∏≠ÁöÑÊï∞ÊçÆËÆøÈóÆÔºü"></a>Â¶Ç‰Ωï‰ºòÂåñÊü•ËØ¢ËøáÁ®ã‰∏≠ÁöÑÊï∞ÊçÆËÆøÈóÆÔºü</h3><p>‰ªéÂáèÂ∞ëÊï∞ÊçÆËÆøÈóÆÊñπÈù¢ËÄÉËôëÔºö</p>
<ul>
<li>Ê≠£Á°Æ‰ΩøÁî®Á¥¢ÂºïÔºåÂ∞ΩÈáèÂÅöÂà∞Á¥¢ÂºïË¶ÜÁõñ</li>
<li>‰ºòÂåñSQLÊâßË°åËÆ°Âàí</li>
</ul>
<p>‰ªéËøîÂõûÊõ¥Â∞ëÁöÑÊï∞ÊçÆÊñπÈù¢ËÄÉËôëÔºö</p>
<ul>
<li>Êï∞ÊçÆÂàÜÈ°µÂ§ÑÁêÜ</li>
<li>Âè™ËøîÂõûÈúÄË¶ÅÁöÑÂ≠óÊÆµ</li>
</ul>
<p>‰ªéÂáèÂ∞ëÊúçÂä°Âô®CPUÂºÄÈîÄÊñπÈù¢ËÄÉËôëÔºö</p>
<ul>
<li>ÂêàÁêÜ‰ΩøÁî®ÊéíÂ∫è</li>
<li>ÂáèÂ∞ëÊØîËæÉÁöÑÊìç‰Ωú</li>
<li>Â§çÊùÇËøêÁÆóÂú®ÂÆ¢Êà∑Á´ØÂ§ÑÁêÜ</li>
</ul>
<p>‰ªéÂ¢ûÂä†ËµÑÊ∫êÊñπÈù¢ËÄÉËôëÔºö</p>
<ul>
<li>ÂÆ¢Êà∑Á´ØÂ§öËøõÁ®ãÂπ∂Ë°åËÆøÈóÆ</li>
<li>Êï∞ÊçÆÂ∫ìÂπ∂Ë°åÂ§ÑÁêÜ</li>
</ul>
<h3 id="Â¶Ç‰Ωï‰ºòÂåñÈïøÈöæÁöÑÊü•ËØ¢ËØ≠Âè•Ôºü"><a href="#Â¶Ç‰Ωï‰ºòÂåñÈïøÈöæÁöÑÊü•ËØ¢ËØ≠Âè•Ôºü" class="headerlink" title="Â¶Ç‰Ωï‰ºòÂåñÈïøÈöæÁöÑÊü•ËØ¢ËØ≠Âè•Ôºü"></a>Â¶Ç‰Ωï‰ºòÂåñÈïøÈöæÁöÑÊü•ËØ¢ËØ≠Âè•Ôºü</h3><ul>
<li>Â∞Ü‰∏Ä‰∏™Â§ßÁöÑÊü•ËØ¢ÂàÜËß£‰∏∫Â§ö‰∏™Â∞èÁöÑÊü•ËØ¢</li>
<li>ÂàÜËß£ÂÖ≥ËÅîÊü•ËØ¢Ôºå‰ΩøÁºìÂ≠òÁöÑÊïàÁéáÊõ¥È´ò</li>
</ul>
<h3 id="Â¶Ç‰Ωï‰ºòÂåñLIMITÂàÜÈ°µÔºü"><a href="#Â¶Ç‰Ωï‰ºòÂåñLIMITÂàÜÈ°µÔºü" class="headerlink" title="Â¶Ç‰Ωï‰ºòÂåñLIMITÂàÜÈ°µÔºü"></a>Â¶Ç‰Ωï‰ºòÂåñLIMITÂàÜÈ°µÔºü</h3><ul>
<li>Âú®LIMITÂÅèÁßªÈáèËæÉÂ§ßÁöÑÊó∂ÂÄôÔºåÊü•ËØ¢ÊïàÁéá‰ºöÂèò‰ΩéÔºåÂèØ‰ª•ËÆ∞ÂΩïÊØèÊ¨°ÂèñÂá∫ÁöÑÊúÄÂ§ßIDÔºå‰∏ãÊ¨°Êü•ËØ¢Êó∂ÂèØ‰ª•Âà©Áî®IDËøõË°åÊü•ËØ¢</li>
<li>Âª∫Á´ãÂ§çÂêàÁ¥¢Âºï</li>
</ul>
<h3 id="Â¶Ç‰Ωï‰ºòÂåñUNIONÊü•ËØ¢"><a href="#Â¶Ç‰Ωï‰ºòÂåñUNIONÊü•ËØ¢" class="headerlink" title="Â¶Ç‰Ωï‰ºòÂåñUNIONÊü•ËØ¢"></a>Â¶Ç‰Ωï‰ºòÂåñUNIONÊü•ËØ¢</h3><p>Â¶ÇÊûú‰∏çÈúÄË¶ÅÂØπÁªìÊûúÈõÜËøõË°åÂéªÈáçÊàñËÄÖÊéíÂ∫èÂª∫ËÆÆ‰ΩøÁî®UNION ALLÔºå‰ºöÂ•Ω‰∏Ä‰∫õ„ÄÇ</p>
<h3 id="Â¶Ç‰Ωï‰ºòÂåñWHEREÂ≠êÂè•"><a href="#Â¶Ç‰Ωï‰ºòÂåñWHEREÂ≠êÂè•" class="headerlink" title="Â¶Ç‰Ωï‰ºòÂåñWHEREÂ≠êÂè•"></a>Â¶Ç‰Ωï‰ºòÂåñWHEREÂ≠êÂè•</h3><ul>
<li>‰∏çË¶ÅÂú®whereÂ≠êÂè•‰∏≠‰ΩøÁî®!=Âíå&lt;&gt;ËøõË°å‰∏çÁ≠â‰∫éÂà§Êñ≠ÔºåËøôÊ†∑‰ºöÂØºËá¥ÊîæÂºÉÁ¥¢ÂºïËøõË°åÂÖ®Ë°®Êâ´Êèè„ÄÇ</li>
<li>‰∏çË¶ÅÂú®whereÂ≠êÂè•‰∏≠‰ΩøÁî®nullÊàñÁ©∫ÂÄºÂà§Êñ≠ÔºåÂ∞ΩÈáèËÆæÁΩÆÂ≠óÊÆµ‰∏∫not null„ÄÇ</li>
<li>Â∞ΩÈáè‰ΩøÁî®union all‰ª£Êõøor</li>
<li>Âú®whereÂíåorder byÊ∂âÂèäÁöÑÂàóÂª∫Á´ãÁ¥¢Âºï</li>
<li>Â∞ΩÈáèÂáèÂ∞ë‰ΩøÁî®inÊàñËÄÖnot inÔºå‰ºöËøõË°åÂÖ®Ë°®Êâ´Êèè</li>
<li>Âú®whereÂ≠êÂè•‰∏≠‰ΩøÁî®ÂèÇÊï∞‰ºöÂØºËá¥ÂÖ®Ë°®Êâ´Êèè</li>
<li>ÈÅøÂÖçÂú®whereÂ≠êÂè•‰∏≠ÂØπÂ≠óÊÆµÂèäËøõË°åË°®ËææÂºèÊàñËÄÖÂáΩÊï∞Êìç‰Ωú‰ºöÂØºËá¥Â≠òÂÇ®ÂºïÊìéÊîæÂºÉÁ¥¢ÂºïËøõËÄåÂÖ®Ë°®Êâ´Êèè</li>
</ul>
<h3 id="SQLËØ≠Âè•ÊâßË°åÁöÑÂæàÊÖ¢ÂéüÂõ†ÊòØ‰ªÄ‰πàÔºü"><a href="#SQLËØ≠Âè•ÊâßË°åÁöÑÂæàÊÖ¢ÂéüÂõ†ÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="SQLËØ≠Âè•ÊâßË°åÁöÑÂæàÊÖ¢ÂéüÂõ†ÊòØ‰ªÄ‰πàÔºü"></a>SQLËØ≠Âè•ÊâßË°åÁöÑÂæàÊÖ¢ÂéüÂõ†ÊòØ‰ªÄ‰πàÔºü</h3><ul>
<li>Â¶ÇÊûúSQLËØ≠Âè•Âè™ÊòØÂÅ∂Â∞îÊâßË°åÂæàÊÖ¢ÔºåÂèØËÉΩÊòØÊâßË°åÁöÑÊó∂ÂÄôÈÅáÂà∞‰∫ÜÈîÅÔºå‰πüÂèØËÉΩÊòØredo logÊó•ÂøóÂÜôÊª°‰∫ÜÔºåË¶ÅÂ∞Üredo log‰∏≠ÁöÑÊï∞ÊçÆÂêåÊ≠•Âà∞Á£ÅÁõò‰∏≠Âéª„ÄÇ</li>
<li>Â¶ÇÊûúSQLËØ≠Âè•‰∏ÄÁõ¥ÈÉΩÂæàÊÖ¢ÔºåÂèØËÉΩÊòØÂ≠óÊÆµ‰∏äÊ≤°ÊúâÁ¥¢ÂºïÊàñËÄÖÂ≠óÊÆµÊúâÁ¥¢Âºï‰ΩÜÊòØÊ≤°Áî®‰∏äÁ¥¢Âºï„ÄÇ</li>
</ul>
<h3 id="SQLËØ≠Âè•ÁöÑÊâßË°åÈ°∫Â∫è"><a href="#SQLËØ≠Âè•ÁöÑÊâßË°åÈ°∫Â∫è" class="headerlink" title="SQLËØ≠Âè•ÁöÑÊâßË°åÈ°∫Â∫è?"></a>SQLËØ≠Âè•ÁöÑÊâßË°åÈ°∫Â∫è?</h3><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> </span><br><span class="line">	select_list </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	left_table </span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> </span><br><span class="line">	right_table <span class="keyword">ON</span> join_condition </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">	where_condition </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> </span><br><span class="line">	group_by_list </span><br><span class="line"><span class="keyword">HAVING</span> </span><br><span class="line">	having_condition </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> </span><br><span class="line">	order_by_condition</span><br></pre></td></tr></tbody></table></figure>

<p>ÊâßË°åÈ°∫Â∫èÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/ca035920/MySQL-SQL%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png" alt="ÂõæÁâá"></p>
<ul>
<li>FROMÔºöÂØπSQLËØ≠Âè•ÊâßË°åÊü•ËØ¢Êó∂ÔºåÈ¶ñÂÖàÂØπÂÖ≥ÈîÆÂ≠ó‰∏§ËæπÁöÑË°®‰ª•Á¨õÂç°Â∞îÁßØÁöÑÂΩ¢ÂºèÊâßË°åËøûÊé•ÔºåÂπ∂‰∫ßÁîü‰∏Ä‰∏™ËôöË°®V1„ÄÇËôöË°®Â∞±ÊòØËßÜÂõæÔºåÊï∞ÊçÆ‰ºöÊù•Ëá™Â§öÂº†Ë°®ÁöÑÊâßË°åÁªìÊûú„ÄÇ</li>
<li>ONÔºöÂØπFROMËøûÊé•ÁöÑÁªìÊûúËøõË°åONËøáÊª§,Âπ∂ÂàõÂª∫ËôöË°®V2</li>
<li>JOINÔºöÂ∞ÜONËøáÊª§ÂêéÁöÑÂ∑¶Ë°®Ê∑ªÂä†ËøõÊù•ÔºåÂπ∂ÂàõÂª∫Êñ∞ÁöÑËôöÊãüË°®V3</li>
<li>WHEREÔºöÂØπËôöÊãüË°®V3ËøõË°åWHEREÁ≠õÈÄâÔºåÂàõÂª∫ËôöÊãüË°®V4</li>
<li>GROUP BYÔºöÂØπV4‰∏≠ÁöÑËÆ∞ÂΩïËøõË°åÂàÜÁªÑÊìç‰ΩúÔºåÂàõÂª∫ËôöÊãüË°®V5</li>
<li>HAVINGÔºöÂØπV5ËøõË°åËøáÊª§ÔºåÂàõÂª∫ËôöÊãüË°®V6</li>
<li>SELECTÔºöÂ∞ÜV6‰∏≠ÁöÑÁªìÊûúÊåâÁÖßSELECTËøõË°åÁ≠õÈÄâÔºåÂàõÂª∫ËôöÊãüË°®V7</li>
<li>DISTINCTÔºöÂØπV7Ë°®‰∏≠ÁöÑÁªìÊûúËøõË°åÂéªÈáçÊìç‰ΩúÔºåÂàõÂª∫ËôöÊãüË°®V8ÔºåÂ¶ÇÊûú‰ΩøÁî®‰∫ÜGROUP BYÂ≠êÂè•ÂàôÊó†ÈúÄ‰ΩøÁî®DISTINCTÔºåÂõ†‰∏∫ÂàÜÁªÑÁöÑÊó∂ÂÄôÊòØÂ∞ÜÂàó‰∏≠ÂîØ‰∏ÄÁöÑÂÄºÂàÜÊàê‰∏ÄÁªÑÔºåÂπ∂‰∏îÊØèÁªÑÂè™ËøîÂõû‰∏ÄË°åËÆ∞ÂΩïÔºåÊâÄ‰ª•ÊâÄÊúâÁöÑËÆ∞ÂΩïÈÉΩhÊòØ‰∏çÂêåÁöÑ„ÄÇ</li>
<li>ORDER BYÔºöÂØπV8Ë°®‰∏≠ÁöÑÁªìÊûúËøõË°åÊéíÂ∫è„ÄÇ</li>
</ul>
<h2 id="Êï∞ÊçÆÂ∫ì‰ºòÂåñ"><a href="#Êï∞ÊçÆÂ∫ì‰ºòÂåñ" class="headerlink" title="Êï∞ÊçÆÂ∫ì‰ºòÂåñ"></a>Êï∞ÊçÆÂ∫ì‰ºòÂåñ</h2><h3 id="Â§ßË°®Â¶Ç‰Ωï‰ºòÂåñÔºü"><a href="#Â§ßË°®Â¶Ç‰Ωï‰ºòÂåñÔºü" class="headerlink" title="Â§ßË°®Â¶Ç‰Ωï‰ºòÂåñÔºü"></a>Â§ßË°®Â¶Ç‰Ωï‰ºòÂåñÔºü</h3><ul>
<li>ÈôêÂÆöÊï∞ÊçÆÁöÑËåÉÂõ¥ÔºöÈÅøÂÖç‰∏çÂ∏¶‰ªª‰ΩïÈôêÂà∂Êï∞ÊçÆËåÉÂõ¥Êù°‰ª∂ÁöÑÊü•ËØ¢ËØ≠Âè•„ÄÇ</li>
<li>ËØªÂÜôÂàÜÁ¶ªÔºö‰∏ªÂ∫ìË¥üË¥£ÂÜôÔºå‰ªéÂ∫ìË¥üË¥£ËØª„ÄÇ</li>
<li>ÂûÇÁõ¥ÂàÜË°®ÔºöÂ∞Ü‰∏Ä‰∏™Ë°®ÊåâÁÖßÂ≠óÊÆµÂàÜÊàêÂ§ö‰∏™Ë°®ÔºåÊØè‰∏™Ë°®Â≠òÂÇ®ÂÖ∂‰∏≠‰∏ÄÈÉ®ÂàÜÂ≠óÊÆµ„ÄÇ</li>
<li>Ê∞¥Âπ≥ÂàÜË°®ÔºöÂú®Âêå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂÜÖÔºåÊää‰∏Ä‰∏™Ë°®ÁöÑÊï∞ÊçÆÊåâÁÖß‰∏ÄÂÆöËßÑÂàôÊãÜÂàÜÂà∞Â§ö‰∏™Ë°®‰∏≠„ÄÇ</li>
<li>ÂØπÂçïË°®ËøõË°å‰ºòÂåñÔºöÂØπË°®‰∏≠ÁöÑÂ≠óÊÆµ„ÄÅÁ¥¢Âºï„ÄÅÊü•ËØ¢SQLËøõË°å‰ºòÂåñ„ÄÇ</li>
<li>Ê∑ªÂä†ÁºìÂ≠ò</li>
</ul>
<h3 id="‰ªÄ‰πàÊòØÂûÇÁõ¥ÂàÜË°®„ÄÅÂûÇÁõ¥ÂàÜÂ∫ì„ÄÅÊ∞¥Âπ≥ÂàÜË°®„ÄÅÊ∞¥Âπ≥ÂàÜÂ∫ìÔºü"><a href="#‰ªÄ‰πàÊòØÂûÇÁõ¥ÂàÜË°®„ÄÅÂûÇÁõ¥ÂàÜÂ∫ì„ÄÅÊ∞¥Âπ≥ÂàÜË°®„ÄÅÊ∞¥Âπ≥ÂàÜÂ∫ìÔºü" class="headerlink" title="‰ªÄ‰πàÊòØÂûÇÁõ¥ÂàÜË°®„ÄÅÂûÇÁõ¥ÂàÜÂ∫ì„ÄÅÊ∞¥Âπ≥ÂàÜË°®„ÄÅÊ∞¥Âπ≥ÂàÜÂ∫ìÔºü"></a>‰ªÄ‰πàÊòØÂûÇÁõ¥ÂàÜË°®„ÄÅÂûÇÁõ¥ÂàÜÂ∫ì„ÄÅÊ∞¥Âπ≥ÂàÜË°®„ÄÅÊ∞¥Âπ≥ÂàÜÂ∫ìÔºü</h3><p>ÂûÇÁõ¥ÂàÜË°®ÔºöÂ∞Ü‰∏Ä‰∏™Ë°®ÊåâÁÖßÂ≠óÊÆµÂàÜÊàêÂ§ö‰∏™Ë°®ÔºåÊØè‰∏™Ë°®Â≠òÂÇ®ÂÖ∂‰∏≠‰∏ÄÈÉ®ÂàÜÂ≠óÊÆµ„ÄÇ‰∏ÄËà¨‰ºöÂ∞ÜÂ∏∏Áî®ÁöÑÂ≠óÊÆµÊîæÂà∞‰∏Ä‰∏™Ë°®‰∏≠ÔºåÂ∞Ü‰∏çÂ∏∏Áî®ÁöÑÂ≠óÊÆµÊîæÂà∞Âè¶‰∏Ä‰∏™Ë°®‰∏≠„ÄÇ</p>
<p>ÂûÇÁõ¥ÂàÜË°®ÁöÑ‰ºòÂäøÔºö</p>
<ul>
<li>ÈÅøÂÖçIOÁ´û‰∫âÂáèÂ∞ëÈîÅË°®ÁöÑÊ¶ÇÁéá„ÄÇÂõ†‰∏∫Â§ßÁöÑÂ≠óÊÆµÊïàÁéáÊõ¥‰ΩéÔºåÁ¨¨‰∏ÄÊï∞ÊçÆÈáèÂ§ßÔºåÈúÄË¶ÅÁöÑËØªÂèñÊó∂Èó¥Èïø„ÄÇÁ¨¨‰∫åÔºåÂ§ßÂ≠óÊÆµÂç†Áî®ÁöÑÁ©∫Èó¥Êõ¥Â§ßÔºåÂçïÈ°µÂÜÖÂ≠òÂÇ®ÁöÑË°åÊï∞ÂèòÂ∞ëÔºå‰ºö‰ΩøÂæóIOÊìç‰ΩúÂ¢ûÂ§ö„ÄÇ</li>
<li>ÂèØ‰ª•Êõ¥Â•ΩÂú∞ÊèêÂçáÁÉ≠Èó®Êï∞ÊçÆÁöÑÊü•ËØ¢ÊïàÁéá„ÄÇ</li>
</ul>
<p>ÂûÇÁõ¥ÂàÜÂ∫ìÔºöÊåâÁÖß‰∏öÂä°ÂØπË°®ËøõË°åÂàÜÁ±ªÔºåÈÉ®ÁΩ≤Âà∞‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ì‰∏äÈù¢Ôºå‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÂèØ‰ª•ÊîæÂà∞‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏äÈù¢„ÄÇ</p>
<p>ÂûÇÁõ¥ÂàÜÂ∫ìÁöÑ‰ºòÂäøÔºö</p>
<ul>
<li>Èôç‰Ωé‰∏öÂä°‰∏≠ÁöÑËÄ¶ÂêàÔºåÊñπ‰æøÂØπ‰∏çÂêåÁöÑ‰∏öÂä°ËøõË°åÂàÜÁ∫ßÁÆ°ÁêÜ„ÄÇ</li>
<li>ÂèØ‰ª•ÊèêÂçáIO„ÄÅÊï∞ÊçÆÂ∫ìËøûÊé•Êï∞„ÄÅËß£ÂÜ≥ÂçïÊú∫Á°¨‰ª∂ËµÑÊ∫êÁöÑÁì∂È¢àÈóÆÈ¢ò„ÄÇ</li>
</ul>
<p>ÂûÇÁõ¥ÊãÜÂàÜÔºàÂàÜÂ∫ì„ÄÅÂàÜË°®ÔºâÁöÑÁº∫ÁÇπÔºö</p>
<ul>
<li>‰∏ªÈîÆÂá∫Áé∞ÂÜó‰ΩôÔºåÈúÄË¶ÅÁÆ°ÁêÜÂÜó‰ΩôÂàó</li>
<li>‰∫ãÂä°ÁöÑÂ§ÑÁêÜÂèòÂæóÂ§çÊùÇ</li>
<li>‰ªçÁÑ∂Â≠òÂú®ÂçïË°®Êï∞ÊçÆÈáèËøáÂ§ßÁöÑÈóÆÈ¢ò</li>
</ul>
<p>Ê∞¥Âπ≥ÂàÜË°®ÔºöÂú®Âêå‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂÜÖÔºåÊääÂêå‰∏Ä‰∏™Ë°®ÁöÑÊï∞ÊçÆÊåâÁÖß‰∏ÄÂÆöËßÑÂàôÊãÜÂàÜÂà∞Â§ö‰∏™Ë°®‰∏≠„ÄÇ</p>
<p>Ê∞¥Âπ≥ÂàÜË°®ÁöÑ‰ºòÂäøÔºö</p>
<ul>
<li>Ëß£ÂÜ≥‰∫ÜÂçïË°®Êï∞ÊçÆÈáèËøáÂ§ßÁöÑÈóÆÈ¢ò</li>
<li>ÈÅøÂÖçIOÁ´û‰∫âÂπ∂ÂáèÂ∞ëÈîÅË°®ÁöÑÊ¶ÇÁéá</li>
</ul>
<p>Ê∞¥Âπ≥ÂàÜÂ∫ìÔºöÊääÂêå‰∏Ä‰∏™Ë°®ÁöÑÊï∞ÊçÆÊåâÁÖß‰∏ÄÂÆöËßÑÂàôÊãÜÂàÜÂà∞‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ì‰∏≠Ôºå‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÂèØ‰ª•ÊîæÂà∞‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏ä„ÄÇ</p>
<p>Ê∞¥Âπ≥ÂàÜÂ∫ìÁöÑ‰ºòÂäøÔºö</p>
<ul>
<li>Ëß£ÂÜ≥‰∫ÜÂçïÂ∫ìÂ§ßÊï∞ÊçÆÈáèÁöÑÁì∂È¢àÈóÆÈ¢ò</li>
<li>IOÂÜ≤Á™ÅÂáèÂ∞ëÔºåÈîÅÁöÑÁ´û‰∫âÂáèÂ∞ëÔºåÊüê‰∏™Êï∞ÊçÆÂ∫ìÂá∫Áé∞ÈóÆÈ¢ò‰∏çÂΩ±ÂìçÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÔºàÂèØÁî®ÊÄßÔºâÔºåÊèêÈ´ò‰∫ÜÁ≥ªÁªüÁöÑÁ®≥ÂÆöÊÄßÂíåÂèØÁî®ÊÄß</li>
</ul>
<p>Ê∞¥Âπ≥ÊãÜÂàÜÔºàÂàÜË°®„ÄÅÂàÜÂ∫ìÔºâÁöÑÁº∫ÁÇπÔºö</p>
<ul>
<li>ÂàÜÁâá‰∫ãÂä°‰∏ÄËá¥ÊÄßÈöæ‰ª•Ëß£ÂÜ≥</li>
<li>Ë∑®ËäÇÁÇπJOINÊÄßËÉΩÂ∑ÆÔºåÈÄªËæë‰ºöÂèòÂæóÂ§çÊùÇ</li>
<li>Êï∞ÊçÆÊâ©Â±ïÈöæÂ∫¶Â§ßÔºå‰∏çÊòìÁª¥Êä§</li>
</ul>
<p>Âú®Á≥ªÁªüËÆæËÆ°Êó∂Â∫îÊ†πÊçÆ‰∏öÂä°ËÄ¶ÂêàÊù•Á°ÆÂÆöÂûÇÁõ¥ÂàÜÂ∫ìÂíåÂûÇÁõ¥ÂàÜË°®ÁöÑÊñπÊ°àÔºåÂú®Êï∞ÊçÆËÆøÈóÆÂéãÂäõ‰∏çÊòØÁâπÂà´Â§ßÊó∂Â∫îËÄÉËôëÁºìÂ≠ò„ÄÅËØªÂÜôÂàÜÁ¶ªÁ≠âÊñπÊ≥ïÔºåËã•Êï∞ÊçÆÈáèÂæàÂ§ßÔºåÊàñÊåÅÁª≠Â¢ûÈïøÂèØËÄÉËôëÊ∞¥Âπ≥ÂàÜÂ∫ìÂàÜË°®ÔºåÊ∞¥Âπ≥ÊãÜÂàÜÊâÄÊ∂âÂèäÁöÑÈÄªËæëÊØîËæÉÂ§çÊùÇÔºåÂ∏∏ËßÅÁöÑÊñπÊ°àÊúâÂÆ¢Êà∑Á´ØÊû∂ÊûÑÂíå‰ª£ÁêÜÊû∂ÊûÑ„ÄÇ</p>
<h3 id="ÂàÜÂ∫ìÂàÜË°®ÂêéÔºåIDÈîÆÂ¶Ç‰ΩïÂ§ÑÁêÜÔºü"><a href="#ÂàÜÂ∫ìÂàÜË°®ÂêéÔºåIDÈîÆÂ¶Ç‰ΩïÂ§ÑÁêÜÔºü" class="headerlink" title="ÂàÜÂ∫ìÂàÜË°®ÂêéÔºåIDÈîÆÂ¶Ç‰ΩïÂ§ÑÁêÜÔºü"></a>ÂàÜÂ∫ìÂàÜË°®ÂêéÔºåIDÈîÆÂ¶Ç‰ΩïÂ§ÑÁêÜÔºü</h3><p>ÂàÜÂ∫ìÂàÜË°®Âêé‰∏çËÉΩÊØè‰∏™Ë°®ÁöÑIDÈÉΩÊòØ‰ªé1ÂºÄÂßãÔºåÊâÄ‰ª•ÈúÄË¶Å‰∏Ä‰∏™ÂÖ®Â±ÄIDÔºåËÆæÁΩÆÂÖ®Â±ÄID‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂá†ÁßçÊñπÊ≥ïÔºö</p>
<ul>
<li>UUIDÔºö‰ºòÁÇπÔºöÊú¨Âú∞ÁîüÊàêIDÔºå‰∏çÈúÄË¶ÅËøúÁ®ãË∞ÉÁî®ÔºõÂÖ®Â±ÄÂîØ‰∏Ä‰∏çÈáçÂ§ç„ÄÇÁº∫ÁÇπÔºöÂç†Áî®Á©∫Èó¥Â§ßÔºå‰∏çÈÄÇÂêà‰Ωú‰∏∫Á¥¢Âºï„ÄÇ</li>
<li>Êï∞ÊçÆÂ∫ìËá™Â¢ûIDÔºöÂú®ÂàÜÂ∫ìÂàÜË°®Ë°®Âêé‰ΩøÁî®Êï∞ÊçÆÂ∫ìËá™Â¢ûIDÔºåÈúÄË¶Å‰∏Ä‰∏™‰∏ìÈó®Áî®‰∫éÁîüÊàê‰∏ªÈîÆÁöÑÂ∫ìÔºåÊØèÊ¨°ÊúçÂä°Êé•Êî∂Âà∞ËØ∑Ê±ÇÔºåÂÖàÂêëËøô‰∏™Â∫ì‰∏≠ÊèíÂÖ•‰∏ÄÊù°Ê≤°ÊúâÊÑè‰πâÁöÑÊï∞ÊçÆÔºåËé∑Âèñ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìËá™Â¢ûÁöÑIDÔºåÂà©Áî®Ëøô‰∏™IDÂéªÂàÜÂ∫ìÂàÜË°®‰∏≠ÂÜôÊï∞ÊçÆ„ÄÇ‰ºòÁÇπÔºöÁÆÄÂçïÊòìÂÆûÁé∞„ÄÇÁº∫ÁÇπÔºöÂú®È´òÂπ∂Âèë‰∏ãÂ≠òÂú®Áì∂È¢à„ÄÇÁ≥ªÁªüÁªìÊûÑÂ¶Ç‰∏ãÂõæÔºö</li>
</ul>
<p><img src="/p/ca035920/MySQL-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8id%E6%96%B9%E6%A1%88.png" alt="ÂõæÁâá"></p>
<ul>
<li><p>RedisÁîüÊàêIDÔºö‰ºòÁÇπÔºö‰∏ç‰æùËµñÊï∞ÊçÆÂ∫ìÔºåÊÄßËÉΩÊØîËæÉÂ•Ω„ÄÇÁº∫ÁÇπÔºöÂºïÂÖ•Êñ∞ÁöÑÁªÑ‰ª∂‰ºö‰ΩøÂæóÁ≥ªÁªüÂ§çÊùÇÂ∫¶Â¢ûÂä†</p>
</li>
<li><p>TwitterÁöÑsnowflakeÁÆóÊ≥ïÔºöÊòØ‰∏Ä‰∏™64‰ΩçÁöÑlongÂûãÁöÑIDÔºåÂÖ∂‰∏≠Êúâ1bitÊòØ‰∏çÁî®ÁöÑÔºå41bit‰Ωú‰∏∫ÊØ´ÁßíÊï∞Ôºå10bit‰Ωú‰∏∫Â∑•‰ΩúÊú∫Âô®IDÔºå12bit‰Ωú‰∏∫Â∫èÂàóÂè∑„ÄÇ</p>
<p>1bitÔºöÁ¨¨‰∏Ä‰∏™bitÈªòËÆ§‰∏∫0ÔºåÂõ†‰∏∫‰∫åËøõÂà∂‰∏≠Á¨¨‰∏Ä‰∏™bit‰∏∫1ÁöÑËØù‰∏∫Ë¥üÊï∞Ôºå‰ΩÜÊòØID‰∏çËÉΩ‰∏∫Ë¥üÊï∞.</p>
<p>41bitÔºöË°®Á§∫ÁöÑÊòØÊó∂Èó¥Êà≥ÔºåÂçï‰ΩçÊòØÊØ´Áßí„ÄÇ</p>
<p>10bitÔºöËÆ∞ÂΩïÂ∑•‰ΩúÊú∫Âô®IDÔºåÂÖ∂‰∏≠5‰∏™bitË°®Á§∫Êú∫ÊàøIDÔºå5‰∏™bitË°®Á§∫Êú∫Âô®ID„ÄÇ</p>
<p>12bitÔºöÁî®Êù•ËÆ∞ÂΩïÂêå‰∏ÄÊØ´ÁßíÂÜÖ‰∫ßÁîüÁöÑ‰∏çÂêåID„ÄÇ</p>
</li>
<li><p>ÁæéÂõ¢ÁöÑLeafÂàÜÂ∏ÉÂºèIDÁîüÊàêÁ≥ªÁªüÔºåÁæéÂõ¢ÁÇπËØÑÂàÜÂ∏ÉÂºèIDÁîüÊàêÁ≥ªÁªü</p>
</li>
</ul>
<h3 id="MySQLÁöÑÂ§çÂà∂ÂéüÁêÜÂèäÊµÅÁ®ãÔºüÂ¶Ç‰ΩïÂÆûÁé∞‰∏ª‰ªéÂ§çÂà∂Ôºü"><a href="#MySQLÁöÑÂ§çÂà∂ÂéüÁêÜÂèäÊµÅÁ®ãÔºüÂ¶Ç‰ΩïÂÆûÁé∞‰∏ª‰ªéÂ§çÂà∂Ôºü" class="headerlink" title="MySQLÁöÑÂ§çÂà∂ÂéüÁêÜÂèäÊµÅÁ®ãÔºüÂ¶Ç‰ΩïÂÆûÁé∞‰∏ª‰ªéÂ§çÂà∂Ôºü"></a>MySQLÁöÑÂ§çÂà∂ÂéüÁêÜÂèäÊµÅÁ®ãÔºüÂ¶Ç‰ΩïÂÆûÁé∞‰∏ª‰ªéÂ§çÂà∂Ôºü</h3><p>MySQLÂ§çÂà∂Ôºö‰∏∫‰øùËØÅ‰∏ªÊúçÂä°Âô®Âíå‰ªéÊúçÂä°Âô®ÁöÑÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÔºåÂú®Âêë‰∏ªÊúçÂä°Âô®ÊèíÂÖ•Êï∞ÊçÆÂêéÔºå‰ªéÊúçÂä°Âô®‰ºöËá™Âä®Â∞Ü‰∏ªÊúçÂä°Âô®‰∏≠‰øÆÊîπÁöÑÊï∞ÊçÆÂêåÊ≠•ËøáÊù•„ÄÇ</p>
<p>‰∏ª‰ªéÂ§çÂà∂ÁöÑÂéüÁêÜÔºö</p>
<p>‰∏ª‰ªéÂ§çÂà∂‰∏ªË¶ÅÊúâ‰∏â‰∏™Á∫øÁ®ãÔºöbinlogÁ∫øÁ®ãÔºåI/OÁ∫øÁ®ãÔºåSQLÁ∫øÁ®ã„ÄÇ</p>
<ul>
<li>binlogÁ∫øÁ®ãÔºöË¥üË¥£Â∞Ü‰∏ªÊúçÂä°Âô®‰∏äÁöÑÊï∞ÊçÆÊõ¥ÊîπÂÜôÂÖ•Âà∞‰∫åËøõÂà∂Êó•ÂøóÔºàBinary logÔºâ‰∏≠„ÄÇ</li>
<li>I/OÁ∫øÁ®ãÔºöË¥üË¥£‰ªé‰∏ªÊúçÂä°Âô®‰∏äËØªÂèñ‰∫åËøõÂà∂Êó•ÂøóÔºàBinary logÔºâÔºåÂπ∂ÂÜôÂÖ•‰ªéÊúçÂä°Âô®ÁöÑ‰∏≠ÁªßÊó•ÂøóÔºàRelay logÔºâ‰∏≠„ÄÇ</li>
<li>SQLÁ∫øÁ®ãÔºöË¥üË¥£ËØªÂèñ‰∏≠ÁªßÊó•ÂøóÔºåËß£ÊûêÂá∫‰∏ªÊúçÂä°Âô®‰∏≠Â∑≤ÁªèÊâßË°åÁöÑÊï∞ÊçÆÊõ¥ÊîπÂπ∂Âú®‰ªéÊúçÂä°Âô®‰∏≠ÈáçÊîæ</li>
</ul>
<p>Â§çÂà∂ËøáÁ®ãÂ¶Ç‰∏ãÔºö</p>
<p><img src="/p/ca035920/MySQL-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%96%B9%E6%A1%88.png" alt="ÂõæÁâá"></p>
<ol>
<li>MasterÂú®ÊØè‰∏™‰∫ãÂä°Êõ¥Êñ∞Êï∞ÊçÆÂÆåÊàê‰πãÂâçÔºåÂ∞ÜÊìç‰ΩúËÆ∞ÂΩïÂÜôÂÖ•Âà∞binlog‰∏≠„ÄÇ</li>
<li>Slave‰ªéÂ∫ìËøûÊé•Master‰∏ªÂ∫ìÔºåÂπ∂‰∏îMasterÊúâÂ§öÂ∞ë‰∏™SlaveÂ∞±‰ºöÂàõÂª∫Â§öÂ∞ë‰∏™binlog dumpÁ∫øÁ®ã„ÄÇÂΩìMasterËäÇÁÇπÁöÑbinlogÂèëÁîüÂèòÂåñÊó∂Ôºåbinlog dump‰ºöÈÄöÁü•ÊâÄÊúâÁöÑSlaveÔºåÂπ∂Â∞ÜÁõ∏Â∫îÁöÑbinlogÂèëÈÄÅÁªôSlave„ÄÇ</li>
<li>I/OÁ∫øÁ®ãÊé•Êî∂Âà∞binlogÂÜÖÂÆπÂêéÔºåÂ∞ÜÂÖ∂ÂÜôÂÖ•Âà∞‰∏≠ÁªßÊó•ÂøóÔºàRelay logÔºâ‰∏≠„ÄÇ</li>
<li>SQLÁ∫øÁ®ãËØªÂèñ‰∏≠ÁªßÊó•ÂøóÔºåÂπ∂Âú®‰ªéÊúçÂä°Âô®‰∏≠ÈáçÊîæ„ÄÇ</li>
</ol>
<p>ËøôÈáåË°•ÂÖÖ‰∏Ä‰∏™ÈÄö‰øóÊòìÊáÇÁöÑÂõæ„ÄÇ</p>
<p><img src="/p/ca035920/MySQL-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png" alt="ÂõæÁâá"></p>
<p>‰∏ª‰ªéÂ§çÂà∂ÁöÑ‰ΩúÁî®Ôºö</p>
<ul>
<li>È´òÂèØÁî®ÂíåÊïÖÈöúËΩ¨Áßª</li>
<li>Ë¥üËΩΩÂùáË°°</li>
<li>Êï∞ÊçÆÂ§á‰ªΩ</li>
<li>ÂçáÁ∫ßÊµãËØï</li>
</ul>
<h3 id="‰∫ÜËß£ËØªÂÜôÂàÜÁ¶ªÂêóÔºü"><a href="#‰∫ÜËß£ËØªÂÜôÂàÜÁ¶ªÂêóÔºü" class="headerlink" title="‰∫ÜËß£ËØªÂÜôÂàÜÁ¶ªÂêóÔºü"></a>‰∫ÜËß£ËØªÂÜôÂàÜÁ¶ªÂêóÔºü</h3><p>ËØªÂÜôÂàÜÁ¶ª‰∏ªË¶Å‰æùËµñ‰∫é‰∏ª‰ªéÂ§çÂà∂Ôºå‰∏ª‰ªéÂ§çÂà∂‰∏∫ËØªÂÜôÂàÜÁ¶ªÊúçÂä°„ÄÇ</p>
<p>ËØªÂÜôÂàÜÁ¶ªÁöÑ‰ºòÂäøÔºö</p>
<ul>
<li>‰∏ªÊúçÂä°Âô®Ë¥üË¥£ÂÜôÔºå‰ªéÊúçÂä°Âô®Ë¥üË¥£ËØªÔºåÁºìËß£‰∫ÜÈîÅÁöÑÁ´û‰∫â</li>
<li>‰ªéÊúçÂä°Âô®ÂèØ‰ª•‰ΩøÁî®MyISAMÔºåÊèêÂçáÊü•ËØ¢ÊÄßËÉΩÂèäËäÇÁ∫¶Á≥ªÁªüÂºÄÈîÄ</li>
<li>Â¢ûÂä†ÂÜó‰ΩôÔºåÊèêÈ´òÂèØÁî®ÊÄß</li>
</ul>
</body></html>]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MYSQL‰∫ãÂä°</title>
    <url>/p/40cc508f.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="‰∫ãÂä°ÁöÑ4Â§ßÁâπÊÄßÔºàACIDÔºâ"><a href="#‰∫ãÂä°ÁöÑ4Â§ßÁâπÊÄßÔºàACIDÔºâ" class="headerlink" title="‰∫ãÂä°ÁöÑ4Â§ßÁâπÊÄßÔºàACIDÔºâ"></a>‰∫ãÂä°ÁöÑ4Â§ßÁâπÊÄßÔºàACIDÔºâ</h2><p><strong>A - atomicity ÂéüÂ≠êÊÄß</strong></p>
<p>‰∫ãÂä°‰∏çÂèØÂÜçÂàÜÂâ≤Ôºå‰∫ãÂä°‰∏≠ÁöÑÊìç‰ΩúË¶Å‰πàÈÉΩÂèëÁîüÔºåË¶Å‰πàÈÉΩ‰∏çÂèëÁîü„ÄÇ</p>
<p><strong>C - constancy ‰∏ÄËá¥ÊÄß</strong></p>
<p>‰∫ãÂä°ÊâßË°å‰ºö‰ΩøÊï∞ÊçÆÂ∫ì‰ªé‰∏Ä‰∏™‰∏ÄËá¥ÊÄßÁä∂ÊÄÅÂèòÊç¢Âà∞Âè¶‰∏Ä‰∏™‰∏ÄËá¥Áä∂ÊÄÅ„ÄÇ</p>
<p><strong>I - isolation ÈöîÁ¶ªÊÄß</strong></p>
<p> ‰∫ãÂä°ÁöÑÊâßË°å‰∏ç‰ºöÂèóÂà∞ÂÖ∂‰ªñ‰∫ãÂä°ÁöÑÂπ≤Êâ∞„ÄÇ</p>
<p><strong>D - durbility ÊåÅ‰πÖÊÄß</strong> </p>
<p>‰∫ãÂä°‰∏ÄÊó¶Êèê‰∫§ÔºåÂàô‰ºöÊ∞∏‰πÖÊîπÂèòÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇ</p>
<h2 id="‰∫ãÂä°ÁöÑ3Â§ßÈóÆÈ¢ò"><a href="#‰∫ãÂä°ÁöÑ3Â§ßÈóÆÈ¢ò" class="headerlink" title="‰∫ãÂä°ÁöÑ3Â§ßÈóÆÈ¢ò"></a>‰∫ãÂä°ÁöÑ3Â§ßÈóÆÈ¢ò</h2><p>ÂØπ‰∫é‰∏§‰∏™‰∫ãÂä°T1ÂíåT2„ÄÇ</p>
<p><strong>ÈóÆÈ¢ò‰∏Ä</strong></p>
<p>ËÑèËØª„ÄÇT1ËØªÂèñ‰∫ÜÂ∑≤ÁªèË¢´T2Êõ¥Êñ∞‰ΩÜËøòÊ≤°ÊúâË¢´Êèê‰∫§ÁöÑÂ≠óÊÆµ‰πãÂêéÔºåËã•T2ÂõûÊªöÔºåT1ËØªÂèñÁöÑÂÜÖÂÆπÂ∞±ÊòØ‰∏¥Êó∂‰∏îÊó†ÊïàÁöÑ„ÄÇ</p>
<p><strong>ÈóÆÈ¢ò‰∫å</strong></p>
<p>‰∏çÂèØÈáçÂ§çËØª„ÄÇT1ËØªÂèñ‰∫Ü‰∏Ä‰∏™Â≠óÊÆµÂêéÔºåT2Êõ¥Êñ∞‰∫ÜËØ•Â≠óÊÆµ‰πãÂêéÔºåT1ÂÜçÊ¨°ËØªÂèñÂêå‰∏Ä‰∏™Â≠óÊÆµÁöÑÂÄºËá™ÁÑ∂Â∞±‰∏çÂêå‰∫Ü„ÄÇ</p>
<p><strong>ÈóÆÈ¢ò‰∏â</strong></p>
<p>ÂπªËØª„ÄÇT1‰ªé‰∏Ä‰∏™Ë°®‰∏≠ËØªÂèñ‰∫Ü‰∏Ä‰∏™Â≠óÊÆµÂêéÔºåT2Âú®ËØ•Ë°®‰∏≠ÊèíÂÖ•/Âà†Èô§‰∫Ü‰∏Ä‰∫õÊñ∞ÁöÑË°å‰πãÂêéÔºåÂ¶ÇÊûúT1ÂÜçÊ¨°ËØªÂèñÂêå‰∏Ä‰∏™Ë°®ÔºåÈÇ£‰πàÂ∞±ÂèØËÉΩÂ§öËØª/Â∞ëËØªÂá†Ë°åÊï∞ÊçÆ„ÄÇ</p>
<h2 id="4‰∏™Ê†áÂáÜÁöÑÈöîÁ¶ªÁ∫ßÂà´"><a href="#4‰∏™Ê†áÂáÜÁöÑÈöîÁ¶ªÁ∫ßÂà´" class="headerlink" title="4‰∏™Ê†áÂáÜÁöÑÈöîÁ¶ªÁ∫ßÂà´"></a>4‰∏™Ê†áÂáÜÁöÑÈöîÁ¶ªÁ∫ßÂà´</h2><p>‰∏Ä‰∏™‰∫ãÂä°‰∏éÂÖ∂‰ªñ‰∫ãÂä°ÈöîÁ¶ªÁöÑÁ®ãÂ∫¶Áß∞‰∏∫ÈöîÁ¶ªÁ∫ßÂà´ÔºåÊï∞ÊçÆÂ∫ìËßÑÂÆö‰∫ÜÂ§öÁßç‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´Ôºå‰∏çÂêåÈöîÁ¶ªÁ∫ßÂà´ÂØπÂ∫î‰∏çÂêåÁöÑÂπ≤Êâ∞Á®ãÂ∫¶ÔºåÈöîÁ¶ªÁ∫ßÂà´Ë∂äÈ´òÔºåÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÂ∞±Ë∂äÂ•ΩÔºå‰ΩÜÂπ∂ÂèëÊÄßË∂äÂº±„ÄÇ</p>
<ul>
<li><strong>READ UNCOMMITEDÔºàÊú™Êèê‰∫§ËØªÔºâ</strong></li>
</ul>
<p>‰ºöÂèëÁîüËÑèËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØª„ÄÇ</p>
<p>Âú®ËØ•ÈöîÁ¶ªÁ∫ßÂà´ÔºåÊâÄÊúâ‰∫ãÂä°ÈÉΩÂèØ‰ª•ÁúãÂà∞ÂÖ∂‰ªñÊú™Êèê‰∫§‰∫ãÂä°ÁöÑÊâßË°åÁªìÊûú„ÄÇÊú¨ÈöîÁ¶ªÁ∫ßÂà´ÂæàÂ∞ëÁî®‰∫éÂÆûÈôÖÂ∫îÁî®ÔºåÂõ†‰∏∫ÂÆÉÁöÑÊÄßËÉΩ‰πü‰∏çÊØîÂÖ∂‰ªñÁ∫ßÂà´Â•ΩÂ§öÂ∞ë„ÄÇËØªÂèñÊú™Êèê‰∫§ÁöÑÊï∞ÊçÆÔºå‰πüË¢´Áß∞‰πã‰∏∫ËÑèËØªÔºàDirty ReadÔºâ„ÄÇ</p>
<ul>
<li><strong>READ COMMITTEDÔºàÂ∑≤Êèê‰∫§ËØªÔºâ</strong></li>
</ul>
<p>‰ºöÂèëÁîü‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØª„ÄÇ</p>
<p>ËøôÊòØÂ§ßÂ§öÊï∞Êï∞ÊçÆÂ∫ìÁ≥ªÁªüÁöÑÈªòËÆ§ÈöîÁ¶ªÁ∫ßÂà´Ôºà‰ΩÜ‰∏çÊòØMySQLÈªòËÆ§ÁöÑÔºâ„ÄÇÂÆÉÊª°Ë∂≥‰∫ÜÈöîÁ¶ªÁöÑÁÆÄÂçïÂÆö‰πâÔºö‰∏Ä‰∏™‰∫ãÂä°Âè™ËÉΩÁúãËßÅÂ∑≤ÁªèÊèê‰∫§‰∫ãÂä°ÊâÄÂÅöÁöÑÊîπÂèò„ÄÇËøôÁßçÈöîÁ¶ªÁ∫ßÂà´‰πüÊîØÊåÅÊâÄË∞ìÁöÑ‰∏çÂèØÈáçÂ§çËØªÔºàNonrepeatable ReadÔºâÔºåÂõ†‰∏∫Âêå‰∏Ä‰∫ãÂä°ÁöÑÂÖ∂‰ªñÂÆû‰æãÂú®ËØ•ÂÆû‰æãÂ§ÑÁêÜÂÖ∂Èó¥ÂèØËÉΩ‰ºöÊúâÊñ∞ÁöÑcommitÔºåÊâÄ‰ª•Âêå‰∏ÄselectÂèØËÉΩËøîÂõû‰∏çÂêåÁªìÊûú„ÄÇ</p>
<ul>
<li><strong>ÈªòËÆ§REPEATABLE READÔºàÂèØÈáçÂ§çËØªÔºâ</strong></li>
</ul>
<p>‰ºöÂèëÁîüÂπªËØª„ÄÇ</p>
<p>ËøôÊòØMySQLÁöÑÈªòËÆ§‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÔºåÂÆÉÁ°Æ‰øùÂêå‰∏Ä‰∫ãÂä°ÁöÑÂ§ö‰∏™ÂÆû‰æãÂú®Âπ∂ÂèëËØªÂèñÊï∞ÊçÆÊó∂Ôºå‰ºöÁúãÂà∞ÂêåÊ†∑ÁöÑÊï∞ÊçÆË°å„ÄÇ‰∏çËøáÁêÜËÆ∫‰∏äÔºåËøô‰ºöÂØºËá¥Âè¶‰∏Ä‰∏™Ê£òÊâãÁöÑÈóÆÈ¢òÔºöÂπªËØª ÔºàPhantom ReadÔºâ„ÄÇÁÆÄÂçïÁöÑËØ¥ÔºåÂπªËØªÊåáÂΩìÁî®Êà∑ËØªÂèñÊüê‰∏ÄËåÉÂõ¥ÁöÑÊï∞ÊçÆË°åÊó∂ÔºåÂè¶‰∏Ä‰∏™‰∫ãÂä°ÂèàÂú®ËØ•ËåÉÂõ¥ÂÜÖÊèíÂÖ•‰∫ÜÊñ∞Ë°åÔºåÂΩìÁî®Êà∑ÂÜçËØªÂèñËØ•ËåÉÂõ¥ÁöÑÊï∞ÊçÆË°åÊó∂Ôºå‰ºöÂèëÁé∞ÊúâÊñ∞ÁöÑ‚ÄúÂπªÂΩ±‚Äù Ë°å„ÄÇInnoDBÂíåFalconÂ≠òÂÇ®ÂºïÊìéÈÄöËøáÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÔºàMVCCÔºåMultiversion Concurrency ControlÔºâÊú∫Âà∂Ëß£ÂÜ≥‰∫ÜËØ•ÈóÆÈ¢ò„ÄÇ</p>
<p>ÁÆÄÂçïËÆ≤‰∏ãMVCCÂêßÔºåMVCCÊ≤°ÊúâÂÆûÁé∞Ê†áÂáÜÔºåÊâÄ‰ª•Âú® MySQL„ÄÅOracle„ÄÅPostgreSQLÁ≠âÈÉΩÈááÁî®‰∏çÂêåÊú∫Âà∂ÔºàÂÖ∏ÂûãÁöÑÊúâ‰πêËßÇÂπ∂ÂèëÊéßÂà∂ÂíåÊÇ≤ËßÇÂπ∂ÂèëÊéßÂà∂ÔºâÂÆûÁé∞‰∫ÜMVCC„ÄÇÂèØ‰ª•ËÆ§‰∏∫ÊòØË°åÁ∫ßÈîÅÁöÑ‰∏Ä‰∏™ÂèòÁßçÔºå‰ΩÜÊòØÂú®ÂæàÂ§öÊÉÖÂÜµ‰∏ãÈÅøÂÖç‰∫ÜÂä†ÈîÅÊìç‰ΩúÔºåÂ∞ΩÁÆ°ÂÆûÁé∞Êú∫Âà∂‰∏çÂêåÔºå‰ΩÜÂ§ßÂ§öÈÉΩÂÆûÁé∞‰∫ÜÈùûÈòªÂ°ûÁöÑËØªÊìç‰ΩúÔºåÂÜôÊìç‰Ωú‰πüÂè™ÊòØÈîÅÂÆö‰∫ÜÂøÖË¶ÅÁöÑË°å„ÄÇ</p>
<ul>
<li><strong>SERIALIZABLEÔºà‰∏≤Ë°åÂåñÔºâ</strong></li>
</ul>
<p>‰∫ãÂä°È°∫Â∫èÊâßË°åÔºåÊ≤°ÊúâÂπ∂Ë°åÔºåÂÆåÂÖ®ÊùúÁªùÂπªËØª„ÄÇ</p>
<p>ËøôÊòØÊúÄÈ´òÁöÑÈöîÁ¶ªÁ∫ßÂà´ÔºåÂÆÉÈÄöËøáÂº∫Âà∂‰∫ãÂä°ÊéíÂ∫èÔºå‰Ωø‰πã‰∏çÂèØËÉΩÁõ∏‰∫íÂÜ≤Á™ÅÔºå‰ªéËÄåËß£ÂÜ≥ÂπªËØªÈóÆÈ¢ò„ÄÇÁÆÄË®Ä‰πãÔºåÂÆÉÊòØÂú®ÊØè‰∏™ËØªÁöÑÊï∞ÊçÆË°å‰∏äÂä†‰∏äÂÖ±‰∫´ÈîÅ„ÄÇÂú®Ëøô‰∏™Á∫ßÂà´ÔºåÂèØËÉΩÂØºËá¥Â§ßÈáèÁöÑË∂ÖÊó∂Áé∞Ë±°ÂíåÈîÅÁ´û‰∫â„ÄÇ</p>
<p><strong>ÈöîÁ¶ªÁ∫ßÂà´ÁöÑÊìç‰ΩúÁ§∫‰æã</strong></p>
<p>Êü•ÁúãÂΩìÂâçÈöîÁ¶ªÁ∫ßÂà´</p>
<p>SELECT @@tx_isolation;</p>
<p>ËÆæÁΩÆÂΩìÂâçMYSQLËøûÊé•ÁöÑÈöîÁ¶ªÁ∫ßÂà´</p>
<p>set session transaction isolation level „Äêread committed„Äë;</p>
<p>ËÆæÁΩÆÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÁöÑÂÖ®Â±ÄÈöîÁ¶ªÁ∫ßÂà´</p>
<p>set global transaction isolation level „Äêread committed„Äë;</p>
<h2 id="‰∫ãÂä°ÁöÑÂàõÂª∫"><a href="#‰∫ãÂä°ÁöÑÂàõÂª∫" class="headerlink" title="‰∫ãÂä°ÁöÑÂàõÂª∫"></a>‰∫ãÂä°ÁöÑÂàõÂª∫</h2><ul>
<li><strong>Êü•Áúã‰∫ãÂä°Áä∂ÊÄÅ</strong></li>
</ul>
<p>SHOW VARIABLES LIKE ‚Äòautocommit‚Äô</p>
<ul>
<li><strong>ÈöêÂºè‰∫ãÂä°</strong></li>
</ul>
<p>‰∫ãÂä°Ê≤°ÊúâÊòéÊòæÁöÑÂºÄÂêØÂíåÁªìÊùüÊ†áËÆ∞ÔºåÊØîÂ¶ÇÔºåÂçïÊù°insert„ÄÅupdate„ÄÅdeleteËØ≠Âè•„ÄÇ</p>
<ul>
<li><strong>ÊòæÂºè‰∫ãÂä°</strong></li>
</ul>
<p>‰∫ãÂä°ÂÖ∑ÊúâÊòéÊòæÁöÑÂºÄÂêØÂíåÁªìÊùüÊ†áËÆ∞Ôºå‰ΩøÁî®ÁöÑÂâçÊèêÂøÖÈ°ªÊòØÂÖàËÆæÁΩÆËá™Âä®Êèê‰∫§ÂäüËÉΩ‰∏∫Á¶ÅÁî®Áä∂ÊÄÅ SET AUTOCOMMIT=0ÔºåÂè™ÈíàÂØπÂΩìÂâç‰ºöËØùÊúâÊïà„ÄÇ</p>
<p>‰∫ãÂä°ÁöÑÂºÄÂßãÊ†áËÆ∞ START TRANSACTION; ÁªìÊùü‰∫ãÂä° COMMIT; Êàñ ROLLBACK;</p>
<h2 id="Èù¢ËØïÈ¢òÔºöSpring‰∏≠ÁöÑ-Transactional-Ê≥®Ëß£"><a href="#Èù¢ËØïÈ¢òÔºöSpring‰∏≠ÁöÑ-Transactional-Ê≥®Ëß£" class="headerlink" title="Èù¢ËØïÈ¢òÔºöSpring‰∏≠ÁöÑ@Transactional Ê≥®Ëß£"></a>Èù¢ËØïÈ¢òÔºöSpring‰∏≠ÁöÑ@Transactional Ê≥®Ëß£</h2><p>ÊõæÁªèÂàöÂá∫Êù•Â∑•‰ΩúÁöÑÊó∂ÂÄôÔºåÂÅöËøáËøôÊ†∑‰∏Ä‰∏™È¢òÔºåbÂèëÁîüÂºÇÂ∏∏Ôºå‰ºöÂõûÊªöÂêóÔºü</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">test</span>{</span><br><span class="line">    <span class="meta">@Transactional</span> </span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">a</span><span class="params">()</span>{}</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">b</span><span class="params">()</span> {</span><br><span class="line">        a(); </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏ç‰ºöÂõûÊªö„ÄÇÁ±ªÂÜÖÈÉ®ÊñπÊ≥ïË∞ÉÁî®Êú¨Á±ªÂÜÖÈÉ®ÁöÑÂÖ∂‰ªñÊñπÊ≥ï‰∏ç‰ºöÂºïËµ∑‰∫ãÂä°Ë°å‰∏∫ÔºåÂç≥‰ΩøË¢´Ë∞ÉÁî®ÁöÑÊñπÊ≥ï‰ΩøÁî®‰∫Ü @Transactional Ê≥®Ëß£ËøõË°å‰øÆÈ•∞„ÄÇ</p>
<p>@Transactional  ÂèØ‰ΩúÁî®‰∫éÊé•Âè£„ÄÅÊé•Âè£ÊñπÊ≥ï„ÄÅÁ±ª„ÄÅÁ±ªÊñπÊ≥ï„ÄÅËØ•Á±ªÊâÄÊúâ pulic ÊñπÊ≥ïÂ∞ÜÂÖ∑ÊúâËØ•Á±ªÂûãÁöÑ‰∫ãÂä°Â±ûÊÄßÔºåÂêåÊó∂</p>
</body></html>]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MrDJun&#39;s resume</title>
    <url>/p/90391726.html</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="ÂØÜÁ†ÅÈîôËØØ üò≠" data-whm="ÂΩìÂâçÁÆÄÂéÜÊó†Ê≥ïÊü•ËØ¢üò≠">
  <script id="hbeData" type="hbeData" data-hmacdigest="0559fcadb2e3150898e2ee9bde66d58903485cab5616321d7a777e3ae2a22c07">601062fcdaf3cca9d544423806934044380848aba583af6c1ea7ebc532dbcc8f340269dd12e0c82ecb6ab6129d2c267f3a2f2539b8ba6cb7556da32c4a21c9b2fc1e5ca19ded95eab342713dc8d07e6108c7b3f20c1489011f2706c12d97f13a9b219c18ff6ef6f746cfe59ca5c51de8ad5e5e92c76e4cfb1a4d4c64be105bf20d22fc593c42d994ba628ae661eb409e71b16401e8ea095d02738ddf246f5e2668811f9323421ed17fce1d44807ee49c3daa715b6274bcf1eb4741c9f087815c1bf48bbe27a46a215690a7d3d03880f7576ebf88a9367eb00c02d8b83fd545cb3bf1b11ace09fe93b467be4356abdc62c79711e0b30e11b1efd0fb9c8b58a266f3013dc546e80514cab8de3e0abfd94795d160eac82c9dc1959b868df5716cec6065d2d90d4f8e5923f1c7ac87f851ebc2257594b26bc83cbe36601c96b7afef065b1dafee0b74620d83a06c89c80b82bdbebe30fe402b115d8cde03a32d038d00f7fa77ae1869dce2534170c45fcaa84531c02f6bcba0ce4ecce4cdb1eb4922c8bb680eb94ddf41c7ddecbe65405e20fef47194875804da046d3aed61c0e8b3f1bb5107f9182310bbf02f2e60e96bf6011a0037aac9d041a662f33eedf9d52e38e676f96e39a7f48b0806fb5e0505eb50e58c61521110b1affe416fb6ad5cf59f506b69ef0556c208cd70b2ebb8b814b9afbe563c29749a525efadce0f7e89f3c27df3f8b6eb4327e40a5cbb367a1cda191dbc0b393fffc6fcc85872bee07e9e90dbcd84c562577b160fd3d9f509c5e715c134fba1003b352bc0ffb20eb3e1edb95334ed55928f98eef65d8c9dd16d4d788f6446ce13d6231949d182e71f307a827952b5cea650f59a4ab81d7c109579d7f253abdcd86149f19b49c32d398602629913c0cef86b1c24f640563d705af7015dc6b828a0636acca5c08d6ba76932191586929ee7a14281a1823feb2ea1d712ce155b49934f4b0a5c787c73907f17d86e5727a5ec3ce0cd831824f1e7f6e384b0d1bfcf0012b76163302dc8c9b1915b9872196d5c6dc4b7fd828c05700ba0bdb079c8ccadbba2ff22d72b7a9dcb60d0efe50f848a2714def4bfa9a48d65c14bf2c2c2609622e9bcfafd5cf388cd3d12a83f7632c1dc22058d4b565ccb98b1aee0d712a7627aa07ff190301d00f47816dc9cca7e10068e6f94bcd3e53d1b25d9b5d3c7513af4f65c0bc0ce2cc5e88e126931218e354a6f3fa0f179c1ded5c398c0d2303fbe98e15238e08309733af554f7edd62c0c4e6fbd5d3a65e18879f938ca880fd8d3c71b783f64a16e3b201923c0c596dea82d55206eba3d106bf80cac882da05beb3c02d3e3fb1f738ecdd2a4243d16b2f1b8d120457889bb71ba94361cef51dbaa58349172c3e677ecbfac16880d7674f9cc7c265357a8beb888a071ca322a060b50383c3f3c03b6cd67d1105aa37a15593fa7f0dc55e2ee977dd2d234075f256a42f64b8dc28e4ebdf04e61b37dacdea68fc55dfae1bd67f8e94f3c32910f434b981b4c6c23747a454f0ae63efb9826b3aadee40b172469db7c6f5b39f193ed694631b2bb782b53962554f5142cdbc563e707db04cbf43c621f0e98a759d9c82d8853430a408378e4733964a0f23a5feb5fa0408e76c141798669aea0eb37a4dcc88a6790281b997a519ca9ff4e49267c044aab64c0135d349e163db230837eaf3ad771cbe028f7b2eb408aae4f136361a1e035a091aaa2770bacbc3ce134c84e382e65240c87b8b701411a43616e84069ed90503aacf3bde820e3519984c678a68fd93cb00bf484e2e18df0ad2e607b7d06f0de43af5e7cd252d7e16eb89f489cefa41acb3f1803672eb6726796b8c20263afe220926d5e20d8be2c5e5af83b7e17e3960993fbf8fbe526937d8318dc5a6d6e0e902dc466a33ba5aeda84f98313fa4b47069bf28ddc42d100e3282a00cb418670fceac4e711ad6032cfa984de02f03a7ce8587ca9c976e06fb671c663832b982afedc17d874f97bd3d6fb4a113348e8506d27a3b2e3ab6ebd0bebba4d312482bf3b43ab4d03b179becc615ea935acee9738f7471b572bcd17b323d5590baf407945882d25c7f1d1c8fa9514a160d985938a867319d8169855dbec36190f7703af1811dfae18927992e6c0944ae1d347f5398372e43bcd3aea4ea3f3ed3cd5743c9c7055a22c5c6810ab0cccbe4dcde1aab11285a5b1696f6342f12498948ccc53ea9249326c615f365c931c717506ed99ce8a5e422166e8134c0e30c9760a9a26813b6e644326dc6d64f2cf4706d2bffef1c293e00bc822ef4d23cef378730a6acf4209fa362c4d8cd8e4af924b620568019ab6204b255164e5b1495cde26296e95e4a2587727cddaae365ff5ff4959e7ae731809be7ac835b84fcadfc9e26e3b51cf50b92f0f8a3cf1afb83088e3dd1b7abe93a84dbb4f80e31d341b25da7020bfbba989d86d336e55a453eabb64ae1b484918e7c7eec67b852bc385147314eda765aea47c700dcdda62f76f1f333913b0fc7707b725170a79a4b4a7c9e772203536dc582e06540958ed41a18ac57665ed76f6ecfd89531a44770b46c7acf1e3edb48320af72639c0eae76337e3f7f0394ac7272c4456f3320d504436e7bfdf0a768d0c783d3ede63161e5563036de98726adb43099d9409a6728ca1fb96d1af1c02eadad989657adcf5a238e4d2a10524efbbf0dd00628f0f70200fa64e7907835284ef14dc4ff4ad59d66512646cbb3354100fe08d09264e9dea23b12bd92aa3f4d63bf6e410d14826b2fb9fe2256f941b14dd09ddbbf53b6f6aaf7650410f3c2c1a0328f78f846b01664bde159117b2c15cbbaead5e537f3cd42cc62845dc627e2b23baf0b10b03f04a53c45ae04b00628da0d62d8eeeebbf8245a5488a804f31e31f97b6a3dccb8b8fff5f3c94fd76874fd5288c389ef2a3a7e76f5ec3e13933220969b3cb92471e941bbac7dd94fae7f9b24277d39820875704bb0f09ee8f406451ee377ff9bfb817cf25ca146dbe97ed38227aa82afbdffddffee459fc3de30312ebe569151ba783bc1556247d868663de52aff6aad248faf1b7ee68b9a88bc69b43aca17be26d0ec6b03511fecbf73519a69c3dca73ea48518b80a3702e8da8493db239ac916c5a171ce2e50ca7b5ecd6176e64edfd2264e957f086af05633cee112761cbe6d29ab88493433ff11dce45ebc75bdeb22093f6195fafae207cafaee6a3403e8e14cc0f192d662bbb05edb73d7caf28ce4b96aca57498fc34236cada301bbdaed16c9fed8cbfd96cc31770cb835d7f94a7cc46af60ce3e0ef5b86ee187f5b3e4d3b63af61af72f4c1fb2575327af9029b4b3c3da2895210293a646c5d9b574987d88942bfcd4ea3c0aa6f13633a66314679c9ee5a0636267c5b9bcee5c35fe4cec0924feda5b53bd34251d50cde1b3a3fd073cb92ff9a31bfeabe71097dd245b393c08ed9f3d55ae7ac602d045f6948cc11314a4e010d1c5bcb0e72418cd1deebb2fb74a0892649a5f0763e252526a84d9a357dc12f991d744bcea84ffe5cb72cdfbd712794027587bd27bd30d5b5cf19f3adadb7a942c1ab8ed7af5b34c8153600f432e68f7a22be1d8f12ffb45905900fdcf2bb201bb1e1028dc9eb93446bbde714bf82ba249bd31c6b59f54ed9c282efa8c7410aadd2a35a52685e6e41a9849ebdafca9da7e385f137d45e6d425b0bfaadc1fad0d0dcc9d22335a68e87018e0f4d82934b52d4c47d68fdb12a21116d48ef528cf646f4c978635dafe31ea20a5490f4d035233fe7550679b4074041a90c50d4a7c628df8c1b0a659ecee77a1e8135f8c94c33424da8ec33abe30f72daafbad53f304ed16c0d7f6f1e8faac6f77afb130cc5ea473078553571a52088b7b8816c2fea7a8ed1cd7e2b95eaa4d49d4078783312ab31b589248b96a6275ff314388fc53a5c4a85b1515c28e9eaf7729c49d6b0fee3be9b54c7911c1e0f70e9e217d3e35c67629e3b656894a297729ee55e952ca06abb7286582305aa1e19987c2a2416874b648b9c8156a2bbfaafa7d511c2e28afa289d151a99c09c68aa5be882373ac27c7b76da9ea3d716ca0ae8aa90451c634907b85c3d103d01bf1f8d37eb0e8f273b2e5ddf017de3d910bf8b4f1ed6f2d203c9ea0bb7b0ca1a41508dbfff411844163b54c1091350e367142e968a6be754694f384b51c1bcb7441490964f1e4f743a10089595d37841ce46589700971f1cd433b520ef91b96d3f28f0bdd00df02057ad2ead65e37231263ece2b399992c875f603bcf68930707d55d9874978147948e2c2bccf520188c2deae491afe88a8bace6a0cb7d96f8e6da92f433083985fb3b2f69607c9ccb7c4802d94a2488a32297d3744b34f24174ae2a361f927703670a46c33c6c125a438fac2726f75e81fab3e8af861ffcc988fa064b6579b4ea6a2572ae17362359eb721577d2a8a6e0c57504be1031f7f9d85b5b7245947445a023589bf32b7a67ddd5fa0541fb65be45e00d25c57190621b2ced8e15fade9784b1db062c34643571ea82cdf7540d66b087affe7bbcc81d8050f616540fc5fbc4e95b698aae1851fd8cb5ac9730dfb17188a67745a60be4bac0a88143bdfcdcc7b320ea68a074c4af0a0a9175ef2253ab642ebed14b10f89d7dffeccec50a99ececbf4368d05dc642fd091ca712f28a6939b3614cab79dfb6018c0489811898dc7a479378633ba1fd4761ca4ee2796fc0415cbb1a6ae741c3b36b6f45632296e4f3c624d90f04e75d05d319390dfaef3e319b62dda494ffb4f74ae174f02ff10cae14dc307af50879fc8bc110dfcfe8d44826110602be28b2d262cf0e077cfead2780bc955ab84eeb285c227bc7d7f6cc5403f1a265feca2a74c33583af9d89acce4052864cfafc4bc38a6db93e1552375b9095e344f74e1b99512775a74c353421cc6b079352a27939a8700401879622528c6918f41aa8a49243fca3c7ab5fa2e9a439a59e934fa4819a03bb548d44be3c7ddf141e44ee6fa2fc52d073d6a5152c7332d5725e4f59706644f61294a2e601c81a7eebc29f84baea30cefd4ebf2cbb54d68fca1d5c60c901c424dbbaefa042750e685c2dd34603bd4a6c8230507ac3508938b3cec9bdbf0bf78d2b8f9d008685000b950f2f05b4fb3e32ca3151830a4c14dd9b735cee8c990abfd791d8420969370f6cfddd1b558a5887036de2810b139f8ec13dd3e6b23d7f77c57b3f3245b6731ac270908fc19cd2110c1c48520b7c0aafa8d7482fce03508227d1d39b507e875c063130599657ebbc16ebe987cc39de1f297444dd4b330f94045d624dade4bd800ecb39150e995007d05efb8f84bb04a483f2f273271b9e3667840ab28dcf8598e248001280fe859085a43e727793ce87b10aacbad90551db1e6c476aa171fd8437f36e2057d585238ad0ba409f31271419a5af9b6597f318cc6e21a737f9015b38b86711cc6899054471442a1b7d719b478e18bec7377850ac31dc37d2860b273f933e90185a75234c036d97e2d2eabec1d3a38474de20c9aa5a5b07e6111fa68c1663e2714b3493a0788f85b454b823edc796509573940bdfbe3dc32187f77515754dcf17af89bbe9d99880c4daf1ed66fb3006984f2b8f23fdef767bd1de84c7dae594cb1dd84b8682899f971ffaaef001deded71843db4968020b6c4dae08b86340715ee4e94246972d731b804ff4dc0fbf2faf571d818d788a67cefcbf5e5bd67e317b38c9cde2ca62e1d8b6b530b88ba42bced35fcc38dfc017f1b8757bbc5944e1316130c1b4ee6a432648c94421450be6c82eeffbb6a4c04f38ca66f2d7b15038d0050805f331bf90d59c2d7d2aef53e3c430ee5dddddfb15ab5b0b1cbc640c032da7dfbf2ad3a503f5c5c4fba93c7db0e691564556ae17b8cd5b5cfb577cc0e6a03e9a610250ca1aa20907d7a6ee14db2575a8af7a0f26be360a73b5bf3525779365c7aa907607584d863065097200bd32e3cd69096ebf37bbb6fd7ed45a4918caeee47923d51b881c404c05f9843b963fe74eeb700ad61d5eb68fdac09e36cafdecff21c577ffa156753b3e4a3ab35f48e400c785c45d89c576fac89169efff3df6d70c2edc33e246ed367d9575a37c38bdcf900c1c40afa4cc61c0a38430e0ceb68d98b267638468d8c296404d3bffba2d33640e799444b12d38a7a4068977b68555a70cbfeac767e0344c0ae75c2eeb217e1851e1f5738750b160234ceafce17864cf2df180b13fce651ca7ef48bf7ca977ada53fd259855a42bb0c0925bc70d6d5ed63eb1f98e6eee16dab778d66db9d13f1b944c2347c1abb806c098dbb9669d6848d0da7790394c36650bebe25b5cd2db3ae12ad6dd601b714d76cf0d4066fd25cfbe95dbdda20068db7e480a2850553661e2d3d6c0890637a79914a46d1c7a6605e5226f38d9a2050b90554de11cebba1858040c33ca80f4598762cf1a928b77a9f14ec6a2010046a7d9675c3a2a9f6d7cd5c52760f25c6c4649ad6ac304c65cbc185345e94d25f41420d21ad48cbf2eea2405b77d68b8eec5423163ce0cbceed20013be613a597c51264e23bced8c94a0c5f77d09da2386af508e38d95274c957b206f268dc97ce58484c2700b418cef5781a46ec963923127682da642f923ece6f24a24229ba357fe75b1f5d12083cce9c686aa358277aa88c44fc9adc83576f99961de3e2bce0578a0883e3787b93bb1ad91b755a73e9c0376e2e1dfdb68cb1a849f5a572f8931ec4bda7d92d445bdc62ca75c5155043f5dd7c74eaa17793584ffd83ee82ca306c561040b40eea80088c4661f916a475e12a24ba26f4b9b6e7d41e18af4874909b8f925cf358f3750d6d53ec1275780c9b4eb0308771baa7eb73cacd2164473c084ebe44bee474732cb1c4f6abe8a0b006255e4fd56fb5ddaf5f725f4548b4b1197040abcd8d96594d8d415f70f351fb568226b667c7952389f155986403f553f5a95101bce1a626f0a788d291a8113549e42c5a1e8c9215ae8002f1fb5a6597105c6460b500e4bc3b329f859319f0b8be419180e12f0769226fd63b8b729f086a198e5a195392968e864e7bfa8040e0a2b02dc3628fe9784bc9fdb0c5c942b9c8cab1713df4f4c8acea4ace7cf33eaae817ab53855b9f2ff6f90f23b1d7faf4c4e4f29d0b817588be8956dc4eb7dc89260f8fbcb46127b191cdc6f88de339d7514540d154f80672c16567616b2437ec1572bc35f307a9b68f50e44a3ddab04ec01c5d99c12aab1d99127988e8cd1ea9d6bf1ed8943992f0456444fe9de7637d697da789959c426e6a1034c9390f1225f2313df3a713003ef418b13ebeb917b256b88f938eb63f638d007f1c0f8459c146d115bdcef757ecbd0f423abca63ed91bd18d19e63833ebe68e207b845d63e0978811c8928fe94e127756eae9a79ef868053f0ff548b009c2d47f247bd4779b3b3e3369b68dce1a489a9ba5bcbd2ed976e17bddfee594ade757e41cf39a70376b6e153e12839b4aefd3df8d09ef9cca408fb248d17b76b3cdc5830bae10bb1815a9c30bf609fa38906941ad3c8827c848eed0b1283fedbf37631a305867ad1a2e59b7b539b227a45b4e8e31e18414b885518ab90c070bfd184dd702a94ebefed8bd156443fc9ee48ddb0dacd4e171b954e4f615d36e07a8fabf298b9920ca3f50732818517b48c86ce6fbfc4d0f92139050468a562e0bf97db2f257838ee3f9268c55c2883d8f3f4c427c64d3eaf622689c0ff32a6a41599c26c394f89ad727dd8a0d88b956ae0e677cad195f4c784b956e3b1d41f3328e716bc5b3eac9522ff8001f5631f9b50a399998b12a59e32b9ccfe4e8d5ff98c7b2e505800a2f9ecc2e12291dcde543061b21a5fce1d57bf88825f9b00fda25a5994ec8c1b81285564535bda6816826c559d51e66c9f4ac6e887197a9be4ae7177505ea46537b166d70b8d8caf1c17f468b10292eaab801caae161c577b2768ed1ea4393ced04c9f6654fae9f027ea56719dedef31d0d95e6647f8415ea223b5777f0dfe2417bc134c82c634ca5d37dab9bb0a5dbf58f9a7d6bd178f746a535e9c49da79ca9081517f74325df033fb86bb1c1a7445de456afc1797578fc029115350f3e80360bec02198ae8a7100cc637b1838309e59e40e7945c874834fa23cac673b9202a84cd656253021af8a5f59a4468e1d5ddecb1bf21275deabe7c0e5432c5f5ac8007c87b38eff9276c871a2819b69bb55984dcca93c9f99dd443d5df979c73cfee989c4d1c9d3f9ca38d51c80bdc481a37105d05aedfa6d9ff6d694786aa464a29c91766fd7fb63ac2c7b0a60f53be0782e85117ee3323e58c75a9b66741e654e2fedcb24668aa800b3fd299beafafca8ee90edf3213bee5f4b4435c25284c7a4fbe8d96a86568f33a9053f19d7bd317d2431bfc211d1fb00839953a457a5603e2c0fa8a1de30eca2d3774a461ce529a7be6cc6179d23a4111477e133fc2cc404a028bb2dcb40dfbed870805013012b602ecf707380b6d0997994f1e01dd139437fe763c27dd5f2e43e6965e97d378a38ad2bacfb2d86b77c8231e96ce0f6dd4d1711de369963ee8600472a7bc98b640137d67bf8390f40f732aba10216a62cd09d6c19ab1a9da20bb4496c26e711793ba68da5e8de727d81a43e260985549df809a11f1b98140d364095257db697858074c0da3d4077a660a7c4f6b7e28a1a4ac70bdd3f477530589c21c23ff0ff0b478b1bb7b00d46cf9f333438a2362c026119f7c239242bcf690b58922a12927620b9cdd93c31cd7bbdb49d106174676f22b254ba4efb854d42c60e2e9cd79770eb1c24553507d327cbba7835d16f384835e5b97cf1d3f0e8a9586cd0ec8cd04588a5ece62e30e5b58e32efa887aa66a0fe193d550646077d722a5ce8494215fb20038d73f90ee8f163311787c9385e6216d47629e7c2c59d654a0d118e2f641df03a93935dd5c84763a96207a36113a0d48e51d68b3595930c8075fce7614c55c0c60b5815e87539a77e0191aed15f758884042b67b86ecdd5e0e69e50a885ec33a30393d1ef2bd3ca3bb3fc84613ddd259ae8243b3b23f3f595dcc728cf7de9180557d485fb210c80befd3f8cab35a4f06a56dfb063cada2ac2b5984bff7048566327c0b54a2d96b854138d3978f849b3b68b2e2890a08cfce7a58ea83d179eee9fb356e56b140928e7d2486da672c8695bb82ec88e8f98f8b03e739bbf46792a306250dc21a62eff944e3c59c371932acc7a50bcaa4b1b23e1a26cd0fd3cbaf52296ffe037bee10ca8ec3e872fec9869f3cc36fc2ff3e00675c5f71ba942d4178eac2a689bbb7cdefdbeaba4149dd6d3d11f8f09dbc7d6945a53b90d8d1e2ad2200283c4fc0f5abd8091004df67f2304674c69772a45ab26795f5fbe0c3d9a0f9563a3cddf2321f956a696ada0af5247f573a2329313cd283ea38c5a79685476f8af9a4758e2d54d633fe50a17b65b6c2d66d99af7c0dcb4d099e26051f5c2aa8eba0ba439ab782e8394a261d8de243863a2fe7080d14a5072e2ce8a417e04ef11f7ac6c2ce8b0efaf709a4650d3e6e8def9c8575b341a8103aa1418ddaac070e03e2fc061741a56a55c6604389d8ba25d1fb6edc424ef531eea073e15742c1d852c109b2be726957ad5da0ab8bff7e0d83f941d73fbb7c2965f5f4899c80e2ac8ec5906db33d8cf93fb7a3ac631392a76b78b1842a5cee3d0aa3b39b0def7d107b31a638da42e128c2e999ae7103d3bbd628d04cf93337db36952f4b2cbdc46404fa1c95e751389d3762c1951d6cb4aad86370894e815a7bc73c9bc495e738bac1c78e69e365a3522378557ce1f29d94b7c22e91c31fce72446982f07d5e9e701cb29aad4e183d0aa36d3ebbe34c9599862d86ca92c2c29bb67279207a0a65df70b8800948c2e12bce798459b8b493c1df08ea7646ac79f39bc51f923765e559270a90ab378c8f91e946967bf95b175d0ccac160acf404a29461c7344e395cd08a9b09d8d26d92a5671555a10d99125ac30beacf31cbb6be24732cb86a29b20018960d72f1aa160969f2d3a499d9be608751f57c36e44356cd68cd12d8def532e858f8f6cb28969b47c5207f83d35645f3fa093ce168468d99d21436a6cc52467fc9fc58514bd6cb0107dc2b5932adf9b0591c3b5bb5e7e6a1a721e620454f72fcb9001c8062115924a2696e9547b6cbda25f753ccd864f5b42e82e11e4b13e7a01e3f35906b6f1b5c27e03294b8a61fab5ea0423b6d0f3a888bab5dc9b3f582a32054afe26dcc3da8e6c7b59112872250d0b3aab8cbf856d232d0b050d9ba2e359960416c6da2c08a40fd4dd31de3264611e2088048507c7c4249ef73d9ca0c2e25e8c96ea5d902c96c69957c2a3e3eae573e72b17ee4045daca23fee21a59b43cf1aa48eb3f10a907d9e9fa015761dadd25e4d2ff040852770b4cb1a1cb112ec27ab64fd92872d6abdefc6f5f9947b0aef2bc9902dc86c429432c455f1c922bdfb03da8839cd956d96f2709670cc0445c9e9bfa66f003e7a8f65c9eb6f0678bfa44dc56f232d8f86c92096086eb5eaa1a3d31953c68218997cec1cd6ae2020fcdc2241033afe7dba05ee81f0c81f92303e1634df551a384dfb9e23de258c0c70d69747e3804f1bf1224efe32bfe880b5174e0d76a876cf17ed9f2a48ee4d5f1f5adff62a3ba4c6b2e146ee927fc71cee9af0a73d6c4e5fe91b2e86b53a031fc6d1392eecb40829acbf0869bf465c522ef19419b75d3e20f2d5619c3d8653de5ac7f25054c7b1c92320bdd44d3097cfb53a5aa80a6e4ad7b1c9a5fec7ea8b9eb9b543fbd279ff2109adbcc42c1059d4f9a6a459cb7ae4457e8235b9546307a2a9a3cc0550c24ce2f6d1bd92585e8d0d5f139792c65f5e6b5cc09a0c2a68cd22960dea340b069802a6d7b812f2651e83b0cf002291adb691fd4606bad31e98f7d7207479b108d86d227d98db3c1360cd764c1209f9633800fcc85fd01469b0f5742d7a57ae22ea9a85021fb1c4fd2fc752ac3b4dbf242720e9273c9e7d39aebeb9e5ced34747a8c3d68d83e199b527577fd637ac560ad16bbb4051e6eb1b44a348a249be4be145c20da630c537895a6e0d663bdc6a80d0660f4f684bd4851e5bca84c92776f317d10cc8c628ac42bff4f756db20138def0bdf2d66ac91ac6b0f76c4562fb326a706ca0d5d92d295269a234df84abf9f3ba2f17d90b96c03960ea8f38ad42f9f5eacc1a8a0caf652c9c46c778015cdeebbf6f9c112e14118e11f83ff6ac4352b2f12bd822a60aaa97eabe3f63e2bcc3fcb1f865f446f1f3efdd0d68f5f4fdaa09a52f32419375a32d8486829b2f26f717dead79d454073dc05768b8e83467fd86e455eb5704c0509c0e495f8d749aaf2e8218aeb0d056a2bb67e47ebcb8c9a7d1373ae7abd3bfa83adcde93ed6a2dacb9f859239ce09f4b2166f7ee06575b13343327028307c74e856fe1b5a84035ff758b875411f2697d29ef54c2ba38b3151d5cf425e00394097596cf1533b16ff83e6536852aa532c557aaa717011b9c60b3a4254f4e3529e28bc17c7657f041ed1255b2de9ad89ee8bb2f15823aec7576785b597af1000c411342b98de4978a1d6f43b6c0da19528f5e03e7c0ea8b48a14d07d1bef7b56a30f37a34b37235e2860445990a363756b8bdfbe643b52f392e69aff52c61cb9603c09320ebb6db3924329ba7a9ea7b4f210394f5af3aab6f64f1aa40f8f705187f9ff65ead0b8273ecf1fd11de1b2fd39d655f249644163010d0c4c787cca4efe5a52aa9bbc050bea49c4b19cd458b4f0cdf05a2e6ca5998c7575752e3293151c5c9d843a2d9f195ed7848685bc2d61abe939ebb28410d16e7cf863717a8e59d1d583d78eeae213c6b2020770fe1811ca54c53206a4380d079eafd2ceefe20843c890ede97939d9aba2a26ebc7ce60318546e39209c7a8fec999cb47077611c6b27add61d025c61aeb53a3230b89e614ecf4be8f7c31e5562ef28b41554916d4473faba104f195441dc1ace2588752061f03d7549a6f3d4106d363bc5a0181a1a14bf71fc7bbd917259759855f00b6d1827782ab50a389b019b73b8e7b579ad5f0168faab21802a2a462d028967b4f060b9e80ca7c81ca4bcef3c8484e68aceb1ef530ff85aaae51e8db1260e6bf2735db9d2f93540fd4f27dc0a47b9109c810bccae013c545963a75b86a3248b1771dced2be06f35932a47a82cf7751279e281ab5e64397d809af893182949ab62735c4ce88011f822b31b0f1bb0c52fee8e18544539f7597f41f1b78f64f6645d23bf3f9f46a6e355d94aa12bdbfcce7d68dd163f3e27e853cc0ae1ca71fb8e4f44566cf229a8b2f559782ca8c5ff61ca1ff30da3279db0d541dff1567e2b198ef7baf63322bcbe91c18425e8c31f86026420420b429466bc1c7b84295f4f1a45662ada096761457cdacd9898d70efc41385f2fa0d5c94a6db35ea8a6bdb0d9928e6a9f0b06ffca80cd78a2f71d66699cc6c00e804391abfadad805cb3047a387cfa072253b72e0d3488fa1b9466aa1a8770b43f3cbf608c2e29517403a388375c0620b39820c2f97daa104b242325950a5ef9081ac3781b01908e2f9c0247b94f817c79a92ac69632e9f77d3eb40af0d472a230931ffe021f6f1bc23bf802b88cda054c04afaa8f684cc01fda59670ea61889be52c62cfc7be81098e25e08c2f98080c890df924f2ad38bcc57b0613d2b9b9f5c3643a0078556bb6964c10eec0df6ca62f01fdd7cbf73d102ff91fe51c96d4f8f54e9de8445b1213a4dfebd3aa767393131114616fdbe8e75e05146a5126e149e3439cf335d2eddadde9a0c5c868d12da5f31673dd331ce8363723fc14ee76f8ad88754c45a85f64152725226452ef4f4758aab58756756ec52b478391d2c3af75a56317e14580c07951148b924d23ccff208514d6081087993f0db93e8b28004089150b32fa753f1834f78eb7ca9a7ea53238196c1d1c870d6bc72b08e605cfe4cfda88372b810995747de1e60f90c0920b101ebd02ed747687731be239a16ffbcb96da81272eb529cfcfee22926ae04a059e95b8401bb27dcedffb0fde7cc52abc8fc73416ff8c11105a399c1f854fdeaa1a9745a49bd208df9c83d6c5ae17630b7050c56cd918b48a9d4659afaad4d159ca6a0d679a62538fac4f5b59fd4fa54d1a74efb581079dd2b7279aa4ef1db441b49c13cd5f0d456dd4fe5d298e21edc67c693dafb479e268cf40d1154244cad7d755ce9739d6243c647791e2ed7978435a1cf51956c2627579f556cb2b2ba0a323af2d23118affedb059ba4d9b2a5cfe7a8cbbf0de9bd8a2856181e5804db7728a1bccbeaafccc97c0cea914bf6d6bd7a582e2eeff821c82265f3d6f205c0393fbdc93797ac5282e44c8e6eaab14677a4038ca615f914ab7c5a7df6ce70c2f830222fa23ea117ff384b1d9ec6cfbd8c464cb092b9a9dac3d9076099a7bb551b194e40f3021c23e927ae9905b379c01d06caa9e77bd1052a6e1ea2484ccab1561c92b14bac7b6876b92a05f9747e65ebee384796fdc1b73eb3b6999dcf8278071f948eb48a3ecca0e1d917bbcbe25fd3e7aef5b65dc3fd806617c48386aab81208778596af2401c7c58a0dc0373f48690268a4696e8e06c60c1fb0c62c4487c75b4b2c40b12086e596ba0fc94ae4ad2a391dc1072866ff08097ec9c185d06a3d5e5c386bac5147f18f9f61ef3aab55ae57f9e714da9440d168eb2f6c4ec0622b615b5c250eb45cdc9b03f5e7042c58657ded8f4caaa18b822d19f29e866580364707e9fe86d77755172e73b1ff49c2f3327884e0702026260edbe983a1f583314f0c99dbf7ec9838aa20a4b0bdc0ee774692e9c2092df462e2b8a7964032aff69284ecad4cb871a7c9d587dd8daca79cbe6b9eb0c831d1868331a4515a1759b419ab22220f0a05fc7b984ef48b5cf485590d79506c3c90a1fddc8382d4a01402f0d83dc4a57d327a5b56ed45dca2c620a461ab4549c22bec5c25483f2ce481d68ab01478de87fddb8709f8fdb006067b01d248b3cec2858a064c3f61b6c49207118570ba5db945116bdca71f1ce1319fdc09b4197160227d1e0bebc9bca3d777bbee92365d98e0b3cff88e8572f134092c4301cd350c297225cdf931eea37caecabcae09b826e3d34f05d0e65d12d9444451978d340520f95b360e3630f59f2854027ca6aa11af660ffc71e5d68d75bc8c90c2e70b12a2e121ea2de04a02aaca8ef8b27921e9e5e82ed6766150b6c752bbcca4dcc35b1645f2cd8dafad88e77acb1b4c26f164116a0441b6a40503e83e4721cf0cb39b3376cfe1d544522bbff378bd4144373853b03b6fc0d9234fd01020f46d9a6396939</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-up">
      <input class="hbe hbe-input-field hbe-input-field-up" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-up" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-up">ÂΩìÂâçÊñáÁ´†Â∑≤Âä†ÂØÜÔºåËØ∑ËæìÂÖ•ÂØÜÁ†ÅÊü•Áúã üòõÔºö</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Ê∑±ÂÖ•Â≠¶‰π†SpringÁªÑ‰ª∂Ê≥®ÂÜå</title>
    <url>/p/4bb4364.html</url>
    <content><![CDATA[<html><head></head><body><p>Êé•Ëß¶ËøáSpringÁöÑÂêåÂ≠¶ËÇØÂÆöÈÉΩÂê¨ËøáIOC„ÄÇÂú®‰º†ÁªüÁöÑJavaÁºñÁ®ã‰∏≠ÔºåÂΩìÈúÄË¶ÅÁî®Âà∞Êüê‰∏™ÂØπË±°ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÈÉΩÊòØ‰∏ªÂä®ÊòæÂºèÂàõÂª∫‰∏Ä‰∏™ÂØπË±°ÂÆû‰æãÔºànewÔºâ„ÄÇ‰ΩøÁî®SpringÂêéÂ∞±‰∏çÈúÄË¶ÅËøôÊ†∑ÂÅö‰∫ÜÔºåÂõ†‰∏∫Spring‰ºöÂ∏ÆÊàë‰ª¨Âú®ÈúÄË¶ÅÁî®Âà∞Êüê‰∫õÂØπË±°ÁöÑÂú∞ÊñπËá™Âä®Ê≥®ÂÖ•ËØ•ÂØπË±°ÔºåËÄåÊó†È°ªÊàë‰ª¨Ëá™Â∑±ÂéªÂàõÂª∫„ÄÇËøôÁßçÊ®°Âºè‰øóÁß∞ÊéßÂà∂ÂèçËΩ¨ÔºåÂç≥IOCÔºàInversion of ControlÔºâ„ÄÇÈÇ£‰πàSpringÊòØ‰ªé‰ªÄ‰πàÂú∞ÊñπËé∑ÂèñÂà∞Êàë‰ª¨ÊâÄÈúÄË¶ÅÁöÑÂØπË±°Âë¢ÔºüÂÖ∂ÂÆûSpringÁªôÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∏™IOCÂÆπÂô®ÔºåÈáåÈù¢ÁÆ°ÁêÜÁùÄÊâÄÊúâÊàë‰ª¨ÈúÄË¶ÅÁöÑÂØπË±°ÔºåÁªÑ‰ª∂Ê≥®ÂÜåÂ∞±ÊòØÊàë‰ª¨ÂéªÂëäËØâSpringÂì™‰∫õÁ±ªÈúÄË¶Å‰∫§ÁªôIOCÂÆπÂô®ÁÆ°ÁêÜ„ÄÇ</p>
<p>ËøôÈáå‰∏ªË¶ÅËÆ∞ÂΩïÁªÑ‰ª∂Ê≥®ÂÜåÁöÑ‰∏Ä‰∫õÁªÜËäÇ„ÄÇ</p>
<h2 id="ÈÄöËøá-BeanÊ≥®ÂÜåÁªÑ‰ª∂"><a href="#ÈÄöËøá-BeanÊ≥®ÂÜåÁªÑ‰ª∂" class="headerlink" title="ÈÄöËøá@BeanÊ≥®ÂÜåÁªÑ‰ª∂"></a>ÈÄöËøá@BeanÊ≥®ÂÜåÁªÑ‰ª∂</h2><p>Âú®ËæÉÊó©ÁâàÊú¨ÁöÑSpring‰∏≠ÔºåÊàë‰ª¨ÈÉΩÊòØÈÄöËøáXMLÁöÑÊñπÂºèÊù•ÂæÄIOCÂÆπÂô®‰∏≠Ê≥®ÂÜåÁªÑ‰ª∂ÁöÑÔºå‰∏ãÈù¢ËøôÊÆµ‰ª£Á†ÅÂ§ßÂÆ∂ËÇØÂÆö‰∏ç‰ºöÈôåÁîüÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ËøîÂõû IOC ÂÆπÂô®ÔºåÂü∫‰∫é XMLÈÖçÁΩÆÔºå‰º†ÂÖ•ÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰ΩçÁΩÆ</span></span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">"xxx.xml"</span>);</span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) applicationContext.getBean(<span class="string">"user"</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>Spring 4ÂêéÊé®ËçêÊàë‰ª¨‰ΩøÁî®Java ConfigÁöÑÊñπÂºèÊù•Ê≥®ÂÜåÁªÑ‰ª∂„ÄÇ</p>
<p>‰∏∫‰∫ÜÊºîÁ§∫ÔºåÊàë‰ª¨ÈÄöËøá<a href="http://start.spring.io/%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95Spring">http://start.spring.io/Êê≠Âª∫‰∏Ä‰∏™ÁÆÄÂçïSpring</a> BootÂ∫îÁî®ÔºåÁÑ∂ÂêéÂºïÂÖ•Lombok‰æùËµñÔºàÁºñËæëÂô®‰πüÈúÄË¶ÅÂÆâË£ÖLombokÊèí‰ª∂ÔºâÔºö</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ÁÑ∂ÂêéÂàõÂª∫‰∏Ä‰∏™UserÁ±ªÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> {</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Êé•ÁùÄÂàõÂª∫‰∏Ä‰∏™ÈÖçÁΩÆÁ±ªÔºåÂú®ÈáåÈù¢ÈÄöËøá<code>@Bean</code>Ê≥®Ëß£Ê≥®ÂÜåUserÁ±ªÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">"mrdjun"</span>, <span class="number">18</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÈÄöËøá<code>@Bean</code>Ê≥®Ëß£ÔºåÊàë‰ª¨ÂêëIOCÂÆπÂô®Ê≥®ÂÜå‰∫Ü‰∏Ä‰∏™ÂêçÁß∞‰∏∫<code>user</code>ÔºàBeanÂêçÁß∞ÈªòËÆ§‰∏∫ÊñπÊ≥ïÂêçÔºåÊàë‰ª¨‰πüÂèØ‰ª•ÈÄöËøá<code>@Bean("myUser")</code>ÊñπÂºèÊù•Â∞ÜÁªÑ‰ª∂ÂêçÁß∞ÊåáÂÆö‰∏∫<code>myUser</code>Ôºâ„ÄÇ</p>
<p>ÁªÑ‰ª∂Ê≥®ÂÜåÂÆåÊØïÂêéÔºåÊàë‰ª¨ÊµãËØï‰∏Ä‰∏ã‰ªéIOCÂÆπÂô®‰∏≠Ëé∑ÂèñËøô‰∏™ÁªÑ‰ª∂„ÄÇÂú®Spring BootÂÖ•Âè£Á±ª‰∏≠ÁºñÂÜôÂ¶Ç‰∏ã‰ª£Á†ÅÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    	SpringApplication.run(DemoApplication.class, args);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ËøîÂõû IOC ÂÆπÂô®Ôºå‰ΩøÁî®Ê≥®Ëß£ÈÖçÁΩÆÔºå‰º†ÂÖ•ÈÖçÁΩÆÁ±ª</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WebConfig.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(User.class);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âõ†‰∏∫Êàë‰ª¨ÊòØÈÄöËøáÊ≥®Ëß£ÊñπÂºèÊù•Ê≥®ÂÜåÁªÑ‰ª∂ÁöÑÔºåÊâÄ‰ª•ÈúÄË¶Å‰ΩøÁî®<code>AnnotationConfigApplicationContext</code>Êù•Ëé∑ÂèñÁõ∏Â∫îÁöÑIOCÂÆπÂô®ÔºåÂÖ•ÂèÇ‰∏∫ÈÖçÁΩÆÁ±ª„ÄÇ</p>
<p>ÂêØÂä®È°πÁõÆÔºåÁúã‰∏ãÊéßÂà∂Âè∞ËæìÂá∫Ôºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">User(name=mrdjun, age=18)</span><br></pre></td></tr></tbody></table></figure>

<p>ËØ¥ÊòéÁªÑ‰ª∂Ê≥®ÂÜåÊàêÂäü„ÄÇ</p>
<p>Êàë‰ª¨Â∞ÜÁªÑ‰ª∂ÁöÑÂêçÁß∞Êîπ‰∏∫<code>myUser</code>ÔºåÁÑ∂ÂêéÁúãÁúãIOCÂÆπÂô®‰∏≠ÔºåUserÁ±ªÂûãÁªÑ‰ª∂ÊòØÂê¶Âè´<code>myUser</code>Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line"></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WebConfig.class);</span><br><span class="line">        <span class="comment">// Êü•Áúã User Ëøô‰∏™Á±ªÂú® Spring ÂÆπÂô®‰∏≠Âè´Âï•Áé©ÊÑè</span></span><br><span class="line">        String[] beanNames = context.getBeanNamesForType(User.class);</span><br><span class="line">        Arrays.stream(beanNames).forEach(System.out::println);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆÔºåËßÇÂØüÊéßÂà∂Âè∞ËæìÂá∫:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">myUser</span><br></pre></td></tr></tbody></table></figure>

<h2 id="‰ΩøÁî®-ComponentScanÊâ´Êèè"><a href="#‰ΩøÁî®-ComponentScanÊâ´Êèè" class="headerlink" title="‰ΩøÁî®@ComponentScanÊâ´Êèè"></a>‰ΩøÁî®@ComponentScanÊâ´Êèè</h2><p>Âú®‰ΩøÁî®XMLÈÖçÁΩÆÁªÑ‰ª∂Êâ´ÊèèÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÈÉΩÊòØËøôÊ†∑ÈÖçÁΩÆÁöÑÔºö</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ÂÖ∂‰∏≠<code>base-package</code>ÊåáÂÆö‰∫ÜÊâ´ÊèèÁöÑË∑ØÂæÑ„ÄÇË∑ØÂæÑ‰∏ãÊâÄÊúâË¢´<code>@Controller</code>„ÄÅ<code>@Service</code>„ÄÅ<code>@Repository</code>Âíå<code>@Component</code>Ê≥®Ëß£Ê†áÊ≥®ÁöÑÁ±ªÈÉΩ‰ºöË¢´Á∫≥ÂÖ•IOCÂÆπÂô®‰∏≠„ÄÇ</p>
<p>Áé∞Âú®Êàë‰ª¨ËÑ±Á¶ªXMLÈÖçÁΩÆÂêéÔºåÂèØ‰ª•‰ΩøÁî®<code>@ComponentScan</code>Ê≥®Ëß£Êù•Êâ´ÊèèÁªÑ‰ª∂Âπ∂Ê≥®ÂÜå„ÄÇ</p>
<p>Âú®‰ΩøÁî®<code>@ComponentScan</code>Êâ´Êèè‰πãÂâçÔºåÊàë‰ª¨ÂÖàÂàõÂª∫‰∏Ä‰∏™ControllerÔºå‰∏Ä‰∏™ServiceÔºå‰∏Ä‰∏™DaoÔºåÂπ∂Ê†áÊ≥®‰∏äÁõ∏Â∫îÁöÑÊ≥®Ëß£„ÄÇ</p>
<p>ÁÑ∂Âêé‰øÆÊîπÈÖçÁΩÆÁ±ªÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan("com.mrdjun.demo")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Bean("myUser")</span></span><br><span class="line">    <span class="comment">// public User user() {</span></span><br><span class="line">    <span class="comment">//     return new User("mrdjun", 18);</span></span><br><span class="line">    <span class="comment">// }</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®ÈÖçÁΩÆÁ±ª‰∏≠ÔºåÊàë‰ª¨ÈÄöËøá<code>@ComponentScan("com.mrdjun.demo")</code>ÈÖçÁΩÆ‰∫ÜÊâ´ÊèèË∑ØÂæÑÔºåÂπ∂‰∏îÂ∞ÜUserÁªÑ‰ª∂Ê≥®ÂÜåÊ≥®ÈáäÊéâ‰∫ÜÔºåÂèñËÄå‰ª£‰πãÁöÑÊòØÂú®UserÁ±ª‰∏äÂä†‰∏ä<code>@Component</code>Ê≥®Ëß£Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> {</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåÊàë‰ª¨‰∏çËÉΩÂ∞ÜSpring BootÁöÑÂÖ•Âè£Á±ªÁ∫≥ÂÖ•Êâ´ÊèèËåÉÂõ¥‰∏≠ÔºåÂê¶ÂàôÈ°πÁõÆÂêØÂä®Â∞ÜÂá∫Èîô„ÄÇ</p>
<p>Êé•‰∏ãÊù•Êàë‰ª¨Áúã‰∏ãÂú®Âü∫‰∫éÊ≥®Ëß£ÁöÑIOCÂÆπÂô®‰∏≠ÊòØÂê¶ÂåÖÂê´‰∫ÜËøô‰∫õÁªÑ‰ª∂Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line"></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WebConfig.class);</span><br><span class="line">        <span class="comment">// Êü•ÁúãÂü∫‰∫éÊ≥®Ëß£ÁöÑ IOCÂÆπÂô®‰∏≠ÊâÄÊúâÁªÑ‰ª∂ÂêçÁß∞</span></span><br><span class="line">        String[] beanNames = context.getBeanDefinitionNames();</span><br><span class="line">        Arrays.stream(beanNames).forEach(System.out::println);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆÔºåËßÇÂØüÊéßÂà∂Âè∞Ôºö</p>
<p><img src="/p/4bb4364/QQ%E6%88%AA%E5%9B%BE20181207164418.png" alt="QQÊà™Âõæ20181207164418.png"></p>
<p>ÂèØËßÅÔºåÁªÑ‰ª∂Â∑≤ÁªèÊàêÂäüË¢´Êâ´ÊèèËøõÂéª‰∫ÜÔºåÂπ∂‰∏îÂêçÁß∞ÈªòËÆ§‰∏∫Á±ªÂêçÈ¶ñÂ≠óÊØçÂ∞èÂÜô„ÄÇ</p>
<p>ËøôÈáåÔºåÈÖçÁΩÆÁ±ªWebConfig‰πüË¢´Êâ´ÊèèÂπ∂Ê≥®ÂÜå‰∫ÜÔºåÊü•Áúã<code>@Configuration</code>Ê∫êÁ†ÅÂ∞±‰ºöÂèëÁé∞ÂéüÂõ†Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Configuration {</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">""</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ÊåáÂÆöÊâ´ÊèèÁ≠ñÁï•"><a href="#ÊåáÂÆöÊâ´ÊèèÁ≠ñÁï•" class="headerlink" title="ÊåáÂÆöÊâ´ÊèèÁ≠ñÁï•"></a>ÊåáÂÆöÊâ´ÊèèÁ≠ñÁï•</h3><p><code>@ComponentScan</code>Ê≥®Ëß£ÂÖÅËÆ∏Êàë‰ª¨ÊåáÂÆöÊâ´ÊèèÁ≠ñÁï•ÔºåÂç≥ÊåáÂÆöÂì™‰∫õË¢´Êâ´ÊèèÔºåÂì™‰∫õ‰∏çË¢´Êâ´ÊèèÔºåÊü•ÁúãÂÖ∂Ê∫êÁ†ÅÂèØÂèëÁé∞Ëøô‰∏§‰∏™Â±ûÊÄßÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Specifies which types are eligible for component scanning.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Further narrows the set of candidate components from everything in {<span class="doctag">@link</span> #basePackages}</span></span><br><span class="line"><span class="comment"> * to everything in the base packages that matches the given filter or filters.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Note that these filters will be applied in addition to the default filters, if specified.</span></span><br><span class="line"><span class="comment"> * Any type under the specified base packages which matches a given filter will be included,</span></span><br><span class="line"><span class="comment"> * even if it does not match the default filters (i.e. is not annotated with {<span class="doctag">@code</span> <span class="doctag">@Component</span>}).</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> #resourcePattern()</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> #useDefaultFilters()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Filter[] includeFilters() <span class="keyword">default</span> {};</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Specifies which types are not eligible for component scanning.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> #resourcePattern</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Filter[] excludeFilters() <span class="keyword">default</span> {};</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÖ∂‰∏≠<code>Filter</code>‰πüÊòØ‰∏Ä‰∏™Ê≥®Ëß£:</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Declares the type filter to be used as an {<span class="doctag">@linkplain</span> ComponentScan#includeFilters</span></span><br><span class="line"><span class="comment"> * include filter} or {<span class="doctag">@linkplain</span> ComponentScan#excludeFilters exclude filter}.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target({})</span></span><br><span class="line"><span class="meta">@interface</span> Filter {</span><br><span class="line"></span><br><span class="line">    FilterType <span class="title function_">type</span><span class="params">()</span> <span class="keyword">default</span> FilterType.ANNOTATION;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AliasFor("classes")</span></span><br><span class="line">    Class&lt;?&gt;[] value() <span class="keyword">default</span> {};</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AliasFor("value")</span></span><br><span class="line">    Class&lt;?&gt;[] classes() <span class="keyword">default</span> {};</span><br><span class="line">    String[] pattern() <span class="keyword">default</span> {};</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Êé•‰∏ãÊù•Êàë‰ª¨‰ΩøÁî®<code>excludeFilters</code>Êù•ÊéíÈô§‰∏Ä‰∫õÁªÑ‰ª∂ÁöÑÊâ´ÊèèÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = "com.mrdjun.demo",</span></span><br><span class="line"><span class="meta">        excludeFilters = {</span></span><br><span class="line"><span class="meta">                @Filter(type = FilterType.ANNOTATION,</span></span><br><span class="line"><span class="meta">                        classes = {Controller.class, Repository.class}),</span></span><br><span class="line"><span class="meta">                @Filter(type = FilterType.ASSIGNABLE_TYPE, classes = User.class)</span></span><br><span class="line"><span class="meta">        })</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏äÈù¢Êàë‰ª¨ÊåáÂÆö‰∫Ü‰∏§ÁßçÊéíÈô§Êâ´ÊèèÁöÑËßÑÂàôÔºö</p>
<ol>
<li>Ê†πÊçÆÊ≥®Ëß£Êù•ÊéíÈô§Ôºà<code>type = FilterType.ANNOTATION</code>Ôºâ,Ëøô‰∫õÊ≥®Ëß£ÁöÑÁ±ªÂûã‰∏∫<code>classes = {Controller.class, Repository.class}</code>„ÄÇÂç≥<code>Controller</code>Âíå<code>Repository</code>Ê≥®Ëß£Ê†áÊ≥®ÁöÑÁ±ª‰∏çÂÜçË¢´Á∫≥ÂÖ•Âà∞IOCÂÆπÂô®‰∏≠„ÄÇ</li>
<li>Ê†πÊçÆÊåáÂÆöÁ±ªÂûãÁ±ªÊéíÈô§Ôºà<code>type = FilterType.ASSIGNABLE_TYPE</code>ÔºâÔºåÊéíÈô§Á±ªÂûã‰∏∫<code>User.class</code>ÔºåÂÖ∂Â≠êÁ±ªÔºåÂÆûÁé∞Á±ªÈÉΩ‰ºöË¢´ÊéíÈô§„ÄÇ</li>
</ol>
<p>ÂêØÂä®È°πÁõÆÔºåËßÇÂØüÊéßÂà∂Âè∞Ôºö</p>
<p><img src="/p/4bb4364/QQ%E6%88%AA%E5%9B%BE20190129103606.png" alt="QQÊà™Âõæ20190129095439.png"></p>
<p>ÂèØËßÅÊéíÈô§ÊàêÂäü„ÄÇ</p>
<p>Èô§‰∫Ü‰∏äÈù¢‰∏§ÁßçÂ∏∏Áî®ÁöÑËßÑÂàôÂ§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•‰ΩøÁî®Âà´ÁöÑËßÑÂàôÔºåÊü•Áúã<code>FilterType</code>Ê∫êÁ†ÅÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">FilterType</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Filter candidates marked with a given annotation.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> org.springframework.core.type.filter.AnnotationTypeFilter</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ANNOTATION,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Filter candidates assignable to a given type.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> org.springframework.core.type.filter.AssignableTypeFilter</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ASSIGNABLE_TYPE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Filter candidates matching a given AspectJ type pattern expression.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> org.springframework.core.type.filter.AspectJTypeFilter</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ASPECTJ,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Filter candidates matching a given regex pattern.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> org.springframework.core.type.filter.RegexPatternTypeFilter</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    REGEX,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Filter candidates using a given custom</span></span><br><span class="line"><span class="comment">     * {<span class="doctag">@link</span> org.springframework.core.type.filter.TypeFilter} implementation.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    CUSTOM</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂèØÁúãÂà∞ÔºåÊàë‰ª¨ËøòÂèØ‰ª•ÈÄöËøá<code>ASPECTJ</code>Ë°®ËææÂºèÔºå<code>REGEX</code>Ê≠£ÂàôË°®ËææÂºèÂíå<code>CUSTOM</code>Ëá™ÂÆö‰πâËßÑÂàôÔºà‰∏ãÈù¢ËØ¶ÁªÜ‰ªãÁªçÔºâÊù•ÊåáÂÆöÊâ´ÊèèÁ≠ñÁï•„ÄÇ</p>
<p><code>includeFilters</code>ÁöÑ‰ΩúÁî®Âíå<code>excludeFilters</code>Áõ∏ÂèçÔºåÂÖ∂ÊåáÂÆöÁöÑÊòØÂì™‰∫õÁªÑ‰ª∂ÈúÄË¶ÅË¢´Êâ´ÊèèÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = "com.mrdjun.demo",</span></span><br><span class="line"><span class="meta">        includeFilters = {</span></span><br><span class="line"><span class="meta">                @Filter(type = FilterType.ANNOTATION, classes = Service.class)</span></span><br><span class="line"><span class="meta">        }, useDefaultFilters = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏äÈù¢ÈÖçÁΩÆ‰∫ÜÂè™Â∞Ü<code>Service</code>Á∫≥ÂÖ•IOCÂÆπÂô®ÔºåÂπ∂‰∏îÈúÄË¶ÅÁî®<code>useDefaultFilters = false</code>Êù•ÂÖ≥Èó≠SpringÈªòËÆ§ÁöÑÊâ´ÊèèÁ≠ñÁï•ÊâçËÉΩËÆ©Êàë‰ª¨ÁöÑÈÖçÁΩÆÁîüÊïàÔºàSpring BootÂÖ•Âè£Á±ªÁöÑ<code>@SpringBootApplication</code>Ê≥®Ëß£ÂåÖÂê´‰∫Ü‰∏Ä‰∫õÈªòËÆ§ÁöÑÊâ´ÊèèÁ≠ñÁï•Ôºâ„ÄÇ</p>
<p>ÂêØÂä®È°πÁõÆÔºåËßÇÂØüÊéßÂà∂Âè∞Ôºö</p>
<p><img src="/p/4bb4364/QQ%E6%88%AA%E5%9B%BE20190129100306.png" alt="QQÊà™Âõæ20190129100306.png"></p>
<p>ÂèØÁúãÂà∞ÔºåIOCÂÆπÂô®‰∏≠Â∞Ü‰∏çÂÜçÂåÖÂê´daoÔºåcontroller„ÄÇ</p>
<h3 id="Â§öÊâ´ÊèèÁ≠ñÁï•ÈÖçÁΩÆ"><a href="#Â§öÊâ´ÊèèÁ≠ñÁï•ÈÖçÁΩÆ" class="headerlink" title="Â§öÊâ´ÊèèÁ≠ñÁï•ÈÖçÁΩÆ"></a>Â§öÊâ´ÊèèÁ≠ñÁï•ÈÖçÁΩÆ</h3><p>Âú®Java 8‰πãÂâçÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®<code>@ComponentScans</code>Êù•ÈÖçÁΩÆÂ§ö‰∏™<code>@ComponentScan</code>‰ª•ÂÆûÁé∞Â§öÊâ´ÊèèËßÑÂàôÈÖçÁΩÆÔºö</p>
<p><img src="/p/4bb4364/QQ%E6%88%AA%E5%9B%BE20190129100809.png" alt="QQÊà™Âõæ20190129100809.png"></p>
<p>ËÄåÂú®Java 8‰∏≠ÔºåÊñ∞Â¢û‰∫Ü<code>@Repeatable</code>Ê≥®Ëß£Ôºå‰ΩøÁî®ËØ•Ê≥®Ëß£‰øÆÈ•∞ÁöÑÊ≥®Ëß£ÂèØ‰ª•ÈáçÂ§ç‰ΩøÁî®ÔºåÊü•Áúã<code>@ComponentScan</code>Ê∫êÁ†Å‰ºöÂèëÁé∞ÂÖ∂Â∑≤ÁªèË¢´ËØ•Ê≥®Ëß£Ê†áÊ≥®Ôºö</p>
<p><img src="/p/4bb4364/QQ%E6%88%AA%E5%9B%BE20190129101050.png" alt="QQÊà™Âõæ20190129101050.png"></p>
<p>ÊâÄ‰ª•Èô§‰∫Ü‰ΩøÁî®<code>@ComponentScans</code>Êù•ÈÖçÁΩÆÂ§öÊâ´ÊèèËßÑÂàôÂ§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•ÈÄöËøáÂ§öÊ¨°‰ΩøÁî®<code>@ComponentScan</code>Êù•ÊåáÂÆöÂ§ö‰∏™‰∏çÂêåÁöÑÊâ´ÊèèËßÑÂàô„ÄÇ</p>
<h3 id="Ëá™ÂÆö‰πâÊâ´ÊèèÁ≠ñÁï•"><a href="#Ëá™ÂÆö‰πâÊâ´ÊèèÁ≠ñÁï•" class="headerlink" title="Ëá™ÂÆö‰πâÊâ´ÊèèÁ≠ñÁï•"></a>Ëá™ÂÆö‰πâÊâ´ÊèèÁ≠ñÁï•</h3><p>Ëá™ÂÆö‰πâÊâ´ÊèèÁ≠ñÁï•ÈúÄË¶ÅÊàë‰ª¨ÂÆûÁé∞<code>org.springframework.core.type.filter.TypeFilter</code>Êé•Âè£ÔºåÂàõÂª∫<code>MyTypeFilter</code>ÂÆûÁé∞ËØ•Êé•Âè£Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTypeFilter</span> <span class="keyword">implements</span> <span class="title class_">TypeFilter</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">match</span><span class="params">(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËØ•Êé•Âè£ÂåÖÂê´<code>match</code>ÊñπÊ≥ïÔºåÂÖ∂‰∏§‰∏™ÂÖ•ÂèÇ<code>MetadataReader</code>Âíå<code>MetadataReaderFactory</code>Âê´‰πâÂ¶Ç‰∏ãÔºö</p>
<ol>
<li><code>MetadataReader</code>ÔºöÂΩìÂâçÊ≠£Âú®Êâ´ÊèèÁöÑÁ±ªÁöÑ‰ø°ÊÅØÔºõ</li>
<li><code>MetadataReaderFactory</code>ÔºöÂèØ‰ª•ÈÄöËøáÂÆÉÊù•Ëé∑ÂèñÂÖ∂‰ªñÁ±ªÁöÑ‰ø°ÊÅØ„ÄÇ</li>
</ol>
<p>ÂΩì<code>match</code>ÊñπÊ≥ïËøîÂõûtrueÊó∂ËØ¥ÊòéÂåπÈÖçÊàêÂäüÔºåfalseÂàôËØ¥ÊòéÂåπÈÖçÂ§±Ë¥•„ÄÇÁªßÁª≠ÂÆåÂñÑËøô‰∏™ËøáÊª§ËßÑÂàôÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTypeFilter</span> <span class="keyword">implements</span> <span class="title class_">TypeFilter</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">match</span><span class="params">(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)</span> {</span><br><span class="line">        <span class="comment">// Ëé∑ÂèñÂΩìÂâçÊ≠£Âú®Êâ´ÊèèÁöÑÁ±ªÁöÑÊ≥®Ëß£‰ø°ÊÅØ</span></span><br><span class="line">        <span class="type">AnnotationMetadata</span> <span class="variable">annotationMetadata</span> <span class="operator">=</span> metadataReader.getAnnotationMetadata();</span><br><span class="line">        <span class="comment">// Ëé∑ÂèñÂΩìÂâçÊ≠£Âú®Êâ´ÊèèÁöÑÁ±ªÁöÑÁ±ª‰ø°ÊÅØ</span></span><br><span class="line">        <span class="type">ClassMetadata</span> <span class="variable">classMetadata</span> <span class="operator">=</span> metadataReader.getClassMetadata();</span><br><span class="line">        <span class="comment">// Ëé∑ÂèñÂΩìÂâçÊ≠£Âú®Êâ´ÊèèÁöÑÁ±ªÁöÑË∑ØÂæÑÁ≠â‰ø°ÊÅØ</span></span><br><span class="line">        <span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> metadataReader.getResource();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> classMetadata.getClassName();</span><br><span class="line">        <span class="keyword">return</span> StringUtils.hasText(<span class="string">"er"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏äÈù¢ÊåáÂÆö‰∫ÜÂΩìË¢´Êâ´ÊèèÁöÑÁ±ªÂêçÂåÖÂê´<code>er</code>Êó∂ÂÄôÔºåÂåπÈÖçÊàêÂäüÔºåÈÖçÂêà<code>excludeFilters</code>‰ΩøÁî®ÊÑèÊåáÂΩìË¢´Êâ´ÊèèÁöÑÁ±ªÂêçÂåÖÂê´<code>er</code>Êó∂ÔºåËØ•Á±ª‰∏çË¢´Á∫≥ÂÖ•IOCÂÆπÂô®‰∏≠„ÄÇ</p>
<p>Êàë‰ª¨Âú®<code>@ComponentScan</code>‰∏≠‰ΩøÁî®Ëøô‰∏™Ëá™ÂÆö‰πâÁöÑËøáÊª§Á≠ñÁï•Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = "com.mrdjun.demo",</span></span><br><span class="line"><span class="meta">        excludeFilters = {</span></span><br><span class="line"><span class="meta">            @Filter(type = FilterType.CUSTOM, classes = MyTypeFilter.class)</span></span><br><span class="line"><span class="meta">        })</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆÔºåËßÇÂØüËæìÂá∫Ôºö</p>
<p><img src="/p/4bb4364/QQ%E6%88%AA%E5%9B%BE20190129112811.png" alt="QQÊà™Âõæ20190129112811.png"></p>
<p>Âõ†‰∏∫<code>User</code>Ôºå<code>UserMapper</code>Ôºå<code>UserService</code>Âíå<code>UserController</code>Á≠âÁ±ªÁöÑÁ±ªÂêçÈÉΩÂåÖÂê´<code>er</code>ÔºåÊâÄ‰ª•ÂÆÉ‰ª¨ÈÉΩÊ≤°ÊúâË¢´Á∫≥ÂÖ•Âà∞IOCÂÆπÂô®‰∏≠„ÄÇ</p>
<h2 id="ÁªÑ‰ª∂‰ΩúÁî®Âüü-Scope"><a href="#ÁªÑ‰ª∂‰ΩúÁî®Âüü-Scope" class="headerlink" title="ÁªÑ‰ª∂‰ΩúÁî®Âüü@Scope"></a>ÁªÑ‰ª∂‰ΩúÁî®Âüü@Scope</h2><p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂú®SpringÁöÑIOCÂÆπÂô®‰∏≠ÊØè‰∏™ÁªÑ‰ª∂ÈÉΩÊòØÂçï‰æãÁöÑÔºåÂç≥Êó†ËÆ∫Âú®‰ªª‰ΩïÂú∞ÊñπÊ≥®ÂÖ•Â§öÂ∞ëÊ¨°ÔºåËøô‰∫õÂØπË±°ÈÉΩÊòØÂêå‰∏Ä‰∏™ÔºåÊàë‰ª¨Êù•Áúã‰∏ã‰æãÂ≠ê„ÄÇ</p>
<p>È¶ñÂÖàÂ∞ÜUserÂØπË±°‰∏≠ÁöÑ<code>@Component</code>Ê≥®Ëß£ÂéªÈô§ÔºåÁÑ∂ÂêéÂú®ÈÖçÁΩÆÁ±ª‰∏≠ÈÖçÁΩÆUser BeanÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">"mrdjun"</span>, <span class="number">18</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Êé•ÁùÄÂ§öÊ¨°‰ªéIOCÂÆπÂô®‰∏≠Ëé∑ÂèñËøô‰∏™ÁªÑ‰ª∂ÔºåÁúãÁúãÊòØÂê¶‰∏∫Âêå‰∏Ä‰∏™Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ËøîÂõû IOC ÂÆπÂô®Ôºå‰ΩøÁî®Ê≥®Ëß£ÈÖçÁΩÆÔºå‰º†ÂÖ•ÈÖçÁΩÆÁ±ª</span></span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WebConfig.class);</span><br><span class="line"><span class="type">Object</span> <span class="variable">user1</span> <span class="operator">=</span> context.getBean(<span class="string">"user"</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">user2</span> <span class="operator">=</span> context.getBean(<span class="string">"user"</span>);</span><br><span class="line"><span class="comment">// ËæìÂá∫true</span></span><br><span class="line">System.out.println(user1 == user2);</span><br></pre></td></tr></tbody></table></figure>

<p>ÁªìÊûúËØÅÂÆû‰∫Ü‰∏äÈù¢ÁöÑËßÇÁÇπ„ÄÇ</p>
<p>Âú®Spring‰∏≠Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®<code>@Scope</code>Ê≥®Ëß£Êù•ÊîπÂèòÁªÑ‰ª∂ÁöÑ‰ΩúÁî®ÂüüÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * When used as a type-level annotation in conjunction with</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@link</span> org.springframework.stereotype.Component <span class="doctag">@Component</span>},</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@code</span> <span class="doctag">@Scope</span>} indicates the name of a scope to use for instances of</span></span><br><span class="line"><span class="comment"> * the annotated type.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;When used as a method-level annotation in conjunction with</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@link</span> Bean <span class="doctag">@Bean</span>}, {<span class="doctag">@code</span> <span class="doctag">@Scope</span>} indicates the name of a scope to use</span></span><br><span class="line"><span class="comment"> * for the instance returned from the method.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;&lt;b&gt;<span class="doctag">NOTE:</span>&lt;/b&gt; {<span class="doctag">@code</span> <span class="doctag">@Scope</span>} annotations are only introspected on the</span></span><br><span class="line"><span class="comment"> * concrete bean class (for annotated components) or the factory method</span></span><br><span class="line"><span class="comment"> * (for {<span class="doctag">@code</span> <span class="doctag">@Bean</span>} methods). In contrast to XML bean definitions,</span></span><br><span class="line"><span class="comment"> * there is no notion of bean definition inheritance, and inheritance</span></span><br><span class="line"><span class="comment"> * hierarchies at the class level are irrelevant for metadata purposes.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;In this context, &lt;em&gt;scope&lt;/em&gt; means the lifecycle of an instance,</span></span><br><span class="line"><span class="comment"> * such as {<span class="doctag">@code</span> singleton}, {<span class="doctag">@code</span> prototype}, and so forth. Scopes</span></span><br><span class="line"><span class="comment"> * provided out of the box in Spring may be referred to using the</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@code</span> SCOPE_*} constants available in the {<span class="doctag">@link</span> ConfigurableBeanFactory}</span></span><br><span class="line"><span class="comment"> * and {<span class="doctag">@code</span> WebApplicationContext} interfaces.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;To register additional custom scopes, see</span></span><br><span class="line"><span class="comment"> * {<span class="doctag">@link</span> org.springframework.beans.factory.config.CustomScopeConfigurer</span></span><br><span class="line"><span class="comment"> * CustomScopeConfigurer}.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mark Fisher</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chris Beams</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Sam Brannen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2.5</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> org.springframework.stereotype.Component</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> org.springframework.context.annotation.Bean</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target({ElementType.TYPE, ElementType.METHOD})</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Scope {</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Alias for {<span class="doctag">@link</span> #scopeName}.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> #scopeName</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@AliasFor("scopeName")</span></span><br><span class="line">	String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Specifies the name of the scope to use for the annotated component/bean.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Defaults to an empty string ({<span class="doctag">@code</span> ""}) which implies</span></span><br><span class="line"><span class="comment">	 * {<span class="doctag">@link</span> ConfigurableBeanFactory#SCOPE_SINGLETON SCOPE_SINGLETON}.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@since</span> 4.2</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> ConfigurableBeanFactory#SCOPE_PROTOTYPE</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> ConfigurableBeanFactory#SCOPE_SINGLETON</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> org.springframework.web.context.WebApplicationContext#SCOPE_REQUEST</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> org.springframework.web.context.WebApplicationContext#SCOPE_SESSION</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> #value</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@AliasFor("value")</span></span><br><span class="line">	String <span class="title function_">scopeName</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Specifies whether a component should be configured as a scoped proxy</span></span><br><span class="line"><span class="comment">	 * and if so, whether the proxy should be interface-based or subclass-based.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Defaults to {<span class="doctag">@link</span> ScopedProxyMode#DEFAULT}, which typically indicates</span></span><br><span class="line"><span class="comment">	 * that no scoped proxy should be created unless a different default</span></span><br><span class="line"><span class="comment">	 * has been configured at the component-scan instruction level.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Analogous to {<span class="doctag">@code</span> &lt;aop:scoped-proxy/&gt;} support in Spring XML.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> ScopedProxyMode</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	ScopedProxyMode <span class="title function_">proxyMode</span><span class="params">()</span> <span class="keyword">default</span> ScopedProxyMode.DEFAULT;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol>
<li><code>singleton</code>ÔºöÂçïÂÆû‰æãÔºàÈªòËÆ§Ôºâ,Âú®Spring IOCÂÆπÂô®ÂêØÂä®ÁöÑÊó∂ÂÄô‰ºöË∞ÉÁî®ÊñπÊ≥ïÂàõÂª∫ÂØπË±°ÁÑ∂ÂêéÁ∫≥ÂÖ•Âà∞IOCÂÆπÂô®‰∏≠Ôºå‰ª•ÂêéÊØèÊ¨°Ëé∑ÂèñÈÉΩÊòØÁõ¥Êé•‰ªéIOCÂÆπÂô®‰∏≠Ëé∑ÂèñÔºà<code>map.get()</code>ÔºâÔºõ</li>
<li><code>prototype</code>ÔºöÂ§öÂÆû‰æãÔºåIOCÂÆπÂô®ÂêØÂä®ÁöÑÊó∂ÂÄôÂπ∂‰∏ç‰ºöÂéªÂàõÂª∫ÂØπË±°ÔºåËÄåÊòØÂú®ÊØèÊ¨°Ëé∑ÂèñÁöÑÊó∂ÂÄôÊâç‰ºöÂéªË∞ÉÁî®ÊñπÊ≥ïÂàõÂª∫ÂØπË±°Ôºõ</li>
<li><code>request</code>Ôºö‰∏Ä‰∏™ËØ∑Ê±ÇÂØπÂ∫î‰∏Ä‰∏™ÂÆû‰æãÔºõ</li>
<li><code>session</code>ÔºöÂêå‰∏Ä‰∏™sessionÂØπÂ∫î‰∏Ä‰∏™ÂÆû‰æã„ÄÇ</li>
</ol>
<h2 id="ÊáíÂä†ËΩΩ-Lazy"><a href="#ÊáíÂä†ËΩΩ-Lazy" class="headerlink" title="ÊáíÂä†ËΩΩ@Lazy"></a>ÊáíÂä†ËΩΩ@Lazy</h2><p>ÊáíÂä†ËΩΩÊòØÈíàÂØπÂçï‰æãÊ®°ÂºèËÄåË®ÄÁöÑÔºåÊ≠£Â¶ÇÂâçÈù¢ÊâÄËØ¥ÔºåIOCÂÆπÂô®‰∏≠ÁöÑÁªÑ‰ª∂ÈªòËÆ§ÊòØÂçï‰æãÁöÑÔºåÂÆπÂô®ÂêØÂä®ÁöÑÊó∂ÂÄô‰ºöË∞ÉÁî®ÊñπÊ≥ïÂàõÂª∫ÂØπË±°ÁÑ∂ÂêéÁ∫≥ÂÖ•Âà∞IOCÂÆπÂô®‰∏≠„ÄÇ</p>
<p>Âú®User BeanÊ≥®ÂÜåÁöÑÂú∞ÊñπÂä†ÂÖ•‰∏ÄÂè•ËØù‰ª•ËßÇÂØüÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÂæÄIOCÂÆπÂô®‰∏≠Ê≥®ÂÜåuser bean"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">"mrdjun"</span>, <span class="number">18</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊµãËØïÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WebConfig.class);</span><br><span class="line">System.out.println(<span class="string">"ÂÆπÂô®ÂàõÂª∫ÂÆåÊØï"</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆËßÇÂØüÊéßÂà∂Âè∞ËæìÂá∫:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ÂæÄIOCÂÆπÂô®‰∏≠Ê≥®ÂÜåuser bean</span><br><span class="line">ÂÆπÂô®ÂàõÂª∫ÂÆåÊØï</span><br></pre></td></tr></tbody></table></figure>

<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®IOCÂÆπÂô®ÂàõÂª∫ÂÆåÊØï‰πãÂâçÔºåÁªÑ‰ª∂Â∑≤ÁªèÊ∑ªÂä†Âà∞ÂÆπÂô®‰∏≠‰∫Ü„ÄÇ</p>
<p>Â∞ÜUser BeanÊîπ‰∏∫ÊáíÂä†ËΩΩÁöÑÊñπÂºèÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Lazy</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"ÂæÄIOCÂÆπÂô®‰∏≠Ê≥®ÂÜåuser bean"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">"mrdjun"</span>, <span class="number">18</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÜçÊ¨°ÂêØÂä®È°πÁõÆÔºåËßÇÂØüËæìÂá∫Ôºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ÂÆπÂô®ÂàõÂª∫ÂÆåÊØï</span><br></pre></td></tr></tbody></table></figure>

<p>ÂèØÁúãÂà∞ÔºåÂÆπÂô®ÂàõÂª∫ÂÆåÁöÑÊó∂ÂÄôÔºåUser BeanËøô‰∏™ÁªÑ‰ª∂Âπ∂Êú™Ê∑ªÂä†Âà∞ÂÆπÂô®‰∏≠„ÄÇ</p>
<p>ÊâÄ‰ª•ÊáíÂä†ËΩΩÁöÑÂäüËÉΩÊòØÔºåÂú®Âçï‰æãÊ®°Âºè‰∏≠ÔºåIOCÂÆπÂô®ÂàõÂª∫ÁöÑÊó∂ÂÄô‰∏ç‰ºöÈ©¨‰∏äÂéªË∞ÉÁî®ÊñπÊ≥ïÂàõÂª∫ÂØπË±°Âπ∂Ê≥®ÂÜåÔºåÂè™ÊúâÂΩìÁªÑ‰ª∂<strong>Á¨¨‰∏ÄÊ¨°</strong>Ë¢´‰ΩøÁî®ÁöÑÊó∂ÂÄôÊâç‰ºöË∞ÉÁî®ÊñπÊ≥ïÂàõÂª∫ÂØπË±°Âπ∂Âä†ÂÖ•Âà∞ÂÆπÂô®‰∏≠„ÄÇ</p>
<p>ÊµãËØï‰∏Ä‰∏ãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WebConfig.class);</span><br><span class="line">System.out.println(<span class="string">"ÂÆπÂô®ÂàõÂª∫ÂÆåÊØï"</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">user1</span> <span class="operator">=</span> context.getBean(<span class="string">"user"</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">user2</span> <span class="operator">=</span> context.getBean(<span class="string">"user"</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆÔºåËßÇÂØüËæìÂá∫:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ÂÆπÂô®ÂàõÂª∫ÂÆåÊØï</span><br><span class="line">ÂæÄIOCÂÆπÂô®‰∏≠Ê≥®ÂÜåuser bean</span><br></pre></td></tr></tbody></table></figure>

<p>ÁªìÊûúËØÅÂÆû‰∫ÜÊàë‰ª¨ÁöÑËßÇÁÇπ„ÄÇ</p>
<h2 id="Êù°‰ª∂Ê≥®ÂÜåÁªÑ‰ª∂"><a href="#Êù°‰ª∂Ê≥®ÂÜåÁªÑ‰ª∂" class="headerlink" title="Êù°‰ª∂Ê≥®ÂÜåÁªÑ‰ª∂"></a>Êù°‰ª∂Ê≥®ÂÜåÁªÑ‰ª∂</h2><h3 id="Conditional"><a href="#Conditional" class="headerlink" title="@Conditional"></a>@Conditional</h3><p>‰ΩøÁî®<code>@Conditional</code>Ê≥®Ëß£Êàë‰ª¨ÂèØ‰ª•ÊåáÂÆöÁªÑ‰ª∂Ê≥®ÂÜåÁöÑÊù°‰ª∂ÔºåÂç≥Êª°Ë∂≥ÁâπÂÆöÊù°‰ª∂ÊâçÂ∞ÜÁªÑ‰ª∂Á∫≥ÂÖ•Âà∞IOCÂÆπÂô®‰∏≠„ÄÇ</p>
<p>Âú®‰ΩøÁî®ËØ•Ê≥®Ëß£‰πãÂâçÔºåÊàë‰ª¨ÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™Á±ªÔºåÂÆûÁé∞<code>Condition</code>Êé•Âè£Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCondition</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËØ•Êé•Âè£ÂåÖÂê´‰∏Ä‰∏™<code>matches</code>ÊñπÊ≥ïÔºåÂåÖÂê´‰∏§‰∏™ÂÖ•ÂèÇ:</p>
<ol>
<li><code>ConditionContext</code>Ôºö‰∏ä‰∏ãÊñá‰ø°ÊÅØÔºõ</li>
<li><code>AnnotatedTypeMetadata</code>ÔºöÊ≥®Ëß£‰ø°ÊÅØ„ÄÇ</li>
</ol>
<p>ÁÆÄÂçïÂÆåÂñÑ‰∏Ä‰∏ãËøô‰∏™ÂÆûÁé∞Á±ª:</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCondition</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">osName</span> <span class="operator">=</span> context.getEnvironment().getProperty(<span class="string">"os.name"</span>);</span><br><span class="line">        <span class="keyword">return</span> osName != <span class="literal">null</span> &amp;&amp; osName.contains(<span class="string">"Windows"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Êé•ÁùÄÂ∞ÜËøô‰∏™Êù°‰ª∂Ê∑ªÂä†Âà∞User BeanÊ≥®ÂÜåÁöÑÂú∞ÊñπÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Conditional(MyCondition.class)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">"mrdjun"</span>, <span class="number">18</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®WindowsÁéØÂ¢É‰∏ãÔºåUserËøô‰∏™ÁªÑ‰ª∂Â∞ÜË¢´ÊàêÂäüÊ≥®ÂÜåÔºåÂ¶ÇÊûúÊòØÂà´ÁöÑÊìç‰ΩúÁ≥ªÁªüÔºåËøô‰∏™ÁªÑ‰ª∂Â∞Ü‰∏ç‰ºöË¢´Ê≥®ÂÜåÂà∞IOCÂÆπÂô®‰∏≠„ÄÇ</p>
<h3 id="Profile"><a href="#Profile" class="headerlink" title="@Profile"></a>@Profile</h3><p><code>@Profile</code>ÂèØ‰ª•Ê†πÊçÆ‰∏çÂêåÁöÑÁéØÂ¢ÉÂèòÈáèÊù•Ê≥®ÂÜå‰∏çÂêåÁöÑÁªÑ‰ª∂Ôºå‰∏ãÈù¢Êàë‰ª¨Êù•Â≠¶‰∏Ä‰∏ãÂÆÉÁöÑÁî®Ê≥ï„ÄÇ</p>
<p>Êñ∞Âª∫‰∏Ä‰∏™Êé•Âè£<code>CalculateService</code>Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CalculateService</span> {</span><br><span class="line">    Integer <span class="title function_">sum</span><span class="params">(Integer... value)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Êé•ÁùÄÊ∑ªÂä†‰∏§‰∏™ÂÆûÁé∞<code>Java7CalculateServiceImpl</code>Âíå<code>Java8CalculateServiceImpl</code>:</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Profile("java7")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Java7CalculateServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">CalculateService</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">sum</span><span class="params">(Integer... value)</span> {</span><br><span class="line">        System.out.println(<span class="string">"Java 7ÁéØÂ¢É‰∏ãÊâßË°å"</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= value.length; i++) {</span><br><span class="line">            result += i;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Profile("java8")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Java8CalculateServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">CalculateService</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">sum</span><span class="params">(Integer... value)</span> {</span><br><span class="line">        System.out.println(<span class="string">"Java 8ÁéØÂ¢É‰∏ãÊâßË°å"</span>);</span><br><span class="line">        <span class="keyword">return</span> Arrays.stream(value).reduce(<span class="number">0</span>, Integer::sum);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÈÄöËøá<code>@Profile</code>Ê≥®Ëß£Êàë‰ª¨ÂÆûÁé∞‰∫ÜÔºöÂΩìÁéØÂ¢ÉÂèòÈáèÂåÖÂê´<code>java7</code>ÁöÑÊó∂ÂÄôÔºå<code>Java7CalculateServiceImpl</code>Â∞Ü‰ºöË¢´Ê≥®ÂÜåÂà∞IOCÂÆπÂô®‰∏≠ÔºõÂΩìÁéØÂ¢ÉÂèòÈáèÂåÖÂê´<code>java8</code>ÁöÑÊó∂ÂÄôÔºå<code>Java8CalculateServiceImpl</code>Â∞Ü‰ºöË¢´Ê≥®ÂÜåÂà∞IOCÂÆπÂô®‰∏≠„ÄÇ</p>
<p>ÊµãËØï‰∏Ä‰∏ãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">ConfigurableApplicationContext</span> <span class="variable">context1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringApplicationBuilder</span>(DemoApplication.class)</span><br><span class="line">                .web(WebApplicationType.NONE)</span><br><span class="line">                .profiles(<span class="string">"java8"</span>)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line"><span class="type">CalculateService</span> <span class="variable">service</span> <span class="operator">=</span> context1.getBean(CalculateService.class);</span><br><span class="line">System.out.println(<span class="string">"Ê±ÇÂêàÁªìÊûúÔºö "</span> + service.sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>));</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆÔºåÊéßÂà∂Âè∞ËæìÂá∫Â¶Ç‰∏ãÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">The following profiles are active: java8</span><br><span class="line">Java 8ÁéØÂ¢É‰∏ãÊâßË°å</span><br><span class="line">Ê±ÇÂíåÁªìÊûúÔºö   55</span><br></pre></td></tr></tbody></table></figure>

<p>Â¶ÇÊûúÂ∞Ü<code>.profiles("java8")</code>Êîπ‰∏∫<code>.profiles("java7")</code>ÁöÑËØùÔºåÊéßÂà∂Âè∞ËæìÂá∫Â¶Ç‰∏ãÔºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">The following profiles are active: java7</span><br><span class="line">Java 7ÁéØÂ¢É‰∏ãÊâßË°å</span><br><span class="line">Ê±ÇÂíåÁªìÊûúÔºö   55</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÂØºÂÖ•ÁªÑ‰ª∂"><a href="#ÂØºÂÖ•ÁªÑ‰ª∂" class="headerlink" title="ÂØºÂÖ•ÁªÑ‰ª∂"></a>ÂØºÂÖ•ÁªÑ‰ª∂</h2><h3 id="Import"><a href="#Import" class="headerlink" title="@Import"></a>@Import</h3><p>Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ÂåÖÊâ´ÊèèÂíå<code>@Bean</code>Êù•ÂÆûÁé∞ÁªÑ‰ª∂Ê≥®ÂÜå„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•‰ΩøÁî®<code>@Import</code>Êù•Âø´ÈÄüÂú∞ÂæÄIOCÂÆπÂô®‰∏≠Ê∑ªÂä†ÁªÑ‰ª∂„ÄÇ</p>
<p>ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ±ª<code>Hello</code>Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> {}</span><br></pre></td></tr></tbody></table></figure>

<p>ÁÑ∂ÂêéÂú®ÈÖçÁΩÆÁ±ª‰∏≠ÂØºÂÖ•Ëøô‰∏™ÁªÑ‰ª∂Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Import({Hello.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line">	...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Êü•ÁúãIOCÂÆπÂô®‰∏≠ÊâÄÊúâÁªÑ‰ª∂ÁöÑÂêçÁß∞Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WebConfig.class);</span><br><span class="line">String[] beanNames = context.getBeanDefinitionNames();</span><br><span class="line">Arrays.stream(beanNames).forEach(System.out::println);</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆÔºåÊéßÂà∂Âè∞ËæìÂá∫:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">...</span><br><span class="line">webConfig</span><br><span class="line">com.mrdjun.demo.domain.Hello</span><br><span class="line">user</span><br></pre></td></tr></tbody></table></figure>

<p>ÂèØÁúãÂà∞ÔºåÈÄöËøá<code>@Import</code>Êàë‰ª¨ÂèØ‰ª•Âø´ÈÄüÂú∞ÂæÄIOCÂÆπÂô®‰∏≠Ê∑ªÂä†ÁªÑ‰ª∂ÔºåIdÈªòËÆ§‰∏∫ÂÖ®Á±ªÂêç„ÄÇ</p>
<h3 id="ImportSelector"><a href="#ImportSelector" class="headerlink" title="ImportSelector"></a>ImportSelector</h3><p>ÈÄöËøá<code>@Import</code>Êàë‰ª¨Â∑≤ÁªèÂÆûÁé∞‰∫ÜÁªÑ‰ª∂ÁöÑÂØºÂÖ•ÔºåÂ¶ÇÊûúÈúÄË¶Å‰∏ÄÊ¨°ÊÄßÂØºÂÖ•ËæÉÂ§öÁªÑ‰ª∂ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®<code>ImportSelector</code>Êù•ÂÆûÁé∞„ÄÇ</p>
<p>Êñ∞Â¢û‰∏â‰∏™Á±ª<code>Apple</code>Ôºå<code>Banana</code>Âíå<code>Watermelon</code>Ôºå‰ª£Á†ÅÁï•„ÄÇ</p>
<p>Êü•Áúã<code>ImportSelector</code>Ê∫êÁ†ÅÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ImportSelector</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Select and return the names of which class(es) should be imported based on</span></span><br><span class="line"><span class="comment">     * the {<span class="doctag">@link</span> AnnotationMetadata} of the importing @{<span class="doctag">@link</span> Configuration} class.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">     String[] selectImports(AnnotationMetadata importingClassMetadata);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>ImportSelector</code>ÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂåÖÂê´‰∏Ä‰∏™<code>selectImports</code>ÊñπÊ≥ïÔºåÊñπÊ≥ïËøîÂõûÁ±ªÁöÑÂÖ®Á±ªÂêçÊï∞ÁªÑÔºàÂç≥ÈúÄË¶ÅÂØºÂÖ•Âà∞IOCÂÆπÂô®‰∏≠ÁªÑ‰ª∂ÁöÑÂÖ®Á±ªÂêçÊï∞ÁªÑÔºâÔºåÂåÖÂê´‰∏Ä‰∏™<code>AnnotationMetadata</code>Á±ªÂûãÂÖ•ÂèÇÔºåÈÄöËøáËøô‰∏™ÂèÇÊï∞Êàë‰ª¨ÂèØ‰ª•Ëé∑ÂèñÂà∞‰ΩøÁî®<code>ImportSelector</code>ÁöÑÁ±ªÁöÑÂÖ®ÈÉ®Ê≥®Ëß£‰ø°ÊÅØ„ÄÇ</p>
<p>Êàë‰ª¨Êñ∞Âª∫‰∏Ä‰∏™<code>ImportSelector</code>ÂÆûÁé∞Á±ª<code>MyImportSelector</code>Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportSelector</span> <span class="keyword">implements</span> <span class="title class_">ImportSelector</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]{</span><br><span class="line">                <span class="string">"com.mrdjun.demo.domain.Apple"</span>,</span><br><span class="line">                <span class="string">"com.mrdjun.demo.domain.Banana"</span>,</span><br><span class="line">                <span class="string">"com.mrdjun.demo.domain.Watermelon"</span></span><br><span class="line">        };</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏äÈù¢ÊñπÊ≥ïËøîÂõû‰∫ÜÊñ∞Â¢ûÁöÑ‰∏â‰∏™Á±ªÁöÑÂÖ®Á±ªÂêçÊï∞ÁªÑÔºåÊé•ÁùÄÊàë‰ª¨Âú®ÈÖçÁΩÆÁ±ªÁöÑ<code>@Import</code>Ê≥®Ëß£‰∏ä‰ΩøÁî®<code>MyImportSelector</code>Êù•ÊääËøô‰∏â‰∏™ÁªÑ‰ª∂Âø´ÈÄüÂú∞ÂØºÂÖ•Âà∞IOCÂÆπÂô®‰∏≠Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Import({MyImportSelector.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Êü•ÁúãÂÆπÂô®‰∏≠ÊòØÂê¶Â∑≤ÁªèÊúâËøô‰∏â‰∏™ÁªÑ‰ª∂:</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WebConfig.class);</span><br><span class="line">String[] beanNames = context.getBeanDefinitionNames();</span><br><span class="line">Arrays.stream(beanNames).forEach(System.out::println);</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆÔºåËßÇÂØüÊéßÂà∂Âè∞Ôºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">com.mrdjun.demo.domain.Apple</span><br><span class="line">com.mrdjun.demo.domain.Banana</span><br><span class="line">com.mrdjun.demo.domain.Watermelon</span><br></pre></td></tr></tbody></table></figure>

<p>ÁªÑ‰ª∂Â∑≤ÁªèÊàêÂäüÂØºÂÖ•„ÄÇ</p>
<h3 id="ImportBeanDefinitionRegistrar"><a href="#ImportBeanDefinitionRegistrar" class="headerlink" title="ImportBeanDefinitionRegistrar"></a>ImportBeanDefinitionRegistrar</h3><p>Èô§‰∫Ü‰∏äÈù¢‰∏§ÁßçÂæÄIOCÂÆπÂô®ÂØºÂÖ•ÁªÑ‰ª∂ÁöÑÊñπÊ≥ïÂ§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•‰ΩøÁî®<code>ImportBeanDefinitionRegistrar</code>Êù•ÊâãÂä®ÂæÄIOCÂÆπÂô®ÂØºÂÖ•ÁªÑ‰ª∂„ÄÇ</p>
<p>Êü•ÁúãÂÖ∂Ê∫êÁ†ÅÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ImportBeanDefinitionRegistrar</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerBeanDefinitions</span><span class="params">(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>ImportBeanDefinitionRegistrar</code>ÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂåÖÂê´‰∏Ä‰∏™<code>registerBeanDefinitions</code>ÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÂåÖÂê´‰∏§‰∏™ÂÖ•ÂèÇÔºö</p>
<ol>
<li><code>AnnotationMetadata</code>ÔºöÂèØ‰ª•ÈÄöËøáÂÆÉËé∑ÂèñÂà∞Á±ªÁöÑÊ≥®Ëß£‰ø°ÊÅØÔºõ</li>
<li><code>BeanDefinitionRegistry</code>ÔºöBeanÂÆö‰πâÊ≥®ÂÜåÂô®ÔºåÂåÖÂê´‰∫Ü‰∏Ä‰∫õÂíåBeanÊúâÂÖ≥ÁöÑÊñπÊ≥ïÔºö</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BeanDefinitionRegistry</span> <span class="keyword">extends</span> <span class="title class_">AliasRegistry</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">registerBeanDefinition</span><span class="params">(String var1, BeanDefinition var2)</span> <span class="keyword">throws</span> BeanDefinitionStoreException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">removeBeanDefinition</span><span class="params">(String var1)</span> <span class="keyword">throws</span> NoSuchBeanDefinitionException;</span><br><span class="line"></span><br><span class="line">    BeanDefinition <span class="title function_">getBeanDefinition</span><span class="params">(String var1)</span> <span class="keyword">throws</span> NoSuchBeanDefinitionException;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">containsBeanDefinition</span><span class="params">(String var1)</span>;</span><br><span class="line"></span><br><span class="line">    String[] getBeanDefinitionNames();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">getBeanDefinitionCount</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isBeanNameInUse</span><span class="params">(String var1)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËøôÈáåÊàë‰ª¨ÈúÄË¶ÅÂÄüÂä©<code>BeanDefinitionRegistry</code>ÁöÑ<code>registerBeanDefinition</code>ÊñπÊ≥ïÊù•ÂæÄIOCÂÆπÂô®‰∏≠Ê≥®ÂÜåBean„ÄÇËØ•ÊñπÊ≥ïÂåÖÂê´‰∏§‰∏™ÂÖ•ÂèÇÔºåÁ¨¨‰∏Ä‰∏™‰∏∫ÈúÄË¶ÅÊ≥®ÂÜåÁöÑBeanÂêçÁß∞ÔºàIdÔºâ,Á¨¨‰∫å‰∏™ÂèÇÊï∞‰∏∫BeanÁöÑÂÆö‰πâ‰ø°ÊÅØÔºåÂÆÉÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ÂÖ∂ÂÆûÁé∞Á±ª<code>RootBeanDefinition</code>Êù•ÂÆåÊàêÔºö</p>
<p><img src="/p/4bb4364/QQ%E6%88%AA%E5%9B%BE20190130094046.png" alt="QQÊà™Âõæ20190130094046.png"></p>
<p>‰∏∫‰∫ÜÊºîÁ§∫<code>ImportBeanDefinitionRegistrar</code>ÁöÑ‰ΩøÁî®ÔºåÊàë‰ª¨ÂÖàÊñ∞Â¢û‰∏Ä‰∏™Á±ªÔºåÂêçÁß∞‰∏∫<code>Strawberry</code>Ôºå‰ª£Á†ÅÁï•„ÄÇ</p>
<p>ÁÑ∂ÂêéÊñ∞Â¢û‰∏Ä‰∏™<code>ImportBeanDefinitionRegistrar</code>ÂÆûÁé∞Á±ª<code>MyImportBeanDefinitionRegistrar</code>Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportBeanDefinitionRegistrar</span> <span class="keyword">implements</span> <span class="title class_">ImportBeanDefinitionRegistrar</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerBeanDefinitions</span><span class="params">(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)</span> {</span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">beanName</span> <span class="operator">=</span> <span class="string">"strawberry"</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">contain</span> <span class="operator">=</span> registry.containsBeanDefinition(beanName);</span><br><span class="line">        <span class="keyword">if</span> (!contain) {</span><br><span class="line">            <span class="type">RootBeanDefinition</span> <span class="variable">rootBeanDefinition</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RootBeanDefinition</span>(Strawberry.class);</span><br><span class="line">            registry.registerBeanDefinition(beanName, rootBeanDefinition);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®‰∏äÈù¢ÁöÑÂÆûÁé∞Á±ª‰∏≠ÔºåÊàë‰ª¨ÂÖàÈÄöËøá<code>BeanDefinitionRegistry</code>ÁöÑ<code>containsBeanDefinition</code>ÊñπÊ≥ïÂà§Êñ≠IOCÂÆπÂô®‰∏≠ÊòØÂê¶ÂåÖÂê´‰∫ÜÂêçÁß∞‰∏∫<code>strawberry</code>ÁöÑÁªÑ‰ª∂ÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂàôÊâãÂä®ÈÄöËøá<code>BeanDefinitionRegistry</code>ÁöÑ<code>registerBeanDefinition</code>ÊñπÊ≥ïÊ≥®ÂÜå‰∏Ä‰∏™„ÄÇ</p>
<p>ÂÆö‰πâÂ•Ω<code>MyImportBeanDefinitionRegistrar</code>ÂêéÔºåÊàë‰ª¨ÂêåÊ†∑Âú∞Âú®ÈÖçÁΩÆÁ±ªÁöÑ<code>@Import</code>‰∏≠‰ΩøÁî®ÂÆÉÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Import({MyImportBeanDefinitionRegistrar.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> {</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Êü•ÁúãÂÆπÂô®‰∏≠ÊòØÂê¶Â∑≤ÁªèÊúâËøô‰∏™ÁªÑ‰ª∂:</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WebConfig.class);</span><br><span class="line">String[] beanNames = context.getBeanDefinitionNames();</span><br><span class="line">Arrays.stream(beanNames).forEach(System.out::println);</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆÔºåËßÇÂØüÊéßÂà∂Âè∞Ôºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">strawberry</span><br></pre></td></tr></tbody></table></figure>

<p>ÁªÑ‰ª∂Â∑≤ÁªèÊ≥®ÂÜåÊàêÂäü„ÄÇ</p>
<h2 id="‰ΩøÁî®FactoryBeanÊ≥®ÂÜåÁªÑ‰ª∂"><a href="#‰ΩøÁî®FactoryBeanÊ≥®ÂÜåÁªÑ‰ª∂" class="headerlink" title="‰ΩøÁî®FactoryBeanÊ≥®ÂÜåÁªÑ‰ª∂"></a>‰ΩøÁî®FactoryBeanÊ≥®ÂÜåÁªÑ‰ª∂</h2><p>SpringËøòÊèê‰æõ‰∫Ü‰∏Ä‰∏™<code>FactoryBean</code>Êé•Âè£ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂÆûÁé∞ËØ•Êé•Âè£Êù•Ê≥®ÂÜåÁªÑ‰ª∂ÔºåËØ•Êé•Âè£ÂåÖÂê´‰∫Ü‰∏§‰∏™ÊäΩË±°ÊñπÊ≥ïÂíå‰∏Ä‰∏™ÈªòËÆ§ÊñπÊ≥ïÔºö</p>
<p><img src="/p/4bb4364/QQ%E6%88%AA%E5%9B%BE20190130103346.png" alt="QQÊà™Âõæ20190130103346.png"></p>
<p>‰∏∫‰∫ÜÊºîÁ§∫<code>FactoryBean</code>ÁöÑ‰ΩøÁî®ÔºåÊàë‰ª¨Êñ∞Â¢û‰∏Ä‰∏™<code>Cherry</code>Á±ªÔºå‰ª£Á†ÅÁï•„ÄÇ</p>
<p>ÁÑ∂ÂêéÂàõÂª∫<code>FactoryBean</code>ÁöÑÂÆûÁé∞Á±ª<code>CherryFactoryBean</code>:</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CherryFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;Cherry&gt; {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Cherry <span class="title function_">getObject</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cherry</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() {</span><br><span class="line">        <span class="keyword">return</span> Cherry.class;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>getObject</code>ËøîÂõûÈúÄË¶ÅÊ≥®ÂÜåÁöÑÁªÑ‰ª∂ÂØπË±°Ôºå<code>getObjectType</code>ËøîÂõûÈúÄË¶ÅÊ≥®ÂÜåÁöÑÁªÑ‰ª∂Á±ªÂûãÔºå<code>isSingleton</code>ÊåáÊòéËØ•ÁªÑ‰ª∂ÊòØÂê¶‰∏∫Âçï‰æã„ÄÇÂ¶ÇÊûú‰∏∫Â§ö‰æãÁöÑËØùÔºåÊØèÊ¨°‰ªéÂÆπÂô®‰∏≠Ëé∑ÂèñËØ•ÁªÑ‰ª∂ÈÉΩ‰ºöË∞ÉÁî®ÂÖ∂<code>getObject</code>ÊñπÊ≥ï„ÄÇ</p>
<p>ÂÆö‰πâÂ•Ω<code>CherryFactoryBean</code>ÂêéÔºåÊàë‰ª¨Âú®ÈÖçÁΩÆÁ±ª‰∏≠Ê≥®ÂÜåËøô‰∏™Á±ªÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> CherryFactoryBean <span class="title function_">cherryFactoryBean</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CherryFactoryBean</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÊµãËØï‰ªéÂÆπÂô®‰∏≠Ëé∑ÂèñÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WebConfig.class);</span><br><span class="line"><span class="type">Object</span> <span class="variable">cherry</span> <span class="operator">=</span> context.getBean(<span class="string">"cherryFactoryBean"</span>);</span><br><span class="line">System.out.println(cherry.getClass());</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆÔºåËßÇÂØüÊéßÂà∂Âè∞ËæìÂá∫Ôºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">class com.mrdjun.demo.domain.Cherry</span><br></pre></td></tr></tbody></table></figure>

<p>ÂèØÁúãÂà∞ÔºåËôΩÁÑ∂Êàë‰ª¨Ëé∑ÂèñÁöÑÊòØId‰∏∫<code>cherryFactoryBean</code>ÁöÑÁªÑ‰ª∂Ôºå‰ΩÜÂÖ∂Ëé∑ÂèñÂà∞ÁöÑÂÆûÈôÖÊòØ<code>getObject</code>ÊñπÊ≥ïÈáåËøîÂõûÁöÑÂØπË±°„ÄÇ</p>
<p>Â¶ÇÊûúÊàë‰ª¨Ë¶ÅËé∑Âèñ<code>cherryFactoryBean</code>Êú¨Ë∫´ÔºåÂàôÂèØ‰ª•ËøôÊ†∑ÂÅöÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">cherryFactoryBean</span> <span class="operator">=</span> context.getBean(<span class="string">"&amp;cherryFactoryBean"</span>);</span><br><span class="line">System.out.println(cherryFactoryBean.getClass());</span><br></pre></td></tr></tbody></table></figure>

<p>ÂêØÂä®È°πÁõÆÔºåËßÇÂØüÊéßÂà∂Âè∞Ôºö</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">class com.mrdjun.demo.factory.CherryFactoryBean</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏∫‰ªÄ‰πàÂä†‰∏ä<code>&amp;</code>ÂâçÁºÄÂ∞±ÂèØ‰ª•Ëé∑ÂèñÂà∞Áõ∏Â∫îÁöÑÂ∑•ÂéÇÁ±ª‰∫ÜÂë¢ÔºåÊü•Áúã<code>BeanFactory</code>ÁöÑÊ∫êÁ†Å‰ºöÂèëÁé∞ÂéüÂõ†:</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BeanFactory</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">FACTORY_BEAN_PREFIX</span> <span class="operator">=</span> <span class="string">"&amp;"</span>;</span><br><span class="line">	...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</body></html>]]></content>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>JSP‰∏éServlet</title>
    <url>/p/931edf21.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="JSPËøêË°åÂéüÁêÜ"><a href="#JSPËøêË°åÂéüÁêÜ" class="headerlink" title="JSPËøêË°åÂéüÁêÜ"></a>JSPËøêË°åÂéüÁêÜ</h2><ol>
<li>ÂÆ¢Êà∑Á´ØÈÄöËøáÊµèËßàÂô®ÂêëÊúçÂä°Âô®ÂèëÂá∫ËØ∑Ê±ÇÔºåÂú®ËØ•ËØ∑Ê±Ç‰∏≠ÂåÖÂê´‰∫ÜËØ∑Ê±ÇÁöÑËµÑÊ∫êÁöÑË∑ØÂæÑÔºåËøôÊ†∑ÂΩìÊúçÂä°Âô®Êé•Êî∂Âà∞ËØ•ËØ∑Ê±ÇÂêéÂ∞±ÂèØ‰ª•Áü•ÈÅìË¢´ËØ∑Ê±ÇÁöÑÂÜÖÂÆπ„ÄÇ</li>
<li>ÊúçÂä°Âô®Ê†πÊçÆÊé•Êî∂Âà∞ÁöÑÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÊù•Âä†ËΩΩÁõ∏Â∫îÁöÑJSPÊñá‰ª∂„ÄÇ</li>
<li>WebÊúçÂä°Âô®‰∏≠ÁöÑJSPÂºïÊìé‰ºöÂ∞ÜË¢´Âä†ËΩΩÁöÑJSPÊñá‰ª∂ËΩ¨Âåñ‰∏∫ServletÊñá‰ª∂(.java)„ÄÇ</li>
<li>JSPÂºïÊìéÂ∞ÜÁîüÊàêÁöÑServlet‰ª£Á†ÅÁºñËØëÊàêClassÊñá‰ª∂„ÄÇ</li>
<li>ÊúçÂä°Âô®ÊâßË°åËøô‰∏™ClassÊñá‰ª∂„ÄÇ</li>
<li>ÊúÄÂêéÊúçÂä°Âô®Â∞ÜÊâßË°åÁªìÊûúÂèëÈÄÅÁªôÊµèËßàÂô®ËøõË°åÊòæÁ§∫„ÄÇ</li>
</ol>
<p><img src="/p/931edf21/JSP%E7%9A%84%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86.png" alt="image-20210413234913992"></p>
<p><img src="/p/931edf21/JSP%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86-HTML%E7%94%9F%E6%88%90%E5%8E%9F%E7%90%86.png" alt="image-20210413235547555"></p>
<h2 id="Servlet-ÁöÑÁîüÂëΩÂë®Êúü"><a href="#Servlet-ÁöÑÁîüÂëΩÂë®Êúü" class="headerlink" title="Servlet ÁöÑÁîüÂëΩÂë®Êúü"></a>Servlet ÁöÑÁîüÂëΩÂë®Êúü</h2><p><img src="/p/931edf21/Servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="image-20210414113222266"></p>
<p>Âú®Servlet‰∏≠Ôºåinit ÊñπÊ≥ïÂè™‰ºöÂú®ÂÆπÂô®ÂêØÂä®Êó∂ÊâßË°å‰∏ÄÊ¨°„ÄÇ</p>
<p>Âú®‰ΩøÁî®ServletÁºñÂÜô‰∏öÂä°‰ª£Á†ÅÊó∂ÔºåÊó†ËÆ∫ÊòØÊåâÁÖßÈ°µÈù¢ÂàÜÔºåËøòÊòØ‰∏öÂä°Âå∫ÂàÜÔºåÈÉΩÊó†Ê≥ïÈÅøÂÖçServletÂíåweb.xmlËøáÂ§öÁöÑÈóÆÈ¢ò„ÄÇËÄå‰∏îËøôÁßçÁªìÊûÑËøò‰∏çÂà©‰∫éÂõ¢ÈòüÂºÄÂèë„ÄÇ</p>
<p>Spring MVC ‰ªÖÈÄöËøáDispatherServlet ËøõË°åËØ∑Ê±ÇÊ¥æÂèëÔºåÈÄöËøá‰ª•‰∏ã‰∏âÁÇπÂáèÂ∞ëServletÁöÑÊï∞ÈáèÔºö</p>
<ul>
<li>Êã¶Êà™ÊâÄÊúâËØ∑Ê±Ç</li>
<li>Ëß£ÊûêËØ∑Ê±Ç</li>
<li>Ê¥æÂèëÁªôÂØπÂ∫îÁöÑControllerÈáåÈù¢ÁöÑÊñπÊ≥ïËøõË°åÂ§ÑÁêÜ</li>
</ul>
<h2 id="SpringÁöÑ‰ΩúÁî®Âüü"><a href="#SpringÁöÑ‰ΩúÁî®Âüü" class="headerlink" title="SpringÁöÑ‰ΩúÁî®Âüü"></a>SpringÁöÑ‰ΩúÁî®Âüü</h2><ul>
<li><p>singletonÔºöÂú®spring IOCÂÆπÂô®‰∏≠‰ªÖÂ≠òÂú®‰∏Ä‰∏™BeanÂÆû‰æã,Bean‰ª•ÂçïÂÆû‰æãÁöÑÊñπÂºèÂ≠òÂú®„ÄÇ</p>
</li>
<li><p>prototypeÔºöÊØèÊ¨°‰ªéÂÆπÂô®‰∏≠Ë∞ÉÁî®BeanÊó∂,ÈÉΩËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÂÆû‰æã,Âç≥ÊØèÊ¨°Ë∞ÉÁî®getBean()Êó∂,Áõ∏ÂΩì‰∫éÊâßË°ånew XxxBean()ÁöÑÊìç‰Ωú„ÄÇ</p>
</li>
<li><p>requestÔºöÊØèÊ¨°HTTPËØ∑Ê±ÇÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑBean,ËØ•‰ΩúÁî®Âüü‰ªÖÈÄÇÁî®‰∫éwebApplicationContextÁéØÂ¢É„ÄÇ</p>
</li>
<li><p>sessionÔºöÂêå‰∏Ä‰∏™HTTP sessionÂÖ±‰∫´‰∏Ä‰∏™Bean,‰∏çÂêåHTTP session‰ΩøÁî®‰∏çÂêåÁöÑBean,ËØ•‰ΩúÁî®Âüü‰ªÖÈÄÇÁî®‰∫éwebApplicationContextÁéØÂ¢É„ÄÇ</p>
</li>
<li><p>globalsessionÔºöÂêå‰∏Ä‰∏™ÂÖ®Â±ÄsessionÂÖ±‰∫´‰∏Ä‰∏™Bean,‰∏ÄËà¨Áî®‰∫éportletÂ∫îÁî®ÁéØÂ¢É,ËØ•‰ΩúÁî®Âüü‰ªÖÈÄÇÁî®‰∫éwebApplicationContextÁéØÂ¢É„ÄÇ</p>
</li>
</ul>
</body></html>]]></content>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBootÊ≥®Ëß£@Conditional</title>
    <url>/p/dc1803fb.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Conditional"><a href="#Conditional" class="headerlink" title="@Conditional"></a>@Conditional</h2><p>‰ΩúÁî®ÔºöÊåâÁÖß‰∏ÄÂÆöÁöÑÊù°‰ª∂ËøõË°åÂà§Êñ≠ÔºåÊª°Ë∂≥Êù°‰ª∂ÊâçÂú®ÂÆπÂô®Ê≥®ÂÜåbean„ÄÇ</p>
<p>ËøôÊòØSpring4Êñ∞Êèê‰æõÁöÑÊ≥®Ëß£ÔºåÂÆö‰πâÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//Ê≠§Ê≥®Ëß£ÂèØ‰ª•Ê†áÊ≥®Âú®Á±ªÂíåÊñπÊ≥ï‰∏ä</span></span><br><span class="line"><span class="meta">@Target({ElementType.TYPE, ElementType.METHOD})</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span> </span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Conditional {</span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Condition</span>&gt;[] value();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÈúÄË¶ÅÂÜô‰∏Ä‰∏™Á±ªÂéªÁªßÊâø Condition Êé•Âè£ÔºåÂπ∂ÂÆûÁé∞ÈáåÈù¢ÁöÑ matches ÊñπÊ≥ïÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Condition</span> {</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> var1:Âà§Êñ≠Êù°‰ª∂ËÉΩ‰ΩøÁî®ÁöÑ‰∏ä‰∏ãÊñáÁéØÂ¢É</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> var2:Ê≥®Ëß£ÊâÄÂú®‰ΩçÁΩÆÁöÑÊ≥®Èáä‰ø°ÊÅØ</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext var1, AnnotatedTypeMetadata var2)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Ëé∑ÂèñÂÆπÂô®ÁöÑ‰∏ä‰∏ãÊñáÁéØÂ¢ÉÔºåconditionContextÊèê‰æõ‰∫ÜÂ§öÁßçÊñπÊ≥ïÔºåÊñπ‰æøËé∑ÂèñÂêÑÁßç‰ø°ÊÅØÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCondition</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> {</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata)</span> {</span><br><span class="line">        <span class="comment">// Ëé∑Âèñioc‰ΩøÁî®ÁöÑ beanFactory</span></span><br><span class="line">        <span class="type">ConfigurableListableBeanFactory</span> <span class="variable">beanFactory</span> <span class="operator">=</span> conditionContext.getBeanFactory();</span><br><span class="line">        <span class="comment">//Ëé∑ÂèñÁ±ªÂä†ËΩΩÂô®</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> conditionContext.getClassLoader();</span><br><span class="line">        <span class="comment">//Ëé∑ÂèñÂΩìÂâçÁéØÂ¢É‰ø°ÊÅØ</span></span><br><span class="line">        <span class="type">Environment</span> <span class="variable">environment</span> <span class="operator">=</span> conditionContext.getEnvironment();</span><br><span class="line">        <span class="comment">//Ëé∑ÂèñbeanÂÆö‰πâÁöÑÊ≥®ÂÜåÁ±ª</span></span><br><span class="line">        <span class="type">BeanDefinitionRegistry</span> <span class="variable">registry</span> <span class="operator">=</span> conditionContext.getRegistry();</span><br><span class="line">        <span class="comment">//Ëé∑ÂæóÂΩìÂâçÁ≥ªÁªüÂêç</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">property</span> <span class="operator">=</span> environment.getProperty(<span class="string">"os.name"</span>);</span><br><span class="line">        <span class="comment">// ‰æãÂ¶ÇÔºöÂΩìÂâçÁéØÂ¢ÉÊòØÂê¶windowsÁ≥ªÁªüÔºåËøîÂõûtrue</span></span><br><span class="line">        <span class="keyword">if</span> (property.contains(<span class="string">"Windows"</span>)){</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Âçï‰∏™Âà§Êñ≠Êù°‰ª∂"><a href="#Âçï‰∏™Âà§Êñ≠Êù°‰ª∂" class="headerlink" title="Âçï‰∏™Âà§Êñ≠Êù°‰ª∂"></a>Âçï‰∏™Âà§Êñ≠Êù°‰ª∂</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ÊîæÂú®Á±ª‰∏äÔºåËã•ÂΩìÂâçÊù°‰ª∂Âú®MyCondition‰∏≠mathesÁöÑÊñπÊ≥ï‰∏∫trueÔºåÂ∞Ü‰ºöÂêëÂÆπÂô®Ê≥®ÂÖ•‰∏Ä‰∏™ÊàñÂ§ö‰∏™bean</span></span><br><span class="line"><span class="meta">@Conditional({MyCondition.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span>{</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">bean1</span><span class="params">()</span>{}</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">bean2</span><span class="params">()</span>{}</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Â§ö‰∏™Âà§Êñ≠Êù°‰ª∂ÁöÑÂ∫îÁî®"><a href="#Â§ö‰∏™Âà§Êñ≠Êù°‰ª∂ÁöÑÂ∫îÁî®" class="headerlink" title="Â§ö‰∏™Âà§Êñ≠Êù°‰ª∂ÁöÑÂ∫îÁî®"></a>Â§ö‰∏™Âà§Êñ≠Êù°‰ª∂ÁöÑÂ∫îÁî®</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// AÂíåBÈÉΩËøîÂõûtrue,Êâç‰ºöÊ≥®ÂÖ•ÂÆπÂô®</span></span><br><span class="line"><span class="meta">@Conditional({ACondition.class,BCondition.class})</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span>{</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">bean1</span><span class="params">()</span>{}</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">bean2</span><span class="params">()</span>{}</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Áªß@ConditionalÊ≥®Ëß£ÂêéÔºåÊ¥æÁîüÂá∫ @ConditionalOnBean„ÄÅ@ConditionalOnMissingBean„ÄÅ@ConditionalOnExpression„ÄÅ@ConditionalOnClass Á≠â</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@ConditionalOnBean</span>         <span class="comment">//	ÂΩìÁªôÂÆöÁöÑÂú®beanÂ≠òÂú®Êó∂,ÂàôÂÆû‰æãÂåñÂΩìÂâçBean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>  <span class="comment">//	ÂΩìÁªôÂÆöÁöÑÂú®bean‰∏çÂ≠òÂú®Êó∂,ÂàôÂÆû‰æãÂåñÂΩìÂâçBean</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>        <span class="comment">//	ÂΩìÁªôÂÆöÁöÑÁ±ªÂêçÂú®Á±ªË∑ØÂæÑ‰∏äÂ≠òÂú®ÔºåÂàôÂÆû‰æãÂåñÂΩìÂâçBean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingClass</span> <span class="comment">//	ÂΩìÁªôÂÆöÁöÑÁ±ªÂêçÂú®Á±ªË∑ØÂæÑ‰∏ä‰∏çÂ≠òÂú®ÔºåÂàôÂÆû‰æãÂåñÂΩìÂâçBean</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="ConditionalOnBean"><a href="#ConditionalOnBean" class="headerlink" title="@ConditionalOnBean"></a>@ConditionalOnBean</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span>{</span><br><span class="line">    <span class="meta">@Bean(name="bean1")</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">bean1</span><span class="params">()</span>{}</span><br><span class="line">   </span><br><span class="line">    <span class="meta">@Bean(name="bean2")</span></span><br><span class="line">    <span class="comment">// Â¶ÇÊûúbean1Â∑≤ÁªèÊ≥®ÂÖ•ÂÆπÂô®ÔºåÂàôbean2‰πüÂ∞ÜÊ≥®ÂÖ•</span></span><br><span class="line">    <span class="meta">@ConditionalOnBean(name="bean1")</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">bean2</span><span class="params">()</span>{}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ConditionalOnMissingBean"><a href="#ConditionalOnMissingBean" class="headerlink" title="@ConditionalOnMissingBean"></a>@ConditionalOnMissingBean</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span>{</span><br><span class="line">    <span class="meta">@Bean(name="bean1")</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">bean1</span><span class="params">()</span>{}</span><br><span class="line">   </span><br><span class="line">    <span class="meta">@Bean(name="bean2")</span></span><br><span class="line">    <span class="comment">// Â¶ÇÊûúbean1Â∑≤ÁªèÊ≥®ÂÖ•ÂÆπÂô®ÔºåÂàô‰∏ç‰ºöÂ∞Übean2Ê≥®ÂÖ•</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(name="bean1")</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">bean2</span><span class="params">()</span>{}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú® @ConditionalOnMissingBean ÁöÑÂ£∞Êòé‰∏≠Ôºå‰ΩøÁî®ÁöÑ‰πüÊòØ@ConditionalÊ≥®Ëß£ÔºåÂÆûÁé∞‰∫Ü‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÂäüËÉΩÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Target({ElementType.TYPE, ElementType.METHOD})</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="comment">// Âà§Êñ≠Êù°‰ª∂‰∏∫ OnBeanConditionÔºåËÉΩÂ§üÊåâbeanÂêç„ÄÅbeanÁ±ªÂêçÁ≠âÂ§öÁßçÁ±ªÂûãÂà§Êñ≠beanÊòØÂê¶Âú®ÂÆπÂô®</span></span><br><span class="line"><span class="meta">@Conditional({OnBeanCondition.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ConditionalOnBean {</span><br><span class="line">    Class&lt;?&gt;[] value() <span class="keyword">default</span> {};</span><br><span class="line"></span><br><span class="line">    String[] type() <span class="keyword">default</span> {};</span><br><span class="line"></span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Annotation</span>&gt;[] annotation() <span class="keyword">default</span> {};</span><br><span class="line"></span><br><span class="line">    String[] name() <span class="keyword">default</span> {};</span><br><span class="line"></span><br><span class="line">    SearchStrategy <span class="title function_">search</span><span class="params">()</span> <span class="keyword">default</span> SearchStrategy.ALL;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] parameterizedContainer() <span class="keyword">default</span> {};</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÖ∂ÂÆÉ‰∏§‰∏™Ê≥®Ëß£ÂêåÁêÜ„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBootËá™Âä®Ë£ÖÈÖçÁöÑÂéüÁêÜ</title>
    <url>/p/b2efd41c.html</url>
    <content><![CDATA[<html><head></head><body><h2 id="Spring-Boot‰∏≠ÁöÑËá™Âä®Ë£ÖÈÖç"><a href="#Spring-Boot‰∏≠ÁöÑËá™Âä®Ë£ÖÈÖç" class="headerlink" title="Spring Boot‰∏≠ÁöÑËá™Âä®Ë£ÖÈÖç"></a>Spring Boot‰∏≠ÁöÑËá™Âä®Ë£ÖÈÖç</h2><p>Ê∑ªÂä†Starter‰æùËµñ</p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ÈÖçÁΩÆRedisÊï∞ÊçÆÊ∫ê</p>
<figure class="highlight properties"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">spring.redis.host</span>=<span class="string">localhost</span></span><br><span class="line"><span class="attr">spring.redis.port</span>=<span class="string">6379</span></span><br></pre></td></tr></tbody></table></figure>

<p>ÂàõÂª∫‰∏Ä‰∏™Controller</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RedisTemplate&lt;String,String&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping("/test")</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span>{</span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">"hello"</span>,<span class="string">"Spring Boot"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ËøôÂ∞±ÊòØ‰∏Ä‰∏™Spring BootÁöÑË£ÖÈÖçÊú∫Âà∂ÔºåÊàë‰ª¨Ê≤°ÊúâÈÄöËøáXMLÂΩ¢ÂºèÊàñËÄÖÊ≥®Ëß£ÁöÑÂΩ¢ÂºèÊääRedisTemplateÊ≥®ÂÖ•Âà∞IOCÂÆπÂô®Ôºå‰ΩÜÊòØÂú®Controller‰∏≠ÂèØ‰ª•Áõ¥Êé•ÈÄöËøá@AutowiredÊù•Áõ¥Êé•Ê≥®ÂÖ•‰ΩøÁî®„ÄÇ</p>
<h2 id="Ëá™Âä®Ë£ÖÈÖçÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"><a href="#Ëá™Âä®Ë£ÖÈÖçÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü" class="headerlink" title="Ëá™Âä®Ë£ÖÈÖçÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"></a>Ëá™Âä®Ë£ÖÈÖçÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDemoApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(TestDemoApplication.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÁÇπËøõ @SpringBootApplication Ëøô‰∏™Ê≥®Ëß£ÂéªÁúã‰∏ãÔºå@SpringBootApplication Ê≥®Ëß£‰∏ªË¶ÅÁî±‰∏â‰∏™Ê≥®Ëß£ÁªÑÊàêÔºö@ComponentScan„ÄÅ@SpringBootConfiguration„ÄÅ**@EnableAutoConfiguration**„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Target({ElementType.TYPE})</span> <span class="comment">//Êé•Âè£„ÄÅÁ±ª„ÄÅÊûö‰∏æ„ÄÅÊ≥®Ëß£</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="comment">//ËøôÁßçÁ±ªÂûãÁöÑAnnotationsÂ∞ÜË¢´JVM‰øùÁïô,ÊâÄ‰ª•‰ªñ‰ª¨ËÉΩÂú®ËøêË°åÊó∂Ë¢´JVMÊàñÂÖ∂‰ªñ‰ΩøÁî®ÂèçÂ∞ÑÊú∫Âà∂ÁöÑ‰ª£Á†ÅÊâÄËØªÂèñÂíå‰ΩøÁî®„ÄÇ</span></span><br><span class="line"><span class="meta">@Documented</span> <span class="comment">// ËØ¥ÊòéËØ•Ê≥®Ëß£Â∞ÜË¢´ÂåÖÂê´Âú®javadoc‰∏≠</span></span><br><span class="line"><span class="meta">@Inherited</span> <span class="comment">// ËØ¥ÊòéÂ≠êÁ±ªÂèØ‰ª•ÁªßÊâøÁà∂Á±ª‰∏≠ÁöÑËØ•Ê≥®Ëß£</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(</span></span><br><span class="line"><span class="meta">    excludeFilters = {@Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.CUSTOM,</span></span><br><span class="line"><span class="meta">    classes = {TypeExcludeFilter.class}</span></span><br><span class="line"><span class="meta">), @Filter(</span></span><br><span class="line"><span class="meta">    type = FilterType.CUSTOM,</span></span><br><span class="line"><span class="meta">    classes = {AutoConfigurationExcludeFilter.class}</span></span><br><span class="line"><span class="meta">)}</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootApplication {</span><br><span class="line"> 		...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÜçÁªßÁª≠ÁÇπËøõÂéª @EnableAutoConfiguration Ê≥®Ëß£Ôºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Target({ElementType.TYPE})</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span> <span class="comment">// Êää‰ΩøÁî®‰∫ÜËØ•Ê≥®Ëß£ÁöÑÁ±ªÊâÄÂú®ÁöÑÂåÖÂèäÂ≠êÂåÖ‰∏ãÊâÄÊúâÁªÑ‰ª∂Êâ´ÊèèÂà∞Spring IOCÂÆπÂô®‰∏≠</span></span><br><span class="line"><span class="meta">@Import({AutoConfigurationImportSelector.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableAutoConfiguration {</span><br><span class="line">    <span class="type">String</span> <span class="variable">ENABLED_OVERRIDE_PROPERTY</span> <span class="operator">=</span> <span class="string">"spring.boot.enableautoconfiguration"</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] exclude() <span class="keyword">default</span> {};</span><br><span class="line"></span><br><span class="line">    String[] excludeName() <span class="keyword">default</span> {};</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®@EnableAutoConfiguration‰∏≠ÊúÄÈáçË¶ÅÁöÑÊòØ **@Import({AutoConfigurationImportSelector.class}) **Ê≥®Ëß£„ÄÇ@Import Â∞Ü AutoConfigurationImportSelector Ëøô‰∏™Á±ªÂØºÂÖ•ÔºåÁÇπËøõËøô‰∏™Á±ª‰∏ÄÁúãÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoConfigurationImportSelector</span> <span class="keyword">implements</span> <span class="title class_">DeferredImportSelector</span>,***{}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DeferredImportSelector</span> <span class="keyword">extends</span> <span class="title class_">ImportSelector</span> {}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂÆûÁé∞‰∫Ü DeferredImportSelector Êé•Âè£ÔºåËÄå DeferredImportSelector ÊòØÁªßÊâø ImportSelector Á±ªÁöÑ„ÄÇÂú® ImportSelector  ‰∏≠Êúâ‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÊñπÊ≥ïÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ÊâπÈáèÂ∞ÜÁ±ªÊ≥®ÂÖ•Âà∞IOCÂÆπÂô®</span></span><br><span class="line">String[] selectImports(AnnotationMetadata var1);</span><br></pre></td></tr></tbody></table></figure>


<p><strong>Â¶Ç‰ΩïÂà©Áî® ImportSelector Ë£ÖÈÖçÁ±ªÂà∞IOCÂÆπÂô®‰∏≠Âéª</strong><br>È¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™Á±ªTestClass</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestClass</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÂàõÂª∫‰∏Ä‰∏™ImportSelectorÁöÑÂÆûÁé∞Á±ªÔºåÂú®ÂÆûÁé∞Á±ª‰∏≠ÊääÂÆö‰πâÁöÑBeanÂä†ÂÖ•StringÊï∞ÊçÆ‰∏≠ÔºàÂõ†‰∏∫ImportSelectorÂèØ‰ª•ÂÆûÁé∞ÊâπÈáèË£ÖÈÖçÔºåËøôÈáåÁî®‰∏Ä‰∏™Êù•‰∏æ‰æãÔºåÂ§ö‰∏™ÈÄóÂè∑ÂàÜÈöîÂ∞±Â•ΩÔºâÔºåËØ•BeanÂ∞Ü‰ºöË£ÖÈÖçÂà∞IOCÂÆπÂô®‰∏≠</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestImportSelector</span> <span class="keyword">implements</span> <span class="title class_">ImportSelector</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata annotationMetadata) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]{TestClass.class.getName()};</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>‰∏∫‰∫ÜÊ®°Êãü EnableAutoConfigurationÔºåÊàë‰ª¨Ëá™ÂÆö‰πâ‰∏Ä‰∏™Ê≥®Ëß£ÔºåÈÄöËøá@ImportÂØºÂÖ•</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span> </span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span> </span><br><span class="line"><span class="meta">@Documented</span> </span><br><span class="line"><span class="meta">@Inherited</span> </span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span> <span class="comment">//Ê∑ªÂä†ËØ•Ê≥®Ëß£ÁöÑÁ±ªÊâÄÂú®ÁöÑpackage ‰Ωú‰∏∫ Ëá™Âä®ÈÖçÁΩÆpackage ËøõË°åÁÆ°ÁêÜ</span></span><br><span class="line"><span class="meta">@Import(TestImportSelector.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableAutoImport {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ÁÑ∂ÂêéÂàõÂª∫‰∏Ä‰∏™ÂêØÂä®Á±ªÔºåÂú®ÂêØÂä®Á±ª‰∏ä‰ΩøÁî®@EnableAutoImportÊ≥®Ëß£ÔºåÂç≥ÂèØÈÄöËøágetBean‰ªéIOCÂÆπÂô®‰∏≠ÂæóÂà∞TestClassÂÆû‰æã</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableAutoImport</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImportSelectorMain</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">configurableApplicationContext</span> <span class="operator">=</span> SpringApplication.run(ImportSelectorMain.class,args);</span><br><span class="line">        <span class="type">TestClass</span> <span class="variable">testClass</span> <span class="operator">=</span> configurableApplicationContext.getBean(TestClass.class);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><p>Ëá™Âä®Ë£ÖÈÖçÁöÑÂéüÁêÜÊòØÈÄöËøá‰∏ªË¶ÅÁªÑÊàê@SpringBootApplicationÊ≥®Ëß£ÁöÑ@SpringBootConfiguration„ÄÅ@EnableAutoConfiguration„ÄÅ@ComponentScan‰∏â‰∏™Ê≥®Ëß£‰∏≠ÁöÑ@EnableAutoConfiguration ‰∏≠ÈÄöËøá @Import({AutoConfigurationImportSelector.class}) ÂØºÂÖ•ÁöÑAutoConfigurationImportSelectorÂÆûÁé∞ÁöÑ selectImports ÊñπÊ≥ïÊù•ÂÆûÁé∞ÊâπÈáèË£ÖÈÖçÁöÑ„ÄÇ</p>
<p>‰∏äÈù¢Ëøô‰∏™ÈóÆÈ¢òÂõûÁ≠î‰∏ä‰∫Ü‰πãÂêéÔºåÊúâ‰∫õÈù¢ËØïÂÆò‰ºöÊ∑±ÂÖ•ÈóÆ‰∏ãÈù¢Ëøô‰∏™ÈóÆÈ¢òÔºö</p>
<h2 id="Ë£ÖÈÖç-application-properties-yml"><a href="#Ë£ÖÈÖç-application-properties-yml" class="headerlink" title="Ë£ÖÈÖç application.properties/yml"></a>Ë£ÖÈÖç application.properties/yml</h2><p>Âú®autoconfigureÂåÖ‰∏ãÊúâ‰∏™Á±ª ServletWebServerFactoryAutoConfigurationÔºåËøô‰∏™ÊòØSpringBoot Ëá™Âä®Ë£ÖÈÖç Servlet ÈÖçÁΩÆÁöÑÁ±ª„ÄÇ</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.boot.autoconfigure.web.servlet; <span class="comment">// ÂåÖË∑ØÂæÑ</span></span><br><span class="line"><span class="meta">@Configuration(</span></span><br><span class="line"><span class="meta">    proxyBeanMethods = false</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(-2147483648)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass({ServletRequest.class})</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(</span></span><br><span class="line"><span class="meta">    type = Type.SERVLET</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties({ServerProperties.class})</span></span><br><span class="line"><span class="meta">@Import({ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class, EmbeddedTomcat.class, EmbeddedJetty.class, EmbeddedUndertow.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletWebServerFactoryAutoConfiguration</span> {}</span><br></pre></td></tr></tbody></table></figure>

<p>Âú®SpringMVC‰∏≠ @EnableConfigurationProperties ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÁÜüÊÇâÁöÑÁ±ªÔºå‰∏äÈù¢‰ºöÂ∞ÜServerProperties Á±ª‰∏≠ÁöÑ‰∏Ä‰∫õÈÖçÁΩÆÂä†ËΩΩÂà∞ÂΩìÂâçÁ±ª‰∏≠ÔºåÁÇπËøõ ServletPropertiesÔºö</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(</span></span><br><span class="line"><span class="meta">    prefix = "server",</span></span><br><span class="line"><span class="meta">    ignoreUnknownFields = true</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerProperties</span> {}</span><br></pre></td></tr></tbody></table></figure>

<p>@ConfigurationProperties Â∞ÜÈÖçÁΩÆÊñá‰ª∂ÁöÑÂ±ûÊÄßÂØπÂ∫îÁöÑÂÄºËØªÂÖ•Âà∞ ServerProperties Ëøô‰∏™Á±ª‰∏≠Ôºåprefix=‚Äúserver‚Äù ‰ºöËØªÂèñ application.properties ‰∏≠ÂâçÁºÄ‰∏∫ server ÁöÑÂ±ûÊÄßÂíåÂÄº„ÄÇ</p>
</body></html>]]></content>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
</search>
